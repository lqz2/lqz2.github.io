<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Dubboå­¦ä¹ </title>
    <link href="/2025/05/25/Dubbo%E5%AD%A6%E4%B9%A0/"/>
    <url>/2025/05/25/Dubbo%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#dubbo%E5%AD%A6%E4%B9%A0">Dubboå­¦ä¹ </a><ul><li><a href="#dubbo%E6%9E%B6%E6%9E%84%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6">Dubboæ¶æ„çš„æ ¸å¿ƒç»„ä»¶</a></li><li><a href="#dubbo%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">Dubboçš„å·¥ä½œæµç¨‹</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#spi%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88dubbo%E5%A6%82%E4%BD%95%E6%89%A9%E5%B1%95%E9%BB%98%E8%AE%A4%E5%AE%9E%E7%8E%B0">SPIæœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸDubboå¦‚ä½•æ‰©å±•é»˜è®¤å®ç°ï¼Ÿ</a><ul><li><a href="#spi%E6%9C%BA%E5%88%B6">SPIæœºåˆ¶</a></li><li><a href="#dubbo%E6%89%A9%E5%B1%95%E9%BB%98%E8%AE%A4%E5%AE%9E%E7%8E%B0">Dubboæ‰©å±•é»˜è®¤å®ç°</a></li></ul></li><li><a href="#dubbo%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5">Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li></ul></li></ul><!-- /TOC --><h2 id="dubboå­¦ä¹ "><a class="markdownIt-Anchor" href="#dubboå­¦ä¹ "></a> Dubboå­¦ä¹ </h2><p>Dubboæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„Java RPCæ¡†æ¶ï¼Œæä¾›äº†åˆ†å¸ƒå¼æœåŠ¡æ²»ç†çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒæ”¯æŒå¤šç§åè®®å’Œåºåˆ—åŒ–æ–¹å¼ï¼Œèƒ½å¤Ÿå®ç°æœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€è°ƒç”¨ç­‰åŠŸèƒ½ã€‚</p><h3 id="dubboæ¶æ„çš„æ ¸å¿ƒç»„ä»¶"><a class="markdownIt-Anchor" href="#dubboæ¶æ„çš„æ ¸å¿ƒç»„ä»¶"></a> Dubboæ¶æ„çš„æ ¸å¿ƒç»„ä»¶</h3><ul><li>Containerï¼š æœåŠ¡è¿è¡Œå®¹å™¨ï¼Œè´Ÿè´£åŠ è½½ã€è¿è¡ŒæœåŠ¡æä¾›è€…ã€‚å¿…é¡»ã€‚</li><li>Providerï¼š æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼Œä¼šå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚å¿…é¡»ã€‚</li><li>Consumerï¼š è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼Œä¼šå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚å¿…é¡»ã€‚</li><li>Registryï¼š æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€‚æ³¨å†Œä¸­å¿ƒä¼šè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ã€‚éå¿…é¡»ã€‚</li><li>Monitorï¼š ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒã€‚æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ä¼šå®šæ—¶å‘é€ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚ éå¿…é¡»</li></ul><h3 id="dubboçš„å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#dubboçš„å·¥ä½œæµç¨‹"></a> Dubboçš„å·¥ä½œæµç¨‹</h3><ol><li>æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</li><li>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</li><li>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</li><li>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</li><li>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</li></ol><h3 id="åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#åŸºæœ¬ä½¿ç”¨"></a> åŸºæœ¬ä½¿ç”¨</h3><ul><li><p>å¼•å…¥dubboå’Œzookeeperçš„ä¾èµ–</p></li><li><p>æœåŠ¡æä¾›æ–¹å®šä¹‰æ¥å£å’Œå®ç°ç±»</p></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HelloService</span> &#123;<br>    <span class="hljs-title class_">String</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-title class_">String</span> name);<br>&#125;<br><br><span class="hljs-comment">// @Service: è¿™æ˜¯ Dubbo æ¡†æ¶çš„æ³¨è§£ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä¸ºæœåŠ¡æä¾›è€…ã€‚ä½¿å¾— Dubbo å¯ä»¥è‡ªåŠ¨æ‰«æå¹¶å°†æœåŠ¡å‘å¸ƒåˆ°æ³¨å†Œä¸­å¿ƒï¼Œä¾›æ¶ˆè´¹è€…å‘ç°å’Œè°ƒç”¨ã€‚</span><br><span class="hljs-meta">@Service</span>(interfaceClass=<span class="hljs-title class_">HelloService</span>.<span class="hljs-property">class</span> , retries=-<span class="hljs-number">1</span>, version=<span class="hljs-string">&quot;1.0.0&quot;</span>, timeout=<span class="hljs-number">15000</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HelloService</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ã€producerã€‘ Hello, &quot;</span> + name + <span class="hljs-string">&quot;!&quot;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æä¾›æ–¹çš„æ¥å£</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerService</span> &#123;<br><span class="hljs-comment">// @Reference æ˜¯ Dubbo æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºåœ¨æ¶ˆè´¹è€…ç«¯æ ‡è®°å¯¹ Dubbo æœåŠ¡çš„å¼•ç”¨ã€‚</span><br>    <span class="hljs-comment">// Dubbo æ¡†æ¶ä¼šè‡ªåŠ¨ä¸ºè¯¥æ³¨è§£æ ‡è®°çš„å­—æ®µæˆ–æ–¹æ³•å‚æ•°æ³¨å…¥ä»£ç†å¯¹è±¡ã€‚è¿™ä¸ªä»£ç†å¯¹è±¡å°è£…äº†åº•å±‚çš„è¿œç¨‹è°ƒç”¨é€»è¾‘ï¼Œä½¿å¾—æ¶ˆè´¹è€…å¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚</span><br>    <span class="hljs-meta">@Reference</span>(retries=-<span class="hljs-number">1</span>, version=<span class="hljs-string">&quot;1.0.0&quot;</span>, timeout = <span class="hljs-number">15000</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">HelloService</span> helloService;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">consumerSayHello</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)&#123;<br>        <span class="hljs-title class_">String</span> hello = helloService.<span class="hljs-title function_">sayHello</span>(name);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;[consumer] &quot;</span>+ hello);<br>        <span class="hljs-keyword">return</span> hello;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="spiæœºåˆ¶æ˜¯ä»€ä¹ˆdubboå¦‚ä½•æ‰©å±•é»˜è®¤å®ç°"><a class="markdownIt-Anchor" href="#spiæœºåˆ¶æ˜¯ä»€ä¹ˆdubboå¦‚ä½•æ‰©å±•é»˜è®¤å®ç°"></a> SPIæœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸDubboå¦‚ä½•æ‰©å±•é»˜è®¤å®ç°ï¼Ÿ</h3><h4 id="spiæœºåˆ¶"><a class="markdownIt-Anchor" href="#spiæœºåˆ¶"></a> SPIæœºåˆ¶</h4><p>SPI çš„å…·ä½“åŸç†æ˜¯è¿™æ ·çš„ï¼šå°†æ¥å£çš„å®ç°ç±»æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è¯»å–é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡åå°„åŠ è½½å®ç°ç±»ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™ï¼ŒåŠ¨æ€æ›¿æ¢æ¥å£çš„å®ç°ç±»ã€‚å’Œ IoC çš„è§£è€¦æ€æƒ³æ˜¯ç±»ä¼¼çš„ã€‚</p><p>å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">interface</span> <span class="hljs-title">Search</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-keyword">String</span>&gt; searchDoc(<span class="hljs-keyword">String</span> keyword);   <br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å®šä¹‰ä¸¤ä¸ªä¸åŒçš„å®ç°ç±»</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSearch</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">Search</span></span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-keyword">String</span>&gt; searchDoc(<span class="hljs-keyword">String</span> keyword) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ–‡ä»¶æœç´¢ &quot;</span>+keyword);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseSearch</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">Search</span></span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-keyword">String</span>&gt; searchDoc(<span class="hljs-keyword">String</span> keyword) &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®åº“æœç´¢ &quot;</span>+keyword);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨ META-INF/services ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºæ¥å£çš„å…¨é™å®šåï¼Œå†…å®¹ä¸ºå®ç°ç±»çš„å…¨é™å®šå</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"># <span class="hljs-keyword">META</span>-<span class="hljs-keyword">INF</span>/services/com.example.spi.<span class="hljs-keyword">Search</span><br>com.example.spi.FileSearch<br></code></pre></td></tr></table></figure><ul><li>æµ‹è¯•ç»“æœ</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> TestCase &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        ServiceLoader&lt;<span class="hljs-keyword">Search</span>&gt; s = ServiceLoader.<span class="hljs-keyword">load</span>(<span class="hljs-keyword">Search</span>.<span class="hljs-keyword">class</span>);<br>        Iterator&lt;<span class="hljs-keyword">Search</span>&gt; iterator = s.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>           <span class="hljs-keyword">Search</span> <span class="hljs-keyword">search</span> =  iterator.next();<br>           <span class="hljs-keyword">search</span>.searchDoc(&quot;hello world&quot;);<br>        &#125;<br>    &#125;<br>&#125;<br>//è¾“å‡ºæ–‡ä»¶æœç´¢ hello world<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœåœ¨<code>com.example.spi.Search</code>æ–‡ä»¶é‡Œå†™ä¸Šä¸¤ä¸ªå®ç°ç±»ï¼Œé‚£æœ€åçš„è¾“å‡ºç»“æœå°±æ˜¯ä¸¤è¡Œäº†ã€‚è¿™å°±æ˜¯å› ä¸º<code>ServiceLoader.load(Search.class)</code>åœ¨åŠ è½½æŸæ¥å£æ—¶ï¼Œä¼šå»META-INF/servicesä¸‹æ‰¾æ¥å£çš„å…¨é™å®šåæ–‡ä»¶ï¼Œå†æ ¹æ®é‡Œé¢çš„å†…å®¹åŠ è½½ç›¸åº”çš„å®ç°ç±»ã€‚</li></ul><h4 id="dubboæ‰©å±•é»˜è®¤å®ç°"><a class="markdownIt-Anchor" href="#dubboæ‰©å±•é»˜è®¤å®ç°"></a> Dubboæ‰©å±•é»˜è®¤å®ç°</h4><p>æ¯”å¦‚ä½¿ç”¨è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š</p><ul><li>å®šä¹‰ä¸€ä¸ªå®ç°ç±»å®ç°<code>LoadBalance</code>æ¥å£</li><li>å°†å®ç°ç±»çš„è·¯å¾„æ·»åŠ åˆ°<code>META-INF/dubbo/org.apache.dubbo.rpc.cluster.LoadBalance</code>æ–‡ä»¶ä¸­</li></ul><h3 id="dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"><a class="markdownIt-Anchor" href="#dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"></a> Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><ul><li>åŠ æƒè½®è¯¢</li><li>åŠ æƒéšæœºï¼Œé»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥</li><li>æœ€å°æ´»è·ƒæ•°</li><li>ä¸€è‡´æ€§å“ˆå¸Œç­‰<br />å…·ä½“è§£é‡Šå¯ä»¥åˆ°<a href="https://lqz2.github.io/2022/08/26/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">å¸¸è§é—®é¢˜</a>é‡ŒæŸ¥çœ‹</li></ul>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Guavaç¼“å­˜å­¦ä¹ </title>
    <link href="/2025/05/22/Guava%E7%BC%93%E5%AD%98%E5%AD%A6%E4%B9%A0/"/>
    <url>/2025/05/22/Guava%E7%BC%93%E5%AD%98%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="guavaç¼“å­˜å­¦ä¹ "><a class="markdownIt-Anchor" href="#guavaç¼“å­˜å­¦ä¹ "></a> Guavaç¼“å­˜å­¦ä¹ </h1><h2 id="guavaç®€ä»‹"><a class="markdownIt-Anchor" href="#guavaç®€ä»‹"></a> Guavaç®€ä»‹</h2><p>Guavaæ˜¯Googleå°è£…çš„åŸºç¡€å·¥å…·åŒ…ï¼Œä¸»è¦ç”¨äº<strong>æœ¬åœ°ç¼“å­˜</strong>ï¼Œæä¾›äº†ä»¥ä¸‹èƒ½åŠ›ï¼š</p><ul><li>å°è£…äº†ç¼“å­˜ä¸æ•°æ®æºçš„äº¤äº’æµç¨‹ï¼Œä½¿å¾—å¼€å‘æ›´å…³æ³¨äºä¸šåŠ¡æ“ä½œ</li><li>æä¾›çº¿ç¨‹å®‰å…¨çš„å­˜å–æ“ä½œï¼Œç±»æ¯”ConcurrentHashMap</li><li>æä¾›äº†å¤šç§ç¼“å­˜è¿‡æœŸç­–ç•¥ï¼Œåˆ·æ–°ç­–ç•¥</li><li>æä¾›ç¼“å­˜å‘½ä¸­ç‡çš„ç›‘æ§</li></ul><h2 id="åŸºç¡€ä½¿ç”¨"><a class="markdownIt-Anchor" href="#åŸºç¡€ä½¿ç”¨"></a> åŸºç¡€ä½¿ç”¨</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key</span>) &#123;<br>    <span class="hljs-keyword">return</span> key.<span class="hljs-title function_">toUpperCase</span>();<br>&#125;<br><br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">testCache</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Cache</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; cache = <span class="hljs-title class_">CacheBuilder</span>.<span class="hljs-title function_">newBuilder</span>()<br>            .<span class="hljs-title function_">build</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheLoader</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt;() &#123;<br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">load</span>(<span class="hljs-title class_">String</span> key) throws <span class="hljs-title class_">Exception</span> &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-title function_">convert</span>(key);<br>                &#125;<br>            &#125;);<br>    <span class="hljs-title function_">assertEquals</span>(<span class="hljs-string">&quot;HELLO&quot;</span>, cache.<span class="hljs-title function_">getUnchecked</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-title function_">assertEquals</span>(<span class="hljs-string">&quot;HELLO&quot;</span>, cache.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-title function_">assertEquals</span>(<span class="hljs-number">1</span>, cache.<span class="hljs-title function_">size</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„loadæ–¹æ³•å¯ä»¥ç†è§£ä¸ºä»æ•°æ®æºåŠ è½½æ•°æ®çš„è¿‡ç¨‹ã€‚</p><p>å½“è°ƒç”¨<code>getUnchecked</code>æ–¹æ³•æˆ–è€…<code>get</code>æ–¹æ³•æ—¶ï¼ŒGuavaçš„è¡Œä¸ºå¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›</li><li>ç¼“å­˜æœªå‘½ä¸­ï¼Œä¼šè°ƒç”¨loadæ¥å£ï¼ŒåŠ è½½è¿›ç¼“å­˜ï¼Œè¿”å›ç¼“å­˜å€¼</li><li>å¤šçº¿ç¨‹ä¸‹ï¼ŒAçº¿ç¨‹loadæ—¶ï¼Œä¼šé˜»å¡Bçº¿ç¨‹çš„è¯·æ±‚ï¼Œç›´åˆ°ç¼“å­˜åŠ è½½å®Œæ¯•</li></ul><h2 id="é¢„åŠ è½½ç¼“å­˜"><a class="markdownIt-Anchor" href="#é¢„åŠ è½½ç¼“å­˜"></a> é¢„åŠ è½½ç¼“å­˜</h2><p>é¢„åŠ è½½ç¼“å­˜ä¸€èˆ¬ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>ç§’æ€åœºæ™¯ï¼Œäº‹å…ˆå°†çƒ­ç‚¹å•†å“åŠ è½½åˆ°ç¼“å­˜</li><li>ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œé¢„åŠ è½½ä¸€äº›æ•°æ®åˆ°ç¼“å­˜</li></ul><p>é¢„åŠ è½½ç¼“å­˜ä¸€èˆ¬ç”¨putï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">cache.<span class="hljs-keyword">put</span>(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;value&quot;</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„putæ–¹æ³•ä¼šç›´æ¥å°†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œä¸ä¼šè°ƒç”¨loadæ–¹æ³•ã€‚</p><blockquote><p>ä¸è¦ä½¿ç”¨getæ–¹æ³•æ¥é¢„åŠ è½½æ•°æ®ï¼Œå› ä¸ºgetæ–¹æ³•ä¼šè°ƒç”¨loadæ–¹æ³•ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><h2 id="ç¼“å­˜è¿‡æœŸ"><a class="markdownIt-Anchor" href="#ç¼“å­˜è¿‡æœŸ"></a> ç¼“å­˜è¿‡æœŸ</h2><h3 id="ç¼“å­˜å›ºå®šæ•°é‡çš„å€¼"><a class="markdownIt-Anchor" href="#ç¼“å­˜å›ºå®šæ•°é‡çš„å€¼"></a> ç¼“å­˜å›ºå®šæ•°é‡çš„å€¼</h3><p>é€šè¿‡maximumSizeæ–¹æ³•è®¾ç½®ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œå½“ç¼“å­˜è¶…è¿‡æœ€å¤§å€¼æ—¶ï¼ŒGuavaä¼šè‡ªåŠ¨è¿›è¡Œç¼“å­˜æ·˜æ±°ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lasso">@Test<br><span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> maxSizeTest()&#123;<br>    <span class="hljs-keyword">Cache</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; <span class="hljs-keyword">cache</span> = CacheBuilder.newBuilder()<br>            .maximumSize(<span class="hljs-number">2</span>)<br>            .build(<span class="hljs-literal">new</span> CacheLoader&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;() &#123;<br>                @Override<br>                <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> load(<span class="hljs-built_in">String</span> key) throws Exception &#123;<br>                    <span class="hljs-keyword">return</span> convert(key);<br>                &#125;<br>            &#125;);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    assertEquals(<span class="hljs-number">2</span>, <span class="hljs-keyword">cache</span>.size());<br>    <span class="hljs-keyword">cache</span>.getIfPresent(<span class="hljs-string">&quot;key1&quot;</span>);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    assertEquals(<span class="hljs-number">2</span>, <span class="hljs-keyword">cache</span>.size());<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>getIfPresent()</code>ä¸<code>getUnchecked()</code>å’Œ<code>get()</code>çš„åŒºåˆ«åœ¨äºï¼Œå½“ç¼“å­˜æœªå‘½ä¸­æ—¶ï¼Œ<code>getIfPresent()</code>ä¸ä¼šè°ƒç”¨loadæ–¹æ³•ï¼Œè€Œæ˜¯è¿”å›nullã€‚</p><h3 id="lruè¿‡æœŸç­–ç•¥"><a class="markdownIt-Anchor" href="#lruè¿‡æœŸç­–ç•¥"></a> LRUè¿‡æœŸç­–ç•¥</h3><p>Guava Cache é»˜è®¤é‡‡ç”¨LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•æ¥æ·˜æ±°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚LRUç®—æ³•ä¼šä¼˜å…ˆæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ã€‚<br />ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œkey2ä¼šè¢«æ·˜æ±°ï¼Œå› ä¸ºkey2æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„ã€‚</p><h3 id="ç¼“å­˜å›ºå®šæ—¶é—´"><a class="markdownIt-Anchor" href="#ç¼“å­˜å›ºå®šæ—¶é—´"></a> ç¼“å­˜å›ºå®šæ—¶é—´</h3><p>Guava Cacheè¿˜å¯ä»¥ç»™ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¸¸è§çš„æœ‰ï¼š</p><ul><li>expireAfterAccessï¼šè®¿é—®åå¤šä¹…è¿‡æœŸ</li><li>expireAfterWriteï¼šå†™å…¥åå¤šä¹…è¿‡æœŸ</li></ul><h2 id="ç§»é™¤ç¼“å­˜"><a class="markdownIt-Anchor" href="#ç§»é™¤ç¼“å­˜"></a> ç§»é™¤ç¼“å­˜</h2><p>Guava Cacheä¸­ç§»é™¤ç¼“å­˜ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>cache.invalidate(key)ï¼šç§»é™¤å•ä¸ªç¼“å­˜</li><li>cache.invalidateAll()ï¼šç§»é™¤æ‰€æœ‰ç¼“å­˜</li></ul><h2 id="ç¼“å­˜åˆ·æ–°"><a class="markdownIt-Anchor" href="#ç¼“å­˜åˆ·æ–°"></a> ç¼“å­˜åˆ·æ–°</h2><h3 id="æ‰‹åŠ¨åˆ·æ–°"><a class="markdownIt-Anchor" href="#æ‰‹åŠ¨åˆ·æ–°"></a> æ‰‹åŠ¨åˆ·æ–°</h3><p>é€šè¿‡refresh()æ–¹æ³•æ‰‹åŠ¨åˆ·æ–°ç¼“å­˜ï¼Œrefresh()æ–¹æ³•ä¼šè°ƒç”¨loadæ–¹æ³•ï¼Œé‡æ–°åŠ è½½æ•°æ®åˆ°ç¼“å­˜ä¸­ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šrefresh()æ–¹æ³•ä¸ä¼šé˜»å¡getæ–¹æ³•ï¼Œæ‰€ä»¥refreshæœŸé—´ï¼Œgetæ–¹æ³•ä¼šè¿”å›æ—§çš„ç¼“å­˜å€¼ã€‚</p><h3 id="å®šæ—¶åˆ·æ–°"><a class="markdownIt-Anchor" href="#å®šæ—¶åˆ·æ–°"></a> å®šæ—¶åˆ·æ–°</h3><p>é€šè¿‡refreshAfterWriteæ–¹æ³•è®¾ç½®å®šæ—¶åˆ·æ–°æ—¶é—´ï¼ŒGuavaä¼šåœ¨æŒ‡å®šæ—¶é—´åè‡ªåŠ¨åˆ·æ–°ç¼“å­˜ã€‚</p><h2 id="ç¼“å­˜å‘½ä¸­ç»Ÿè®¡"><a class="markdownIt-Anchor" href="#ç¼“å­˜å‘½ä¸­ç»Ÿè®¡"></a> ç¼“å­˜å‘½ä¸­ç»Ÿè®¡</h2><p>Guava Cacheæä¾›äº†ç¼“å­˜å‘½ä¸­ç‡çš„ç»Ÿè®¡åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡recordStats()æ–¹æ³•æ¥è®°å½•ç¼“å­˜å‘½ä¸­ç‡ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lasso">@Test<br><span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> testCacheStats() &#123;<br>    <span class="hljs-keyword">Cache</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; <span class="hljs-keyword">cache</span> = CacheBuilder.newBuilder()<br>            .maximumSize(<span class="hljs-number">2</span>)<br>            .recordStats()<br>            .build(<span class="hljs-literal">new</span> CacheLoader&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;() &#123;<br>                @Override<br>                <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> load(<span class="hljs-built_in">String</span> key) throws Exception &#123;<br>                    <span class="hljs-keyword">return</span> convert(key);<br>                &#125;<br>            &#125;);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    CacheStats stats = <span class="hljs-keyword">cache</span>.stats();<br>    System.out.println(<span class="hljs-string">&quot;Cache Stats: &quot;</span> + stats);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¼“å­˜ç§»é™¤é€šçŸ¥"><a class="markdownIt-Anchor" href="#ç¼“å­˜ç§»é™¤é€šçŸ¥"></a> ç¼“å­˜ç§»é™¤é€šçŸ¥</h2><p>å¦‚æœå¸Œæœ›åœ¨ç¼“å­˜å¤±æ•ˆæˆ–è€…è¢«ç§»é™¤æ—¶è¿›è¡Œä¸€äº›å›è°ƒå¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨removalListeneræ–¹æ³•æ¥æ·»åŠ ç§»é™¤é€šçŸ¥ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lasso">@Test<br><span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> testCacheRemovalListener() &#123;<br>    <span class="hljs-keyword">Cache</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; <span class="hljs-keyword">cache</span> = CacheBuilder.newBuilder()<br>            .maximumSize(<span class="hljs-number">2</span>)<br>            .removalListener(cacheItem -&gt; &#123;<br>                System.out.println(cacheItem+<span class="hljs-string">&quot; was removed&quot;</span>+<span class="hljs-string">&quot;caused by &quot;</span>+cacheItem.getCause());<br>            &#125;)<br>            .build(<span class="hljs-literal">new</span> CacheLoader&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;() &#123;<br>                @Override<br>                <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> load(<span class="hljs-built_in">String</span> key) throws Exception &#123;<br>                    <span class="hljs-keyword">return</span> convert(key);<br>                &#125;<br>            &#125;);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    <span class="hljs-keyword">cache</span>.put(<span class="hljs-string">&quot;key2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>    <span class="hljs-keyword">cache</span>.invalidate(<span class="hljs-string">&quot;key1&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜"><a class="markdownIt-Anchor" href="#å¸¸è§é—®é¢˜"></a> å¸¸è§é—®é¢˜</h2><h3 id="ä¸ºä»€ä¹ˆä¸ç”¨redis"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆä¸ç”¨redis"></a> ä¸ºä»€ä¹ˆä¸ç”¨redisï¼Ÿ</h3><p>å¦‚æœæœ¬åœ°ç¼“å­˜èƒ½è§£å†³ï¼Œæ²¡å¿…è¦å¼•å…¥ä¸€ä¸ªä¸­é—´ä»¶</p><h3 id="å¦‚ä½•ä¿è¯ç¼“å­˜å’Œæ•°æ®æºä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#å¦‚ä½•ä¿è¯ç¼“å­˜å’Œæ•°æ®æºä¸€è‡´æ€§"></a> å¦‚ä½•ä¿è¯ç¼“å­˜å’Œæ•°æ®æºä¸€è‡´æ€§ï¼Ÿ</h3><ul><li>ä¸€èˆ¬åœ¨æ•°æ®æ•æ„Ÿåº¦ä¸é«˜çš„åœºæ™¯ï¼ŒçŸ­æš‚çš„ä¸ä¸€è‡´å¯ä»¥æ¥å—</li><li>å¦å¤–çš„æƒ…å†µï¼Œå¯ä»¥è®¾ç½®å®šæœŸåˆ·æ–°ç¼“å­˜æˆ–è€…æ‰‹åŠ¨åˆ·æ–°ç¼“å­˜çš„æœºåˆ¶ï¼Œæ¯”å¦‚ç»™é¡µé¢æ·»åŠ ä¸€ä¸ªåˆ·æ–°æŒ‰é’®ï¼Œå½“æ•°æ®æºæ›´æ–°ååˆ·æ–°ç¼“å­˜ï¼Œæˆ–è€…å®šæœŸåˆ·æ–°ç¼“å­˜</li><li>é€šè¿‡é…ç½®ä¸­å¿ƒåè°ƒå’ŒåŒæ­¥</li></ul>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°ç»„ä¸­é‡å¤å‡ºç°çš„æ•°æ®</title>
    <link href="/2025/04/25/%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E5%87%BA%E7%8E%B0%E7%9A%84%E6%95%B0%E6%8D%AE/"/>
    <url>/2025/04/25/%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E5%87%BA%E7%8E%B0%E7%9A%84%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="æ•°ç»„ä¸­é‡å¤å‡ºç°çš„æ•°æ®"><a class="markdownIt-Anchor" href="#æ•°ç»„ä¸­é‡å¤å‡ºç°çš„æ•°æ®"></a> æ•°ç»„ä¸­é‡å¤å‡ºç°çš„æ•°æ®</h2><!-- TOC --><ul><li><a href="#%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E5%87%BA%E7%8E%B0%E7%9A%84%E6%95%B0%E6%8D%AE">æ•°ç»„ä¸­é‡å¤å‡ºç°çš„æ•°æ®</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/find-all-duplicates-in-an-array/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­ nums çš„æ‰€æœ‰æ•´æ•°éƒ½åœ¨èŒƒå›´ [1, n] å†…ï¼Œä¸”æ¯ä¸ªæ•´æ•°å‡ºç° æœ€å¤šä¸¤æ¬¡ ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰å‡ºç° ä¸¤æ¬¡ çš„æ•´æ•°ï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(n) ä¸”ä»…ä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´ï¼ˆä¸åŒ…æ‹¬å­˜å‚¨è¾“å‡ºæ‰€éœ€çš„ç©ºé—´ï¼‰çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æŸbyteä¸‰é¢é¢˜ï¼Œå‰ä¸¤é¢æ‰‹æ’•éƒ½åšå‡ºæ¥äº†ï¼Œè¿™é“é¢˜å¡ä½äº†ğŸ’”ğŸ’”ğŸ’”</p><p>æ€è·¯æ˜¯éå†æ•°ç»„ï¼ŒæŠŠå½“å‰å…ƒç´ çš„å€¼ä½œä¸ºç´¢å¼•</p><ul><li>å¦‚æœç´¢å¼•ä½ç½®å¤„æ˜¯æ­£æ•°ï¼Œå°†ä»–å–å</li><li>å¦‚æœç´¢å¼•ä½ç½®å¤„æ˜¯è´Ÿæ•°ï¼Œè¯´æ˜è¿™ä¸ªç´¢å¼•å·²ç»ä½¿ç”¨è¿‡äº†ï¼ŒåŠ å…¥ç»“æœé›†</li></ul><p>æ„Ÿè§‰å°±å±äºåšè¿‡çš„ç§’æ€ï¼Œæ²¡åšè¿‡çš„åç‰¢ğŸ’”</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">findDuplicates</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        vector&lt;<span class="hljs-type">int</span>&gt; ans;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>            <span class="hljs-type">int</span> idx=<span class="hljs-built_in">abs</span>(nums[i]);<br>            <span class="hljs-keyword">if</span>(nums[idx<span class="hljs-number">-1</span>]&gt;<span class="hljs-number">0</span>)<br>                nums[idx<span class="hljs-number">-1</span>]=-nums[idx<span class="hljs-number">-1</span>];<br>            <span class="hljs-keyword">else</span><br>                ans.<span class="hljs-built_in">push_back</span>(idx);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°</title>
    <link href="/2025/04/13/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%AC%ACk%E5%A4%A7%E7%9A%84%E6%95%B0/"/>
    <url>/2025/04/13/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%AC%ACk%E5%A4%A7%E7%9A%84%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°"><a class="markdownIt-Anchor" href="#æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°"></a> æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°</h2><!-- TOC --><ul><li><a href="#%E6%95%B0%E7%BB%84%E4%B8%AD%E7%AC%ACk%E5%A4%A7%E7%9A%84%E6%95%B0">æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/kth-largest-element-in-an-array/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šæ•´æ•°æ•°ç»„ nums å’Œæ•´æ•° kï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚</p><p>è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: [3,2,1,5,6,4], k = 2</span><br><span class="hljs-section">è¾“å‡º: 5</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¹‹å‰ç¬¬ä¸€éç›´æ¥æ‹¿å †åšäº†ï¼Œå®é™…ä¸Šç”¨å¿«æ’å¯ä»¥è¾¾åˆ°O(n)çš„å¤æ‚åº¦</p><p>æ€è·¯å°±æ˜¯å¿«æ’ï¼Œæ¯æ¬¡å¿«æ’åï¼Œpivotå·¦è¾¹çš„æ•°éƒ½å°äºå®ƒï¼Œpivotå³è¾¹çš„æ•°éƒ½å¤§äºå®ƒï¼Œæ‰€ä»¥pivotçš„ä½ç½®å°±å›ºå®šäº†<br />å› æ­¤ï¼Œå½“pivot==n-kæ—¶ï¼Œå¯¹åº”çš„æ•°å°±æ˜¯ç¬¬kå¤§çš„æ•°<br />ä¸å¿«æ’ä¸åŒçš„æ˜¯ï¼Œæ¯æ¬¡ç§»åŠ¨åï¼Œä¸ç”¨åŒæ—¶å¯¹å·¦å³ä¸¤ä¸ªåŒºé—´é€’å½’ï¼Œè€Œæ˜¯é€‰æ‹©n-kæ‰€åœ¨çš„åŒºé—´é€’å½’ï¼Œæœ‰ç‚¹åƒäºŒåˆ†æŸ¥æ‰¾</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">int</span> adjust(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums,<span class="hljs-keyword">int</span> l,<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> <span class="hljs-keyword">target</span>)&#123;<br>        <span class="hljs-keyword">int</span> tl=l,tr=r;<br>        <span class="hljs-keyword">int</span> t=nums[l];<br>        <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>            <span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;nums[r]&gt;=t)<br>                --r;<br>            nums[l]=nums[r];<br>            <span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;nums[l]&lt;=t)<br>                ++l;<br>            nums[r]=nums[l];<br>        &#125;<br>        nums[l]=t;<br>        <span class="hljs-keyword">if</span>(l==<span class="hljs-keyword">target</span>)<br>            <span class="hljs-keyword">return</span> nums[l];<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(l&lt;<span class="hljs-keyword">target</span>)<br>            <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">adjust</span><span class="hljs-params">(nums,l+<span class="hljs-number">1</span>,tr,<span class="hljs-keyword">target</span>)</span></span>;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">adjust</span><span class="hljs-params">(nums,tl,l<span class="hljs-number">-1</span>,<span class="hljs-keyword">target</span>)</span></span>;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findKthLargest</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> k)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> n=nums.size();<br>        <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">adjust</span><span class="hljs-params">(nums,<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>,n-k)</span></span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è€—æ—¶æœ€çŸ­çº¿è·¯</title>
    <link href="/2025/04/10/%E8%80%97%E6%97%B6%E6%9C%80%E7%9F%AD%E7%BA%BF%E8%B7%AF/"/>
    <url>/2025/04/10/%E8%80%97%E6%97%B6%E6%9C%80%E7%9F%AD%E7%BA%BF%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="è€—æ—¶æœ€çŸ­çº¿è·¯"><a class="markdownIt-Anchor" href="#è€—æ—¶æœ€çŸ­çº¿è·¯"></a> è€—æ—¶æœ€çŸ­çº¿è·¯</h2><!-- TOC --><ul><li><a href="#%E8%80%97%E6%97%B6%E6%9C%80%E7%9F%AD%E7%BA%BF%E8%B7%AF">è€—æ—¶æœ€çŸ­çº¿è·¯</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://oj.niumacode.com/training/63/problem/P1509">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å¤§æ¹¾åŒºæŸåŸå¸‚åœ°é“çº¿è·¯éå¸¸å¯†é›†ï¼Œä¹˜å®¢å¾ˆéš¾ä¸€çœ¼çœ‹å‡ºé€‰æ‹©å“ªæ¡çº¿è·¯ä¹˜åæ¯”è¾ƒåˆé€‚ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ°é“å…¬å¸å¸Œæœ›ä½ å¼€å‘ä¸€ä¸ªç¨‹åºå¸®åŠ©ä¹˜å®¢æŒ‘é€‰åˆé€‚çš„ä¹˜åçº¿è·¯ï¼Œä½¿å¾—ä¹˜åæ—¶é—´æœ€çŸ­ï¼Œåœ°é“å…¬å¸å¯ä»¥æä¾›çš„æ•°æ®æ˜¯å„ç›¸é‚»ç«™ç‚¹ä¹‹é—´çš„ä¹˜åæ—¶é—´ã€‚</p><p>è¾“å…¥è¯´æ˜ï¼š<br />ç¬¬ä¸€è¡Œ:Nï¼Œç«™ç‚¹æ€»æ•°,3&lt;=N&lt;=20.<br />ç¬¬äºŒè¡Œ:ä¹˜å®«çš„å‡ºå‘å’Œåˆ°è¾¾ç«™ç‚¹ã€‚<br />ç¬¬ä¸‰è¡Œèµ·:ç›¸é‚»ç«™ç‚¹ä¹‹é—´çš„ä¹˜åæ—¶é—´ï¼Œæ¯å¯¹ç«™ç‚¹ä¸€è¡Œï¼Œç«™ç‚¹åç§°æ˜¯å•ä¸ªå°å†™å­—æ¯ï¼Œç«™ç‚¹åä¸€å®šåŒ…æ‹¬å‡ºå‘å’Œåˆ°<br />è¾¾ç«™ç‚¹ï¼Œè¾“å…¥ä¿è¯åªæœ‰ä¸€ä¸ªå”¯ä¸€è§£;<br />ç»“æŸè¡Œ:0000</p><p>è¾“å‡ºè¯´æ˜ï¼šè€—æ—¶æœ€çŸ­çš„çº¿è·¯</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs css">è¾“å…¥ï¼š<br><span class="hljs-number">12</span><br><span class="hljs-selector-tag">a</span> e<br><span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">b</span> <span class="hljs-number">2</span><br><span class="hljs-selector-tag">b</span> c <span class="hljs-number">2</span><br>c d <span class="hljs-number">2</span><br>d e <span class="hljs-number">2</span><br>f <span class="hljs-selector-tag">b</span> <span class="hljs-number">3</span><br><span class="hljs-selector-tag">b</span> g <span class="hljs-number">3</span><br>g h <span class="hljs-number">2</span><br>h <span class="hljs-selector-tag">i</span> <span class="hljs-number">3</span><br>j h <span class="hljs-number">2</span><br>h e <span class="hljs-number">3</span><br>e k <span class="hljs-number">2</span><br>k <span class="hljs-selector-tag">i</span> <span class="hljs-number">4</span><br><span class="hljs-number">0000</span><br><br>è¾“å‡ºï¼š<br><span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">b</span> c d e<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¸¸è§„å †ä¼˜åŒ–çš„dijkstraï¼Œä¸è¿‡èŠ‚ç‚¹æ•°ç›®å¾ˆå°‘ï¼Œæ‰€ä»¥äºŒç»´æ•°ç»„å­˜å›¾å³å¯ï¼Œç”±äºè¦è¾“å‡ºè·¯å¾„ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå‰é©±æ•°ç»„æ¥å­˜å‚¨å‰é©±èŠ‚ç‚¹ï¼Œæ¯æ¬¡æ¾å¼›æˆåŠŸååŒæ­¥æ›´æ–°å‰é©±èŠ‚ç‚¹å³å¯</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> mp[<span class="hljs-number">26</span>][<span class="hljs-number">26</span>];<br><span class="hljs-type">int</span> dis[<span class="hljs-number">26</span>];<br><span class="hljs-type">bool</span> vis[<span class="hljs-number">26</span>];<br><span class="hljs-type">int</span> pre[<span class="hljs-number">26</span>];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-type">int</span> w;<br>    <span class="hljs-built_in">node</span>(<span class="hljs-type">int</span> nn,<span class="hljs-type">int</span> ww):<span class="hljs-built_in">n</span>(nn),<span class="hljs-built_in">w</span>(ww)&#123;&#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> node&amp; t) <span class="hljs-type">const</span>&#123;<br>        <span class="hljs-keyword">return</span> w&gt;t.w;<br>    &#125;<br>&#125;;<br><br>priority_queue&lt;node&gt; pq;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-type">char</span> s, d;<br>    cin&gt;&gt;s&gt;&gt;d;<br>    <span class="hljs-built_in">memset</span>(dis,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dis));<br>    <span class="hljs-built_in">memset</span>(mp,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(mp));<br>    <span class="hljs-built_in">memset</span>(pre,<span class="hljs-number">-1</span>,<span class="hljs-built_in">sizeof</span>(pre));<br>    dis[s-<span class="hljs-string">&#x27;a&#x27;</span>]=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        string s1,s2;<br>        <span class="hljs-type">int</span> jl;<br>        cin&gt;&gt;s1;<br>        <span class="hljs-keyword">if</span>(s1==<span class="hljs-string">&quot;0000&quot;</span>)<br>            <span class="hljs-keyword">break</span>;<br>        cin&gt;&gt;s2&gt;&gt;jl;<br>        <br>        mp[s1[<span class="hljs-number">0</span>]-<span class="hljs-string">&#x27;a&#x27;</span>][s2[<span class="hljs-number">0</span>]-<span class="hljs-string">&#x27;a&#x27;</span>]=jl;<br>    &#125;<br>    <br>    pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(s-<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-number">0</span>));<br>    <span class="hljs-keyword">while</span>(!pq.<span class="hljs-built_in">empty</span>())&#123;<br>        node t=pq.<span class="hljs-built_in">top</span>();<br>        pq.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-type">int</span> u=t.n;<br>        <span class="hljs-keyword">if</span>(!vis[u])&#123;<br>            vis[u]=<span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>                <span class="hljs-keyword">if</span>(dis[u]+mp[u][i]&lt;dis[i])&#123;<br>                    dis[i]=dis[u]+mp[u][i];<br>                    pre[i]=u;<br>                    <span class="hljs-keyword">if</span>(!vis[i])<br>                        pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(i,dis[i]));<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">int</span> ans=d-<span class="hljs-string">&#x27;a&#x27;</span>;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    v.<span class="hljs-built_in">push_back</span>(ans);<br>    <span class="hljs-keyword">while</span>(ans!=s-<span class="hljs-string">&#x27;a&#x27;</span>)&#123;<br>        ans=pre[ans];<br>        v.<span class="hljs-built_in">push_back</span>(ans);<br>    &#125;<br>    <span class="hljs-built_in">reverse</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> tt:v)<br>        cout&lt;&lt;<span class="hljs-built_in">char</span>(tt+<span class="hljs-string">&#x27;a&#x27;</span>)&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®ç°å“ˆå¸Œè¡¨</title>
    <link href="/2025/04/09/%E5%AE%9E%E7%8E%B0%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    <url>/2025/04/09/%E5%AE%9E%E7%8E%B0%E5%93%88%E5%B8%8C%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å®ç°å“ˆå¸Œè¡¨"><a class="markdownIt-Anchor" href="#å®ç°å“ˆå¸Œè¡¨"></a> å®ç°å“ˆå¸Œè¡¨</h2><!-- TOC --><ul><li><a href="#%E5%AE%9E%E7%8E%B0%E5%93%88%E5%B8%8C%E8%A1%A8">å®ç°å“ˆå¸Œè¡¨</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/design-hashmap/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ã€‚</p><p>å®ç° MyHashMap ç±»ï¼š</p><p>MyHashMap() ç”¨ç©ºæ˜ å°„åˆå§‹åŒ–å¯¹è±¡<br />void put(int key, int value) å‘ HashMap æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ (key, value) ã€‚å¦‚æœ key å·²ç»å­˜åœ¨äºæ˜ å°„ä¸­ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ value ã€‚<br />int get(int key) è¿”å›ç‰¹å®šçš„ key æ‰€æ˜ å°„çš„ value ï¼›å¦‚æœæ˜ å°„ä¸­ä¸åŒ…å« key çš„æ˜ å°„ï¼Œè¿”å› -1 ã€‚<br />void remove(key) å¦‚æœæ˜ å°„ä¸­å­˜åœ¨ key çš„æ˜ å°„ï¼Œåˆ™ç§»é™¤ key å’Œå®ƒæ‰€å¯¹åº”çš„ value ã€‚</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">&quot;MyHashMap&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;remove&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>]<br>[[], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">2</span>]]<br>è¾“å‡ºï¼š<br>[null, null, null, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, null, <span class="hljs-number">1</span>, null, <span class="hljs-number">-1</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¹‹å‰é¢è¯•ä¸­è®©ç°åœºå†™ï¼Œæ²¡å‡†å¤‡è¿‡ï¼Œæ‰‹å†™çš„æ•°ç»„+é“¾è¡¨ï¼Œé“¾è¡¨å®ç°æœ‰äº›ä¸å®Œå–„çš„åœ°æ–¹ï¼Œè¿™é‡Œé‡æ–°åšä¸€éï¼Œé“¾è¡¨ç›´æ¥ç”¨çš„c++çš„list<br />æ€»ä½“æ€è·¯å°±æ˜¯æ— è®ºä»€ä¹ˆæ“ä½œï¼Œéƒ½æ˜¯å…ˆè·å–å“ˆå¸Œå€¼ï¼Œç„¶åæ‰¾åˆ°ç´¢å¼•ï¼Œéå†é“¾è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„å€¼</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashMap</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;list&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt;&gt; mp;<br>    <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> sz=<span class="hljs-number">1e5</span>+<span class="hljs-number">7</span>;<br><br>    <span class="hljs-built_in">MyHashMap</span>():<span class="hljs-built_in">mp</span>(sz) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">hash</span><span class="hljs-params">(<span class="hljs-type">int</span> key)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> key%sz;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">put</span><span class="hljs-params">(<span class="hljs-type">int</span> key, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>        <span class="hljs-type">int</span> idx=<span class="hljs-built_in">hash</span>(key);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it=mp[idx].<span class="hljs-built_in">begin</span>();it!=mp[idx].<span class="hljs-built_in">end</span>();++it)&#123;<br>            <span class="hljs-keyword">if</span>((*it).first==key)&#123;<br>                (*it).second=value;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>        &#125;<br>        mp[idx].<span class="hljs-built_in">push_back</span>(&#123;key,value&#125;);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">int</span> key)</span> </span>&#123;<br>        <span class="hljs-type">int</span> idx=<span class="hljs-built_in">hash</span>(key);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it=mp[idx].<span class="hljs-built_in">begin</span>();it!=mp[idx].<span class="hljs-built_in">end</span>();++it)&#123;<br>            <span class="hljs-keyword">if</span>((*it).first==key)&#123;<br>                <span class="hljs-keyword">return</span> (*it).second;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> key)</span> </span>&#123;<br>        <span class="hljs-type">int</span> idx=<span class="hljs-built_in">hash</span>(key);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it=mp[idx].<span class="hljs-built_in">begin</span>();it!=mp[idx].<span class="hljs-built_in">end</span>();++it)&#123;<br>            <span class="hljs-keyword">if</span>((*it).first==key)&#123;<br>                mp[idx].<span class="hljs-built_in">erase</span>(it);<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‹¼å›¢äº¤æ˜“å­¦ä¹ </title>
    <link href="/2025/04/01/%E6%8B%BC%E5%9B%A2%E4%BA%A4%E6%98%93%E5%AD%A6%E4%B9%A0/"/>
    <url>/2025/04/01/%E6%8B%BC%E5%9B%A2%E4%BA%A4%E6%98%93%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%B0%8F%E5%9E%8B%E6%94%AF%E4%BB%98%E5%95%86%E5%9F%8E">å°å‹æ”¯ä»˜å•†åŸ</a><ul><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE">ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®</a></li></ul></li><li><a href="#%E6%8B%BC%E5%9B%A2%E4%BA%A4%E6%98%93%E5%AD%A6%E4%B9%A0">æ‹¼å›¢äº¤æ˜“å­¦ä¹ </a><ul><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE-1">ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®</a></li><li><a href="#%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B">æ•´ä½“æµç¨‹</a></li><li><a href="#%E8%AE%B2%E8%AE%B2ddd%E5%92%8C%E5%85%AD%E8%BE%B9%E5%BD%A2%E6%9E%B6%E6%9E%84">è®²è®²DDDå’Œå…­è¾¹å½¢æ¶æ„ï¼Ÿ</a></li><li><a href="#%E8%B4%AB%E8%A1%80%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%85%85%E8%A1%80%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB">è´«è¡€æ¨¡å‹å’Œå……è¡€æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%92%E5%88%86%E7%9A%84%E5%90%84%E4%B8%AA%E9%A2%86%E5%9F%9F%E4%B9%8B%E9%97%B4%E5%A6%82%E4%BD%95%E5%8D%8F%E4%BD%9C">é¡¹ç›®ä¸­çš„é¢†åŸŸæ¨¡å‹æ˜¯å¦‚ä½•åˆ’åˆ†çš„ï¼Ÿå„ä¸ªé¢†åŸŸä¹‹é—´å¦‚ä½•åä½œï¼Ÿ</a></li><li><a href="#%E8%A7%84%E5%88%99%E6%A0%91%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8%E7%9A%84">è§„åˆ™æ ‘è®¾è®¡æ¨¡å‹æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ</a></li><li><a href="#%E8%AF%95%E7%AE%97%E9%80%BB%E8%BE%91%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84">è¯•ç®—é€»è¾‘æ€ä¹ˆå®ç°çš„ï¼Ÿ</a></li><li><a href="#%E4%BA%BA%E7%BE%A4%E6%A0%87%E7%AD%BE%E8%BF%87%E6%BB%A4%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0">äººç¾¤æ ‡ç­¾è¿‡æ»¤æ€ä¹ˆå®ç°ï¼Ÿ</a></li><li><a href="#%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AEdcc%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84">åŠ¨æ€é…ç½®(DCC)æ€ä¹ˆå®ç°çš„ï¼Ÿ</a></li><li><a href="#%E4%BA%A4%E6%98%93%E8%A7%84%E5%88%99%E8%BF%87%E6%BB%A4%E6%80%8E%E4%B9%88%E7%94%A8%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%9A%84">äº¤æ˜“è§„åˆ™è¿‡æ»¤æ€ä¹ˆç”¨è´£ä»»é“¾æ¨¡å¼å®ç°çš„ï¼Ÿ</a></li><li><a href="#%E4%BA%A4%E6%98%93%E7%BB%93%E7%AE%97%E8%BF%87%E6%BB%A4%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84">äº¤æ˜“ç»“ç®—è¿‡æ»¤æ€ä¹ˆå®ç°çš„ï¼Ÿ</a></li><li><a href="#%E7%BB%93%E7%AE%97%E8%A7%A6%E8%BE%BE%E7%9A%84%E5%9B%9E%E8%B0%83%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84">ç»“ç®—è§¦è¾¾çš„å›è°ƒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</a></li><li><a href="#%E9%A1%B9%E7%9B%AE%E9%87%8C%E9%94%81%E6%80%8E%E4%B9%88%E7%94%A8%E7%9A%84">é¡¹ç›®é‡Œé”æ€ä¹ˆç”¨çš„ï¼Ÿ</a><ul><li><a href="#ddd%E9%A2%86%E5%9F%9F%E4%B9%8B%E9%97%B4%E5%A6%82%E4%BD%95%E9%80%9A%E4%BF%A1">DDDé¢†åŸŸä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</a></li></ul></li></ul></li></ul><!-- /TOC --><h1 id="å°å‹æ”¯ä»˜å•†åŸ"><a class="markdownIt-Anchor" href="#å°å‹æ”¯ä»˜å•†åŸ"></a> å°å‹æ”¯ä»˜å•†åŸ</h1><h2 id="ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®"></a> ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®</h2><p>è¯¥é¡¹ç›®ä¸»è¦å›´ç»•ä¸‹å•æ”¯ä»˜åœºæ™¯ï¼Œå®ç°äº†æ‰«ç ç™»é™†ã€å•†å“ä¸‹å•ã€æ”¯ä»˜ã€è¶…æ—¶å…³å•ç­‰åŠŸèƒ½</p><p>æ¶‰åŠçš„æ•°æ®åº“è¡¨ä¸»è¦æœ‰ï¼šæ”¯ä»˜è®¢å•è¡¨<br />æ”¯ä»˜è®¢å•è¡¨åŒ…å«çš„ä¸»è¦å­—æ®µæœ‰ï¼š</p><ul><li>è‡ªå¢id</li><li>ç”¨æˆ·id</li><li>å•†å“id</li><li>è®¢å•id</li><li>è®¢å•é‡‘é¢</li><li>è®¢å•çŠ¶æ€</li><li>æ”¯ä»˜è¡¨å•url</li><li>æ”¯ä»˜æ—¶é—´ â€¦</li></ul><h1 id="æ‹¼å›¢äº¤æ˜“å­¦ä¹ "><a class="markdownIt-Anchor" href="#æ‹¼å›¢äº¤æ˜“å­¦ä¹ "></a> æ‹¼å›¢äº¤æ˜“å­¦ä¹ </h1><h2 id="ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®-2"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®-2"></a> ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®</h2><p>é¡¹ç›®æ˜¯æˆ‘åœ¨æ˜¯æˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨æ‹¼å¤šå¤šã€è…¾è®¯ã€äº¬ä¸œç­‰æœåŠ¡å¹³å°ï¼Œäº¤æ˜“æ”¯ä»˜æ—¶å€™ï¼Œäº†è§£åˆ°è¿™æ ·çš„ä¸€ç§è¥é”€æ‰‹æ®µã€‚å®ƒå¯ä»¥é€šè¿‡ç”¨æˆ·è‡ªä¼ æ’­æ–¹å¼å¢å¼ºäº¤æ˜“é‡ï¼Œä¹Ÿæ˜¯æ‹¼å¤šå¤šæœ€å¼€å§‹èµ·å®¶å½¢æˆå·¨å¤§è§„æ¨¡çš„ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ã€‚å› æ­¤éå¸¸æ„Ÿå…´è¶£è¿™æ ·çš„ç³»ç»Ÿï¼Œæ‰€ä»¥æ ¹æ®ç½‘ç»œä¸Šçš„èµ„æ–™ï¼Œå­¦ä¹ å¹¶å®Œæˆäº†è¿™æ ·çš„ä¸€ä¸ªç³»ç»Ÿã€‚</p><p>åº“è¡¨æ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ<br />é¦–å…ˆï¼Œä»è¿è¥çš„è§’åº¦ï¼Œè¦è€ƒè™‘çš„æœ‰ï¼š</p><ul><li><p>æ‹¼å›¢æ´»åŠ¨è¡¨ï¼šè®¾å®šäº†æ‹¼å›¢æ´»åŠ¨idã€æˆå›¢è§„åˆ™ã€äººç¾¤æ ‡ç­¾æ ‡è¯†ã€å•†å“idã€æŠ˜æ‰£idç­‰ã€‚</p></li><li><p>æŠ˜æ‰£é…ç½®è¡¨ï¼šå› ä¸ºæŠ˜æ‰£æœ‰æ—¶è¿˜å¯ä»¥å åŠ ï¼Œæ‰€ä»¥è¿˜æ‹†åˆ†å‡ºä¸€ä¸ªæŠ˜æ‰£é…ç½®è¡¨ï¼Œé‡Œé¢åŒ…å«äº†æŠ˜æ‰£çš„æè¿°ã€æŠ˜æ‰£çš„è¡¨è¾¾å¼ç­‰ä¿¡æ¯ã€‚</p></li><li><p>äººç¾¤æ ‡ç­¾è¡¨ï¼šä¸“é—¨æ¥åšäººç¾¤è®¾è®¡è®°å½•çš„ï¼Œè¿™3å¼ è¡¨å°±æ˜¯ä¸ºäº†æŠŠç¬¦åˆè§„åˆ™çš„äººç¾¤IDï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·IDï¼Œå…¨éƒ¨è·‘ä»»åŠ¡åˆ°ä¸€ä¸ªè®°å½•ä¸‹è¿›è¡Œä½¿ç”¨ã€‚æ¯”å¦‚é»‘ç«ç‘°äººç¾¤ã€é«˜å‡€å€¼äººç¾¤ã€æ‹¼å›¢å±¥çº¦ç‡90%ä»¥ä¸Šçš„äººç¾¤ç­‰ã€‚</p></li></ul><p>ä»ç”¨æˆ·çš„è§’åº¦ï¼š</p><ul><li>ç”¨æˆ·æœ‰ä¸€ä¸ªæ‹¼å›¢è´¦æˆ·è¡¨ï¼Œè®°å½•äº†ç”¨æˆ·å‚ä¸æ‹¼å›¢å‚ä¸æ•°æ®ï¼Œæ¯”å¦‚æ‹¼å›¢æ¬¡æ•°é™åˆ¶ï¼Œæ‹¼å›¢æ¬¡æ•°æ¶ˆè€—ç­‰</li><li>æ‹¼å›¢è¡¨ï¼ŒåŒ…å«æ´»åŠ¨idï¼Œæ‹¼å›¢å•å·ï¼Œæ‹¼å›¢çŠ¶æ€ï¼Œå‚ä¸äººæ•°ï¼Œå›è°ƒurlç­‰ä¿¡æ¯ï¼›è¿˜è¦æœ‰ä¸€ä¸ªæ‹¼å›¢æ˜ç»†è¡¨ï¼ŒåŒ…å«æ‹¼å›¢å•å·ï¼Œæ‹¼å›¢æ¥æºï¼Œæ‹¼å›¢æ¸ é“ï¼Œå•†å“idï¼Œå¤–éƒ¨äº¤æ˜“å•å·ç­‰ä¿¡æ¯</li><li>æ‹¼å›¢æˆåŠŸåï¼Œè¿˜è¦å‘é€å›è°ƒé€šçŸ¥ï¼Œæ‰€ä»¥è¿˜è¦æœ‰ä¸€ä¸ªå›è°ƒä»»åŠ¡è¡¨ï¼ŒåŒ…å«å›è°ƒçš„urlï¼Œå›è°ƒçš„æ¬¡æ•°ï¼Œå›è°ƒçš„çŠ¶æ€ç­‰ä¿¡æ¯</li></ul><h2 id="æ•´ä½“æµç¨‹"><a class="markdownIt-Anchor" href="#æ•´ä½“æµç¨‹"></a> æ•´ä½“æµç¨‹</h2><ul><li>ç”¨æˆ·æŸ¥çœ‹æ‹¼å›¢å•†å“ï¼Œæ¶‰åŠåˆ°ç»Ÿä¸€åˆ‡é‡ã€äººç¾¤æ ‡ç­¾è¿‡æ»¤ã€ä¼˜æƒ è¯•ç®—ç­‰æ“ä½œ</li><li>ç”¨æˆ·å‚ä¸æ‹¼å›¢ï¼Œæ¶‰åŠåˆ°æ‹¼å›¢ä¼˜æƒ ç»„è£…ï¼Œåˆ›å»ºæ‹¼å›¢è®¢å•ï¼Œåˆ›å»ºæ”¯ä»˜å•ç­‰æ“ä½œ</li><li>æ‰«ç æ”¯ä»˜ï¼Œæ”¯ä»˜å®Œæˆåï¼Œæ”¶åˆ°æ”¯ä»˜å›è°ƒï¼Œæ›´æ–°æ”¯ä»˜ç»“æœã€æ‹¼å›¢ä¿¡æ¯</li><li>ç­‰æ‹¼å›¢ç›®æ ‡å®Œæˆåï¼Œå‘èµ·å›è°ƒé€šçŸ¥ï¼Œè§¦å‘å•†å“å‘è´§ç­‰æ“ä½œ</li></ul><h2 id="è®²è®²dddå’Œå…­è¾¹å½¢æ¶æ„"><a class="markdownIt-Anchor" href="#è®²è®²dddå’Œå…­è¾¹å½¢æ¶æ„"></a> è®²è®²DDDå’Œå…­è¾¹å½¢æ¶æ„ï¼Ÿ</h2><p>DDD æŒ‡çš„æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œæ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ€æƒ³ï¼Œå°†è½¯ä»¶çš„æ ¸å¿ƒèšç„¦äºä¸šåŠ¡é¢†åŸŸæœ¬èº«ï¼Œä½¿å¾—è½¯ä»¶è®¾è®¡èƒ½å¤Ÿç²¾ç¡®åœ°åæ˜ ä¸šåŠ¡æ¨¡å‹ã€‚<br />DDD çš„å»ºæ¨¡è¿‡ç¨‹ï¼Œæ˜¯ä»¥ä¸€ä¸ªç”¨æˆ·ä¸ºèµ·ç‚¹ï¼Œé€šè¿‡è¡Œä¸ºå‘½ä»¤ï¼Œå‘èµ·è¡Œä¸ºåŠ¨ä½œï¼Œä¸²è”æ•´ä¸ªä¸šåŠ¡</p><p>å…­è¾¹å½¢æ¶æ„ï¼Œä¹Ÿç§°ä¸ºç«¯å£å’Œé€‚é…å™¨æ¶æ„ã€‚</p><ul><li>ç«¯å£æ˜¯æ ¸å¿ƒé¢†åŸŸå®šä¹‰çš„æ¥å£ï¼Œä»£è¡¨äº†æ ¸å¿ƒé¢†åŸŸä¸å¤–ç•Œè¿›è¡Œäº¤äº’çš„æ–¹å¼ã€‚</li><li>é€‚é…å™¨æ˜¯å®ç°ç«¯å£æ¥å£çš„å…·ä½“ä»£ç ï¼Œè´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚ä¸æ ¸å¿ƒé¢†åŸŸçš„ç«¯å£è¿›è¡Œè½¬æ¢å’Œé€‚é…ã€‚</li></ul><p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œå…­è¾¹å½¢æ¶æ„é€šè¿‡é€‚é…å™¨å±‚éš”ç¦»æ ¸å¿ƒä¸šåŠ¡ä¸å¤–éƒ¨ä¾èµ–ï¼ˆå¦‚æ•°æ®åº“ã€Redisï¼‰ã€‚ä¾‹å¦‚ï¼Œè®¢å•ç»“ç®—çš„æ ¸å¿ƒé€»è¾‘ç‹¬ç«‹äºHTTPå›è°ƒæˆ–MQç›‘å¬çš„å…·ä½“å®ç°ï¼Œæå‡æ ¸å¿ƒä»£ç çš„ç¨³å®šæ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p><h2 id="è´«è¡€æ¨¡å‹å’Œå……è¡€æ¨¡å‹çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#è´«è¡€æ¨¡å‹å’Œå……è¡€æ¨¡å‹çš„åŒºåˆ«"></a> è´«è¡€æ¨¡å‹å’Œå……è¡€æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ</h2><ul><li>è´«è¡€æ¨¡å‹çš„å¯¹è±¡ä¸€èˆ¬åªåŒ…å«æ•°æ®å’Œç®€å•çš„ getter/setter æ–¹æ³•ï¼Œä¸šåŠ¡é€»è¾‘é€šå¸¸åœ¨serviceå±‚ä¸­å®ç°ï¼Œé€‚åˆä¸€èˆ¬ä¸šåŠ¡é€»è¾‘ç®€å•ã€ä»¥å¢åˆ æ”¹æŸ¥ä¸ºä¸»çš„åœºæ™¯ã€‚</li><li>å……è¡€æ¨¡å‹çš„å¯¹è±¡åŒ…å«æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯æ•°æ®å’Œè¡Œä¸ºå°è£…åœ¨ä¸€èµ·ï¼Œserviceå±‚é€šå¸¸ä¼šå˜å¾—æ›´è–„ï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡é€»è¾‘çš„åœºæ™¯ã€‚</li></ul><h2 id="é¡¹ç›®ä¸­çš„é¢†åŸŸæ¨¡å‹æ˜¯å¦‚ä½•åˆ’åˆ†çš„å„ä¸ªé¢†åŸŸä¹‹é—´å¦‚ä½•åä½œ"><a class="markdownIt-Anchor" href="#é¡¹ç›®ä¸­çš„é¢†åŸŸæ¨¡å‹æ˜¯å¦‚ä½•åˆ’åˆ†çš„å„ä¸ªé¢†åŸŸä¹‹é—´å¦‚ä½•åä½œ"></a> é¡¹ç›®ä¸­çš„é¢†åŸŸæ¨¡å‹æ˜¯å¦‚ä½•åˆ’åˆ†çš„ï¼Ÿå„ä¸ªé¢†åŸŸä¹‹é—´å¦‚ä½•åä½œï¼Ÿ</h2><p>é€šè¿‡å››è‰²å»ºæ¨¡å’Œä¸šåŠ¡åœºæ™¯åˆ†æï¼Œåˆ’åˆ†å‡ºæ´»åŠ¨åŸŸã€æ ‡ç­¾åŸŸã€äº¤æ˜“åŸŸ3ç§é¢†åŸŸ</p><ul><li>æ´»åŠ¨åŸŸï¼šè´Ÿè´£æ‹¼å›¢æ´»åŠ¨çš„å®šä¹‰ã€ç®¡ç†å’Œè§„åˆ™è®¾ç½®</li><li>æ ‡ç­¾åŸŸï¼šè´Ÿè´£å¤„ç†ç”¨æˆ·æ ‡ç­¾å’Œäººç¾¤åˆ†ç»„ï¼Œæ§åˆ¶å‚ä¸èµ„æ ¼</li><li>äº¤æ˜“åŸŸï¼šå¤„ç†è®¢å•ã€æ”¯ä»˜å’Œç»“ç®—ç›¸å…³ä¸šåŠ¡</li></ul><p>åä½œæ–¹å¼ï¼š</p><ul><li>é¢†åŸŸæœåŠ¡è°ƒç”¨ï¼šå¦‚äº¤æ˜“åŸŸçš„ç»“ç®—æœåŠ¡è°ƒç”¨æ´»åŠ¨åŸŸçš„æœåŠ¡</li><li>èšåˆæ ¹ï¼šå¦‚GroupBuyOrderAggregateèšåˆäº†ç”¨æˆ·ã€æ´»åŠ¨å’Œä¼˜æƒ ä¿¡æ¯</li><li>é¢†åŸŸäº‹ä»¶ï¼šé€šè¿‡äº‹ä»¶é©±åŠ¨ä¸åŒé¢†åŸŸé—´çš„åä½œ</li></ul><h2 id="è§„åˆ™æ ‘è®¾è®¡æ¨¡å‹æ€ä¹ˆä½¿ç”¨çš„"><a class="markdownIt-Anchor" href="#è§„åˆ™æ ‘è®¾è®¡æ¨¡å‹æ€ä¹ˆä½¿ç”¨çš„"></a> è§„åˆ™æ ‘è®¾è®¡æ¨¡å‹æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ</h2><p>ä¾‹å¦‚ç”¨æˆ·æŸ¥çœ‹ä¼˜æƒ ä¿¡æ¯åï¼Œä¸€èˆ¬å¯ä»¥çœ‹åˆ°ä¼˜æƒ åçš„ä»·æ ¼ï¼Œè¿™å°±éœ€è¦è¿›è¡Œè¯•ç®—æ“ä½œï¼Œè¿™é‡Œçš„è¯•ç®—æ“ä½œå°±æ˜¯ä¸€ä¸ªè§„åˆ™æ ‘çš„è®¾è®¡æ¨¡å‹</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªé€šç”¨çš„è§„åˆ™æ ‘ç»“æ„ï¼Œä¸»è¦åŒ…å«StrategyMapperï¼ŒStrategyHandleræ¥å£</p><ul><li>StrategyMapperï¼šå®šä¹‰äº†getæ–¹æ³•ï¼Œç”¨äºè·å–è¦æ‰§è¡Œçš„èŠ‚ç‚¹</li><li>StrategyHandlerï¼šå®šä¹‰äº†applyæ–¹æ³•ï¼Œç”¨äºå—ç†æ‰§è¡Œçš„ä¸šåŠ¡æµç¨‹</li></ul><p>è¿˜è¦å®šä¹‰ä¸€ä¸ªç­–ç•¥è·¯ç”±çš„æŠ½è±¡ç±»ï¼Œå®ç°ä¸Šé¢ä¸¤ä¸ªæ¥å£</p><ul><li>å…¶ä¸­çš„routeræ–¹æ³•ä¸­ï¼Œé€šè¿‡getæ–¹æ³•è·å–ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„èŠ‚ç‚¹ï¼Œç„¶åæ‰§è¡Œapplyæ–¹æ³•</li><li>åœ¨applyæ–¹æ³•ä¸­ï¼Œé¦–å…ˆé€šè¿‡å¤šçº¿ç¨‹å¼‚æ­¥åŠ è½½æ•°æ®ï¼Œç„¶åæ‰§è¡ŒdoApplyæ–¹æ³•æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘</li></ul><p>åœ¨æ´»åŠ¨åŸŸä¸­ï¼Œåœ¨è¯•ç®—éƒ¨åˆ†ï¼Œå®šä¹‰å„ä¸ªèŠ‚ç‚¹å¦‚RootNodeï¼ŒSwitchNodeï¼ŒMarketNodeï¼ŒEndNodeç­‰</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½å®ç°äº†doApplyæ–¹æ³•å’Œgetæ–¹æ³•ï¼ŒdoApplyæ–¹æ³•ä¸­æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›routeræ–¹æ³•è°ƒç”¨ï¼Œgetæ–¹æ³•è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li><li>ç‰¹åˆ«æ˜¯marketNodeèŠ‚ç‚¹ï¼Œè¿˜å®ç°äº†multiThreadæ–¹æ³•ï¼Œé€šè¿‡çº¿ç¨‹æ± å®ç°å¤šçº¿ç¨‹å¼‚æ­¥åŠ è½½æ•°æ®</li></ul><p>æ€»çš„æ¥è¯´ï¼Œä»¥æ ¹èŠ‚ç‚¹ä¸ºå…¥å£ï¼Œå­èŠ‚ç‚¹ä¸ºå…·ä½“è§„åˆ™ã€‚é€šè¿‡ç»„åˆæ¨¡å¼æ„å»ºæ ‘å½¢ç»“æ„ï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•èŠ‚ç‚¹ã€‚</p><h2 id="è¯•ç®—é€»è¾‘æ€ä¹ˆå®ç°çš„"><a class="markdownIt-Anchor" href="#è¯•ç®—é€»è¾‘æ€ä¹ˆå®ç°çš„"></a> è¯•ç®—é€»è¾‘æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2><p>MarketNodeèŠ‚ç‚¹çš„doApplyæ–¹æ³•å®ç°äº†å…·ä½“çš„è¯•ç®—é€»è¾‘</p><p>è¯•ç®—é‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼ŒåŒ…æ‹¬ç›´å‡ã€æ»¡å‡ã€æŠ˜æ‰£ã€Nå…ƒè´­å››ç§ç­–ç•¥</p><ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå…¶ä¸­åŒ…å«calculateæ–¹æ³•ï¼Œè¿›è¡Œåˆ¤æ–­æ˜¯å¦å±äºæ´»åŠ¨äººç¾¤ä»¥åŠè®¡ç®—è¯•ç®—ç»“æœ</li><li>ç„¶åå®šä¹‰å››ä¸ªå®ç°ç±»ï¼Œåˆ†åˆ«å®ç°doCalculateæ–¹æ³•ï¼Œå¹¶åœ¨æ³¨è§£ä¸­æŒ‡å®šç­–ç•¥åç§°ï¼Œä¾‹å¦‚ï¼š</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@Slf</span>4j<br><span class="hljs-meta">@Service</span>(<span class="hljs-string">&quot;N&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NCalculateService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDiscountCalculateService</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    public <span class="hljs-type">BigDecimal</span> doCalculate(<span class="hljs-type">BigDecimal</span> originalPrice, <span class="hljs-type">GroupBuyActivityDiscountVO</span>.<span class="hljs-type">GroupBuyDiscount</span> groupBuyDiscount) &#123;<br>        log.info(<span class="hljs-string">&quot;ä¼˜æƒ ç­–ç•¥æŠ˜æ‰£è®¡ç®—:&#123;&#125;&quot;</span>, groupBuyDiscount.getDiscountType().getCode());<br><br>        <span class="hljs-comment">// æŠ˜æ‰£è¡¨è¾¾å¼ - ç›´æ¥ä¸ºä¼˜æƒ åçš„é‡‘é¢</span><br>        <span class="hljs-type">String</span> marketExpr = groupBuyDiscount.getMarketExpr();<br>        <span class="hljs-comment">// nå…ƒè´­</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">BigDecimal</span>(marketExpr);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨MarketNodeèŠ‚ç‚¹ä¸­ï¼Œé€šè¿‡Mapçš„æ–¹å¼æ³¨å…¥ï¼Œå¹¶è°ƒç”¨calculateæ–¹æ³•å®Œæˆè¯•ç®—</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-meta">@Resource</span><br><span class="hljs-keyword">private</span> Map&lt;<span class="hljs-keyword">String</span>, IDiscountCalculateService&gt; discountCalculateServiceMap;<br><span class="hljs-comment">// ä¼˜æƒ è¯•ç®—</span><br>IDiscountCalculateService discountCalculateService = discountCalculateServiceMap.<span class="hljs-keyword">get</span>(groupBuyDiscount.getMarketPlan());<br><span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == discountCalculateService) &#123;<br>    log.info(<span class="hljs-string">&quot;ä¸å­˜åœ¨&#123;&#125;ç±»å‹çš„æŠ˜æ‰£è®¡ç®—æœåŠ¡ï¼Œæ”¯æŒç±»å‹ä¸º:&#123;&#125;&quot;</span>, groupBuyDiscount.getMarketPlan(), JSON.toJSONString(discountCalculateServiceMap.keySet()));<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">AppException</span>(ResponseCode.E0001.getCode(), ResponseCode.E0001.getInfo());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äººç¾¤æ ‡ç­¾è¿‡æ»¤æ€ä¹ˆå®ç°"><a class="markdownIt-Anchor" href="#äººç¾¤æ ‡ç­¾è¿‡æ»¤æ€ä¹ˆå®ç°"></a> äººç¾¤æ ‡ç­¾è¿‡æ»¤æ€ä¹ˆå®ç°ï¼Ÿ</h2><p>ä¸€èˆ¬æ´»åŠ¨éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šç¾¤ä½“çš„ï¼Œäººç¾¤æ ‡ç­¾è¿‡æ»¤å°±æ˜¯æŠŠç”¨æˆ·åˆ†æˆä¸åŒçš„ç¾¤ä½“ï¼Œæ¯ä¸ªç¾¤ä½“æœ‰ä¸€ä¸ªtagIdï¼Œæ¯ä¸ªtagIdå¯¹äºæ¯ä¸ªæ´»åŠ¨æœ‰ä¸€ä¸ªtagScopeå­—æ®µï¼Œç”¨æ¥é…ç½®è¯¥æ´»åŠ¨æ˜¯å¦å¯è§ã€å¯å‚ä¸<br />tagIdï¼Œç”¨äºæ ‡è¯†å¯å‚ä¸æ´»åŠ¨çš„äººç¾¤ï¼Œå¦‚æœæ²¡æœ‰tagIdï¼Œåˆ™è¯´æ˜æ‰€æœ‰äººéƒ½å¯å‚ä¸æ´»åŠ¨<br />åœ¨redisçš„bitmapä¸­å­˜äº†äººç¾¤æ ‡ç­¾ï¼Œkeyä¸ºtagIdï¼Œvalueä¸ºuserId</p><p>äººç¾¤æ ‡ç­¾è¿‡æ»¤çš„é€»è¾‘å¦‚ä¸‹ï¼š</p><ul><li>åœ¨è¯•ç®—æ—¶ï¼Œå¦‚æœäººç¾¤æ ‡ç­¾ä¸ºç©ºæˆ–è€…ç”¨æˆ·åœ¨bitmapä¸­ï¼Œåˆ™è¯´æ˜å½“å‰ç”¨æˆ·å¯å‚ä¸æ´»åŠ¨ï¼Œè¿›è¡Œè¯•ç®—ä¼˜æƒ ä»·æ ¼ï¼Œå¦åˆ™è¿”å›åŸä»·</li><li>è¯•ç®—å®Œååœ¨tagNodeä¸­è®¾ç½®æ´»åŠ¨å¯è§ã€å¯å‚ä¸çŠ¶æ€<ul><li>å¦‚æœäººç¾¤æ ‡ç­¾ä¸ºç©ºï¼Œåˆ™è¯´æ˜å½“å‰æ´»åŠ¨å¯è§ã€å¯å‚ä¸</li><li>å¦‚æœäººç¾¤æ ‡ç­¾ä¸ä¸ºç©ºï¼Œå¦‚æœå½“å‰æ´»åŠ¨å¯è§æˆ–è€…ç”¨æˆ·åœ¨bitmapä¸­ï¼Œåˆ™è¯´æ˜å½“å‰æ´»åŠ¨å¯è§ï¼›å¦‚æœå½“å‰æ´»åŠ¨å¯å‚ä¸æˆ–è€…ç”¨æˆ·åœ¨bitmapä¸­ï¼Œåˆ™è¯´æ˜å½“å‰æ´»åŠ¨å¯å‚ä¸</li></ul></li></ul><h2 id="åŠ¨æ€é…ç½®dccæ€ä¹ˆå®ç°çš„"><a class="markdownIt-Anchor" href="#åŠ¨æ€é…ç½®dccæ€ä¹ˆå®ç°çš„"></a> åŠ¨æ€é…ç½®(DCC)æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2><p>åœ¨SwitchNodeèŠ‚ç‚¹ä¸­ï¼Œä¸»è¦åšä¸€äº›æ˜¯å¦é™çº§ã€åˆ‡é‡æ‹¦æˆªç­‰æ“ä½œ</p><p>ä¸»è¦åŸºäºredisçš„å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>é¦–å…ˆå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£DCCValueï¼Œå¦‚æœä½¿ç”¨äº†è¯¥æ³¨è§£å¯ä»¥ç”±springç®¡ç†ç›¸åº”çš„å±æ€§</li><li>ç„¶åå®šä¹‰ä¸€ä¸ªDCCServiceç±»ï¼Œå…¶ä¸­çš„downGradeå’ŒcutRangeå±æ€§éƒ½ä½¿ç”¨äº†@DCCValueæ³¨è§£ï¼Œå¹¶å®šä¹‰åˆ¤æ–­æ˜¯å¦é™çº§å’Œæ˜¯å¦åœ¨åˆ‡é‡èŒƒå›´å†…çš„æ–¹æ³•</li></ul><blockquote><p>æ¥ä¸‹æ¥å°±æ˜¯åŠ¨æ€é…ç½®çš„æ ¸å¿ƒï¼š</p></blockquote><ul><li>å®šä¹‰ä¸€ä¸ªåŠ¨æ€é…ç½®ç®¡ç†çš„å·¥å‚å®ç°BeanPostProcessoræ¥å£</li><li>åœ¨Beanåˆå§‹åŒ–åï¼Œé¦–å…ˆè·å–ç›®æ ‡ç±»å’Œç›®æ ‡å¯¹è±¡ï¼Œç„¶åéå†ç›®æ ‡ç±»å±æ€§ï¼Œå¦‚æœåŠ äº†@DCCValueæ³¨è§£ï¼Œåˆ™è·å–æ³¨è§£çš„å€¼ï¼Œå¹¶åœ¨redisä¸­è·å–æœ€æ–°çš„å€¼ï¼Œç„¶åæ›´æ–°å±æ€§çš„é…ç½®å€¼ï¼Œå¦‚æœredisä¸­æ²¡æœ‰å€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼Œæœ€åå°†keyå’ŒåŸå§‹å¯¹è±¡ä¿å­˜åˆ°mapä¸­</li><li>é€šè¿‡redisçš„RTopicæ·»åŠ ç›‘å¬å™¨ï¼Œç›‘å¬è®¢é˜…æ¶ˆæ¯ï¼Œå½“æœ‰æ¶ˆæ¯å‘å¸ƒæ—¶ï¼Œè·å–æœ€æ–°çš„å€¼ï¼Œåœ¨redisä¸­æ›´æ–°ï¼Œå¹¶åœ¨mapè·å–åˆ°ç›®æ ‡å¯¹è±¡ï¼Œç„¶åé€šè¿‡åå°„è·å–åˆ°ç›®æ ‡ç±»ï¼Œç„¶åå¯¹å±æ€§è¿›è¡Œæ›´æ–°</li></ul><p>æœ€åï¼Œåœ¨controllerä¸­å®šä¹‰updateConfigæ–¹æ³•ï¼Œå‘å¸ƒè®¢é˜…æ¶ˆæ¯ï¼Œè¦è¿›è¡ŒåŠ¨æ€æ›´æ–°æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å³å¯ã€‚</p><h2 id="äº¤æ˜“è§„åˆ™è¿‡æ»¤æ€ä¹ˆç”¨è´£ä»»é“¾æ¨¡å¼å®ç°çš„"><a class="markdownIt-Anchor" href="#äº¤æ˜“è§„åˆ™è¿‡æ»¤æ€ä¹ˆç”¨è´£ä»»é“¾æ¨¡å¼å®ç°çš„"></a> äº¤æ˜“è§„åˆ™è¿‡æ»¤æ€ä¹ˆç”¨è´£ä»»é“¾æ¨¡å¼å®ç°çš„ï¼Ÿ</h2><p>é¦–å…ˆè¦å’Œè§„åˆ™æ ‘ä¸€æ ·ï¼Œå®šä¹‰ä¸€ä¸ªè´£ä»»é“¾çš„æŠ½è±¡æ¨¡æ¿ï¼š</p><ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£LogicHandlerï¼ŒåŒ…å«nextå’Œapplyæ–¹æ³•ï¼Œnextæ–¹æ³•ç”¨äºè·å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œapplyæ–¹æ³•ç”¨äºå—ç†ä¸šåŠ¡é€»è¾‘</li><li>ç„¶åå®šä¹‰ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªLogicHandlerï¼Œé“¾è¡¨å®ç°äº†LogicHandleræ¥å£çš„applyæ–¹æ³•ï¼Œåœ¨applyæ–¹æ³•ä¸­è°ƒç”¨å½“å‰èŠ‚ç‚¹çš„applyæ–¹æ³•ï¼Œç›´åˆ°applyæ–¹æ³•è¿”å›ä¸ä¸ºnullæˆ–è€…é“¾è¡¨éå†å®Œæ¯•ç»“æŸ</li><li>å®šä¹‰ä¸€ä¸ªè£…é…å™¨ç±»LinkArmoryï¼Œç”¨æ¥é€šè¿‡å¾ªç¯çš„æ–¹å¼å°†èŠ‚ç‚¹æ·»åŠ åˆ°è´£ä»»é“¾é“¾è¡¨ä¸­</li></ul><p>æ¥ä¸‹æ¥ï¼Œäº¤æ˜“è§„åˆ™è¿‡æ»¤åŒ…æ‹¬æ´»åŠ¨å¯ç”¨æ€§è¿‡æ»¤å’Œç”¨æˆ·å‚ä¸æ€§è¿‡æ»¤</p><ul><li>æ´»åŠ¨å¯ç”¨æ€§è¿‡æ»¤ï¼šå®šä¹‰ä¸€ä¸ªç±»å®ç°LogicHandleræ¥å£ï¼Œé‡å†™applyæ–¹æ³•ï¼Œè¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œapplyæ–¹æ³•ä¸»è¦æ£€éªŒæ´»åŠ¨çš„çŠ¶æ€ï¼Œæ´»åŠ¨æ˜¯å¦è¿‡æœŸï¼Œå¹¶æŠŠæ´»åŠ¨ä¿¡æ¯è®¾ç½®åˆ°ä¸Šä¸‹æ–‡ä¸­</li><li>ç”¨æˆ·å‚ä¸æ€§è¿‡æ»¤ï¼šå®šä¹‰ä¸€ä¸ªç±»å®ç°LogicHandleræ¥å£ï¼Œé‡å†™applyæ–¹æ³•ï¼Œè¿”å›å‚ä¸æ¬¡æ•°ï¼Œapplyæ–¹æ³•ä¸»è¦æ ¡éªŒç”¨æˆ·å‚ä¸æ¬¡æ•°ï¼Œé˜²æ­¢ç”¨æˆ·æ— é™æ¬¡å‚ä¸ã€‚</li><li>å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œé€šè¿‡LinkArmoryè£…é…å™¨å°†ä¸¤ä¸ªè¿‡æ»¤å™¨æ·»åŠ åˆ°è´£ä»»é“¾ä¸­ï¼Œç„¶ååœ¨å¯¹åº”serviceä¸­è°ƒç”¨applyæ–¹æ³•å°±å¯ä»¥è¿›è¡Œäº¤æ˜“è§„åˆ™è¿‡æ»¤äº†</li></ul><h2 id="äº¤æ˜“ç»“ç®—è¿‡æ»¤æ€ä¹ˆå®ç°çš„"><a class="markdownIt-Anchor" href="#äº¤æ˜“ç»“ç®—è¿‡æ»¤æ€ä¹ˆå®ç°çš„"></a> äº¤æ˜“ç»“ç®—è¿‡æ»¤æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2><p>ä¸äº¤æ˜“è§„åˆ™è¿‡æ»¤ç±»ä¼¼ï¼Œä»ç„¶ç”¨å®šä¹‰å¥½çš„è´£ä»»é“¾æ¨¡æ¿å³å¯ï¼Œåªä¸è¿‡æœ‰4ä¸ªä¸åŒèŒè´£çš„èŠ‚ç‚¹ï¼š</p><ul><li>é»‘åå•æ¸ é“è¿‡æ»¤ï¼šæ ¡éªŒæ”¯ä»˜æ¸ é“æ˜¯å¦ç¬¦åˆè¦æ±‚</li><li>äº¤æ˜“å•å·è¿‡æ»¤ï¼šæ ¡éªŒäº¤æ˜“å•å·æ˜¯å¦å­˜åœ¨</li><li>æ”¯ä»˜æ—¶é—´è¿‡æ»¤ï¼šåˆ¤æ–­æ”¯ä»˜å®Œæˆçš„æ—¶é—´æ˜¯å¦åœ¨æ´»åŠ¨æ—¶é—´å†…</li><li>ç»“æŸèŠ‚ç‚¹ï¼šè¿”å›å°è£…æ•°æ®</li></ul><h2 id="ç»“ç®—è§¦è¾¾çš„å›è°ƒæ˜¯æ€ä¹ˆåšçš„"><a class="markdownIt-Anchor" href="#ç»“ç®—è§¦è¾¾çš„å›è°ƒæ˜¯æ€ä¹ˆåšçš„"></a> ç»“ç®—è§¦è¾¾çš„å›è°ƒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</h2><p>å›è°ƒé€šè¿‡httpå’ŒMQä¸¤ç§æ–¹å¼å®ç°ï¼Œæ”¯æŒä¸¤ç§æ–¹å¼å¹¶è¡Œï¼Œhttpä¸»è¦é’ˆå¯¹å¤–éƒ¨ç³»ç»Ÿå‘é€å›è°ƒï¼ŒMQä¸»è¦é’ˆå¯¹å†…éƒ¨ç³»ç»Ÿå‘é€å›è°ƒ</p><ul><li>httpå›è°ƒåŸºäºOkHttpClientå®ç°ï¼Œå¦‚æœæ˜¯httpç±»å‹éœ€è¦é…ç½®notifyUrl</li><li>MQå›è°ƒåŸºäºRabbitMQå®ç°</li><li>ä¸ºäº†ä¿è¯æ€§èƒ½ï¼Œé‡‡ç”¨äº†å¼‚æ­¥çš„æ–¹å¼ï¼Œé€šè¿‡çº¿ç¨‹æ± å¼‚æ­¥å‘é€å›è°ƒ</li><li>ä¸ºäº†ä¿è¯å¯é æ€§ï¼Œé˜²æ­¢å›è°ƒå‘é€å¤±è´¥ï¼Œè®¾ç½®äº†å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶æ‰§è¡Œå›è°ƒ</li></ul><h2 id="é¡¹ç›®é‡Œé”æ€ä¹ˆç”¨çš„"><a class="markdownIt-Anchor" href="#é¡¹ç›®é‡Œé”æ€ä¹ˆç”¨çš„"></a> é¡¹ç›®é‡Œé”æ€ä¹ˆç”¨çš„ï¼Ÿ</h2><p>ç”¨åˆ°äº†ç‹¬å é”å’Œä¹è§‚é”</p><p>ç‹¬å é”é€šè¿‡<code>redisson.getLock()</code>è·å–ï¼Œä¸»è¦ç”¨äºå®šæ—¶ä»»åŠ¡å‘é€å›è°ƒé€šçŸ¥æ—¶ï¼Œå› ä¸ºåœ¨åˆ†å¸ƒå¼æ¶æ„ä¸‹ï¼Œä¼šæœ‰nä¸ªå®ä¾‹éƒ¨ç½²ï¼Œå®šæ—¶ä»»åŠ¡ä¼šæœ‰nä¸ªå®ä¾‹æ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦åŠ é”ï¼Œé‚£ä¸ªå®ä¾‹æŠ¢åˆ°é”å°±æ‰§è¡Œ</p><p>ä¹è§‚é”ç”¨åœ¨äº¤æ˜“ä¸‹å•æ—¶çš„è´£ä»»é“¾ä¸­ï¼Œç”¨æ¥æŠ¢å åº“å­˜æ—¶ä½œä¸ºincrçš„å…œåº•ã€‚<br />é¦–å…ˆåœ¨æ‹¼å›¢ä¸‹å•æ—¶ï¼Œé™¤äº†æ´»åŠ¨çŠ¶æ€å’Œç”¨æˆ·å‚ä¸æ¬¡æ•°è¿‡æ»¤å¤–ï¼Œè¿˜è¦è¿›è¡Œåº“å­˜å ç”¨è¿‡æ»¤</p><ul><li>è¿›è¡Œåº“å­˜å ç”¨è¿‡æ»¤æ—¶ï¼Œé€šè¿‡åŠ¨æ€ä¸Šä¸‹æ–‡è·å–åˆ°ç»„é˜Ÿçš„ç›®æ ‡é‡ï¼Œæœ‰æ•ˆæœŸæ—¶é—´ï¼Œä»¥åŠç»„é˜Ÿçš„keyå’Œæ¢å¤é‡keyï¼Œæ¢å¤é‡æ˜¯æ¯å½“ä¸‹å•ä¿®æ”¹æ•°æ®åº“å¤±è´¥åï¼Œå°±å¯¹è¯¥æ¢å¤é‡keyè¿›è¡Œincræ“ä½œï¼Œè¡¨ç¤ºå¤±è´¥çš„æ¬¡æ•°</li><li>æ¥ä¸‹æ¥å…ˆè·å–æ¢å¤é‡ï¼Œç„¶åå¯¹ç»„é˜Ÿçš„keyè¿›è¡Œincræ“ä½œå¾—åˆ°ä¸€ä¸ªå ç”¨å€¼ï¼Œå¦‚æœå ç”¨å€¼å¤§äºç›®æ ‡é‡+æ¢å¤é‡ï¼Œåˆ™è¯´æ˜å·²å®Œæˆç›®æ ‡ï¼Œå°†ç»„é˜Ÿkeyå¯¹åº”çš„valueè®¾ç½®ä¸ºtargetï¼Œè¿”å›falseè¡¨ç¤ºå ç”¨å¤±è´¥</li><li>å¦‚æœå ç”¨å€¼ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆå°±å¯¹ç»„é˜Ÿkey+å ç”¨å€¼é€šè¿‡setnxåŠ é”ï¼Œä½œä¸ºå…œåº•ï¼Œé˜²æ­¢å‡ºç°ç›¸åŒçš„å ç”¨å€¼</li></ul><h3 id="dddé¢†åŸŸä¹‹é—´å¦‚ä½•é€šä¿¡"><a class="markdownIt-Anchor" href="#dddé¢†åŸŸä¹‹é—´å¦‚ä½•é€šä¿¡"></a> DDDé¢†åŸŸä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</h3><ol><li>ddd å†…éƒ¨é¢†åŸŸé—´ï¼Œdomain ä¸‹çš„å„ä¸ªé¢†åŸŸï¼Œæ˜¯é€šè¿‡ trigger ä¸²è”çš„ã€‚å¦‚æœæ˜¯æ›´å¤æ‚çš„ç³»ç»Ÿï¼Œä¼šæœ‰ä¸€ä¸ªå•ç‹¬çš„ cases å±‚æ¥ä¸²è”ã€‚</li><li>å’Œå¤–éƒ¨ç³»ç»Ÿçš„å¯¹æ¥ï¼Œæ˜¯é€šè¿‡åŸºç¡€è®¾æ–½å±‚ï¼Œä½¿ç”¨ httpã€rpc ç­‰æ–¹å¼ä¸å¤–éƒ¨é€šä¿¡ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é’¢ç´å¼¹å¥</title>
    <link href="/2025/03/28/%E9%92%A2%E7%90%B4%E5%BC%B9%E5%A5%8F/"/>
    <url>/2025/03/28/%E9%92%A2%E7%90%B4%E5%BC%B9%E5%A5%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="é’¢ç´å¼¹å¥"><a class="markdownIt-Anchor" href="#é’¢ç´å¼¹å¥"></a> é’¢ç´å¼¹å¥</h2><!-- TOC --><ul><li><a href="#%E9%92%A2%E7%90%B4%E5%BC%B9%E5%A5%8F">é’¢ç´å¼¹å¥</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://oj.niumacode.com/training/49/problem/P1466">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æ¸¸æ¸¸æœ‰ 26 ä¸ªæŒ‰é”®çš„ç´ï¼ŒæŒ‰ä¸‹ç¬¬ä¸€ä¸ªæŒ‰é”®å¯ä»¥å¥å‡º aï¼Œç¬¬äºŒä¸ªæŒ‰é”®å¯ä»¥å¥å‡º b ï¼Œâ€¦ï¼Œç¬¬äºŒåå…­ä¸ªæŒ‰é”®å¯ä»¥å¥å‡ºz ã€‚</p><p>ç°åœ¨ç»™å‡ºäº†ä¸€ä¸ªä¹è°±çš„æ¼”å¥æ–¹å¼ï¼Œç”±æ•°å­—ç»„æˆï¼ŒåŒ…å«[0,9] ï¼Œä½†ç”±äºä¸è€ƒè™‘ç©ºæ ¼è‡´ä½¿æ¸¸æˆä¸å…è®¸è¾“å…¥çš„æƒ…å†µï¼Œä¾‹å­å¦‚ s=12 ï¼Œè¡¨ç¤ºå…ˆæŒ‰ä¸‹ç¬¬ä¸€ä¸ªæŒ‰é”®ï¼Œç„¶åæŒ‰ç¬¬äºŒä¸ªæŒ‰é”®ï¼Œä¹Ÿå¯èƒ½æŒ‰ä¸‹ç¬¬åäºŒä¸ªæŒ‰é”®ã€‚è€Œå¯¹äº120ï¼Œåªèƒ½å…ˆæŒ‰ä¸‹ç¬¬ä¸€ä¸ªé”®ï¼Œç„¶åå†æŒ‰ç¬¬äºŒåä¸ªæŒ‰é”®ï¼Œå› ä¸ºä¸å­˜åœ¨ç¬¬é›¶ä¸ªæŒ‰é”®ã€‚</p><p>ç°åœ¨è¯·ä½ å¸®åŠ©æ¸¸æ¸¸è®¡ç®—æœ‰å¤šå°‘ç§æœ¬è´¨ä¸åŒçš„åˆé€‚æ¼”å¥æ–¹å¼ã€‚</p><p>å¯¹äºä¸¤ç§æ¼”å¥æ–¹å¼ï¼Œåªè¦å­˜åœ¨ä¸€ä¸ªä½ç½®çš„æŒ‰é”®ä¸åŒåˆ™è®¤ä¸ºæ˜¯ä¸åŒçš„æ¼”å¥æ–¹å¼ï¼Œç”±äºç»“æœå¯èƒ½å¾ˆå¤§ï¼Œè¯·å¯¹ <code>10^9+7</code> å–æ¨¡åè¾“å‡ºã€‚</p><p>è¾“å…¥æè¿°</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">æ¯ä¸ªæµ‹è¯•æ–‡ä»¶å‡åŒ…å«å¤šç»„æµ‹è¯•æ•°ã€‚ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•° <span class="hljs-built_in">T</span>(<span class="hljs-number">1</span> &lt;<span class="hljs-built_in">T</span> &lt;<span class="hljs-number">10</span> )ä»£è¡¨æ•°æ®ç»„æ•°,æ¯ç»„æµ‹è¯•æ•°æ®æè¿°å¦‚ä¸‹<span class="hljs-symbol">:</span> å¯¹äºæ¯ä¸€ç»„æµ‹è¯•æ•°æ®<span class="hljs-symbol">:</span> ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°<span class="hljs-built_in">n</span> (<span class="hljs-number">1</span> &lt; <span class="hljs-built_in">n</span> &lt; <span class="hljs-number">10</span>^<span class="hljs-number">5</span>)ã€‚ ç¬¬äºŒè¡Œä¸€ä¸ªé•¿åº¦ä¸º<span class="hljs-built_in">n</span> çš„å­—ç¬¦ä¸²s ï¼Œä¿è¯è¾“å…¥ä»…å«æ•°å­—[<span class="hljs-number">0</span>,<span class="hljs-number">9</span>]<br></code></pre></td></tr></table></figure><p>è¾“å‡ºæè¿°</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å‡ºå…± <span class="hljs-built_in">T</span> è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ¬è´¨ä¸åŒçš„åˆæ³•æ¼”å¥æ–¹å¼ï¼Œç»“æœå¯¹<span class="hljs-number">10</span>^<span class="hljs-number">9</span>+<span class="hljs-number">7</span>å–æ¨¡ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’ï¼Œä»¤ dp[i] è¡¨ç¤ºå‰ i ä¸ªå­—ç¬¦çš„åˆæ³•æ¼”å¥æ–¹å¼æ•°ï¼š</p><ul><li>dp[0] = 1 è¡¨ç¤ºç©ºä¸²æœ‰ 1 ç§åˆæ³•æ–¹æ³•ï¼›</li><li>è‹¥ s[i-1] â‰  â€˜0â€™ï¼Œåˆ™ dp[i] += dp[i-1]ï¼›</li><li>è‹¥<code>i&gt;1</code>æ—¶ï¼Œå¦‚æœç”± s[i-2] å’Œ s[i-1] ç»„æˆçš„ä¸¤ä½æ•°åœ¨ [10ï¼Œ26] èŒƒå›´å†…ï¼Œdp[i] += dp[i-2]ã€‚</li><li>æœ€å dp[n] å°±æ˜¯ç­”æ¡ˆï¼Œè¿‡ç¨‹ä¸­éƒ½è¦å¯¹ 10^9+7 å–æ¨¡ã€‚</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll=<span class="hljs-type">long</span> <span class="hljs-type">long</span> ;<br><span class="hljs-type">const</span> ll M=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> T;<br>    cin&gt;&gt;T;<br>    <span class="hljs-type">int</span> n;<br>    string s;<br>    <span class="hljs-keyword">while</span>(T--)&#123;<br>        cin&gt;&gt;n;<br>        cin&gt;&gt;s;<br>        <span class="hljs-function">vector&lt;ll&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n+<span class="hljs-number">1</span>)</span></span>;<br>        dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            <span class="hljs-keyword">if</span>(s[i<span class="hljs-number">-1</span>]!=<span class="hljs-string">&#x27;0&#x27;</span>)<br>                dp[i]=(dp[i]+dp[i<span class="hljs-number">-1</span>])%M;<br>            <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-type">int</span> t=(s[i<span class="hljs-number">-2</span>]-<span class="hljs-string">&#x27;0&#x27;</span>)*<span class="hljs-number">10</span>+s[i<span class="hljs-number">-1</span>]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>                <span class="hljs-keyword">if</span>(t&gt;=<span class="hljs-number">10</span>&amp;&amp;t&lt;=<span class="hljs-number">26</span>)<br>                    dp[i]=(dp[i]+dp[i<span class="hljs-number">-2</span>])%M;<br>            &#125;<br>        &#125;<br>        cout&lt;&lt;dp[n]%M&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç«æŸ´æ‹¼æ­£æ–¹å½¢</title>
    <link href="/2025/03/23/%E7%81%AB%E6%9F%B4%E6%8B%BC%E6%AD%A3%E6%96%B9%E5%BD%A2/"/>
    <url>/2025/03/23/%E7%81%AB%E6%9F%B4%E6%8B%BC%E6%AD%A3%E6%96%B9%E5%BD%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="ç«æŸ´æ‹¼æ­£æ–¹å½¢"><a class="markdownIt-Anchor" href="#ç«æŸ´æ‹¼æ­£æ–¹å½¢"></a> ç«æŸ´æ‹¼æ­£æ–¹å½¢</h2><!-- TOC --><ul><li><a href="#%E7%81%AB%E6%9F%B4%E6%8B%BC%E6%AD%A3%E6%96%B9%E5%BD%A2">ç«æŸ´æ‹¼æ­£æ–¹å½¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/matchsticks-to-square/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ å°†å¾—åˆ°ä¸€ä¸ªæ•´æ•°æ•°ç»„ matchsticks ï¼Œå…¶ä¸­ matchsticks[i] æ˜¯ç¬¬ i ä¸ªç«æŸ´æ£’çš„é•¿åº¦ã€‚ä½ è¦ç”¨ æ‰€æœ‰çš„ç«æŸ´æ£ æ‹¼æˆä¸€ä¸ªæ­£æ–¹å½¢ã€‚ä½  ä¸èƒ½æŠ˜æ–­ ä»»ä½•ä¸€æ ¹ç«æŸ´æ£’ï¼Œä½†ä½ å¯ä»¥æŠŠå®ƒä»¬è¿åœ¨ä¸€èµ·ï¼Œè€Œä¸”æ¯æ ¹ç«æŸ´æ£’å¿…é¡» ä½¿ç”¨ä¸€æ¬¡ ã€‚</p><p>å¦‚æœä½ èƒ½ä½¿è¿™ä¸ªæ­£æ–¹å½¢ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: matchsticks = [1,1,2,2,2]</span><br><span class="hljs-section">è¾“å‡º: true</span><br><span class="hljs-section">è§£é‡Š: èƒ½æ‹¼æˆä¸€ä¸ªè¾¹é•¿ä¸º2çš„æ­£æ–¹å½¢ï¼Œæ¯è¾¹ä¸¤æ ¹ç«æŸ´ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>2025323è™¾çš®ç¬”è¯•ç¬¬3é¢˜ï¼Œåšçš„æ—¶è’™è¿‡äº†0.4çš„ç”¨ä¾‹ï¼Œçœ‹äº†é¢˜è§£æ‰çŸ¥é“è¯»é”™é¢˜äº†ï¼Œç«æŸ´æ˜¯æ‹¼æ¥ï¼Œä¸æ˜¯å åŠ ã€‚<br />ä¸»è¦æ€è·¯æ˜¯å›æº¯ï¼Œæ¯æ¬¡ç»™æ¯æ¡è¾¹åŠ ç«æŸ´ï¼Œå½“åŠ ç«æŸ´åè¾¹é•¿åˆæ³•ä¸”dfsè¿”å›ä¹Ÿä¸ºçœŸï¼Œåˆ™è¿”å›trueã€‚å½“æ‰€æœ‰ç«æŸ´éƒ½èƒ½ç”¨å®Œæ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚<br />ä¸ºäº†é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥é™åºæ’åºå†dfs</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> idx, <span class="hljs-type">int</span> target, vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge, vector&lt;<span class="hljs-type">int</span>&gt;&amp; matchsticks)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(idx==matchsticks.<span class="hljs-built_in">size</span>())<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;++i)&#123;<br>            edge[i]+=matchsticks[idx];<br>            <span class="hljs-keyword">if</span>(edge[i]&lt;=target&amp;&amp;<span class="hljs-built_in">dfs</span>(idx+<span class="hljs-number">1</span>,target,edge,matchsticks))<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            edge[i]-=matchsticks[idx];<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">makesquare</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; matchsticks)</span> </span>&#123;<br>        <span class="hljs-type">long</span> <span class="hljs-type">long</span> sum=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> t:matchsticks)<br>            sum+=t;<br>        <span class="hljs-keyword">if</span>(sum%<span class="hljs-number">4</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-built_in">sort</span>(matchsticks.<span class="hljs-built_in">begin</span>(),matchsticks.<span class="hljs-built_in">end</span>(),[](<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)&#123;<br>            <span class="hljs-keyword">return</span> a&gt;b;<br>        &#125;);<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">edge</span><span class="hljs-params">(<span class="hljs-number">4</span>)</span></span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,sum/<span class="hljs-number">4</span>,edge,matchsticks);<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å°çº¢çš„æ’åˆ—</title>
    <link href="/2025/03/22/%E5%B0%8F%E7%BA%A2%E7%9A%84%E6%8E%92%E5%88%97/"/>
    <url>/2025/03/22/%E5%B0%8F%E7%BA%A2%E7%9A%84%E6%8E%92%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="å°çº¢çš„æ’åˆ—"><a class="markdownIt-Anchor" href="#å°çº¢çš„æ’åˆ—"></a> å°çº¢çš„æ’åˆ—</h2><!-- TOC --><ul><li><a href="#%E5%B0%8F%E7%BA%A2%E7%9A%84%E6%8E%92%E5%88%97">å°çº¢çš„æ’åˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å°çº¢ç»™å®šä¸€ä¸ªæ•°å­—xï¼Œç°åœ¨å¥¹å‡†å¤‡æŠŠå…¶æ•°ä½ä¸Šçš„æ•°å­—é‡æ–°æ’åˆ—ï¼Œä¾‹å¦‚x=213ï¼Œé‡æ’åå¯ä»¥æ˜¯<code>[123ï¼Œ132ï¼Œ231ï¼Œ312ï¼Œ321]</code>ï¼Œä½†ä¸èƒ½æ˜¯213ï¼Œå› ä¸ºå…¶æ²¡æœ‰è¿›è¡Œé‡æ’ï¼Œåˆä¾‹å¦‚ 10ï¼Œä»…å­˜åœ¨<code>[1]</code>ï¼Œé‡æ’åçš„æ•°å­—å¿½ç•¥æ‰å‰å¯¼é›¶ã€‚</p><p>ç°åœ¨è¯·ä½ å¸®åŠ©å°çº¢è®¡ç®—æœ‰å¤šå°‘ä¸ªé‡æ’åçš„æ•°å­— yï¼Œä½¿å¾—å…¶æ•°ä½ä¹‹å’Œæ˜¯ä¸€ä¸ªè´¨æ•°ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">è¾“å…¥æè¿°ï¼š<br>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° <span class="hljs-built_in">T</span>(<span class="hljs-number">1</span> &lt; T &lt; <span class="hljs-number">10</span>^<span class="hljs-number">5</span>)ï¼Œè¡¨ç¤ºæ•°æ®ç»„æ•°ï¼Œå¯¹äºæ¯ç»„æ•°æ®æ ¼å¼ä¸º:ä¸€ä¸ªæ•´æ•° <span class="hljs-built_in">x</span>(<span class="hljs-number">1</span> &lt; x &lt; <span class="hljs-number">10</span>^<span class="hljs-number">9</span>)ï¼Œè¡¨ç¤ºç»™å®šçš„æ•°å­—ã€‚<br><br>è¾“å‡ºæè¿°ï¼š<br>å¯¹äºæ¯ç»„æ•°æ®ï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„æ•°å­—ä¸ªæ•°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯æˆ‘ä¸€çœ‹åˆ°æ’åˆ—æ€»æƒ³ç€ç”¨next_permutationï¼Œè¿™æ ·ä¼šè¶…æ—¶ã€‚<br />è¿™é“é¢˜åº”è¯¥æ ¹æ®å­—ç¬¦ä¸²çš„é•¿åº¦è®¡ç®—é˜¶ä¹˜ï¼Œå³å…¨æ’åˆ—çš„ä¸ªæ•°ï¼Œç„¶åå†æ ¹æ®æ¯ä¸€ä½å‡ºç°çš„æ¬¡æ•°è®¡ç®—é˜¶ä¹˜ï¼Œå¯¹å…¨æ’åˆ—å»é‡ã€‚<br />æ¯”å¦‚ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">å‡è®¾è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯ <span class="hljs-string">&quot;32413&quot;</span>ï¼Œå…¶ä¸­æ•°å­— <span class="hljs-string">&quot;3&quot;</span> å‡ºç°äº†ä¸¤æ¬¡ã€‚<br><br>å­—ç¬¦ä¸²é•¿åº¦ä¸º <span class="hljs-number">5</span>ï¼Œæ‰€ä»¥ <span class="hljs-number">5</span>! = <span class="hljs-number">120</span><br><span class="hljs-string">&quot;3&quot;</span> å‡ºç° <span class="hljs-number">2</span> æ¬¡ï¼Œæ‰€ä»¥ <span class="hljs-number">2</span>! = <span class="hljs-number">2</span><br>è®¡ç®—æ’åˆ—æ•°ï¼š <span class="hljs-number">120</span> / <span class="hljs-number">2</span> = <span class="hljs-number">60</span><br></code></pre></td></tr></table></figure><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>using <span class="hljs-attribute">ll</span>=long long;<br>ll <span class="hljs-built_in">get</span>(int n)&#123;<br>    ll <span class="hljs-attribute">res</span>=1;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=2;i&lt;=n;++i)<br>        <span class="hljs-attribute">res</span>=res*i;<br>    return res;<br>&#125;<br><br>int main()&#123;<br>int T;<br>    cin&gt;&gt;T;<br>    <span class="hljs-keyword">while</span>(T--)&#123;<br>        int x;<br>        cin&gt;&gt;x;<br>        string <span class="hljs-attribute">s</span>=to_string(x);<br>        int <span class="hljs-attribute">sum</span>=0;<br>        vector&lt;int&gt; cnt(10);<br>        <span class="hljs-keyword">for</span>(char c:s)&#123;<br>            sum+=c-<span class="hljs-string">&#x27;0&#x27;</span>;<br>            ++cnt[c-<span class="hljs-string">&#x27;0&#x27;</span>];<br>        &#125;<br>        bool <span class="hljs-attribute">isZ</span>=<span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=2;i*i&lt;=sum;++i)&#123;<br>            <span class="hljs-keyword">if</span>(sum%<span class="hljs-attribute">i</span>==0)&#123;<br>                <span class="hljs-attribute">isZ</span>=<span class="hljs-literal">true</span>;<br>                break;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-attribute">isZ</span>==true||sum==1)&#123;<br>            cout&lt;&lt;0&lt;&lt;endl;<br>            continue;<br>        &#125;<br>        ll <span class="hljs-attribute">ans</span>=get(s.size());<br>        <span class="hljs-keyword">for</span>(int t:cnt)&#123;<br>            <span class="hljs-attribute">ans</span>=ans/get(t);<br>        &#125;<br>        cout&lt;&lt;ans-1&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åªå‡ºç°ä¸€æ¬¡æ•°å­—ç³»åˆ—</title>
    <link href="/2025/03/21/%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E5%AD%97%E7%B3%BB%E5%88%97/"/>
    <url>/2025/03/21/%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E5%AD%97%E7%B3%BB%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h1 id="åªå‡ºç°ä¸€æ¬¡æ•°å­—ç³»åˆ—"><a class="markdownIt-Anchor" href="#åªå‡ºç°ä¸€æ¬¡æ•°å­—ç³»åˆ—"></a> åªå‡ºç°ä¸€æ¬¡æ•°å­—ç³»åˆ—</h1><!-- TOC --><ul><li><a href="#%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E5%AD%97%E7%B3%BB%E5%88%97">åªå‡ºç°ä¸€æ¬¡æ•°å­—ç³»åˆ—</a><ul><li><a href="#%E6%9C%891%E4%B8%AA%E5%87%BA%E7%8E%B01%E6%AC%A1%E5%85%B6%E4%BB%96%E5%87%BA%E7%8E%B02%E6%AC%A1">æœ‰1ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°2æ¬¡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%892%E4%B8%AA%E5%87%BA%E7%8E%B01%E6%AC%A1%E5%85%B6%E4%BB%96%E5%87%BA%E7%8E%B02%E6%AC%A1">æœ‰2ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°2æ¬¡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%891%E4%B8%AA%E5%87%BA%E7%8E%B01%E6%AC%A1%E5%85%B6%E4%BB%96%E5%87%BA%E7%8E%B03%E6%AC%A1">æœ‰1ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°3æ¬¡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li></ul></li></ul><!-- /TOC --><h2 id="æœ‰1ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°2æ¬¡"><a class="markdownIt-Anchor" href="#æœ‰1ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°2æ¬¡"></a> æœ‰1ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°2æ¬¡</h2><p><a href="https://leetcode.cn/problems/single-number/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª éç©º æ•´æ•°æ•°ç»„ nums ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä¸”è¯¥ç®—æ³•åªä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç›´æ¥å¼‚æˆ–</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">singleNumber</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> t=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> a:nums)<br>            t=a^t;<br>        <span class="hljs-keyword">return</span> t;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æœ‰2ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°2æ¬¡"><a class="markdownIt-Anchor" href="#æœ‰2ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°2æ¬¡"></a> æœ‰2ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°2æ¬¡</h2><p><a href="https://leetcode.cn/problems/single-number-iii/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œå…¶ä¸­æ°å¥½æœ‰ä¸¤ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œå…¶ä½™æ‰€æœ‰å…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚ æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸¤ä¸ªå…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•ä¸”ä»…ä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å…ˆå¼‚æˆ–ï¼Œå†åˆ†ä¸¤ç»„å¼‚æˆ–</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    vector&lt;<span class="hljs-built_in">int</span>&gt; singleNumber(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>;<br>        for(<span class="hljs-built_in">int</span> <span class="hljs-symbol">t:nu</span>ms)<br>            <span class="hljs-built_in">sum</span>=<span class="hljs-built_in">sum</span>^<span class="hljs-built_in">t</span>;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">offset</span>=<span class="hljs-number">0</span>;<br>        while(((<span class="hljs-built_in">sum</span>&gt;&gt;<span class="hljs-built_in">offset</span>)&amp;<span class="hljs-number">1</span>)==<span class="hljs-number">0</span>)<br>            ++<span class="hljs-built_in">offset</span>;<br>        <span class="hljs-built_in">int</span> a=<span class="hljs-number">0</span>,b=<span class="hljs-number">0</span>;<br>        for(<span class="hljs-built_in">int</span> <span class="hljs-symbol">t:nu</span>ms)&#123;<br>            <span class="hljs-built_in">if</span>(((<span class="hljs-built_in">t</span>&gt;&gt;<span class="hljs-built_in">offset</span>)&amp;<span class="hljs-number">1</span>)==<span class="hljs-number">1</span>)<br>                a^=<span class="hljs-built_in">t</span>;<br>            else<br>                b^=<span class="hljs-built_in">t</span>;<br>        &#125;<br>        return &#123;a,b&#125;;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æœ‰1ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°3æ¬¡"><a class="markdownIt-Anchor" href="#æœ‰1ä¸ªå‡ºç°1æ¬¡å…¶ä»–å‡ºç°3æ¬¡"></a> æœ‰1ä¸ªå‡ºç°1æ¬¡ï¼Œå…¶ä»–å‡ºç°3æ¬¡</h2><p><a href="https://leetcode.cn/problems/WGki4K/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° ä¸€æ¬¡ å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° ä¸‰æ¬¡ ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><h3 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h3><p>å‚è€ƒ<a href="https://leetcode.cn/problems/WGki4K/solutions/976992/jian-zhi-offer-ii-004-zhi-chu-xian-yi-ci-l3ud">é¢˜è§£</a></p><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">singleNumber</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> once=<span class="hljs-number">0</span>,twice=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> t:nums)&#123;<br>            once=~twice&amp;(t^once);<br>            twice=~once&amp;(t^twice);<br>        &#125;<br>        <span class="hljs-keyword">return</span> once;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å°çº¢è£…ç”µè„‘</title>
    <link href="/2025/03/10/%E5%B0%8F%E7%BA%A2%E8%A3%85%E7%94%B5%E8%84%91/"/>
    <url>/2025/03/10/%E5%B0%8F%E7%BA%A2%E8%A3%85%E7%94%B5%E8%84%91/</url>
    
    <content type="html"><![CDATA[<h2 id="å°çº¢è£…ç”µè„‘"><a class="markdownIt-Anchor" href="#å°çº¢è£…ç”µè„‘"></a> å°çº¢è£…ç”µè„‘</h2><!-- TOC --><ul><li><a href="#%E5%B0%8F%E7%BA%A2%E8%A3%85%E7%94%B5%E8%84%91">å°çº¢è£…ç”µè„‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å°çº¢å‡†å¤‡ä¹°ä¸€äº›é›¶ä»¶æ¥ç»„è£…ç”µè„‘ã€‚å·²çŸ¥ç”µè„‘ä¸€å…±æœ‰nä¸ªé›¶ä»¶ï¼Œæ¯ä¸ªé›¶ä»¶æœ‰è‹¥å¹²ä¸ªå‹å·ã€‚<br />å°çº¢ç°åœ¨çŸ¥é“äº†æ¯ä¸ªå‹å·çš„å¯¹åº”ä»·æ ¼a_iâ€‹ä»¥åŠæ€§èƒ½v_iã€‚å°çº¢éœ€è¦æ¯ä¸ªé›¶ä»¶é€‰æ‹©ä¸€ä¸ªå‹å·ï¼Œåœ¨æ€»ä»·æ ¼ä¸è¶…è¿‡xå…ƒçš„å‰æä¸‹ï¼Œæœ€ç»ˆçš„æ€»æ€§èƒ½å°½å¯èƒ½å¤§ã€‚<br />ä½ èƒ½å¸®å¸®å¥¹å—ï¼Ÿ</p><p>è¾“å…¥æ ¼å¼</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs excel">ç¬¬ä¸€è¡Œè¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°<span class="hljs-built_in">n</span>å’Œxï¼Œä»£è¡¨ç”µè„‘çš„é›¶ä»¶æ•°é‡ä»¥åŠå°çº¢æœ€å¤§çš„é¢„ç®—ã€‚<br>æ¥ä¸‹æ¥çš„<span class="hljs-number">3</span>*<span class="hljs-built_in">n</span>è¡Œï¼Œæ¯ä¸‰è¡Œç”¨æ¥æè¿°ä¸€ä¸ªé›¶ä»¶çš„ä¸åŒå‹å·çš„ä»·æ ¼å’Œæ€§èƒ½ã€‚<br>å¯¹äºæ¯ä¸ªé›¶ä»¶ï¼Œç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°mï¼Œä»£è¡¨è¯¥é›¶ä»¶æœ‰å¤šå°‘ç§å‹å·ã€‚<br>ç¬¬äºŒè¡Œè¾“å…¥mä¸ªæ­£æ•´æ•°a_iï¼Œä»£è¡¨è¯¥é›¶ä»¶ç¬¬iä¸­å‹å·çš„ä»·æ ¼ã€‚<br>ç¬¬ä¸‰è¡Œè¾“å…¥mä¸ªæ­£æ•´æ•°v_iï¼Œä»£è¡¨è¯¥é›¶ä»¶ç¬¬iä¸­å‹å·çš„æ€§èƒ½ã€‚<br><span class="hljs-number">1</span>&lt;=<span class="hljs-built_in">n</span>,m&lt;=<span class="hljs-number">40</span><br><span class="hljs-number">1</span>&lt;= a_i,v_i,x &lt;= <span class="hljs-number">10</span>^<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">å¦‚æœæ— æ³•å®Œæˆç»„è£…ï¼Œåˆ™ç›´æ¥è¾“å‡º<span class="hljs-string">-1</span>ã€‚<br>å¦åˆ™è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œä»£è¡¨æœ€ç»ˆæœ€å¤§çš„æ€§èƒ½ã€‚<br></code></pre></td></tr></table></figure><p>æ ·ä¾‹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ä¾‹å­ï¼š<br>2 4<br>2<br>1 2<br>3 5<br>3<br>3<span class="hljs-number"> 2 </span>3<br>5<span class="hljs-number"> 6 </span>7<br>è¾“å‡ºä¾‹å­ï¼š<br>11<br>ä¾‹å­è¯´æ˜ï¼š<br>ä¸€å…±éœ€è¦ä¸¤ä¸ªé›¶ä»¶ã€‚<br>ç¬¬ä¸€ä¸ªé›¶ä»¶é€‰æ‹©ç¬¬äºŒä¸ªå‹å·ï¼Œç¬¬äºŒä¸ªé›¶ä»¶ä¹Ÿé€‰æ‹©ç¬¬äºŒä¸ªå‹å·ã€‚<br>è¿™æ ·æ€»ä»·æ ¼ä¸º4ï¼Œæ€»æ€§èƒ½ä¸º11ã€‚<br><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç¬¬ä¸€çœ¼çœ‹åˆ°å°±æ„Ÿè§‰æ˜¯01èƒŒåŒ…ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„dpæ•°ç»„æ¥è¡¨ç¤ºï¼Œåæ¥çœ‹äº†å¤§ä½¬çš„æ€è·¯æ„Ÿè§‰ dfs ç®€å•æ˜äº†ã€‚</p><p>ä¸»è¦æ€è·¯å°±æ˜¯dfsé€†åºéå†ï¼Œæ¯æ¬¡dfsè¿‡ç¨‹ä¸­ï¼Œéå†å½“å‰é›¶ä»¶çš„æ‰€æœ‰å‹å·ï¼Œå¦‚æœå½“å‰é¢„ç®—å¤§äºç­‰äºè¯¥å‹å·çš„ä»·æ ¼ï¼Œé‚£ä¹ˆå³å¯å¯¹å½“å‰å‹å·è¿›è¡Œdfsã€‚<br />å½“dfså®Œæ‰€æœ‰é›¶ä»¶åï¼Œæ›´æ–°anså³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll=<span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">45</span>;<br>ll num[N], v[N][N], w[N][N], x;<br>ll ans=<span class="hljs-number">-1</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> n, ll cost, ll sum)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)&#123;<br>        ans=<span class="hljs-built_in">max</span>(ans,sum);<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=num[n];++i)&#123;<br>        <span class="hljs-keyword">if</span>(cost&gt;=v[n][i])&#123;<br>            <span class="hljs-built_in">dfs</span>(n<span class="hljs-number">-1</span>,cost-v[n][i],sum+w[n][i]);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n&gt;&gt;x;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>        <span class="hljs-type">int</span> m;<br>        cin&gt;&gt;m;<br>        num[i]=m;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>            cin&gt;&gt;v[i][j];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>            cin&gt;&gt;w[i][j];<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(n,x,<span class="hljs-number">0</span>);<br>    cout&lt;&lt;ans&lt;&lt;endl;<br>    <br>&#125;<br><span class="hljs-comment">// 64 ä½è¾“å‡ºè¯·ç”¨ printf(&quot;%lld&quot;)</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¯»æ‰¾é‡å¤æ•°</title>
    <link href="/2025/02/02/%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0/"/>
    <url>/2025/02/02/%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å¯»æ‰¾é‡å¤æ•°"><a class="markdownIt-Anchor" href="#å¯»æ‰¾é‡å¤æ•°"></a> å¯»æ‰¾é‡å¤æ•°</h2><!-- TOC --><ul><li><a href="#%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0">å¯»æ‰¾é‡å¤æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/find-the-duplicate-number/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ nums ï¼Œå…¶æ•°å­—éƒ½åœ¨ [1, n] èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚</p><p>å‡è®¾ nums åªæœ‰ ä¸€ä¸ªé‡å¤çš„æ•´æ•° ï¼Œè¿”å› è¿™ä¸ªé‡å¤çš„æ•° ã€‚</p><p>ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» ä¸ä¿®æ”¹ æ•°ç»„ nums ä¸”åªç”¨å¸¸é‡çº§ O(1) çš„é¢å¤–ç©ºé—´ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[1,3,4,2,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¢˜ç›®è¦æ±‚ä¸ä½¿ç”¨é¢å¤–ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½è€ƒè™‘è¾…åŠ©çš„æ•°æ®ç»“æ„ã€‚<br />å¯ä»¥è€ƒè™‘ç”¨å¿«æ…¢æŒ‡é’ˆè§£å†³ï¼Œå®é™…ä¸Šå’Œåˆ¤æ–­é“¾è¡¨ä¸­ç¯çš„å…¥å£æ€è·¯ä¸€æ ·ã€‚<br />å°†æ•°ç»„ä¸­çœ‹ä½œä¸€ä¸ªé“¾è¡¨ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å°±æ˜¯é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œæ•°ç»„çš„å…ƒç´ çš„å€¼çœ‹ä½œæ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•ã€‚å› ä¸ºå­˜åœ¨é‡å¤çš„æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªé‡å¤çš„æ•°å°±æ˜¯é“¾è¡¨ä¸­çš„ç¯çš„å…¥å£ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int findDuplicate(vector&lt;int&gt;&amp; nums) &#123;<br>        int <span class="hljs-attribute">n</span>=nums.size();<br>        int <span class="hljs-attribute">slow</span>=0,fast=0;<br>        <span class="hljs-keyword">while</span>(1)&#123;<br>            <span class="hljs-attribute">slow</span>=nums[slow];<br>            <span class="hljs-attribute">fast</span>=nums[nums[fast]];<br>            <span class="hljs-keyword">if</span>(<span class="hljs-attribute">slow</span>==fast)<br>                break;<br>        &#125;<br>        <span class="hljs-attribute">slow</span>=0;<br>        <span class="hljs-keyword">while</span>(slow!=fast)&#123;<br>            <span class="hljs-attribute">slow</span>=nums[slow];<br>            <span class="hljs-attribute">fast</span>=nums[fast];<br>        &#125;<br>        return slow;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</title>
    <link href="/2025/01/29/%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <url>/2025/01/29/%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"><a class="markdownIt-Anchor" href="#ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"></a> ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</h2><!-- TOC --><ul><li><a href="#%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84">ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li><li><a href="#%E6%89%A9%E5%B1%95">æ‰©å±•</a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/maximum-product-subarray/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºæ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„éç©ºè¿ç»­<br />å­æ•°ç»„<br />ï¼ˆè¯¥å­æ•°ç»„ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„æ‰€å¯¹åº”çš„ä¹˜ç§¯ã€‚</p><p>æµ‹è¯•ç”¨ä¾‹çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ª 32-ä½ æ•´æ•°ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: nums = [2,3,-2,4]</span><br><span class="hljs-section">è¾“å‡º: 6</span><br><span class="hljs-section">è§£é‡Š: å­æ•°ç»„ [2,3] æœ‰æœ€å¤§ä¹˜ç§¯ 6ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜æ€è·¯å’Œ<strong>æœ€å¤§å­æ•°ç»„çš„å’Œ</strong>é¢˜ç›®ç±»ä¼¼ï¼Œéƒ½ç”¨åŠ¨æ€è§„åˆ’çš„æ€è·¯è§£å†³ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºä¹˜æ³•çš„ç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨è®¡ç®—çš„æ—¶å€™éœ€è¦åŒæ—¶ç»´æŠ¤ä¸€ä¸ªæœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå› ä¸ºæœ€å°å€¼å¯èƒ½ä¼šå˜æˆæœ€å¤§å€¼ã€‚<br />ç”±äºæ˜¯è¿ç»­çš„å­æ•°ç»„ï¼Œæ¯æ¬¡æœ€å¤§æœ€å°å€¼åªéœ€è¦ä»<code>nums[i]</code>å’Œ<code>max * nums[i]</code>ã€<code>min * nums[i]</code>ä¸­å–æœ€å¤§æœ€å°å€¼å³å¯ï¼Œæ¯æ¬¡è¿˜è¦æ›´æ–°ansä¸ºanså’Œmaxä¸­çš„æœ€å¤§å€¼ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int maxProduct(vector&lt;int&gt;&amp; nums) &#123;<br>        int <span class="hljs-attribute">n</span>=nums.size();<br>        int <span class="hljs-attribute">mx</span>=nums[0],<span class="hljs-attribute">mn</span>=nums[0];<br>        int <span class="hljs-attribute">ans</span>=nums[0];<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=1;i&lt;n;++i)&#123;<br>            int <span class="hljs-attribute">mxt</span>=mx;<br>            <span class="hljs-attribute">mx</span>=max(&#123;mx*nums[i],mn*nums[i],nums[i]&#125;);<br>            <span class="hljs-attribute">mn</span>=min(&#123;mxt*nums[i],mn*nums[i],nums[i]&#125;);<br>            <span class="hljs-attribute">ans</span>=max(ans,mx);<br>        &#125;<br>        return ans;        <br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h3 id="æ‰©å±•"><a class="markdownIt-Anchor" href="#æ‰©å±•"></a> æ‰©å±•</h3><p>å¦‚æœæŠŠé¢˜ç›®è¦æ±‚æ”¹ä¸ºå­åºåˆ—ï¼Œå‚è€ƒ<a href="https://leetcode.cn/problems/maximum-strength-of-a-group/description/">ä¸€ä¸ªå°ç»„çš„æœ€å¤§å®åŠ›å€¼</a>ï¼Œå®é™…ä¸Šæ€è·¯ä¹Ÿç±»ä¼¼ï¼Œä¹Ÿè¦ç»´æŠ¤æœ€å¤§å’Œæœ€å°å€¼<br />ä½†æ˜¯ï¼Œè¿™é‡ŒåŒ…æ‹¬é€‰å’Œä¸é€‰ä¸¤ç§æƒ…å†µ</p><ul><li>é€‰ï¼Œå¯¹åº”æƒ…å†µæ˜¯<code>x,mx*x,mn*x</code></li><li>ä¸é€‰ï¼Œå¯¹åº”æƒ…å†µæ˜¯<code>mx</code>æˆ–è€…<code>mn</code></li></ul><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    long long maxStrength(vector&lt;int&gt;&amp; nums) &#123;<br>        int <span class="hljs-attribute">n</span>=nums.size();<br>        long long <span class="hljs-attribute">mx</span>=nums[0],<span class="hljs-attribute">mn</span>=nums[0];<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=1;i&lt;n;++i)&#123;<br>            long long <span class="hljs-attribute">x</span>=nums[i];<br>            long long <span class="hljs-attribute">tmx</span>=mx;<br>            <span class="hljs-attribute">mx</span>=max(&#123;mx,x,mx*x,mn*x&#125;);<br>            <span class="hljs-attribute">mn</span>=min(&#123;mn,x,tmx*x,mn*x&#125;);<br>        &#125;<br>        return mx;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®Œå…¨å¹³æ–¹æ•°</title>
    <link href="/2025/01/28/%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0/"/>
    <url>/2025/01/28/%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å®Œå…¨å¹³æ–¹æ•°"><a class="markdownIt-Anchor" href="#å®Œå…¨å¹³æ–¹æ•°"></a> å®Œå…¨å¹³æ–¹æ•°</h2><!-- TOC --><ul><li><a href="#%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0">å®Œå…¨å¹³æ–¹æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/perfect-squares/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å› å’Œä¸º n çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡ ã€‚</p><p>å®Œå…¨å¹³æ–¹æ•° æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ1ã€4ã€9 å’Œ 16 éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€Œ 3 å’Œ 11 ä¸æ˜¯ã€‚</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn = 12<br>è¾“å‡ºï¼š3 <br>è§£é‡Šï¼š12 =<span class="hljs-number"> 4 </span>+<span class="hljs-number"> 4 </span>+ 4<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯ä¸€é“å®Œå…¨èƒŒåŒ…é—®é¢˜ã€‚å¯ä»¥æŠŠnçœ‹ä½œèƒŒåŒ…å®¹é‡ï¼Œæ¯ä¸ªå®Œå…¨å¹³æ–¹æ•°çœ‹ä½œç‰©å“ï¼Œæ¯ä¸ªå®Œå…¨å¹³æ–¹æ•°çš„ä»·å€¼ä¸º1ã€‚è¿™æ ·å°±å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªå®Œå…¨èƒŒåŒ…é—®é¢˜äº†ï¼Œä¸”å¯¹åº”è£…æ»¡çš„æƒ…å†µã€‚<br />å…³äº01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ï¼Œä¹‹å‰æ•´ç†äº†æ¨¡æ¿<a href="https://lqz2.github.io/2022/08/22/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/">èƒŒåŒ…é—®é¢˜</a><br />æ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼Œ01èƒŒåŒ…é€†å‘éå†ï¼Œå®Œå…¨èƒŒåŒ…æ­£å‘éå†ï¼Œè¦æ±‚è£…æ»¡æ—¶dpæ•°ç»„åˆå§‹åŒ–ä¸ºæœ€å¤§å€¼æˆ–æœ€å°å€¼ä¸”<code>dp[0]=0</code>ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">numSquares</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n+<span class="hljs-number">1</span>,INT_MAX)</span></span>;<br>        dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i*i;j&lt;=n;++j)&#123;<br>                dp[j]=<span class="hljs-built_in">min</span>(dp[j],dp[j-i*i]+<span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[n];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å‰²å›æ–‡ä¸²</title>
    <link href="/2025/01/11/%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2/"/>
    <url>/2025/01/11/%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ†å‰²å›æ–‡ä¸²"><a class="markdownIt-Anchor" href="#åˆ†å‰²å›æ–‡ä¸²"></a> åˆ†å‰²å›æ–‡ä¸²</h2><!-- TOC --><ul><li><a href="#%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2">åˆ†å‰²å›æ–‡ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/palindrome-partitioning/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¯·ä½ å°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯<br />å›æ–‡ä¸²ã€‚è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;aab&quot;</span><br>è¾“å‡ºï¼š[[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>],[<span class="hljs-string">&quot;aa&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>]]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯ä»¥çœ‹ä½œæ˜¯å¦é€‰æ‹©å½“å‰å­—ç¬¦ä½œä¸ºå›æ–‡å­ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦</p><ul><li>é€‰ï¼Œåˆ™åˆ¤æ–­å½“å‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸²ï¼Œæ˜¯åˆ™å°†å½“å‰å­ä¸²åŠ å…¥ç­”æ¡ˆï¼Œæ›´æ–°å›æ–‡å­ä¸²èµ·ç‚¹ï¼Œç»§ç»­é€’å½’</li><li>ä¸é€‰ï¼Œåˆ™ç»§ç»­é€’å½’ï¼Œæ— éœ€æ›´æ–°å›æ–‡å­ä¸²èµ·ç‚¹</li><li>å¦‚æœå½“å‰å­—ç¬¦ä¸ºå­—ç¬¦ä¸²æœ«å°¾ï¼Œåˆ™åªæœ‰é€‰çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ä¸é€‰çš„æƒ…å†µåªé€‚ç”¨äº<code>idx&lt;n-1</code>çš„æƒ…å†µ</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(string s,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span>&#123;<br>        <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>            <span class="hljs-keyword">if</span>(s[l++]!=s[r--])<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(vector&lt;vector&lt;string&gt;&gt;&amp; ans,vector&lt;string&gt;&amp; tmp,string s,<span class="hljs-type">int</span> start, <span class="hljs-type">int</span> idx)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(idx==s.<span class="hljs-built_in">size</span>())&#123;<br>            ans.<span class="hljs-built_in">push_back</span>(tmp);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//é€‰</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(s,start,idx))&#123;<br>            tmp.<span class="hljs-built_in">push_back</span>(s.<span class="hljs-built_in">substr</span>(start,idx-start+<span class="hljs-number">1</span>));<br>            <span class="hljs-built_in">dfs</span>(ans,tmp,s,idx+<span class="hljs-number">1</span>,idx+<span class="hljs-number">1</span>);<br>            tmp.<span class="hljs-built_in">pop_back</span>();<br>        &#125;<br>        <span class="hljs-comment">//ä¸é€‰</span><br>        <span class="hljs-keyword">if</span>(idx&lt;s.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>)<br>            <span class="hljs-built_in">dfs</span>(ans,tmp,s,start,idx+<span class="hljs-number">1</span>);<br>    &#125;<br>    vector&lt;vector&lt;string&gt;&gt; <span class="hljs-built_in">partition</span>(string s) &#123;<br>        vector&lt;vector&lt;string&gt;&gt; ans;<br>        vector&lt;string&gt; tmp;<br>        <span class="hljs-built_in">dfs</span>(ans,tmp,s,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Trieæ ‘</title>
    <link href="/2025/01/04/Trie%E6%A0%91/"/>
    <url>/2025/01/04/Trie%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h2 id="trieæ ‘"><a class="markdownIt-Anchor" href="#trieæ ‘"></a> Trieæ ‘</h2><!-- TOC --><ul><li><a href="#trie%E6%A0%91">Trieæ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/implement-trie-prefix-tree/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>Trieï¼ˆå‘éŸ³ç±»ä¼¼ â€œtryâ€ï¼‰æˆ–è€…è¯´ å‰ç¼€æ ‘ æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨å’Œæ‹¼å†™æ£€æŸ¥ã€‚</p><p>è¯·ä½ å®ç° Trie ç±»ï¼š</p><p>Trie() åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚<br />void insert(String word) å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² word ã€‚<br />boolean search(String word) å¦‚æœå­—ç¬¦ä¸² word åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› trueï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚<br />boolean startsWith(String prefix) å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² word çš„å‰ç¼€ä¹‹ä¸€ä¸º prefix ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥<br>[<span class="hljs-string">&quot;Trie&quot;</span>, <span class="hljs-string">&quot;insert&quot;</span>, <span class="hljs-string">&quot;search&quot;</span>, <span class="hljs-string">&quot;search&quot;</span>, <span class="hljs-string">&quot;startsWith&quot;</span>, <span class="hljs-string">&quot;insert&quot;</span>, <span class="hljs-string">&quot;search&quot;</span>]<br>[[], [<span class="hljs-string">&quot;apple&quot;</span>], [<span class="hljs-string">&quot;apple&quot;</span>], [<span class="hljs-string">&quot;app&quot;</span>], [<span class="hljs-string">&quot;app&quot;</span>], [<span class="hljs-string">&quot;app&quot;</span>], [<span class="hljs-string">&quot;app&quot;</span>]]<br>è¾“å‡º<br>[null, null, true, false, true, null, true]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜éœ€è¦å®ç°ä¸€ä¸ªTrieæ ‘ä»¥åŠä¸€äº›åŸºæœ¬æ“ä½œã€‚å¯ä»¥ç»´æŠ¤ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼š</p><ul><li><code>vector&lt;Trie*&gt; next</code>ï¼šç”¨äºå­˜å‚¨å­èŠ‚ç‚¹çš„æ•°ç»„</li><li><code>bool isEnd</code>ï¼šç”¨äºæ ‡è®°æ˜¯å¦æ˜¯ä¸€ä¸ªå•è¯çš„ç»“å°¾</li></ul><p>ç”±äºæ˜¯26ä¸ªå°å†™å­—æ¯ï¼Œæ‰€ä»¥<code>next</code>æ•°ç»„å¤§å°åˆå§‹åŒ–ä¸º26, isEndåˆå§‹åŒ–ä¸ºfalseã€‚</p><p>æ’å…¥æ—¶ï¼Œéå†å•è¯çš„æ¯ä¸ªå­—æ¯ï¼Œå¦‚æœå½“å‰å­—æ¯åœ¨nextæ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºä¸€ä¸ªTrieèŠ‚ç‚¹<code>node-&gt;next[c-'a']==new Trie()</code>ï¼Œç„¶åç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<code>node=node-&gt;next[c-'a']</code>ã€‚<br />éå†å®Œå­—ç¬¦ä¸²åå°†<code>node-&gt;isEnd=true</code>ã€‚</p><p>æŸ¥æ‰¾æ—¶ï¼Œéå†å•è¯çš„æ¯ä¸ªå­—æ¯ï¼Œå¦‚æœå½“å‰å­—æ¯åœ¨nextæ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›falseï¼Œå­˜åœ¨åˆ™ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚éå†å®Œå­—ç¬¦ä¸²åï¼Œè¿”å›<code>node-&gt;isEnd</code>ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Trie</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">bool</span> isEnd;<br>    vector&lt;Trie*&gt; next;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Trie</span>(): <span class="hljs-built_in">next</span>(<span class="hljs-number">26</span>), <span class="hljs-built_in">isEnd</span>(<span class="hljs-literal">false</span>) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(string <span class="hljs-type">word</span>)</span> </span>&#123;<br>        Trie *node=<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c:<span class="hljs-type">word</span>)&#123;<br>            <span class="hljs-keyword">if</span>(node-&gt;next[c-<span class="hljs-string">&#x27;a&#x27;</span>]==<span class="hljs-literal">nullptr</span>)&#123;<br>                node-&gt;next[c-<span class="hljs-string">&#x27;a&#x27;</span>]=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Trie</span>();<br>            &#125;<br>            node=node-&gt;next[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>        &#125;<br>        node-&gt;isEnd=<span class="hljs-literal">true</span>;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">search</span><span class="hljs-params">(string <span class="hljs-type">word</span>)</span> </span>&#123;<br>        Trie* node=<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c:<span class="hljs-type">word</span>)&#123;<br>            node=node-&gt;next[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>            <span class="hljs-keyword">if</span>(node==<span class="hljs-literal">nullptr</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> node-&gt;isEnd;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">startsWith</span><span class="hljs-params">(string prefix)</span> </span>&#123;<br>        Trie* node=<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c:prefix)&#123;<br>            node=node-&gt;next[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>            <span class="hljs-keyword">if</span>(node==<span class="hljs-literal">nullptr</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æ ‘åŸºç¡€</title>
    <link href="/2024/12/29/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/12/29/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6">äºŒå‰æ ‘æœ€å¤§æ·±åº¦</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E7%9B%B8%E5%90%8C%E7%9A%84%E6%A0%91">ç›¸åŒçš„æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E5%AF%B9%E7%A7%B0%E4%BA%8C%E5%8F%89%E6%A0%91">å¯¹ç§°äºŒå‰æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li><li><a href="#%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91">å¹³è¡¡äºŒå‰æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-3">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-3">ä»£ç </a></li></ul></li><li><a href="#%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%B3%E8%A7%86%E5%9B%BE">äºŒå‰æ ‘å³è§†å›¾</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-4">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-4">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-4">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91">æœ‰åºæ•°ç»„è½¬ä¸ºäºŒå‰æœç´¢æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-5">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-5">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-5">ä»£ç </a></li></ul></li><li><a href="#%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91">éªŒè¯äºŒå‰æœç´¢æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-6">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-6">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-6">ä»£ç </a></li></ul></li><li><a href="#%E7%BF%BB%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91">ç¿»è½¬äºŒå‰æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-7">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-7">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-7">ä»£ç </a></li></ul></li><li><a href="#%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84">äºŒå‰æ ‘çš„ç›´å¾„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-8">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-8">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-8">ä»£ç </a></li></ul></li><li><a href="#%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9C%80%E5%A4%A7%E8%B7%AF%E5%BE%84%E5%92%8C">äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-9">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-9">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-9">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="äºŒå‰æ ‘æœ€å¤§æ·±åº¦"><a class="markdownIt-Anchor" href="#äºŒå‰æ ‘æœ€å¤§æ·±åº¦"></a> äºŒå‰æ ‘æœ€å¤§æ·±åº¦</h2><p><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ root ï¼Œè¿”å›å…¶æœ€å¤§æ·±åº¦ã€‚</p><p>äºŒå‰æ ‘çš„ æœ€å¤§æ·±åº¦ æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>äºŒå‰æ ‘å…¥é—¨é¢˜ï¼Œæœ€å¤§æ·±åº¦ç­‰äºå·¦å³å­æ ‘æœ€å¤§æ·±åº¦åŠ 1ï¼Œæ‰€ä»¥å¯ä»¥é€’å½’</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    int maxDepth(TreeNode* root) &#123;<br>        <span class="hljs-keyword">if</span>(!root)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span> max(maxDepth(root-&gt;left),maxDepth(root-&gt;right))+<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ç›¸åŒçš„æ ‘"><a class="markdownIt-Anchor" href="#ç›¸åŒçš„æ ‘"></a> ç›¸åŒçš„æ ‘</h2><p><a href="https://leetcode.cn/problems/same-tree/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ p å’Œ q ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒã€‚</p><p>å¦‚æœä¸¤ä¸ªæ ‘åœ¨ç»“æ„ä¸Šç›¸åŒï¼Œå¹¶ä¸”èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„</p><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å½“ä¸¤ä¸ªæ ‘çš„å½“å‰èŠ‚ç‚¹æœ‰ä¸€ä¸ªä¸ºç©ºï¼šéƒ½ä¸ºç©ºè¿”å›trueï¼Œå¦åˆ™è¿”å›false<br />å¦åˆ™ï¼Œä¸¤ä¸ªèŠ‚ç‚¹å€¼ç›¸ç­‰ï¼Œä¸”é€’å½’å·¦å³å­æ ‘ä¹Ÿä¸ºtrueï¼Œæ‰è¿”å›true</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coq">class Solution &#123;<br>public:<br>    bool isSameTree(TreeNode* p, TreeNode* q) &#123;<br>        <span class="hljs-keyword">if</span>(!p|<span class="hljs-type">|!q</span>)<br>            <span class="hljs-keyword">return</span> p==q;<br>        <span class="hljs-keyword">return</span> p-&gt;val==q-&gt;val&amp;&amp; isSameTree(p-&gt;<span class="hljs-built_in">left</span>,q-&gt;<span class="hljs-built_in">left</span>)&amp;&amp; isSameTree(p-&gt;<span class="hljs-built_in">right</span>,q-&gt;<span class="hljs-built_in">right</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="å¯¹ç§°äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#å¯¹ç§°äºŒå‰æ ‘"></a> å¯¹ç§°äºŒå‰æ ‘</h2><p><a href="https://leetcode.cn/problems/symmetric-tree/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚</p><h3 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h3><p>å’Œç›¸åŒçš„æ ‘ç±»ä¼¼ï¼Œåˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦å¯¹ç§°å³å¯ï¼Œåˆ¤æ–­è¿‡ç¨‹ä¸ç›¸åŒçš„æ ‘ç±»ä¼¼ï¼Œä½†æ¯”è¾ƒçš„æ˜¯å·¦å­æ ‘çš„å·¦èŠ‚ç‚¹å’Œå³å­æ ‘çš„å³èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„å³èŠ‚ç‚¹å’Œå³å­æ ‘çš„å·¦èŠ‚ç‚¹</p><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coq">class Solution &#123;<br>public:<br>    bool func(TreeNode* l, TreeNode* r)&#123;<br>        <span class="hljs-keyword">if</span>(!l|<span class="hljs-type">|!r</span>)<br>            <span class="hljs-keyword">return</span> l==r;<br>        <span class="hljs-keyword">return</span> l-&gt;val==r-&gt;val&amp;&amp;func(l-&gt;<span class="hljs-built_in">left</span>,r-&gt;<span class="hljs-built_in">right</span>)&amp;&amp;func(l-&gt;<span class="hljs-built_in">right</span>,r-&gt;<span class="hljs-built_in">left</span>);<br>    &#125;<br>    bool isSymmetric(TreeNode* root) &#123;<br>        <span class="hljs-keyword">return</span> func(root-&gt;<span class="hljs-built_in">left</span>,root-&gt;<span class="hljs-built_in">right</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="å¹³è¡¡äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#å¹³è¡¡äºŒå‰æ ‘"></a> å¹³è¡¡äºŒå‰æ ‘</h2><p><a href="https://leetcode.cn/problems/balanced-binary-tree/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-4"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-4"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯å¹³è¡¡äºŒå‰æ ‘</p><h3 id="æ€è·¯-4"><a class="markdownIt-Anchor" href="#æ€è·¯-4"></a> æ€è·¯</h3><p>ä¸æ±‚å‡ºäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ±‚å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦æ—¶ï¼Œè¦åˆ¤æ–­å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦å·®æ˜¯å¦å¤§äº1</p><h3 id="ä»£ç -4"><a class="markdownIt-Anchor" href="#ä»£ç -4"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">depth</span><span class="hljs-params">(TreeNode *t)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(t==<span class="hljs-literal">nullptr</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> l=<span class="hljs-built_in">depth</span>(t-&gt;left);<br>        <span class="hljs-keyword">if</span>(l==<span class="hljs-number">-1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-type">int</span> r=<span class="hljs-built_in">depth</span>(t-&gt;right);<br>        <span class="hljs-keyword">if</span>(r==<span class="hljs-number">-1</span>||<span class="hljs-built_in">abs</span>(l-r)&gt;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(l,r)+<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isBalanced</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">depth</span>(root)!=<span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘å³è§†å›¾"><a class="markdownIt-Anchor" href="#äºŒå‰æ ‘å³è§†å›¾"></a> äºŒå‰æ ‘å³è§†å›¾</h2><p><a href="https://leetcode.cn/problems/binary-tree-right-side-view/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-5"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-5"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ æ ¹èŠ‚ç‚¹ rootï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚</p><h3 id="æ€è·¯-5"><a class="markdownIt-Anchor" href="#æ€è·¯-5"></a> æ€è·¯</h3><p>è®¾ç½®ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ·±åº¦çš„æ ‡è®°ï¼Œå½“å®é™…æ·±åº¦å¤§äºæ ‡è®°æ—¶ï¼Œæ‰å°†å½“å‰èŠ‚ç‚¹å€¼åŠ å…¥ç»“æœä¸­ï¼Œé€’å½’æ—¶å…ˆé€’å½’å³å­æ ‘ï¼Œå†é€’å½’å·¦å­æ ‘</p><h3 id="ä»£ç -5"><a class="markdownIt-Anchor" href="#ä»£ç -5"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> cur=<span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(TreeNode* t, vector&lt;<span class="hljs-type">int</span>&gt;&amp; ans, <span class="hljs-type">int</span> depth)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(t==<span class="hljs-literal">nullptr</span>)<br>            <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">if</span>(depth&gt;cur)&#123;<br>            ans.<span class="hljs-built_in">push_back</span>(t-&gt;val);<br>            ++cur;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(t-&gt;right,ans,depth+<span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">dfs</span>(t-&gt;left,ans,depth+<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">rightSideView</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        vector&lt;<span class="hljs-type">int</span>&gt; ans;<br>        <span class="hljs-built_in">dfs</span>(root,ans,<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æœ‰åºæ•°ç»„è½¬ä¸ºäºŒå‰æœç´¢æ ‘"><a class="markdownIt-Anchor" href="#æœ‰åºæ•°ç»„è½¬ä¸ºäºŒå‰æœç´¢æ ‘"></a> æœ‰åºæ•°ç»„è½¬ä¸ºäºŒå‰æœç´¢æ ‘</h2><p><a href="https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-6"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-6"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ å‡åº æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µå¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚</p><h3 id="æ€è·¯-6"><a class="markdownIt-Anchor" href="#æ€è·¯-6"></a> æ€è·¯</h3><p>ç±»ä¼¼å½’å¹¶æ’åºï¼Œæ¯æ¬¡å–æ•°ç»„ä¸­é—´å…ƒç´ ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œé€’å½’å·¦å³å­æ ‘å»ºç«‹äºŒå‰æœç´¢æ ‘</p><h3 id="ä»£ç -6"><a class="markdownIt-Anchor" href="#ä»£ç -6"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">dfs</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(l==r)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-type">int</span> mid=l+(r-l)/<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(nums[mid],<span class="hljs-built_in">dfs</span>(nums,l,mid),<span class="hljs-built_in">dfs</span>(nums,mid+<span class="hljs-number">1</span>,r));<br>    &#125;<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">sortedArrayToBST</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dfs</span>(nums,<span class="hljs-number">0</span>,nums.<span class="hljs-built_in">size</span>());<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="éªŒè¯äºŒå‰æœç´¢æ ‘"><a class="markdownIt-Anchor" href="#éªŒè¯äºŒå‰æœç´¢æ ‘"></a> éªŒè¯äºŒå‰æœç´¢æ ‘</h2><p><a href="https://leetcode.cn/problems/validate-binary-search-tree/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-7"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-7"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p>æœ‰æ•ˆ äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š</p><p>èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« å°äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br />èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« å¤§äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br />æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p><h3 id="æ€è·¯-7"><a class="markdownIt-Anchor" href="#æ€è·¯-7"></a> æ€è·¯</h3><p>æŒ‰ç…§ä¸­åºéå†çš„é¡ºåºï¼Œè®¾ç½®ä¸€ä¸ªå€¼preè®°å½•ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œé€’å½’æ—¶åˆ¤æ–­å½“å‰èŠ‚ç‚¹å€¼æ˜¯å¦å¤§äºpreï¼Œå¦‚æœå°äºç­‰äºpreï¼Œè¿”å›falseï¼Œæ›´æ–°preä¸ºå½“å‰èŠ‚ç‚¹å€¼ï¼Œé€’å½’å·¦å³å­æ ‘</p><h3 id="ä»£ç -7"><a class="markdownIt-Anchor" href="#ä»£ç -7"></a> ä»£ç </h3><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> pre=LLONG_MIN;<br>    <span class="hljs-keyword">bool</span> isValidBST(TreeNode* root) &#123;<br>        <span class="hljs-keyword">if</span>(root==nullptr)<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>        <span class="hljs-keyword">if</span>(!isValidBST(root-&gt;left)||root-&gt;val&lt;=pre)<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        pre=root-&gt;val;<br>        <span class="hljs-keyword">return</span> isValidBST(root-&gt;right);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ç¿»è½¬äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#ç¿»è½¬äºŒå‰æ ‘"></a> ç¿»è½¬äºŒå‰æ ‘</h2><p><a href="https://leetcode.cn/problems/invert-binary-tree/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-8"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-8"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><h3 id="æ€è·¯-8"><a class="markdownIt-Anchor" href="#æ€è·¯-8"></a> æ€è·¯</h3><p>é€’å½’ï¼Œå…ˆç¿»è½¬å·¦å³å­æ ‘ï¼Œå†äº¤æ¢å·¦å³å­æ ‘çš„æŒ‡é’ˆï¼Œè¿”å›å½“å‰èŠ‚ç‚¹</p><h3 id="ä»£ç -8"><a class="markdownIt-Anchor" href="#ä»£ç -8"></a> ä»£ç </h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs coq">class Solution &#123;<br>public:<br>    TreeNode* invertTree(TreeNode* root) &#123;<br>        <span class="hljs-keyword">if</span>(root==nullptr)<br>            <span class="hljs-keyword">return</span> nullptr;<br>        TreeNode* l=invertTree(root-&gt;<span class="hljs-built_in">left</span>);<br>        TreeNode* r=invertTree(root-&gt;<span class="hljs-built_in">right</span>);<br>        root-&gt;<span class="hljs-built_in">left</span>=r;<br>        root-&gt;<span class="hljs-built_in">right</span>=l;<br>        <span class="hljs-keyword">return</span> root;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„ç›´å¾„"><a class="markdownIt-Anchor" href="#äºŒå‰æ ‘çš„ç›´å¾„"></a> äºŒå‰æ ‘çš„ç›´å¾„</h2><p><a href="https://leetcode.cn/problems/diameter-of-binary-tree/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-9"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-9"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ‘çš„ ç›´å¾„ ã€‚</p><p>äºŒå‰æ ‘çš„ ç›´å¾„ æ˜¯æŒ‡æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„ é•¿åº¦ ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç»è¿‡ä¹Ÿå¯èƒ½ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ root ã€‚</p><p>ä¸¤èŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„ é•¿åº¦ ç”±å®ƒä»¬ä¹‹é—´è¾¹æ•°è¡¨ç¤ºã€‚</p><h3 id="æ€è·¯-9"><a class="markdownIt-Anchor" href="#æ€è·¯-9"></a> æ€è·¯</h3><p>ç›´å¾„ç­‰äºå·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ä¹‹å’Œï¼Œå’Œæ±‚æœ€å¤§æ·±åº¦ç±»ä¼¼ï¼Œé€’å½’æ—¶æ›´æ–°æœ€å¤§ç›´å¾„å³å¯</p><h3 id="ä»£ç -9"><a class="markdownIt-Anchor" href="#ä»£ç -9"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">depth</span><span class="hljs-params">(TreeNode* root, <span class="hljs-type">int</span> &amp;maxlen)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(root==<span class="hljs-literal">nullptr</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> l=<span class="hljs-built_in">depth</span>(root-&gt;left, maxlen);<br>        <span class="hljs-type">int</span> r=<span class="hljs-built_in">depth</span>(root-&gt;right, maxlen);<br>        maxlen=<span class="hljs-built_in">max</span>(l+r,maxlen);<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(l,r)+<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">diameterOfBinaryTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-type">int</span> maxlen=<span class="hljs-number">-1</span>;<br>        <span class="hljs-built_in">depth</span>(root, maxlen);<br>        <span class="hljs-keyword">return</span> maxlen;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ"><a class="markdownIt-Anchor" href="#äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ"></a> äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ</h2><p><a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-10"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-10"></a> é¢˜ç›®æè¿°</h3><p>äºŒå‰æ ‘ä¸­çš„ è·¯å¾„ è¢«å®šä¹‰ä¸ºä¸€æ¡èŠ‚ç‚¹åºåˆ—ï¼Œåºåˆ—ä¸­æ¯å¯¹ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ è‡³å¤šå‡ºç°ä¸€æ¬¡ ã€‚è¯¥è·¯å¾„ è‡³å°‘åŒ…å«ä¸€ä¸ª èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚</p><p>è·¯å¾„å’Œ æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚</p><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶ æœ€å¤§è·¯å¾„å’Œ</p><h3 id="æ€è·¯-10"><a class="markdownIt-Anchor" href="#æ€è·¯-10"></a> æ€è·¯</h3><p>æœ€å¤§è·¯å¾„å’Œç­‰äºå·¦å­æ ‘æœ€æ·±è·¯å¾„å’Œ+å³å­æ ‘æœ€æ·±è·¯å¾„å’Œ+å½“å‰èŠ‚ç‚¹å€¼<br />æ‰€ä»¥é€’å½’æ—¶è¿”å›å½“å‰èŠ‚ç‚¹å‘ä¸‹çš„æœ€æ·±è·¯å¾„å’Œï¼Œå³<code>max(max(l,r)+root-&gt;val,0)</code><br />åŒæ—¶æ›´æ–°æœ€å¤§è·¯å¾„å’Œï¼Œå³<code>max(l+r+root-&gt;val,ans)</code></p><h3 id="ä»£ç -10"><a class="markdownIt-Anchor" href="#ä»£ç -10"></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> ans;<br>    <span class="hljs-built_in">int</span> dfs(TreeNode* <span class="hljs-built_in">t</span>)&#123;<br>        <span class="hljs-built_in">if</span>(<span class="hljs-built_in">t</span>==nullptr)<br>            return <span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> l=dfs(<span class="hljs-built_in">t</span>-&gt;<span class="hljs-built_in">left</span>);<br>        <span class="hljs-built_in">int</span> r=dfs(<span class="hljs-built_in">t</span>-&gt;<span class="hljs-built_in">right</span>);<br>        ans=<span class="hljs-built_in">max</span>(ans,l+r+<span class="hljs-built_in">t</span>-&gt;val);<br>        return <span class="hljs-built_in">max</span>(<span class="hljs-built_in">max</span>(l,r)+<span class="hljs-built_in">t</span>-&gt;val,<span class="hljs-number">0</span>);<br>    &#125;<br>    <span class="hljs-built_in">int</span> maxPathSum(TreeNode* root) &#123;<br>        ans=INT_MIN;<br>        dfs(root);<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è·¯å¾„æ€»å’Œ3</title>
    <link href="/2024/12/27/%E8%B7%AF%E5%BE%84%E6%80%BB%E5%92%8C3/"/>
    <url>/2024/12/27/%E8%B7%AF%E5%BE%84%E6%80%BB%E5%92%8C3/</url>
    
    <content type="html"><![CDATA[<h2 id="è·¯å¾„æ€»å’Œ3"><a class="markdownIt-Anchor" href="#è·¯å¾„æ€»å’Œ3"></a> è·¯å¾„æ€»å’Œ3</h2><!-- TOC --><ul><li><a href="#%E8%B7%AF%E5%BE%84%E6%80%BB%E5%92%8C3">è·¯å¾„æ€»å’Œ3</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/path-sum-iii/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œå’Œä¸€ä¸ªæ•´æ•° targetSum ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº targetSum çš„ è·¯å¾„ çš„æ•°ç›®ã€‚</p><p>è·¯å¾„ ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">root</span> = [<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">11</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">13</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">2</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>], <span class="hljs-attr">targetSum</span> = <span class="hljs-number">22</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…æ˜¯äºŒå‰æ ‘ç‰ˆçš„å’Œä¸ºkçš„å­æ•°ç»„ï¼Œè¿˜æ˜¯éœ€è¦ç”¨å‰ç¼€å’Œå’Œå“ˆå¸Œè¡¨çš„æ€æƒ³è§£å†³ï¼Œå‚è€ƒ<a href="https://lqz2.github.io/2024/12/18/%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/">è¿™é‡Œ</a><br />è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºé¢˜ç›®è§„å®šåªèƒ½å‘ä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´éå†å³å­æ ‘ä¹‹å‰ï¼Œè¦å›é€€å·¦å­æ ‘çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åœ¨æœ€ååŠ ä¸Š<code>--mp[sum]</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    unordered_map&lt;<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span>,<span class="hljs-built_in">int</span>&gt; mp;<br>    <span class="hljs-keyword">void</span> dfs(TreeNode* t,<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> <span class="hljs-keyword">sum</span>, <span class="hljs-built_in">int</span> k, <span class="hljs-built_in">int</span> &amp;ans)&#123;<br>        <span class="hljs-keyword">if</span>(t==nullptr)<br>            <span class="hljs-keyword">return</span> ;<br>        <span class="hljs-keyword">sum</span>+=t-&gt;val;<br>        ans+=mp[<span class="hljs-keyword">sum</span>-k];<br>        ++mp[<span class="hljs-keyword">sum</span>];<br>        dfs(t-&gt;left,<span class="hljs-keyword">sum</span>,k,ans);<br>        dfs(t-&gt;right,<span class="hljs-keyword">sum</span>,k,ans);<br>        --mp[<span class="hljs-keyword">sum</span>];<br>    &#125;<br>    <span class="hljs-built_in">int</span> pathSum(TreeNode* root, <span class="hljs-built_in">int</span> targetSum) &#123;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        mp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        dfs(root,<span class="hljs-number">0</span>,targetSum,ans);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ’åºé“¾è¡¨</title>
    <link href="/2024/12/25/%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/"/>
    <url>/2024/12/25/%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="æ’åºé“¾è¡¨"><a class="markdownIt-Anchor" href="#æ’åºé“¾è¡¨"></a> æ’åºé“¾è¡¨</h2><!-- TOC --><ul><li><a href="#%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8">æ’åºé“¾è¡¨</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/sort-list/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ é“¾è¡¨çš„å¤´ç»“ç‚¹ head ï¼Œè¯·å°†å…¶æŒ‰ å‡åº æ’åˆ—å¹¶è¿”å› æ’åºåçš„é“¾è¡¨ ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¹‹å‰ç›´æ¥ç”¨Vectoræ’åºçš„ğŸ˜‚ï¼Œè¿™æ¬¡ç”¨å½’å¹¶æ’åºå®ç°ã€‚</p><ul><li>å…ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹</li><li>é€’å½’çš„å¯¹å·¦å³ä¸¤éƒ¨åˆ†è¿›è¡Œå½’å¹¶æ’åºï¼Œè¿”å›æ’åºåå·¦å³ä¸¤éƒ¨åˆ†çš„å¤´ç»“ç‚¹</li><li>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xl">class Solution &#123;<br>public:<br>    ListNode* merge(ListNode* h1, ListNode* h2)&#123;<br>        ListNode* dummy=new ListNode(-<span class="hljs-number">1</span>);<br>        ListNode* l=dummy,*l1=h1,*l2=h2;<br>        <span class="hljs-keyword">while</span>(l1&amp;&amp;l2)&#123;<br>            <span class="hljs-function"><span class="hljs-title">if</span>(l1-&gt;</span><span class="hljs-function"><span class="hljs-title">val</span>&lt;=l2-&gt;</span>val)&#123;<br>                <span class="hljs-function"><span class="hljs-title">l</span>-&gt;</span>next=l1;<br>                <span class="hljs-function"><span class="hljs-title">l1</span>=l1-&gt;</span>next;<br>                <span class="hljs-function"><span class="hljs-title">l</span>=l-&gt;</span>next;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-function"><span class="hljs-title">l</span>-&gt;</span>next=l2;<br>                <span class="hljs-function"><span class="hljs-title">l2</span>=l2-&gt;</span>next;<br>                <span class="hljs-function"><span class="hljs-title">l</span>=l-&gt;</span>next;<br>            &#125;<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">l</span>-&gt;</span>next=l1==nullptr? l2:l1;<br>        <span class="hljs-function"><span class="hljs-title">return</span> dummy-&gt;</span>next;<br>    &#125;<br>    ListNode* mergeSort(ListNode* head, ListNode* tail)&#123;<br>        <span class="hljs-keyword">if</span>(head==nullptr)<br>            return head;<br>        <span class="hljs-function"><span class="hljs-title">if</span>(head-&gt;</span>next==tail)&#123;<br>            <span class="hljs-function"><span class="hljs-title">head</span>-&gt;</span>next=nullptr;<br>            return head;<br>        &#125;<br>        ListNode *slow=head,*fast=head;<br>        <span class="hljs-function"><span class="hljs-title">while</span>(fast-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>!=tail&amp;&amp;fast-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>next!=tail)&#123;<br>            <span class="hljs-function"><span class="hljs-title">slow</span>=slow-&gt;</span>next;<br>            <span class="hljs-function"><span class="hljs-title">fast</span>=fast-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>next;<br>        &#125;<br>        L<span class="hljs-function"><span class="hljs-title">istNode</span> *mid=slow-&gt;</span>next;<br>        return merge(mergeSort(head,mid),mergeSort(mid,tail));        <br>    &#125;<br>    ListNode* sortList(ListNode* head) &#123;<br>        return mergeSort(head,nullptr);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</title>
    <link href="/2024/12/24/k%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/"/>
    <url>/2024/12/24/k%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"><a class="markdownIt-Anchor" href="#kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"></a> kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</h2><!-- TOC --><ul><li><a href="#k%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8">kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/reverse-nodes-in-k-group/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚</p><p>k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚</p><p>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šhead = <span class="hljs-string">[1,2,3,4,5]</span>, k = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-string">[2,1,4,3,5]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¹‹å‰ä¹Ÿåšè¿‡ï¼Œä¸è¿‡ç”¨çš„æ˜¯è¾…åŠ©æ•°ç»„çš„æ–¹æ³•ã€‚è¿™æ¬¡ç”¨åœ¨åŸé“¾è¡¨ä¸Šè¿›è¡Œæ“ä½œã€‚<br />ä¸»è¦å°±æ˜¯å…ˆç¡®å®šä¸€ä¸ªé•¿ä¸ºkçš„åŒºé—´ï¼Œç„¶åè¿›è¡Œç¿»è½¬ï¼Œè¿”å›ç¿»è½¬åçš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ã€‚<br />ç„¶ååœ¨ä¸»å‡½æ•°ä¸­è¿›è¡Œéå†ï¼Œæ¯æ¬¡å…ˆæ‰¾ä¸€æ®µé•¿ä¸ºkçš„åŒºé—´ï¼Œè®°å½•è¿™ä¸ªåŒºé—´çš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œç¿»è½¬ï¼Œå¾—åˆ°æ–°çš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ï¼Œç„¶åå°†è¿™ä¸ªåŒºé—´çš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹è¿æ¥åˆ°åŸé“¾è¡¨ä¸Šã€‚</p><p>è¿™é‡Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ç¿»è½¬æŸä¸ªåŒºé—´å¹¶è¿”å›æ–°çš„å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹çš„æ¨¡æ¿ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros">pair&lt;ListNode*,ListNode*&gt; reverse(ListNode* head, ListNode*tail)&#123;<br>    ListNode* <span class="hljs-attribute">pre</span>=tail-&gt;next;<br>    ListNode* <span class="hljs-attribute">l</span>=head;<br>    <span class="hljs-keyword">while</span>(pre!=tail)&#123;<br>        ListNode* <span class="hljs-attribute">t</span>=l-&gt;next;<br>        l-&gt;<span class="hljs-attribute">next</span>=pre;<br>        <span class="hljs-attribute">pre</span>=l;<br>        <span class="hljs-attribute">l</span>=t;<br>    &#125;<br>    return &#123;pre,head&#125;;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    pair&lt;ListNode*,ListNode*&gt; reverse(ListNode* head, ListNode*tail)&#123;<br>        ListNode* <span class="hljs-attribute">pre</span>=tail-&gt;next;<br>        ListNode* <span class="hljs-attribute">l</span>=head;<br>        <span class="hljs-keyword">while</span>(pre!=tail)&#123;<br>            ListNode* <span class="hljs-attribute">t</span>=l-&gt;next;<br>            l-&gt;<span class="hljs-attribute">next</span>=pre;<br>            <span class="hljs-attribute">pre</span>=l;<br>            <span class="hljs-attribute">l</span>=t;<br>        &#125;<br>        return &#123;pre,head&#125;;<br>    &#125;<br>    ListNode* reverseKGroup(ListNode* head, int k) &#123;<br>        ListNode* <span class="hljs-attribute">dummy</span>=new ListNode(0);<br>        dummy-&gt;<span class="hljs-attribute">next</span>=head;<br>        ListNode* <span class="hljs-attribute">pre</span>=dummy;<br>        <span class="hljs-keyword">while</span>(head)&#123;<br>            ListNode *<span class="hljs-attribute">tail</span>=pre;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;k;++i)&#123;<br>                <span class="hljs-attribute">tail</span>=tail-&gt;next;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-attribute">tail</span>==nullptr)<br>                    return dummy-&gt;next;<br>            &#125;<br>            ListNode* <span class="hljs-attribute">t</span>=tail-&gt;next;<br>            pair&lt;ListNode*,ListNode*&gt; <span class="hljs-attribute">res</span>=reverse(head,tail);<br>            <span class="hljs-attribute">head</span>=res.first;<br>            <span class="hljs-attribute">tail</span>=res.second;<br>            pre-&gt;<span class="hljs-attribute">next</span>=head;<br>            tail-&gt;<span class="hljs-attribute">next</span>=t;<br>            <span class="hljs-attribute">pre</span>=tail;<br>            <span class="hljs-attribute">head</span>=t;<br>        &#125;<br>        return dummy-&gt;next;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ—‹è½¬å›¾åƒ</title>
    <link href="/2024/12/22/%E6%97%8B%E8%BD%AC%E5%9B%BE%E5%83%8F/"/>
    <url>/2024/12/22/%E6%97%8B%E8%BD%AC%E5%9B%BE%E5%83%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="æ—‹è½¬å›¾åƒ"><a class="markdownIt-Anchor" href="#æ—‹è½¬å›¾åƒ"></a> æ—‹è½¬å›¾åƒ</h2><!-- TOC --><ul><li><a href="#%E6%97%8B%E8%BD%AC%E5%9B%BE%E5%83%8F">æ—‹è½¬å›¾åƒ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/rotate-image/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ª n Ã— n çš„äºŒç»´çŸ©é˜µ matrix è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚</p><p>ä½ å¿…é¡»åœ¨ åŸåœ° æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦ ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šmatrix = <span class="hljs-string">[[1,2,3],[4,5,6],[7,8,9]]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[[7,4,1],[8,5,2],[9,6,3]]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜åšäº†ä¹‹å‰åšè¿‡ï¼Œä½†æ˜¯ä¹‹å‰çš„åšæ³•æ¯”è¾ƒæš´åŠ›ï¼Œç›´æ¥ç”¨äº†ä¸€ä¸ªæ–°çš„æ•°ç»„æ¥å­˜å‚¨æ—‹è½¬åçš„ç»“æœã€‚<br />å…¶å®è¿™é“é¢˜è§‚å¯Ÿåˆ°è§„å¾‹åå¾ˆç®€å•ï¼Œå…ˆæ²¿ç€åå¯¹è§’çº¿(å³ä¸Šè§’åˆ°å·¦ä¸‹è§’çš„å¯¹è§’çº¿)ç¿»è½¬ï¼Œç„¶åå†æ²¿ç€ä¸­é—´çš„xè½´ç¿»è½¬å³å¯ã€‚</p><p>ç„¶åæ€»ç»“ä¸€ä¸‹çŸ©é˜µç¿»è½¬çš„è§„å¾‹ï¼š</p><ul><li>å¦‚æœè¦å…³äºå¯¹è§’çº¿ç¿»è½¬ï¼Œé‚£ä¹ˆåªéœ€è¦å°†<code>matrix[i][j]</code>å’Œ<code>matrix[j][i]</code>äº¤æ¢å³å¯ã€‚</li><li>å¦‚æœè¦å…³äºxè½´ç¿»è½¬ï¼Œé‚£ä¹ˆåªéœ€è¦å°†<code>matrix[i][j]</code>å’Œ<code>matrix[n-i-1][j]</code>äº¤æ¢å³å¯ã€‚</li><li>å¦‚æœè¦å…³äºyè½´ç¿»è½¬ï¼Œé‚£ä¹ˆåªéœ€è¦å°†<code>matrix[i][j]</code>å’Œ<code>matrix[i][n-j-1]</code>äº¤æ¢å³å¯ã€‚</li><li>å¦‚æœå…³äºåå¯¹è§’çº¿ç¿»è½¬ï¼Œé‚£ä¹ˆåªéœ€è¦å°†<code>matrix[i][j]</code>å’Œ<code>matrix[n-j-1][n-i-1]</code>äº¤æ¢å³å¯ã€‚</li><li>å¦‚æœå…³äºä¸­å¿ƒç¿»è½¬ï¼Œé‚£ä¹ˆåªéœ€è¦å°†<code>matrix[i][j]</code>å’Œ<code>matrix[n-i-1][n-j-1]</code>äº¤æ¢å³å¯ã€‚</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    void <span class="hljs-keyword">rotate</span>(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">matrix</span>) &#123;<br>        <span class="hljs-keyword">int</span> n=<span class="hljs-keyword">matrix</span>.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;n-i;++j)&#123;<br>                swap(<span class="hljs-keyword">matrix</span>[i][j],<span class="hljs-keyword">matrix</span>[n-j<span class="hljs-number">-1</span>][n-i<span class="hljs-number">-1</span>]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n/<span class="hljs-number">2</span>;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)&#123;<br>                swap(<span class="hljs-keyword">matrix</span>[i][j],<span class="hljs-keyword">matrix</span>[n-i<span class="hljs-number">-1</span>][j]);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°</title>
    <link href="/2024/12/21/%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%95%B0/"/>
    <url>/2024/12/21/%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°"><a class="markdownIt-Anchor" href="#ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°"></a> ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°</h2><!-- TOC --><ul><li><a href="#%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%95%B0">ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/first-missing-positive/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚</p><p>è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs inform7">ç¤ºä¾‹ 1ï¼š<br><br>è¾“å…¥ï¼šnums = <span class="hljs-comment">[1,2,0]</span><br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼šèŒƒå›´ <span class="hljs-comment">[1,2]</span> ä¸­çš„æ•°å­—éƒ½åœ¨æ•°ç»„ä¸­ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜è¦æ‰¾å‡ºä¸åœ¨æ•°ç»„ä¸­çš„æœ€å°æ­£æ•´æ•°ï¼Œå¯¹äºä¸€ä¸ªæ•°ç»„(é•¿åº¦ä¸ºn)ï¼Œé¢˜ç›®è¦æ±‚çš„æ•°è¦ä¹ˆåœ¨<code>[1,n]</code>ä¹‹é—´ï¼Œè¦ä¹ˆæ˜¯n+1ã€‚<br />æ‰€ä»¥å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œå¦‚æœå½“å‰æ•°<code>x</code>åœ¨<code>[1,n]</code>ä¹‹é—´ï¼Œé‚£ä¹ˆå°†xæ‰€åœ¨ä½ç½®è¿›è¡Œæ ‡è®°ï¼Œéå†ç»“æŸåï¼Œå¦‚æœ<code>[1,n]</code>ä¹‹é—´çš„æ•°éƒ½è¢«æ ‡è®°äº†ï¼Œé‚£ä¹ˆè¿”å›n+1ï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ²¡æœ‰è¢«æ ‡è®°çš„æ•°ã€‚</p><p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å°†æ•°ç»„ä¸­çš„è´Ÿæ•°å’Œ0å…¨éƒ¨ç½®ä¸ºn+1</li><li>éå†æ•°ç»„ï¼Œå¦‚æœå½“å‰æ•°<code>x</code>åœ¨<code>[1,n]</code>ä¹‹é—´ï¼Œé‚£ä¹ˆå°†<code>nums[x-1]</code>è¿›è¡Œå–åï¼Œæ ‡è®°ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºxå·²ç»å‡ºç°è¿‡</li><li>å†æ¬¡éå†æ•°ç»„ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ­£æ•°<code>nums[i]</code>ï¼Œè¿”å›<code>i+1</code>ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›<code>n+1</code></li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> firstMissingPositive(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=nums.size();<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; v(<span class="hljs-built_in">n</span>);<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)&#123;<br>            <span class="hljs-built_in">if</span>(nums[i]&lt;=<span class="hljs-number">0</span>)&#123;<br>                nums[i]=<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)&#123;<br>            <span class="hljs-built_in">int</span> <span class="hljs-built_in">t</span>=<span class="hljs-built_in">abs</span>(nums[i]);<br>            <span class="hljs-built_in">if</span>(<span class="hljs-built_in">t</span>&lt;=<span class="hljs-built_in">n</span>)&#123;<br>                nums[<span class="hljs-built_in">t</span>-<span class="hljs-number">1</span>]=-<span class="hljs-built_in">abs</span>(nums[<span class="hljs-built_in">t</span>-<span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)&#123;<br>            <span class="hljs-built_in">if</span>(nums[i]&gt;<span class="hljs-number">0</span>)<br>                return i+<span class="hljs-number">1</span>;<br>        &#125;<br>        return <span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ‰åºçŸ©é˜µä¸­ç¬¬Kå°çš„å…ƒç´ </title>
    <link href="/2024/12/19/%E6%9C%89%E5%BA%8F%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%AC%ACK%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/"/>
    <url>/2024/12/19/%E6%9C%89%E5%BA%8F%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%AC%ACK%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ "><a class="markdownIt-Anchor" href="#æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ "></a> æœ‰åºçŸ©é˜µä¸­ç¬¬Kå°çš„å…ƒç´ </h2><!-- TOC --><ul><li><a href="#%E6%9C%89%E5%BA%8F%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%AC%ACk%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0">æœ‰åºçŸ©é˜µä¸­ç¬¬Kå°çš„å…ƒç´ </a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/kth-smallest-element-in-a-sorted-matrix/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª n x n çŸ©é˜µ matrix ï¼Œå…¶ä¸­æ¯è¡Œå’Œæ¯åˆ—å…ƒç´ å‡æŒ‰å‡åºæ’åºï¼Œæ‰¾åˆ°çŸ©é˜µä¸­ç¬¬ k å°çš„å…ƒç´ ã€‚<br />è¯·æ³¨æ„ï¼Œå®ƒæ˜¯ æ’åºå çš„ç¬¬ k å°å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ª ä¸åŒ çš„å…ƒç´ ã€‚</p><p>ä½ å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªå†…å­˜å¤æ‚åº¦ä¼˜äº <code>O(n^2)</code> çš„è§£å†³æ–¹æ¡ˆã€‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs inform7">ç¤ºä¾‹ 1ï¼š<br><br>è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,5,9]</span>,<span class="hljs-comment">[10,11,13]</span>,<span class="hljs-comment">[12,13,15]</span>]</span>, k = 8<br>è¾“å‡ºï¼š13<br>è§£é‡Šï¼šçŸ©é˜µä¸­çš„å…ƒç´ ä¸º <span class="hljs-comment">[1,5,9,10,11,12,13,13,15]</span>ï¼Œç¬¬ 8 å°å…ƒç´ æ˜¯ 13<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸€èˆ¬ä¸€çœ¼çœ‹ä¸Šå»éƒ½ä¼šæƒ³åˆ°å †ã€‚ä½†æ˜¯å †å¹¶æ²¡æœ‰å¾ˆå¥½åˆ©ç”¨çŸ©é˜µçš„æœ‰åºæ€§ï¼Œè¿™é‡Œé‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆè¦è§£å†³çš„æ˜¯è®¡æ•°é—®é¢˜ï¼Œç»™å®šä¸€ä¸ªæ•° midï¼Œå¦‚ä½•è®¡ç®—çŸ©é˜µä¸­å°äºç­‰äºè¿™ä¸ªæ•°çš„å…ƒç´ ä¸ªæ•°ï¼Ÿ<br />è¿™é‡Œé‡‡ç”¨çš„æ˜¯ä»å·¦ä¸‹è§’å¼€å§‹éå†</p><ul><li>å¦‚æœå½“å‰å…ƒç´ å°äºç­‰äºmidï¼Œé‚£ä¹ˆè¿™ä¸€åˆ—çš„å…ƒç´ éƒ½å°äºç­‰äºmidï¼Œè®¡æ•°åŠ ä¸Šåˆ—æ•°ï¼Œç„¶åå‘å³ç§»åŠ¨ä¸€åˆ—ã€‚</li><li>å¦‚æœå½“å‰å…ƒç´ å¤§äºmidï¼Œè®¡æ•°ä¸å˜ï¼Œç„¶åå‘ä¸Šç§»åŠ¨ä¸€è¡Œã€‚</li></ul><p>æ¥ä¸‹æ¥å°±æ˜¯äºŒåˆ†æŸ¥æ‰¾äº†ï¼Œè¦æ±‚æ‰¾å‡ºç¬¬kå°å…ƒç´ ï¼Œå¯ä»¥å…ˆæ‰¾å‡ºä¸­é—´æ•°midï¼Œå½“å°äºç­‰äºmidçš„å…ƒç´ ä¸ªæ•°å°äºkæ—¶ï¼Œè¯´æ˜midæ¯”è¦æ‰¾çš„æ•°å°ï¼Œæ‰€ä»¥è¦å‘å³ç§»åŠ¨ï¼Œå¦åˆ™å‘å·¦ç§»åŠ¨ã€‚<br />è®¡æ•°çš„æ–¹æ³•å¾ˆå·§å¦™ï¼Œå€¼å¾—å­¦ä¹ ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> count(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">matrix</span>,<span class="hljs-keyword">int</span> mid,<span class="hljs-keyword">int</span> n)&#123;<br>        <span class="hljs-keyword">int</span> i=n<span class="hljs-number">-1</span>,j=<span class="hljs-number">0</span>;<span class="hljs-comment">//ä»å·¦ä¸‹è§’å¼€å§‹</span><br>        <span class="hljs-keyword">int</span> cnt=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i&gt;=<span class="hljs-number">0</span>&amp;&amp;j&lt;n)&#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">matrix</span>[i][j]&lt;=mid)&#123;<br>                cnt+=i+<span class="hljs-number">1</span>;<br>                ++j;<br>            &#125;<span class="hljs-keyword">else</span><br>                --i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> cnt;<br>    &#125;<br><br>    <span class="hljs-keyword">int</span> kthSmallest(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">matrix</span>, <span class="hljs-keyword">int</span> k) &#123;<br>        <span class="hljs-keyword">int</span> n=<span class="hljs-keyword">matrix</span>.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">int</span> l=<span class="hljs-keyword">matrix</span>[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>],r=<span class="hljs-keyword">matrix</span>[n<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];<br>        <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>            <span class="hljs-keyword">int</span> mid=l+(r-l)/<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span>(count(<span class="hljs-keyword">matrix</span>,mid,n)&gt;=k)&#123;<br>                r=mid;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                l=mid+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> l;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å’Œä¸ºkçš„å­æ•°ç»„</title>
    <link href="/2024/12/18/%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <url>/2024/12/18/%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h2 id="å’Œä¸ºkçš„å­æ•°ç»„"><a class="markdownIt-Anchor" href="#å’Œä¸ºkçš„å­æ•°ç»„"></a> å’Œä¸ºkçš„å­æ•°ç»„</h2><!-- TOC --><ul><li><a href="#%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84">å’Œä¸ºkçš„å­æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/subarray-sum-equals-k/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„å­æ•°ç»„çš„ä¸ªæ•° ã€‚<br />å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚</p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">ç¤ºä¾‹ 1ï¼š</span><br><span class="hljs-attr">è¾“å…¥ï¼šnums </span>=<span class="hljs-string"> [1,1,1], k = 2</span><br><span class="hljs-string">è¾“å‡ºï¼š2</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è‡ªå·±åªæƒ³åˆ°äº†<code>O(n^2)</code>çš„è§£æ³•ï¼Œä½†æ˜¯ä½¿ç”¨å‰ç¼€å’Œå¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°<code>O(n)</code>ã€‚<br />å‡è®¾å‰ç¼€å’Œæ•°ç»„ä¸ºsum[]ï¼Œé‚£ä¹ˆå½“<code>sum[i] - sum[j] = k</code>æ—¶ï¼Œè¯´æ˜ä»jåˆ°içš„å­æ•°ç»„æ»¡è¶³æ¡ä»¶ï¼Œå®é™…ä¸Šå°±æ˜¯æ±‚<code>sum[j] = sum[i] - k</code>çš„ä¸ªæ•°ã€‚<br />æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡sumè®°å½•ç´¯åŠ åˆ°å½“å‰ä½ç½®çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨è®°å½•sumå‡ºç°çš„æ¬¡æ•°ï¼Œæ­¤æ—¶å‰ç¼€å’Œä¸ºsum-kçš„ä¸ªæ•°å°±æ˜¯æ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> subarraySum(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> n=nums.size();<br>        unordered_map&lt;<span class="hljs-built_in">int</span>,<span class="hljs-built_in">int</span>&gt; mp;<br>        mp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> <span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>            <span class="hljs-keyword">sum</span>+=nums[i];<br>            ans+=mp[<span class="hljs-keyword">sum</span>-k];<br>            ++mp[<span class="hljs-keyword">sum</span>];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®æµçš„ä¸­ä½æ•°</title>
    <link href="/2024/12/15/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/"/>
    <url>/2024/12/15/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ•°æ®æµçš„ä¸­ä½æ•°"><a class="markdownIt-Anchor" href="#æ•°æ®æµçš„ä¸­ä½æ•°"></a> æ•°æ®æµçš„ä¸­ä½æ•°</h2><!-- TOC --><ul><li><a href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0">æ•°æ®æµçš„ä¸­ä½æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/find-median-from-data-stream/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä¸­ä½æ•°æ˜¯æœ‰åºæ•´æ•°åˆ—è¡¨ä¸­çš„ä¸­é—´å€¼ã€‚å¦‚æœåˆ—è¡¨çš„å¤§å°æ˜¯å¶æ•°ï¼Œåˆ™æ²¡æœ‰ä¸­é—´å€¼ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªä¸­é—´å€¼çš„å¹³å‡å€¼ã€‚</p><p>ä¾‹å¦‚ arr = [2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3 ã€‚<br />ä¾‹å¦‚ arr = [2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5 ã€‚<br />å®ç° MedianFinder ç±»:</p><p>MedianFinder() åˆå§‹åŒ– MedianFinder å¯¹è±¡ã€‚</p><p>void addNum(int num) å°†æ•°æ®æµä¸­çš„æ•´æ•° num æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ã€‚</p><p>double findMedian() è¿”å›åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·® 10-5 ä»¥å†…çš„ç­”æ¡ˆå°†è¢«æ¥å—ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥<br>[<span class="hljs-string">&quot;MedianFinder&quot;</span>, <span class="hljs-string">&quot;addNum&quot;</span>, <span class="hljs-string">&quot;addNum&quot;</span>, <span class="hljs-string">&quot;findMedian&quot;</span>, <span class="hljs-string">&quot;addNum&quot;</span>, <span class="hljs-string">&quot;findMedian&quot;</span>]<br>[[], [<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [], [<span class="hljs-number">3</span>], []]<br>è¾“å‡º<br>[null, null, null, <span class="hljs-number">1.5</span>, null, <span class="hljs-number">2.0</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯ä½¿ç”¨ä¸¤ä¸ªå †ï¼Œä¸€ä¸ªå¤§é¡¶å †ï¼Œä¸€ä¸ªå°é¡¶å †ï¼Œå¤§é¡¶å †å­˜æ”¾å°äºç­‰äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå°é¡¶å †å­˜æ”¾å¤§äºä¸­ä½æ•°çš„éƒ¨åˆ†ï¼Œå½“æ€»æ•°ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯å¤§é¡¶å †çš„å †é¡¶ï¼Œå½“æ€»æ•°ä¸ºå¶æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªå †é¡¶çš„å¹³å‡å€¼ã€‚<br />æ³¨æ„ï¼Œä¸¤ä¸ªå †çš„å¤§å°å·®ä¸èƒ½è¶…è¿‡1ï¼Œæ‰€ä»¥åœ¨æ’å…¥å…ƒç´ æ—¶ï¼Œéœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œä¿è¯ä¸¤ä¸ªå †çš„å¤§å°å·®ä¸è¶…è¿‡1ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">class</span> MedianFinder &#123;<br><span class="hljs-keyword">public</span>:<br>    priority_queue&lt;<span class="hljs-keyword">int</span>, vector&lt;<span class="hljs-keyword">int</span>&gt;, less&lt;<span class="hljs-keyword">int</span>&gt;&gt; pqBig;<br>    priority_queue&lt;<span class="hljs-keyword">int</span>, vector&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt;&gt; pqSma;<br>    MedianFinder() &#123;&#125;<br>    <br>    <span class="hljs-keyword">void</span> addNum(<span class="hljs-keyword">int</span> num) &#123;<br>        <span class="hljs-keyword">if</span>(pqBig.empty()||num&lt;=pqBig.top())&#123;<br>            pqBig.<span class="hljs-keyword">push</span>(num);<br>            <span class="hljs-keyword">if</span>(pqSma.<span class="hljs-keyword">size</span>()+<span class="hljs-number">1</span>&lt;pqBig.<span class="hljs-keyword">size</span>())&#123;<br>                pqSma.<span class="hljs-keyword">push</span>(pqBig.top());<br>                pqBig.<span class="hljs-keyword">pop</span>();<br>            &#125;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            pqSma.<span class="hljs-keyword">push</span>(num);<br>            <span class="hljs-keyword">if</span>(pqSma.<span class="hljs-keyword">size</span>()&gt;pqBig.<span class="hljs-keyword">size</span>())&#123;<br>                pqBig.<span class="hljs-keyword">push</span>(pqSma.top());<br>                pqSma.<span class="hljs-keyword">pop</span>();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">double</span> findMedian() &#123;<br>        <span class="hljs-keyword">if</span>(pqBig.<span class="hljs-keyword">size</span>()==pqSma.<span class="hljs-keyword">size</span>())&#123;<br>            <span class="hljs-keyword">return</span> (pqBig.top()+pqSma.top())/<span class="hljs-number">2.0</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> pqBig.top();<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>webå¼€å‘ä¸å¾®æœåŠ¡å­¦ä¹ </title>
    <link href="/2024/10/13/web%E5%BC%80%E5%8F%91%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/10/13/web%E5%BC%80%E5%8F%91%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="webå¼€å‘éƒ¨åˆ†"><a class="markdownIt-Anchor" href="#webå¼€å‘éƒ¨åˆ†"></a> webå¼€å‘éƒ¨åˆ†</h1><!-- TOC --><ul><li><a href="#web%E5%BC%80%E5%8F%91%E9%83%A8%E5%88%86">webå¼€å‘éƒ¨åˆ†</a><ul><li><a href="#springboot%E7%9A%84%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B">SpringBootçš„å¯åŠ¨æµç¨‹</a></li><li><a href="#spring-ioc">Spring IOC</a><ul><li><a href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">åŸºç¡€æ¦‚å¿µ</a></li><li><a href="#ioc%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98">IOCè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</a></li><li><a href="#ioc%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96">IOCå®¹å™¨çš„åˆå§‹åŒ–</a></li></ul></li><li><a href="#spring-bean">Spring Bean</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFspring-beancomponent-%E5%92%8C-bean-%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88">ä»€ä¹ˆæ˜¯Spring Beanï¼Ÿ@Component å’Œ @Bean çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E5%B0%86%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%A3%B0%E6%98%8E%E4%B8%BA-bean-%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%9C%89%E5%93%AA%E4%BA%9B">å°†ä¸€ä¸ªç±»å£°æ˜ä¸º Bean çš„æ³¨è§£æœ‰å“ªäº›?</a></li><li><a href="#bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Beanç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#bean%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96">Beançš„å¾ªç¯ä¾èµ–</a></li></ul></li><li><a href="#springmvc">SpringMVC</a><ul><li><a href="#springmvc%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6">SpringMVCå…³é”®ç»„ä»¶</a></li><li><a href="#springmvc%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B">SpringMVCæ‰§è¡Œæµç¨‹</a></li><li><a href="#%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%80%8E%E4%B9%88%E5%81%9A">ç»Ÿä¸€å¼‚å¸¸å¤„ç†æ€ä¹ˆåšï¼Ÿ</a></li></ul></li><li><a href="#springboot%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">springbootçš„ä¾èµ–æ³¨å…¥</a><ul><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B3%A8%E5%85%A5">æ„é€ å‡½æ•°æ³¨å…¥</a></li><li><a href="#setter%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5">setteræ–¹æ³•æ³¨å…¥</a></li><li><a href="#%E5%AD%97%E6%AE%B5%E6%B3%A8%E5%85%A5">å­—æ®µæ³¨å…¥</a></li></ul></li><li><a href="#springboot3%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">springboot3è‡ªåŠ¨é…ç½®åŸç†</a><ul><li><a href="#%E4%B8%BB%E8%A6%81%E6%AD%A5%E9%AA%A4">ä¸»è¦æ­¥éª¤</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89starter">è‡ªå®šä¹‰starter</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFspringboot-starter">ä»€ä¹ˆæ˜¯springboot starter</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89starter">å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰starter</a></li></ul></li><li><a href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a><ul><li><a href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F">å·¥å‚æ¨¡å¼</a></li><li><a href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F">å•ä¾‹æ¨¡å¼</a></li><li><a href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F">ä»£ç†æ¨¡å¼</a></li><li><a href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">é€‚é…å™¨æ¨¡å¼</a></li><li><a href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%92%8C%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB">ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</a></li></ul></li><li><a href="#redis">Redis</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFredis">ä»€ä¹ˆæ˜¯Redis?</a></li><li><a href="#redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB">Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</a></li></ul></li><li><a href="#jwt%E4%BB%A4%E7%89%8C">JWTä»¤ç‰Œ</a></li><li><a href="#threadlocal">ThreadLocal</a><ul><li><a href="#%E7%89%B9%E7%82%B9">ç‰¹ç‚¹</a></li><li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a></li></ul></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8">æ‹¦æˆªå™¨</a><ul><li><a href="#%E4%BD%9C%E7%94%A8">ä½œç”¨</a></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E4%B8%8E%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB">æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«</a></li><li><a href="#%E5%AE%9E%E7%8E%B0">å®ç°</a></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F">æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</a></li></ul></li><li><a href="#controller%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E6%B3%A8%E8%A7%A3">Controllerä¸­çš„æ–¹æ³•æ¥æ”¶å‚æ•°æ³¨è§£</a><ul><li><a href="#requestparam">@RequestParam</a></li><li><a href="#pathvariable">@PathVariable</a></li><li><a href="#requestbody">@RequestBody</a></li><li><a href="#cookievalue">@CookieValue</a></li><li><a href="#requestheader">@RequestHeader</a></li><li><a href="#modelattribute">@ModelAttribute</a></li></ul></li><li><a href="#%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C">å‚æ•°æ ¡éªŒ</a><ul><li><a href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3">å¸¸ç”¨æ³¨è§£</a></li><li><a href="#%E5%BC%80%E5%90%AF%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C">å¼€å¯å‚æ•°æ ¡éªŒ</a></li><li><a href="#validated%E5%92%8Cvalid%E5%8C%BA%E5%88%AB">@Validatedå’Œ@ValidåŒºåˆ«</a></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C">è‡ªå®šä¹‰å‚æ•°æ ¡éªŒ</a><ul><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89state%E6%B3%A8%E8%A7%A3">è‡ªå®šä¹‰Stateæ³¨è§£</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99%E7%9A%84%E7%B1%BB">è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™çš„ç±»</a></li></ul></li><li><a href="#redis%E5%AE%9E%E7%8E%B0%E7%99%BB%E9%99%86%E4%B8%BB%E5%8A%A8%E5%A4%B1%E6%95%88">rediså®ç°ç™»é™†ä¸»åŠ¨å¤±æ•ˆ</a></li><li><a href="#javascript%E7%9A%84%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA">JavaScriptçš„å¯¼å…¥å¯¼å‡º</a><ul><li><a href="#%E9%9D%9E%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA">éé»˜è®¤å¯¼å‡º</a></li><li><a href="#%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA">é»˜è®¤å¯¼å‡º</a></li></ul></li><li><a href="#vue%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">vueåŸºæœ¬æ¦‚å¿µ</a></li><li><a href="#vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4">vueå¸¸ç”¨æŒ‡ä»¤</a><ul><li><a href="#ref%E5%92%8Creactive">refå’Œreactive</a></li><li><a href="#v-for">v-for</a></li><li><a href="#v-bind">v-bind</a></li><li><a href="#v-if-%E5%92%8C-v-show">v-if å’Œ v-show</a></li><li><a href="#v-on">v-on</a></li><li><a href="#v-model">v-model</a></li></ul></li><li><a href="#let%E5%92%8Cvar%E7%9A%84%E5%8C%BA%E5%88%AB">letå’Œvarçš„åŒºåˆ«</a></li><li><a href="#vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">vueç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#axios%E7%9A%84%E4%BD%BF%E7%94%A8">axiosçš„ä½¿ç”¨</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">åŸºæœ¬ç”¨æ³•</a></li><li><a href="#axios%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8">axioså“åº”æ‹¦æˆªå™¨</a></li><li><a href="#axios%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8">axiosè¯·æ±‚æ‹¦æˆªå™¨</a></li></ul></li><li><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98">æµè§ˆå™¨è·¨åŸŸé—®é¢˜</a><ul><li><a href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0">é—®é¢˜æè¿°</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">è§£å†³æ–¹æ³•</a></li></ul></li><li><a href="#vue%E7%9A%84%E8%B7%AF%E7%94%B1">vueçš„è·¯ç”±</a><ul><li><a href="#vue%E4%B8%AD%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4">vueä¸­è·¯ç”±çš„ä½¿ç”¨æ­¥éª¤</a></li><li><a href="#%E8%B7%AF%E7%94%B1%E4%B8%BB%E5%8A%A8%E5%88%87%E6%8D%A2%E7%BB%84%E4%BB%B6">è·¯ç”±ä¸»åŠ¨åˆ‡æ¢ç»„ä»¶</a></li></ul></li><li><a href="#vue%E4%B8%AD%E4%BD%BF%E7%94%A8pinia%E5%8F%8A%E5%85%B6%E6%8C%81%E4%B9%85%E5%8C%96">vueä¸­ä½¿ç”¨piniaåŠå…¶æŒä¹…åŒ–</a><ul><li><a href="#pinia%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4">piniaä½¿ç”¨æ­¥éª¤</a></li><li><a href="#pinia%E6%8C%81%E4%B9%85%E5%8C%96">piniaæŒä¹…åŒ–</a></li></ul></li></ul></li><li><a href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%83%A8%E5%88%86">å¾®æœåŠ¡éƒ¨åˆ†</a><ul><li><a href="#%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">æ³¨å†Œä¸­å¿ƒ</a><ul><li><a href="#%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">æœåŠ¡æ²»ç†åŸºç¡€çŸ¥è¯†</a></li><li><a href="#nacos%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">nacosåŸºç¡€çŸ¥è¯†</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB">ç¯å¢ƒéš”ç¦»</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E5%88%86%E7%BA%A7%E6%A8%A1%E5%9E%8B">æœåŠ¡åˆ†çº§æ¨¡å‹</a></li></ul></li><li><a href="#openfeign">OpenFeign</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1">åŸºæœ¬ç”¨æ³•</a></li><li><a href="#%E8%BF%9E%E6%8E%A5%E6%B1%A0">è¿æ¥æ± </a></li><li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">è´Ÿè½½å‡è¡¡</a></li></ul></li><li><a href="#%E7%BD%91%E5%85%B3">ç½‘å…³</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-2">åŸºæœ¬ç”¨æ³•</a></li><li><a href="#%E7%BD%91%E5%85%B3%E5%AE%9E%E7%8E%B0%E7%99%BB%E9%99%86%E6%A0%A1%E9%AA%8C">ç½‘å…³å®ç°ç™»é™†æ ¡éªŒ</a><ul><li><a href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E8%BD%AC%E5%8F%91%E4%B9%8B%E5%89%8D%E5%81%9A%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C">å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒï¼Ÿ</a></li><li><a href="#%E7%BD%91%E5%85%B3%E7%99%BB%E9%99%86%E6%A0%A1%E9%AA%8C%E4%B9%8B%E5%90%8E%E5%A6%82%E4%BD%95%E5%B0%86%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E4%BC%A0%E9%80%92%E7%BB%99%E5%BE%AE%E6%9C%8D%E5%8A%A1">ç½‘å…³ç™»é™†æ ¡éªŒä¹‹åï¼Œå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ï¼Ÿ</a></li><li><a href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E4%B9%9F%E4%BC%9A%E7%9B%B8%E4%BA%92%E8%B0%83%E7%94%A8%E8%BF%99%E7%A7%8D%E8%B0%83%E7%94%A8%E4%B8%8D%E7%BB%8F%E8%BF%87%E7%BD%91%E5%85%B3%E5%8F%88%E8%AF%A5%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF">å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨ï¼Œè¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³ï¼Œåˆè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</a></li></ul></li><li><a href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1">åŠ¨æ€è·¯ç”±</a></li></ul></li><li><a href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4">å¾®æœåŠ¡ä¿æŠ¤</a><ul><li><a href="#%E8%AF%B7%E6%B1%82%E9%99%90%E6%B5%81">è¯·æ±‚é™æµ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E9%9A%94%E7%A6%BB">çº¿ç¨‹éš”ç¦»</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD">æœåŠ¡ç†”æ–­</a></li><li><a href="#%E4%B8%8D%E5%90%8C%E7%BA%BF%E7%A8%8B%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94">ä¸åŒçº¿ç¨‹éš”ç¦»æ–¹æ¡ˆå¯¹æ¯”</a></li><li><a href="#%E8%AE%A1%E6%95%B0%E7%AE%97%E6%B3%95">è®¡æ•°ç®—æ³•</a></li></ul></li><li><a href="#%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1">åˆ†å¸ƒå¼äº‹åŠ¡</a><ul><li><a href="#seata%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">Seataçš„åŸºæœ¬ç”¨æ³•</a></li><li><a href="#xa%E6%A8%A1%E5%BC%8F">XAæ¨¡å¼</a></li><li><a href="#at%E6%A8%A1%E5%BC%8F">ATæ¨¡å¼</a></li><li><a href="#at%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%84%8F%E5%86%99%E9%97%AE%E9%A2%98">ATæ¨¡å¼çš„è„å†™é—®é¢˜</a></li><li><a href="#tcc%E6%A8%A1%E5%BC%8F">TCCæ¨¡å¼</a></li></ul></li><li><a href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97-mq">æ¶ˆæ¯é˜Ÿåˆ— (MQ)</a><ul><li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">åŸºç¡€çŸ¥è¯†</a></li><li><a href="#rabbitmq%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">RabbitMQåŸºç¡€çŸ¥è¯†</a></li><li><a href="#rabbitmq%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%B1%BB%E5%9E%8B">RabbitMQäº¤æ¢æœºç±»å‹</a></li><li><a href="#%E5%A3%B0%E6%98%8E%E9%98%9F%E5%88%97%E5%92%8C%E4%BA%A4%E6%8D%A2%E6%9C%BA">å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº</a></li><li><a href="#%E6%B6%88%E6%81%AF%E8%BD%AC%E6%8D%A2%E5%99%A8">æ¶ˆæ¯è½¬æ¢å™¨</a></li><li><a href="#%E5%8F%91%E9%80%81%E8%80%85%E5%8F%AF%E9%9D%A0%E6%80%A7">å‘é€è€…å¯é æ€§</a></li><li><a href="#mq%E5%8F%AF%E9%9D%A0%E6%80%A7">MQå¯é æ€§</a></li><li><a href="#%E6%B6%88%E8%B4%B9%E8%80%85%E5%8F%AF%E9%9D%A0%E6%80%A7">æ¶ˆè´¹è€…å¯é æ€§</a></li><li><a href="#%E5%BB%B6%E8%BF%9F%E6%B6%88%E6%81%AF">å»¶è¿Ÿæ¶ˆæ¯</a></li></ul></li><li><a href="#elasticsearch">ElasticSearch</a><ul><li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-1">åŸºç¡€çŸ¥è¯†</a></li><li><a href="#kibana%E4%B8%AD%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">Kibanaä¸­çš„å¢åˆ æ”¹æŸ¥</a></li><li><a href="#dsl%E6%9F%A5%E8%AF%A2">DSLæŸ¥è¯¢</a></li><li><a href="#restclient%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C">RestClientåŸºç¡€æ“ä½œ</a></li></ul></li><li><a href="#redis%E4%B8%BB%E4%BB%8E">Redisä¸»ä»</a></li><li><a href="#redis%E5%93%A8%E5%85%B5">Rediså“¨å…µ</a></li><li><a href="#redis%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4">Redisåˆ†ç‰‡é›†ç¾¤</a><ul><li><a href="#%E6%95%A3%E5%88%97%E6%8F%92%E6%A7%BD">æ•£åˆ—æ’æ§½</a></li></ul></li><li><a href="#redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">Redisæ•°æ®ç»“æ„</a><ul><li><a href="#skiplist">SkipList</a></li><li><a href="#sortedset">SortedSet</a></li><li><a href="#bitmap">Bitmap</a></li></ul></li><li><a href="#redis%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6">Rediså†…å­˜å›æ”¶</a><ul><li><a href="#%E5%86%85%E5%AD%98%E8%BF%87%E6%9C%9F%E7%AD%96%E7%95%A5">å†…å­˜è¿‡æœŸç­–ç•¥</a></li><li><a href="#%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5">å†…å­˜æ·˜æ±°ç­–ç•¥</a></li></ul></li><li><a href="#redis%E7%BC%93%E5%AD%98">Redisç¼“å­˜</a><ul><li><a href="#%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7">ç¼“å­˜ä¸€è‡´æ€§</a></li><li><a href="#%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F">ç¼“å­˜ç©¿é€</a></li><li><a href="#%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9">ç¼“å­˜é›ªå´©</a></li><li><a href="#%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF">ç¼“å­˜å‡»ç©¿</a></li></ul></li></ul></li></ul><!-- /TOC --><h2 id="springbootçš„å¯åŠ¨æµç¨‹"><a class="markdownIt-Anchor" href="#springbootçš„å¯åŠ¨æµç¨‹"></a> SpringBootçš„å¯åŠ¨æµç¨‹</h2><p>SpringBootçš„å¯åŠ¨ï¼Œå…¶æœ¬è´¨å°±æ˜¯åŠ è½½å„ç§é…ç½®ä¿¡æ¯ï¼Œç„¶ååˆå§‹åŒ–IOCå®¹å™¨å¹¶è¿”å›</p><p>é¦–å…ˆï¼Œå½“æˆ‘ä»¬åœ¨å¯åŠ¨ç±»æ‰§è¡ŒSpringApplication.runè¿™è¡Œä»£ç çš„æ—¶å€™ï¼Œåœ¨å®ƒçš„æ–¹æ³•å†…éƒ¨å…¶å®ä¼šåšä¸¤ä¸ªäº‹æƒ…ï¼š</p><ul><li>åˆ›å»ºSpringApplicationå¯¹è±¡ï¼›</li><li>æ‰§è¡Œrunæ–¹æ³•ã€‚</li></ul><p>åœ¨åˆ›å»ºSpringApplicationå¯¹è±¡çš„æ—¶å€™ï¼Œåœ¨å®ƒçš„æ„é€ æ–¹æ³•å†…éƒ¨ä¸»è¦åš3ä¸ªäº‹æƒ…ï¼š</p><ul><li>ç¡®è®¤webåº”ç”¨ç±»å‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯Servletç±»å‹ï¼Œè¿™ç§ç±»å‹çš„åº”ç”¨ï¼Œå°†æ¥ä¼šè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªtomcat</li><li>ä»spring.factoriesé…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ è½½é»˜è®¤çš„ApplicationContextInitializerå’ŒApplicationListener</li><li>è®°å½•å½“å‰åº”ç”¨çš„ä¸»å¯åŠ¨ç±»ï¼Œå°†æ¥åšåŒ…æ‰«æä½¿ç”¨</li></ul><p>å¯¹è±¡åˆ›å»ºå¥½äº†ä»¥åï¼Œå†è°ƒç”¨è¯¥å¯¹è±¡çš„runæ–¹æ³•ï¼Œåœ¨runæ–¹æ³•çš„å†…éƒ¨ä¸»è¦åš4ä¸ªäº‹æƒ…ï¼š</p><ul><li>å‡†å¤‡Environmentå¯¹è±¡ï¼Œå®ƒé‡Œé¢ä¼šå°è£…ä¸€äº›å½“å‰åº”ç”¨è¿è¡Œç¯å¢ƒçš„å‚æ•°ï¼Œæ¯”å¦‚ç¯å¢ƒå˜é‡ç­‰ç­‰</li><li>å®ä¾‹åŒ–å®¹å™¨ï¼Œè¿™é‡Œä»…ä»…æ˜¯åˆ›å»ºApplicationContextå¯¹è±¡</li><li>å®¹å™¨åˆ›å»ºå¥½äº†ä»¥åï¼Œä¼šä¸ºå®¹å™¨åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚ä¸ºå®¹å™¨è®¾ç½®Environmentã€BeanFactoryPostProcessoråç½®å¤„ç†å™¨ï¼Œå¹¶ä¸”åŠ è½½ä¸»ç±»å¯¹åº”çš„Definition</li><li>åˆ·æ–°å®¹å™¨ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„refreshï¼Œåœ¨è¿™é‡Œä¼šçœŸæ­£çš„åˆ›å»ºBeanå®ä¾‹</li></ul><p>æ€»ç»“ä¸‹æ¥ï¼ŒSpringBootå¯åŠ¨çš„æ—¶å€™æ ¸å¿ƒå°±ä¸¤æ­¥ï¼Œåˆ›å»ºSpringApplicationå¯¹è±¡ä»¥åŠrunæ–¹æ³•çš„è°ƒç”¨ï¼Œåœ¨runæ–¹æ³•ä¸­ä¼šçœŸæ­£çš„å®ä¾‹åŒ–å®¹å™¨ï¼Œå¹¶åˆ›å»ºå®¹å™¨ä¸­éœ€è¦çš„Beanå®ä¾‹ï¼Œæœ€ç»ˆè¿”å›</p><h2 id="spring-ioc"><a class="markdownIt-Anchor" href="#spring-ioc"></a> Spring IOC</h2><h3 id="åŸºç¡€æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#åŸºç¡€æ¦‚å¿µ"></a> åŸºç¡€æ¦‚å¿µ</h3><p>IoC ï¼ˆInversion of Control ï¼‰å³æ§åˆ¶åè½¬/åè½¬æ§åˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ€æƒ³ä¸æ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°ã€‚æè¿°çš„æ˜¯ï¼šJava å¼€å‘é¢†åŸŸå¯¹è±¡çš„åˆ›å»ºä»¥åŠç®¡ç†çš„é—®é¢˜ã€‚</p><ul><li>ä¼ ç»Ÿçš„å¼€å‘æ–¹å¼ ï¼šå¾€å¾€æ˜¯åœ¨ç±» A ä¸­æ‰‹åŠ¨é€šè¿‡ new å…³é”®å­—æ¥ new ä¸€ä¸ª B çš„å¯¹è±¡å‡ºæ¥ä½¿ç”¨</li><li>IoC æ€æƒ³çš„å¼€å‘æ–¹å¼ ï¼šä¸é€šè¿‡ new å…³é”®å­—æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ IoC å®¹å™¨(Spring æ¡†æ¶) æ¥å¸®åŠ©æˆ‘ä»¬å®ä¾‹åŒ–å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦å“ªä¸ªå¯¹è±¡ï¼Œç›´æ¥ä» IoC å®¹å™¨é‡Œé¢å»å–å³å¯ã€‚</li><li>æ§åˆ¶ ï¼šæŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºï¼ˆå®ä¾‹åŒ–ã€ç®¡ç†ï¼‰çš„æƒåŠ›</li><li>åè½¬ ï¼šæ§åˆ¶æƒäº¤ç»™å¤–éƒ¨ç¯å¢ƒï¼ˆIoC å®¹å™¨ï¼‰<br /><img src="https://oss.javaguide.cn/github/javaguide/system-design/framework/spring/IoC&amp;Aop-ioc-illustration.png" alt="" /></li></ul><h3 id="iocè§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a class="markdownIt-Anchor" href="#iocè§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a> IOCè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><p>IoC çš„æ€æƒ³å°±æ˜¯ä¸¤æ–¹ä¹‹é—´ä¸äº’ç›¸ä¾èµ–ï¼Œç”±ç¬¬ä¸‰æ–¹å®¹å™¨æ¥ç®¡ç†ç›¸å…³èµ„æºã€‚è¿™æ ·æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><ul><li>å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦æˆ–è€…è¯´ä¾èµ–ç¨‹åº¦é™ä½ï¼›</li><li>èµ„æºå˜çš„å®¹æ˜“ç®¡ç†ï¼›æ¯”å¦‚ä½ ç”¨ Spring å®¹å™¨æä¾›çš„è¯å¾ˆå®¹æ˜“å°±å¯ä»¥å®ç°ä¸€ä¸ªå•ä¾‹ã€‚</li></ul><blockquote><p>å°†å¯¹è±¡ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»äº¤ç»™ IoC å®¹å™¨æ¥ç®¡ç†ï¼Œå¹¶ç”± IoC å®¹å™¨å®Œæˆå¯¹è±¡çš„æ³¨å…¥ã€‚è¿™æ ·å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šç®€åŒ–åº”ç”¨çš„å¼€å‘ï¼ŒæŠŠåº”ç”¨ä»å¤æ‚çš„ä¾èµ–å…³ç³»ä¸­è§£æ”¾å‡ºæ¥ã€‚ IoC å®¹å™¨å°±åƒæ˜¯ä¸€ä¸ªå·¥å‚ä¸€æ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåªéœ€è¦é…ç½®å¥½é…ç½®æ–‡ä»¶/æ³¨è§£å³å¯ï¼Œå®Œå…¨ä¸ç”¨è€ƒè™‘å¯¹è±¡æ˜¯å¦‚ä½•è¢«åˆ›å»ºå‡ºæ¥çš„ã€‚</p></blockquote><h3 id="iocå®¹å™¨çš„åˆå§‹åŒ–"><a class="markdownIt-Anchor" href="#iocå®¹å™¨çš„åˆå§‹åŒ–"></a> IOCå®¹å™¨çš„åˆå§‹åŒ–</h3><p>IOCå®¹å™¨åˆå§‹åŒ–ï¼Œæ ¸å¿ƒæ­¥éª¤ä¸»è¦æ˜¯åœ¨<code>AbstractApplicationContext</code>ç±»ä¸­çš„<code>refresh</code>æ–¹æ³•ä¸­å®Œæˆçš„ï¼š</p><ul><li>å‡†å¤‡BeanFactoryï¼Œåœ¨è¿™ä¸€å—éœ€è¦ç»™BeanFactoryè®¾ç½®å¾ˆå¤šå±æ€§ï¼Œæ¯”å¦‚ç±»åŠ è½½å™¨ã€Environmentç­‰</li><li>æ‰§è¡ŒBeanFactoryåç½®å¤„ç†å™¨ï¼Œè¿™ä¸€é˜¶æ®µä¼šæ‰«æè¦æ”¾å…¥åˆ°å®¹å™¨ä¸­çš„Beanä¿¡æ¯ï¼Œå¾—åˆ°å¯¹åº”çš„BeanDefinitionï¼ˆæ³¨æ„ï¼Œè¿™é‡Œåªæ‰«æï¼Œä¸åˆ›å»ºï¼‰</li><li>æ³¨å†ŒBeanPostProcessorï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„BeanPostProcessorå°±æ˜¯åœ¨è¿™ä¸€é˜¶æ®µè¢«åŠ è½½çš„ï¼Œå°†æ¥Beanå¯¹è±¡å®ä¾‹åŒ–å¥½åéœ€è¦ç”¨åˆ°</li><li>å¯åŠ¨tomcat</li><li>å®ä¾‹åŒ–å®¹å™¨ä¸­å®ä¾‹åŒ–éæ‡’åŠ è½½çš„å•ä¾‹Beanï¼Œè¿™é‡Œéœ€è¦è¯´çš„æ˜¯ï¼Œå¤šä¾‹Beanå’Œæ‡’åŠ è½½çš„Beanä¸ä¼šåœ¨è¿™ä¸ªé˜¶æ®µå®ä¾‹åŒ–ï¼Œå°†æ¥ç”¨åˆ°çš„æ—¶å€™å†åˆ›å»º</li><li>å½“å®¹å™¨åˆå§‹åŒ–å®Œæ¯•åï¼Œå†åšä¸€äº›æ”¶å°¾å·¥ä½œï¼Œæ¯”å¦‚æ¸…é™¤ç¼“å­˜ç­‰</li></ul><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œåœ¨IOCå®¹å™¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå¾—å‡†å¤‡å¹¶æ‰§è¡ŒBeanFactoryåç½®å¤„ç†å™¨ï¼Œå…¶æ¬¡å¾—æ³¨å†ŒBeanåç½®å¤„ç†å™¨ï¼Œå¹¶å¯åŠ¨tomcatï¼Œæœ€åéœ€è¦å€ŸåŠ©äºBeanFactoryå®ŒæˆBeançš„å®ä¾‹åŒ–</p><h2 id="spring-bean"><a class="markdownIt-Anchor" href="#spring-bean"></a> Spring Bean</h2><h3 id="ä»€ä¹ˆæ˜¯spring-beancomponent-å’Œ-bean-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯spring-beancomponent-å’Œ-bean-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a> ä»€ä¹ˆæ˜¯Spring Beanï¼Ÿ@Component å’Œ @Bean çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Bean ä»£æŒ‡çš„å°±æ˜¯é‚£äº›è¢« IoC å®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚</p><ul><li>@Component æ³¨è§£ä½œç”¨äºç±»ï¼Œè€Œ@Beanæ³¨è§£ä½œç”¨äºæ–¹æ³•ã€‚</li><li>@Componenté€šå¸¸æ˜¯é€šè¿‡ç±»è·¯å¾„æ‰«ææ¥è‡ªåŠ¨ä¾¦æµ‹ä»¥åŠè‡ªåŠ¨è£…é…åˆ° Spring å®¹å™¨ä¸­ï¼ˆSpringBooté»˜è®¤åªèƒ½æ‰«æåˆ°å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @ComponentScan æ³¨è§£å®šä¹‰è¦æ‰«æçš„è·¯å¾„ä»ä¸­æ‰¾å‡ºæ ‡è¯†äº†éœ€è¦è£…é…çš„ç±»è‡ªåŠ¨è£…é…åˆ° Spring çš„ bean å®¹å™¨ä¸­ï¼‰ã€‚</li><li>@Bean æ³¨è§£é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨æ ‡æœ‰è¯¥æ³¨è§£çš„æ–¹æ³•ä¸­å®šä¹‰äº§ç”Ÿè¿™ä¸ª bean, @Beanå‘Šè¯‰äº† Spring è¿™æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œå½“æˆ‘éœ€è¦ç”¨å®ƒçš„æ—¶å€™è¿˜ç»™æˆ‘ã€‚</li><li>@Bean æ³¨è§£æ¯” @Component æ³¨è§£çš„è‡ªå®šä¹‰æ€§æ›´å¼ºï¼Œè€Œä¸”å¾ˆå¤šåœ°æ–¹æˆ‘ä»¬åªèƒ½é€šè¿‡ @Bean æ³¨è§£æ¥æ³¨å†Œ beanã€‚æ¯”å¦‚å½“æˆ‘ä»¬å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»éœ€è¦è£…é…åˆ° Springå®¹å™¨æ—¶ï¼Œåˆ™åªèƒ½é€šè¿‡ @Beanæ¥å®ç°ã€‚</li></ul><h3 id="å°†ä¸€ä¸ªç±»å£°æ˜ä¸º-bean-çš„æ³¨è§£æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#å°†ä¸€ä¸ªç±»å£°æ˜ä¸º-bean-çš„æ³¨è§£æœ‰å“ªäº›"></a> å°†ä¸€ä¸ªç±»å£°æ˜ä¸º Bean çš„æ³¨è§£æœ‰å“ªäº›?</h3><ul><li>@Componentï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º Spring ç»„ä»¶ã€‚å¦‚æœä¸€ä¸ª Bean ä¸çŸ¥é“å±äºå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨@Component æ³¨è§£æ ‡æ³¨ã€‚</li><li>@Repository : å¯¹åº”æŒä¹…å±‚å³ Dao å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œã€‚</li><li>@Service : å¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° Dao å±‚ã€‚</li><li>@Controller : å¯¹åº” Spring MVC æ§åˆ¶å±‚ï¼Œä¸»è¦ç”¨äºæ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ Service å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢ã€‚</li></ul><h3 id="beanç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#beanç”Ÿå‘½å‘¨æœŸ"></a> Beanç”Ÿå‘½å‘¨æœŸ</h3><p>Beançš„ç”Ÿå‘½å‘¨æœŸæ€»çš„æ¥è¯´æœ‰4ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æœ‰åˆ›å»ºå¯¹è±¡ã€åˆå§‹åŒ–å¯¹è±¡ã€ä½¿ç”¨å¯¹è±¡ä»¥åŠé”€æ¯å¯¹è±¡ï¼Œè€Œä¸”è¿™äº›å·¥ä½œå¤§éƒ¨åˆ†æ˜¯äº¤ç»™Beanå·¥å‚çš„doCreateBeanæ–¹æ³•å®Œæˆçš„ã€‚</p><ul><li><p>åœ¨åˆ›å»ºå¯¹è±¡é˜¶æ®µï¼Œå…ˆè°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¯¹è±¡æœ‰äº†åä¼šå¡«å……è¯¥å¯¹è±¡çš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯å¤„ç†ä¾èµ–æ³¨å…¥ã€‚</p></li><li><p>å¯¹è±¡åˆ›å»ºå®Œæ¯•åï¼Œéœ€è¦åšä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œåœ¨è¿™é‡Œæ¶‰åŠåˆ°å‡ ä¸ªæ‰©å±•ç‚¹ã€‚</p><ul><li>æ‰§è¡ŒAwareæ„ŸçŸ¥æ¥å£çš„å›è°ƒæ–¹æ³•</li><li>æ‰§è¡ŒBeanåç½®å¤„ç†å™¨çš„postProcessBeforeInitializationæ–¹æ³•</li><li>æ‰§è¡ŒInitializingBeanæ¥å£çš„å›è°ƒï¼Œåœ¨è¿™ä¸€æ­¥å¦‚æœBeanä¸­æœ‰æ ‡æ³¨äº†@PostConstructæ³¨è§£çš„æ–¹æ³•ï¼Œä¼šå…ˆæ‰§è¡Œå®ƒ</li><li>æ‰§è¡ŒBeanåç½®å¤„ç†å™¨çš„postProcessAfterInitialization</li><li>æŠŠè¿™äº›æ‰©å±•ç‚¹éƒ½æ‰§è¡Œå®Œï¼ŒBeançš„åˆå§‹åŒ–å°±å®Œæˆäº†ã€‚</li></ul></li><li><p>åœ¨ä½¿ç”¨é˜¶æ®µå°±æ˜¯ç¨‹åºå‘˜ä»å®¹å™¨ä¸­è·å–è¯¥Beanä½¿ç”¨å³å¯ã€‚</p></li><li><p>åœ¨å®¹å™¨é”€æ¯ä¹‹å‰ï¼Œä¼šå…ˆé”€æ¯å¯¹è±¡ï¼Œæ­¤æ—¶ä¼šæ‰§è¡ŒDisposableBeanæ¥å£çš„å›è°ƒï¼Œè¿™ä¸€æ­¥å¦‚æœBeanä¸­æœ‰æ ‡æ³¨äº†@PreDestroyæ¥å£çš„å‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œå®ƒã€‚</p></li></ul><p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒBeançš„ç”Ÿå‘½å‘¨æœŸå…±åŒ…å«å››ä¸ªé˜¶æ®µï¼Œå…¶ä¸­åˆå§‹åŒ–å¯¹è±¡å’Œé”€æ¯å¯¹è±¡æˆ‘ä»¬ç¨‹åºå‘˜å¯ä»¥é€šè¿‡ä¸€äº›æ‰©å±•ç‚¹æ‰§è¡Œè‡ªå·±çš„ä»£ç ã€‚</p><h3 id="beançš„å¾ªç¯ä¾èµ–"><a class="markdownIt-Anchor" href="#beançš„å¾ªç¯ä¾èµ–"></a> Beançš„å¾ªç¯ä¾èµ–</h3><p>Beançš„å¾ªç¯ä¾èµ–æŒ‡çš„æ˜¯Aä¾èµ–Bï¼ŒBåˆä¾èµ–Aè¿™æ ·çš„ä¾èµ–é—­ç¯é—®é¢˜ã€‚</p><p>åœ¨Springä¸­ï¼Œé€šè¿‡ä¸‰ä¸ªå¯¹è±¡ç¼“å­˜åŒºæ¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè¿™ä¸‰ä¸ªç¼“å­˜åŒºè¢«å®šä¹‰åˆ°äº†DefaultSingletonBeanRegistryä¸­ï¼Œåˆ†åˆ«æ˜¯singletonObjectsç”¨æ¥å­˜å‚¨åˆ›å»ºå®Œæ¯•çš„Beanï¼ŒearlySingletonObjectsç”¨æ¥å­˜å‚¨æœªå®Œæˆä¾èµ–æ³¨å…¥çš„Beanï¼Œè¿˜æœ‰SingletonFactoriesç”¨æ¥å­˜å‚¨åˆ›å»ºBeançš„ObjectFactoryã€‚å‡å¦‚è¯´ç°åœ¨Aä¾èµ–Bï¼ŒBä¾èµ–Aï¼Œæ•´ä¸ªBeançš„åˆ›å»ºè¿‡ç¨‹æ˜¯è¿™æ ·çš„</p><ul><li><p>é¦–å…ˆï¼Œè°ƒç”¨Açš„æ„é€ æ–¹æ³•å®ä¾‹åŒ–Aï¼Œå½“å‰çš„Aè¿˜æ²¡æœ‰å¤„ç†ä¾èµ–æ³¨å…¥ï¼Œæš‚ä¸”æŠŠå®ƒç§°ä¸ºåŠæˆå“ï¼Œæ­¤æ—¶ä¼šæŠŠåŠæˆå“Aå°è£…åˆ°ä¸€ä¸ªObjectFactoryä¸­ï¼Œå¹¶å­˜å‚¨åˆ°SingletonFactoriesç¼“å­˜åŒºã€‚</p></li><li><p>æ¥ä¸‹æ¥ï¼Œè¦å¤„ç†Açš„ä¾èµ–æ³¨å…¥äº†ï¼Œç”±äºæ­¤æ—¶è¿˜æ²¡æœ‰Bï¼Œæ‰€ä»¥å¾—å…ˆå®ä¾‹åŒ–ä¸€ä¸ªBï¼ŒåŒæ ·çš„ï¼ŒåŠæˆå“Bä¹Ÿä¼šè¢«å°è£…åˆ°ObjectFactoryä¸­ï¼Œå¹¶å­˜å‚¨åˆ°SingletonFactoriesç¼“å­˜åŒºã€‚</p></li><li><p>ç´§æ¥ç€ï¼Œè¦å¤„ç†Bçš„ä¾èµ–æ³¨å…¥äº†ï¼Œæ­¤æ—¶ä¼šæ‰¾åˆ°SingletonFactoriesä¸­Aå¯¹åº”çš„ObjectFactoryï¼Œè°ƒç”¨å®ƒçš„getObjectæ–¹æ³•å¾—åˆ°åˆšæ‰å®ä¾‹åŒ–çš„åŠæˆå“Aï¼ˆå¦‚æœéœ€è¦ä»£ç†å¯¹è±¡ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå°†æ¥å¾—åˆ°çš„å°±æ˜¯ä»£ç†å¯¹è±¡ï¼‰ï¼ŒæŠŠå¾—åˆ°çš„åŠæˆå“Aæ³¨å…¥ç»™Bï¼Œå¹¶åŒæ—¶ä¼šæŠŠåŠæˆå“Aå­˜å…¥åˆ°earlySingletonObjectsä¸­ï¼Œå°†æ¥å¦‚æœè¿˜æœ‰å…¶ä»–çš„ç±»å¾ªç¯ä¾èµ–äº†Aï¼Œå°±å¯ä»¥ç›´æ¥ä»earlySingletonObjectsä¸­æ‰¾åˆ°å®ƒäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶SingletonFactoriesä¸­åˆ›å»ºAçš„ObjectFactoryä¹Ÿå¯ä»¥åˆ é™¤äº†ã€‚</p></li><li><p>è‡³æ­¤ï¼ŒBçš„ä¾èµ–æ³¨å…¥å¤„ç†å®Œäº†åï¼ŒBå°±åˆ›å»ºå®Œæ¯•äº†ï¼Œå°±å¯ä»¥æŠŠBçš„å¯¹è±¡å­˜å…¥åˆ°singletonObjectsä¸­äº†ï¼Œå¹¶åŒæ—¶åˆ é™¤æ‰SingletonFactoriesä¸­åˆ›å»ºBçš„ObjectFactoryã€‚</p></li><li><p>Båˆ›å»ºå®Œæ¯•åï¼Œå°±å¯ä»¥ç»§ç»­å¤„ç†Açš„ä¾èµ–æ³¨å…¥äº†ï¼ŒæŠŠBæ³¨å…¥ç»™Aï¼Œæ­¤æ—¶Aä¹Ÿåˆ›å»ºå®Œæ¯•äº†ï¼Œå°±å¯ä»¥æŠŠAçš„å¯¹è±¡å­˜å‚¨åˆ°singletonObjectsä¸­ï¼Œå¹¶åŒæ—¶åˆ é™¤æ‰earlySingletonObjectsä¸­çš„åŠæˆå“Aã€‚</p></li><li><p>è‡³æ­¤ï¼ŒAå’ŒBå¯¹è±¡å…¨éƒ¨åˆ›å»ºå®Œæ¯•ï¼Œå¹¶å­˜å‚¨åˆ°äº†singletonObjectsä¸­ï¼Œå°†æ¥é€šè¿‡å®¹å™¨è·å–å¯¹è±¡ï¼Œéƒ½æ˜¯ä»singletonObjectsä¸­è·å–ã€‚</p></li></ul><p>æ€»ç»“èµ·æ¥è¿˜æ˜¯ä¸€å¥è¯ï¼Œå€ŸåŠ©äºDefaultSingletonBeanRegistryçš„ä¸‰ä¸ªç¼“å­˜åŒºsingletonObjectsã€earlySingletonObjectsã€singletonFactorieså¯ä»¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><h2 id="springmvc"><a class="markdownIt-Anchor" href="#springmvc"></a> SpringMVC</h2><p>MVC æ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»æ¥ç»„ç»‡ä»£ç ã€‚<br />Spring MVC ä¸‹æˆ‘ä»¬ä¸€èˆ¬æŠŠåç«¯é¡¹ç›®åˆ†ä¸º Service å±‚ï¼ˆå¤„ç†ä¸šåŠ¡ï¼‰ã€Dao å±‚ï¼ˆæ•°æ®åº“æ“ä½œï¼‰ã€Entity å±‚ï¼ˆå®ä½“ç±»ï¼‰ã€Controller å±‚(æ§åˆ¶å±‚ï¼Œè¿”å›æ•°æ®ç»™å‰å°é¡µé¢)ã€‚</p><h3 id="springmvcå…³é”®ç»„ä»¶"><a class="markdownIt-Anchor" href="#springmvcå…³é”®ç»„ä»¶"></a> SpringMVCå…³é”®ç»„ä»¶</h3><ul><li>DispatcherServletï¼šæ ¸å¿ƒçš„ä¸­å¤®å¤„ç†å™¨ï¼Œè´Ÿè´£æ¥æ”¶è¯·æ±‚ã€åˆ†å‘ï¼Œå¹¶ç»™äºˆå®¢æˆ·ç«¯å“åº”ã€‚</li><li>HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ï¼Œæ ¹æ® URL å»åŒ¹é…æŸ¥æ‰¾èƒ½å¤„ç†çš„ Handler ï¼Œå¹¶ä¼šå°†è¯·æ±‚æ¶‰åŠåˆ°çš„æ‹¦æˆªå™¨å’Œ Handler ä¸€èµ·å°è£…ã€‚</li><li>HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ï¼Œæ ¹æ® HandlerMapping æ‰¾åˆ°çš„ Handler ï¼Œé€‚é…æ‰§è¡Œå¯¹åº”çš„ Handlerï¼›</li><li>Handlerï¼šè¯·æ±‚å¤„ç†å™¨ï¼Œå¤„ç†å®é™…è¯·æ±‚çš„å¤„ç†å™¨ã€‚</li><li>ViewResolverï¼šè§†å›¾è§£æå™¨ï¼Œæ ¹æ® Handler è¿”å›çš„é€»è¾‘è§†å›¾ / è§†å›¾ï¼Œè§£æå¹¶æ¸²æŸ“çœŸæ­£çš„è§†å›¾ï¼Œå¹¶ä¼ é€’ç»™ DispatcherServlet å“åº”å®¢æˆ·ç«¯</li></ul><h3 id="springmvcæ‰§è¡Œæµç¨‹"><a class="markdownIt-Anchor" href="#springmvcæ‰§è¡Œæµç¨‹"></a> SpringMVCæ‰§è¡Œæµç¨‹</h3><ul><li>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€è¯·æ±‚ï¼Œ DispatcherServletæ‹¦æˆªè¯·æ±‚ã€‚</li><li>DispatcherServlet æ ¹æ®è¯·æ±‚ä¿¡æ¯è°ƒç”¨ HandlerMapping ã€‚</li><li>HandlerMapping æ ¹æ® URL å»åŒ¹é…æŸ¥æ‰¾èƒ½å¤„ç†çš„ Handlerï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„ Controller æ§åˆ¶å™¨ï¼‰ ï¼Œå¹¶ä¼šå°†è¯·æ±‚æ¶‰åŠåˆ°çš„æ‹¦æˆªå™¨å’Œ Handler ä¸€èµ·å°è£…ã€‚</li><li>DispatcherServlet è°ƒç”¨ HandlerAdapteré€‚é…å™¨æ‰§è¡Œ Handler ã€‚</li><li>Handler å®Œæˆå¯¹ç”¨æˆ·è¯·æ±‚çš„å¤„ç†åï¼Œä¼šè¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ç»™DispatcherServletï¼ŒModelAndView é¡¾åæ€ä¹‰ï¼ŒåŒ…å«äº†æ•°æ®æ¨¡å‹ä»¥åŠç›¸åº”çš„è§†å›¾çš„ä¿¡æ¯ã€‚Model æ˜¯è¿”å›çš„æ•°æ®å¯¹è±¡ï¼ŒView æ˜¯ä¸ªé€»è¾‘ä¸Šçš„ Viewã€‚</li><li>ViewResolver ä¼šæ ¹æ®é€»è¾‘ View æŸ¥æ‰¾å®é™…çš„ Viewã€‚</li><li>DispaterServlet æŠŠè¿”å›çš„ Model ä¼ ç»™ Viewï¼ˆè§†å›¾æ¸²æŸ“ï¼‰ã€‚</li><li>æŠŠ View è¿”å›ç»™è¯·æ±‚è€…ï¼ˆæµè§ˆå™¨ï¼‰</li></ul><h3 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†æ€ä¹ˆåš"><a class="markdownIt-Anchor" href="#ç»Ÿä¸€å¼‚å¸¸å¤„ç†æ€ä¹ˆåš"></a> ç»Ÿä¸€å¼‚å¸¸å¤„ç†æ€ä¹ˆåšï¼Ÿ</h3><ul><li>å®šä¹‰ä¸€ä¸ªå“åº”çš„å®ä½“ç±»ï¼Œç”¨æ¥å°è£…å¼‚å¸¸ä¿¡æ¯</li><li>å®šä¹‰ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç±»ï¼Œä½¿ç”¨<code>@RestControllerAdvice + @ExceptionHandler</code>æ³¨è§£ï¼Œè¢«@ExceptionHandleræ³¨è§£ä¿®é¥°çš„æ–¹æ³•å¤„ç†å¼‚å¸¸ã€‚</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> &#123;<br>    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span><br>    <span class="hljs-keyword">public</span> Result handleException(Exception e)&#123;<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> Result.error(StringUtils.hasLength(e.getMessage()) ? e.getMessage(): <span class="hljs-string">&quot;æ“ä½œå¤±è´¥&quot;</span> );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="springbootçš„ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#springbootçš„ä¾èµ–æ³¨å…¥"></a> springbootçš„ä¾èµ–æ³¨å…¥</h2><blockquote><p>ä¾èµ–æ³¨å…¥å…è®¸å¯¹è±¡åœ¨éœ€è¦ä½¿ç”¨å…¶ä»–å¯¹è±¡æ—¶ï¼Œä¸ç”¨è‡ªå·±å»åˆ›å»ºï¼Œè€Œæ˜¯ç”± Spring æ¡†æ¶è´Ÿè´£æä¾›è¿™äº›å¯¹è±¡ï¼ˆä¾èµ–ï¼‰ã€‚è¿™ä¸ä»…æé«˜äº†ä»£ç çš„å¯æµ‹è¯•æ€§ï¼Œè¿˜ç®€åŒ–äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç®¡ç†ã€‚</p></blockquote><p>springbootä¸­ï¼Œä¾èµ–æ³¨å…¥ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ã€‚</p><h3 id="æ„é€ å‡½æ•°æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ„é€ å‡½æ•°æ³¨å…¥"></a> æ„é€ å‡½æ•°æ³¨å…¥</h3><p>æ„é€ å™¨æ³¨å…¥æ˜¯é€šè¿‡ç±»çš„æ„é€ å‡½æ•°å°†ä¾èµ–ä¼ å…¥ã€‚åœ¨å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œä¾èµ–ä¼šé€šè¿‡æ„é€ å™¨ä¼ é€’è¿›æ¥ã€‚è¿™ç§æ–¹å¼<strong>æœ€æ¨è</strong>ï¼ŒåŸå› æ˜¯å®ƒç¡®ä¿äº†ä¾èµ–åœ¨å¯¹è±¡åˆ›å»ºæ—¶è¢«æ­£ç¡®åœ°åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä½¿å¯¹è±¡å˜å¾—ä¸å¯å˜ï¼ˆimmutableï¼‰ã€‚</p><p>å¸¸è§çš„ç”¨æ³•æ˜¯ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DependencyService dependencyService;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>@RequiredArgsConstructor</code>æ³¨è§£ç”±lombokæä¾›ï¼Œä½œç”¨æ˜¯ä¸º<code>final</code>ä¿®é¥°çš„æˆå‘˜å˜é‡(ä¾èµ–)è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ„é€ å™¨ï¼Œé¿å…æ‰‹åŠ¨ç¼–å†™ä»£ç ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä¿è¯ä¾èµ–ä¸å¯å˜ã€‚</li><li>æé«˜äº†å¯æµ‹è¯•æ€§ï¼Œä¾¿äºä½¿ç”¨æ„é€ å™¨å‚æ•°è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li><li>å¼ºåˆ¶ä¾èµ–çš„å­˜åœ¨ï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li></ul><h3 id="setteræ–¹æ³•æ³¨å…¥"><a class="markdownIt-Anchor" href="#setteræ–¹æ³•æ³¨å…¥"></a> setteræ–¹æ³•æ³¨å…¥</h3><p>Setteræ–¹æ³•æ³¨å…¥é€šè¿‡ setter æ–¹æ³•å°†ä¾èµ–æ³¨å…¥åˆ°ç±»ä¸­ã€‚Spring åœ¨å®ä¾‹åŒ–å¯¹è±¡åï¼Œä¼šè°ƒç”¨è¿™äº› setter æ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºä¾èµ–æ˜¯å¯é€‰é¡¹æˆ–åœ¨è¿è¡Œæ—¶éœ€è¦çµæ´»è®¾ç½®çš„æƒ…å†µã€‚</p><p>ä¸€èˆ¬ç”¨æ³•æ˜¯ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">DependencyService</span> dependencyService;<br><br>    <span class="hljs-comment">// Setteræ–¹æ³•æ³¨å…¥</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setDependencyService</span>(<span class="hljs-params">DependencyService dependencyService</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dependencyService</span> = dependencyService;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><ul><li>çµæ´»æ€§é«˜ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ³¨å…¥</li><li>é€‚åˆå¯é€‰çš„ä¾èµ–æˆ–éœ€è¦åæœŸä¿®æ”¹çš„ä¾èµ–<br />ç¼ºç‚¹ï¼š</li><li>ä¾èµ–å¯¹è±¡å¯èƒ½æœªåˆå§‹åŒ–ä¾¿è¢«è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸</li><li>ç±»çš„çŠ¶æ€å¯å˜</li></ul><h3 id="å­—æ®µæ³¨å…¥"><a class="markdownIt-Anchor" href="#å­—æ®µæ³¨å…¥"></a> å­—æ®µæ³¨å…¥</h3><p>å­—æ®µæ³¨å…¥ç›´æ¥åœ¨ç±»çš„æˆå‘˜å˜é‡ä¸Šä½¿ç”¨ @Autowired æ³¨è§£è¿›è¡Œä¾èµ–æ³¨å…¥ï¼Œæ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚</p><p>ä¸€èˆ¬ç”¨æ³•æ˜¯ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> &#123;<br>    <span class="hljs-variable">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">DependencyService</span> dependencyService;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç ç®€å•ï¼Œæ³¨å…¥é€»è¾‘éšå¼å®Œæˆ</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸åˆ©äºå•å…ƒæµ‹è¯•ï¼Œæ— æ³•é€šè¿‡æ„é€ å™¨æˆ– setter æ¨¡æ‹Ÿä¾èµ–ã€‚</li><li>ç±»çš„å¯ç»´æŠ¤æ€§é™ä½ï¼Œä¾èµ–å…³ç³»ä¸æ˜æ˜¾ï¼Œå¯èƒ½å¯¼è‡´éšå¼çš„é”™è¯¯ã€‚</li></ul><h2 id="springboot3è‡ªåŠ¨é…ç½®åŸç†"><a class="markdownIt-Anchor" href="#springboot3è‡ªåŠ¨é…ç½®åŸç†"></a> springboot3è‡ªåŠ¨é…ç½®åŸç†</h2><h3 id="ä¸»è¦æ­¥éª¤"><a class="markdownIt-Anchor" href="#ä¸»è¦æ­¥éª¤"></a> ä¸»è¦æ­¥éª¤</h3><ul><li><p>ä¸»å¯åŠ¨ç±»ä¸­ï¼Œé€šå¸¸ä½¿ç”¨<code>@SpringBootApplication</code>æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒåŒ…å«äº†<code>@EnableAutoConfiguration</code>æ³¨è§£ã€‚</p></li><li><p><code>@EnableAutoConfiguration</code>æ³¨è§£ä¸­ï¼Œé€šè¿‡<code>@Import</code>å¯¼å…¥è‡ªåŠ¨é…ç½®æ¨¡å—çš„å¯¼å…¥é€‰æ‹©å™¨<code>AutoConfigurationImportSelector</code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å¯åŠ¨æ—¶æ‰«ææŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶æ ¹æ®åº”ç”¨ç¨‹åºçš„ä¾èµ–å…³ç³»å’Œç¯å¢ƒå˜é‡ç­‰ä¿¡æ¯ï¼Œè‡ªåŠ¨åœ°é€‰æ‹©éœ€è¦å¼•å…¥çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶å°†å…¶æ³¨å†Œä¸º Bean</p></li><li><p><code>AutoConfigurationImportSelector</code>å¯¼å…¥é€‰æ‹©å™¨ä¸­å®ç°äº†selectImportsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç»è¿‡å¤šå±‚è°ƒç”¨ï¼Œæœ€ç»ˆåœ¨<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ä¸­æ‰«æå€™é€‰çš„é…ç½®ç±»ï¼Œspringboot2.7ä»¥å‰çš„ç‰ˆæœ¬æ˜¯åœ¨<code>META-INF/spring.factories</code>æ–‡ä»¶ä¸­</p></li><li><p>é€šè¿‡è‡ªåŠ¨é…ç½®ç±»ä½¿ç”¨æ¡ä»¶æ³¨è§£ï¼ˆå¦‚ <code>@ConditionalOnClassã€@ConditionalOnBeanã€@ConditionalOnProperty</code> ç­‰ï¼‰æ¥ç¡®ä¿åªæœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„Beanæ‰èƒ½è¢«æ³¨å†Œã€‚</p></li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ç¤ºä¾‹"></a> ä½¿ç”¨ç¤ºä¾‹</h3><ul><li>ç¼–å†™é…ç½®ç±»</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">ThirdPartyConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MyService myService() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">MyService</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç¼–å†™è‡ªåŠ¨é…ç½®ç±»ï¼Œä½¿ç”¨<code>@AutoConfiguration</code>æ³¨è§£ï¼Œé€šè¿‡<code>@Import</code>å¯¼å…¥æ‰€éœ€è¦çš„è‡ªåŠ¨é…ç½®ç±»</li></ul><p><strong>æ³¨æ„</strong>ï¼šç›´æ¥åœ¨é…ç½®ç±»ä¸Šä½¿ç”¨<code>@AutoConfiguration</code>ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»ï¼Œä¸é¢å¤–åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¹Ÿæ˜¯å¯ä»¥çš„</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@AutoConfiguration</span><br><span class="hljs-variable">@Import</span>(ThirdPartyConfig.class)<br>public class MyAutoConfiguration &#123;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ä¸­æ·»åŠ è‡ªåŠ¨é…ç½®ç±»çš„å…¨ç±»å</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.config</span>.MyAutoConfiguration<br></code></pre></td></tr></table></figure><ul><li>åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥åæ ‡ï¼Œå°±å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨Beanäº†</li></ul><h2 id="è‡ªå®šä¹‰starter"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰starter"></a> è‡ªå®šä¹‰starter</h2><h3 id="ä»€ä¹ˆæ˜¯springboot-starter"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯springboot-starter"></a> ä»€ä¹ˆæ˜¯springboot starter</h3><p>Spring Boot Starter æ˜¯ Spring Boot æä¾›çš„ä¸€ç³»åˆ—ä¾èµ–ç®¡ç†å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ– Spring åº”ç”¨ç¨‹åºçš„è®¾ç½®å’Œé…ç½®ã€‚æ¯ä¸ª Starter éƒ½æ˜¯ä¸€ä¸ªé¢„é…ç½®çš„ä¾èµ–é›†åˆï¼ŒåŒ…å«äº†å¼€å‘ç‰¹å®šç±»å‹åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹å’Œé…ç½®ã€‚</p><h3 id="å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰starter"><a class="markdownIt-Anchor" href="#å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰starter"></a> å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰starter</h3><p>ç†Ÿæ‚‰è‡ªåŠ¨é…ç½®ä¹‹åï¼Œè‡ªå®šä¹‰starterçš„æ­¥éª¤å…¶å®å¾ˆç®€å•ï¼Œåªæœ‰ä¸¤æ­¥ï¼š</p><ul><li>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œæä¾›è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œå³è¯¥æ¨¡å—åŒ…å«è‡ªåŠ¨é…ç½®ç±»(å®šä¹‰äº†è‡ªåŠ¨é…ç½®ç±»å¹¶åœ¨<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ä¸­å£°æ˜)</li><li>åˆ›å»ºå¦ä¸€ä¸ªæ¨¡å—ä½œä¸ºstarterï¼Œåœ¨pomæ–‡ä»¶ä¸­å¼•å…¥ä¸Šé¢çš„è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®ç±»æ¨¡å—çš„åæ ‡</li></ul><h2 id="è®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼"></a> è®¾è®¡æ¨¡å¼</h2><h3 id="å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#å·¥å‚æ¨¡å¼"></a> å·¥å‚æ¨¡å¼</h3><p>å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚Spring ä½¿ç”¨å·¥å‚æ¨¡å¼å¯ä»¥é€šè¿‡ BeanFactory æˆ– ApplicationContext åˆ›å»º bean å¯¹è±¡ã€‚<br />ä¸¤è€…å¯¹æ¯”ï¼š</p><ul><li>BeanFactoryï¼šå»¶è¿Ÿæ³¨å…¥(ä½¿ç”¨åˆ°æŸä¸ª bean çš„æ—¶å€™æ‰ä¼šæ³¨å…¥),ç›¸æ¯”äºApplicationContext æ¥è¯´ä¼šå ç”¨æ›´å°‘çš„å†…å­˜ï¼Œç¨‹åºå¯åŠ¨é€Ÿåº¦æ›´å¿«ã€‚</li><li>ApplicationContextï¼šå®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¸ç®¡ä½ ç”¨æ²¡ç”¨åˆ°ï¼Œä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ bean ã€‚BeanFactory ä»…æä¾›äº†æœ€åŸºæœ¬çš„ä¾èµ–æ³¨å…¥æ”¯æŒï¼ŒApplicationContext æ‰©å±•äº† BeanFactory ,é™¤äº†æœ‰BeanFactoryçš„åŠŸèƒ½è¿˜æœ‰é¢å¤–æ›´å¤šåŠŸèƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬å¼€å‘äººå‘˜ä½¿ç”¨ApplicationContextä¼šæ›´å¤šã€‚</li></ul><h3 id="å•ä¾‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#å•ä¾‹æ¨¡å¼"></a> å•ä¾‹æ¨¡å¼</h3><p>ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚æœ‰ä¸€äº›å¯¹è±¡å…¶å®æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ï¼šçº¿ç¨‹æ± ã€ç¼“å­˜ã€å¯¹è¯æ¡†ã€æ³¨å†Œè¡¨ã€æ—¥å¿—å¯¹è±¡ã€å……å½“æ‰“å°æœºã€æ˜¾å¡ç­‰è®¾å¤‡é©±åŠ¨ç¨‹åºçš„å¯¹è±¡ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸€ç±»å¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¦‚æœåˆ¶é€ å‡ºå¤šä¸ªå®ä¾‹å°±å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜çš„äº§ç”Ÿï¼Œæ¯”å¦‚ï¼šç¨‹åºçš„è¡Œä¸ºå¼‚å¸¸ã€èµ„æºä½¿ç”¨è¿‡é‡ã€æˆ–è€…ä¸ä¸€è‡´æ€§çš„ç»“æœã€‚<br />ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„å¥½å¤„ :</p><ul><li>å¯¹äºé¢‘ç¹ä½¿ç”¨çš„å¯¹è±¡ï¼Œå¯ä»¥çœç•¥åˆ›å»ºå¯¹è±¡æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œè¿™å¯¹äºé‚£äº›é‡é‡çº§å¯¹è±¡è€Œè¨€ï¼Œæ˜¯éå¸¸å¯è§‚çš„ä¸€ç¬”ç³»ç»Ÿå¼€é”€ï¼›</li><li>ç”±äº new æ“ä½œçš„æ¬¡æ•°å‡å°‘ï¼Œå› è€Œå¯¹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šé™ä½ï¼Œè¿™å°†å‡è½» GC å‹åŠ›ï¼Œç¼©çŸ­ GC åœé¡¿æ—¶é—´ã€‚</li></ul><h3 id="ä»£ç†æ¨¡å¼"><a class="markdownIt-Anchor" href="#ä»£ç†æ¨¡å¼"></a> ä»£ç†æ¨¡å¼</h3><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚æœ‰äº›å¯¹è±¡ç”±äºæŸäº›åŸå› ï¼ˆæ¯”å¦‚å¯¹è±¡åˆ›å»ºå¼€é”€å¾ˆå¤§ï¼Œæˆ–è€…æŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶ï¼Œæˆ–è€…éœ€è¦è¿›ç¨‹å¤–çš„è®¿é—®ï¼‰ï¼Œç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…æˆ–è€…ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p><h3 id="é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#é€‚é…å™¨æ¨¡å¼"></a> é€‚é…å™¨æ¨¡å¼</h3><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚<br />ä¸»è¦è§£å†³åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸è¦å°†ä¸€äº›&quot;ç°å­˜çš„å¯¹è±¡&quot;æ”¾åˆ°æ–°çš„ç¯å¢ƒä¸­ï¼Œè€Œæ–°ç¯å¢ƒè¦æ±‚çš„æ¥å£æ˜¯ç°å¯¹è±¡ä¸èƒ½æ»¡è¶³çš„ã€‚</p><h3 id="ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«"></a> ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>ç›®çš„ä¸åŒï¼šä»£ç†æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡çš„è®¿é—®ï¼Œé€‚é…å™¨æ¨¡å¼ä¸»è¦å…³æ³¨æ¥å£çš„è½¬æ¢ï¼Œä½¿ä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</li><li>ç»“æ„ä¸åŒï¼šä»£ç†æ¨¡å¼ä¸€èˆ¬åŒ…å«æŠ½è±¡ä¸»é¢˜ã€çœŸå®ä¸»é¢˜ã€ä»£ç†ä¸»é¢˜ä¸‰ä¸ªè§’è‰²ï¼Œé€‚é…å™¨æ¨¡å¼ä¸€èˆ¬åŒ…å«ç›®æ ‡æ¥å£ã€é€‚é…å™¨ã€è¢«é€‚é…è€…ä¸‰ä¸ªè§’è‰²ã€‚</li><li>åº”ç”¨åœºæ™¯ä¸åŒï¼šä»£ç†æ¨¡å¼å¸¸ç”¨äºé€šè¿‡ä»£ç†æ§åˆ¶å¯¹è±¡çš„è®¿é—®ï¼Œé€‚é…å™¨æ¨¡å¼ç”¨äºè®©ä¸å…¼å®¹çš„æ¥å£ååŒå·¥ä½œã€‚</li></ul><h2 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> Redis</h2><h3 id="ä»€ä¹ˆæ˜¯redis"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯redis"></a> ä»€ä¹ˆæ˜¯Redis?</h3><p>Redis ï¼ˆREmote DIctionary Serverï¼‰æ˜¯ä¸€ä¸ªåŸºäº C è¯­è¨€å¼€å‘çš„å¼€æº NoSQL æ•°æ®åº“ï¼ˆBSD è®¸å¯ï¼‰ã€‚ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒçš„æ˜¯ï¼ŒRedis çš„æ•°æ®æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼ˆå†…å­˜æ•°æ®åº“ï¼Œæ”¯æŒæŒä¹…åŒ–ï¼‰ï¼Œå› æ­¤è¯»å†™é€Ÿåº¦éå¸¸å¿«ï¼Œè¢«å¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼ç¼“å­˜æ–¹å‘ã€‚å¹¶ä¸”ï¼ŒRedis å­˜å‚¨çš„æ˜¯ KV é”®å€¼å¯¹æ•°æ®ã€‚</p><h3 id="redisä¸ºä»€ä¹ˆå¿«"><a class="markdownIt-Anchor" href="#redisä¸ºä»€ä¹ˆå¿«"></a> Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</h3><ul><li>Redis å†…éƒ¨åšäº†éå¸¸å¤šçš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ¯”è¾ƒé‡è¦çš„æœ‰ï¼š</li><li>Redis åŸºäºå†…å­˜ï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦æ¯”ç£ç›˜å¿«å¾ˆå¤šï¼›</li><li>Redis åŸºäº Reactor æ¨¡å¼è®¾è®¡å¼€å‘äº†ä¸€å¥—é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å‹ï¼Œä¸»è¦æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯å’Œ IO å¤šè·¯å¤ç”¨ï¼ˆRedis çº¿ç¨‹æ¨¡å¼åé¢ä¼šè¯¦ç»†ä»‹ç»åˆ°ï¼‰ï¼›</li><li>Redis å†…ç½®äº†å¤šç§ä¼˜åŒ–è¿‡åçš„æ•°æ®ç±»å‹/ç»“æ„å®ç°ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚</li><li>Redis é€šä¿¡åè®®å®ç°ç®€å•ä¸”è§£æé«˜æ•ˆã€‚</li></ul><h2 id="jwtä»¤ç‰Œ"><a class="markdownIt-Anchor" href="#jwtä»¤ç‰Œ"></a> JWTä»¤ç‰Œ</h2><p>JWTå…¨ç§°ä¸ºJson Web Tokenï¼Œå®šä¹‰äº†ä¸€ç§ç®€æ´çš„ã€è‡ªåŒ…å«çš„æ ¼å¼ï¼Œç”¨äºé€šä¿¡åŒæ–¹ä»¥jsonæ•°æ®æ ¼å¼å®‰å…¨çš„ä¼ è¾“ä¿¡æ¯ã€‚å…¶å½¢å¼æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ç‚¹<code>.</code>åˆ†éš”æˆä¸‰ä¸ªéƒ¨åˆ†ã€‚è¿™äº›å­—ç¬¦ä¸²ç”±JSONå¯¹è±¡ä½¿ç”¨Base64URLç®—æ³•è½¬æ¢å¾—åˆ°ã€‚<br />åˆ†åˆ«æ˜¯ï¼š</p><ul><li>å¤´éƒ¨(Header)ï¼Œè®°å½•ä»¤ç‰Œç±»å‹ï¼ŒåŠ å¯†ç®—æ³•ç­‰ï¼Œå¦‚<code>&#123;&quot;alg&quot;: &quot;HS256&quot;,&quot;typ&quot;: &quot;JWT&quot;&#125;</code></li><li>è½½è·(Payload)ï¼ŒåŒ…æ‹¬é»˜è®¤ä¿¡æ¯å’Œè‡ªå®šä¹‰ä¿¡æ¯ï¼Œå¦‚å¯æ·»åŠ è‡ªå®šä¹‰ä¿¡æ¯<code>&#123;&quot;id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;tom&quot;&#125;</code></li><li>ç­¾å(Signature)ï¼Œé˜²æ­¢JWTè¢«ç¯¡æ”¹ã€‚éœ€è¦æŒ‡å®šä¸€ä¸ªå¯†é’¥(secret)ã€‚è¿™ä¸ªå¯†é’¥åªæœ‰æœåŠ¡å™¨æ‰çŸ¥é“ï¼Œä¸èƒ½æ³„éœ²ç»™ç”¨æˆ·ã€‚ç„¶åï¼Œä½¿ç”¨Headeré‡Œé¢æŒ‡å®šçš„ç­¾åç®—æ³•(é»˜è®¤æ˜¯ HMAC SHA256)ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å…¬å¼äº§ç”Ÿç­¾åã€‚</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">HMACSHA256</span><span class="hljs-params">( base64UrlEncode(header)</span></span> + <span class="hljs-string">&quot;.â€&quot;</span>+<span class="hljs-built_in">base64UrlEncode</span>(payload), secret)<br></code></pre></td></tr></table></figure><ul><li>ç®—å‡ºç­¾åä»¥åï¼ŒæŠŠ Headerã€Payloadã€Signature ä¸‰ä¸ªéƒ¨åˆ†æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨&quot;ç‚¹&quot;(.)åˆ†éš”ï¼Œå°±å¯ä»¥è¿”å›ç»™ç”¨æˆ·ã€‚</li></ul><p>ä»¥ä¸‹æ˜¯åˆ©ç”¨hutoolå·¥å…·å°è£…çš„åˆ›å»ºå’Œè§£æJWTä»¤ç‰Œçš„ç±»:</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtTool</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JWTSigner jwtSigner;<br><br>    <span class="hljs-keyword">public</span> JwtTool(KeyPair keyPair) &#123;<br>        <span class="hljs-built_in">this</span>.jwtSigner = JWTSignerUtil.createSigner(<span class="hljs-string">&quot;rs256&quot;</span>, keyPair);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»º access-token</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * @param userDTO ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">     * @return access-token</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> createToken(Long userId, Duration ttl) &#123;<br>        <span class="hljs-comment">// 1.ç”Ÿæˆjws</span><br>        <span class="hljs-keyword">return</span> JWT.create()<br>                .setPayload(<span class="hljs-string">&quot;user&quot;</span>, userId)<br>                .setExpiresAt(<span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>(System.currentTimeMillis() + ttl.toMillis()))<br>                .setSigner(jwtSigner)<br>                .sign();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è§£ætoken</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * @param token token</span><br><span class="hljs-comment">     * @return è§£æåˆ·æ–°tokenå¾—åˆ°çš„ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Long parseToken(<span class="hljs-keyword">String</span> token) &#123;<br>        <span class="hljs-comment">// 1.æ ¡éªŒtokenæ˜¯å¦ä¸ºç©º</span><br>        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;æœªç™»å½•&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 2.æ ¡éªŒå¹¶è§£æjwt</span><br>        JWT jwt;<br>        <span class="hljs-keyword">try</span> &#123;<br>            jwt = JWT.of(token).setSigner(jwtSigner);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„token&quot;</span>, e);<br>        &#125;<br>        <span class="hljs-comment">// 2.æ ¡éªŒjwtæ˜¯å¦æœ‰æ•ˆ</span><br>        <span class="hljs-keyword">if</span> (!jwt.verify()) &#123;<br>            <span class="hljs-comment">// éªŒè¯å¤±è´¥</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„token&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 3.æ ¡éªŒæ˜¯å¦è¿‡æœŸ</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            JWTValidator.of(jwt).validateDate();<br>        &#125; <span class="hljs-keyword">catch</span> (ValidateException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;tokenå·²ç»è¿‡æœŸ&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 4.æ•°æ®æ ¼å¼æ ¡éªŒ</span><br>        Object userPayload = jwt.getPayload(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-keyword">if</span> (userPayload == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// æ•°æ®ä¸ºç©º</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„token&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// 5.æ•°æ®è§£æ</span><br>        <span class="hljs-keyword">try</span> &#123;<br>           <span class="hljs-keyword">return</span> Long.valueOf(userPayload.toString());<br>        &#125; <span class="hljs-keyword">catch</span> (RuntimeException e) &#123;<br>            <span class="hljs-comment">// æ•°æ®æ ¼å¼æœ‰è¯¯</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">UnauthorizedException</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„token&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Spring åœ¨åˆ›å»º JwtTool çš„å®ä¾‹æ—¶(è‡ªåŠ¨æ³¨å…¥JwtToolæ—¶)ï¼Œä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ª KeyPair å®ä¾‹(KeyPairåœ¨é…ç½®ç±»ä¸­è¢«æ³¨å†ŒæˆBean)ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥å·¥å…·ç±»æ—¶ï¼Œç›´æ¥æ³¨å…¥ï¼Œç„¶åè°ƒç”¨ceateæˆ–è€…parseæ–¹æ³•å³å¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JwtTool jwtTool;<br><span class="hljs-type">String</span> token = jwtTool.<span class="hljs-built_in">createToken</span>(user.<span class="hljs-built_in">getId</span>(), jwtProperties.<span class="hljs-built_in">getTokenTTL</span>());<br></code></pre></td></tr></table></figure><h2 id="threadlocal"><a class="markdownIt-Anchor" href="#threadlocal"></a> ThreadLocal</h2><p>ThreadLoal å˜é‡ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡<br />ThreadLocal æä¾›äº†çº¿ç¨‹æœ¬åœ°çš„å®ä¾‹ã€‚å®ƒä¸æ™®é€šå˜é‡çš„åŒºåˆ«åœ¨äºï¼Œæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å®ä¾‹å‰¯æœ¬ã€‚ThreadLocal å˜é‡é€šå¸¸è¢«private staticä¿®é¥°ã€‚å½“ä¸€ä¸ªçº¿ç¨‹ç»“æŸæ—¶ï¼Œå®ƒæ‰€ä½¿ç”¨çš„æ‰€æœ‰ ThreadLocal ç›¸å¯¹çš„å®ä¾‹å‰¯æœ¬éƒ½å¯è¢«å›æ”¶ã€‚</p><blockquote><p>æ€»çš„æ¥è¯´ï¼ŒThreadLocal é€‚ç”¨äºæ¯ä¸ªçº¿ç¨‹éœ€è¦è‡ªå·±ç‹¬ç«‹çš„å®ä¾‹ä¸”è¯¥å®ä¾‹éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•ä¸­è¢«ä½¿ç”¨ï¼Œä¹Ÿå³å˜é‡åœ¨çº¿ç¨‹é—´éš”ç¦»è€Œåœ¨æ–¹æ³•æˆ–ç±»é—´å…±äº«çš„åœºæ™¯ã€‚å¦‚åŒä¸€ä¸ªç”¨æˆ·è¿›è¡Œä¸åŒçš„è¯·æ±‚ã€‚</p></blockquote><h3 id="ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#ç‰¹ç‚¹"></a> ç‰¹ç‚¹</h3><ul><li>çº¿ç¨‹éš”ç¦»ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œçº¿ç¨‹ä¹‹é—´çš„å˜é‡å‰¯æœ¬äº’ä¸å½±å“ï¼Œä»è€Œé¿å…äº†å¤šçº¿ç¨‹æ“ä½œå…±äº«èµ„æºé€ æˆçš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</li><li>çº¿ç¨‹å®‰å…¨ï¼šç”±äºæ¯ä¸ªçº¿ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li><li>å‡å°‘å‚æ•°ä¼ é€’ï¼šåœ¨å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œä½¿ç”¨ThreadLocalå¯ä»¥é¿å…åœ¨å¤šä¸ªæ–¹æ³•ä¹‹é—´é¢‘ç¹ä¼ é€’å‚æ•°ï¼Œä»è€Œç®€åŒ–ä»£ç ã€‚</li></ul><h3 id="ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä½¿ç”¨"></a> ä½¿ç”¨</h3><p>ThreadLocalçš„å·¥å…·ç±»æ¨¡æ¿ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ThreadLocalUtil</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final ThreadLocal THREAD_LOCAL = <span class="hljs-keyword">new</span> ThreadLocal();<br><br>    <span class="hljs-comment">//    æŒ‰é”®è·å–æ•°æ®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">T <span class="hljs-title">get</span>()</span> &#123;<br>        <span class="hljs-keyword">return</span> (T) THREAD_LOCAL.<span class="hljs-keyword">get</span>();<br>    &#125;<br><br>    <span class="hljs-comment">//    å­˜å‚¨æ•°æ®</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set</span>(<span class="hljs-params">Object <span class="hljs-keyword">value</span></span>)</span> &#123;<br>        THREAD_LOCAL.<span class="hljs-keyword">set</span>(<span class="hljs-keyword">value</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//    æ¸…é™¤çº¿ç¨‹</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span>()</span> &#123;<br>        THREAD_LOCAL.<span class="hljs-keyword">remove</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ‹¦æˆªå™¨"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨"></a> æ‹¦æˆªå™¨</h2><p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ï¼Œå®ƒå¯ä»¥åœ¨è¯·æ±‚å¤„ç†çš„è¿‡ç¨‹ä¸­å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚æ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾ç›®æ ‡å¤„ç†å™¨ä¹‹å‰ã€å¤„ç†å™¨å¤„ç†è¯·æ±‚ä¹‹åä»¥åŠè§†å›¾æ¸²æŸ“ä¹‹å‰æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚æ‹¦æˆªå™¨çš„ä¸»è¦ç›®çš„æ˜¯åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„ç»Ÿä¸€å¤„ç†ã€‚</p><h3 id="ä½œç”¨"><a class="markdownIt-Anchor" href="#ä½œç”¨"></a> ä½œç”¨</h3><ul><li>æƒé™æ§åˆ¶ï¼šæ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰è¿›è¡Œæƒé™éªŒè¯ï¼Œä»è€Œå®ç°å¯¹ä¸åŒç”¨æˆ·çš„è®¿é—®æ§åˆ¶ã€‚</li><li>æ—¥å¿—è®°å½•ï¼šæ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­è®°å½•è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾¿äºåæœŸåˆ†æå’Œè°ƒè¯•ã€‚</li><li>æ¥å£å¹‚ç­‰æ€§æ ¡éªŒï¼šæ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰è¿›è¡Œå¹‚ç­‰æ€§æ ¡éªŒï¼Œé˜²æ­¢é‡å¤æäº¤ã€‚</li><li>æ•°æ®æ ¡éªŒï¼šæ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œç¡®ä¿æ•°æ®çš„åˆæ³•æ€§ã€‚</li><li>ç¼“å­˜å¤„ç†ï¼šæ‹¦æˆªå™¨å¯ä»¥åœ¨è¯·æ±‚å¤„ç†ä¹‹åå¯¹å“åº”æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</li></ul><h3 id="æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«"></a> æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«</h3><ul><li>æ‰§è¡Œé¡ºåºï¼šè¿‡æ»¤å™¨åœ¨æ‹¦æˆªå™¨ä¹‹å‰æ‰§è¡Œï¼Œæ‹¦æˆªå™¨åœ¨å¤„ç†å™¨ä¹‹å‰æ‰§è¡Œã€‚</li><li>åŠŸèƒ½èŒƒå›´ï¼šè¿‡æ»¤å™¨å¯ä»¥å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œè€Œæ‹¦æˆªå™¨åªèƒ½å¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚</li><li>ç”Ÿå‘½å‘¨æœŸï¼šè¿‡æ»¤å™¨ç”±Servletå®¹å™¨ç®¡ç†ï¼Œæ‹¦æˆªå™¨ç”±Springå®¹å™¨ç®¡ç†ã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šè¿‡æ»¤å™¨é€‚ç”¨äºå¯¹è¯·æ±‚å’Œå“åº”çš„å…¨å±€å¤„ç†ï¼Œæ‹¦æˆªå™¨é€‚ç”¨äºå¯¹ç‰¹å®šè¯·æ±‚çš„å¤„ç†ã€‚</li></ul><h3 id="å®ç°"><a class="markdownIt-Anchor" href="#å®ç°"></a> å®ç°</h3><ol><li>åœ¨SpringBootä¸­å®ç°æ‹¦æˆªå™¨ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªç±»å¹¶å®ç°HandlerInterceptoræ¥å£ã€‚HandlerInterceptoræ¥å£åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š<ul><li>preHandleï¼šåœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥ç”¨äºæƒé™éªŒè¯ã€æ•°æ®æ ¡éªŒç­‰æ“ä½œã€‚å¦‚æœè¿”å›trueï¼Œåˆ™ç»§ç»­æ‰§è¡Œåç»­æ“ä½œï¼›å¦‚æœè¿”å›falseï¼Œåˆ™ä¸­æ–­è¯·æ±‚å¤„ç†ã€‚</li><li>postHandleï¼šåœ¨å¤„ç†å™¨å¤„ç†è¯·æ±‚ä¹‹åæ‰§è¡Œï¼Œå¯ä»¥ç”¨äºæ—¥å¿—è®°å½•ã€ç¼“å­˜å¤„ç†ç­‰æ“ä½œã€‚</li><li>afterCompletionï¼šåœ¨è§†å›¾æ¸²æŸ“ä¹‹åæ‰§è¡Œï¼Œå¯ä»¥ç”¨äºèµ„æºæ¸…ç†ç­‰æ“ä½œã€‚<br />ä»¥ç™»å½•è®¤è¯ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul></li></ol><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginInterceptor</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">HandlerInterceptor</span></span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;<br>        <span class="hljs-keyword">String</span> token = request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>);<br>        <span class="hljs-comment">//        éªŒè¯token</span><br>        <span class="hljs-keyword">try</span> &#123;<br><span class="hljs-comment">//            ä»redisä¸­è·å–token</span><br>            ValueOperations&lt;<span class="hljs-keyword">String</span>, <span class="hljs-keyword">String</span>&gt; ops = redisTemplate.opsForValue();<br>            <span class="hljs-keyword">String</span> redisToken = ops.<span class="hljs-keyword">get</span>(token);<br>            <span class="hljs-keyword">if</span>(redisToken==<span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">RuntimeException</span>();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(!redisToken.equals(token))&#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">RuntimeException</span>();<br>            &#125;<br>            Map&lt;<span class="hljs-keyword">String</span>, Object&gt; claims = JwtUtil.parseToken(token);<br><span class="hljs-comment">//            æŠŠç”¨æˆ·ä¿¡æ¯å­˜åˆ°threadlocalä¸­</span><br>            ThreadLocalUtil.<span class="hljs-keyword">set</span>(claims);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            response.setStatus(<span class="hljs-number">401</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;<br>        ThreadLocalUtil.remove();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œå®ç°WebMvcConfigureræ¥å£ï¼Œæ³¨å†Œæ‹¦æˆªå™¨åˆ°InterceptorRegistryï¼Œå¹¶è®¾ç½®æ‹¦æˆªè§„åˆ™<br />ä»¥ç™»å½•è®¤è¯ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">LoginInterceptor</span> loginInterceptor;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addInterceptors</span>(<span class="hljs-params">InterceptorRegistry registry</span>) &#123;<br><br><span class="hljs-comment">//        æ‹¦æˆªé™¤äº†ç™»å½•å’Œæ³¨å†Œçš„å…¶ä»–è¯·æ±‚</span><br>        registry.<span class="hljs-title function_">addInterceptor</span>(loginInterceptor).<span class="hljs-title function_">excludePathPatterns</span>(<span class="hljs-string">&quot;/user/login&quot;</span>,<span class="hljs-string">&quot;/user/register&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a> æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h3><p>å½“æœ‰å¤šä¸ªæ‹¦æˆªå™¨æ—¶ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºå–å†³äºæ³¨å†Œé¡ºåºã€‚å…ˆæ³¨å†Œçš„æ‹¦æˆªå™¨å…ˆæ‰§è¡Œï¼Œåæ³¨å†Œçš„æ‹¦æˆªå™¨åæ‰§è¡Œã€‚åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ‹¦æˆªå™¨çš„preHandleæ–¹æ³•æŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œï¼Œè€ŒpostHandleå’ŒafterCompletionæ–¹æ³•æŒ‰æ³¨å†Œé¡ºåºçš„é€†åºæ‰§è¡Œã€‚</p><p>å½“æœ‰å¤šä¸ªæ‹¦æˆªå™¨æ—¶ï¼Œå®ƒä»¬çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„preHandleæ–¹æ³•ï¼ŒæŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œã€‚å¦‚æœæŸä¸ªæ‹¦æˆªå™¨çš„preHandleæ–¹æ³•è¿”å›falseï¼Œåˆ™ä¸­æ–­è¯·æ±‚å¤„ç†ï¼Œç›´æ¥æ‰§è¡Œå·²æ‰§è¡Œæ‹¦æˆªå™¨çš„afterCompletionæ–¹æ³•ã€‚</li><li>æ‰§è¡Œå¤„ç†å™¨çš„å¤„ç†æ–¹æ³•ã€‚</li><li>æ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„postHandleæ–¹æ³•ï¼ŒæŒ‰æ³¨å†Œé¡ºåºçš„é€†åºæ‰§è¡Œã€‚</li><li>æ¸²æŸ“è§†å›¾ã€‚</li><li>æ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„afterCompletionæ–¹æ³•ï¼ŒæŒ‰æ³¨å†Œé¡ºåºçš„é€†åºæ‰§è¡Œã€‚</li></ul><h2 id="controllerä¸­çš„æ–¹æ³•æ¥æ”¶å‚æ•°æ³¨è§£"><a class="markdownIt-Anchor" href="#controllerä¸­çš„æ–¹æ³•æ¥æ”¶å‚æ•°æ³¨è§£"></a> Controllerä¸­çš„æ–¹æ³•æ¥æ”¶å‚æ•°æ³¨è§£</h2><h3 id="requestparam"><a class="markdownIt-Anchor" href="#requestparam"></a> @RequestParam</h3><p>ç”¨äºå°†HTTPè¯·æ±‚å‚æ•°ç»‘å®šåˆ°æ§åˆ¶å™¨çš„æ–¹æ³•å‚æ•°ä¸Šã€‚å¦‚æœè¯·æ±‚å‚æ•°ä¸å­˜åœ¨ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚è¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨äºå¤„ç†è¯·æ±‚ä¸­çš„<strong>æŸ¥è¯¢å‚æ•°ï¼ˆå³URLä¸­<code>?</code>åé¢çš„éƒ¨åˆ†ï¼‰</strong>ï¼Œä½¿å¾—ä½ å¯ä»¥è½»æ¾åœ°ä»è¯·æ±‚ä¸­è·å–è¿™äº›å‚æ•°çš„å€¼ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">&quot;/greeting&quot;</span>)  <br>public String <span class="hljs-built_in">greeting</span>(<span class="hljs-variable">@RequestParam</span>(value = <span class="hljs-string">&quot;name&quot;</span>, defaultValue = <span class="hljs-string">&quot;World&quot;</span>) String name) &#123;  <br>    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">String</span><span class="hljs-selector-class">.format</span>(<span class="hljs-string">&quot;Hello, %s!&quot;</span>, name);  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="pathvariable"><a class="markdownIt-Anchor" href="#pathvariable"></a> @PathVariable</h3><p>ç”¨äºå°†URLæ¨¡æ¿å˜é‡å€¼ç»‘å®šåˆ°æ§åˆ¶å™¨å¤„ç†æ–¹æ³•çš„å‚æ•°ä¸Šã€‚<br />è¿™ä¸ªæ³¨è§£ä½¿å¾—ä½ å¯ä»¥<strong>ä»URLçš„è·¯å¾„ä¸­æå–å˜é‡å€¼</strong>ï¼Œè¿™åœ¨æ„å»ºRESTful APIæ—¶éå¸¸æœ‰ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/user/&#123;id&#125;&quot;</span>)</span>  <br><span class="hljs-keyword">public</span> String getUserById(<span class="hljs-meta">@PathVariable(<span class="hljs-string">&quot;id&quot;</span>)</span> <span class="hljs-built_in">Long</span> id) &#123;  <br>    <span class="hljs-comment">// æ ¹æ®idè·å–ç”¨æˆ·ä¿¡æ¯  </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User ID is: &quot;</span> + id;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="requestbody"><a class="markdownIt-Anchor" href="#requestbody"></a> @RequestBody</h3><p>ç”¨äºå¤„ç†HTTPè¯·æ±‚çš„å†…å®¹ä½“ï¼ˆBodyï¼‰ï¼Œ<strong>å°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ç»‘å®šåˆ°Javaå¯¹è±¡</strong>ä¸Šã€‚</p><p>è¿™ä¸ªæ³¨è§£<strong>é€šå¸¸ç”¨äºå¤„ç†POSTå’ŒPUTè¯·æ±‚</strong>ï¼Œç‰¹åˆ«æ˜¯å½“è¯·æ±‚çš„å†…å®¹ç±»å‹ä¸ºapplication/jsonæˆ–application/xmlæ—¶ã€‚å®ƒå…è®¸ä½ ç›´æ¥å°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®æ˜ å°„åˆ°Javaå¯¹è±¡ä¸Šï¼Œä¾¿äºåç»­å¤„ç†</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/cookie&quot;</span>)  <br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">readCookie</span>(<span class="hljs-params"><span class="hljs-meta">@CookieValue</span>(name = <span class="hljs-string">&quot;theme&quot;</span>, defaultValue = <span class="hljs-string">&quot;default&quot;</span>) <span class="hljs-built_in">String</span> theme</span>) &#123;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Theme is: &quot;</span> + theme;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="cookievalue"><a class="markdownIt-Anchor" href="#cookievalue"></a> @CookieValue</h3><p>ç”¨äº<strong>å°†è¯·æ±‚çš„Cookieæ•°æ®ç»‘å®šåˆ°æ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°</strong>ä¸Šã€‚</p><p>è¿™ä¸ªæ³¨è§£å…è®¸ä½ è®¿é—®HTTPè¯·æ±‚ä¸­çš„Cookieä¿¡æ¯ï¼Œè¿™åœ¨<strong>å¤„ç†éœ€è¦èº«ä»½éªŒè¯æˆ–ä¼šè¯ç®¡ç†çš„Webåº”ç”¨</strong>æ—¶éå¸¸æœ‰ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/cookie&quot;</span>)  <br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">readCookie</span>(<span class="hljs-params"><span class="hljs-meta">@CookieValue</span>(name = <span class="hljs-string">&quot;theme&quot;</span>, defaultValue = <span class="hljs-string">&quot;default&quot;</span>) <span class="hljs-built_in">String</span> theme</span>) &#123;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Theme is: &quot;</span> + theme;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="requestheader"><a class="markdownIt-Anchor" href="#requestheader"></a> @RequestHeader</h3><p>ç”¨äº<strong>å°†HTTPè¯·æ±‚å¤´ä¿¡æ¯ç»‘å®šåˆ°æ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°</strong>ä¸Šã€‚</p><p>è¿™ä¸ªæ³¨è§£<strong>å…è®¸ä½ è®¿é—®HTTPè¯·æ±‚ä¸­çš„å¤´éƒ¨ä¿¡æ¯</strong>ï¼Œæ¯”å¦‚User-Agentã€Content-Typeç­‰ï¼Œè¿™å¯¹äºæ—¥å¿—è®°å½•ã€å†…å®¹åå•†ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/header&quot;</span>)  <br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">readHeader</span>(<span class="hljs-params"><span class="hljs-meta">@RequestHeader</span>(name = <span class="hljs-string">&quot;User-Agent&quot;</span>, defaultValue = <span class="hljs-string">&quot;Unknown&quot;</span>) <span class="hljs-built_in">String</span> userAgent</span>) &#123;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User-Agent header is: &quot;</span> + userAgent;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="modelattribute"><a class="markdownIt-Anchor" href="#modelattribute"></a> @ModelAttribute</h3><p>ç”¨äº<strong>å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°JavaBeanä¸Š</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•çš„è¿”å›å€¼åº”è¯¥æ·»åŠ åˆ°æ¨¡å‹ï¼ˆModelï¼‰ä¸­ã€‚</p><p>è¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨äºå¤„ç†è¡¨å•æ•°æ®ï¼Œå®ƒå¯ä»¥å°†è¯·æ±‚ä¸­çš„å‚æ•°è‡ªåŠ¨ç»‘å®šåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªJavaBeanä¸Šï¼Œä¾¿äºåç»­å¤„ç†ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">&quot;/addUser&quot;</span>)  <br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params"><span class="hljs-meta">@ModelAttribute</span> User user</span>) &#123;  <br>    <span class="hljs-comment">// å¤„ç†userå¯¹è±¡  </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User added successfully&quot;</span>;  <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚æ•°æ ¡éªŒ"><a class="markdownIt-Anchor" href="#å‚æ•°æ ¡éªŒ"></a> å‚æ•°æ ¡éªŒ</h2><p>ä¸€èˆ¬å¯¹äºæäº¤çš„è¡¨å•è¦è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><h3 id="å¸¸ç”¨æ³¨è§£"><a class="markdownIt-Anchor" href="#å¸¸ç”¨æ³¨è§£"></a> å¸¸ç”¨æ³¨è§£</h3><p>å¯ä»¥é€šè¿‡æ³¨è§£ç»™å¯¹è±¡çš„æ¯ä¸ªå±æ€§è®¾ç½®æ ¡éªŒè§„åˆ™ï¼Œå¸¸è§çš„æ³¨è§£æœ‰</p><ul><li>@NotEmptyï¼šæ£€æŸ¥é›†åˆæˆ–æ•°ç»„ç­‰å¯¹è±¡æ˜¯å¦ä¸º null æˆ–ç©ºã€‚è¯¥æ³¨è§£é€šå¸¸ç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œé›†åˆæ˜¯å¦ä¸ºç©ºç­‰æƒ…å†µã€‚</li><li>@NotBlankï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å»é™¤é¦–å°¾ç©ºæ ¼åé•¿åº¦å¤§äº 0ã€‚è¯¥æ³¨è§£é€šå¸¸ç”¨äºæ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆå€¼ã€‚</li><li>@NotNullï¼šæ£€æŸ¥å¯¹è±¡(åŒ…è£…ç±»ï¼šIntegerã€Booleanç­‰)æ˜¯å¦ä¸ä¸º nullã€‚è¯¥æ³¨è§£é€šå¸¸ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦å·²ç»è¢«åˆå§‹åŒ–ã€‚</li><li>Size(max,min)ï¼šæ£€æŸ¥è¯¥å­—æ®µçš„sizeæ˜¯å¦åœ¨minå’Œmaxä¹‹é—´ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„ã€é›†åˆã€Mapç­‰</li><li>@Pattern(regexp = â€œ[abc]â€)ï¼šè¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</li><li>@Emailï¼šè¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ä»¶åœ°å€</li><li>@URLï¼šè¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯URLåœ°å€</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">import</span> jakarta.validation.constraints.*;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @author mijiupro</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">UserLoginDTO</span> </span>&#123;<br>    <span class="hljs-meta">@NotBlank</span>(message = <span class="hljs-string">&quot;è´¦å·ä¸èƒ½ä¸ºç©º&quot;</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> userAccount;<span class="hljs-comment">// ç”¨æˆ·è´¦å·</span><br>    <span class="hljs-meta">@Size</span>(min = <span class="hljs-number">6</span>, max = <span class="hljs-number">18</span>, message = <span class="hljs-string">&quot;ç”¨æˆ·å¯†ç é•¿åº¦éœ€åœ¨6-18ä½&quot;</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<span class="hljs-comment">// å¯†ç </span><br>    <span class="hljs-meta">@NotBlank</span>(message = <span class="hljs-string">&quot;éªŒè¯ç idä¸èƒ½ä¸ºç©º&quot;</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> captchaId;<span class="hljs-comment">// éªŒè¯ç id</span><br>    <span class="hljs-meta">@NotBlank</span>(message = <span class="hljs-string">&quot;éªŒè¯ç å†…å®¹ä¸èƒ½ä¸ºç©º&quot;</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> captcha;<span class="hljs-comment">// éªŒè¯ç å†…å®¹</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼€å¯å‚æ•°æ ¡éªŒ"><a class="markdownIt-Anchor" href="#å¼€å¯å‚æ•°æ ¡éªŒ"></a> å¼€å¯å‚æ•°æ ¡éªŒ</h3><p>é€šå¸¸åœ¨æ§åˆ¶å±‚è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œé€šè¿‡å¯¹è¯·æ±‚å‚æ•°ä½¿ç”¨@Validatedæ³¨è§£æˆ–è€…@Validæ³¨è§£æ¥å¯ç”¨æ ¡éªŒã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/user&quot;</span>)</span><br><span class="hljs-meta">@Tag(name = <span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span>, description = <span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span>)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;<br> <br>    <span class="hljs-keyword">public</span> UserController(UserService userService) &#123;<br>        <span class="hljs-keyword">this</span>.userService = userService;<br>    &#125;<br> <br>    <span class="hljs-meta">@PostMapping(<span class="hljs-string">&quot;/login&quot;</span>)</span><br>    <span class="hljs-meta">@Operation(summary = <span class="hljs-string">&quot;ç”¨æˆ·ç™»å½•&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> UserLoginVO login(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Validated</span> UserLoginDTO userLoginDTO) &#123;<br>        <span class="hljs-keyword">return</span> userService.login(userLoginDTO);<br>    &#125;<br> <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="validatedå’ŒvalidåŒºåˆ«"><a class="markdownIt-Anchor" href="#validatedå’ŒvalidåŒºåˆ«"></a> @Validatedå’Œ@ValidåŒºåˆ«</h3><ul><li>@Validatedæ³¨è§£æ˜¯ Spring æ¡†æ¶æä¾›çš„ï¼Œä¸»è¦ç”¨äºåœ¨ Spring MVC ä¸­å¯¹æ§åˆ¶å™¨çš„æ–¹æ³•å‚æ•°è¿›è¡Œæ ¡éªŒã€‚</li><li>@Validæ³¨è§£æ˜¯ Java æ ‡å‡†åº“æä¾›çš„ï¼Œç”¨äºåœ¨ä»»ä½•åœ°æ–¹è§¦å‘å‚æ•°æ ¡éªŒï¼ŒåŒ…æ‹¬ Spring MVC çš„æ§åˆ¶å™¨æ–¹æ³•ã€Spring Boot çš„ REST æ§åˆ¶å™¨æ–¹æ³•ã€Spring Data JPA çš„å®ä½“ç±»ç­‰ã€‚</li></ul><blockquote><p>åœ¨spring bootæ¨èç”¨@Validatedæ³¨è§£ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿæ”¯æŒ Spring æä¾›çš„æ ¡éªŒæ³¨è§£ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¥½çš„é›†æˆæ€§ã€‚</p></blockquote><h2 id="è‡ªå®šä¹‰å‚æ•°æ ¡éªŒ"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰å‚æ•°æ ¡éªŒ"></a> è‡ªå®šä¹‰å‚æ•°æ ¡éªŒ</h2><p>å·²æœ‰çš„å‚æ•°æ ¡éªŒæ³¨è§£ä¸èƒ½è¦†ç›–æ‰€æœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚å‘å¸ƒçŠ¶æ€stateè¦æ±‚å¿…é¡»æ˜¯è‰ç¨¿æˆ–å·²å‘å¸ƒçŠ¶æ€ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ã€‚</p><h3 id="è‡ªå®šä¹‰stateæ³¨è§£"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰stateæ³¨è§£"></a> è‡ªå®šä¹‰Stateæ³¨è§£</h3><p>éœ€è¦å®ç°Stateæ¥å£</p><p>ä»£ç ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@Documented</span>//å…ƒæ³¨è§£<br><span class="hljs-keyword">@Target</span>(&#123;FIELD&#125;)<span class="hljs-comment">//å…ƒæ³¨è§£</span><br><span class="hljs-keyword">@Retention</span>(RUNTIME)//å…ƒæ³¨è§£<br><span class="hljs-keyword">@Constraint</span>(validatedBy = &#123;StateValidation<span class="hljs-selector-class">.class</span>&#125;)<span class="hljs-comment">//æŒ‡å®šæä¾›æ ¡éªŒè§„åˆ™çš„ç±»</span><br>public <span class="hljs-keyword">@interface</span> State &#123;<br>    <span class="hljs-comment">//æä¾›æ ¡éªŒå¤±è´¥åçš„æç¤ºä¿¡æ¯</span><br>    String <span class="hljs-built_in">message</span>() default &quot;stateå‚æ•°çš„å€¼åªèƒ½æ˜¯å·²å‘å¸ƒæˆ–è€…è‰ç¨¿&quot;;<br>    <span class="hljs-comment">//æŒ‡å®šåˆ†ç»„</span><br>    Class&lt;?&gt;<span class="hljs-selector-attr">[]</span> <span class="hljs-built_in">groups</span>() default &#123; &#125;;<br>    <span class="hljs-comment">//è´Ÿè½½  è·å–åˆ°Stateæ³¨è§£çš„é™„åŠ ä¿¡æ¯</span><br>    Class&lt;? extends Payload&gt;<span class="hljs-selector-attr">[]</span> <span class="hljs-built_in">payload</span>() default &#123; &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>@Documented: è¿™æ˜¯ä¸€ä¸ªå…ƒæ³¨è§£ï¼Œç”¨äºæŒ‡ç¤ºè¯¥æ³¨è§£åº”è¯¥è¢«åŒ…å«åœ¨æ–‡æ¡£ä¸­</li><li>@Target({FIELD}): è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå…ƒæ³¨è§£ï¼ŒæŒ‡å®šäº†è¯¥æ³¨è§£å¯ä»¥åº”ç”¨åœ¨å­—æ®µä¸Š</li><li>@Retention(RUNTIME): è¿™æ˜¯ä¸€ä¸ªå…ƒæ³¨è§£ï¼ŒæŒ‡å®šäº†è¯¥æ³¨è§£åº”è¯¥åœ¨è¿è¡Œæ—¶ä¿ç•™ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è·å–æ³¨è§£ä¿¡æ¯ã€‚</li><li>@Constraint(validatedBy = {StateValidation.class}): è¿™æ˜¯ä¸€ä¸ªçº¦æŸæ³¨è§£ï¼Œç”¨äºæŒ‡å®šæä¾›æ ¡éªŒè§„åˆ™çš„ç±»ï¼Œå³ StateValidation ç±»(è‡ªå®šä¹‰çš„)</li></ul><h3 id="è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™çš„ç±»"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™çš„ç±»"></a> è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™çš„ç±»</h3><p>ä¸‹é¢å®ç°StateValidationç±»ï¼Œè¯¥ç±»è¦å®ç°ConstraintValidatoræ¥å£ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StateValidation</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ConstraintValidator</span>&lt;<span class="hljs-title class_">State</span>, <span class="hljs-title class_">String</span>&gt;&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isValid</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> value, ConstraintValidatorContext context</span>) &#123;<br>        <span class="hljs-keyword">if</span>(value==<span class="hljs-literal">null</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">equals</span>(<span class="hljs-string">&quot;å·²å‘å¸ƒ&quot;</span>) || value.<span class="hljs-title function_">equals</span>(<span class="hljs-string">&quot;è‰ç¨¿&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ConstraintValidatoræ¥å£è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æä¾›æ ¡éªŒè§„åˆ™çš„æ³¨è§£(State)ï¼Œä¸€ä¸ªæ˜¯æ ¡éªŒçš„æ•°æ®ç±»å‹(String)ï¼Œç„¶åé‡å†™isValidæ–¹æ³•ã€‚</p><p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œè‡ªå®šä¹‰çš„@Stateæ³¨è§£å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><h2 id="rediså®ç°ç™»é™†ä¸»åŠ¨å¤±æ•ˆ"><a class="markdownIt-Anchor" href="#rediså®ç°ç™»é™†ä¸»åŠ¨å¤±æ•ˆ"></a> rediså®ç°ç™»é™†ä¸»åŠ¨å¤±æ•ˆ</h2><p>åœ¨æ™®é€šçš„tokené¢å‘å’Œæ ¡éªŒä¸­ å½“ç”¨æˆ·å‘ç°è‡ªå·±è´¦å·å’Œå¯†ç è¢«æš´éœ²äº†æ—¶ä¿®æ”¹äº†ç™»å½•å¯†ç åï¼Œæ—§çš„tokenä»ç„¶å¯ä»¥é€šè¿‡ç³»ç»Ÿæ ¡éªŒç›´è‡³tokenåˆ°è¾¾å¤±æ•ˆæ—¶é—´ï¼Œè¿™è‚¯å®šæ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥ç³»ç»Ÿéœ€è¦åˆ©ç”¨rediså®ç°tokenä¸»åŠ¨å¤±æ•ˆæœºåˆ¶</p><p>å®ç°è¿™ä¸ªæœºåˆ¶çš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åœ¨æ¯æ¬¡ç”¨æˆ·ç™»å½•åé¢å‘tokençš„åŒæ—¶å¾€redisæ•°æ®åº“ä¸­å­˜å‚¨ä¸€ä»½é¢å‘ç»™ç”¨æˆ·çš„tokenï¼Œä¸¤ä¸ªtokenè¿‡æœŸæ—¶é—´è¦ç›¸åŒ</li></ul><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gauss">ValueOperations&lt;<span class="hljs-keyword">String</span>, <span class="hljs-keyword">String</span>&gt; ops = redisTemplate.opsForValue();<br>ops.set(<span class="hljs-built_in">token</span>, <span class="hljs-built_in">token</span>, <span class="hljs-number">30</span>, TimeUnit.MINUTES);<br></code></pre></td></tr></table></figure><ul><li>æ¯æ¬¡æ¯æ¬¡ç”¨æˆ·è¯·æ±‚æ—¶é™¤äº†è§£ætokenå¤–è¿˜éœ€è¦æŸ¥è¯¢redisä¸­æ˜¯å¦æœ‰å½“å‰tokenï¼Œæœ‰åˆ™æ ¡éªŒé€šè¿‡ï¼Œæ²¡æœ‰åˆ™æ ¡éªŒå¤±è´¥ï¼Œæ ¡éªŒä¸€èˆ¬åœ¨æ‹¦æˆªå™¨æ‰§è¡Œ</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">//ä»redisä¸­è·å–token</span><br>ValueOperations&lt;<span class="hljs-keyword">String</span>, <span class="hljs-keyword">String</span>&gt; ops = redisTemplate.opsForValue();<br><span class="hljs-keyword">String</span> redisToken = ops.<span class="hljs-keyword">get</span>(token);<br><span class="hljs-keyword">if</span>(redisToken==<span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">RuntimeException</span>();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ¯æ¬¡ç”¨æˆ·ä¿®æ”¹å¯†ç ååˆ é™¤redisä¸­å½“å‰ç”¨æ‰€æºå¸¦çš„token,ä»è€Œä½¿æ—§tokenæ— æ³•é€šè¿‡tokenæ ¡éªŒ</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haxe">userService.updatePwd(Md5Util.getMD5String(<span class="hljs-keyword">new</span><span class="hljs-type">Pwd</span>));<br>ValueOperations&lt;<span class="hljs-keyword">String</span>, <span class="hljs-keyword">String</span>&gt; ops = redisTemplate.opsForValue();<br>ops.getOperations().delete(token);<br></code></pre></td></tr></table></figure><h2 id="javascriptçš„å¯¼å…¥å¯¼å‡º"><a class="markdownIt-Anchor" href="#javascriptçš„å¯¼å…¥å¯¼å‡º"></a> JavaScriptçš„å¯¼å…¥å¯¼å‡º</h2><h3 id="éé»˜è®¤å¯¼å‡º"><a class="markdownIt-Anchor" href="#éé»˜è®¤å¯¼å‡º"></a> éé»˜è®¤å¯¼å‡º</h3><p>å¯ä»¥å¯¼å‡ºå¤šä¸ªå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼Œä½¿ç”¨<code>export</code>å…³é”®å­—</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs clean">##ä¸å¸¦åˆ«å<br><span class="hljs-keyword">export</span> &#123;test1, test2&#125;; ##åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä¸ç”¨&#123;&#125;<br><span class="hljs-keyword">import</span> &#123;test1, test2&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./test.js&#x27;</span>; <br>##å¸¦åˆ«å<br><span class="hljs-keyword">export</span> &#123;test1 <span class="hljs-keyword">as</span> t1, test2 <span class="hljs-keyword">as</span> t2&#125;;<br><span class="hljs-keyword">import</span> &#123;t1, t2&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./test.js&#x27;</span>; <br></code></pre></td></tr></table></figure><h3 id="é»˜è®¤å¯¼å‡º"><a class="markdownIt-Anchor" href="#é»˜è®¤å¯¼å‡º"></a> é»˜è®¤å¯¼å‡º</h3><p>æ¯ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼Œä½¿ç”¨<code>export default</code>å…³é”®å­—</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">export</span> default &#123;test1, test2&#125;;<br><span class="hljs-keyword">import</span> testMethods <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./test.js&#x27;</span>; ##ä¸éœ€è¦&#123;&#125;<br>testMethods.test1();<br>testMethods.test2();<br></code></pre></td></tr></table></figure><blockquote><p>å¯¼å…¥éé»˜è®¤å¯¼å‡ºçš„æ¨¡å—æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>&#123;&#125;</code>ï¼Œå¯¼å…¥é»˜è®¤å¯¼å‡ºçš„æ¨¡å—æ—¶ï¼Œä¸éœ€è¦ä½¿ç”¨<code>&#123;&#125;</code></p></blockquote><h2 id="vueåŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#vueåŸºæœ¬æ¦‚å¿µ"></a> vueåŸºæœ¬æ¦‚å¿µ</h2><ul><li><p>ä¸€èˆ¬vueé¡¹ç›®ç›®å½•ä¸­ï¼Œindex.htmlæ˜¯é»˜è®¤é¦–é¡µï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­å¼•å…¥main.jsæ–‡ä»¶ï¼Œmain.jsæ˜¯<strong>vueé¡¹ç›®çš„å…¥å£æ–‡ä»¶</strong></p></li><li><p>npmä¸‹è½½çš„åŒ…åœ¨node_modulesæ–‡ä»¶å¤¹ä¸­ï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œç›´æ¥åœ¨main.jsä¸­å¼•å…¥å³å¯</p></li><li><p>main.jsä¸­å¼•å…¥App.vueæ–‡ä»¶ï¼ŒApp.vueæ˜¯æ ¹ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½æ˜¯åœ¨æ ¹ç»„ä»¶ä¸­å¼•å…¥çš„</p></li><li><p>App.vueæ–‡ä»¶ä¸­åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼štemplateã€scriptã€styleï¼Œåˆ†åˆ«å¯¹åº”htmlã€jsã€css</p><ul><li>template: æ¨¡æ¿ï¼Œå®šä¹‰é¡µé¢ç»“æ„ï¼Œç”Ÿæˆhtml</li><li>script: é¡µé¢é€»è¾‘ï¼Œå¤„ç†æ•°æ®å’Œäº‹ä»¶</li><li>style: æ ·å¼ï¼Œå®šä¹‰é¡µé¢æ ·å¼</li></ul></li></ul><h2 id="vueå¸¸ç”¨æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#vueå¸¸ç”¨æŒ‡ä»¤"></a> vueå¸¸ç”¨æŒ‡ä»¤</h2><h3 id="refå’Œreactive"><a class="markdownIt-Anchor" href="#refå’Œreactive"></a> refå’Œreactive</h3><blockquote><p>å“åº”å¼æ•°æ®æ˜¯æŒ‡å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç›¸å…³çš„è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°</p></blockquote><p>ref å¯ä»¥ç”¨æ¥å®šä¹‰æ‰€æœ‰ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ï¼‰å’Œå¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰ã€‚ref ä¼šè¿”å›ä¸€ä¸ªå…·æœ‰ .value å±æ€§çš„å“åº”å¼å¯¹è±¡ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥è®¿é—®ï¼Œè€Œåœ¨è„šæœ¬ä¸­éœ€è¦é€šè¿‡ .value æ¥è®¿é—®å’Œæ›´æ–°å…¶å€¼ã€‚</p><p>ç‰¹ç‚¹:</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹å¿…é¡»ä½¿ç”¨refè¿›è¡Œä¿®é¥°</li><li>åœ¨templateå¼•å…¥å“åº”å¼æ•°æ®æ—¶ï¼Œç›´æ¥å¼•å…¥å˜é‡åå³å¯</li><li>ä¿®æ”¹refä¿®é¥°çš„å“åº”æ•°æ®çš„å€¼æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ &quot;å˜é‡.value&quot;æ‰èƒ½ä¿®æ”¹</li></ul><p>reactive åªèƒ½ç”¨æ¥å®šä¹‰å¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰ï¼Œå®ƒå°†æ•´ä¸ªå¯¹è±¡è¿›è¡Œæ·±åº¦ä»£ç†ï¼Œä½¿å…¶å…·æœ‰å“åº”å¼ç‰¹æ€§ã€‚é€šå¸¸ç”¨äºå¤æ‚çš„å¯¹è±¡ç»“æ„æˆ–åµŒå¥—å¯¹è±¡ï¼Œä¾¿äºç›´æ¥åœ¨å¯¹è±¡å±æ€§ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>reactive å¦‚æœé‡æ–°è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆåŸæ¥çš„å¯¹è±¡å°±ä¼šå¤±å»å“åº”å¼</li><li>reactive ä¿®æ”¹å€¼çš„å†…å®¹ä¸éœ€è¦ä½¿ç”¨ .value</li></ul><blockquote><p>å¦‚ä½•é€‰æ‹©ï¼šref æ›´é€‚åˆåŸºæœ¬ç±»å‹å’Œç®€å•çš„å˜é‡ï¼Œè€Œ reactive æ›´é€‚åˆå¯¹è±¡å’Œç»“æ„å¤æ‚çš„æ•°æ®ã€‚</p></blockquote><h3 id="v-for"><a class="markdownIt-Anchor" href="#v-for"></a> v-for</h3><p>å¸¸ç”¨äºåˆ—è¡¨æ¸²æŸ“ï¼Œç”¨äºéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ã€‚</p><p>å¦‚æ¸²æŸ“å¤šè¡Œè¡¨æ ¼<br />ç¤ºä¾‹ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(article,index) in articleList&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">article.title</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">article.category</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">article.time</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">article.state</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œindexå¯ä»¥çœç•¥ï¼Œå¦‚<code>v-for=&quot;article in articleList&quot;</code></p><h3 id="v-bind"><a class="markdownIt-Anchor" href="#v-bind"></a> v-bind</h3><p>åŠ¨æ€ä¸ºHTMLæ ‡ç­¾å±æ€§ç»‘å®šå±æ€§ï¼Œå³è®©æ ‡ç­¾ç»‘å®šä¸€ä¸ªå˜é‡</p><p>å¦‚ä¸ºherfæ ‡ç­¾ç»‘å®šurlå˜é‡ï¼š<br />ç¤ºä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>æˆ‘çš„åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>ç®€å†™ï¼š <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>æˆ‘çš„åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œurlå¯ä»¥æ˜¯åšå®¢çš„ç½‘é¡µé“¾æ¥</p><h3 id="v-if-å’Œ-v-show"><a class="markdownIt-Anchor" href="#v-if-å’Œ-v-show"></a> v-if å’Œ v-show</h3><p>è¿™ä¸¤ä¸ªæŒ‡ä»¤éƒ½ç”¨æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</p><p>v-if ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">æ‰‹é“¾ä»·æ ¼ä¸º: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;customer.level&gt;=0 &amp;&amp; customer.level&lt;=1&quot;</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;customer.level&gt;1 &amp;&amp; customer.level&lt;=2&quot;</span>&gt;</span>8.8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span>&gt;</span>7.7<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p>v-show ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">æ‰‹é“¾ä»·æ ¼ä¸º: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;customer.level&gt;=0 &amp;&amp; customer.level&lt;=1&quot;</span>&gt;</span>9.9<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;customer.level&gt;1 &amp;&amp; customer.level&lt;=2&quot;</span>&gt;</span>8.8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;customer.level&gt;2&quot;</span>&gt;</span>7.7<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>åŒºåˆ«</strong></p><ul><li>v-if åŸºäºæ¡ä»¶æ¥åˆ›å»ºæˆ–ç§»é™¤å…ƒç´ </li><li>v-show åŸºäºcssçš„displayå±æ€§çš„åˆ‡æ¢ï¼Œæ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—</li></ul><h3 id="v-on"><a class="markdownIt-Anchor" href="#v-on"></a> v-on</h3><p>ä¸ºhtmlå…ƒç´ ç»‘å®šäº‹ä»¶</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;oneClick&quot;</span>&gt;</span>ç‚¹æˆ‘æœ‰æƒŠå–œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-symbol">&amp;nbsp;</span><br><br>ç®€å†™ï¼š <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;twoClick&quot;</span>&gt;</span>å†ç‚¹æ›´æƒŠå–œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-model"><a class="markdownIt-Anchor" href="#v-model"></a> v-model</h3><p>åœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š</p><p>å¦‚å°†è¡¨å•ä¸­è¾“å…¥æ¡†å’Œä»£ç ä¸­çš„æ•°æ®å˜é‡ç»‘å®š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">æ–‡ç« åˆ†ç±»: &lt;<span class="hljs-built_in">input</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;searchConditions.category&quot;</span> /&gt;<br><br>å‘å¸ƒçŠ¶æ€: &lt;<span class="hljs-built_in">input</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;searchConditions.state&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“è¡¨å•ä¸­å¡«å†™çš„å€¼æ”¹åŠ¨ï¼Œä»£ç ä¸­çš„å˜é‡å€¼ä¹Ÿä¼šæ”¹å˜ï¼Œåä¹‹äº¦ç„¶</p><h2 id="letå’Œvarçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#letå’Œvarçš„åŒºåˆ«"></a> letå’Œvarçš„åŒºåˆ«</h2><ul><li>ä½œç”¨åŸŸï¼ˆScopeï¼‰ï¼š<ul><li>var å£°æ˜çš„å˜é‡å…·æœ‰å‡½æ•°ä½œç”¨åŸŸï¼Œå³å®ƒåœ¨å‡½æ•°å†…éƒ¨å£°æ˜æ—¶ï¼Œä½œç”¨åŸŸé™åˆ¶åœ¨è¯¥å‡½æ•°å†…ï¼›å¦‚æœåœ¨ä»£ç å—ï¼ˆå¦‚ifã€forï¼‰ä¸­å£°æ˜ï¼Œå®ƒçš„ä½œç”¨åŸŸä»ç„¶æ˜¯è¯¥ä»£ç å—æ‰€åœ¨çš„å‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸã€‚</li><li>let å£°æ˜çš„å˜é‡å…·æœ‰å—ä½œç”¨åŸŸï¼Œå³å®ƒçš„ä½œç”¨èŒƒå›´ä»…é™äºå£°æ˜å®ƒçš„ä»£ç å—å†…ã€‚å› æ­¤åœ¨ifã€forç­‰ä»£ç å—ä¸­ä½¿ç”¨letï¼Œå˜é‡åªåœ¨è¯¥ä»£ç å—å†…æœ‰æ•ˆã€‚</li></ul></li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>; <span class="hljs-comment">// å‡½æ•°ä½œç”¨åŸŸ</span><br>        let b = <span class="hljs-number">2</span>; <span class="hljs-comment">// å—ä½œç”¨åŸŸ</span><br>    &#125;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(a); <span class="hljs-comment">// 1</span><br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(b); <span class="hljs-comment">// ReferenceError: b is not defined</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>å˜é‡æå‡ï¼ˆHoistingï¼‰ï¼š</p><ul><li>var å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œåœ¨å£°æ˜ä¹‹å‰å¯ä»¥è®¿é—®åˆ°ï¼Œä½†å€¼ä¸ºundefinedã€‚</li><li>let å£°æ˜çš„å˜é‡ä¹Ÿä¼šæå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä½†å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zoneï¼‰ï¼Œå³åœ¨å˜é‡å£°æ˜ä¹‹å‰è®¿é—®ä¼š<strong>æŠ¥é”™</strong>ã€‚</li></ul></li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(a); <span class="hljs-comment">// undefined</span><br><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;<br><br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(b); <span class="hljs-comment">// ReferenceError: Cannot access &#x27;b&#x27; before initialization</span><br>let b = <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><ul><li>é‡å¤å£°æ˜ï¼š<ul><li>var å…è®¸åœ¨åŒä¸€ä½œç”¨åŸŸå†…é‡å¤å£°æ˜ç›¸åŒå˜é‡åï¼Œè€Œletä¸å…è®¸é‡å¤å£°æ˜ç›¸åŒå˜é‡åã€‚</li></ul></li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">var a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>var a <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">; // ä¸ä¼šæŠ¥é”™</span><br><br>let b <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>let b <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">; // SyntaxError: Identifier &#x27;b&#x27; has already been declared</span><br></code></pre></td></tr></table></figure><ul><li><p>å…¨å±€å¯¹è±¡å±æ€§ï¼š</p><ul><li>åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ç”¨varå£°æ˜çš„å˜é‡ä¼šæˆä¸ºå…¨å±€å¯¹è±¡ï¼ˆå¦‚æµè§ˆå™¨ä¸­çš„windowå¯¹è±¡ï¼‰çš„å±æ€§ï¼Œè€Œletå£°æ˜çš„å…¨å±€å˜é‡ä¸ä¼šæ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸Šã€‚</li></ul></li></ul><h2 id="vueç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#vueç”Ÿå‘½å‘¨æœŸ"></a> vueç”Ÿå‘½å‘¨æœŸ</h2><p>vue ç”Ÿå‘½å‘¨æœŸä¸€å…±åŒ…å«å…«ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µä¼šè‡ªåŠ¨æ‰§è¡Œå¯¹åº”çš„é’©å­å‡½æ•°ï¼Œè¿™äº›é’©å­å‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œã€æ•°æ®è¯·æ±‚ã€äº‹ä»¶ç›‘å¬ç­‰æ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">é’©å­å‡½æ•°</th><th style="text-align:center">é˜¶æ®µ</th></tr></thead><tbody><tr><td style="text-align:center">beforeCreate</td><td style="text-align:center">åˆ›å»ºå‰</td></tr><tr><td style="text-align:center">created</td><td style="text-align:center">åˆ›å»ºå</td></tr><tr><td style="text-align:center">beforeMount</td><td style="text-align:center">æŒ‚è½½å‰</td></tr><tr><td style="text-align:center">mounted</td><td style="text-align:center">æŒ‚è½½å</td></tr><tr><td style="text-align:center">beforeUpdate</td><td style="text-align:center">æ•°æ®æ›´æ–°å‰</td></tr><tr><td style="text-align:center">updated</td><td style="text-align:center">æ•°æ®æ›´æ–°å</td></tr><tr><td style="text-align:center">beforeUnmount</td><td style="text-align:center">ç»„ä»¶é”€æ¯å‰</td></tr><tr><td style="text-align:center">unmounted</td><td style="text-align:center">ç»„ä»¶é”€æ¯å</td></tr></tbody></table><h2 id="axiosçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#axiosçš„ä½¿ç”¨"></a> axiosçš„ä½¿ç”¨</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a class="markdownIt-Anchor" href="#åŸºæœ¬ç”¨æ³•"></a> åŸºæœ¬ç”¨æ³•</h3><p>axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ å¼‚æ­¥ ajax è¯·æ±‚åº“ï¼Œå‰ç«¯æœ€æµè¡Œçš„ ajax è¯·æ±‚åº“ã€‚ç®€å•çš„è®²å°±æ˜¯å¯ä»¥å‘é€getã€postè¯·æ±‚ï¼Œè´Ÿè´£ä¸åç«¯äº¤äº’ã€‚</p><p>axiosæœ‰2ç§åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li>axios({method:â€˜æ–¹æ³•â€™ï¼Œurl: â€˜â€™, baseURL: â€˜â€™ï¼Œdata:{name: â€˜ccâ€™, sex: â€˜manâ€™} })</li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arcade">axios(&#123;<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:8080&#x27;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;cc&#x27;</span>,<br>        <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;man&#x27;</span><br>    &#125;<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(res)<br>&#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(err)<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="2"><li>ç›´æ¥è°ƒç”¨axios.get()ã€axios.post()ç­‰æ–¹æ³•</li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arcade">axios.post(<span class="hljs-string">&#x27;/login&#x27;</span>,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;cc&#x27;</span>, <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;man&#x27;</span>&#125;).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(res)<br>&#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(err)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="axioså“åº”æ‹¦æˆªå™¨"><a class="markdownIt-Anchor" href="#axioså“åº”æ‹¦æˆªå™¨"></a> axioså“åº”æ‹¦æˆªå™¨</h3><p>åœ¨å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ï¼Œå¯ä»¥å¯¹å“åº”æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¦‚ç»Ÿä¸€å¤„ç†é”™è¯¯ä¿¡æ¯ã€ç»Ÿä¸€å¤„ç†loadingç­‰ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;<br><span class="hljs-keyword">const</span> baseURL = <span class="hljs-string">&#x27;http://localhost:8080&#x27;</span>; <span class="hljs-comment">//åç«¯æ¥å£åœ°å€</span><br><span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>(&#123;baseURL&#125;); <span class="hljs-comment">// å®šä¹‰è¯·æ±‚å®ä¾‹</span><br><span class="hljs-comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span><br>instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<span class="hljs-comment">//httpçŠ¶æ€ç ä¸º2xxæ—¶è§¦å‘</span><br>        <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>; <br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<span class="hljs-comment">//httpçŠ¶æ€ç ä¸ä¸º2xxæ—¶è§¦å‘</span><br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;è¯·æ±‚é”™è¯¯&#x27;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<span class="hljs-comment">//å¼‚æ­¥çš„çŠ¶æ€è½¬ä¸ºå¤±è´¥çŠ¶æ€ï¼ŒæŠ›å‡ºé”™è¯¯</span><br>    &#125;<br>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> instance;<br></code></pre></td></tr></table></figure><p>axiosçš„æ‹¦æˆªå™¨æ˜¯åŸºäºPromiseçš„ï¼Œuse()æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¤±è´¥çš„å›è°ƒå‡½æ•°ã€‚<br />ç”±äºè¯¥å‡½æ•°æœ¬èº«å°±æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦asyncå’Œawaitå…³é”®å­—ï¼Œjsæ–‡ä»¶è°ƒç”¨æ—¶ä¹Ÿä¸éœ€è¦åŠ ï¼Œåªéœ€è¦åœ¨vueæ–‡ä»¶ä¸­è°ƒç”¨æ—¶åŠ ä¸Šasyncå’Œawaitå…³é”®å­—å³å¯ã€‚</p><h3 id="axiosè¯·æ±‚æ‹¦æˆªå™¨"><a class="markdownIt-Anchor" href="#axiosè¯·æ±‚æ‹¦æˆªå™¨"></a> axiosè¯·æ±‚æ‹¦æˆªå™¨</h3><p>åœ¨è¯·æ±‚è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ï¼Œå¯ä»¥å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¦‚ç»Ÿä¸€æ·»åŠ tokenã€ç»Ÿä¸€æ·»åŠ loadingç­‰ã€‚</p><p>ç”¨æ³•ä¸å“åº”æ‹¦æˆªå™¨ç±»ä¼¼ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè¯·æ±‚æ‹¦æˆªå™¨æ·»åŠ tokençš„ç¤ºä¾‹ï¼š</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">instance.interceptors.request.use(<br>  <span class="hljs-function"><span class="hljs-params">(config)</span> =&gt;</span> &#123;<br>    let tokenStore = useTokenStore();<br>    <span class="hljs-keyword">if</span> (tokenStore.token) &#123;<br>      config.headers.Authorization = tokenStore.token;<br>    &#125;<br>    <span class="hljs-keyword">return</span> config;<br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-params">(<span class="hljs-built_in">error</span>)</span> =&gt;</span> &#123;<br>    ElMessage(&#123;<br>      <span class="hljs-name">type</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>      <span class="hljs-name">message</span>: <span class="hljs-string">&quot;è¯·æ±‚é”™è¯¯ï¼&quot;</span>,<br>      <span class="hljs-name">plain</span>: <span class="hljs-literal">true</span>,<br>    &#125;);<br>    <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-built_in">error</span>);<br>  &#125;<br>);<br></code></pre></td></tr></table></figure><h2 id="æµè§ˆå™¨è·¨åŸŸé—®é¢˜"><a class="markdownIt-Anchor" href="#æµè§ˆå™¨è·¨åŸŸé—®é¢˜"></a> æµè§ˆå™¨è·¨åŸŸé—®é¢˜</h2><h3 id="é—®é¢˜æè¿°"><a class="markdownIt-Anchor" href="#é—®é¢˜æè¿°"></a> é—®é¢˜æè¿°</h3><p>ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œä¸åŒæºï¼ˆä¸åŒåè®®ã€ä¸åŒåŸŸåã€ä¸åŒç«¯å£ï¼‰å‘é€ajaxè¯·æ±‚æ—¶ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªï¼Œè¿™å°±æ˜¯è·¨åŸŸé—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œå‰ç«¯é¡µé¢çš„åœ°å€æ˜¯ <code>http://localhost:5173</code>ï¼Œåç«¯æ¥å£çš„åœ°å€æ˜¯ <code>http://localhost:8080</code>ï¼Œå½“æµè§ˆå™¨å¯åŠ¨æ—¶ï¼Œä¼šå…ˆå‘é€è¯·æ±‚åˆ°å‰ç«¯åœ°å€ï¼Œå¾—åˆ°æ³¨å†Œé¡µé¢<br />å½“ç”¨æˆ·ç‚¹å‡»æ³¨å†Œæ—¶ï¼Œä¼šå‘é€è¯·æ±‚åˆ°åç«¯åœ°å€ï¼Œè¿™æ—¶æµè§ˆå™¨ä¼šæ‹¦æˆªè¿™ä¸ªè¯·æ±‚ï¼Œå› ä¸ºè¿™æ˜¯è·¨åŸŸè¯·æ±‚ã€‚</p><h3 id="è§£å†³æ–¹æ³•"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ³•"></a> è§£å†³æ–¹æ³•</h3><p>ä¸€èˆ¬æ˜¯ç”¨ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå³åœ¨å‰ç«¯é¡¹ç›®ä¸­é…ç½®ä»£ç†ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°åç«¯æ¥å£åœ°å€ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åœ¨vite.config.jsä¸­é…ç½®ä»£ç†</li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">server:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">    proxy:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-string">&quot;/api&quot;</span>: <span class="hljs-punctuation">&#123;</span><span class="hljs-comment">//è·å–è·¯å¾„ä¸­åŒ…å«/apiçš„è¯·æ±‚ï¼Œå°†å…¶ä»£ç†åˆ°http://localhost:8080</span><br><span class="hljs-symbol">        target:</span> <span class="hljs-string">&quot;http://localhost:8080&quot;</span>,<br><span class="hljs-symbol">        changeOrigin:</span> true,<br><span class="hljs-symbol">        rewrite:</span> (path) =&gt; path.replace(/^\<span class="hljs-keyword">/api/</span>, <span class="hljs-string">&quot;&quot;</span>), <span class="hljs-comment">//é‡å†™è·¯å¾„ï¼Œå°†è·¯å¾„ä¸­çš„/apiæ›¿æ¢ä¸ºç©º</span><br>      <span class="hljs-punctuation">&#125;</span>,<br>    <span class="hljs-punctuation">&#125;</span>,<br>  <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>å°†axiosçš„baseURLè®¾ç½®ä¸º<code>/api</code>ï¼Œç„¶åå®šä¹‰axioså®ä¾‹</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const baseURL <span class="hljs-operator">=</span> <span class="hljs-string">&quot;/api&quot;</span><span class="hljs-comment">; //å‰ç«¯ä»£ç†åœ°å€</span><br>const instance <span class="hljs-operator">=</span> axios.create(&#123; baseURL &#125;)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h2 id="vueçš„è·¯ç”±"><a class="markdownIt-Anchor" href="#vueçš„è·¯ç”±"></a> vueçš„è·¯ç”±</h2><p>è·¯ç”±çš„å«ä¹‰æ˜¯æ ¹æ®ä¸åŒçš„urlåœ°å€ï¼Œè¿”å›ä¸åŒçš„å†…å®¹ç»™ç”¨æˆ·ï¼Œä»–çš„å®ç°åŸç†æ˜¯ç›‘å¬urlåœ°å€çš„å˜åŒ–ï¼Œç„¶åæ ¹æ®urlåœ°å€çš„å˜åŒ–è¿”å›ä¸åŒçš„å†…å®¹ç»™ç”¨æˆ·<br />ä»–çš„ä¼˜ç‚¹æ˜¯å½“ç”¨æˆ·åœ¨åº”ç”¨ä¸­æµè§ˆä¸åŒé¡µé¢æ—¶ï¼ŒURL ä¼šéšä¹‹æ›´æ–°ï¼Œä½†é¡µé¢ä¸éœ€è¦ä»æœåŠ¡å™¨é‡æ–°åŠ è½½ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å•é¡µåº”ç”¨</p><h3 id="vueä¸­è·¯ç”±çš„ä½¿ç”¨æ­¥éª¤"><a class="markdownIt-Anchor" href="#vueä¸­è·¯ç”±çš„ä½¿ç”¨æ­¥éª¤"></a> vueä¸­è·¯ç”±çš„ä½¿ç”¨æ­¥éª¤</h3><ul><li>å®‰è£…vue-router</li><li>åœ¨src/router/index.jsä¸­é…ç½®è·¯ç”±</li></ul><p>ç¤ºä¾‹:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> &quot;vue-router&quot;;<br><br>//å¯¼å…¥ç»„ä»¶<br><span class="hljs-keyword">import</span> LoginVue <span class="hljs-keyword">from</span> &quot;@/views/Login.vue&quot;;<br><span class="hljs-keyword">import</span> LayoutVue <span class="hljs-keyword">from</span> &quot;@/views/Layout.vue&quot;;<br><span class="hljs-keyword">import</span> ArticleCategoryVue <span class="hljs-keyword">from</span> &quot;@/views/article/ArticleCategory.vue&quot;;<br><span class="hljs-keyword">import</span> ArticleManageVue <span class="hljs-keyword">from</span> &quot;@/views/article/ArticleManage.vue&quot;;<br><span class="hljs-keyword">import</span> UserAvatarVue <span class="hljs-keyword">from</span> &quot;@/views/user/UserAvatar.vue&quot;;<br><span class="hljs-keyword">import</span> UserInfoVue <span class="hljs-keyword">from</span> &quot;@/views/user/UserInfo.vue&quot;;<br><span class="hljs-keyword">import</span> UserResetPasswordVue <span class="hljs-keyword">from</span> &quot;@/views/user/UserResetPassword.vue&quot;;<br><br>//å®šä¹‰è·¯ç”±å…³ç³»<br>const routes = [<br>  &#123;<br>    <span class="hljs-type">path</span>: &quot;/login&quot;,<br>    component: LoginVue,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-type">path</span>: &quot;/&quot;,<br>    component: LayoutVue,<br>    redirect: &quot;/article/category&quot;,<br>    //å­è·¯ç”±ï¼Œè®¿é—®å­è·¯ç”±æ—¶ï¼Œçˆ¶è·¯ç”±çš„å†…å®¹ä¼šå…ˆè¢«æ¸²æŸ“ï¼Œç„¶åå­è·¯ç”±çš„å†…å®¹ä¼šè¢«æ¸²æŸ“åˆ°çˆ¶è·¯ç”±çš„å†…å®¹ä¸Š<br>    //å­è·¯ç”±çš„<span class="hljs-type">path</span>ä¸éœ€è¦åŠ /ï¼Œä¼šè‡ªåŠ¨æ‹¼æ¥åˆ°çˆ¶è·¯ç”±çš„<span class="hljs-type">path</span>åé¢<br>    children: [<br>      &#123;<br>        <span class="hljs-type">path</span>: &quot;article/category&quot;,<br>        component: ArticleCategoryVue,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-type">path</span>: &quot;article/manage&quot;,<br>        component: ArticleManageVue,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-type">path</span>: &quot;user/avatar&quot;,<br>        component: UserAvatarVue,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-type">path</span>: &quot;user/info&quot;,<br>        component: UserInfoVue,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-type">path</span>: &quot;user/resetpwd&quot;,<br>        component: UserResetPasswordVue,<br>      &#125;,<br>    ],<br>  &#125;,<br>];<br><br>//åˆ›å»ºè·¯ç”±<br>const router = createRouter(&#123; history: createWebHistory(), routes: routes &#125;);<br>export <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure><ul><li>åœ¨main.jsä¸­å¼•å…¥è·¯ç”±</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">import router from <span class="hljs-string">&quot;@/router&quot;</span><span class="hljs-comment">;</span><br>app.use(router)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨App.vueä¸­ä½¿ç”¨è·¯ç”±</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;template&gt;</span><br>  <span class="hljs-section">&lt;router-view&gt;</span><span class="hljs-section">&lt;/router-view&gt;</span><br><span class="hljs-section">&lt;/template&gt;</span><br></code></pre></td></tr></table></figure><h3 id="è·¯ç”±ä¸»åŠ¨åˆ‡æ¢ç»„ä»¶"><a class="markdownIt-Anchor" href="#è·¯ç”±ä¸»åŠ¨åˆ‡æ¢ç»„ä»¶"></a> è·¯ç”±ä¸»åŠ¨åˆ‡æ¢ç»„ä»¶</h3><p>å®é™…åº”ç”¨ä¸­ï¼Œvueæ–‡ä»¶å’Œjsæ–‡ä»¶ä¸­è·¯ç”±ä¸»åŠ¨è·³è½¬æ–¹å¼æ˜¯ä¸åŒçš„</p><ul><li>vueæ–‡ä»¶ä¸­</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">import &#123; useRouter &#125; from <span class="hljs-string">&quot;vue-router&quot;</span><span class="hljs-comment">;</span><br>const router <span class="hljs-operator">=</span> useRouter()<span class="hljs-comment">;</span><br>router.push(<span class="hljs-string">&quot;/login&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>jsæ–‡ä»¶ä¸­ï¼Œæ²¡æœ‰setupï¼Œè¯´æ˜jsä¸æ˜¯vueç»„ä»¶ï¼Œå› æ­¤ä¸èƒ½ç”¨import {useRouter} from 'vue-routerâ€™æ¥è·å–router</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/router&quot;</span>;<br>router.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;/login&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="vueä¸­ä½¿ç”¨piniaåŠå…¶æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#vueä¸­ä½¿ç”¨piniaåŠå…¶æŒä¹…åŒ–"></a> vueä¸­ä½¿ç”¨piniaåŠå…¶æŒä¹…åŒ–</h2><p>piniaæ˜¯vueçš„ä¸“å±çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒå…è®¸è·¨ç»„ä»¶æˆ–é¡µé¢å…±äº«çŠ¶æ€ï¼Œæ¯”å¦‚åœ¨ç™»é™†é¡µé¢ç™»é™†æˆåŠŸåï¼Œå¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨piniaä¸­ï¼Œç„¶åå…¶ä»–é¡µé¢ä»piniaä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p><h3 id="piniaä½¿ç”¨æ­¥éª¤"><a class="markdownIt-Anchor" href="#piniaä½¿ç”¨æ­¥éª¤"></a> piniaä½¿ç”¨æ­¥éª¤</h3><ul><li>åœ¨main.jsä¸­å¼•å…¥pinia</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">import &#123; createPinia &#125; from <span class="hljs-string">&quot;pinia&quot;</span><span class="hljs-comment">;</span><br>const pinia <span class="hljs-operator">=</span> createPinia()<span class="hljs-comment">;</span><br>app.use(pinia)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨src/stores/token.jsä¸­å®šä¹‰piniaçš„store</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//å®šä¹‰å…³äºcounterçš„store</span><br><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">const</span> useCounter = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;counter&quot;</span>,&#123;<br>    <span class="hljs-attr">state</span>:<span class="hljs-function">() =&gt;</span> (&#123;<br>        <span class="hljs-attr">count</span>:<span class="hljs-number">66</span>,<br>    &#125;),<br>    <br>    <span class="hljs-attr">getters</span>: &#123;<br><br>  &#125;,<br><br>  <span class="hljs-attr">actions</span>: &#123;<br><br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">//å¯¼å‡ºè¿™ä¸ªuseCounteræ¨¡å—</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useCounter<br></code></pre></td></tr></table></figure><p>defineStore æ˜¯éœ€è¦ä¼ å‚æ•°çš„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯idï¼Œå°±æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼Œç®€å•ç‚¹è¯´å°±å¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªå‘½åç©ºé—´ã€‚<br />ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªæ¨¡å—éœ€è¦å¤„ç†ï¼Œç¬¬ä¸€ä¸ªæ˜¯ stateï¼Œç¬¬äºŒä¸ªæ˜¯ gettersï¼Œç¬¬ä¸‰ä¸ªæ˜¯ actionsã€‚</p><h3 id="piniaæŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#piniaæŒä¹…åŒ–"></a> piniaæŒä¹…åŒ–</h3><blockquote><p>piniaé»˜è®¤æ˜¯å†…å­˜å­˜å‚¨ï¼Œå½“åˆ·æ–°æµè§ˆå™¨æ—¶ä¼šä¸¢å¤±æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨persistæ’ä»¶å®ç°æŒä¹…åŒ–</p></blockquote><ul><li>å¼•å…¥pinia-persistedstate-pluginæ’ä»¶</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">import &#123; createPersistedState &#125; from <span class="hljs-string">&quot;pinia-persistedstate-plugin&quot;</span><span class="hljs-comment">; </span><br>pinia.use(createPersistedState())<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®persistedä¸ºtrue</li></ul><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pf">import &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;<br>//defineStoreå‡½æ•°æ¥å—äºŒä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯storeçš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®šä¹‰äº†å…³äºtokençš„ä¸€äº›æ“ä½œ<br>export <span class="hljs-keyword">const</span> useTokenStore = defineStore(<span class="hljs-string">&quot;token&quot;</span>, &#123;<br>  <span class="hljs-keyword">state</span>: () =&gt; (&#123;<br>    //<span class="hljs-keyword">state</span>ï¼Œä¸€èˆ¬å®šä¹‰è¦å­˜å‚¨çš„æ•°æ®ï¼Œ<span class="hljs-keyword">state</span>çš„æ•°æ®æœ¬èº«å°±æ˜¯å“åº”å¼çš„<br>    token: <span class="hljs-string">&quot;&quot;</span>,<br>  &#125;),<br>  actions: &#123;<br>    //actionsï¼Œå®šä¹‰ä¸€äº›æ“ä½œ<br>    <span class="hljs-built_in">set</span>Token(newToken) &#123;<br>      this.token = newToken;<br>    &#125;,<br>    removeToken() &#123;<br>      this.token = <span class="hljs-string">&quot;&quot;</span>;<br>    &#125;,<br>  &#125;,<br>  //<span class="hljs-keyword">persist</span>ä¸ºtrueï¼Œå¼€å¯æŒä¹…åŒ–<br>  <span class="hljs-keyword">persist</span>: true,<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="å¾®æœåŠ¡éƒ¨åˆ†"><a class="markdownIt-Anchor" href="#å¾®æœåŠ¡éƒ¨åˆ†"></a> å¾®æœåŠ¡éƒ¨åˆ†</h1><h2 id="æ³¨å†Œä¸­å¿ƒ"><a class="markdownIt-Anchor" href="#æ³¨å†Œä¸­å¿ƒ"></a> æ³¨å†Œä¸­å¿ƒ</h2><h3 id="æœåŠ¡æ²»ç†åŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#æœåŠ¡æ²»ç†åŸºç¡€çŸ¥è¯†"></a> æœåŠ¡æ²»ç†åŸºç¡€çŸ¥è¯†</h3><p>æœåŠ¡æ²»ç†ä¸­çš„ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li>æœåŠ¡æä¾›è€…ï¼šæš´éœ²æœåŠ¡æ¥å£ï¼Œä¾›å…¶ä»–æœåŠ¡è°ƒç”¨</li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼šè°ƒç”¨å…¶ä»–æœåŠ¡æä¾›çš„æ¥å£</li><li>æ³¨å†Œä¸­å¿ƒï¼šè®°å½•å¹¶ç›‘æ§å¾®æœåŠ¡å„å®ä¾‹çš„çŠ¶æ€ï¼Œæ¨é€æœåŠ¡å˜æ›´ä¿¡æ¯</li></ul><p>æ¶ˆè´¹è€…å¦‚ä½•çŸ¥é“æœåŠ¡æä¾›è€…çš„åœ°å€ï¼Ÿ</p><ul><li>æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡ä¿¡æ¯ï¼Œæ¶ˆè´¹è€…ä»æ³¨å†Œä¸­å¿ƒè®¢é˜…å’Œæ‹‰å–æœåŠ¡ä¿¡æ¯</li></ul><p>æ¶ˆè´¹è€…å¦‚ä½•çŸ¥é“æœåŠ¡çŠ¶æ€å˜æ›´ï¼Ÿ</p><ul><li>æœåŠ¡æä¾›è€…é€šè¿‡å¿ƒè·³æœºåˆ¶å‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šå¥åº·çŠ¶æ€ï¼Œå½“â€œå¿ƒè·³â€å¼‚å¸¸æ—¶æ³¨å†Œä¸­å¿ƒä¼šå‰”é™¤å¼‚å¸¸æœåŠ¡ï¼Œå¹¶é€šçŸ¥è®¢é˜…äº†è¯¥æœåŠ¡çš„æ¶ˆè´¹è€…</li></ul><p>å½“æœåŠ¡æä¾›è€…æœ‰å¤šä¸ªå®ä¾‹æ—¶ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ</p><ul><li>é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©ä¸€ä¸ªæœåŠ¡æä¾›è€…</li></ul><h3 id="nacosåŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#nacosåŸºç¡€çŸ¥è¯†"></a> nacosåŸºç¡€çŸ¥è¯†</h3><p>Nacosæ˜¯é˜¿é‡Œæ——ä¸‹çš„ä¸€æ¬¾å¼€æºäº§å“ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†ã€æœåŠ¡æ²»ç†çš„ç»¼åˆå‹è§£å†³æ–¹æ¡ˆï¼›ç®€å•æ¥è¯´ Nacos å°±æ˜¯æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒçš„ç»„åˆï¼Œè‡´åŠ›äºå¸®åŠ©æ‚¨å‘ç°ã€é…ç½®å’Œç®¡ç†å¾®æœåŠ¡ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„ç‰¹æ€§é›†ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°åŠ¨æ€æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®åŠæµé‡ç®¡ç†ã€‚</p><p>é…ç½®æ–¹å¼ï¼š<br />ä¸€èˆ¬ä¼šæŠŠæ‰€æœ‰å¾®æœåŠ¡çš„å…±äº«çš„é…ç½®ï¼Œå¦‚jdbcã€loggerã€mqç­‰é…ç½®æ”¾åœ¨nacosä¸­ï¼Œç„¶åç”±å¾®æœåŠ¡æ‹‰å–ã€‚</p><ul><li>åœ¨nacosæ§åˆ¶å°æ–°å»ºå…±äº«é…ç½®ï¼Œå¦‚shared-jdbc.yaml</li><li>æ¥ä¸‹æ¥ï¼Œè¦åœ¨å¾®æœåŠ¡æ‹‰å–å…±äº«é…ç½®ã€‚å°†æ‹‰å–åˆ°çš„å…±äº«é…ç½®ä¸æœ¬åœ°çš„application.yamlé…ç½®åˆå¹¶ï¼Œå®Œæˆé¡¹ç›®ä¸Šä¸‹æ–‡çš„åˆå§‹åŒ–ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‹‰å–Nacosé…ç½®æ˜¯SpringCloudä¸Šä¸‹æ–‡ï¼ˆApplicationContextï¼‰åˆå§‹åŒ–æ—¶å¤„ç†çš„ã€‚ç„¶åæ‰ä¼šåˆå§‹åŒ–SpringBootä¸Šä¸‹æ–‡ï¼Œå»è¯»å–application.yamlã€‚</p><p>å¦‚æœå°†nacosé…ç½®æ”¾åœ¨application.yamlä¸­ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®å¼•å¯¼é˜¶æ®µå°±æ— æ³•æ‹‰å–nacosä¸­çš„é…ç½®äº†ã€‚</p><p>å› æ­¤ï¼Œå°†nacosåœ°å€é…ç½®åˆ°bootstrap.yamlä¸­ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®å¼•å¯¼é˜¶æ®µå°±å¯ä»¥æ‹‰å–nacosä¸­çš„å…±äº«é…ç½®äº†ã€‚</p><p>é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">item-service</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.56</span><span class="hljs-number">.101</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># nacosåœ°å€</span><br>      <span class="hljs-attr">config:</span><br>        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span> <span class="hljs-comment"># æ–‡ä»¶åç¼€å</span><br>        <span class="hljs-attr">shared-configs:</span> <span class="hljs-comment"># å…±äº«é…ç½®</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-jdbc.yaml</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-log.yaml</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-swagger.yaml</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-seata.yaml</span> <span class="hljs-comment">#</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-mq.yaml</span><br></code></pre></td></tr></table></figure><h3 id="ç¯å¢ƒéš”ç¦»"><a class="markdownIt-Anchor" href="#ç¯å¢ƒéš”ç¦»"></a> ç¯å¢ƒéš”ç¦»</h3><p>å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šæœ‰å¤šä¸ªç¯å¢ƒï¼Œå¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€å‘å¸ƒç¯å¢ƒç­‰ï¼Œä¸åŒçš„ç¯å¢ƒéœ€è¦éš”ç¦»ã€‚</p><p>nacosä¸­ï¼Œä¸»è¦åˆ†ä¸ºnamespace, group, serviceä¸‰çº§ï¼š</p><ul><li>namespaceï¼šç”¨äºéš”ç¦»ä¸åŒç¯å¢ƒï¼Œé»˜è®¤ä¸ºç©ºï¼ˆpublicï¼‰</li><li>groupï¼šæœåŠ¡åˆ†ç»„ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ï¼Œé»˜è®¤ä¸ºDEFAULT_GROUP</li><li>serviceï¼šæœåŠ¡åï¼Œç”¨äºæ ‡è¯†æœåŠ¡</li></ul><p>é…ç½®namespaceï¼š</p><ul><li>åœ¨nacosæ§åˆ¶å°ä¸­åˆ›å»ºnamespaceï¼Œå¦‚devã€testã€prod</li><li>åœ¨nacosé…ç½®æ–‡ä»¶ä¸­configæˆ–discoveryå­—æ®µä¸‹æŒ‡å®šnamespace, å¦‚<code>namespace: &#123;namespaceId&#125;</code></li></ul><h3 id="æœåŠ¡åˆ†çº§æ¨¡å‹"><a class="markdownIt-Anchor" href="#æœåŠ¡åˆ†çº§æ¨¡å‹"></a> æœåŠ¡åˆ†çº§æ¨¡å‹</h3><p>å¤§å‚çš„æœåŠ¡å¯èƒ½éƒ¨ç½²åœ¨å¤šä¸ªæœºæˆ¿ï¼Œç‰©ç†ä¸Šè¢«éš”ç¦»ä¸ºå¤šä¸ªé›†ç¾¤ï¼Œnacoså¯ä»¥å®ç°å¯¹é›†ç¾¤çš„åˆ’åˆ†ï¼Œå®ç°æœåŠ¡åˆ†çº§æ¨¡å‹ã€‚</p><p>nacosçš„åˆ†çº§åˆ†ä¸ºæœåŠ¡ï¼Œé›†ç¾¤ï¼Œå®ä¾‹ä¸‰çº§ã€‚<br />æ¯”å¦‚ï¼ŒæŸä¸ªæœåŠ¡çš„å®ä¾‹æœ‰å¾ˆå¤šä¸ªï¼Œåˆ†å¸ƒåœ¨å…¨å›½å„åœ°ï¼Œå¯ä»¥å°†è¿™äº›å®ä¾‹åˆ’åˆ†ä¸ºå¤šä¸ªé›†ç¾¤ï¼Œå¦‚ååŒ—é›†ç¾¤ã€åå—é›†ç¾¤ã€åä¸œé›†ç¾¤ç­‰ï¼Œæ¯ä¸ªé›†ç¾¤ä¸‹æœ‰å¤šä¸ªå®ä¾‹ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œnacosçš„æ³¨å†Œè¡¨æ˜¯ä¸€ä¸ªMapç»“æ„<code>Map&lt;String1, Map&lt;String2, Map&lt;String3, Cluster&lt;Set&lt;Instance&gt;&gt;&gt;&gt;&gt;</code></p><ul><li>String1ï¼šnamespaceåç§°</li><li>String2ï¼šæœåŠ¡åç§°ï¼ˆå«åˆ†ç»„ä¿¡æ¯ï¼‰</li><li>String3ï¼šé›†ç¾¤åç§°</li></ul><h2 id="openfeign"><a class="markdownIt-Anchor" href="#openfeign"></a> OpenFeign</h2><p>åˆ©ç”¨Nacoså®ç°æœåŠ¡æ²»ç†å’Œå‘ç°åï¼Œéœ€è¦åˆ©ç”¨RestTemplateå®ç°æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>è·å–æœåŠ¡åç§°</li><li>æ ¹æ®æœåŠ¡åç§°è·å–æœåŠ¡å®ä¾‹åˆ—è¡¨</li><li>åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©ä¸€ä¸ªæœåŠ¡å®ä¾‹</li><li>é‡æ„è¯·æ±‚çš„urlï¼Œé€šè¿‡RestTemplateå‘é€è¯·æ±‚</li></ul><p>ä½†æ˜¯è¿œç¨‹è°ƒç”¨çš„ä»£ç å¤ªå¤æ‚ï¼ŒOpenFeignå¯ä»¥ç®€åŒ–è¿œç¨‹è°ƒç”¨çš„ä»£ç ã€‚</p><h3 id="åŸºæœ¬ç”¨æ³•-2"><a class="markdownIt-Anchor" href="#åŸºæœ¬ç”¨æ³•-2"></a> åŸºæœ¬ç”¨æ³•</h3><p>OpenFeignçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼•å…¥OpenFeignä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--openFeign--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--è´Ÿè½½å‡è¡¡å™¨ï¼Œæ—©æœŸæ˜¯Ribbonï¼Œæ–°ç‰ˆä¸ºloadbalancer--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨å¯¹åº”æœåŠ¡çš„å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@EnableFeignClients</code>æ³¨è§£</li><li>ç¼–å†™OpenFeignå®¢æˆ·ç«¯æ¥å£</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@FeignClient</span>(value = <span class="hljs-string">&quot;item-service&quot;</span>,fallbackFactory = ItemClientFallbackFactory.class)<br>public interface ItemClient &#123;<br>    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">&quot;/items&quot;</span>)<br>    List&lt;ItemDTO&gt; <span class="hljs-built_in">queryItemByIds</span>(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">&quot;ids&quot;</span>) Collection&lt;Long&gt; ids);<br>    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">&quot;/items/stock/deduct&quot;</span>)<br>    void <span class="hljs-built_in">deductStock</span>(<span class="hljs-variable">@RequestBody</span> List&lt;OrderDetailDTO&gt; items);<br>    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">&quot;/items/stock/restore&quot;</span>)<br>    void <span class="hljs-built_in">restoreStock</span>(<span class="hljs-variable">@RequestBody</span> List&lt;OrderDetailDTO&gt; items);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæ¥å£å†…çš„æ–¹æ³•å’Œå¯¹åº”çš„Controlleræ–¹æ³•çš„å‚æ•°ã€è¿”å›å€¼ã€è¯·æ±‚æ–¹å¼ã€è¯·æ±‚è·¯å¾„ç­‰è¦ä¸€è‡´</p><ul><li>åœ¨éœ€è¦çš„åœ°æ–¹æ³¨å…¥OpenFeignå®¢æˆ·ç«¯æ¥å£ï¼Œè°ƒç”¨æ¥å£æ–¹æ³•</li></ul><h3 id="è¿æ¥æ± "><a class="markdownIt-Anchor" href="#è¿æ¥æ± "></a> è¿æ¥æ± </h3><p>Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚æ”¯æŒçš„httpå®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š</p><ul><li>HttpURLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± </li><li>Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± </li><li>OKHttpï¼šæ”¯æŒè¿æ¥æ± </li></ul><p>æ”¯æŒè¿æ¥æ± çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¤ç”¨è¿æ¥ï¼Œå‡å°‘è¿æ¥çš„åˆ›å»ºå’Œé”€æ¯ï¼Œæé«˜æ€§èƒ½ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨OKHttpã€‚ä¸€èˆ¬ä¸¤æ­¥å³å¯ï¼š</p><ul><li>å¼•å…¥OKHttpä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--OK http çš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-okhttp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä½¿ç”¨OKHttp</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">okhttp:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯OKHttpåŠŸèƒ½</span><br></code></pre></td></tr></table></figure><h3 id="è´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡"></a> è´Ÿè½½å‡è¡¡</h3><p>OpenFeigné»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ˜¯è½®è¯¢ç­–ç•¥ï¼Œåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè‡ªå¢çš„è®¡æ•°å™¨ï¼ˆè¾¾åˆ°INTæœ€å¤§å€¼æ—¶å½’é›¶ï¼‰ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªæœåŠ¡å®ä¾‹ã€‚<br />è¿™æ ·çš„ç¼ºç‚¹æ˜¯ï¼Œå½“æœåŠ¡å®ä¾‹çš„æ•°é‡ä¸å‡åŒ€æ—¶ï¼Œè½®è¯¢ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´æŸäº›å®ä¾‹çš„è´Ÿè½½è¿‡é«˜ï¼Œè€ŒæŸäº›å®ä¾‹çš„è´Ÿè½½è¿‡ä½ã€‚</p><p>å†…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰ä¸‰ç§ï¼š</p><ul><li>RoundRobinLoadBalancerï¼šè½®è¯¢ç­–ç•¥</li><li>RandomLoadBalancerï¼šéšæœºç­–ç•¥</li><li>NacosLoadBalancerï¼šä¼˜å…ˆåœ¨æœ¬é›†ç¾¤å†…é€‰æ‹©å®ä¾‹ï¼ˆè®¿é—®å¿«ï¼‰ï¼Œæ ¹æ®ä¸åŒå®ä¾‹çš„æƒé‡ï¼ˆnacosæ§åˆ¶å°è®¾ç½®æƒé‡ï¼‰ï¼Œéšæœºé€‰æ‹©å®ä¾‹</li></ul><p>ä¿®æ”¹é»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªè¿”å›ReactorLoadBalancerçš„Beanï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åœ¨å¯¹åº”çš„æœåŠ¡ä¸­åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œè¿”å›ReactorLoadBalancerçš„Bean</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">OpenFeignConfig</span> </span>&#123;<br>    <span class="hljs-meta">##ä¿®æ”¹ä¸ºNacosLoadBalancer</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ReactorLoadBalancer&lt;ServiceInstance&gt; reactorServiceInstanceLoadBalancer(<br>            Environment environment, NacosDiscoveryProperties properties,<br>            LoadBalancerClientFactory loadBalancerClientFactory) &#123;<br>        <span class="hljs-keyword">String</span> name = environment.getProperty(LoadBalancerClientFactory.PROPERTY_NAME);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">NacosLoadBalancer</span>(<br>                loadBalancerClientFactory.getLazyProvider(name, ServiceInstanceListSupplier.class), name, properties);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™ä¸ªé…ç½®ç±»<strong>ä¸è¦åŠ @Configurationæ³¨è§£</strong>ï¼Œä¹Ÿä¸è¦è¢«SpringBootApplicationæ‰«æåˆ°ã€‚è€Œæ˜¯åœ¨å¯åŠ¨ç±»ä¸Šé€šè¿‡æ³¨è§£æ¥å£°æ˜è¿™ä¸ªé…ç½®</p><p>å…¨å±€é…ç½®ï¼š<code>@LoadBalancerClients(defaultConfiguration = OpenFeignConfig.class)</code>ï¼Œå¯¹æ‰€æœ‰æœåŠ¡ç”Ÿæ•ˆ<br />å±€éƒ¨é…ç½®ï¼š<code>@LoadBalancerClients(&#123;@LoadBalancerClient(value = &quot;item-service&quot;, configuration = OpenFeignConfig.class)&#125;)</code>ï¼Œä»…å¯¹æŸä¸ªæœåŠ¡ç”Ÿæ•ˆ</p><h2 id="ç½‘å…³"><a class="markdownIt-Anchor" href="#ç½‘å…³"></a> ç½‘å…³</h2><p>ç½‘å…³å°±æ˜¯ç½‘ç»œçš„å…³å£ã€‚æ•°æ®åœ¨ç½‘ç»œé—´ä¼ è¾“ï¼Œä»ä¸€ä¸ªç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ç½‘ç»œæ—¶å°±éœ€è¦ç»è¿‡ç½‘å…³æ¥åšæ•°æ®çš„è·¯ç”±å’Œè½¬å‘ä»¥åŠæ•°æ®å®‰å…¨çš„æ ¡éªŒã€‚</p><p>ä¸€èˆ¬å•ä½“é¡¹ç›®æ‹†åˆ†æˆå„ç§å¾®æœåŠ¡åï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„ç«¯å£å·ï¼Œè¿™æ ·ä¼šå¯¼è‡´å‰ç«¯è¯·æ±‚æ—¶éœ€è¦çŸ¥é“æ¯ä¸ªæœåŠ¡çš„ç«¯å£å·ï¼Œè¿™æ ·ä¸åˆ©äºç»´æŠ¤ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªç½‘å…³æ¥ç»Ÿä¸€ç®¡ç†è¯·æ±‚ã€‚</p><p>ç½‘å…³åœ¨å¾®æœåŠ¡æ¶æ„ä¸­çš„ä½œç”¨ï¼š</p><ul><li>ç½‘å…³å¯ä»¥åšå®‰å…¨æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯<strong>ç™»å½•èº«ä»½æ ¡éªŒ</strong>ï¼Œæ ¡éªŒé€šè¿‡æ‰æ”¾è¡Œ</li><li>é€šè¿‡è®¤è¯åï¼Œç½‘å…³å†æ ¹æ®è¯·æ±‚åˆ¤æ–­åº”è¯¥è®¿é—®å“ªä¸ªå¾®æœåŠ¡ï¼Œå°†è¯·æ±‚è½¬å‘è¿‡å»</li></ul><h3 id="åŸºæœ¬ç”¨æ³•-3"><a class="markdownIt-Anchor" href="#åŸºæœ¬ç”¨æ³•-3"></a> åŸºæœ¬ç”¨æ³•</h3><p>åˆ©ç”¨ç½‘å…³å®ç°è¯·æ±‚è·¯ç”±ã€‚ç”±äºç½‘å…³æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œå› æ­¤ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªæ¨¡å—å¼€å‘åŠŸèƒ½ã€‚å¤§æ¦‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºç½‘å…³å¾®æœåŠ¡ï¼Œå¼•å…¥ä¾èµ–</li><li>ç¼–å†™å¯åŠ¨ç±»</li><li>åœ¨application.yamlä¸­é…ç½®ç½‘å…³è·¯ç”±</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">server:</span><br><span class="hljs-symbol">  port:</span> <span class="hljs-number">8080</span><br><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">  application:</span><br><span class="hljs-symbol">    name:</span> gateway<br><span class="hljs-symbol">  cloud:</span><br><span class="hljs-symbol">    nacos:</span><br>      server-addr: <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span>:<span class="hljs-number">8848</span><br><span class="hljs-symbol">    gateway:</span><br><span class="hljs-symbol">      routes:</span><br>        - id: item <span class="hljs-meta"># è·¯ç”±è§„åˆ™idï¼Œè‡ªå®šä¹‰ï¼Œå”¯ä¸€</span><br><span class="hljs-symbol">          uri:</span> lb:<span class="hljs-comment">//item-service # è·¯ç”±çš„ç›®æ ‡æœåŠ¡ï¼Œlbä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä¼šä»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡åˆ—è¡¨</span><br><span class="hljs-symbol">          predicates:</span> <span class="hljs-meta"># è·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦ç¬¦åˆå½“å‰è§„åˆ™ï¼Œç¬¦åˆåˆ™è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/items/</span>**,<span class="hljs-keyword">/search/</span>** <span class="hljs-meta"># è¿™é‡Œæ˜¯ä»¥è¯·æ±‚è·¯å¾„ä½œä¸ºåˆ¤æ–­è§„åˆ™</span><br>        - id: cart<br><span class="hljs-symbol">          uri:</span> lb:<span class="hljs-comment">//cart-service</span><br><span class="hljs-symbol">          predicates:</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/carts/</span>**<br>        - id: user<br><span class="hljs-symbol">          uri:</span> lb:<span class="hljs-comment">//user-service</span><br><span class="hljs-symbol">          predicates:</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/users/</span>**,<span class="hljs-keyword">/addresses/</span>**<br>        - id: trade<br><span class="hljs-symbol">          uri:</span> lb:<span class="hljs-comment">//trade-service</span><br><span class="hljs-symbol">          predicates:</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/orders/</span>**<br>        - id: pay<br><span class="hljs-symbol">          uri:</span> lb:<span class="hljs-comment">//pay-service</span><br><span class="hljs-symbol">          predicates:</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/pay-orders/</span>**<br></code></pre></td></tr></table></figure><p>å››ä¸ªå±æ€§å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>idï¼šè·¯ç”±çš„å”¯ä¸€æ ‡ç¤º</li><li>predicatesï¼šè·¯ç”±æ–­è¨€ï¼Œå…¶å®å°±æ˜¯åŒ¹é…æ¡ä»¶</li><li>filtersï¼šè·¯ç”±è¿‡æ»¤å™¨ï¼Œå¯¹è¯·æ±‚æˆ–å“åº”åšç‰¹æ®Šå¤„ç†</li><li>uriï¼šè·¯ç”±ç›®æ ‡åœ°å€ï¼Œlb://ä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä»æ³¨å†Œä¸­å¿ƒè·å–ç›®æ ‡å¾®æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå¹¶ä¸”è´Ÿè½½å‡è¡¡é€‰æ‹©ä¸€ä¸ªè®¿é—®ã€‚</li></ul><h3 id="ç½‘å…³å®ç°ç™»é™†æ ¡éªŒ"><a class="markdownIt-Anchor" href="#ç½‘å…³å®ç°ç™»é™†æ ¡éªŒ"></a> ç½‘å…³å®ç°ç™»é™†æ ¡éªŒ</h3><p>ç™»å½•æ˜¯åŸºäºJWTæ¥å®ç°çš„ï¼Œæ ¡éªŒJWTçš„ç®—æ³•å¤æ‚ï¼Œè€Œä¸”éœ€è¦ç”¨åˆ°ç§˜é’¥ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½å»åšç™»å½•æ ¡éªŒï¼Œè¿™å°±å­˜åœ¨ç€ä¸¤å¤§é—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦çŸ¥é“JWTçš„ç§˜é’¥ï¼Œä¸å®‰å…¨</li><li>æ¯ä¸ªå¾®æœåŠ¡é‡å¤ç¼–å†™ç™»å½•æ ¡éªŒä»£ç ã€æƒé™æ ¡éªŒä»£ç ï¼Œéº»çƒ¦</li></ul><p>ç½‘å…³æ˜¯æ‰€æœ‰å¾®æœåŠ¡çš„å…¥å£ï¼Œä¸€åˆ‡è¯·æ±‚éƒ½éœ€è¦å…ˆç»è¿‡ç½‘å…³ã€‚å®Œå…¨å¯ä»¥æŠŠç™»å½•æ ¡éªŒçš„å·¥ä½œæ”¾åˆ°ç½‘å…³å»åšï¼š</p><ul><li>åªéœ€è¦åœ¨ç½‘å…³å’Œç”¨æˆ·æœåŠ¡ä¿å­˜ç§˜é’¥</li><li>åªéœ€è¦åœ¨ç½‘å…³å¼€å‘ç™»å½•æ ¡éªŒåŠŸèƒ½</li></ul><p>ä¸è¿‡ï¼Œè¿™é‡Œå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š</p><h4 id="å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒ"><a class="markdownIt-Anchor" href="#å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒ"></a> å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒï¼Ÿ</h4><p>ç½‘å…³å¤„ç†è¯·æ±‚çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/img/gateway.png" alt="" /></p><ol><li>å®¢æˆ·ç«¯è¯·æ±‚è¿›å…¥ç½‘å…³åç”±HandlerMappingå¯¹è¯·æ±‚åšåˆ¤æ–­ï¼Œæ‰¾åˆ°ä¸å½“å‰è¯·æ±‚åŒ¹é…çš„è·¯ç”±è§„åˆ™ï¼ˆRouteï¼‰ï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™WebHandlerå»å¤„ç†ã€‚</li><li>WebHandleråˆ™ä¼šåŠ è½½å½“å‰è·¯ç”±ä¸‹éœ€è¦æ‰§è¡Œçš„è¿‡æ»¤å™¨é“¾ï¼ˆFilter chainï¼‰ï¼Œç„¶åæŒ‰ç…§é¡ºåºé€ä¸€æ‰§è¡Œè¿‡æ»¤å™¨ï¼ˆåé¢ç§°ä¸ºFilterï¼‰ã€‚</li><li>å›¾ä¸­Filterè¢«è™šçº¿åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œæ˜¯å› ä¸ºFilterå†…éƒ¨çš„é€»è¾‘åˆ†ä¸ºpreå’Œpostä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¼šåœ¨è¯·æ±‚è·¯ç”±åˆ°å¾®æœåŠ¡ä¹‹å‰å’Œä¹‹åè¢«æ‰§è¡Œã€‚</li><li>åªæœ‰æ‰€æœ‰Filterçš„preé€»è¾‘éƒ½ä¾æ¬¡é¡ºåºæ‰§è¡Œé€šè¿‡åï¼Œè¯·æ±‚æ‰ä¼šè¢«è·¯ç”±åˆ°å¾®æœåŠ¡ã€‚</li><li>å¾®æœåŠ¡è¿”å›ç»“æœåï¼Œå†å€’åºæ‰§è¡ŒFilterçš„posté€»è¾‘ã€‚</li><li>æœ€ç»ˆæŠŠå“åº”ç»“æœè¿”å›ã€‚</li></ol><p>æœ€ç»ˆè¯·æ±‚è½¬å‘æ˜¯æœ‰ä¸€ä¸ªåä¸ºNettyRoutingFilterçš„è¿‡æ»¤å™¨æ¥æ‰§è¡Œçš„ï¼Œè€Œä¸”è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­é¡ºåºæœ€é åçš„ä¸€ä¸ªã€‚<br />å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œåœ¨å…¶ä¸­å®ç°ç™»å½•æ ¡éªŒé€»è¾‘ï¼Œå¹¶ä¸”å°†è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºå®šä¹‰åˆ°NettyRoutingFilterä¹‹å‰ï¼Œè¿™å°±ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚äº†ï¼</p><p>ç½‘å…³è¿‡æ»¤å™¨é“¾ä¸­çš„è¿‡æ»¤å™¨æœ‰ä¸¤ç§ï¼š</p><ul><li>GatewayFilterï¼šè·¯ç”±è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥æ˜¯ä»»æ„æŒ‡å®šçš„è·¯ç”±Route.</li><li>GlobalFilterï¼šå…¨å±€è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ˜¯æ‰€æœ‰è·¯ç”±ï¼Œä¸å¯é…ç½®ã€‚</li></ul><p>æ¥ä¸‹æ¥ä»¥GlobalFilterä¸ºä¾‹ï¼Œå®ç°ç™»å½•æ ¡éªŒåŠŸèƒ½:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthGlobalFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GlobalFilter</span>, Ordered &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AuthProperties authProperties;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JwtTool jwtTool;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AntPathMatcher</span> <span class="hljs-variable">antPathMatcher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AntPathMatcher</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;<br>        <span class="hljs-comment">//è·å–request</span><br>        <span class="hljs-type">ServerHttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> exchange.getRequest();<br>        <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦ç™»å½•æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span> (isExclude(request.getPath().toString())) &#123;<br>            <span class="hljs-keyword">return</span> chain.filter(exchange);<br>        &#125;<br>        <span class="hljs-comment">//è·å–token</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        List&lt;String&gt; authorizations = request.getHeaders().get(<span class="hljs-string">&quot;authorization&quot;</span>);<br>        <span class="hljs-keyword">if</span> (authorizations != <span class="hljs-literal">null</span> &amp;&amp; !authorizations.isEmpty()) &#123;<br>            token = authorizations.get(<span class="hljs-number">0</span>);<br>        &#125;<br>        <span class="hljs-comment">//æ ¡éªŒè§£ætoken</span><br>        <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            userId = jwtTool.parseToken(token);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-type">ServerHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> exchange.getResponse();<br>            response.setStatusCode(HttpStatus.UNAUTHORIZED);<br>            <span class="hljs-keyword">return</span> response.setComplete();<br>        &#125;<br>        <span class="hljs-comment">//é€šè¿‡è¯·æ±‚å¤´ä¼ é€’ç”¨æˆ·ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> userId.toString();<br>        <span class="hljs-type">ServerWebExchange</span> <span class="hljs-variable">ex</span> <span class="hljs-operator">=</span> exchange.mutate()<br>                .request(builder -&gt; builder.header(<span class="hljs-string">&quot;userInfo&quot;</span>, userInfo))<br>                .build();<br>        <span class="hljs-keyword">return</span> chain.filter(ex);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isExclude</span><span class="hljs-params">(String string)</span> &#123;<br>        <span class="hljs-keyword">for</span> (String pathPattern : authProperties.getExcludePaths()) &#123;<br>            <span class="hljs-keyword">if</span> (antPathMatcher.match(pathPattern, string)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è®¾ç½®ä¼˜å…ˆçº§ï¼Œç¡®ä¿è¯¥è¿‡æ»¤å™¨åœ¨NettyRoutingFilterä¹‹å‰æ‰§è¡Œï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç½‘å…³ç™»é™†æ ¡éªŒä¹‹åå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#ç½‘å…³ç™»é™†æ ¡éªŒä¹‹åå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡"></a> ç½‘å…³ç™»é™†æ ¡éªŒä¹‹åï¼Œå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ï¼Ÿ</h4><p>ç”±äºç½‘å…³å‘é€è¯·æ±‚åˆ°å¾®æœåŠ¡ä¾ç„¶é‡‡ç”¨çš„æ˜¯Httpè¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯ä»¥è¯·æ±‚å¤´çš„æ–¹å¼ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚<br />ç„¶åå¾®æœåŠ¡å¯ä»¥ä»è¯·æ±‚å¤´ä¸­è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚è€ƒè™‘åˆ°å¾®æœåŠ¡å†…éƒ¨å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ç”¨åˆ°ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨SpringMVCçš„æ‹¦æˆªå™¨æ¥å®ç°ç™»å½•ç”¨æˆ·ä¿¡æ¯è·å–ï¼Œå¹¶å­˜å…¥ThreadLocalï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚<br />å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åœ¨ç½‘å…³çš„è¿‡æ»¤å™¨ä¸­å°†ç”¨æˆ·ä¿¡æ¯æ”¾å…¥è¯·æ±‚å¤´</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-comment">//é€šè¿‡è¯·æ±‚å¤´ä¼ é€’ç”¨æˆ·ä¿¡æ¯</span><br>        String userInfo = userId.<span class="hljs-keyword">toString</span>();<br>        ServerWebExchange <span class="hljs-keyword">ex</span> = exchange.mutate()<br>                .request(builder -&gt; builder.header(<span class="hljs-string">&quot;userInfo&quot;</span>, userInfo))<br>                .build();<br>        <span class="hljs-keyword">return</span> chain.filter(<span class="hljs-keyword">ex</span>);<br></code></pre></td></tr></table></figure><ul><li>åœ¨é€šç”¨å¾®æœåŠ¡ä¸­å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œä»è¯·æ±‚å¤´ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</li></ul><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HandlerInterceptor</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object <span class="hljs-keyword">handler</span>)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br><br>        <span class="hljs-comment">//è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</span><br>        String userInfo = request.getHeader(<span class="hljs-string">&quot;userInfo&quot;</span>);<br>        <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºå­˜å…¥ThreadLocal</span><br>        <span class="hljs-keyword">if</span>(StrUtil.isNotBlank(userInfo))&#123;<br>            UserContext.setUser(Long.valueOf(userInfo));<br>        &#125;<br>        <span class="hljs-comment">//å› ä¸ºç½‘å…³å·²ç»åšè¿‡äº†tokenæ ¡éªŒï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦å†æ ¡éªŒ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object <span class="hljs-keyword">handler</span>, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-comment">//æ¸…é™¤ThreadLocalä¸­çš„ç”¨æˆ·ä¿¡æ¯</span><br>        UserContext.removeUser();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨é€šç”¨å¾®æœåŠ¡é…ç½®ç±»ä¸­ï¼Œæ·»åŠ æ‹¦æˆªå™¨ï¼Œä¸ºäº†åªå¯¹å¾®æœåŠ¡ç”Ÿæ•ˆï¼Œä»…åœ¨SpringMVCä¸­æ·»åŠ æ‹¦æˆªå™¨ï¼Œæ·»åŠ æ³¨è§£<code>@ConditionalOnClass(DispatcherServlet.class)</code></li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br><span class="hljs-variable">@ConditionalOnClass</span>(DispatcherServlet.class)<br>public class MvcConfig implements WebMvcConfigurer &#123;<br>    <span class="hljs-variable">@Override</span><br>    public void <span class="hljs-built_in">addInterceptors</span>(InterceptorRegistry registry) &#123;<br>        <span class="hljs-selector-tag">registry</span><span class="hljs-selector-class">.addInterceptor</span>(new <span class="hljs-built_in">UserInfoInterceptor</span>());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>åœ¨æ–‡ä»¶ä¸­è®¾ç½®è‡ªåŠ¨é…ç½®ï¼ˆå‚è€ƒè‡ªåŠ¨é…ç½®åŸç†ï¼‰</p></li><li><p>å…¶ä»–å¾®æœåŠ¡å¼•å…¥é€šç”¨å¾®æœåŠ¡çš„ä¾èµ–</p></li></ul><h4 id="å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨è¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³åˆè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯"><a class="markdownIt-Anchor" href="#å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨è¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³åˆè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯"></a> å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨ï¼Œè¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³ï¼Œåˆè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</h4><p>è¦æƒ³å®ç°å¾®æœåŠ¡ä¹‹é—´çš„ç”¨æˆ·ä¿¡æ¯ä¼ é€’ï¼Œå°±å¿…é¡»åœ¨å¾®æœåŠ¡å‘èµ·è°ƒç”¨æ—¶æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚å¤´ã€‚</p><p>ä¸ºäº†è®©æ¯ä¸€ä¸ªç”±OpenFeignå‘èµ·çš„è¯·æ±‚è‡ªåŠ¨æºå¸¦ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œè¦å€ŸåŠ©Feignä¸­æä¾›çš„ä¸€ä¸ªæ‹¦æˆªå™¨æ¥å£ï¼šfeign.RequestInterceptor</p><p>é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªBeanï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚å¤´ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">RequestInterceptor</span> <span class="hljs-title function_">userInfoRequestInterceptor</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestInterceptor</span>() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">apply</span>(<span class="hljs-params">RequestTemplate template</span>) &#123;<br>            <span class="hljs-comment">// è·å–ç™»å½•ç”¨æˆ·</span><br>            <span class="hljs-title class_">Long</span> userId = <span class="hljs-title class_">UserContext</span>.<span class="hljs-title function_">getUser</span>();<br>            <span class="hljs-keyword">if</span>(userId == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-comment">// å¦‚æœä¸ºç©ºåˆ™ç›´æ¥è·³è¿‡</span><br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            <span class="hljs-comment">// å¦‚æœä¸ä¸ºç©ºåˆ™æ”¾å…¥è¯·æ±‚å¤´ä¸­ï¼Œä¼ é€’ç»™ä¸‹æ¸¸å¾®æœåŠ¡</span><br>            template.<span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;user-info&quot;</span>, userId.<span class="hljs-title function_">toString</span>());<br>        &#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŠ¨æ€è·¯ç”±"><a class="markdownIt-Anchor" href="#åŠ¨æ€è·¯ç”±"></a> åŠ¨æ€è·¯ç”±</h3><p>ç½‘å…³çš„è·¯ç”±é…ç½®å…¨éƒ¨æ˜¯åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ è½½ï¼Œå¹¶ä¸”ä¸€ç»åŠ è½½å°±ä¼šç¼“å­˜åˆ°å†…å­˜ä¸­çš„è·¯ç”±è¡¨å†…ï¼ˆä¸€ä¸ªMapï¼‰ï¼Œä¸ä¼šæ”¹å˜ï¼Œä¹Ÿä¸ä¼šç›‘å¬è·¯ç”±å˜æ›´ã€‚è¦ä¿®æ”¹è·¯ç”±é…ç½®ï¼Œéœ€è¦é‡å¯ç½‘å…³ã€‚</p><p>å®ç°åŠ¨æ€è·¯ç”±ï¼Œéœ€è¦æŠŠè·¯ç”±ä¿¡æ¯ä¿å­˜åˆ°nacosï¼Œå½“è·¯ç”±é…ç½®æ›´æ–°æ—¶ï¼Œæ¨é€æœ€æ–°è·¯ç”±ä¿¡æ¯åˆ°ç½‘å…³ï¼Œå®ç°å®æ—¶æ›´æ–°è·¯ç”±è¡¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åœ¨nacosæ§åˆ¶å°ä¸­æ·»åŠ è·¯ç”±è¡¨ï¼Œç±»å‹ä¸ºjsonæ ¼å¼</li><li>åœ¨åŸå§‹ç½‘å…³é…ç½®æ–‡ä»¶application.ymlä¸­ï¼Œåˆ é™¤è·¯ç”±é…ç½®</li><li>å¼•å…¥nacosé…ç½®ç®¡ç†ä¾èµ–</li><li>ç›‘å¬nacosé…ç½®å˜æ›´ï¼Œæ›´æ–°è·¯ç”±è¡¨</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicRouteLoader</span> &#123;<br>    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">RouteDefinitionWriter</span> routeDefinitionWriter;<br>    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">NacosConfigManager</span> nacosConfigManager;<br>    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> dataId = <span class="hljs-string">&quot;gateway-routes.json&quot;</span>;<br>    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> group = <span class="hljs-string">&quot;DEFAULT_GROUP&quot;</span>;<br>    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; routeIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br><br>    <span class="hljs-meta">@PostConstruct</span> <span class="hljs-comment">// åœ¨æ„é€ å‡½æ•°æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">initRouteConfigListener</span>() throws <span class="hljs-title class_">NacosException</span> &#123;<br>        <span class="hljs-comment">//æ‹‰å–é…ç½®ï¼Œæ·»åŠ ç›‘å¬å™¨</span><br>        <span class="hljs-title class_">String</span> configInfo = nacosConfigManager.<span class="hljs-title function_">getConfigService</span>()<br>                .<span class="hljs-title function_">getConfigAndSignListener</span>(dataId, group, <span class="hljs-number">5000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listener</span>() &#123;<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Executor</span> <span class="hljs-title function_">getExecutor</span>(<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>                    &#125;<br><br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">receiveConfigInfo</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> configInfo</span>) &#123;<br>                        <span class="hljs-comment">//ç›‘å¬åˆ°é…ç½®å˜åŒ–åï¼Œæ›´æ–°è·¯ç”±è¡¨</span><br>                        <span class="hljs-title function_">updateRouteConfig</span>(configInfo);<br>                    &#125;<br>                &#125;);<br>        <span class="hljs-comment">//ç¬¬ä¸€æ¬¡æ‹‰å–é…ç½®åï¼Œæ›´æ–°è·¯ç”±è¡¨</span><br>        <span class="hljs-title function_">updateRouteConfig</span>(configInfo);<br>    &#125;<br><br>    <span class="hljs-comment">//æ›´æ–°è·¯ç”±è¡¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateRouteConfig</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> configInfo</span>) &#123;<br>        log.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;ç›‘å¬åˆ°é…ç½®å˜åŒ–ï¼Œæ›´æ–°è·¯ç”±è¡¨&#123;&#125;&quot;</span>, configInfo);<br>        <span class="hljs-comment">//è§£æé…ç½®ä¿¡æ¯</span><br>        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">RouteDefinition</span>&gt; routeDefinitions = <span class="hljs-title class_">JSON</span>Util.<span class="hljs-title function_">toList</span>(configInfo, <span class="hljs-title class_">RouteDefinition</span>.<span class="hljs-property">class</span>);<br>        <span class="hljs-comment">//æ¸…ç©ºè·¯ç”±è¡¨</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">String</span> id : routeIds) &#123;<br>            routeDefinitionWriter.<span class="hljs-title function_">delete</span>(<span class="hljs-title class_">Mono</span>.<span class="hljs-title function_">just</span>(id)).<span class="hljs-title function_">subscribe</span>();<br>        &#125;<br>        routeIds.<span class="hljs-title function_">clear</span>();<br>        <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°è·¯ç”±è¡¨</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">CollUtil</span>.<span class="hljs-title function_">isEmpty</span>(routeDefinitions)) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//æ›´æ–°è·¯ç”±è¡¨</span><br>        routeDefinitions.<span class="hljs-title function_">forEach</span>(routeDefinition -&gt; &#123;<br>            <span class="hljs-comment">// 3.1.æ›´æ–°è·¯ç”±</span><br>            routeDefinitionWriter.<span class="hljs-title function_">save</span>(<span class="hljs-title class_">Mono</span>.<span class="hljs-title function_">just</span>(routeDefinition)).<span class="hljs-title function_">subscribe</span>();<br>            <span class="hljs-comment">// 3.2.è®°å½•è·¯ç”±idï¼Œæ–¹ä¾¿å°†æ¥åˆ é™¤</span><br>            routeIds.<span class="hljs-title function_">add</span>(routeDefinition.<span class="hljs-title function_">getId</span>());<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¾®æœåŠ¡ä¿æŠ¤"><a class="markdownIt-Anchor" href="#å¾®æœåŠ¡ä¿æŠ¤"></a> å¾®æœåŠ¡ä¿æŠ¤</h2><p>é›ªå´©é—®é¢˜ï¼šå¾®æœåŠ¡è°ƒç”¨é“¾è·¯ä¸­æŸä¸ªå¾®æœåŠ¡å‡ºç°æ•…éšœï¼Œå¼•èµ·æ•´ä¸ªé“¾è·¯ä¸­æ‰€æœ‰å¾®æœåŠ¡ä¸å¯ç”¨ï¼Œè¿™å°±æ˜¯é›ªå´©<br />é›ªå´©é—®é¢˜å‡ºç°çš„åŸå› ä¸»è¦æœ‰ï¼š</p><ul><li>å¾®æœåŠ¡ç›¸äº’è°ƒç”¨ï¼ŒæœåŠ¡æä¾›è€…å‡ºç°æ•…éšœ</li><li>æœåŠ¡è°ƒç”¨è€…æ²¡æœ‰åšå¥½å¼‚å¸¸å¤„ç†ï¼Œå¯¼è‡´è‡ªèº«æ•…éšœ</li><li>è°ƒç”¨é“¾æ‰€æœ‰æœåŠ¡çº§è”æ•…éšœï¼Œæœ€ç»ˆæ•´ä¸ªé“¾è·¯ä¸å¯ç”¨</li></ul><p>å¾®æœåŠ¡ä¿æŠ¤çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š</p><ul><li>è¯·æ±‚é™æµ</li><li>çº¿ç¨‹éš”ç¦»</li><li>æœåŠ¡ç†”æ–­</li></ul><p>è¿™äº›æ–¹æ¡ˆæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¯¼è‡´æœåŠ¡çš„ä½“éªŒä¸Šç•¥æœ‰ä¸‹é™</p><p>æ¯”å¦‚è¯·æ±‚é™æµï¼Œé™ä½äº†å¹¶å‘ä¸Šé™ï¼›<br />çº¿ç¨‹éš”ç¦»ï¼Œé™ä½äº†å¯ç”¨èµ„æºæ•°é‡ï¼›<br />æœåŠ¡ç†”æ–­ï¼Œé™ä½äº†æœåŠ¡çš„å®Œæ•´åº¦ï¼Œéƒ¨åˆ†æœåŠ¡å˜çš„ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ã€‚<br />å› æ­¤è¿™äº›æ–¹æ¡ˆéƒ½å±äºæœåŠ¡é™çº§çš„æ–¹æ¡ˆã€‚ä½†é€šè¿‡è¿™äº›æ–¹æ¡ˆï¼ŒæœåŠ¡çš„å¥å£®æ€§å¾—åˆ°äº†æå‡ï¼Œ</p><h3 id="è¯·æ±‚é™æµ"><a class="markdownIt-Anchor" href="#è¯·æ±‚é™æµ"></a> è¯·æ±‚é™æµ</h3><p>æœåŠ¡æ•…éšœæœ€é‡è¦åŸå› ï¼Œå°±æ˜¯å¹¶å‘å¤ªé«˜ï¼å½“ç„¶ï¼Œæ¥å£çš„å¹¶å‘ä¸æ˜¯ä¸€ç›´å¾ˆé«˜ï¼Œè€Œæ˜¯çªå‘çš„ã€‚å› æ­¤è¯·æ±‚é™æµï¼Œå°±æ˜¯<strong>é™åˆ¶æˆ–æ§åˆ¶æ¥å£è®¿é—®çš„å¹¶å‘æµé‡</strong>ï¼Œé¿å…æœåŠ¡å› æµé‡æ¿€å¢è€Œå‡ºç°æ•…éšœã€‚</p><p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾æœåŠ¡ä¿æŠ¤æ¡†æ¶ï¼Œç›®å‰å·²ç»åŠ å…¥SpringCloudAlibabaä¸­ã€‚</p><p>ä¸‹é¢åˆ©ç”¨Sentinelå®ç°è¯·æ±‚é™æµï¼š</p><ul><li>åœ¨ç›¸åº”çš„å¾®æœåŠ¡ä¸­å¼•å…¥Sentinelä¾èµ–</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ Sentinelé…ç½®</li></ul><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">spring:<br>  cloud:<br>    sentinel:<br>      transport:<br>        dashboard: localhost:<span class="hljs-number">8090</span><br>      http-<span class="hljs-keyword">method</span>-<span class="hljs-title function_">specify</span>: <span class="hljs-keyword">true</span> # å¼€å¯è¯·æ±‚æ–¹å¼å‰ç¼€<br></code></pre></td></tr></table></figure><ul><li>æ‰“å¼€Sentinelæ§åˆ¶å°ï¼ŒæŸ¥çœ‹ç°‡ç‚¹é“¾è·¯ï¼ŒæŸ¥çœ‹æ¯ä¸ªæ¥å£çš„è®¿é—®æƒ…å†µã€‚</li><li>åœ¨ç°‡ç‚¹é“¾è·¯ä¸­ç‚¹å‡»æµæ§ï¼Œè®¾ç½®æµæ§è§„åˆ™ï¼Œå¦‚QPSä¸º10</li></ul><h3 id="çº¿ç¨‹éš”ç¦»"><a class="markdownIt-Anchor" href="#çº¿ç¨‹éš”ç¦»"></a> çº¿ç¨‹éš”ç¦»</h3><p>é™æµå¯ä»¥é™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œå°½é‡å‡å°‘å› å¹¶å‘æµé‡å¼•èµ·çš„æœåŠ¡æ•…éšœçš„æ¦‚ç‡ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨é¿å…æœåŠ¡æ•…éšœã€‚ä¸€æ—¦æŸä¸ªæœåŠ¡å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¿…é¡»éš”ç¦»å¯¹è¿™ä¸ªæœåŠ¡çš„è°ƒç”¨ï¼Œé¿å…å‘ç”Ÿé›ªå´©ã€‚</p><p>æ¯”å¦‚ï¼Œè´­ç‰©è½¦æœåŠ¡è¿è¡Œä¸­å¯èƒ½æ¶‰åŠåˆ°å•†å“æœåŠ¡ï¼Œå•†å“ä¼šå ç”¨ä¸€äº›çº¿ç¨‹èµ„æºï¼Œä¸ºé˜²æ­¢å•†å“æœåŠ¡æ•…éšœå¯¼è‡´æ•´ä¸ªè´­ç‰©è½¦æœåŠ¡ä¸å¯ç”¨ï¼Œå¯ä»¥é™åˆ¶å•†å“æœåŠ¡å¯ç”¨çš„çº¿ç¨‹èµ„æºã€‚</p><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">sentinel:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ</span><br></code></pre></td></tr></table></figure><ul><li>æ‰“å¼€Sentinelæ§åˆ¶å°,æ‰“å¼€ç°‡ç‚¹é“¾è·¯ï¼Œç‚¹å‡»æµæ§</li><li>è®¾ç½®è®¾ç½®å¹¶å‘çº¿ç¨‹æ•°ï¼Œå¦‚10</li></ul><h3 id="æœåŠ¡ç†”æ–­"><a class="markdownIt-Anchor" href="#æœåŠ¡ç†”æ–­"></a> æœåŠ¡ç†”æ–­</h3><p>çº¿ç¨‹éš”ç¦»é™å®šäº†çº¿ç¨‹æ•°ï¼Œå¯¼è‡´æ¥å£ååèƒ½åŠ›æœ‰é™ï¼Œä¼šäº§ç”Ÿä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li>è¶…å‡ºçš„QPSä¸Šé™çš„è¯·æ±‚å°±åªèƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œå¯¼è‡´è´­ç‰©è½¦çš„æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œå³ä¾¿æ²¡æœ‰æŸ¥è¯¢åˆ°æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œè´­ç‰©è½¦ä¹Ÿåº”è¯¥å±•ç¤ºç»™ç”¨æˆ·ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚ä¹Ÿå°±æ˜¯ç»™æŸ¥è¯¢å¤±è´¥è®¾ç½®ä¸€ä¸ªé™çº§å¤„ç†é€»è¾‘ã€‚</li><li>ç”±äºæŸ¥è¯¢å•†å“çš„å»¶è¿Ÿè¾ƒé«˜ï¼ˆæ¨¡æ‹Ÿçš„500msï¼‰ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦çš„å“åº”æ—¶é—´ä¹Ÿå˜çš„å¾ˆé•¿ã€‚è¿™æ ·ä¸ä»…æ‹–æ…¢äº†è´­ç‰©è½¦æœåŠ¡ï¼Œæ¶ˆè€—äº†è´­ç‰©è½¦æœåŠ¡çš„æ›´å¤šèµ„æºï¼Œè€Œä¸”ç”¨æˆ·ä½“éªŒä¹Ÿå¾ˆå·®ã€‚å¯¹äºå•†å“æœåŠ¡è¿™ç§ä¸å¤ªå¥åº·çš„æ¥å£ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥åœæ­¢è°ƒç”¨ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ï¼Œé¿å…å½±å“åˆ°å½“å‰æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯å°†å•†å“æŸ¥è¯¢æ¥å£ç†”æ–­ã€‚</li></ol><p>ç¼–å†™é™çº§é€»è¾‘ä¸€èˆ¬é€šè¿‡FallbackFactoryå®ç°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å®šä¹‰é™çº§å¤„ç†ç±»ï¼Œå®ç°FallbackFactoryæ¥å£</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemClientFallbackFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FallbackFactory</span>&lt;<span class="hljs-title class_">ItemClient</span>&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ItemClient</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">Throwable cause</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItemClient</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">ItemDTO</span>&gt; <span class="hljs-title function_">queryItemByIds</span>(<span class="hljs-params">Collection&lt;Long&gt; ids</span>) &#123;<br>                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;æŸ¥è¯¢å•†å“å¤±è´¥&quot;</span>, cause);<br>                <span class="hljs-keyword">return</span> <span class="hljs-title class_">CollUtils</span>.<span class="hljs-title function_">emptyList</span>();<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">deductStock</span>(<span class="hljs-params">List&lt;OrderDetailDTO&gt; items</span>) &#123;<br>                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;æ‰£å‡åº“å­˜å¤±è´¥&quot;</span>, cause);<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(cause);<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">restoreStock</span>(<span class="hljs-params">List&lt;OrderDetailDTO&gt; items</span>) &#123;<br>                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;æ¢å¤åº“å­˜å¤±è´¥&quot;</span>, cause);<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(cause);<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨é…ç½®ç±»ä¸­å®šä¹‰Bean</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ItemClientFallbackFactory</span> <span class="hljs-title function_">itemClientFallbackFactory</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItemClientFallbackFactory</span>();<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>ItemClientæ¥å£ä¸­ä½¿ç”¨ItemClientFallbackFactory</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@FeignClient</span>(value = <span class="hljs-string">&quot;item-service&quot;</span>,fallbackFactory = ItemClientFallbackFactory.class)<br>public interface ItemClient &#123;<br>    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">&quot;/items&quot;</span>)<br>    List&lt;ItemDTO&gt; <span class="hljs-built_in">queryItemByIds</span>(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">&quot;ids&quot;</span>) Collection&lt;Long&gt; ids);<br>    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">&quot;/items/stock/deduct&quot;</span>)<br>    void <span class="hljs-built_in">deductStock</span>(<span class="hljs-variable">@RequestBody</span> List&lt;OrderDetailDTO&gt; items);<br>    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">&quot;/items/stock/restore&quot;</span>)<br>    void <span class="hljs-built_in">restoreStock</span>(<span class="hljs-variable">@RequestBody</span> List&lt;OrderDetailDTO&gt; items);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–å†™å®Œé™çº§é€»è¾‘åï¼Œè¿˜éœ€è¦åœ¨Sentinelæ§åˆ¶å°ä¸­é…ç½®ç†”æ–­è§„åˆ™</p><p>Sentinelä¸­çš„æ–­è·¯å™¨ä¸ä»…å¯ä»¥ç»Ÿè®¡æŸä¸ªæ¥å£çš„<strong>æ…¢è¯·æ±‚æ¯”ä¾‹</strong>ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡<strong>å¼‚å¸¸è¯·æ±‚</strong>æ¯”ä¾‹ã€‚<br />å½“è¿™äº›æ¯”ä¾‹è¶…å‡ºé˜ˆå€¼æ—¶ï¼Œå°±ä¼šç†”æ–­è¯¥æ¥å£ï¼Œå³æ‹¦æˆªè®¿é—®è¯¥æ¥å£çš„ä¸€åˆ‡è¯·æ±‚ï¼Œé™çº§å¤„ç†ï¼›å½“è¯¥æ¥å£æ¢å¤æ­£å¸¸æ—¶ï¼Œå†æ”¾è¡Œå¯¹äºè¯¥æ¥å£çš„è¯·æ±‚ã€‚<br />å…·ä½“è§„åˆ™åœ¨æ§åˆ¶å°ä¸­ç°‡ç‚¹é“¾è·¯ä¸­è¿›è¡Œè®¾ç½®å³å¯ã€‚</p><h3 id="ä¸åŒçº¿ç¨‹éš”ç¦»æ–¹æ¡ˆå¯¹æ¯”"><a class="markdownIt-Anchor" href="#ä¸åŒçº¿ç¨‹éš”ç¦»æ–¹æ¡ˆå¯¹æ¯”"></a> ä¸åŒçº¿ç¨‹éš”ç¦»æ–¹æ¡ˆå¯¹æ¯”</h3><p>çº¿ç¨‹éš”ç¦»æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><ul><li>çº¿ç¨‹æ± éš”ç¦»ï¼ˆHystixé»˜è®¤é‡‡ç”¨ï¼‰</li><li>ä¿¡å·é‡éš”ç¦»ï¼ˆSentinelé»˜è®¤é‡‡ç”¨ï¼‰</li></ul><p>çº¿ç¨‹æ± éš”ç¦»ä¼šä¸ºæ¯ä¸€ä¸ªè¢«éš”ç¦»çš„ä¸šåŠ¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä»è€Œç¡®ä¿æ¯ä¸ªä¸šåŠ¡åˆ†é…çš„çº¿ç¨‹èµ„æºä¸ä¼šè¶…å‡ºä¸Šé™ï¼Œå…·æœ‰æ›´å¥½çš„éš”ç¦»æ€§ã€‚ç¼ºç‚¹æ˜¯å¸¦æ¥äº†é¢å¤–çš„CPUå¼€é”€ï¼Œæ€§èƒ½ä¸€èˆ¬<br />ä¿¡å·é‡éš”ç¦»åˆ™æ˜¯é€šè¿‡ä¿¡å·é‡æ¥é™åˆ¶å¹¶å‘æ•°ï¼Œæ€§èƒ½æ›´å¥½ä½†æ˜¯éš”ç¦»æ€§ä¸å¦‚çº¿ç¨‹æ± éš”ç¦»ã€‚</p><h3 id="è®¡æ•°ç®—æ³•"><a class="markdownIt-Anchor" href="#è®¡æ•°ç®—æ³•"></a> è®¡æ•°ç®—æ³•</h3><p>åœ¨ç†”æ–­åŠŸèƒ½ä¸­ï¼Œéœ€è¦ç»Ÿè®¡å¼‚å¸¸è¯·æ±‚æˆ–æ…¢è¯·æ±‚æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯è®¡æ•°ã€‚åœ¨é™æµçš„æ—¶å€™ï¼Œè¦ç»Ÿè®¡æ¯ç§’é’Ÿçš„QPSï¼ŒåŒæ ·æ˜¯è®¡æ•°ã€‚å¯è§è®¡æ•°ç®—æ³•åœ¨ç†”æ–­é™æµä¸­çš„åº”ç”¨éå¸¸å¤šã€‚å¸¸è§çš„è®¡æ•°ç®—æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å›ºå®šçª—å£è®¡æ•°ç®—æ³•ï¼šå°†æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šçš„æ—¶é—´çª—å£ï¼Œæ¯”å¦‚1sï¼Œå¦‚æœæŸä¸ªçª—å£å†…çš„è¯·æ±‚è¶…è¿‡äº†é˜ˆå€¼åˆ™æ‹’ç»æ–°åŠ å…¥çš„è¯·æ±‚ã€‚ä½†æ˜¯åªèƒ½ç»Ÿè®¡å½“å‰æŸ1ä¸ªæ—¶é—´çª—çš„è¯·æ±‚æ•°é‡æ˜¯å¦åˆ°è¾¾é˜ˆå€¼ï¼Œæ— æ³•ç»“åˆå‰åçš„æ—¶é—´çª—çš„æ•°æ®åšç»¼åˆç»Ÿè®¡ã€‚<br />æ‰€ä»¥ä»ç„¶å­˜åœ¨è¶…è¿‡QPSçš„æƒ…å†µã€‚</li><li>æ»‘åŠ¨çª—å£è®¡æ•°ï¼šæ»‘åŠ¨æ—¶é—´çª—å£ç®—æ³•ä¸­åªåŒ…å«1ä¸ªå›ºå®šè·¨åº¦çš„çª—å£ï¼Œä½†çª—å£æ˜¯å¯ç§»åŠ¨çš„ï¼Œçª—å£å†…å¯åˆ†ä¸ºå¤šä¸ªåŒºé—´ï¼Œæ¯ä¸ªåŒºé—´çš„è¯·æ±‚éƒ½ä¼šè¢«ç»Ÿè®¡ï¼Œåˆ’åˆ†çš„åŒºé—´è¶Šå¤šï¼Œè¿™ç§ç»Ÿè®¡å°±è¶Šå‡†ç¡®ï¼ˆå¦åˆ™å®¹æ˜“è¶…QPSï¼‰ã€‚<br />çª—å£ä¼šéšç€å½“å‰è¯·æ±‚æ‰€åœ¨æ—¶é—´currentTimeç§»åŠ¨ï¼Œçª—å£èŒƒå›´ä»currentTime-Intervalæ—¶åˆ»ä¹‹åçš„ç¬¬ä¸€ä¸ªæ—¶åŒºå¼€å§‹ï¼Œåˆ°currentTimeæ‰€åœ¨æ—¶åŒºç»“æŸã€‚</li><li>ä»¤ç‰Œæ¡¶ç®—æ³•ï¼š-ä»¥å›ºå®šçš„é€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œå­˜å…¥ä»¤ç‰Œæ¡¶ä¸­ï¼Œå¦‚æœä»¤ç‰Œæ¡¶æ»¡äº†ä»¥åï¼Œå¤šä½™ä»¤ç‰Œä¸¢å¼ƒã€‚è¯·æ±‚è¿›å…¥åï¼Œå¿…é¡»å…ˆå°è¯•ä»æ¡¶ä¸­è·å–ä»¤ç‰Œï¼Œè·å–åˆ°ä»¤ç‰Œåæ‰å¯ä»¥è¢«å¤„ç†ã€‚å¦‚æœä»¤ç‰Œæ¡¶ä¸­æ²¡æœ‰ä»¤ç‰Œï¼Œåˆ™è¯·æ±‚ç­‰å¾…æˆ–ä¸¢å¼ƒ<br />æ³¨æ„ï¼Œä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•æ—¶ï¼Œå°½é‡ä¸è¦å°†ä»¤ç‰Œä¸Šé™è®¾å®šåˆ°æœåŠ¡èƒ½æ‰¿å—çš„QPSä¸Šé™ã€‚è€Œæ˜¯é¢„ç•™ä¸€å®šçš„æ³¢åŠ¨ç©ºé—´ï¼Œè¿™æ ·æ‰èƒ½åº”å¯¹çªå‘æµé‡ã€‚</li><li>æ¼æ¡¶ç®—æ³•ï¼šè¯·æ±‚åˆ°è¾¾åä¸æ˜¯ç›´æ¥å¤„ç†ï¼Œè€Œæ˜¯å…ˆæ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ã€‚è€Œåä»¥å›ºå®šçš„é€Ÿç‡ä»é˜Ÿåˆ—ä¸­å–å‡ºå¹¶å¤„ç†è¯·æ±‚ã€‚ä¹‹æ‰€ä»¥å«æ¼æ¡¶ç®—æ³•ï¼Œå°±æ˜¯æŠŠè¯·æ±‚çœ‹åšæ°´ï¼Œé˜Ÿåˆ—çœ‹åšæ˜¯ä¸€ä¸ªæ¼äº†çš„æ¡¶ã€‚å¦‚æœæ¡¶æ»¡äº†åˆ™ä¼šæ‹’ç»æ–°æ¥çš„è¯·æ±‚ã€‚<br />å¯¹çªå‘æµé‡çš„åº”å¯¹èƒ½åŠ›æ›´å¥½ä¸€äº›ã€‚</li></ul><h2 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a class="markdownIt-Anchor" href="#åˆ†å¸ƒå¼äº‹åŠ¡"></a> åˆ†å¸ƒå¼äº‹åŠ¡</h2><p>æ•´ä¸ªä¸šåŠ¡ä¸­ï¼Œå„ä¸ªæœ¬åœ°äº‹åŠ¡æ˜¯æœ‰å…³è”çš„ã€‚å› æ­¤æ¯ä¸ªå¾®æœåŠ¡çš„æœ¬åœ°äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºåˆ†æ”¯äº‹åŠ¡ã€‚å¤šä¸ªæœ‰å…³è”çš„åˆ†æ”¯äº‹åŠ¡ä¸€èµ·å°±ç»„æˆäº†å…¨å±€äº‹åŠ¡ã€‚æˆ‘ä»¬å¿…é¡»ä¿è¯æ•´ä¸ªå…¨å±€äº‹åŠ¡åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ã€‚</p><p>æ¯”å¦‚å•†å“æ·»åŠ è´­ç‰©è½¦åï¼Œè¿›å…¥ä¸‹å•ç•Œé¢ï¼Œæ­¤æ—¶å¦‚æœå°†åå°æ•°æ®åº“ä¸­å¯¹åº”å•†å“åº“å­˜æ”¹ä¸º0ï¼Œé‚£ä¹ˆç‚¹å‡»ä¸‹å•ä¼šä¸‹å•å¤±è´¥ï¼Œä½†æ˜¯å›åˆ°è´­ç‰©è½¦ç•Œé¢ï¼Œå‘ç°è´­ç‰©è½¦ä¸­çš„å•†å“å·²ç»æ¸…é™¤äº†ï¼Œè¯´æ˜è´­ç‰©æœåŠ¡å¯¹å…¶ä»–æœåŠ¡çš„å¼‚å¸¸æ²¡æœ‰æ„ŸçŸ¥ï¼Œæ²¡æœ‰ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><p>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡ä¸€èˆ¬é‡‡ç”¨Seataï¼ŒSeataä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„è§’è‰²ï¼š</p><ul><li>TC (Transaction Coordinator) - äº‹åŠ¡åè°ƒè€…ï¼šç»´æŠ¤å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œåè°ƒå…¨å±€äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li><li>TM (Transaction Manager) - äº‹åŠ¡ç®¡ç†å™¨ï¼šå®šä¹‰å…¨å±€äº‹åŠ¡çš„èŒƒå›´ã€å¼€å§‹å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚</li><li>RM (Resource Manager) - èµ„æºç®¡ç†å™¨ï¼šç®¡ç†åˆ†æ”¯äº‹åŠ¡ï¼Œä¸TCäº¤è°ˆä»¥æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œå¹¶é©±åŠ¨åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li></ul><p>å…¶ä¸­ï¼ŒTMå’ŒRMå¯ä»¥ç†è§£ä¸ºSeataçš„å®¢æˆ·ç«¯éƒ¨åˆ†ï¼Œå¼•å…¥åˆ°å‚ä¸äº‹åŠ¡çš„å¾®æœåŠ¡ä¾èµ–ä¸­å³å¯ã€‚å°†æ¥TMå’ŒRMå°±ä¼šååŠ©å¾®æœåŠ¡ï¼Œå®ç°æœ¬åœ°åˆ†æ”¯äº‹åŠ¡ä¸TCä¹‹é—´äº¤äº’ï¼Œå®ç°äº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚<br />è€ŒTCæœåŠ¡åˆ™æ˜¯äº‹åŠ¡åè°ƒä¸­å¿ƒï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œéœ€è¦å•ç‹¬éƒ¨ç½²ã€‚</p><h3 id="seataçš„åŸºæœ¬ç”¨æ³•"><a class="markdownIt-Anchor" href="#seataçš„åŸºæœ¬ç”¨æ³•"></a> Seataçš„åŸºæœ¬ç”¨æ³•</h3><ul><li>é¦–å…ˆï¼Œåœ¨æœåŠ¡ç«¯éƒ¨ç½²TC</li><li>åœ¨å¾®æœåŠ¡ä¸­å¼•å…¥Seataçš„ä¾èµ–ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®Seata</li><li>seataçš„å®¢æˆ·ç«¯åœ¨è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™éœ€è¦è®°å½•ä¸€äº›ä¸­é—´æ•°æ®ï¼Œå› æ­¤è¿˜éœ€è¦å‡†å¤‡æ•°æ®è¡¨ã€‚</li><li>åœ¨å¯¹åº”serviceimplçš„æ–¹æ³•ä¸Šæ·»åŠ @GlobalTransactionalæ³¨è§£ï¼Œ@GlobalTransactionalæ³¨è§£å°±æ˜¯åœ¨æ ‡è®°äº‹åŠ¡çš„èµ·ç‚¹ï¼Œå°†æ¥TMå°±ä¼šåŸºäºè¿™ä¸ªæ–¹æ³•åˆ¤æ–­å…¨å±€äº‹åŠ¡èŒƒå›´ï¼Œåˆå§‹åŒ–å…¨å±€äº‹åŠ¡ã€‚</li></ul><p>æ­¤å¤–Seataæ”¯æŒå››ç§ä¸åŒçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>XA</li><li>TCC</li><li>AT</li><li>SAGA</li></ul><p>ä¸‹é¢ä¸»è¦ä»‹ç»XAå’ŒATä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="xaæ¨¡å¼"><a class="markdownIt-Anchor" href="#xaæ¨¡å¼"></a> XAæ¨¡å¼</h3><p>Aæ˜¯ä¸€ç§è§„èŒƒï¼Œç›®å‰ä¸»æµæ•°æ®åº“éƒ½å®ç°äº†è¿™ç§è§„èŒƒï¼Œå®ç°çš„åŸç†éƒ½æ˜¯åŸºäºä¸¤é˜¶æ®µæäº¤ã€‚</p><p>ä¸€é˜¶æ®µï¼š</p><ul><li>TMå‘èµ·å¹¶æ³¨å†Œå…¨å±€äº‹åŠ¡åˆ°TC</li><li>TMè°ƒç”¨åˆ†æ”¯äº‹åŠ¡</li><li>RMæ³¨å†Œåˆ†æ”¯äº‹åŠ¡åˆ°TC</li><li>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œsqlå<strong>ä¸æäº¤</strong>ï¼Œè€Œæ˜¯æŠ¥å‘Šäº‹åŠ¡æ‰§è¡ŒçŠ¶æ€ç»™TCï¼Œç»§ç»­æŒæœ‰æ•°æ®åº“é”</li></ul><p>äºŒé˜¶æ®µï¼š</p><ul><li>TCåŸºäºä¸€é˜¶æ®µçš„æŠ¥å‘Šæ£€æŸ¥äº‹åŠ¡æ‰§è¡ŒçŠ¶æ€</li><li>å¦‚æœä¸€é˜¶æ®µéƒ½æˆåŠŸï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…ï¼Œæäº¤äº‹åŠ¡</li><li>å¦‚æœä¸€é˜¶æ®µä»»æ„ä¸€ä¸ªå‚ä¸è€…å¤±è´¥ï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›æ»šäº‹åŠ¡</li></ul><p><img src="/img/seata1.png" alt="" /></p><p>XAæ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œæ»¡è¶³ACIDåŸåˆ™</li><li>å¸¸ç”¨æ•°æ®åº“éƒ½æ”¯æŒï¼Œå®ç°ç®€å•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥</li></ul><p>XAæ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å› ä¸ºä¸€é˜¶æ®µéœ€è¦é”å®šæ•°æ®åº“èµ„æºï¼Œç­‰å¾…äºŒé˜¶æ®µç»“æŸæ‰é‡Šæ”¾ï¼Œ<strong>æ€§èƒ½è¾ƒå·®</strong></li><li>ä¾èµ–å…³ç³»å‹æ•°æ®åº“å®ç°äº‹åŠ¡ï¼Œæœ‰çš„æ•°æ®åº“ä¸æ”¯æŒXA</li></ul><p>ä½¿ç”¨XAæ¨¡å¼å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®XAæ¨¡å¼ï¼Œç„¶åæ·»åŠ @GlobalTransactionalæ³¨è§£å³å¯(ä¸Šé¢å·²ç»ç”¨è¿‡)ï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">seata</span>:<br>  <span class="hljs-class"><span class="hljs-keyword">data</span>-source-proxy-mode: <span class="hljs-type">XA</span></span><br></code></pre></td></tr></table></figure><h3 id="atæ¨¡å¼"><a class="markdownIt-Anchor" href="#atæ¨¡å¼"></a> ATæ¨¡å¼</h3><p>ATæ¨¡å¼æ˜¯Seataçš„é»˜è®¤æ¨¡å¼ï¼ŒATæ¨¡å¼æ˜¯åŸºäºæ•°æ®åº“çš„undo-logï¼ˆæ•°æ®å¿«ç…§ï¼‰å®ç°çš„ï¼Œæµç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="/img/seata2.png" alt="" /></p><p>ä¸XAæ¨¡å¼ä¸åŒçš„æ˜¯ï¼ŒATæ¨¡å¼<strong>æ‰§è¡Œsqlä¹‹å‰è¦ä¿å­˜æ•°æ®å¿«ç…§</strong>ï¼Œç„¶åæ‰§è¡Œsqlï¼Œæ‰§è¡Œå®Œ<strong>ç«‹åˆ»æäº¤</strong>ï¼Œå¹¶å‘TCæŠ¥å‘ŠçŠ¶æ€<br />TCæ£€æŸ¥å„äº‹åŠ¡çŠ¶æ€ï¼Œå¦‚æœæ‰€æœ‰äº‹åŠ¡éƒ½æˆåŠŸåˆ™åˆ é™¤undo-logï¼Œå¦‚æœæœ‰äººå¤±è´¥åˆ™æ ¹æ®undo-logå›æ»šäº‹åŠ¡</p><p>ç®€è¿°ATæ¨¡å¼ä¸XAæ¨¡å¼æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>XAæ¨¡å¼ä¸€é˜¶æ®µä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æºï¼›ATæ¨¡å¼ä¸€é˜¶æ®µç›´æ¥æäº¤ï¼Œä¸é”å®šèµ„æºã€‚</li><li>XAæ¨¡å¼ä¾èµ–æ•°æ®åº“æœºåˆ¶å®ç°å›æ»šï¼›ATæ¨¡å¼åˆ©ç”¨æ•°æ®å¿«ç…§å®ç°æ•°æ®å›æ»šã€‚</li><li>XAæ¨¡å¼å¼ºä¸€è‡´ï¼›ATæ¨¡å¼æœ€ç»ˆä¸€è‡´ï¼ˆä¼šæœ‰çŸ­æš‚ä¸ä¸€è‡´ï¼‰ã€‚</li></ul><h3 id="atæ¨¡å¼çš„è„å†™é—®é¢˜"><a class="markdownIt-Anchor" href="#atæ¨¡å¼çš„è„å†™é—®é¢˜"></a> ATæ¨¡å¼çš„è„å†™é—®é¢˜</h3><p>å¦‚æœç°åœ¨æœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼Œäº‹åŠ¡1ä¿å­˜å¿«ç…§åï¼ˆæ­¤æ—¶iä¸º100ï¼‰ï¼Œä¿®æ”¹i=90ï¼Œç„¶åæäº¤å¹¶é‡Šæ”¾DBé”ï¼Œæ­¤æ—¶äº‹åŠ¡2è·å–äº†DBé”ï¼Œä¿®æ”¹i=80ï¼Œæäº¤å¹¶é‡Šæ”¾DBé”ï¼Œæ­¤æ—¶äº‹åŠ¡1å›æ»šï¼Œi=100ï¼Œé‚£ä¹ˆäº‹åŠ¡2ä¼š<strong>ä¸¢å¤±æ›´æ–°</strong>ï¼Œä¹Ÿå°±æ˜¯è„å†™ã€‚ç®€å•æ¥è¯´å°±æ˜¯äº‹åŠ¡1å›æ»šå‰ï¼Œæ•°æ®è¢«äº‹åŠ¡2ä¿®æ”¹ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š<br />é€šè¿‡<strong>å…¨å±€é”</strong>ï¼Œåœ¨æäº¤äº‹åŠ¡é‡Šæ”¾DBé”å‰ï¼Œå…ˆè·å–å…¨å±€é”ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿæäº¤ï¼Œè¿™æ ·å°±èƒ½é¿å…è„å†™é—®é¢˜ã€‚</p><h3 id="tccæ¨¡å¼"><a class="markdownIt-Anchor" href="#tccæ¨¡å¼"></a> TCCæ¨¡å¼</h3><p>TCCæ¨¡å¼æ˜¯Try-Confirm-Cancelçš„ç¼©å†™ï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>Tryï¼šæ£€æŸ¥å’Œé¢„ç•™èµ„æº</li><li>Confirmï¼šæ‰§è¡Œä¸šåŠ¡å’Œæäº¤</li><li>Cancelï¼šé‡Šæ”¾é¢„ç•™èµ„æº</li></ul><p>äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»šï¼š<br />å‡å¦‚ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¸­åŒ…å«ä¸¤ä¸ªåˆ†æ”¯äº‹åŠ¡ï¼Œtryé˜¶æ®µï¼Œä¸€ä¸ªåˆ†æ”¯æˆåŠŸæ‰§è¡Œï¼Œå¦ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡é˜»å¡ï¼Œå¦‚æœé˜»å¡æ—¶é—´å¤ªé•¿ï¼Œå¯èƒ½å¯¼è‡´å…¨å±€äº‹åŠ¡è¶…æ—¶è€Œè§¦å‘äºŒé˜¶æ®µçš„cancelæ“ä½œã€‚ä¸¤ä¸ªåˆ†æ”¯äº‹åŠ¡éƒ½ä¼šæ‰§è¡Œcancelæ“ä½œã€‚</p><p>ç©ºå›æ»šï¼šå…¶ä¸­ä¸€ä¸ªåˆ†æ”¯æ˜¯æœªæ‰§è¡Œtryæ“ä½œçš„ï¼Œç›´æ¥æ‰§è¡Œäº†cancelæ“ä½œï¼Œåè€Œä¼šå¯¼è‡´æ•°æ®é”™è¯¯ã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå°½ç®¡cancelæ–¹æ³•è¦æ‰§è¡Œï¼Œä½†å…¶ä¸­ä¸èƒ½åšä»»ä½•å›æ»šæ“ä½œï¼Œè¿™å°±æ˜¯ç©ºå›æ»šã€‚<br />äº‹åŠ¡æ‚¬æŒ‚ï¼šå¯¹äºç©ºå›æ»šçš„åˆ†æ”¯äº‹åŠ¡ï¼Œå°†æ¥tryæ–¹æ³•é˜»å¡ç»“æŸä¾ç„¶ä¼šæ‰§è¡Œã€‚ä½†æ˜¯æ•´ä¸ªå…¨å±€äº‹åŠ¡å…¶å®å·²ç»ç»“æŸäº†ï¼Œå› æ­¤æ°¸è¿œä¸ä¼šå†æœ‰confirmæˆ–cancelï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œäº†ä¸€åŠï¼Œå¤„äºæ‚¬æŒ‚çŠ¶æ€ï¼Œè¿™å°±æ˜¯ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜ã€‚</p><p>ä»¥ä¸Šé—®é¢˜éƒ½éœ€è¦æˆ‘ä»¬åœ¨ç¼–å†™tryã€cancelæ–¹æ³•æ—¶å¤„ç†ã€‚</p><p>TCCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½å¥½</li><li>ç›¸æ¯”ATæ¨¡å‹ï¼Œæ— éœ€ç”Ÿæˆå¿«ç…§ï¼Œæ— éœ€ä½¿ç”¨å…¨å±€é”ï¼Œæ€§èƒ½æœ€å¼º</li><li>ä¸ä¾èµ–æ•°æ®åº“äº‹åŠ¡ï¼Œè€Œæ˜¯ä¾èµ–è¡¥å¿æ“ä½œï¼Œå¯ä»¥ç”¨äºéäº‹åŠ¡å‹æ•°æ®åº“</li></ul><p>TCCçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>æœ‰ä»£ç ä¾µå…¥ï¼Œéœ€è¦äººä¸ºç¼–å†™tryã€Confirmå’ŒCancelæ¥å£ï¼Œå¤ªéº»çƒ¦</li><li>è½¯çŠ¶æ€ï¼Œäº‹åŠ¡æ˜¯æœ€ç»ˆä¸€è‡´</li><li>éœ€è¦è€ƒè™‘Confirmå’ŒCancelçš„å¤±è´¥æƒ…å†µï¼Œåšå¥½å¹‚ç­‰å¤„ç†ã€äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»šå¤„ç†</li></ul><h2 id="æ¶ˆæ¯é˜Ÿåˆ—-mq"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—-mq"></a> æ¶ˆæ¯é˜Ÿåˆ— (MQ)</h2><h3 id="åŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#åŸºç¡€çŸ¥è¯†"></a> åŸºç¡€çŸ¥è¯†</h3><p>å¼•å…¥MQä¹‹å‰ï¼Œå¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨éƒ½æ˜¯åŸºäºOpenFeignçš„åŒæ­¥è°ƒç”¨ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>æ‹“å±•æ€§å·®ï¼šæ¯æ¬¡æœ‰æ–°çš„éœ€æ±‚ï¼Œç°æœ‰æ”¯ä»˜é€»è¾‘éƒ½è¦è·Ÿç€å˜åŒ–ï¼Œæ‹“å±•æ€§ä¸å¥½</li><li>æ€§èƒ½ä¸‹é™ï¼šè°ƒç”¨è€…éœ€è¦ç­‰å¾…æœåŠ¡æä¾›è€…æ‰§è¡Œå®Œè¿”å›ç»“æœåï¼Œæ‰èƒ½ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è¿œç¨‹è°ƒç”¨ï¼Œè°ƒç”¨è€…éƒ½æ˜¯é˜»å¡ç­‰å¾…çŠ¶æ€ã€‚æœ€ç»ˆæ•´ä¸ªä¸šåŠ¡çš„å“åº”æ—¶é•¿å°±æ˜¯æ¯æ¬¡è¿œç¨‹è°ƒç”¨çš„æ‰§è¡Œæ—¶é•¿ä¹‹å’Œ</li><li>çº§è”å¤±è´¥ï¼šç”±äºæ˜¯åŸºäºOpenFeignè°ƒç”¨äº¤æ˜“æœåŠ¡ã€é€šçŸ¥æœåŠ¡ã€‚å½“äº¤æ˜“æœåŠ¡ã€é€šçŸ¥æœåŠ¡å‡ºç°æ•…éšœæ—¶ï¼Œæ•´ä¸ªäº‹åŠ¡éƒ½ä¼šå›æ»šï¼Œäº¤æ˜“å¤±è´¥ã€‚</li></ul><p>å¼‚æ­¥è°ƒç”¨æ–¹å¼å…¶å®å°±æ˜¯åŸºäºæ¶ˆæ¯é€šçŸ¥çš„æ–¹å¼ï¼Œä¸€èˆ¬åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li>æ¶ˆæ¯å‘é€è€…ï¼šæŠ•é€’æ¶ˆæ¯çš„äººï¼Œå°±æ˜¯åŸæ¥çš„è°ƒç”¨æ–¹</li><li>æ¶ˆæ¯Brokerï¼šç®¡ç†ã€æš‚å­˜ã€è½¬å‘æ¶ˆæ¯ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆå¾®ä¿¡æœåŠ¡å™¨</li><li>æ¶ˆæ¯æ¥æ”¶è€…ï¼šæ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯çš„äººï¼Œå°±æ˜¯åŸæ¥çš„æœåŠ¡æä¾›æ–¹</li></ul><p>å¼‚æ­¥è°ƒç”¨çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p><ul><li>è€¦åˆåº¦æ›´ä½</li><li>æ€§èƒ½æ›´å¥½</li><li>ä¸šåŠ¡æ‹“å±•æ€§å¼º</li><li>æ•…éšœéš”ç¦»ï¼Œé¿å…çº§è”å¤±è´¥</li></ul><p>ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>å®Œå…¨ä¾èµ–äºBrokerçš„å¯é æ€§ã€å®‰å…¨æ€§å’Œæ€§èƒ½</li><li>æ¶æ„å¤æ‚ï¼ŒåæœŸç»´æŠ¤å’Œè°ƒè¯•éº»çƒ¦</li></ul><p>å‡ ç§å¸¸è§çš„MQå¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">RabbitMQ</th><th style="text-align:center">ActiveMQ</th><th style="text-align:center">RocketMQ</th><th style="text-align:center">Kafka</th></tr></thead><tbody><tr><td style="text-align:center">å…¬å¸/ç¤¾åŒº</td><td style="text-align:center">Rabbit</td><td style="text-align:center">Apache</td><td style="text-align:center">é˜¿é‡Œ</td><td style="text-align:center">Apache</td></tr><tr><td style="text-align:center">å¼€å‘è¯­è¨€</td><td style="text-align:center">Erlang</td><td style="text-align:center">Java</td><td style="text-align:center">Java</td><td style="text-align:center">Scala&amp;Java</td></tr><tr><td style="text-align:center">åè®®æ”¯æŒ</td><td style="text-align:center">AMQP, XMPP, SMTP, STOMP</td><td style="text-align:center">OpenWire,STOMP, REST,XMPP,AMQP</td><td style="text-align:center">è‡ªå®šä¹‰åè®®</td><td style="text-align:center">è‡ªå®šä¹‰åè®®</td></tr><tr><td style="text-align:center">å¯ç”¨æ€§</td><td style="text-align:center">é«˜</td><td style="text-align:center">ä¸€èˆ¬</td><td style="text-align:center">é«˜</td><td style="text-align:center">é«˜</td></tr><tr><td style="text-align:center">å•æœºååé‡</td><td style="text-align:center">ä¸€èˆ¬</td><td style="text-align:center">å·®</td><td style="text-align:center">é«˜</td><td style="text-align:center">éå¸¸é«˜</td></tr><tr><td style="text-align:center">æ¶ˆæ¯å»¶è¿Ÿ</td><td style="text-align:center">å¾®ç§’çº§</td><td style="text-align:center">æ¯«ç§’çº§</td><td style="text-align:center">æ¯«ç§’çº§</td><td style="text-align:center">æ¯«ç§’ä»¥å†…</td></tr><tr><td style="text-align:center">æ¶ˆæ¯å¯é æ€§</td><td style="text-align:center">é«˜</td><td style="text-align:center">ä¸€èˆ¬</td><td style="text-align:center">é«˜</td><td style="text-align:center">ä¸€èˆ¬</td></tr></tbody></table><h3 id="rabbitmqåŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#rabbitmqåŸºç¡€çŸ¥è¯†"></a> RabbitMQåŸºç¡€çŸ¥è¯†</h3><p>RabbitMQä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªè§’è‰²ï¼š</p><ul><li>publisherï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯å‘é€æ¶ˆæ¯çš„ä¸€æ–¹</li><li>consumerï¼šæ¶ˆè´¹è€…ï¼Œä¹Ÿå°±æ˜¯æ¶ˆè´¹æ¶ˆæ¯çš„ä¸€æ–¹</li><li>queueï¼šé˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯ã€‚ç”Ÿäº§è€…æŠ•é€’çš„æ¶ˆæ¯ä¼šæš‚å­˜åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…æ¶ˆè´¹è€…å¤„ç†</li><li>exchangeï¼šäº¤æ¢æœºï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±ã€‚ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ç”±äº¤æ¢æœºå†³å®šæŠ•é€’åˆ°å“ªä¸ªé˜Ÿåˆ—ã€‚</li><li>virtual hostï¼šè™šæ‹Ÿä¸»æœºï¼Œèµ·åˆ°æ•°æ®éš”ç¦»çš„ä½œç”¨ã€‚æ¯ä¸ªè™šæ‹Ÿä¸»æœºç›¸äº’ç‹¬ç«‹ï¼Œæœ‰å„è‡ªçš„exchangeã€queue</li></ul><p>ä¸Šè¿°å†…å®¹éƒ½å¯ä»¥åœ¨RabbitMQçš„ç®¡ç†æ§åˆ¶å°æ¥ç®¡ç†</p><p>WorkQueuesæ¨¡å‹ï¼š<br />Work queuesï¼Œä»»åŠ¡æ¨¡å‹ã€‚ç®€å•æ¥è¯´å°±æ˜¯è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚RabbitMQ<strong>é»˜è®¤ä¼šå°†æ¶ˆæ¯å¹³å‡åˆ†å‘</strong>ç»™æ¯ä¸ªæ¶ˆè´¹è€…ã€‚<br />è¿™æ ·çš„é—®é¢˜æ˜¯å¤„ç†æ¶ˆæ¯å¿«çš„æ¶ˆè´¹è€…ä¼šå¿«é€Ÿæ¶ˆè´¹å®Œåˆ†é…ç»™è‡ªå·±æ‰€æœ‰æ¶ˆæ¯ï¼Œç„¶åå¤„äºç©ºé—²çŠ¶æ€ï¼Œè€Œå¤„ç†æ…¢çš„æ¶ˆè´¹è€…åˆ™ä¼šæ¶ˆè´¹çš„å¾ˆæ…¢ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®prefetchæ¥é™åˆ¶æ¯ä¸ªæ¶ˆè´¹è€…ä¸€æ¬¡æ€§è·å–çš„æ¶ˆæ¯æ•°é‡ã€‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">  rabbitmq:</span><br><span class="hljs-symbol">    listener:</span><br><span class="hljs-symbol">      simple:</span><br><span class="hljs-symbol">        prefetch:</span> <span class="hljs-number">1</span> <span class="hljs-meta"># æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·è®¾ç½®ä»¥åï¼Œå¤„ç†å¿«çš„æ¶ˆè´¹è€…ä¼šå¤„ç†æ›´å¤šæ¶ˆæ¯ï¼ˆèƒ½è€…å¤šåŠ³ï¼‰ï¼Œæ€»çš„å¤„ç†æ—¶é—´ä¼šå¤§å¤§ç¼©çŸ­ã€‚</p><h3 id="rabbitmqäº¤æ¢æœºç±»å‹"><a class="markdownIt-Anchor" href="#rabbitmqäº¤æ¢æœºç±»å‹"></a> RabbitMQäº¤æ¢æœºç±»å‹</h3><p>äº¤æ¢æœºçš„ä½œç”¨æ˜¯ï¼š</p><ul><li>æ¥æ”¶publisherå‘é€çš„æ¶ˆæ¯</li><li>å°†æ¶ˆæ¯æŒ‰ç…§è§„åˆ™è·¯ç”±åˆ°ä¸ä¹‹ç»‘å®šçš„é˜Ÿåˆ—</li><li>ä¸èƒ½ç¼“å­˜æ¶ˆæ¯ï¼Œè·¯ç”±å¤±è´¥ï¼Œæ¶ˆæ¯ä¸¢å¤±</li><li>FanoutExchangeçš„ä¼šå°†æ¶ˆæ¯è·¯ç”±åˆ°æ¯ä¸ªç»‘å®šçš„é˜Ÿåˆ—</li></ul><p>RabbitMQçš„äº¤æ¢æœºç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—ã€‚</li><li>Directï¼šè®¢é˜…ï¼ŒåŸºäºRoutingKeyï¼ˆè·¯ç”±keyï¼‰å‘é€ç»™è®¢é˜…äº†æ¶ˆæ¯çš„é˜Ÿåˆ—</li><li>Topicï¼šé€šé…ç¬¦è®¢é˜…ï¼Œä¸Directç±»ä¼¼ï¼Œåªä¸è¿‡RoutingKeyå¯ä»¥ä½¿ç”¨é€šé…ç¬¦</li><li>Headersï¼šå¤´åŒ¹é…ï¼ŒåŸºäºMQçš„æ¶ˆæ¯å¤´åŒ¹é…ï¼Œç”¨çš„è¾ƒå°‘ã€‚</li></ul><p>Directäº¤æ¢æœºå’ŒTopicäº¤æ¢æœºçš„åŒºåˆ«ï¼š</p><ul><li>Directäº¤æ¢æœºæ˜¯<strong>å®Œå…¨åŒ¹é…</strong>ï¼Œåªæœ‰RoutingKeyå’ŒBindingKeyå®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šå°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—ï¼Œå¯ä»¥æ˜¯å¤šä¸ªå•è¯ã€æ•°å­—ã€ç¬¦å·ç­‰ç»„æˆçš„å­—ç¬¦ä¸²ã€‚</li><li>Topicäº¤æ¢æœºæ¥æ”¶çš„æ¶ˆæ¯RoutingKeyå¿…é¡»æ˜¯å¤šä¸ªå•è¯ï¼Œä»¥ <code>.</code> åˆ†å‰²</li><li>Topicäº¤æ¢æœºä¸é˜Ÿåˆ—ç»‘å®šæ—¶çš„bindingKeyå¯ä»¥æŒ‡å®šé€šé…ç¬¦ï¼Œ<code>#</code>ï¼šä»£è¡¨0ä¸ªæˆ–å¤šä¸ªè¯ï¼Œ<code>*</code>ï¼šä»£è¡¨1ä¸ªè¯</li></ul><p>BindingKeyå’ŒRoutingKeyçš„åŒºåˆ«ï¼š</p><ul><li>RoutingKeyæ˜¯<strong>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶æŒ‡å®š</strong>çš„ï¼Œç”¨äºäº¤æ¢æœºå°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—</li><li>BindingKeyæ˜¯<strong>æ¶ˆè´¹è€…ç»‘å®šé˜Ÿåˆ—æ—¶æŒ‡å®š</strong>çš„ï¼Œç”¨äºäº¤æ¢æœºå°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—</li></ul><h3 id="å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº"><a class="markdownIt-Anchor" href="#å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº"></a> å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº</h3><p>å£°æ˜çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œé€šè¿‡Beanå’Œé€šè¿‡æ³¨è§£ã€‚<br />é€šè¿‡Beançš„æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼Œç„¶åç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœºã€‚<br />ä¸‹é¢ç»™å‡ºé€šè¿‡æ³¨è§£å£°æ˜çš„ä¾‹å­ï¼š<br />ä½¿ç”¨å‰éœ€è¦å¼•å…¥<code>spring-boot-starter-amqp</code>ä¾èµ–</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PayStatusListener</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IOrderService orderService;<br><br>    <span class="hljs-meta">@RabbitListener(bindings = @QueueBinding(</span><br><span class="hljs-meta">            value=@Queue(name = <span class="hljs-string">&quot;trade.pay.success.queue&quot;</span>,durable = <span class="hljs-string">&quot;true&quot;</span>),</span><br><span class="hljs-meta">            exchange = @Exchange(name = <span class="hljs-string">&quot;pay.direct&quot;</span>,type = ExchangeTypes.DIRECT),</span><br><span class="hljs-meta">            key = &#123;<span class="hljs-string">&quot;pay.success&quot;</span>&#125;</span><br><span class="hljs-meta">    ))</span><br>    <span class="hljs-keyword">public</span> void listenPaySuccess(<span class="hljs-built_in">Long</span> orderId) &#123;<br>        <span class="hljs-comment">//æŸ¥è¯¢è®¢å•</span><br>        Order order = orderService.getById(orderId);<br>        <span class="hljs-comment">//åˆ¤æ–­è®¢å•çŠ¶æ€,ä»…å¤„ç†æœªæ”¯ä»˜è®¢å•</span><br>        <span class="hljs-keyword">if</span>(order==<span class="hljs-literal">null</span> || order.getStatus()!=<span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//æ ‡è®°è®¢å•æ”¯ä»˜æˆåŠŸ</span><br>        orderService.markOrderPaySuccess(orderId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘é€æ¶ˆæ¯ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">rabbitTemplate</span><span class="hljs-selector-class">.convertAndSend</span>(<span class="hljs-string">&quot;pay.direct&quot;</span>, <span class="hljs-string">&quot;pay.success&quot;</span>, po.<span class="hljs-built_in">getBizOrderNo</span>());<br></code></pre></td></tr></table></figure><h3 id="æ¶ˆæ¯è½¬æ¢å™¨"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯è½¬æ¢å™¨"></a> æ¶ˆæ¯è½¬æ¢å™¨</h3><p>SpringAMQPæ•°æ®ä¼ è¾“æ—¶ï¼Œä¼šæŠŠå‘é€çš„æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚å‘é€ç»™MQï¼Œæ¥æ”¶æ¶ˆæ¯çš„æ—¶å€™ï¼Œè¿˜ä¼šæŠŠå­—èŠ‚ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚<br />é»˜è®¤æƒ…å†µä¸‹Springé‡‡ç”¨çš„åºåˆ—åŒ–æ–¹å¼æ˜¯JDKåºåˆ—åŒ–ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒJDKåºåˆ—åŒ–å­˜åœ¨ä¸‹åˆ—é—®é¢˜ï¼š</p><ul><li>æ•°æ®ä½“ç§¯è¿‡å¤§</li><li>æœ‰å®‰å…¨æ¼æ´</li><li>å¯è¯»æ€§å·®</li></ul><p>æˆ‘ä»¬å¸Œæœ›æ¶ˆæ¯ä½“çš„ä½“ç§¯æ›´å°ã€å¯è¯»æ€§æ›´é«˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨JSONæ–¹å¼æ¥åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åœ¨publisherå’Œconsumerä¸­å¼•å…¥ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨publisherå’Œconsumerçš„å¯åŠ¨ç±»ä¸­æ·»åŠ Bean</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> MessageConverter <span class="hljs-title function_">messageConverter</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// 1.å®šä¹‰æ¶ˆæ¯è½¬æ¢å™¨</span><br>    <span class="hljs-type">Jackson2JsonMessageConverter</span> <span class="hljs-variable">jjmc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jackson2JsonMessageConverter</span>();<br>    <span class="hljs-comment">// 2.é…ç½®è‡ªåŠ¨åˆ›å»ºæ¶ˆæ¯idï¼Œç”¨äºè¯†åˆ«ä¸åŒæ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸šåŠ¡ä¸­åŸºäºIDåˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤æ¶ˆæ¯</span><br>    jjmc.setCreateMessageIds(<span class="hljs-literal">true</span>);<br>    <span class="hljs-keyword">return</span> jjmc;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‘é€è€…å¯é æ€§"><a class="markdownIt-Anchor" href="#å‘é€è€…å¯é æ€§"></a> å‘é€è€…å¯é æ€§</h3><p>RabbitMQæä¾›äº†å‘é€è€…é‡è¿æœºåˆ¶å’Œå‘é€è€…ç¡®è®¤æœºåˆ¶æ¥ä¿è¯å‘é€è€…çš„å¯é æ€§ã€‚</p><p>å‘é€è€…é‡è¿ï¼šå½“RabbitTemplateä¸MQè¿æ¥è¶…æ—¶åï¼Œå¤šæ¬¡é‡è¯•ï¼Œå¯é€šè¿‡é…ç½®yamlæ–‡ä»¶å¯ç”¨ã€‚é‡è¯•æœºåˆ¶æ˜¯é˜»å¡å¼çš„é‡è¯•ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šæ¬¡é‡è¯•ç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œå½“å‰çº¿ç¨‹æ˜¯è¢«é˜»å¡çš„ã€‚<br />å¦‚æœå¯¹äºä¸šåŠ¡æ€§èƒ½æœ‰è¦æ±‚ï¼Œå»ºè®®ç¦ç”¨é‡è¯•æœºåˆ¶ã€‚</p><p>å‘é€è€…ç¡®è®¤ï¼šç”Ÿäº§è€…æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼ŒåŒ…æ‹¬Publisher Confirmå’ŒPublisher Returnä¸¤ç§ã€‚åœ¨å¼€å¯ç¡®è®¤æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œå½“ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ç»™MQåï¼ŒMQä¼šæ ¹æ®æ¶ˆæ¯å¤„ç†çš„æƒ…å†µè¿”å›ä¸åŒçš„å›æ‰§ã€‚åŒ…æ‹¬ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li>æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºï¼Œä½†æ˜¯è·¯ç”±å¤±è´¥ï¼Œä¼šé€šè¿‡Publisher Returnæœºåˆ¶è¿”å›ACKï¼Œå‘ŠçŸ¥æŠ•é€’æˆåŠŸ</li><li>ä¸´æ—¶æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºï¼Œå¹¶è·¯ç”±åˆ°é˜Ÿåˆ—ï¼Œè¿”å›ACKï¼Œå‘ŠçŸ¥æŠ•é€’æˆåŠŸ</li><li>æŒä¹…æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºï¼Œå¹¶è·¯ç”±åˆ°é˜Ÿåˆ—å®ŒæˆæŒä¹…åŒ–ï¼Œè¿”å›ACKï¼Œå‘ŠçŸ¥æŠ•é€’æˆåŠŸ</li><li>å…¶ä»–æƒ…å†µéƒ½ä¼šè¿”å›NACKï¼Œå‘ŠçŸ¥æŠ•é€’å¤±è´¥</li></ul><p>æ€»ç»“å°±æ˜¯åªè¦æ¶ˆæ¯åˆ°äº†äº¤æ¢æœºï¼Œå°±ä¼šè¿”å›ACKï¼Œä½†æ˜¯ä¸ä¸€å®šä¼šæŠ•é€’åˆ°é˜Ÿåˆ—ä¸­ã€‚<br />å¼€å¯ç”Ÿäº§è€…ç¡®è®¤æ¯”è¾ƒæ¶ˆè€—MQæ€§èƒ½ï¼Œä¸€èˆ¬ä¸å»ºè®®å¼€å¯ã€‚</p><h3 id="mqå¯é æ€§"><a class="markdownIt-Anchor" href="#mqå¯é æ€§"></a> MQå¯é æ€§</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMQæ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœMQå®•æœºï¼Œæ¶ˆæ¯ä¼šä¸¢å¤±ã€‚ä¸ºäº†ä¿è¯å¯é æ€§ï¼Œä¸»è¦é€šè¿‡æ•°æ®æŒä¹…åŒ–å’Œæ‡’é˜Ÿåˆ—æ¥å®ç°ã€‚</p><p>æ•°æ®æŒä¹…åŒ–åŒ…æ‹¬ï¼š</p><ul><li>äº¤æ¢æœºæŒä¹…åŒ–ï¼Œé»˜è®¤å°±æ˜¯æŒä¹…åŒ–çš„</li><li>é˜Ÿåˆ—æŒä¹…åŒ–ï¼Œä¹Ÿæ˜¯é»˜è®¤æŒä¹…åŒ–çš„</li><li>æ¶ˆæ¯æŒä¹…åŒ–ï¼Œéœ€è¦åœ¨å‘é€æ¶ˆæ¯æ—¶è®¾ç½®</li></ul><p>æ‡’é˜Ÿåˆ—ï¼š<br />åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQä¼šå°†æ¥æ”¶åˆ°çš„ä¿¡æ¯ä¿å­˜åœ¨å†…å­˜ä¸­ä»¥é™ä½æ¶ˆæ¯æ”¶å‘çš„å»¶è¿Ÿã€‚ä½†åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¼è‡´æ¶ˆæ¯ç§¯å‹ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æ¶ˆè´¹è€…å®•æœºæˆ–å‡ºç°ç½‘ç»œæ•…éšœ</li><li>æ¶ˆæ¯å‘é€é‡æ¿€å¢ï¼Œè¶…è¿‡äº†æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦</li><li>æ¶ˆè´¹è€…å¤„ç†ä¸šåŠ¡å‘ç”Ÿé˜»å¡</li></ul><p>ä¸€æ—¦å‡ºç°æ¶ˆæ¯å †ç§¯é—®é¢˜ï¼ŒRabbitMQçš„å†…å­˜å ç”¨å°±ä¼šè¶Šæ¥è¶Šé«˜ï¼Œç›´åˆ°è§¦å‘å†…å­˜é¢„è­¦ä¸Šé™ã€‚æ­¤æ—¶RabbitMQä¼šå°†å†…å­˜æ¶ˆæ¯åˆ·åˆ°ç£ç›˜ä¸Šï¼Œè¿™ä¸ªè¡Œä¸ºç§°ä¸ºPageOut.<br />PageOutä¼šè€—è´¹ä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ä¼šé˜»å¡é˜Ÿåˆ—è¿›ç¨‹ã€‚å› æ­¤åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­RabbitMQä¸ä¼šå†å¤„ç†æ–°çš„æ¶ˆæ¯ï¼Œç”Ÿäº§è€…çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡ã€‚</p><p>æ‡’é˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li>æ¥æ”¶åˆ°æ¶ˆæ¯åç›´æ¥å­˜å…¥ç£ç›˜è€Œéå†…å­˜</li><li>æ¶ˆè´¹è€…è¦æ¶ˆè´¹æ¶ˆæ¯æ—¶æ‰ä¼šä»ç£ç›˜ä¸­è¯»å–å¹¶åŠ è½½åˆ°å†…å­˜ï¼ˆä¹Ÿå°±æ˜¯æ‡’åŠ è½½ï¼‰</li><li>æ”¯æŒæ•°ç™¾ä¸‡æ¡çš„æ¶ˆæ¯å­˜å‚¨</li></ul><p>RabbitMQ 3.12ç‰ˆæœ¬ä¹‹åï¼ŒLazyQueueå·²ç»æˆä¸ºæ‰€æœ‰é˜Ÿåˆ—çš„é»˜è®¤æ ¼å¼ã€‚ä¹‹å‰ç‰ˆæœ¬å£°æ˜LazyQueueï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RabbitListener</span>(queuesToDeclare = <span class="hljs-variable">@Queue</span>(<br>        name = <span class="hljs-string">&quot;lazy.queue&quot;</span>,<br>        durable = <span class="hljs-string">&quot;true&quot;</span>,<br>        arguments = <span class="hljs-variable">@Argument</span>(name = <span class="hljs-string">&quot;x-queue-mode&quot;</span>, value = <span class="hljs-string">&quot;lazy&quot;</span>)<br>))<br>public void <span class="hljs-built_in">listenLazyQueue</span>(String msg)&#123;<br>    <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">&quot;æ¥æ”¶åˆ° lazy.queueçš„æ¶ˆæ¯ï¼š&#123;&#125;&quot;</span>, msg);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¶ˆè´¹è€…å¯é æ€§"><a class="markdownIt-Anchor" href="#æ¶ˆè´¹è€…å¯é æ€§"></a> æ¶ˆè´¹è€…å¯é æ€§</h3><p>æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶ï¼š<br />ä¸ºäº†ç¡®è®¤æ¶ˆè´¹è€…æ˜¯å¦æˆåŠŸå¤„ç†æ¶ˆæ¯ï¼ŒRabbitMQæä¾›äº†æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶ã€‚å½“æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯ç»“æŸåï¼Œåº”è¯¥å‘RabbitMQå‘é€ä¸€ä¸ªå›æ‰§ï¼Œå‘ŠçŸ¥RabbitMQè‡ªå·±æ¶ˆæ¯å¤„ç†çŠ¶æ€ã€‚å›æ‰§æœ‰ä¸‰ç§å¯é€‰å€¼ï¼š</p><ul><li>ackï¼šæˆåŠŸå¤„ç†æ¶ˆæ¯ï¼ŒRabbitMQä»é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥æ¶ˆæ¯</li><li>nackï¼šæ¶ˆæ¯å¤„ç†å¤±è´¥ï¼ŒRabbitMQéœ€è¦å†æ¬¡æŠ•é€’æ¶ˆæ¯</li><li>rejectï¼šæ¶ˆæ¯å¤„ç†å¤±è´¥å¹¶æ‹’ç»è¯¥æ¶ˆæ¯ï¼ŒRabbitMQä»é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥æ¶ˆæ¯</li></ul><p>ä¸€èˆ¬rejectæ–¹å¼ç”¨çš„è¾ƒå°‘ï¼Œé™¤éæ˜¯æ¶ˆæ¯æ ¼å¼æœ‰é—®é¢˜</p><p>SpringAMQPå¸®æˆ‘ä»¬å®ç°äº†æ¶ˆæ¯ç¡®è®¤ã€‚å¹¶å…è®¸æˆ‘ä»¬é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®ACKå¤„ç†æ–¹å¼ï¼Œæœ‰ä¸‰ç§æ¨¡å¼ï¼š</p><ul><li>noneï¼šä¸å¤„ç†ã€‚å³æ¶ˆæ¯æŠ•é€’ç»™æ¶ˆè´¹è€…åç«‹åˆ»ackï¼Œæ¶ˆæ¯ä¼šç«‹åˆ»ä»MQåˆ é™¤ã€‚éå¸¸ä¸å®‰å…¨ï¼Œä¸å»ºè®®ä½¿ç”¨</li><li>manualï¼šæ‰‹åŠ¨æ¨¡å¼ã€‚éœ€è¦è‡ªå·±åœ¨ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨apiï¼Œå‘é€ackæˆ–rejectï¼Œå­˜åœ¨ä¸šåŠ¡å…¥ä¾µï¼Œä½†æ›´çµæ´»</li><li>autoï¼šè‡ªåŠ¨æ¨¡å¼ã€‚SpringAMQPåˆ©ç”¨AOPå¯¹æˆ‘ä»¬çš„æ¶ˆæ¯å¤„ç†é€»è¾‘åšäº†ç¯ç»•å¢å¼ºï¼Œå½“ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œæ—¶åˆ™è‡ªåŠ¨è¿”å›ack. å½“ä¸šåŠ¡å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ ¹æ®å¼‚å¸¸ç±»å‹åˆ¤æ–­è¿”å›ä¸åŒç»“æœï¼š<ul><li>å¦‚æœæ˜¯ä¸šåŠ¡å¼‚å¸¸ï¼Œä¼šè‡ªåŠ¨è¿”å›nackï¼›</li><li>å¦‚æœæ˜¯æ¶ˆæ¯å¤„ç†æˆ–æ ¡éªŒå¼‚å¸¸ï¼Œè‡ªåŠ¨è¿”å›reject;</li></ul></li></ul><p>å¤±è´¥é‡è¯•æœºåˆ¶ï¼š<br />å½“æ¶ˆè´¹è€…å‡ºç°å¼‚å¸¸åï¼Œæ¶ˆæ¯ä¼šä¸æ–­requeueï¼ˆé‡å…¥é˜Ÿï¼‰åˆ°é˜Ÿåˆ—ï¼Œå†é‡æ–°å‘é€ç»™æ¶ˆè´¹è€…ã€‚å¦‚æœæ¶ˆè´¹è€…å†æ¬¡æ‰§è¡Œä¾ç„¶å‡ºé”™ï¼Œæ¶ˆæ¯ä¼šå†æ¬¡requeueåˆ°é˜Ÿåˆ—ï¼Œå†æ¬¡æŠ•é€’ï¼Œç›´åˆ°æ¶ˆæ¯å¤„ç†æˆåŠŸä¸ºæ­¢ã€‚<br />æç«¯æƒ…å†µå°±æ˜¯æ¶ˆè´¹è€…ä¸€ç›´æ— æ³•æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆæ¶ˆæ¯requeueå°±ä¼šæ— é™å¾ªç¯ï¼Œå¯¼è‡´mqçš„æ¶ˆæ¯å¤„ç†é£™å‡ï¼Œå¸¦æ¥ä¸å¿…è¦çš„å‹åŠ›</p><p>åº”å¯¹ä¸Šè¿°æƒ…å†µSpringåˆæä¾›äº†æ¶ˆè´¹è€…å¤±è´¥é‡è¯•æœºåˆ¶ï¼šåœ¨æ¶ˆè´¹è€…å‡ºç°å¼‚å¸¸æ—¶åˆ©ç”¨<strong>æœ¬åœ°é‡è¯•</strong>ï¼Œè€Œä¸æ˜¯æ— é™åˆ¶çš„requeueåˆ°mqé˜Ÿåˆ—ã€‚ä¾‹å¦‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>    <span class="hljs-attr">listener:</span><br>      <span class="hljs-attr">simple:</span><br>        <span class="hljs-attr">retry:</span><br>          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯æ¶ˆè´¹è€…å¤±è´¥é‡è¯•</span><br>          <span class="hljs-attr">initial-interval:</span> <span class="hljs-string">1000ms</span> <span class="hljs-comment"># åˆè¯†çš„å¤±è´¥ç­‰å¾…æ—¶é•¿ä¸º1ç§’</span><br>          <span class="hljs-attr">multiplier:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># å¤±è´¥çš„ç­‰å¾…æ—¶é•¿å€æ•°ï¼Œä¸‹æ¬¡ç­‰å¾…æ—¶é•¿ = multiplier * last-interval</span><br>          <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># æœ€å¤§é‡è¯•æ¬¡æ•°</span><br>          <span class="hljs-attr">stateless:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># trueæ— çŠ¶æ€ï¼›falseæœ‰çŠ¶æ€ã€‚å¦‚æœä¸šåŠ¡ä¸­åŒ…å«äº‹åŠ¡ï¼Œè¿™é‡Œæ”¹ä¸ºfalse</span><br></code></pre></td></tr></table></figure><ul><li>å¼€å¯æœ¬åœ°é‡è¯•æ—¶ï¼Œæ¶ˆæ¯å¤„ç†è¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šrequeueåˆ°é˜Ÿåˆ—ï¼Œè€Œæ˜¯åœ¨æ¶ˆè´¹è€…æœ¬åœ°é‡è¯•</li><li>é‡è¯•è¾¾åˆ°æœ€å¤§æ¬¡æ•°åï¼ŒSpringä¼šè¿”å›rejectï¼Œæ¶ˆæ¯ä¼šè¢«ä¸¢å¼ƒ<br />å¯¹äºå¤±è´¥çš„å¤„ç†ä¸€å…±æœ‰ä¸‰ç§ç­–ç•¥ï¼š</li><li>RejectAndDontRequeueRecovererï¼šé‡è¯•è€—å°½åï¼Œç›´æ¥rejectï¼Œä¸¢å¼ƒæ¶ˆæ¯ã€‚é»˜è®¤å°±æ˜¯è¿™ç§æ–¹å¼</li><li>ImmediateRequeueMessageRecovererï¼šé‡è¯•è€—å°½åï¼Œè¿”å›nackï¼Œæ¶ˆæ¯é‡æ–°å…¥é˜Ÿ</li><li>RepublishMessageRecovererï¼šé‡è¯•è€—å°½åï¼Œå°†å¤±è´¥æ¶ˆæ¯æŠ•é€’åˆ°æŒ‡å®šçš„äº¤æ¢æœº</li></ul><p>ä¸šåŠ¡å¹‚ç­‰æ€§ï¼š<br />æ˜¯æŒ‡åŒä¸€ä¸ªä¸šåŠ¡ï¼Œæ‰§è¡Œä¸€æ¬¡æˆ–å¤šæ¬¡å¯¹ä¸šåŠ¡çŠ¶æ€çš„å½±å“æ˜¯ä¸€è‡´çš„ã€‚<br />æ•°æ®çš„æ›´æ–°å¾€å¾€ä¸æ˜¯å¹‚ç­‰çš„ï¼Œå¦‚æœé‡å¤æ‰§è¡Œå¯èƒ½é€ æˆä¸ä¸€æ ·çš„åæœã€‚æ¯”å¦‚ï¼š</p><ul><li>å–æ¶ˆè®¢å•ï¼Œæ¢å¤åº“å­˜çš„ä¸šåŠ¡ã€‚å¦‚æœå¤šæ¬¡æ¢å¤å°±ä¼šå‡ºç°åº“å­˜é‡å¤å¢åŠ çš„æƒ…å†µ</li><li>é€€æ¬¾ä¸šåŠ¡ã€‚é‡å¤é€€æ¬¾å¯¹å•†å®¶è€Œè¨€ä¼šæœ‰ç»æµæŸå¤±ã€‚<br />ä¿è¯æ¶ˆæ¯å¤„ç†çš„å¹‚ç­‰æ€§ï¼Œè¿™é‡Œç»™å‡ºä¸¤ç§æ–¹æ¡ˆï¼š</li><li>å”¯ä¸€æ¶ˆæ¯ID<ol><li>æ¯ä¸€æ¡æ¶ˆæ¯éƒ½ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„idï¼Œä¸æ¶ˆæ¯ä¸€èµ·æŠ•é€’ç»™æ¶ˆè´¹è€…ã€‚</li><li>æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯åå¤„ç†è‡ªå·±çš„ä¸šåŠ¡ï¼Œä¸šåŠ¡å¤„ç†æˆåŠŸåå°†æ¶ˆæ¯IDä¿å­˜åˆ°æ•°æ®åº“</li><li>å¦‚æœä¸‹æ¬¡åˆæ”¶åˆ°ç›¸åŒæ¶ˆæ¯ï¼Œå»æ•°æ®åº“æŸ¥è¯¢åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä¸ºé‡å¤æ¶ˆæ¯æ”¾å¼ƒå¤„ç†ã€‚</li><li>å®ç°æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨Jacksonçš„æ¶ˆæ¯è½¬æ¢å™¨é‡Œå³å¯å®ç°ï¼Œè§ä¸Šé¢æ¶ˆæ¯è½¬æ¢å™¨éƒ¨åˆ†</li></ol></li><li>ä¸šåŠ¡çŠ¶æ€åˆ¤æ–­ï¼ŒåŸºäºä¸šåŠ¡æœ¬èº«çš„é€»è¾‘æˆ–çŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤çš„è¯·æ±‚æˆ–æ¶ˆæ¯</li></ul><h3 id="å»¶è¿Ÿæ¶ˆæ¯"><a class="markdownIt-Anchor" href="#å»¶è¿Ÿæ¶ˆæ¯"></a> å»¶è¿Ÿæ¶ˆæ¯</h3><p>å‘é€è€…å‘é€æ¶ˆæ¯åï¼Œæ¶ˆè´¹è€…åœ¨æŒ‡å®šæ—¶é—´åæ‰æ”¶åˆ°æ¶ˆæ¯ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä»¥ä¸‹æç«¯æƒ…å†µï¼Œç”¨æˆ·ä¸‹å•åï¼Œè¿›è¡Œæ”¯ä»˜æœåŠ¡ï¼Œå¦‚æœæ”¯ä»˜æœåŠ¡å‡ºç°é—®é¢˜ï¼Œå¯¼è‡´æ”¯ä»˜æœåŠ¡æ— æ³•é€šçŸ¥äº¤æ˜“æœåŠ¡ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œé‚£ä¹ˆæ”¯ä»˜æœåŠ¡æµæ°´ä¸ºå·²æ”¯ä»˜ï¼Œäº¤æ˜“æœåŠ¡çš„è®¢å•ä¸ºæœªæ”¯ä»˜ï¼ŒçŠ¶æ€ä¸ä¸€è‡´ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰æ”¯ä»˜ï¼Œå°±ä¼šä¸€ç›´å æœ‰åº“å­˜èµ„æºï¼Œå¯¼è‡´å…¶ä»–å®¢æˆ·æ— æ³•æ­£å¸¸äº¤æ˜“</p><p>è§£å†³æ–¹æ³•æ˜¯ï¼Œè®¾ç½®å»¶è¿Ÿæ¶ˆæ¯ï¼Œä¸€æ®µæ—¶é—´åé€šçŸ¥äº¤æ˜“æœåŠ¡æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€å³å¯ã€‚</p><p>å®ç°å»¶è¿Ÿæ¶ˆæ¯æœ‰æ­»ä¿¡äº¤æ¢æœºå’Œå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶ä¸¤ç§ã€‚</p><p>æ­»ä¿¡äº¤æ¢æœºï¼š<br />å½“ä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æ»¡è¶³ä¸‹åˆ—æƒ…å†µä¹‹ä¸€æ—¶ï¼Œå¯ä»¥æˆä¸ºæ­»ä¿¡ï¼ˆdead letterï¼‰ï¼š</p><ul><li>æ¶ˆè´¹è€…ä½¿ç”¨basic.rejectæˆ– basic.nackå£°æ˜æ¶ˆè´¹å¤±è´¥ï¼Œå¹¶ä¸”æ¶ˆæ¯çš„requeueå‚æ•°è®¾ç½®ä¸ºfalse</li><li>æ¶ˆæ¯æ˜¯ä¸€ä¸ªè¿‡æœŸæ¶ˆæ¯ï¼Œè¶…æ—¶æ— äººæ¶ˆè´¹</li><li>è¦æŠ•é€’çš„é˜Ÿåˆ—æ¶ˆæ¯æ»¡äº†ï¼Œæ— æ³•æŠ•é€’<br />å¦‚æœä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å·²ç»æˆä¸ºæ­»ä¿¡ï¼Œå¹¶ä¸”è¿™ä¸ªé˜Ÿåˆ—é€šè¿‡dead-letter-exchangeå±æ€§æŒ‡å®šäº†ä¸€ä¸ªäº¤æ¢æœºï¼Œé‚£ä¹ˆé˜Ÿåˆ—ä¸­çš„æ­»ä¿¡å°±ä¼šæŠ•é€’åˆ°è¿™ä¸ªäº¤æ¢æœºä¸­ï¼Œè€Œè¿™ä¸ªäº¤æ¢æœºå°±ç§°ä¸ºæ­»ä¿¡äº¤æ¢æœºï¼ˆDead Letter Exchangeï¼‰ã€‚</li></ul><p>å»¶è¿Ÿæ¶ˆæ¯æ’ä»¶ï¼š<br />æ­»ä¿¡äº¤æ¢æœºçš„å®ç°è¾ƒç¹çï¼ŒDelayExchangeæ’ä»¶åˆ™æ›´ä¸ºä¾¿æ·ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å®‰è£…é…ç½®æ’ä»¶</li><li>å£°æ˜å»¶è¿Ÿäº¤æ¢æœºï¼ŒåŸºäºæ³¨è§£</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RabbitListener</span>(bindings = <span class="hljs-variable">@QueueBinding</span>(<br>            value = <span class="hljs-variable">@Queue</span>(name = MQConstants.DELAY_EXCHANGE_NAME),<br>            exchange = <span class="hljs-variable">@Exchange</span>(name = MQConstants.DELAY_EXCHANGE_NAME, delayed = <span class="hljs-string">&quot;true&quot;</span>),<br>            key = &#123;MQConstants.DELAY_ORDER_KEY&#125;<br>    ))<br></code></pre></td></tr></table></figure><ul><li>å‘é€å»¶è¿Ÿæ¶ˆæ¯</li></ul><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sas">rabbitTemplate.convertAndSend(<br>                MQConstants.DELAY_EXCHANGE_NAME,<br>                MQConstants.DELAY_ORDER_KEY,<br>                <span class="hljs-keyword">order</span>.getId(),<br>                <span class="hljs-keyword">message</span> -&gt; &#123;<br>                    <span class="hljs-keyword">message</span>.getMessageProperties().setDelay(1000 <span class="hljs-comment">* 10 * 1);</span><br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">message</span>;<br>                &#125;<br>        );<br></code></pre></td></tr></table></figure><p>ç»¼ä¸Šï¼Œæ”¯ä»˜æœåŠ¡ä¸äº¤æ˜“æœåŠ¡ä¹‹é—´çš„è®¢å•çŠ¶æ€ä¸€è‡´æ€§æ˜¯å¦‚ä½•ä¿è¯çš„ï¼Ÿ</p><ul><li>é¦–å…ˆï¼Œæ”¯ä»˜æœåŠ¡ä¼šæ­£åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸä»¥ååˆ©ç”¨MQæ¶ˆæ¯é€šçŸ¥äº¤æ˜“æœåŠ¡ï¼Œå®Œæˆè®¢å•çŠ¶æ€åŒæ­¥ã€‚</li><li>å…¶æ¬¡ï¼Œä¸ºäº†ä¿è¯MQæ¶ˆæ¯çš„å¯é æ€§ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶ã€æ¶ˆè´¹è€…ç¡®è®¤ã€æ¶ˆè´¹è€…å¤±è´¥é‡è¯•ç­‰ç­–ç•¥ï¼Œç¡®ä¿æ¶ˆæ¯æŠ•é€’çš„å¯é æ€§</li><li>æœ€åï¼Œæˆ‘ä»¬è¿˜åœ¨äº¤æ˜“æœåŠ¡è®¾ç½®äº†å®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸæŸ¥è¯¢è®¢å•æ”¯ä»˜çŠ¶æ€ã€‚è¿™æ ·å³ä¾¿MQé€šçŸ¥å¤±è´¥ï¼Œè¿˜å¯ä»¥åˆ©ç”¨å»¶è¿Ÿä»»åŠ¡ä½œä¸ºå…œåº•æ–¹æ¡ˆï¼Œç¡®ä¿è®¢å•æ”¯ä»˜çŠ¶æ€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><h2 id="elasticsearch"><a class="markdownIt-Anchor" href="#elasticsearch"></a> ElasticSearch</h2><h3 id="åŸºç¡€çŸ¥è¯†-2"><a class="markdownIt-Anchor" href="#åŸºç¡€çŸ¥è¯†-2"></a> åŸºç¡€çŸ¥è¯†</h3><p>æ•°æ®åº“çš„æ¨¡ç³Šæœç´¢å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢ä¸èµ°ç´¢å¼•ï¼Œåœ¨æ•°æ®é‡è¾ƒå¤§çš„æ—¶å€™ï¼ŒæŸ¥è¯¢æ€§èƒ½å¾ˆå·®ã€‚</li><li>æ•°æ®åº“çš„æ¨¡ç³Šæœç´¢åŠŸèƒ½å•ä¸€ï¼Œå¿…é¡»æ°å¥½åŒ…å«ç”¨æˆ·æœç´¢çš„å…³é”®å­—ã€‚è€Œåœ¨æœç´¢å¼•æ“ä¸­ï¼Œç”¨æˆ·è¾“å…¥å‡ºç°ä¸ªåˆ«é”™å­—ï¼Œæˆ–è€…ç”¨æ‹¼éŸ³æœç´¢ã€åŒä¹‰è¯æœç´¢éƒ½èƒ½æ­£ç¡®åŒ¹é…åˆ°æ•°æ®ã€‚</li></ul><p>Elasticsearchæ˜¯ç”±elasticå…¬å¸å¼€å‘çš„ä¸€å¥—æœç´¢å¼•æ“æŠ€æœ¯ï¼Œå®ƒæ˜¯elasticæŠ€æœ¯æ ˆä¸­çš„ä¸€éƒ¨åˆ†ã€‚å®Œæ•´çš„æŠ€æœ¯æ ˆåŒ…æ‹¬ï¼š</p><ul><li>Elasticsearchï¼šç”¨äºæ•°æ®å­˜å‚¨ã€è®¡ç®—å’Œæœç´¢</li><li>Logstash/Beatsï¼šç”¨äºæ•°æ®æ”¶é›†</li><li>Kibanaï¼šç”¨äºæ•°æ®å¯è§†åŒ–<br />æ•´å¥—æŠ€æœ¯æ ˆè¢«ç§°ä¸ºELKï¼Œç»å¸¸ç”¨æ¥åšæ—¥å¿—æ”¶é›†ã€ç³»ç»Ÿç›‘æ§å’ŒçŠ¶æ€åˆ†æç­‰ã€‚</li></ul><p>ä¸€èˆ¬æ•°æ®åº“æœç´¢ä¸­ï¼Œå½“æœç´¢æ¡ä»¶ä¸ºæ¨¡ç³ŠåŒ¹é…æ—¶ï¼Œç”±äºç´¢å¼•æ— æ³•ç”Ÿæ•ˆï¼Œå¯¼è‡´ä»ç´¢å¼•æŸ¥è¯¢é€€åŒ–ä¸ºå…¨è¡¨æ‰«æï¼Œæ•ˆç‡å¾ˆå·®ã€‚<br />å› æ­¤ï¼Œæ­£å‘ç´¢å¼•é€‚åˆäºæ ¹æ®ç´¢å¼•å­—æ®µçš„ç²¾ç¡®æœç´¢ï¼Œä¸é€‚åˆåŸºäºéƒ¨åˆ†è¯æ¡çš„æ¨¡ç³ŠåŒ¹é…ã€‚<br />elasticsearchä¹‹æ‰€ä»¥æœ‰å¦‚æ­¤é«˜æ€§èƒ½çš„æœç´¢è¡¨ç°ï¼Œæ­£æ˜¯å¾—ç›Šäºåº•å±‚çš„å€’æ’ç´¢å¼•æŠ€æœ¯ã€‚</p><p>ä»€ä¹ˆæ˜¯<em><strong>å€’æ’ç´¢å¼•</strong></em>ï¼Ÿ</p><ul><li>æ­£å‘ç´¢å¼•æ˜¯æœ€ä¼ ç»Ÿçš„ï¼Œæ ¹æ®idç´¢å¼•çš„æ–¹å¼ã€‚ä½†æ ¹æ®è¯æ¡æŸ¥è¯¢æ—¶ï¼Œå¿…é¡»å…ˆé€æ¡è·å–æ¯ä¸ªæ–‡æ¡£ï¼Œç„¶ååˆ¤æ–­æ–‡æ¡£ä¸­æ˜¯å¦åŒ…å«æ‰€éœ€è¦çš„è¯æ¡ï¼Œæ˜¯æ ¹æ®æ–‡æ¡£æ‰¾è¯æ¡çš„è¿‡ç¨‹ã€‚</li><li>è€Œå€’æ’ç´¢å¼•åˆ™ç›¸åï¼Œæ˜¯å…ˆæ‰¾åˆ°ç”¨æˆ·è¦æœç´¢çš„è¯æ¡ï¼Œæ ¹æ®è¯æ¡å¾—åˆ°ä¿æŠ¤è¯æ¡çš„æ–‡æ¡£çš„idï¼Œç„¶åæ ¹æ®idè·å–æ–‡æ¡£ã€‚æ˜¯æ ¹æ®è¯æ¡æ‰¾æ–‡æ¡£çš„è¿‡ç¨‹ã€‚<br />è¿™é‡Œçš„æ–‡æ¡£å°±æ˜¯æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ®ï¼Œè¯æ¡å°±æ˜¯åˆ†è¯åçš„è¯è¯­ã€‚</li></ul><p>åˆ›å»ºå€’æ’ç´¢å¼•çš„è¿‡ç¨‹ï¼š</p><ul><li>åˆ†è¯ï¼šå°†æ–‡æ¡£ä¸­çš„è¯è¯­è¿›è¡Œåˆ†è¯ï¼Œå½¢æˆè¯æ¡</li><li>å»ºç«‹å€’æ’ç´¢å¼•ï¼šå°†è¯æ¡ä¸æ–‡æ¡£idè¿›è¡Œæ˜ å°„ï¼Œå½¢æˆå€’æ’ç´¢å¼•è¡¨</li></ul><p>æœ‰äº†å€’æ’ç´¢å¼•ï¼Œæœç´¢æµç¨‹å°±å˜æˆäº†ï¼š</p><ul><li>ç”¨æˆ·è¾“å…¥æœç´¢è¯æ¡</li><li>å¯¹è¾“å…¥è¿›è¡Œåˆ†è¯</li><li>æ ¹æ®åˆ†è¯ç»“æœåœ¨å€’æ’ç´¢å¼•è¡¨ä¸­æŸ¥æ‰¾æ–‡æ¡£id</li><li>æ ¹æ®æ–‡æ¡£idè·å–æ–‡æ¡£</li></ul><p>ä¸€äº›<strong>åŸºç¡€æ¦‚å¿µ</strong>å¯¹æ¯”ï¼š</p><table><thead><tr><th>MySQL</th><th>Elasticsearch</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Table</td><td>Index</td><td>ç´¢å¼•(index)ï¼Œå°±æ˜¯æ–‡æ¡£çš„é›†åˆï¼Œç±»ä¼¼æ•°æ®åº“çš„è¡¨(table)</td></tr><tr><td>Row</td><td>Document</td><td>æ–‡æ¡£ï¼ˆDocumentï¼‰ï¼Œå°±æ˜¯ä¸€æ¡ä¸€æ¡çš„æ•°æ®ï¼Œç±»ä¼¼æ•°æ®åº“ä¸­çš„è¡Œï¼ˆRowï¼‰ï¼Œæ–‡æ¡£éƒ½æ˜¯JSONæ ¼å¼</td></tr><tr><td>Column</td><td>Field</td><td>å­—æ®µï¼ˆFieldï¼‰ï¼Œå°±æ˜¯JSONæ–‡æ¡£ä¸­çš„å­—æ®µï¼Œç±»ä¼¼æ•°æ®åº“ä¸­çš„åˆ—ï¼ˆColumnï¼‰</td></tr><tr><td>Schema</td><td>Mapping</td><td>Mappingï¼ˆæ˜ å°„ï¼‰æ˜¯ç´¢å¼•ä¸­æ–‡æ¡£çš„çº¦æŸï¼Œä¾‹å¦‚å­—æ®µç±»å‹çº¦æŸã€‚ç±»ä¼¼æ•°æ®åº“çš„è¡¨ç»“æ„ï¼ˆSchemaï¼‰</td></tr><tr><td>SQL</td><td>DSL</td><td>DSLæ˜¯elasticsearchæä¾›çš„JSONé£æ ¼çš„è¯·æ±‚è¯­å¥ï¼Œç”¨æ¥æ“ä½œelasticsearchï¼Œå®ç°CRUD</td></tr></tbody></table><p>Mappingæ˜¯å¯¹ç´¢å¼•åº“ä¸­æ–‡æ¡£çš„çº¦æŸï¼Œå¸¸è§çš„Mappingå±æ€§åŒ…æ‹¬ï¼š</p><ul><li>typeï¼šå­—æ®µæ•°æ®ç±»å‹ï¼Œå¸¸è§çš„ç®€å•ç±»å‹æœ‰ï¼š<ul><li>å­—ç¬¦ä¸²ï¼štextï¼ˆå¯åˆ†è¯çš„æ–‡æœ¬ï¼‰ã€keywordï¼ˆç²¾ç¡®å€¼ï¼Œä¾‹å¦‚ï¼šå“ç‰Œã€å›½å®¶ã€ipåœ°å€ï¼‰</li><li>æ•°å€¼ï¼šlongã€integerã€shortã€byteã€doubleã€floatã€</li><li>å¸ƒå°”ï¼šboolean</li><li>æ—¥æœŸï¼šdate</li><li>å¯¹è±¡ï¼šobject</li></ul></li><li>indexï¼šæ˜¯å¦åˆ›å»ºç´¢å¼•ï¼Œé»˜è®¤ä¸ºtrue</li><li>analyzerï¼šä½¿ç”¨å“ªç§åˆ†è¯å™¨</li><li>propertiesï¼šè¯¥å­—æ®µçš„å­å­—æ®µ</li></ul><h3 id="kibanaä¸­çš„å¢åˆ æ”¹æŸ¥"><a class="markdownIt-Anchor" href="#kibanaä¸­çš„å¢åˆ æ”¹æŸ¥"></a> Kibanaä¸­çš„å¢åˆ æ”¹æŸ¥</h3><p>Kibanaæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–å¹³å°ï¼Œå¯ä»¥è®©ä½ åœ¨Elasticsearchä¸Šè¿›è¡Œæ•°æ®åˆ†æå’Œæœç´¢ã€‚</p><p><strong>ç´¢å¼•åº“çš„å¢åˆ æ”¹æŸ¥</strong></p><ul><li>åˆ›å»ºç´¢å¼•åº“</li></ul><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">PUT</span> /ç´¢å¼•åº“åç§°<br>&#123;<br>  <span class="hljs-string">&quot;mappings&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;properties&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;å­—æ®µå&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>,<br>        <span class="hljs-string">&quot;analyzer&quot;</span>: <span class="hljs-string">&quot;ik_smart&quot;</span><br>      &#125;,<br>      <span class="hljs-string">&quot;å­—æ®µå2&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span>,<br>        <span class="hljs-string">&quot;index&quot;</span>: <span class="hljs-string">&quot;false&quot;</span><br>      &#125;,<br>      <span class="hljs-string">&quot;å­—æ®µå3&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;properties&quot;</span>: &#123;<br>          <span class="hljs-string">&quot;å­å­—æ®µ&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span><br>          &#125;<br>        &#125;<br>      &#125;,<br>      <span class="hljs-comment">// ...ç•¥</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç´¢å¼•åº“</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /ç´¢å¼•åº“å<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤ç´¢å¼•åº“</li></ul><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-keyword">DELETE</span> /ç´¢å¼•åº“å<br></code></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ç´¢å¼•åº“ï¼Œç´¢å¼•åº“ä¸€æ—¦åˆ›å»ºï¼Œæ— æ³•ä¿®æ”¹mappingï¼Œä½†å¯ä»¥æ·»åŠ æ–°çš„å­—æ®µ</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">PUT <span class="hljs-regexp">/ç´¢å¼•åº“å/</span>_mapping<br>&#123;<br>  <span class="hljs-string">&quot;properties&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;æ–°å­—æ®µå&quot;</span>:&#123;<br>      <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;integer&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ–‡æ¡£çš„å¢åˆ æ”¹æŸ¥</strong></p><ul><li>æ–°å¢æ–‡æ¡£</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">POST /ç´¢å¼•åº“å/_doc/æ–‡æ¡£<span class="hljs-built_in">id</span><br>&#123;<br>    <span class="hljs-string">&quot;å­—æ®µ1&quot;</span>: <span class="hljs-string">&quot;å€¼1&quot;</span>,<br>    <span class="hljs-string">&quot;å­—æ®µ2&quot;</span>: <span class="hljs-string">&quot;å€¼2&quot;</span>,<br>    <span class="hljs-string">&quot;å­—æ®µ3&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;å­å±æ€§1&quot;</span>: <span class="hljs-string">&quot;å€¼3&quot;</span>,<br>        <span class="hljs-string">&quot;å­å±æ€§2&quot;</span>: <span class="hljs-string">&quot;å€¼4&quot;</span><br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æ–‡æ¡£</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">GET /&#123;ç´¢å¼•åº“åç§°&#125;/_doc/&#123;<span class="hljs-built_in">id</span>&#125;<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ–‡æ¡£</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">DELETE</span> <span class="hljs-regexp">/&#123;ç´¢å¼•åº“å&#125;/</span>_doc/idå€¼<br></code></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æ–‡æ¡£æœ‰ä¸¤ç§æ–¹å¼ï¼Œå…¨é‡ä¿®æ”¹ç›´æ¥è¦†ç›–åŸæ¥çš„æ–‡æ¡£ï¼›å±€éƒ¨ä¿®æ”¹ï¼Œä¿®æ”¹æ–‡æ¡£ä¸­çš„éƒ¨åˆ†å­—æ®µï¼Œ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">å…¨é‡ä¿®æ”¹ï¼šä¸æ–°å¢æ–‡æ¡£è¯­æ³•ä¸€æ ·<br>å±€éƒ¨ä¿®æ”¹ï¼š<br>POST /&#123;ç´¢å¼•åº“å&#125;/_update/æ–‡æ¡£<span class="hljs-built_in">id</span><br>&#123;<br>    <span class="hljs-string">&quot;doc&quot;</span>: &#123;<br>         <span class="hljs-string">&quot;å­—æ®µå&quot;</span>: <span class="hljs-string">&quot;æ–°çš„å€¼&quot;</span>,<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="dslæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#dslæŸ¥è¯¢"></a> DSLæŸ¥è¯¢</h3><p>Elasticsearchæä¾›äº†åŸºäºJSONçš„DSLï¼ˆDomain Specific Languageï¼‰è¯­å¥æ¥å®šä¹‰<strong>å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶</strong><br />Elasticsearchçš„æŸ¥è¯¢å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>å¶å­æŸ¥è¯¢ï¼ˆLeaf query clausesï¼‰ï¼šä¸€èˆ¬æ˜¯åœ¨ç‰¹å®šçš„å­—æ®µé‡ŒæŸ¥è¯¢ç‰¹å®šå€¼ï¼Œå±äºç®€å•æŸ¥è¯¢ï¼Œå¾ˆå°‘å•ç‹¬ä½¿ç”¨ã€‚</li><li>å¤åˆæŸ¥è¯¢ï¼ˆCompound query clausesï¼‰ï¼šä»¥é€»è¾‘æ–¹å¼ç»„åˆå¤šä¸ªå¶å­æŸ¥è¯¢æˆ–è€…æ›´æ”¹å¶å­æŸ¥è¯¢çš„è¡Œä¸ºæ–¹å¼ã€‚</li></ul><p><strong>å¶å­æŸ¥è¯¢</strong></p><ul><li>å…¨æ–‡æ£€ç´¢æŸ¥è¯¢ï¼ˆFull Text Queriesï¼‰ï¼šåˆ©ç”¨åˆ†è¯å™¨å¯¹ç”¨æˆ·è¾“å…¥æœç´¢æ¡ä»¶å…ˆåˆ†è¯ï¼Œå¾—åˆ°è¯æ¡ï¼Œç„¶åå†åˆ©ç”¨å€’æ’ç´¢å¼•æœç´¢è¯æ¡ã€‚ä¾‹å¦‚ï¼š<ul><li>matchï¼š</li><li>multi_match</li></ul></li><li>ç²¾ç¡®æŸ¥è¯¢ï¼ˆTerm-level queriesï¼‰ï¼šä¸å¯¹ç”¨æˆ·è¾“å…¥æœç´¢æ¡ä»¶åˆ†è¯ï¼Œæ ¹æ®å­—æ®µå†…å®¹ç²¾ç¡®å€¼åŒ¹é…ã€‚ä½†åªèƒ½æŸ¥æ‰¾keywordã€æ•°å€¼ã€æ—¥æœŸã€booleanç±»å‹çš„å­—æ®µã€‚ä¾‹å¦‚ï¼š<ul><li>idsï¼šæ ¹æ®æ–‡æ¡£idæŸ¥è¯¢</li><li>termï¼šç²¾ç¡®åŒ¹é…æŸä¸ªå­—æ®µçš„å€¼</li><li>rangeï¼šèŒƒå›´æŸ¥è¯¢</li></ul></li><li>åœ°ç†åæ ‡æŸ¥è¯¢ï¼šç”¨äºæœç´¢åœ°ç†ä½ç½®ï¼Œæœç´¢æ–¹å¼å¾ˆå¤šï¼Œä¾‹å¦‚ï¼š<ul><li>geo_bounding_boxï¼šæŒ‰çŸ©å½¢æœç´¢</li><li>geo_distanceï¼šæŒ‰ç‚¹å’ŒåŠå¾„æœç´¢</li></ul></li></ul><p><strong>å…¨æ–‡æ£€ç´¢æŸ¥è¯¢</strong></p><ul><li>matchæŸ¥è¯¢ï¼Œä¾‹å¦‚æ¨¡ç³Šæœç´¢å•†å“åç§°ä¸ºè‹¹æœæ‰‹æœºçš„å•†å“</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /&#123;ç´¢å¼•åº“å&#125;/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;è‹¹æœæ‰‹æœº&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>multi_matchæŸ¥è¯¢ï¼šå¯ä»¥æŒ‡å®šå¤šä¸ªå­—æ®µè¿›è¡Œæœç´¢ã€‚ä¾‹å¦‚æ¨¡ç³Šæœç´¢å•†å“åç§°å’Œå“ç‰Œä¸­åŒ…å«è‹¹æœæ‰‹æœºçš„å•†å“</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /&#123;ç´¢å¼•åº“å&#125;/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;multi_match&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;è‹¹æœæ‰‹æœº&quot;</span>,<br>      <span class="hljs-string">&quot;fields&quot;</span>: [<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;brand&quot;</span>]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç²¾ç¡®æŸ¥è¯¢</strong></p><ul><li>termæŸ¥è¯¢ï¼šç²¾ç¡®åŒ¹é…æŸä¸ªå­—æ®µçš„å€¼ï¼Œä¾‹å¦‚æŸ¥è¯¢å“ç‰Œä¸ºè‹¹æœçš„å•†å“</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /&#123;ç´¢å¼•åº“å&#125;/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;term&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;brand&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-string">&quot;è‹¹æœ&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>rangeæŸ¥è¯¢ï¼šèŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚æŸ¥è¯¢ä»·æ ¼åœ¨100-500ä¹‹é—´çš„å•†å“</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /&#123;ç´¢å¼•åº“å&#125;/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;range&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;price&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;gte&quot;</span>: 100,<br>        <span class="hljs-string">&quot;lte&quot;</span>: 500<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¤åˆæŸ¥è¯¢</strong><br />å¤åˆæŸ¥è¯¢å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ç¬¬ä¸€ç±»ï¼šåŸºäºé€»è¾‘è¿ç®—ç»„åˆå¶å­æŸ¥è¯¢ï¼Œå®ç°ç»„åˆæ¡ä»¶ï¼Œä¾‹å¦‚<ul><li>bool</li></ul></li><li>ç¬¬äºŒç±»ï¼šåŸºäºæŸç§ç®—æ³•ä¿®æ”¹æŸ¥è¯¢æ—¶çš„æ–‡æ¡£ç›¸å…³æ€§ç®—åˆ†ï¼Œä»è€Œæ”¹å˜æ–‡æ¡£æ’åã€‚ä¾‹å¦‚ï¼š<ul><li>function_score</li><li>dis_max</li></ul></li></ul><p><strong>boolæŸ¥è¯¢</strong><br />boolæŸ¥è¯¢æ˜¯æœ€å¸¸ç”¨çš„å¤åˆæŸ¥è¯¢ï¼Œåˆ©ç”¨é€»è¾‘è¿ç®—æ¥ç»„åˆä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢å­å¥çš„ç»„åˆã€‚boolæŸ¥è¯¢æ”¯æŒçš„é€»è¾‘è¿ç®—æœ‰ï¼š</p><ul><li>mustï¼šå¿…é¡»åŒ¹é…æ¯ä¸ªå­æŸ¥è¯¢ï¼Œç±»ä¼¼â€œä¸â€</li><li>shouldï¼šé€‰æ‹©æ€§åŒ¹é…å­æŸ¥è¯¢ï¼Œç±»ä¼¼â€œæˆ–â€ï¼Œæ»¡è¶³ç›¸å…³é¡¹å³å¯æå‡åŒ¹é…åˆ†æ•°</li><li>must_notï¼šå¿…é¡»ä¸åŒ¹é…ï¼Œä¸å‚ä¸ç®—åˆ†ï¼Œç±»ä¼¼â€œéâ€</li><li>filterï¼šå¿…é¡»åŒ¹é…ï¼Œä¸å‚ä¸ç®—åˆ†</li></ul><p>ä¾‹å¦‚æŸ¥è¯¢å•†å“åç§°ä¸­åŒ…å«æ‰‹æœºï¼Œå“ç‰Œæœ€å¥½ä¸ºvivoæˆ–å°ç±³ï¼Œä»·æ ¼å¤§äºç­‰äº1000ä¸”å°äº2500çš„å•†å“</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-symbol">GET</span> /items/<span class="hljs-symbol">_search</span><br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;bool&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;must&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;match&quot;</span>: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>&#125;&#125;<br>      ],<br>      <span class="hljs-string">&quot;should&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;term&quot;</span>: &#123;<span class="hljs-string">&quot;brand&quot;</span>: &#123; <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-string">&quot;vivo&quot;</span> &#125;&#125;&#125;,<br>        &#123;<span class="hljs-string">&quot;term&quot;</span>: &#123;<span class="hljs-string">&quot;brand&quot;</span>: &#123; <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-string">&quot;å°ç±³&quot;</span> &#125;&#125;&#125;<br>      ],<br>      <span class="hljs-string">&quot;must_not&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;range&quot;</span>: &#123;<span class="hljs-string">&quot;price&quot;</span>: &#123;<span class="hljs-string">&quot;gte&quot;</span>: <span class="hljs-number">2500</span>&#125;&#125;&#125;<br>      ],<br>      <span class="hljs-string">&quot;filter&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;range&quot;</span>: &#123;<span class="hljs-string">&quot;price&quot;</span>: &#123;<span class="hljs-string">&quot;gte&quot;</span>: <span class="hljs-number">1000</span>&#125;&#125;&#125;<br>      ]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ’åº</strong><br />elasticsearché»˜è®¤æ˜¯æ ¹æ®ç›¸å…³åº¦ç®—åˆ†ï¼ˆ_scoreï¼‰æ¥æ’åºï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ–¹å¼å¯¹æœç´¢ç»“æœæ’åºã€‚ä¸è¿‡åˆ†è¯å­—æ®µæ— æ³•æ’åºï¼Œèƒ½å‚ä¸æ’åºå­—æ®µç±»å‹æœ‰ï¼škeywordç±»å‹ã€æ•°å€¼ç±»å‹ã€åœ°ç†åæ ‡ç±»å‹ã€æ—¥æœŸç±»å‹ç­‰ã€‚<br />ä¾‹å¦‚æŒ‰å•†å“ä»·æ ¼é™åºæ’åº</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">GET</span> /<span class="hljs-built_in">items</span>/<span class="hljs-variable">_search</span><br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match_all&quot;</span>: &#123;&#125;<br>  &#125;,<br>  <span class="hljs-string">&quot;sort&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;price&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;order&quot;</span>: <span class="hljs-string">&quot;desc&quot;</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ†é¡µ</strong><br />elasticsearch é»˜è®¤æƒ…å†µä¸‹åªè¿”å›top10çš„æ•°æ®ã€‚è€Œå¦‚æœè¦æŸ¥è¯¢æ›´å¤šæ•°æ®å°±éœ€è¦ä¿®æ”¹åˆ†é¡µå‚æ•°äº†ã€‚<br />åŸºç¡€åˆ†é¡µé€šè¿‡ä¿®æ”¹fromå’Œsizeå‚æ•°æ¥å®ç°ï¼Œfromè¡¨ç¤ºä»ç¬¬å‡ æ¡å¼€å§‹ï¼Œsizeè¡¨ç¤ºè¿”å›å¤šå°‘æ¡æ•°æ®ã€‚</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">GET</span> /<span class="hljs-built_in">items</span>/<span class="hljs-variable">_search</span><br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match_all&quot;</span>: &#123;&#125;<br>  &#125;,<br>  <span class="hljs-string">&quot;from&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// åˆ†é¡µå¼€å§‹çš„ä½ç½®ï¼Œé»˜è®¤ä¸º0</span><br>  <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">10</span>,  <span class="hljs-comment">// æ¯é¡µæ–‡æ¡£æ•°é‡ï¼Œé»˜è®¤10</span><br>  <span class="hljs-string">&quot;sort&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;price&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;order&quot;</span>: <span class="hljs-string">&quot;desc&quot;</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ·±åº¦åˆ†é¡µé—®é¢˜</strong><br />elasticsearchçš„æ•°æ®ä¸€èˆ¬ä¼šé‡‡ç”¨åˆ†ç‰‡å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ä¸ªç´¢å¼•ä¸­çš„æ•°æ®åˆ†æˆNä»½ï¼Œå­˜å‚¨åˆ°ä¸åŒèŠ‚ç‚¹ä¸Šã€‚è¿™ç§å­˜å‚¨æ–¹å¼æ¯”è¾ƒæœ‰åˆ©äºæ•°æ®æ‰©å±•ï¼Œä½†ç»™åˆ†é¡µå¸¦æ¥äº†ä¸€äº›éº»çƒ¦ã€‚<br />æ¯”å¦‚è¦æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ä¸­æœ€å°çš„å‰1000æ¡æ•°æ®ï¼Œéœ€è¦åœ¨æ¯ä¸ªåˆ†ç‰‡ä¸ŠæŸ¥æ‰¾å‰1000æ¡æ•°æ®ï¼Œç„¶åå†åœ¨æ‰€æœ‰åˆ†ç‰‡ä¸Šåˆå¹¶æ’åºï¼Œæœ€åè¿”å›å‰1000æ¡æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´å’Œèµ„æºã€‚</p><p>å½“æŸ¥è¯¢åˆ†é¡µæ·±åº¦è¾ƒå¤§æ—¶ï¼Œæ±‡æ€»æ•°æ®è¿‡å¤šï¼Œå¯¹å†…å­˜å’ŒCPUä¼šäº§ç”Ÿéå¸¸å¤§çš„å‹åŠ›ã€‚<br />åœ¨ESä¸­ï¼Œ<code>from+ size</code> è¶…è¿‡10000çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ã€‚</p><p>é’ˆå¯¹æ·±åº¦åˆ†é¡µï¼Œelasticsearchæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>search afterï¼šåˆ†é¡µæ—¶éœ€è¦æ’åºï¼ŒåŸç†æ˜¯ä»ä¸Šä¸€æ¬¡çš„æ’åºå€¼å¼€å§‹ï¼ŒæŸ¥è¯¢ä¸‹ä¸€é¡µæ•°æ®ã€‚å®˜æ–¹æ¨èä½¿ç”¨çš„æ–¹å¼ã€‚</li><li>scrollï¼šåŸç†å°†æ’åºåçš„æ–‡æ¡£idå½¢æˆå¿«ç…§ï¼Œä¿å­˜ä¸‹æ¥ï¼ŒåŸºäºå¿«ç…§åšåˆ†é¡µã€‚å®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ã€‚</li></ul><p>search afterçš„ä¼˜ç‚¹æ˜¯æ”¯æŒæ·±åº¦åˆ†é¡µï¼Œä½†æ˜¯å¿…é¡»ä¾èµ–æ’åºå­—æ®µï¼Œè€Œä¸”æ’åºå­—æ®µçš„å€¼å¿…é¡»æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œä¸æ”¯æŒè·³é¡µã€‚</p><p><strong>é«˜äº®</strong><br />æˆ‘ä»¬åœ¨ç™¾åº¦æœç´¢æ—¶ï¼Œå…³é”®å­—ä¼šå˜æˆçº¢è‰²ï¼Œæ¯”è¾ƒé†’ç›®ï¼Œè¿™å«é«˜äº®æ˜¾ç¤ºï¼Œå®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> /&#123;ç´¢å¼•åº“å&#125;/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;æœç´¢å­—æ®µ&quot;</span>: <span class="hljs-string">&quot;æœç´¢å…³é”®å­—&quot;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-string">&quot;highlight&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;fields&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;é«˜äº®å­—æ®µåç§°&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;pre_tags&quot;</span>: <span class="hljs-string">&quot;&lt;em&gt;&quot;</span>,<br>        <span class="hljs-string">&quot;post_tags&quot;</span>: <span class="hljs-string">&quot;&lt;/em&gt;&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>èšåˆ</strong><br />èšåˆï¼ˆaggregationsï¼‰å¯ä»¥è®©æˆ‘ä»¬æå…¶æ–¹ä¾¿çš„å®ç°å¯¹æ•°æ®çš„ç»Ÿè®¡ã€åˆ†æã€è¿ç®—ã€‚<br />èšåˆå¸¸è§çš„æœ‰ä¸‰ç±»ï¼š</p><ul><li>æ¡¶ï¼ˆBucketï¼‰èšåˆï¼šç”¨æ¥å¯¹æ–‡æ¡£åšåˆ†ç»„</li><li>TermAggregationï¼šæŒ‰ç…§æ–‡æ¡£å­—æ®µå€¼åˆ†ç»„ï¼Œä¾‹å¦‚æŒ‰ç…§å“ç‰Œå€¼åˆ†ç»„ã€æŒ‰ç…§å›½å®¶åˆ†ç»„</li><li>Date Histogramï¼šæŒ‰ç…§æ—¥æœŸé˜¶æ¢¯åˆ†ç»„ï¼Œä¾‹å¦‚ä¸€å‘¨ä¸ºä¸€ç»„ï¼Œæˆ–è€…ä¸€æœˆä¸ºä¸€ç»„</li><li>åº¦é‡ï¼ˆMetricï¼‰èšåˆï¼šç”¨ä»¥è®¡ç®—ä¸€äº›å€¼ï¼Œæ¯”å¦‚ï¼šæœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼ç­‰</li><li>Avgï¼šæ±‚å¹³å‡å€¼</li><li>Maxï¼šæ±‚æœ€å¤§å€¼</li><li>Minï¼šæ±‚æœ€å°å€¼</li><li>Statsï¼šåŒæ—¶æ±‚maxã€minã€avgã€sumç­‰</li><li>ç®¡é“ï¼ˆpipelineï¼‰èšåˆï¼šå…¶å®ƒèšåˆçš„ç»“æœä¸ºåŸºç¡€åšè¿›ä¸€æ­¥è¿ç®—</li></ul><blockquote><p>æ³¨æ„ï¼šå‚åŠ èšåˆçš„å­—æ®µå¿…é¡»æ˜¯keywordã€æ—¥æœŸã€æ•°å€¼ã€å¸ƒå°”ç±»å‹</p></blockquote><p>Bucketèšåˆè¯­æ³•ï¼ŒæŸ¥è¯¢å•†å“æŒ‰ç…§å“ç‰Œåˆ†ç»„</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">GET</span> /<span class="hljs-built_in">items</span>/<span class="hljs-variable">_search</span><br>&#123;<br>  <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//sizeä¸º0è¡¨ç¤ºä¸è¿”å›æ–‡æ¡£ï¼Œåªè¿”å›èšåˆç»“æœ</span><br>  <span class="hljs-string">&quot;aggs&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;brand_agg&quot;</span>: &#123; <span class="hljs-comment">//èšåˆåç§°</span><br>      <span class="hljs-string">&quot;terms&quot;</span>: &#123; <span class="hljs-comment">//æ¡¶èšåˆç”¨terms</span><br>        <span class="hljs-string">&quot;field&quot;</span>: <span class="hljs-string">&quot;brand&quot;</span>,<br>        <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">20</span> <span class="hljs-comment">//è¿”å›å‡ ä¸ªæ¡¶</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Metricèšåˆè¯­æ³•ï¼Œæ¯”å¦‚æŸ¥è¯¢å•†å“æŒ‰å“ç‰Œåˆ†ç»„åï¼ŒæŸ¥çœ‹ä»·æ ¼çš„ç»Ÿè®¡æ•°æ®</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">GET</span> /<span class="hljs-built_in">items</span>/<span class="hljs-variable">_search</span><br>&#123;<br>  <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;aggs&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;brand_agg&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;terms&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;field&quot;</span>: <span class="hljs-string">&quot;brand&quot;</span>,<br>        <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">20</span><br>      &#125;,<br>      <span class="hljs-string">&quot;aggs&quot;</span>: &#123; <span class="hljs-comment">//å­èšåˆ</span><br>        <span class="hljs-string">&quot;stats_agg&quot;</span>: &#123; <span class="hljs-comment">//èšåˆåç§°</span><br>          <span class="hljs-string">&quot;stats&quot;</span>: &#123; <span class="hljs-comment">//Metricèšåˆç”¨stats</span><br>            <span class="hljs-string">&quot;field&quot;</span>: <span class="hljs-string">&quot;price&quot;</span> <br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="restclientåŸºç¡€æ“ä½œ"><a class="markdownIt-Anchor" href="#restclientåŸºç¡€æ“ä½œ"></a> RestClientåŸºç¡€æ“ä½œ</h3><p>åœ¨elasticsearchæä¾›çš„APIä¸­ï¼Œä¸elasticsearchä¸€åˆ‡äº¤äº’éƒ½å°è£…åœ¨ä¸€ä¸ªåä¸ºRestHighLevelClientçš„ç±»ä¸­ï¼Œå¿…é¡»å…ˆå®Œæˆè¿™ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–ï¼Œå»ºç«‹ä¸elasticsearchçš„è¿æ¥ã€‚<br />ä¸€äº›åŸºæœ¬æ“ä½œå¦‚ä¸‹ï¼š</p><ul><li>åˆå§‹åŒ–RestHighLevelClientï¼š</li></ul><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@BeforeEach</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>&#123;<br>    client = <span class="hljs-keyword">new</span> RestHighLevelClient(RestClient.builder(<br>            HttpHost.create(<span class="hljs-string">&quot;http://192.168.56.101:9200&quot;</span>)<br><span class="hljs-comment">//                HttpHost.create(&quot;http://192.168.56.101:9200&quot;),</span><br><span class="hljs-comment">//                HttpHost.create(&quot;http://192.168.56.101:9200&quot;)</span><br>    ));<br>&#125;<br><br><span class="hljs-meta">@AfterEach</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>    <span class="hljs-keyword">if</span> (client != <span class="hljs-keyword">null</span>) &#123;<br>        client.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åˆ›å»ºç´¢å¼•åº“</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs swift">void createIndex() <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºç´¢å¼•</span><br>        <span class="hljs-type">CreateIndexRequest</span> request <span class="hljs-operator">=</span> new <span class="hljs-type">CreateIndexRequest</span>(<span class="hljs-string">&quot;items&quot;</span>);<br>        request.source(<span class="hljs-type">MAPPING_TEMPLATE</span>, <span class="hljs-type">XContentType</span>.<span class="hljs-type">JSON</span>);<br>        client.indices().create(request, <span class="hljs-type">RequestOptions</span>.<span class="hljs-type">DEFAULT</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-type">MAPPING_TEMPLATE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;  <span class="hljs-subst">\&quot;</span>mappings<span class="hljs-subst">\&quot;</span>: &#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;    <span class="hljs-subst">\&quot;</span>properties<span class="hljs-subst">\&quot;</span>: &#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>id<span class="hljs-subst">\&quot;</span>: &#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>keyword<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>name<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>text<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>analyzer<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>ik_max_word<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>price<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>integer<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>image<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>keyword<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>index<span class="hljs-subst">\&quot;</span>: false<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>category<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>keyword<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>brand<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>keyword<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>sold<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>integer<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>commentCount<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>integer<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>index<span class="hljs-subst">\&quot;</span>: false<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>isAD<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>boolean<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;,<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      <span class="hljs-subst">\&quot;</span>updateTime<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;        <span class="hljs-subst">\&quot;</span>type<span class="hljs-subst">\&quot;</span>: <span class="hljs-subst">\&quot;</span>date<span class="hljs-subst">\&quot;</span><span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;      &#125;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;    &#125;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;  &#125;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&#125;&quot;</span>;<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤ç´¢å¼•åº“</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">void</span> deleteIndex() <span class="hljs-keyword">throws</span> IOException &#123;<br>        DeleteIndexRequest request = <span class="hljs-keyword">new</span> DeleteIndexRequest(<span class="hljs-string">&quot;items&quot;</span>);<br>        client.indices().<span class="hljs-keyword">delete</span>(request, RequestOptions.<span class="hljs-keyword">DEFAULT</span>);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>æ–°å¢æ–‡æ¡£</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">createDoc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//å‡†å¤‡æ•°æ®</span><br>        <span class="hljs-type">Item</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> itemService.getById(<span class="hljs-number">317578L</span>);<br>        <span class="hljs-type">ItemDoc</span> <span class="hljs-variable">itemDoc</span> <span class="hljs-operator">=</span> BeanUtils.copyProperties(item, ItemDoc.class);<br>        <span class="hljs-comment">//å‡†å¤‡request,IndexRequestå³èƒ½åˆ›å»ºæ–‡æ¡£ï¼Œä¹Ÿèƒ½å…¨é‡æ›´æ–°æ–‡æ¡£</span><br>        <span class="hljs-type">IndexRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;items&quot;</span>).id(item.getId().toString());<br>        <span class="hljs-comment">//å‡†å¤‡è¯·æ±‚å‚æ•°</span><br>        request.source(JSONUtil.toJsonStr(itemDoc), XContentType.JSON);<br>        <span class="hljs-comment">//å‘é€è¯·æ±‚</span><br>        client.index(request, RequestOptions.DEFAULT);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æ–‡æ¡£</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">void</span> getDoc() <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//å‡†å¤‡request</span><br>        GetRequest request = <span class="hljs-keyword">new</span> GetRequest(<span class="hljs-string">&quot;items&quot;</span>).id(<span class="hljs-string">&quot;317578&quot;</span>);<br>        <span class="hljs-comment">//å‘é€è¯·æ±‚</span><br>        GetResponse response = client.get(request, RequestOptions.<span class="hljs-keyword">DEFAULT</span>);<br>        <span class="hljs-comment">//è§£æç»“æœ</span><br>        String <span class="hljs-keyword">source</span> = response.getSourceAsString();<br>        ItemDoc doc = JSONUtil.toBean(<span class="hljs-keyword">source</span>, ItemDoc.<span class="hljs-keyword">class</span>);<br>        System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;doc = &quot;</span> + doc);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ–‡æ¡£</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">void</span> deleteDoc() <span class="hljs-keyword">throws</span> IOException &#123;<br>        DeleteRequest request = <span class="hljs-keyword">new</span> DeleteRequest(<span class="hljs-string">&quot;items&quot;</span>).id(<span class="hljs-string">&quot;317578&quot;</span>);<br>        client.<span class="hljs-keyword">delete</span>(request, RequestOptions.<span class="hljs-keyword">DEFAULT</span>);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æ–‡æ¡£</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">updateDoc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//å±€éƒ¨æ›´æ–°</span><br>        <span class="hljs-type">UpdateRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateRequest</span>(<span class="hljs-string">&quot;items&quot;</span>, <span class="hljs-string">&quot;317578&quot;</span>);<br>        request.doc(<span class="hljs-string">&quot;price&quot;</span>, <span class="hljs-number">9999</span>);<br>        client.update(request, RequestOptions.DEFAULT);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>æ‰¹é‡æ–°å¢æ–‡æ¡£</li></ul><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-literal">void</span> testBulkDoc() throws IOException &#123;<br>        int pageNo = <span class="hljs-number">1</span>, pageSize = <span class="hljs-number">500</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//å‡†å¤‡æ•°æ®</span><br>            Page&lt;Item&gt; page = itemService.lambdaQuery()<br>                    .<span class="hljs-literal">eq</span>(Item<span class="hljs-type">::getStatus</span>, <span class="hljs-number">1</span>)<br>                    .page(<span class="hljs-literal">new</span> Page&lt;&gt;(pageNo, pageSize));<br>            <span class="hljs-built_in">List</span>&lt;Item&gt; <span class="hljs-keyword">records</span> = page.getRecords();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">records</span> == <span class="hljs-built_in">null</span> || <span class="hljs-keyword">records</span>.isEmpty()) &#123;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            BulkRequest request = <span class="hljs-literal">new</span> BulkRequest();<br>            <span class="hljs-comment">//æ‰¹é‡æ’å…¥</span><br>            for (Item item : <span class="hljs-keyword">records</span>) &#123;<br>                request.add(<span class="hljs-literal">new</span> IndexRequest(<span class="hljs-string">&quot;items&quot;</span>)<br>                        .id(item.getId().toString())<br>                        .source(JSONUtil.toJsonStr(BeanUtils.copyProperties(item, ItemDoc.class)), XContentType.JSON));<br>            &#125;<br>            <span class="hljs-comment">//å‘é€è¯·æ±‚</span><br>            client.bulk(request, RequestOptions.DEFAULT);<br>            pageNo++;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>DSL matchæŸ¥è¯¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testMatch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>    <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;items&quot;</span>);<br>    <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>    request.source().query(QueryBuilders.matchQuery(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;è„±è„‚ç‰›å¥¶&quot;</span>));<br>    <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>    <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.search(request, RequestOptions.DEFAULT);<br>    <span class="hljs-comment">// 4.è§£æå“åº”</span><br>    handleResponse(response);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>DSL multi_matchæŸ¥è¯¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testMultiMatch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>    <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;items&quot;</span>);<br>    <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>    request.source().query(QueryBuilders.multiMatchQuery(<span class="hljs-string">&quot;è„±è„‚ç‰›å¥¶&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;category&quot;</span>));<br>    <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>    <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.search(request, RequestOptions.DEFAULT);<br>    <span class="hljs-comment">// 4.è§£æå“åº”</span><br>    handleResponse(response);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>DSL boolæŸ¥è¯¢ï¼ŒæŸ¥è¯¢å•†å“åç§°åŒ…å«è„±è„‚ç‰›å¥¶ï¼Œå“ç‰Œä¸ºå¾·äºšï¼Œä»·æ ¼åœ¨5000-30000ä¹‹é—´çš„å•†å“</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">testSearch</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;items&quot;</span>);<br>        <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>        request.source().query(QueryBuilders.boolQuery()<br>                .must(QueryBuilders.matchQuery(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;è„±è„‚ç‰›å¥¶&quot;</span>))<br>                .must(QueryBuilders.termQuery(<span class="hljs-string">&quot;brand&quot;</span>, <span class="hljs-string">&quot;å¾·äºš&quot;</span>))<br>                .filter(QueryBuilders.rangeQuery(<span class="hljs-string">&quot;price&quot;</span>).gte(<span class="hljs-number">5000</span>).lte(<span class="hljs-number">30000</span>))<br>        );<br>        <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>        <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.search(request, RequestOptions.DEFAULT);<br>        <span class="hljs-comment">// 4.è§£æå“åº”</span><br>        parseDocResponse(response);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>DSL æ’åºå’Œåˆ†é¡µæŸ¥è¯¢</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">void</span> testPageAndSort() <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-keyword">int</span> pageNo = <span class="hljs-number">1</span>, pageSize = <span class="hljs-number">5</span>;<br>        <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>        SearchRequest request = <span class="hljs-keyword">new</span> SearchRequest(<span class="hljs-string">&quot;items&quot;</span>);<br>        <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>        request.<span class="hljs-keyword">source</span>().query(QueryBuilders.matchAllQuery())<br>                .<span class="hljs-keyword">from</span>((pageNo - <span class="hljs-number">1</span>) * pageSize)<br>                .<span class="hljs-keyword">size</span>(pageSize)<br>                .<span class="hljs-keyword">sort</span>(<span class="hljs-string">&quot;sold&quot;</span>, SortOrder.DESC)<br>                .<span class="hljs-keyword">sort</span>(<span class="hljs-string">&quot;price&quot;</span>, SortOrder.ASC);<br>        <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>        SearchResponse response = client.search(request, RequestOptions.<span class="hljs-keyword">DEFAULT</span>);<br>        <span class="hljs-comment">// 4.è§£æå“åº”</span><br>        parseDocResponse(response);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>DSL é«˜äº®æŸ¥è¯¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">testHighlight</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;items&quot;</span>);<br>        <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>        request.source().query(QueryBuilders.matchQuery(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;è„±è„‚ç‰›å¥¶&quot;</span>))<br>                .highlighter(SearchSourceBuilder.highlight()<br>                        .field(<span class="hljs-string">&quot;name&quot;</span>)<br>                        .preTags(<span class="hljs-string">&quot;&lt;em&gt;&quot;</span>)<br>                        .postTags(<span class="hljs-string">&quot;&lt;/em&gt;&quot;</span>)<br>                );<br>        <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>        <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.search(request, RequestOptions.DEFAULT);<br>        <span class="hljs-comment">// 4.è§£æå“åº”</span><br>        parseDocResponse(response);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>DSL èšåˆæŸ¥è¯¢</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">void</span> testAggs() <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æŸ¥è¯¢ä»·æ ¼å¤§äºç­‰äº3000çš„æ‰‹æœºï¼ŒæŒ‰å“ç‰Œèšåˆï¼Œç„¶åæŒ‰æ¯ä¸ªå“ç‰Œçš„æ•°é‡å‡åº</span><br>        <span class="hljs-comment">// 1.åˆ›å»ºRequest</span><br>        SearchRequest request = <span class="hljs-keyword">new</span> SearchRequest(<span class="hljs-string">&quot;items&quot;</span>);<br>        <span class="hljs-comment">// 2.ç»„ç»‡è¯·æ±‚å‚æ•°</span><br>        BoolQueryBuilder boolQuery = QueryBuilders.boolQuery()<br>                .filter(QueryBuilders.termQuery(<span class="hljs-string">&quot;category&quot;</span>, <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>))<br>                .filter(QueryBuilders.rangeQuery(<span class="hljs-string">&quot;price&quot;</span>).gte(<span class="hljs-number">300000</span>));<br>        request.<span class="hljs-keyword">source</span>().query(boolQuery).<span class="hljs-keyword">size</span>(<span class="hljs-number">0</span>);<span class="hljs-comment">//size=0è¡¨ç¤ºä¸æŸ¥è¯¢doc</span><br><br>        String brandAggName = <span class="hljs-string">&quot;brands_agg&quot;</span>;<br>        request.<span class="hljs-keyword">source</span>().aggregation(AggregationBuilders.terms(brandAggName)<br>                .field(<span class="hljs-string">&quot;brand&quot;</span>)<br>                .<span class="hljs-keyword">size</span>(<span class="hljs-number">10</span>)<br>                .order(BucketOrder.<span class="hljs-keyword">count</span>(<span class="hljs-keyword">true</span>))<br>        );<br>        <span class="hljs-comment">// 3.å‘é€è¯·æ±‚</span><br>        SearchResponse response = client.search(request, RequestOptions.<span class="hljs-keyword">DEFAULT</span>);<br>        <span class="hljs-comment">// 4.è§£æå“åº”</span><br>        parseAggsResponse(response, brandAggName);<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>è§£æå“åº”</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> parseDocResponse(SearchResponse response) &#123;<br>        SearchHits searchHits = response.getHits();<br>        <span class="hljs-comment">// 1.è·å–æ€»æ¡æ•°</span><br>        <span class="hljs-keyword">long</span> total = searchHits.getTotalHits().value;<br>        System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;å…±æœç´¢åˆ°&quot;</span> + total + <span class="hljs-string">&quot;æ¡æ•°æ®&quot;</span>);<br>        <span class="hljs-comment">// 2.éå†ç»“æœæ•°ç»„</span><br>        SearchHit[] hits = searchHits.getHits();<br>        <span class="hljs-keyword">for</span> (SearchHit hit : hits) &#123;<br>            <span class="hljs-comment">// 3.å¾—åˆ°_sourceï¼Œä¹Ÿå°±æ˜¯åŸå§‹jsonæ–‡æ¡£</span><br>            String <span class="hljs-keyword">source</span> = hit.getSourceAsString();<br>            <span class="hljs-comment">// 4.ååºåˆ—åŒ–å¹¶æ‰“å°</span><br>            ItemDoc item = JSONUtil.toBean(<span class="hljs-keyword">source</span>, ItemDoc.<span class="hljs-keyword">class</span>);<br>            <span class="hljs-comment">// 5.è·å–é«˜äº®å­—æ®µ</span><br>            Map&lt;String, HighlightField&gt; hfs = hit.getHighlightFields();<br>            <span class="hljs-keyword">if</span> (CollUtils.isNotEmpty(hfs)) &#123;<br>                HighlightField hf = hfs.get(<span class="hljs-string">&quot;name&quot;</span>);<br>                <span class="hljs-keyword">if</span> (hf != <span class="hljs-keyword">null</span>) &#123;<br>                    Text[] fragments = hf.fragments();<br>                    <span class="hljs-comment">//æ‹¼æ¥é«˜äº®å­—æ®µ</span><br>                    StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br>                    <span class="hljs-keyword">for</span> (Text fragment : fragments)<br>                        sb.<span class="hljs-keyword">append</span>(fragment);<br>                    item.setName(sb.toString());<br>                &#125;<br>            &#125;<br>            System.out.<span class="hljs-keyword">println</span>(item);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>è§£æèšåˆæŸ¥è¯¢å“åº”</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseAggsResponse</span><span class="hljs-params">(SearchResponse response, String aggName)</span> &#123;<br>        <span class="hljs-type">Aggregations</span> <span class="hljs-variable">aggregations</span> <span class="hljs-operator">=</span> response.getAggregations();<br>        <span class="hljs-comment">//æ ¹æ®èšåˆåç§°è·å–èšåˆ</span><br>        <span class="hljs-type">Terms</span> <span class="hljs-variable">terms</span> <span class="hljs-operator">=</span> aggregations.get(aggName);<br>        <span class="hljs-comment">//è·å–æ¡¶</span><br>        List&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Terms</span>.Bucket&gt; buckets = terms.getBuckets();<br>        <span class="hljs-keyword">for</span> (Terms.Bucket bucket : buckets) &#123;<br>            System.out.println(<span class="hljs-string">&quot;key:&quot;</span> + bucket.getKeyAsString() + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-string">&quot;cnt:&quot;</span> + bucket.getDocCount());<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="redisä¸»ä»"><a class="markdownIt-Anchor" href="#redisä¸»ä»"></a> Redisä¸»ä»</h2><p>å•èŠ‚ç‚¹Redisçš„å¹¶å‘èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè¦è¿›ä¸€æ­¥æé«˜Redisçš„å¹¶å‘èƒ½åŠ›ï¼Œå°±éœ€è¦æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚</p><p>å‡å¦‚é›†ç¾¤ä¸­æœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ã€ä¸¤ä¸ªslaveèŠ‚ç‚¹ï¼ˆç°åœ¨å«replicaï¼‰ã€‚å½“æˆ‘ä»¬é€šè¿‡Redisçš„Javaå®¢æˆ·ç«¯è®¿é—®ä¸»ä»é›†ç¾¤æ—¶ï¼Œåº”è¯¥åšå¥½è·¯ç”±ï¼š</p><ul><li>å¦‚æœæ˜¯å†™æ“ä½œï¼Œåº”è¯¥è®¿é—®masterèŠ‚ç‚¹ï¼Œmasterä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥ç»™ä¸¤ä¸ªslaveèŠ‚ç‚¹</li><li>å¦‚æœæ˜¯è¯»æ“ä½œï¼Œå»ºè®®è®¿é—®å„ä¸ªslaveèŠ‚ç‚¹ï¼Œä»è€Œåˆ†æ‹…å¹¶å‘å‹åŠ›</li><li>å¯åŠ¨ä¸åŒrediså®ä¾‹åï¼Œé…ç½®ä¸»ä»å…³ç³»å¦‚ä¸‹</li></ul><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment"># Redis5.0ä»¥å‰</span><br>slaveof <span class="hljs-variable">&lt;masterip&gt;</span> <span class="hljs-variable">&lt;masterport&gt;</span><br><span class="hljs-comment"># Redis5.0ä»¥å</span><br>replicaof <span class="hljs-variable">&lt;masterip&gt;</span> <span class="hljs-variable">&lt;masterport&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p><ul><li>Replication Idï¼šç®€ç§°replidï¼Œæ˜¯æ•°æ®é›†çš„æ ‡è®°ï¼Œreplidä¸€è‡´åˆ™æ˜¯åŒä¸€æ•°æ®é›†ã€‚<em>æ¯ä¸ªmasteréƒ½æœ‰å”¯ä¸€çš„replidï¼Œslaveåˆ™ä¼šç»§æ‰¿masterèŠ‚ç‚¹çš„replid</em></li><li>offsetï¼šåç§»é‡ï¼Œéšç€è®°å½•åœ¨repl_baklogä¸­çš„æ•°æ®å¢å¤šè€Œé€æ¸å¢å¤§ã€‚slaveå®ŒæˆåŒæ­¥æ—¶ä¹Ÿä¼šè®°å½•å½“å‰åŒæ­¥çš„offsetã€‚å¦‚æœslaveçš„offsetå°äºmasterçš„offsetï¼Œè¯´æ˜slaveæ•°æ®è½åäºmasterï¼Œéœ€è¦æ›´æ–°ã€‚</li><li>RDB: Redis Database Backupï¼ŒRedisæ•°æ®åº“å¤‡ä»½æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¿å­˜äº†æŸä¸ªæ—¶é—´ç‚¹çš„Redisæ•°æ®åº“çš„æ•°æ®ã€‚</li></ul><p>å…¨é‡åŒæ­¥ï¼šä¸»ä»ç¬¬ä¸€æ¬¡å»ºç«‹è¿æ¥æ—¶ï¼Œæ‰§è¡Œå…¨é‡åŒæ­¥ï¼Œå°†masterèŠ‚ç‚¹çš„æ‰€æœ‰æ•°æ®éƒ½æ‹·è´ç»™slaveèŠ‚ç‚¹<br />å¢é‡åŒæ­¥ï¼šå…¨é‡åŒæ­¥éœ€è¦å…ˆåšRDBï¼Œç„¶åå°†RDBæ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ è¾“ä¸ªslaveï¼Œæˆæœ¬å¤ªé«˜ã€‚å› æ­¤é™¤äº†ç¬¬ä¸€æ¬¡åšå…¨é‡åŒæ­¥ï¼Œå…¶å®ƒå¤§å¤šæ•°æ—¶å€™slaveä¸masteréƒ½æ˜¯åšå¢é‡åŒæ­¥ã€‚</p><p>ä¸»ä»åŒæ­¥æ­¥éª¤ï¼š</p><ul><li>slaveèŠ‚ç‚¹è¯·æ±‚å¢é‡åŒæ­¥</li><li>masterèŠ‚ç‚¹åˆ¤æ–­replidï¼Œå‘ç°ä¸ä¸€è‡´ï¼Œæ‹’ç»å¢é‡åŒæ­¥ï¼Œè¿”å›masterçš„replidå’Œoffset</li><li>masterå°†å®Œæ•´å†…å­˜æ•°æ®ç”ŸæˆRDBï¼Œå‘é€RDBåˆ°slave</li><li>slaveæ¸…ç©ºæœ¬åœ°æ•°æ®ï¼ŒåŠ è½½masterçš„RDB</li><li>masterå°†slaveåŠ è½½RDBæœŸé—´çš„å‘½ä»¤è®°å½•åœ¨repl_baklogï¼Œå¹¶å°†å‘½ä»¤å‘é€ç»™slave</li><li>slaveæ‰§è¡Œæ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œä¿æŒä¸masterä¹‹é—´çš„åŒæ­¥</li></ul><p>repl_baklogåŸç†ï¼š<br />è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•°ç»„ï¼Œåªä¸è¿‡æ•°ç»„æ˜¯ç¯å½¢ï¼Œä¹Ÿå°±æ˜¯è¯´è§’æ ‡åˆ°è¾¾æ•°ç»„æœ«å°¾åï¼Œä¼šå†æ¬¡ä»0å¼€å§‹è¯»å†™ï¼Œè¿™æ ·æ•°ç»„å¤´éƒ¨çš„æ•°æ®å°±ä¼šè¢«è¦†ç›–ã€‚è¯¥æ–‡ä»¶è®°å½•äº†rediså¤„ç†è¿‡çš„å‘½ä»¤ï¼Œä»¥åŠmasterå’Œslaveçš„offsetï¼Œä»–ä»¬ä¹‹é—´offsetçš„å·®å¼‚ï¼Œå°±æ˜¯slaveè¦å¢é‡æ‹·è´çš„æ•°æ®<br />éšç€ä¸æ–­æœ‰æ•°æ®å†™å…¥ï¼Œmasterçš„offseté€æ¸å˜å¤§ï¼Œslaveä¹Ÿä¸æ–­çš„æ‹·è´ï¼Œè¿½èµ¶masterçš„offset<br />å¦‚æœslaveå‡ºç°ç½‘ç»œé˜»å¡ï¼Œå¯¼è‡´è¿˜æ²¡æœ‰åŒæ­¥çš„æ•°æ®è¢«è¦†ç›–ï¼Œrepl_baklogæ‰¾ä¸åˆ°slaveçš„offsetï¼Œé‚£ä¹ˆåªèƒ½å†æ¬¡åšå…¨é‡åŒæ­¥</p><p>ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå¢é‡åŒæ­¥ï¼Ÿ</p><ul><li>slaveèŠ‚ç‚¹æ–­å¼€åˆæ¢å¤ï¼Œå¹¶ä¸”åœ¨repl_baklogä¸­èƒ½æ‰¾åˆ°offsetæ—¶</li></ul><p>å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ä¼˜åŒ–Redisä¸»ä»å°±é›†ç¾¤ï¼š</p><ul><li>åœ¨masterä¸­é…ç½®<code>repl-diskless-sync  yes</code>å¯ç”¨æ— ç£ç›˜å¤åˆ¶ï¼Œé¿å…å…¨é‡åŒæ­¥æ—¶çš„ç£ç›˜IOã€‚</li><li>Rediså•èŠ‚ç‚¹ä¸Šçš„å†…å­˜å ç”¨ä¸è¦å¤ªå¤§ï¼Œå‡å°‘RDBå¯¼è‡´çš„è¿‡å¤šç£ç›˜IO</li><li>é€‚å½“æé«˜repl_baklogçš„å¤§å°ï¼Œå‘ç°slaveå®•æœºæ—¶å°½å¿«å®ç°æ•…éšœæ¢å¤ï¼Œå°½å¯èƒ½é¿å…å…¨é‡åŒæ­¥</li><li>é™åˆ¶ä¸€ä¸ªmasterä¸Šçš„slaveèŠ‚ç‚¹æ•°é‡ï¼Œå¦‚æœå®åœ¨æ˜¯å¤ªå¤šslaveï¼Œåˆ™å¯ä»¥é‡‡ç”¨ä¸»-ä»-ä»é“¾å¼ç»“æ„ï¼Œå‡å°‘masterå‹åŠ›</li></ul><h2 id="rediså“¨å…µ"><a class="markdownIt-Anchor" href="#rediså“¨å…µ"></a> Rediså“¨å…µ</h2><p>Redisæä¾›äº†å“¨å…µï¼ˆSentinelï¼‰æœºåˆ¶æ¥ç›‘æ§ä¸»ä»é›†ç¾¤ç›‘æ§çŠ¶æ€ï¼Œç¡®ä¿é›†ç¾¤çš„é«˜å¯ç”¨æ€§ã€‚<br />å“¨å…µçš„ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li>çŠ¶æ€ç›‘æ§ï¼šSentinel ä¼šä¸æ–­æ£€æŸ¥æ‚¨çš„masterå’Œslaveæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</li><li>æ•…éšœæ¢å¤ï¼ˆfailoverï¼‰ï¼šå¦‚æœmasteræ•…éšœï¼ŒSentinelä¼šå°†ä¸€ä¸ªslaveæå‡ä¸ºmasterã€‚å½“æ•…éšœå®ä¾‹æ¢å¤åä¼šæˆä¸ºslave</li><li>çŠ¶æ€é€šçŸ¥ï¼šSentinelå……å½“Rediså®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æ¥æºï¼Œå½“é›†ç¾¤å‘ç”Ÿfailoveræ—¶ï¼Œä¼šå°†æœ€æ–°é›†ç¾¤ä¿¡æ¯æ¨é€ç»™Redisçš„å®¢æˆ·ç«¯</li></ul><p>sentinelå¦‚ä½•ç›‘æ§ï¼Ÿ<br />SentinelåŸºäºå¿ƒè·³æœºåˆ¶ç›‘æµ‹æœåŠ¡çŠ¶æ€ï¼Œæ¯éš”1ç§’å‘é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹å‘é€pingå‘½ä»¤ï¼Œå¹¶é€šè¿‡å®ä¾‹çš„å“åº”ç»“æœæ¥åšå‡ºåˆ¤æ–­ï¼š</p><ul><li>ä¸»è§‚ä¸‹çº¿ï¼ˆsdownï¼‰ï¼šå¦‚æœæŸsentinelèŠ‚ç‚¹å‘ç°æŸRedisèŠ‚ç‚¹æœªåœ¨è§„å®šæ—¶é—´å“åº”ï¼Œåˆ™è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿ã€‚</li><li>å®¢è§‚ä¸‹çº¿(odown)ï¼šè‹¥è¶…è¿‡æŒ‡å®šæ•°é‡ï¼ˆé€šè¿‡quorumè®¾ç½®ï¼‰çš„sentineléƒ½è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿ï¼Œåˆ™è¯¥èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿ã€‚quorumå€¼æœ€å¥½è¶…è¿‡SentinelèŠ‚ç‚¹æ•°é‡çš„ä¸€åŠï¼ŒSentinelèŠ‚ç‚¹æ•°é‡è‡³å°‘3å°ã€‚</li></ul><p>masterå‡ºç°æ•…éšœå¦‚ä½•å¤„ç†ï¼Ÿ</p><ul><li>é¦–å…ˆè¦åœ¨sentinelä¸­é€‰å‡ºä¸€ä¸ªleaderï¼Œç”±leaderæ‰§è¡Œfailover(ä¸‹é¢3æ­¥)</li><li>leaderé€‰å®šä¸€ä¸ªslaveä½œä¸ºæ–°çš„masterï¼Œæ‰§è¡Œslaveof nooneï¼Œåˆ‡æ¢åˆ°masteræ¨¡å¼</li><li>ç„¶åè®©æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‰§è¡Œslaveof æ–°master</li><li>ä¿®æ”¹æ•…éšœèŠ‚ç‚¹é…ç½®ï¼Œæ·»åŠ slaveof æ–°master</li></ul><p>sentinelé€‰ä¸¾leaderçš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç¥¨æ•°è¶…è¿‡sentinelèŠ‚ç‚¹æ•°é‡1åŠ</li><li>ç¥¨æ•°è¶…è¿‡quorumæ•°é‡</li><li>ä¸€èˆ¬æƒ…å†µä¸‹æœ€å…ˆå‘èµ·failoverçš„èŠ‚ç‚¹ä¼šå½“é€‰</li></ul><p>leaderä»slaveä¸­é€‰å–masterçš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>é¦–å…ˆä¼šåˆ¤æ–­slaveèŠ‚ç‚¹ä¸masterèŠ‚ç‚¹æ–­å¼€æ—¶é—´é•¿çŸ­ï¼Œå¦‚æœè¶…è¿‡down-after-milliseconds * 10åˆ™ä¼šæ’é™¤è¯¥slaveèŠ‚ç‚¹</li><li>ç„¶ååˆ¤æ–­slaveèŠ‚ç‚¹çš„slave-priorityå€¼ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¦‚æœæ˜¯0åˆ™æ°¸ä¸å‚ä¸é€‰ä¸¾ï¼ˆé»˜è®¤éƒ½æ˜¯1ï¼‰ã€‚</li><li>å¦‚æœslave-prorityä¸€æ ·ï¼Œåˆ™åˆ¤æ–­slaveèŠ‚ç‚¹çš„offsetå€¼ï¼Œè¶Šå¤§è¯´æ˜æ•°æ®è¶Šæ–°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</li><li>æœ€åæ˜¯åˆ¤æ–­slaveèŠ‚ç‚¹çš„run_idå¤§å°ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆé€šè¿‡info serverå¯ä»¥æŸ¥çœ‹run_idï¼‰ã€‚</li></ul><h2 id="redisåˆ†ç‰‡é›†ç¾¤"><a class="markdownIt-Anchor" href="#redisåˆ†ç‰‡é›†ç¾¤"></a> Redisåˆ†ç‰‡é›†ç¾¤</h2><p>ä¸»ä»æ¨¡å¼å¯ä»¥è§£å†³é«˜å¯ç”¨ã€é«˜å¹¶å‘è¯»çš„é—®é¢˜ã€‚ä½†ä¾ç„¶æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼š</p><ul><li>æµ·é‡æ•°æ®å­˜å‚¨</li><li>é«˜å¹¶å‘å†™</li></ul><p>åˆ†ç‰‡é›†ç¾¤ç‰¹å¾ï¼š</p><ul><li>é›†ç¾¤ä¸­æœ‰å¤šä¸ªmasterï¼Œæ¯ä¸ªmasterä¿å­˜ä¸åŒåˆ†ç‰‡æ•°æ® ï¼Œè§£å†³æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜</li><li>æ¯ä¸ªmasteréƒ½å¯ä»¥æœ‰å¤šä¸ªslaveèŠ‚ç‚¹ ï¼Œç¡®ä¿é«˜å¯ç”¨</li><li>masterä¹‹é—´é€šè¿‡pingç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€ ï¼Œç±»ä¼¼å“¨å…µä½œç”¨</li><li>å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ•°æ®æ‰€åœ¨èŠ‚ç‚¹</li></ul><h3 id="æ•£åˆ—æ’æ§½"><a class="markdownIt-Anchor" href="#æ•£åˆ—æ’æ§½"></a> æ•£åˆ—æ’æ§½</h3><p>æ•°æ®è¦åˆ†ç‰‡å­˜å‚¨åˆ°ä¸åŒçš„RedisèŠ‚ç‚¹ï¼Œè‚¯å®šéœ€è¦æœ‰åˆ†ç‰‡çš„ä¾æ®ï¼Œè¿™æ ·ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™æ‰èƒ½çŸ¥é“å»å“ªä¸ªèŠ‚ç‚¹æŸ¥è¯¢ã€‚<br />å¾ˆå¤šæ•°æ®åˆ†ç‰‡éƒ½ä¼šé‡‡ç”¨ä¸€è‡´æ€§hashç®—æ³•ã€‚è€ŒRedisåˆ™æ˜¯åˆ©ç”¨æ•£åˆ—æ’æ§½ï¼ˆhash slotï¼‰çš„æ–¹å¼å®ç°æ•°æ®åˆ†ç‰‡ã€‚</p><p>åœ¨Redisé›†ç¾¤ä¸­ï¼Œå…±æœ‰16384ä¸ªhash slotsï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªmasterèŠ‚ç‚¹éƒ½ä¼šåˆ†é…ä¸€å®šæ•°é‡çš„hash slotsã€‚<br />å½“æˆ‘ä»¬è¯»å†™æ•°æ®æ—¶ï¼ŒRedisåŸºäº<code>CRC16</code> ç®—æ³•å¯¹keyåšhashè¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœä¸16384å–ä½™ï¼Œå°±è®¡ç®—å‡ºäº†è¿™ä¸ªkeyçš„slotå€¼ã€‚ç„¶ååˆ°slotæ‰€åœ¨çš„RedisèŠ‚ç‚¹æ‰§è¡Œè¯»å†™æ“ä½œã€‚<br />ä¸è¿‡hash slotçš„è®¡ç®—ä¹Ÿåˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å½“keyä¸­åŒ…å«{}æ—¶ï¼Œæ ¹æ®{}ä¹‹é—´çš„å­—ç¬¦ä¸²è®¡ç®—hash slot (keyæ˜¯userï¼Œåˆ™æ ¹æ®useræ¥è®¡ç®—hash slot)</li><li>å½“keyä¸­ä¸åŒ…å«{}æ—¶ï¼Œåˆ™æ ¹æ®æ•´ä¸ªkeyå­—ç¬¦ä¸²è®¡ç®—hash slot (keyæ˜¯user:{age}ï¼Œåˆ™æ ¹æ®ageæ¥è®¡ç®—hash slot)</li></ul><p>åˆ†ç‰‡é›†ç¾¤è¿›è¡Œæ•…éšœæ¢å¤æ—¶ï¼Œäº’ç›¸é€šè¿‡pingçš„æ–¹å¼åšå¿ƒè·³æ£€æµ‹ï¼Œè¶…æ—¶æœªå›åº”çš„èŠ‚ç‚¹ä¼šè¢«æ ‡è®°ä¸ºä¸‹çº¿çŠ¶æ€ã€‚å½“å‘ç°masterä¸‹çº¿æ—¶ï¼Œä¼šå°†è¿™ä¸ªmasterçš„æŸä¸ªslaveæå‡ä¸ºmasterã€‚</p><p>Redisåˆ†ç‰‡é›†ç¾¤å¦‚ä½•åˆ¤æ–­æŸä¸ªkeyåº”è¯¥åœ¨å“ªä¸ªå®ä¾‹ï¼Ÿ</p><ul><li>å°†16384ä¸ªæ’æ§½åˆ†é…åˆ°ä¸åŒçš„å®ä¾‹</li><li>æ ¹æ®keyè®¡ç®—å“ˆå¸Œå€¼ï¼Œå¯¹16384å–ä½™</li><li>ä½™æ•°ä½œä¸ºæ’æ§½ï¼Œå¯»æ‰¾æ’æ§½æ‰€åœ¨å®ä¾‹å³å¯</li></ul><p>å¦‚ä½•å°†åŒä¸€ç±»æ•°æ®å›ºå®šçš„ä¿å­˜åœ¨åŒä¸€ä¸ªRediså®ä¾‹ï¼Ÿ</p><ul><li>Redisè®¡ç®—keyçš„æ’æ§½å€¼æ—¶ä¼šåˆ¤æ–­keyä¸­æ˜¯å¦åŒ…å«{}ï¼Œå¦‚æœæœ‰åˆ™åŸºäº{}å†…çš„å­—ç¬¦è®¡ç®—æ’æ§½</li><li>æ•°æ®çš„keyä¸­å¯ä»¥åŠ å…¥{ç±»å‹}ï¼Œä¾‹å¦‚keyéƒ½ä»¥{typeId}ä¸ºå‰ç¼€ï¼Œè¿™æ ·åŒç±»å‹æ•°æ®è®¡ç®—çš„æ’æ§½ä¸€å®šç›¸åŒ</li></ul><h2 id="redisæ•°æ®ç»“æ„"><a class="markdownIt-Anchor" href="#redisæ•°æ®ç»“æ„"></a> Redisæ•°æ®ç»“æ„</h2><p>å¸¸ç”¨çš„Redisæ•°æ®ç±»å‹æœ‰5ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šStringã€Listã€Setã€SortedSetã€Hash<br />ä¸ç®¡æ˜¯ä»»ä½•ä¸€ç§æ•°æ®ç±»å‹ï¼Œæœ€ç»ˆéƒ½ä¼šå°è£…ä¸ºRedisObjectæ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ç§ç»“æ„ä½“ï¼ŒåŒ…å«äº†å¯¹è±¡ç±»å‹ã€ç¼–ç æ–¹å¼ã€æŒ‡å‘çœŸå®æ•°æ®çš„æŒ‡é’ˆç­‰ä¿¡æ¯ã€‚</p><h3 id="skiplist"><a class="markdownIt-Anchor" href="#skiplist"></a> SkipList</h3><p>è·³è¡¨çš„ç‰¹ç‚¹ï¼š</p><ul><li>è·³è¡¨æ˜¯ä¸€ä¸ªæœ‰åºçš„åŒå‘é“¾è¡¨</li><li>æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«å¤šå±‚æŒ‡é’ˆ,å±‚æ•°æ˜¯1åˆ°32ä¹‹é—´çš„éšæœºæ•°</li><li>ä¸åŒå±‚æŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è·¨åº¦ä¸åŒ,å±‚çº§è¶Šé«˜,è·¨åº¦è¶Šå¤§</li><li>å¢åˆ æ”¹æŸ¥æ•ˆç‡ä¸çº¢é»‘æ ‘åŸºæœ¬ä¸€è‡´,å®ç°å´æ›´ç®€å•ã€‚ä½†ç©ºé—´å¤æ‚åº¦æ›´é«˜</li></ul><p>ä¼ ç»Ÿé“¾è¡¨åªæœ‰æŒ‡å‘å‰åå…ƒç´ çš„æŒ‡é’ˆï¼Œå› æ­¤åªèƒ½é¡ºåºä¾æ¬¡è®¿é—®ã€‚å¦‚æœæŸ¥æ‰¾çš„å…ƒç´ åœ¨é“¾è¡¨ä¸­é—´ï¼ŒæŸ¥è¯¢çš„æ•ˆç‡ä¼šæ¯”è¾ƒä½ã€‚è€ŒSkipListåˆ™ä¸åŒï¼Œå®ƒå†…éƒ¨åŒ…å«è·¨åº¦ä¸åŒçš„å¤šçº§æŒ‡é’ˆï¼Œå¯ä»¥è®©æˆ‘ä»¬è·³è·ƒæŸ¥æ‰¾é“¾è¡¨ä¸­é—´çš„å…ƒç´ ï¼Œæ•ˆç‡éå¸¸é«˜ã€‚<br />æ¯”å¦‚ï¼ŒæŸäº›å…ƒç´ å«3ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªæŒ‡é’ˆè·¨åº¦åˆ†åˆ«ä¸º4,5,6<br />å¤šçº§æŒ‡é’ˆçš„æŸ¥è¯¢æ–¹å¼å°±é¿å…äº†ä¼ ç»Ÿé“¾è¡¨çš„é€ä¸ªéå†å¯¼è‡´çš„æŸ¥è¯¢æ•ˆç‡ä¸‹é™é—®é¢˜ã€‚åœ¨å¯¹æœ‰åºæ•°æ®åšéšæœºæŸ¥è¯¢å’Œæ’åºæ—¶æ•ˆç‡éå¸¸é«˜ã€‚</p><p>è·³è¡¨çš„ç»“æ„ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplist</span> &#123;<br>    <span class="hljs-comment">// å¤´å°¾èŠ‚ç‚¹æŒ‡é’ˆ</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *header, *tail;<br>    <span class="hljs-comment">// èŠ‚ç‚¹æ•°é‡</span><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> length;<br>    <span class="hljs-comment">// æœ€å¤§çš„ç´¢å¼•å±‚çº§</span><br>    <span class="hljs-type">int</span> level;<br>&#125; zskiplist;<br></code></pre></td></tr></table></figure><p>è·³è¡¨èŠ‚ç‚¹çš„æ•°æ®æœºæ„:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> &#123;<br>    sds ele; <span class="hljs-comment">// èŠ‚ç‚¹å­˜å‚¨çš„å­—ç¬¦ä¸²</span><br>    <span class="hljs-type">double</span> score;<span class="hljs-comment">// èŠ‚ç‚¹åˆ†æ•°ï¼Œæ’åºã€æŸ¥æ‰¾ç”¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *backward; <span class="hljs-comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistLevel</span> &#123;<br>        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">zskiplistNode</span> *forward; <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ</span><br>        <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> span; <span class="hljs-comment">// ç´¢å¼•è·¨åº¦</span><br>    &#125; level[]; <span class="hljs-comment">// å¤šçº§ç´¢å¼•æ•°ç»„</span><br>&#125; zskiplistNode;<br></code></pre></td></tr></table></figure><h3 id="sortedset"><a class="markdownIt-Anchor" href="#sortedset"></a> SortedSet</h3><p>SortedSet æ•°æ®ç»“æ„çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li>æ¯ç»„æ•°æ®éƒ½åŒ…å« score å’Œ member</li><li>member å”¯ä¸€</li><li>å¯æ ¹æ® score æ’åº</li></ul><p>SortedSetçš„åº•å±‚æ•°æ®ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ</p><ul><li>é¦–å…ˆSortedSetéœ€è¦èƒ½å­˜å‚¨scoreå’Œmemberå€¼ï¼Œè€Œä¸”è¦å¿«æ·çš„æ ¹æ®memberæŸ¥è¯¢scoreï¼Œå› æ­¤åº•å±‚æœ‰ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œä»¥memberä¸ºé”®ï¼Œä»¥scoreä¸ºvalue</li><li>å…¶æ¬¡SortedSetè¿˜éœ€è¦èƒ½æ ¹æ®scoreæ’åºï¼Œå› æ­¤åº•å±‚è¿˜ç»´æŠ¤äº†ä¸€ä¸ªè·³è¡¨ã€‚</li><li>å½“éœ€è¦æ ¹æ®memberæŸ¥è¯¢scoreæ—¶ï¼Œå°±å»å“ˆå¸Œè¡¨ä¸­æŸ¥è¯¢ï¼›</li><li>å½“éœ€è¦æ ¹æ®scoreæ’åºæŸ¥è¯¢æ—¶ï¼Œåˆ™åŸºäºè·³è¡¨æŸ¥è¯¢</li></ul><p>å› ä¸ºSortedSetåº•å±‚éœ€è¦ç”¨åˆ°ä¸¤ç§æ•°æ®ç»“æ„ï¼Œå¯¹å†…å­˜å ç”¨æ¯”è¾ƒé«˜ã€‚å› æ­¤Redisåº•å±‚ä¼šå¯¹SortedSetä¸­çš„å…ƒç´ å¤§å°åšåˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ä¼šé‡‡ç”¨ZipList(å‹ç¼©åˆ—è¡¨)æ¥ä»£æ›¿ï¼š</p><ul><li>SortSet ä¿å­˜çš„é”®å€¼å¯¹æ•°é‡å°‘äº 128 ä¸ªï¼›</li><li>æ¯ä¸ªå…ƒç´ çš„é•¿åº¦å°äº 64 å­—èŠ‚ã€‚</li></ul><h3 id="bitmap"><a class="markdownIt-Anchor" href="#bitmap"></a> Bitmap</h3><p>Bitmap çœ‹ä½œæ˜¯ä¸€ä¸ªå­˜å‚¨äºŒè¿›åˆ¶æ•°å­—ï¼ˆ0 å’Œ 1ï¼‰çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ä¸‹æ ‡å«åš offsetï¼ˆåç§»é‡ï¼‰ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼š<br />éœ€è¦ä¿å­˜çŠ¶æ€ä¿¡æ¯ï¼ˆ0/1 å³å¯è¡¨ç¤ºï¼‰çš„åœºæ™¯ï¼Œå¦‚ç”¨æˆ·ç­¾åˆ°æƒ…å†µã€æ´»è·ƒç”¨æˆ·æƒ…å†µã€ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡ï¼ˆæ¯”å¦‚æ˜¯å¦ç‚¹èµè¿‡æŸä¸ªè§†é¢‘ï¼‰ã€‚</p><p>ä½¿ç”¨ Bitmap ç»Ÿè®¡æ´»è·ƒç”¨æˆ·æ€ä¹ˆåšï¼Ÿ</p><ul><li>æƒ³è¦ä½¿ç”¨ Bitmap ç»Ÿè®¡æ´»è·ƒç”¨æˆ·çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥æœŸï¼ˆç²¾ç¡®åˆ°å¤©ï¼‰ä½œä¸º keyï¼Œç„¶åç”¨æˆ· ID ä¸º offsetï¼Œå¦‚æœå½“æ—¥æ´»è·ƒè¿‡å°±è®¾ç½®ä¸º 1ã€‚</li></ul><h2 id="rediså†…å­˜å›æ”¶"><a class="markdownIt-Anchor" href="#rediså†…å­˜å›æ”¶"></a> Rediså†…å­˜å›æ”¶</h2><p>Redisä¹‹æ‰€ä»¥æ€§èƒ½å¼ºï¼Œæœ€ä¸»è¦çš„åŸå› å°±æ˜¯åŸºäºå†…å­˜å­˜å‚¨ã€‚ç„¶è€Œå•èŠ‚ç‚¹çš„Rediså…¶å†…å­˜å¤§å°ä¸å®œè¿‡å¤§ï¼Œä¼šå½±å“æŒä¹…åŒ–æˆ–ä¸»ä»åŒæ­¥æ€§èƒ½ã€‚<br />Rediså†…éƒ¨ä¼šæœ‰ä¸¤å¥—å†…å­˜å›æ”¶çš„ç­–ç•¥ï¼š</p><ul><li>å†…å­˜è¿‡æœŸç­–ç•¥</li><li>å†…å­˜æ·˜æ±°ç­–ç•¥</li></ul><h3 id="å†…å­˜è¿‡æœŸç­–ç•¥"><a class="markdownIt-Anchor" href="#å†…å­˜è¿‡æœŸç­–ç•¥"></a> å†…å­˜è¿‡æœŸç­–ç•¥</h3><p>Redisé€šè¿‡expireå‘½ä»¤ç»™Keyè®¾ç½®TTLï¼ˆTime To Liveï¼‰ï¼Œå½“è¿‡æœŸæ—¶é—´åˆ°äº†ä»¥åï¼Œå†å»æŸ¥è¯¢æ•°æ®ï¼Œä¼šå‘ç°æ•°æ®å·²ç»ä¸å­˜åœ¨äº†ã€‚</p><p>Rediså¦‚ä½•åˆ¤æ–­KEYæ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ<br />Redisçš„æœ¬èº«æ˜¯é”®å€¼å‹æ•°æ®åº“ï¼Œå…¶æ‰€æœ‰æ•°æ®éƒ½å­˜åœ¨ä¸€ä¸ªredisDBçš„ç»“æ„ä½“ä¸­ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼š</p><ul><li>dictï¼šä¿å­˜Redisä¸­æ‰€æœ‰çš„é”®å€¼å¯¹</li><li>expiresï¼šä¿å­˜Redisä¸­æ‰€æœ‰çš„è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„KEYåŠå…¶åˆ°æœŸæ—¶é—´ï¼ˆå†™å…¥æ—¶é—´+TTLï¼‰<br />æ‰€ä»¥å¯ä»¥å»expiresæŸ¥è¯¢è¿‡æœŸæ—¶é—´å³å¯</li></ul><p>TTLåˆ°æœŸå°±ä¼šç«‹å³åˆ é™¤Keyå—ï¼Ÿ<br />Rediså¹¶ä¸ä¼šå®æ—¶ç›‘æµ‹keyçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨keyè¿‡æœŸåç«‹åˆ»åˆ é™¤ã€‚è€Œæ˜¯é‡‡ç”¨ä¸¤ç§å»¶è¿Ÿåˆ é™¤çš„ç­–ç•¥ï¼š<br />æƒ°æ€§åˆ é™¤ï¼šå½“æœ‰å‘½ä»¤éœ€è¦æ“ä½œä¸€ä¸ªkeyçš„æ—¶å€™ï¼Œæ£€æŸ¥è¯¥keyçš„å­˜æ´»æ—¶é—´ï¼Œå¦‚æœå·²ç»è¿‡æœŸæ‰æ‰§è¡Œåˆ é™¤ã€‚<br />å‘¨æœŸåˆ é™¤ï¼šé€šè¿‡ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå‘¨æœŸæ€§çš„æŠ½æ ·éƒ¨åˆ†æœ‰TTLçš„keyï¼Œå¦‚æœè¿‡æœŸåˆ™æ‰§è¡Œåˆ é™¤ã€‚</p><p>å‘¨æœŸåˆ é™¤çš„å®šæ—¶ä»»åŠ¡æ‰§è¡Œå‘¨æœŸæœ‰ä¸¤ç§ï¼š<br />SLOWæ¨¡å¼ï¼šé»˜è®¤æ‰§è¡Œé¢‘ç‡ä¸ºæ¯ç§’10æ¬¡ï¼Œä½†æ¯æ¬¡æ‰§è¡Œæ—¶é•¿ä¸èƒ½è¶…è¿‡25msï¼Œå—server.hzå‚æ•°å½±å“ã€‚<br />FASTæ¨¡å¼ï¼šé¢‘ç‡ä¸å›ºå®šï¼Œè·ŸéšRediså†…éƒ¨IOäº‹ä»¶å¾ªç¯æ‰§è¡Œã€‚ä¸¤æ¬¡ä»»åŠ¡ä¹‹é—´é—´éš”ä¸ä½äº2msï¼Œæ‰§è¡Œæ—¶é•¿ä¸è¶…è¿‡1msã€‚</p><h3 id="å†…å­˜æ·˜æ±°ç­–ç•¥"><a class="markdownIt-Anchor" href="#å†…å­˜æ·˜æ±°ç­–ç•¥"></a> å†…å­˜æ·˜æ±°ç­–ç•¥</h3><p>ä»…ä»…ä¾é è¿‡æœŸKEYæ¸…ç†æ˜¯ä¸å¤Ÿçš„ï¼Œå†…å­˜å¯èƒ½å¾ˆå¿«å°±è¾¾åˆ°ä¸Šé™ã€‚å› æ­¤Rediså…è®¸è®¾ç½®å†…å­˜å‘Šè­¦é˜ˆå€¼ï¼Œå½“å†…å­˜ä½¿ç”¨è¾¾åˆ°é˜ˆå€¼æ—¶å°±ä¼šä¸»åŠ¨æŒ‘é€‰éƒ¨åˆ†KEYåˆ é™¤ä»¥é‡Šæ”¾æ›´å¤šå†…å­˜ã€‚è¿™å«åšå†…å­˜æ·˜æ±°æœºåˆ¶ã€‚<br />å†…å­˜æ·˜æ±°çš„ç­–ç•¥æœ‰ï¼š<br />Redisæ”¯æŒ8ç§ä¸åŒçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼š</p><ul><li><p>noevictionï¼š ä¸æ·˜æ±°ä»»ä½•keyï¼Œä½†æ˜¯å†…å­˜æ»¡æ—¶ä¸å…è®¸å†™å…¥æ–°æ•°æ®ï¼Œé»˜è®¤å°±æ˜¯è¿™ç§ç­–ç•¥ã€‚</p></li><li><p>volatile-ttlï¼š å¯¹è®¾ç½®äº†TTLçš„keyï¼Œæ¯”è¾ƒkeyçš„å‰©ä½™TTLå€¼ï¼ŒTTLè¶Šå°è¶Šå…ˆè¢«æ·˜æ±°</p></li><li><p>allkeys-randomï¼šå¯¹å…¨ä½“key ï¼Œéšæœºè¿›è¡Œæ·˜æ±°ã€‚ä¹Ÿå°±æ˜¯ç›´æ¥ä»db-&gt;dictä¸­éšæœºæŒ‘é€‰</p></li><li><p>volatile-randomï¼šå¯¹è®¾ç½®äº†TTLçš„key ï¼Œéšæœºè¿›è¡Œæ·˜æ±°ã€‚ä¹Ÿå°±æ˜¯ä»db-&gt;expiresä¸­éšæœºæŒ‘é€‰ã€‚</p></li><li><p>allkeys-lruï¼š å¯¹å…¨ä½“keyï¼ŒåŸºäºLRUç®—æ³•è¿›è¡Œæ·˜æ±°</p></li><li><p>volatile-lruï¼š å¯¹è®¾ç½®äº†TTLçš„keyï¼ŒåŸºäºLRUç®—æ³•è¿›è¡Œæ·˜æ±°</p></li><li><p>allkeys-lfuï¼š å¯¹å…¨ä½“keyï¼ŒåŸºäºLFUç®—æ³•è¿›è¡Œæ·˜æ±°</p></li><li><p>volatile-lfuï¼š å¯¹è®¾ç½®äº†TTLçš„keyï¼ŒåŸºäºLFIç®—æ³•è¿›è¡Œæ·˜æ±°</p></li><li><p>LRUï¼ˆLeast Recently Usedï¼‰ï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ã€‚ç”¨å½“å‰æ—¶é—´å‡å»æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´ï¼Œè¿™ä¸ªå€¼è¶Šå¤§åˆ™æ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p></li><li><p>LFUï¼ˆLeast Frequently Usedï¼‰ï¼Œæœ€å°‘é¢‘ç‡ä½¿ç”¨ã€‚ä¼šç»Ÿè®¡æ¯ä¸ªkeyçš„è®¿é—®é¢‘ç‡ï¼Œå€¼è¶Šå°æ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p></li></ul><p>RedisObjectä¸­æœ‰lruå±æ€§ï¼Œç”¨äºè®°å½•æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´æˆ–è€…è®¿é—®é¢‘ç‡ï¼Œé€‰æ‹©LRUå’ŒLFUæ—¶è¿™ä¸ªå±æ€§çš„æ„ä¹‰ä¸åŒ</p><ul><li>LRUï¼šä»¥ç§’ä¸ºå•ä½è®°å½•æœ€è¿‘ä¸€æ¬¡è®¿é—®æ—¶é—´ï¼Œé•¿åº¦24bit</li><li>LFUï¼šé«˜16ä½ä»¥åˆ†é’Ÿä¸ºå•ä½è®°å½•æœ€è¿‘ä¸€æ¬¡è®¿é—®æ—¶é—´ï¼Œä½8ä½è®°å½•é€»è¾‘è®¿é—®æ¬¡æ•°</li></ul><p>ä¹‹æ‰€ä»¥å«åšé€»è¾‘è®¿é—®æ¬¡æ•°ï¼Œæ˜¯å› ä¸ºå¹¶ä¸æ˜¯æ¯æ¬¡keyè¢«è®¿é—®éƒ½è®¡æ•°ï¼Œè€Œæ˜¯é€šè¿‡è¿ç®—ï¼š</p><ul><li>â‘  ç”Ÿæˆ<code>[0,1)</code>ä¹‹é—´çš„éšæœºæ•°R</li><li>â‘¡ è®¡ç®— <code>1/(æ—§æ¬¡æ•° * lfu_log_factor + 1)</code>ï¼Œè®°å½•ä¸ºPï¼Œ lfu_log_factoré»˜è®¤ä¸º10</li><li>â‘¢ å¦‚æœ <code>R &lt; P</code> ï¼Œåˆ™è®¡æ•°å™¨ +1ï¼Œä¸”æœ€å¤§ä¸è¶…è¿‡255</li><li>â‘£ è®¿é—®æ¬¡æ•°ä¼šéšæ—¶é—´è¡°å‡ï¼Œè·ç¦»ä¸Šä¸€æ¬¡è®¿é—®æ—¶é—´æ¯éš” lfu_decay_time åˆ†é’Ÿ(é»˜è®¤1) ï¼Œè®¡æ•°å™¨-1<br />é€»è¾‘è®¿é—®æ¬¡æ•°è¶Šå¤§ï¼Œè¯´æ˜å•ä½æ—¶é—´å†…è®¿é—®æ¬¡æ•°è¶Šå¤šï¼Œæ‰€ä»¥æ›´èƒ½<strong>ååº”Keyçš„é‡è¦æ€§</strong></li></ul><h2 id="redisç¼“å­˜"><a class="markdownIt-Anchor" href="#redisç¼“å­˜"></a> Redisç¼“å­˜</h2><h3 id="ç¼“å­˜ä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#ç¼“å­˜ä¸€è‡´æ€§"></a> ç¼“å­˜ä¸€è‡´æ€§</h3><p>ç¼“å­˜çš„é€šç”¨æ¨¡å‹æœ‰ä¸‰ç§ï¼š</p><ul><li>Cache Asideï¼ˆç”¨çš„æœ€å¤šï¼‰ï¼šæœ‰ç¼“å­˜è°ƒç”¨è€…è‡ªå·±ç»´æŠ¤æ•°æ®åº“ä¸ç¼“å­˜çš„ä¸€è‡´æ€§ã€‚å³ï¼š<ul><li>æŸ¥è¯¢æ—¶ï¼šå‘½ä¸­åˆ™ç›´æ¥è¿”å›ï¼Œæœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“å¹¶å†™å…¥ç¼“å­˜</li><li>æ›´æ–°æ—¶ï¼šæ›´æ–°æ•°æ®åº“å¹¶ç›´æ¥åˆ é™¤ç¼“å­˜ï¼Œæœ‰æŸ¥è¯¢æ—¶å†æ›´æ–°ç¼“å­˜</li></ul></li><li>Read/Write Throughï¼šæ•°æ®åº“è‡ªå·±ç»´æŠ¤ä¸€ä»½ç¼“å­˜ï¼Œåº•å±‚å®ç°å¯¹è°ƒç”¨è€…é€æ˜ã€‚åº•å±‚å®ç°ï¼š<ul><li>æŸ¥è¯¢æ—¶ï¼šå‘½ä¸­åˆ™ç›´æ¥è¿”å›ï¼Œæœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“å¹¶å†™å…¥ç¼“å­˜</li><li>æ›´æ–°æ—¶ï¼šåˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ç›´æ¥æ›´æ–°æ•°æ®åº“ã€‚å­˜åœ¨åˆ™æ›´æ–°ç¼“å­˜ï¼ŒåŒæ­¥æ›´æ–°æ•°æ®åº“</li></ul></li><li>Write Behind Cahingï¼šè¯»å†™æ“ä½œéƒ½ç›´æ¥æ“ä½œç¼“å­˜ï¼Œç”±çº¿ç¨‹å¼‚æ­¥çš„å°†ç¼“å­˜æ•°æ®åŒæ­¥åˆ°æ•°æ®åº“</li></ul><p>æ›´æ–°æ—¶å…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜è¿˜æ˜¯å…ˆåˆ é™¤ç¼“å­˜å†æ›´æ–°æ•°æ®åº“ï¼Ÿ</p><ul><li>å¦‚æœå…ˆåˆ é™¤ç¼“å­˜å†æ›´æ–°æ•°æ®åº“ï¼Œå‡å¦‚åˆšåˆ é™¤ç¼“å­˜ï¼Œæ¥äº†ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯·æ±‚ä¼šå‘ç°ç¼“å­˜ä¸å­˜åœ¨ï¼Œå°±ä¼šå»æ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™æ—¶æ•°æ®åº“è¿˜æ²¡æœ‰æ›´æ–°ï¼ŒæŸ¥è¯¢åˆ°çš„æ•°æ®æ˜¯æ—§æ•°æ®ï¼Œç„¶åå°†æ—§æ•°æ®å†™å…¥ç¼“å­˜ï¼Œç„¶åæ­¤æ—¶æ•°æ®åº“æ›´æ–°äº†ï¼Œç¼“å­˜è¿˜æ˜¯æ—§æ•°æ®ã€‚å°±ä¼šå¯¼è‡´ä¸ä¸€è‡´ã€‚</li><li>å¦‚æœå…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜ï¼Œä¹Ÿæœ‰å¼‚å¸¸æƒ…å†µï¼Œæ¯”å¦‚çº¿ç¨‹1æŸ¥è¯¢ç¼“å­˜æœªå‘½ä¸­ï¼Œäºæ˜¯å»æŸ¥è¯¢æ•°æ®åº“ï¼ŒæŸ¥è¯¢åˆ°æ—§æ•°æ®ï¼Œçº¿ç¨‹1å°†æ•°æ®å†™å…¥ç¼“å­˜ä¹‹å‰ï¼Œçº¿ç¨‹2æ¥äº†ï¼Œæ›´æ–°æ•°æ®åº“ï¼Œåˆ é™¤ç¼“å­˜ï¼Œçº¿ç¨‹1æ‰§è¡Œå†™å…¥ç¼“å­˜çš„æ“ä½œï¼Œå†™å…¥æ—§æ•°æ®ã€‚è¿™æ ·ä¹Ÿä¼šä¸ä¸€è‡´ã€‚</li></ul><p>ä½†æ˜¯å…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜å¼‚å¸¸æƒ…å†µå‘ç”Ÿçš„æ¡ä»¶æä¸ºè‹›åˆ»ï¼Œéœ€è¦çº¿ç¨‹1å†™å…¥ç¼“å­˜ä¹‹å‰ï¼Œçº¿ç¨‹2å®Œæˆæ›´æ–°æ•°æ®åº“å’Œåˆ é™¤ç¼“å­˜ä¸¤ä¸ªæ“ä½œï¼Œæ‰€ä»¥å¾ˆéš¾è§¦å‘ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>ç¼“å­˜ä¸€è‡´æ€§ç­–ç•¥çš„æœ€ä½³å®è·µæ–¹æ¡ˆï¼š</p><ol><li>ä½ä¸€è‡´æ€§éœ€æ±‚ï¼šä½¿ç”¨Redisçš„keyè¿‡æœŸæ¸…ç†æ–¹æ¡ˆ</li><li>é«˜ä¸€è‡´æ€§éœ€æ±‚ï¼šä¸»åŠ¨æ›´æ–°ï¼Œå¹¶ä»¥è¶…æ—¶å‰”é™¤ä½œä¸ºå…œåº•æ–¹æ¡ˆ<ul><li>è¯»æ“ä½œï¼š<ul><li>ç¼“å­˜å‘½ä¸­åˆ™ç›´æ¥è¿”å›</li><li>ç¼“å­˜æœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå¹¶å†™å…¥ç¼“å­˜ï¼Œè®¾å®šè¶…æ—¶æ—¶é—´</li></ul></li><li>å†™æ“ä½œï¼š<ul><li>å…ˆå†™æ•°æ®åº“ï¼Œç„¶åå†åˆ é™¤ç¼“å­˜</li><li>è¦ç¡®ä¿æ•°æ®åº“ä¸ç¼“å­˜æ“ä½œçš„åŸå­æ€§</li></ul></li></ul></li></ol><h3 id="ç¼“å­˜ç©¿é€"><a class="markdownIt-Anchor" href="#ç¼“å­˜ç©¿é€"></a> ç¼“å­˜ç©¿é€</h3><p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œä»è€Œå¯¼è‡´è¯·æ±‚ç©¿é€ç¼“å­˜ï¼Œæ— æ³•å»ºç«‹ç¼“å­˜ï¼Œæ°¸è¿œç›´æ¥è¯·æ±‚æ•°æ®åº“çš„é—®é¢˜ã€‚<br />å‡å¦‚æœ‰ä¸æ€€å¥½æ„çš„äººï¼Œå¼€å¯å¾ˆå¤šçº¿ç¨‹é¢‘ç¹çš„è®¿é—®ä¸€ä¸ªæ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨çš„æ•°æ®ã€‚ç”±äºç¼“å­˜ä¸å¯èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è¯·æ±‚éƒ½è®¿é—®æ•°æ®åº“ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´æ•°æ®åº“å› è¿‡é«˜çš„å‹åŠ›è€Œå®•æœºã€‚</p><p>è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><p><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong><br />å½“æ•°æ®åº“ä¹Ÿä¸å­˜åœ¨æ•°æ®æ—¶ï¼Œå°†ç©ºå€¼ç¼“å­˜åˆ°Redisï¼Œé¿å…é¢‘ç¹æŸ¥è¯¢æ•°æ®åº“ã€‚ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿ï¼Œç¼ºç‚¹æ˜¯é¢å¤–çš„å†…å­˜æ¶ˆè€—</p><p><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong><br />å¸ƒéš†è¿‡æ»¤æ˜¯ä¸€ç§æ•°æ®ç»Ÿè®¡çš„ç®—æ³•ï¼Œç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚ä½†æ˜¯å¸ƒéš†è¿‡æ»¤æ— éœ€å­˜å‚¨å…ƒç´ åˆ°é›†åˆï¼Œè€Œæ˜¯æŠŠå…ƒç´ æ˜ å°„åˆ°ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶æ•°ä½ä¸Šã€‚</p><ul><li>é¦–å…ˆéœ€è¦ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„äºŒè¿›åˆ¶æ•°ï¼Œé»˜è®¤æ¯ä¸€ä½éƒ½æ˜¯0</li><li>ç„¶åéœ€è¦Nä¸ªä¸åŒç®—æ³•çš„å“ˆå¸Œå‡½æ•°</li><li>å°†é›†åˆä¸­çš„å…ƒç´ æ ¹æ®Nä¸ªå“ˆå¸Œå‡½æ•°åšè¿ç®—ï¼Œå¾—åˆ°Nä¸ªæ•°å­—ï¼Œç„¶åå°†æ¯ä¸ªæ•°å­—å¯¹åº”çš„bitä½æ ‡è®°ä¸º1</li><li>è¦åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œåªéœ€è¦æŠŠå…ƒç´ æŒ‰ç…§ä¸Šè¿°æ–¹å¼è¿ç®—ï¼Œåˆ¤æ–­å¯¹åº”çš„bitä½æ˜¯å¦æ˜¯1å³å¯</li></ul><p>å¸ƒéš†è¿‡æ»¤å™¨çš„ç‰¹ç‚¹</p><ul><li>å½“å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºå…ƒç´ ä¸å­˜åœ¨æ—¶ï¼Œå®ƒè‚¯å®šä¸å­˜åœ¨</li><li>å½“å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºå…ƒç´ å­˜åœ¨æ—¶ï¼Œå®ƒå¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼ˆå­˜åœ¨å“ˆå¸Œç¢°æ’ï¼‰</li></ul><h3 id="ç¼“å­˜é›ªå´©"><a class="markdownIt-Anchor" href="#ç¼“å­˜é›ªå´©"></a> ç¼“å­˜é›ªå´©</h3><p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨åŒä¸€æ—¶æ®µå¤§é‡çš„ç¼“å­˜keyåŒæ—¶å¤±æ•ˆæˆ–è€…RedisæœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åˆ°è¾¾æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§å‹åŠ›ã€‚</p><p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼š</p><ul><li>ç»™ä¸åŒçš„Keyçš„TTLæ·»åŠ éšæœºå€¼ï¼Œè¿™æ ·KEYçš„è¿‡æœŸæ—¶é—´ä¸åŒï¼Œä¸ä¼šå¤§é‡KEYåŒæ—¶è¿‡æœŸ</li><li>åˆ©ç”¨Redisé›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§ï¼Œé¿å…ç¼“å­˜æœåŠ¡å®•æœº</li><li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥</li><li>ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜ï¼ˆå¦‚æµè§ˆå™¨çº§åˆ«ç¼“å­˜ã€nginxçº§åˆ«ç¼“å­˜ã€jvmæœ¬åœ°ç¼“å­˜ç­‰ï¼‰ï¼Œæ¯”å¦‚å…ˆæŸ¥è¯¢æœ¬åœ°ç¼“å­˜ï¼Œæœ¬åœ°ç¼“å­˜æœªå‘½ä¸­å†æŸ¥è¯¢Redisï¼ŒRedisæœªå‘½ä¸­å†æŸ¥è¯¢æ•°æ®åº“ã€‚å³ä¾¿Rediså®•æœºï¼Œä¹Ÿè¿˜æœ‰æœ¬åœ°ç¼“å­˜å¯ä»¥æŠ—å‹åŠ›</li></ul><h3 id="ç¼“å­˜å‡»ç©¿"><a class="markdownIt-Anchor" href="#ç¼“å­˜å‡»ç©¿"></a> ç¼“å­˜å‡»ç©¿</h3><p>ç¼“å­˜å‡»ç©¿é—®é¢˜ä¹Ÿå«çƒ­ç‚¹Keyé—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªè¢«é«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒå¤æ‚çš„keyçªç„¶å¤±æ•ˆäº†ï¼Œæ— æ•°çš„è¯·æ±‚è®¿é—®ä¼šåœ¨ç¬é—´ç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å†²å‡»ã€‚</p><p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><ul><li>äº’æ–¥é”ï¼šç»™é‡å»ºç¼“å­˜é€»è¾‘åŠ é”ï¼Œé¿å…å¤šçº¿ç¨‹åŒæ—¶æŒ‡å‘</li><li>é€»è¾‘è¿‡æœŸï¼šçƒ­ç‚¹keyä¸è¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåœ¨æ´»åŠ¨ç»“æŸåæ‰‹åŠ¨åˆ é™¤ã€‚</li></ul><p>å¦‚ä½•ä¿è¯ç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§ï¼Ÿ<br />ç­”ï¼šç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§å¾ˆéš¾ä¿è¯å¼ºä¸€è‡´ï¼Œåªèƒ½å°½å¯èƒ½é™ä½ä¸ä¸€è‡´çš„æ¦‚ç‡ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´ã€‚æˆ‘ä»¬é¡¹ç›®ä¸­é‡‡ç”¨çš„æ˜¯Cache Asideæ¨¡å¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨æ›´æ–°æ•°æ®åº“ä¹‹ååˆ é™¤ç¼“å­˜ï¼›åœ¨æŸ¥è¯¢æ—¶å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœæœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“å¹¶å†™å…¥ç¼“å­˜ã€‚åŒæ—¶æˆ‘ä»¬ä¼šç»™ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ä½œä¸ºå…œåº•æ–¹æ¡ˆï¼Œå¦‚æœçœŸçš„å‡ºç°äº†ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¼“å­˜è¿‡æœŸæ¥ä¿è¯æœ€ç»ˆä¸€è‡´ã€‚</p><p>è¿½é—®ï¼šä¸ºä»€ä¹ˆä¸é‡‡ç”¨å»¶è¿ŸåŒåˆ æœºåˆ¶ï¼Ÿ<br />ç­”ï¼šå»¶è¿ŸåŒåˆ çš„ç¬¬ä¸€æ¬¡åˆ é™¤å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œç¬¬äºŒæ¬¡é‡‡ç”¨å»¶è¿Ÿåˆ é™¤ä¸»è¦æ˜¯è§£å†³æ•°æ®åº“ä¸»ä»åŒæ­¥çš„å»¶è¿Ÿé—®é¢˜ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯æ•°æ®åº“ä¸»ä»çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ç¼“å­˜åŒæ­¥æ— å…³ã€‚æ—¢ç„¶ä¸»èŠ‚ç‚¹æ•°æ®å·²ç»æ›´æ–°ï¼ŒRedisçš„ç¼“å­˜ç†åº”æ›´æ–°ã€‚è€Œä¸”å»¶è¿ŸåŒåˆ ä¼šå¢åŠ ç¼“å­˜ä¸šåŠ¡å¤æ‚åº¦ï¼Œä¹Ÿæ²¡èƒ½å®Œå…¨é¿å…ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼ŒæŠ•å…¥å›æŠ¥æ¯”å¤ªä½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ é™¤é“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </title>
    <link href="/2024/10/12/%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/"/>
    <url>/2024/10/12/%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ é™¤é“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "><a class="markdownIt-Anchor" href="#åˆ é™¤é“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "></a> åˆ é™¤é“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </h2><!-- TOC --><ul><li><a href="#%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0">åˆ é™¤é“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-list-ii/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨çš„å¤´ head ï¼Œ åˆ é™¤åŸå§‹é“¾è¡¨ä¸­æ‰€æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªç•™ä¸‹ä¸åŒçš„æ•°å­— ã€‚è¿”å› å·²æ’åºçš„é“¾è¡¨ ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[1,2,3,3,4,4,5]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2,5]</span><br><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åˆ›å»ºä¸€ä¸ªå“¨å…µèŠ‚ç‚¹dummy,ç„¶åä½¿å¾—<code>dummy-&gt;next</code>æŒ‡å‘<code>head</code>ï¼Œ<code>cur</code>æŒ‡å‘<code>dummy</code>ï¼Œå½“<code>cur-&gt;next</code>å’Œ<code>cur-&gt;next-&gt;next</code>ä¸ä¸ºç©ºæ—¶ï¼š</p><ul><li>å¦‚æœ<code>cur-&gt;next-&gt;val</code>å’Œ<code>cur-&gt;next-&gt;next-&gt;val</code>ç›¸ç­‰ï¼Œè®°å½•è¿™ä¸ªå€¼ä¸ºx,å½“<code>cur-&gt;next-&gt;val</code>ç­‰äºxæ—¶ï¼Œ<code>cur-&gt;next=cur-&gt;next-&gt;next</code>ï¼Œè·³è¿‡é‡å¤çš„å…ƒç´ </li><li>å¦åˆ™,<code>cur=cur-&gt;next</code></li><li>æœ€åè¿”å›<code>dummy-&gt;next</code>å³å¯</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xl">class Solution &#123;<br>public:<br>    ListNode* deleteDuplicates(ListNode* head) &#123;<br>        <span class="hljs-keyword">if</span>(head==nullptr)<br>            return head;<br>        ListNode* dummy=new ListNode(-<span class="hljs-number">1</span>,head);<br>        ListNode* cur=dummy;<br>        <span class="hljs-function"><span class="hljs-title">while</span>(cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>&amp;&amp;cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>next)&#123;<br>            <span class="hljs-function"><span class="hljs-title">if</span>(cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">val</span>==cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>val)&#123;<br>                <span class="hljs-function"><span class="hljs-title">int</span> x=cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>val;<br>                <span class="hljs-function"><span class="hljs-title">while</span>(cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>&amp;&amp;cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>val==x)&#123;<br>                    <span class="hljs-function"><span class="hljs-title">cur</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>=cur-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>next;<br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-function"><span class="hljs-title">cur</span>=cur-&gt;</span>next;<br>            &#125;<br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">return</span> dummy-&gt;</span>next;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°è¦†ç›–å­ä¸²</title>
    <link href="/2024/10/05/%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2/"/>
    <url>/2024/10/05/%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å°è¦†ç›–å­ä¸²"><a class="markdownIt-Anchor" href="#æœ€å°è¦†ç›–å­ä¸²"></a> æœ€å°è¦†ç›–å­ä¸²</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2">æœ€å°è¦†ç›–å­ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/minimum-window-substring/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ã€ä¸€ä¸ªå­—ç¬¦ä¸² t ã€‚è¿”å› s ä¸­æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ s ä¸­ä¸å­˜åœ¨æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ ã€‚</p><p>æ³¨æ„ï¼š</p><p>å¯¹äº t ä¸­é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„å­å­—ç¬¦ä¸²ä¸­è¯¥å­—ç¬¦æ•°é‡å¿…é¡»ä¸å°‘äº t ä¸­è¯¥å­—ç¬¦æ•°é‡ã€‚<br />å¦‚æœ s ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚</p><p>e.g.</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;ADOBECODEBANC&quot;</span>, <span class="hljs-built_in">t</span> = <span class="hljs-string">&quot;ABC&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;BANC&quot;</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦æ€è·¯æ˜¯æ»‘åŠ¨çª—å£ã€‚åˆ›å»ºä¸¤ä¸ªå“ˆå¸Œè¡¨ç”¨æ¥ç»Ÿè®¡sæŸåŒºé—´å†…çš„å­ä¸²æ˜¯å¦èƒ½è¦†ç›–tã€‚ç„¶åå¼€å§‹æ»‘åŠ¨çª—å£ï¼Œä¸æ–­æ‰©å……å³è¾¹ç•Œï¼Œæ¯å½“èƒ½è¦†ç›–æ—¶ï¼Œæ”¶ç¼©å·¦è¾¹ç•Œï¼Œå¹¶æ›´æ–°ç­”æ¡ˆå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">string <span class="hljs-title">minWindow</span><span class="hljs-params">(string s, string t)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=s.<span class="hljs-built_in">size</span>();<br>        unordered_map&lt;<span class="hljs-type">char</span>,<span class="hljs-type">int</span>&gt; sp,tp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c:t)&#123;<br>            ++tp[c];<br>        &#125; <br>        function&lt;<span class="hljs-type">bool</span>()&gt; check=[&amp;]()&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> m:tp)&#123;<br>                <span class="hljs-keyword">if</span>(m.second&gt;sp[m.first])<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;;<br>        <span class="hljs-type">int</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> res=INT_MAX,resl=<span class="hljs-number">-1</span>,resr=<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span>(r&lt;n)&#123;<br>            ++sp[s[r]];<br>            <span class="hljs-keyword">while</span>(<span class="hljs-built_in">check</span>()&amp;&amp;l&lt;=r)&#123;<br>                <span class="hljs-type">int</span> len=r-l+<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span>(len&lt;res)&#123;<br>                    res=len;<br>                    resl=l;<br>                    resr=r;<br>                &#125;<br>                --sp[s[l]];<br>                ++l;<br>            &#125;<br>            ++r;<br>        &#125;<br>        <span class="hljs-keyword">return</span> resl==<span class="hljs-number">-1</span>? <span class="hljs-string">&quot;&quot;</span>:s.<span class="hljs-built_in">substr</span>(resl,res);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…‹éš†å›¾</title>
    <link href="/2024/09/29/%E5%85%8B%E9%9A%86%E5%9B%BE/"/>
    <url>/2024/09/29/%E5%85%8B%E9%9A%86%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="å…‹éš†å›¾"><a class="markdownIt-Anchor" href="#å…‹éš†å›¾"></a> å…‹éš†å›¾</h2><!-- TOC --><ul><li><a href="#%E5%85%8B%E9%9A%86%E5%9B%BE">å…‹éš†å›¾</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/clone-graph/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ æ— å‘ è¿é€š å›¾ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œè¯·ä½ è¿”å›è¯¥å›¾çš„ æ·±æ‹·è´ï¼ˆå…‹éš†ï¼‰ã€‚</p><p>å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«å®ƒçš„å€¼ valï¼ˆintï¼‰ å’Œå…¶é‚»å±…çš„åˆ—è¡¨</p><p>ç®€å•èµ·è§ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å’Œå®ƒçš„ç´¢å¼•ç›¸åŒã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¸º 1ï¼ˆval = 1ï¼‰ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹å€¼ä¸º 2ï¼ˆval = 2ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¯¥å›¾åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨é‚»æ¥åˆ—è¡¨è¡¨ç¤ºã€‚</p><p>é‚»æ¥åˆ—è¡¨ æ˜¯ç”¨äºè¡¨ç¤ºæœ‰é™å›¾çš„æ— åºåˆ—è¡¨çš„é›†åˆã€‚æ¯ä¸ªåˆ—è¡¨éƒ½æè¿°äº†å›¾ä¸­èŠ‚ç‚¹çš„é‚»å±…é›†ã€‚</p><p>ç»™å®šèŠ‚ç‚¹å°†å§‹ç»ˆæ˜¯å›¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå€¼ä¸º 1ï¼‰ã€‚ä½ å¿…é¡»å°† ç»™å®šèŠ‚ç‚¹çš„æ‹·è´ ä½œä¸ºå¯¹å…‹éš†å›¾çš„å¼•ç”¨è¿”å›ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦æ˜¯å®ç°æ·±æ‹·è´ï¼Œä¸»è¦æ€è·¯æ˜¯é€’å½’ã€‚é¦–å…ˆç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨è®°å½•èŠ‚ç‚¹æ˜¯å¦è®¿é—®è¿‡ï¼Œç„¶åå…‹éš†å½“å‰èŠ‚ç‚¹(newä¸€ä¸ªæ–°å†…å­˜)ï¼Œå¹¶åœ¨å“ˆå¸Œè¡¨ä¸­è®°å½•è¯¥èŠ‚ç‚¹ï¼Œç„¶åéå†æ‰€æœ‰é‚»å±…ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„é‚»å±…æ‹·è´ç»™å…‹éš†èŠ‚ç‚¹ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">class Solution &#123;<br>public:<br>    unordered_map<span class="hljs-tag">&lt;Node*, Node*&gt;</span> mp;<br>    <span class="hljs-keyword">Node</span><span class="hljs-title">* cloneGraph</span>(<span class="hljs-keyword">Node</span><span class="hljs-title">* node</span>) &#123;<br>        if(<span class="hljs-keyword">node</span><span class="hljs-title">==nullptr</span>)<br>            return <span class="hljs-keyword">node</span><span class="hljs-title">;</span><br><span class="hljs-title">        if</span>(mp.count(<span class="hljs-keyword">node</span><span class="hljs-title">))</span><br><span class="hljs-title">            return</span> mp[<span class="hljs-keyword">node</span><span class="hljs-title">];</span><br><span class="hljs-title">        Node</span>* <span class="hljs-attr">clone=</span>new <span class="hljs-keyword">Node</span><span class="hljs-title">(node-</span>&gt;val);<br>        mp[<span class="hljs-keyword">node</span><span class="hljs-title">]=clone</span>;<br>        for(auto t:<span class="hljs-keyword">node</span><span class="hljs-title">-&gt;neighbors</span>)&#123;<br>            clone-&gt;neighbors.push_back(cloneGraph(t));<br>        &#125;<br>        return clone;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†éš”é“¾è¡¨</title>
    <link href="/2024/09/28/%E5%88%86%E9%9A%94%E9%93%BE%E8%A1%A8/"/>
    <url>/2024/09/28/%E5%88%86%E9%9A%94%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ†éš”é“¾è¡¨"><a class="markdownIt-Anchor" href="#åˆ†éš”é“¾è¡¨"></a> åˆ†éš”é“¾è¡¨</h2><!-- TOC --><ul><li><a href="#%E5%88%86%E9%9A%94%E9%93%BE%E8%A1%A8">åˆ†éš”é“¾è¡¨</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/partition-list/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head å’Œä¸€ä¸ªç‰¹å®šå€¼ x ï¼Œè¯·ä½ å¯¹é“¾è¡¨è¿›è¡Œåˆ†éš”ï¼Œä½¿å¾—æ‰€æœ‰ å°äº x çš„èŠ‚ç‚¹éƒ½å‡ºç°åœ¨ å¤§äºæˆ–ç­‰äº x çš„èŠ‚ç‚¹ä¹‹å‰ã€‚</p><p>ä½ åº”å½“ ä¿ç•™ ä¸¤ä¸ªåˆ†åŒºä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åˆå§‹ç›¸å¯¹ä½ç½®ã€‚<br />e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šhead = <span class="hljs-string">[1,4,3,2,5,2]</span>, x = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-string">[1,2,2,4,3,5]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜æ€è·¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚åˆ›å»ºä¸¤ä¸ªé“¾è¡¨ï¼Œä¸€ä¸ªç”¨æ¥å­˜å‚¨å°äºxçš„èŠ‚ç‚¹ï¼Œä¸€ä¸ªç”¨æ¥å­˜å‚¨å¤§äºxçš„èŠ‚ç‚¹ï¼Œéå†å®Œheadåï¼Œå°†ä¸¤ä¸ªé“¾è¡¨è¿æ¥åœ¨ä¸€èµ·å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    ListNode* partition(ListNode* head, int x) &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-attribute">head</span>==nullptr)<br>            return head;<br>        ListNode* <span class="hljs-attribute">l</span>=new ListNode(0);<br>        ListNode* <span class="hljs-attribute">lh</span>=l;<br>        ListNode* <span class="hljs-attribute">r</span>=new ListNode(0);<br>        ListNode* <span class="hljs-attribute">rh</span>=r;<br>        <span class="hljs-keyword">while</span>(head!=nullptr)&#123;<br>            <span class="hljs-keyword">if</span>(head-&gt;val&gt;=x)&#123;<br>                r-&gt;<span class="hljs-attribute">next</span>=head;<br>                <span class="hljs-attribute">r</span>=r-&gt;next;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                l-&gt;<span class="hljs-attribute">next</span>=head;<br>                <span class="hljs-attribute">l</span>=l-&gt;next;<br>            &#125;<br>            <span class="hljs-attribute">head</span>=head-&gt;next;<br>        &#125;<br>        r-&gt;<span class="hljs-attribute">next</span>=nullptr;<br>        l-&gt;<span class="hljs-attribute">next</span>=rh-&gt;next;<br>        return lh-&gt;next;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€é•¿é‡å¤å­ä¸²</title>
    <link href="/2024/09/27/%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E4%B8%B2/"/>
    <url>/2024/09/27/%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€é•¿é‡å¤å­ä¸²"><a class="markdownIt-Anchor" href="#æœ€é•¿é‡å¤å­ä¸²"></a> æœ€é•¿é‡å¤å­ä¸²</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E4%B8%B2">æœ€é•¿é‡å¤å­ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li><li><a href="#tips">tips</a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/longest-duplicate-substring/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè€ƒè™‘å…¶æ‰€æœ‰ é‡å¤å­ä¸² ï¼šå³ s çš„ï¼ˆè¿ç»­ï¼‰å­ä¸²ï¼Œåœ¨ s ä¸­å‡ºç° 2 æ¬¡æˆ–æ›´å¤šæ¬¡ã€‚è¿™äº›å‡ºç°ä¹‹é—´å¯èƒ½å­˜åœ¨é‡å ã€‚</p><p>è¿”å› ä»»æ„ä¸€ä¸ª å¯èƒ½å…·æœ‰æœ€é•¿é•¿åº¦çš„é‡å¤å­ä¸²ã€‚å¦‚æœ s ä¸å«é‡å¤å­ä¸²ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸º â€œâ€ ã€‚</p><p>e.g.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;banana&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;ana&quot;</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‚è€ƒå¤§ä½¬çš„é¢˜è§£ï¼Œä¸»è¦æ€è·¯æ˜¯å­—ç¬¦ä¸²å“ˆå¸Œ + äºŒåˆ†ã€‚ç”¨äºŒåˆ†æœç´¢æ•°ç»„çš„é•¿åº¦ï¼Œç„¶åchecké•¿åº¦ä¸ºlençš„å­ä¸²æ˜¯å¦é‡å¤å‡ºç°ï¼Œå¦‚æœæ˜¯ï¼Œè¿”å›è¯¥å­ä¸²ï¼Œå¦åˆ™ï¼Œè¿”å›ç©ºä¸²ã€‚äºŒåˆ†è¿‡ç¨‹ä¸­å¦‚æœè¿”å›ç©ºä¸²ï¼Œç¼©çŸ­é•¿åº¦ç»§ç»­äºŒåˆ†ï¼Œå¦åˆ™æ‰©å¤§é•¿åº¦ç»§ç»­äºŒåˆ†ã€‚</p><p>ç°åœ¨éš¾ç‚¹åœ¨äºå¦‚ä½•åœ¨O(n)å¤æ‚åº¦å†…æ‰§è¡Œcheck,è¿™é‡Œç”¨åˆ°å­—ç¬¦ä¸²å“ˆå¸Œï¼š<br />åˆ›å»ºæ•°ç»„hå’Œpï¼ŒPæ˜¯ä¸€ä¸ªè´¨æ•°(ä¸€èˆ¬è¦å°½å¯èƒ½å¤§ä¸€ç‚¹)<br />hï¼šç”¨äºå­˜å‚¨å‰ç¼€å“ˆå¸Œå€¼çš„æ•°ç»„ã€‚<br />pï¼šå­˜å‚¨æ¯ä¸ªä½ç½®çš„å¹‚æ¬¡çš„æ•°ç»„ï¼Œæ–¹ä¾¿è®¡ç®—å“ˆå¸Œå€¼ã€‚<br />åˆå§‹åŒ–:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs inform7">for (int i = 0; i &lt; n; i++) &#123;<br>            p<span class="hljs-comment">[i + 1]</span> = p<span class="hljs-comment">[i]</span> * P;<br>            h<span class="hljs-comment">[i + 1]</span> = h<span class="hljs-comment">[i]</span> * P + s<span class="hljs-comment">[i]</span>;<br>        &#125;<br></code></pre></td></tr></table></figure><p><code>h[i]</code>æ˜¯å­ä¸²ä» ç¬¬ä¸€ä¸ªä½ç½® åˆ° ç¬¬ i ä¸ª çš„å“ˆå¸Œå€¼<br />ä»ä½ç½® i åˆ° j çš„å­ä¸²çš„å“ˆå¸Œå€¼çš„è¡¨è¾¾å¼ä¸ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">h<span class="hljs-selector-attr">[j]</span> - h<span class="hljs-selector-attr">[i - 1]</span> * <span class="hljs-selector-tag">p</span><span class="hljs-selector-attr">[j - i + 1]</span><br></code></pre></td></tr></table></figure><p>æŠŠè¿™äº›å“ˆå¸Œå€¼å­˜åœ¨seté‡Œï¼Œå¯ä»¥åˆ¤æ–­å­ä¸²æ˜¯å¦é‡å¤å‡ºç°</p><p>PS:å¤§ä½¬çš„javaä»£ç long longå°±èƒ½è¿‡ï¼Œæˆ‘å†™çš„c++ç”¨long longéƒ½ä¼šçˆ†ï¼Œå¿…é¡»ç”¨unsigned long long</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    typedef unsigned long long ULL;<br>    <span class="hljs-built_in">int</span> P=<span class="hljs-number">1313131</span>;<br>    vector&lt;ULL&gt; h,p;<br>    string check(string &amp;s,<span class="hljs-built_in">int</span> <span class="hljs-built_in">len</span>)&#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=s.size();<br>        unordered_set&lt;ULL&gt; st;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i+<span class="hljs-built_in">len</span>-<span class="hljs-number">1</span>&lt;=<span class="hljs-built_in">n</span>;++i)&#123;<br>            <span class="hljs-built_in">int</span> j=i+<span class="hljs-built_in">len</span>-<span class="hljs-number">1</span>;<br>            ULL <span class="hljs-built_in">t</span>=h[j]-h[i-<span class="hljs-number">1</span>]*p[j-i+<span class="hljs-number">1</span>];//i~jå­ä¸²çš„å“ˆå¸Œå€¼<br>            <span class="hljs-built_in">if</span>(st.count(<span class="hljs-built_in">t</span>))<br>                return s.substr(i-<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>);<br>            st.insert(<span class="hljs-built_in">t</span>);<br>        &#125;<br>        return <span class="hljs-string">&quot;&quot;</span>;<br>    &#125;<br>    string longestDupSubstring(string s) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=s.size();<br>        h.resize(<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>);<br>        p.resize(<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>);<br>        p[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)&#123;<br>            p[i+<span class="hljs-number">1</span>]=p[i]*P;<br>            h[i+<span class="hljs-number">1</span>]=h[i]*P+s[i];<br>        &#125;<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-built_in">n</span>;<br>        string ans;<br>        while(l&lt;r)&#123;<br>            <span class="hljs-built_in">int</span> <span class="hljs-built_in">mid</span>=l+(r-l)/<span class="hljs-number">2</span>;<br>            string <span class="hljs-built_in">t</span>=check(s,<span class="hljs-built_in">mid</span>);<br>            <span class="hljs-built_in">int</span> tlen=t.size();<br>            <span class="hljs-built_in">if</span>(tlen==<span class="hljs-number">0</span>)<br>                r=<span class="hljs-built_in">mid</span>;<br>            else<br>                l=<span class="hljs-built_in">mid</span>+<span class="hljs-number">1</span>;<br>            ans=tlen&gt;ans.size()?<span class="hljs-symbol">t:an</span>s;<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="tips"><a class="markdownIt-Anchor" href="#tips"></a> tips</h3><p>æœ€é•¿å…¬å…±å­åºåˆ—å’Œæœ€é•¿å…¬å…±å­ä¸²çš„åŒºåˆ«æ˜¯ï¼šåè€…æ˜¯è¿ç»­çš„ï¼Œå½“å‰å­—ç¬¦ä¸ç›¸ç­‰æ—¶<code>dp[i][j]=0</code></p>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¢«å›´ç»•çš„åŒºåŸŸ</title>
    <link href="/2024/09/26/%E8%A2%AB%E5%9B%B4%E7%BB%95%E7%9A%84%E5%8C%BA%E5%9F%9F/"/>
    <url>/2024/09/26/%E8%A2%AB%E5%9B%B4%E7%BB%95%E7%9A%84%E5%8C%BA%E5%9F%9F/</url>
    
    <content type="html"><![CDATA[<h2 id="è¢«å›´ç»•çš„åŒºåŸŸ"><a class="markdownIt-Anchor" href="#è¢«å›´ç»•çš„åŒºåŸŸ"></a> è¢«å›´ç»•çš„åŒºåŸŸ</h2><!-- TOC --><ul><li><a href="#%E8%A2%AB%E5%9B%B4%E7%BB%95%E7%9A%84%E5%8C%BA%E5%9F%9F">è¢«å›´ç»•çš„åŒºåŸŸ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/surrounded-regions/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª m x n çš„çŸ©é˜µ board ï¼Œç”±è‹¥å¹²å­—ç¬¦ â€˜Xâ€™ å’Œ â€˜Oâ€™ ç»„æˆï¼Œæ•è· æ‰€æœ‰ è¢«å›´ç»•çš„åŒºåŸŸï¼š</p><p>è¿æ¥ï¼šä¸€ä¸ªå•å…ƒæ ¼ä¸æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„å•å…ƒæ ¼è¿æ¥ã€‚<br />åŒºåŸŸï¼šè¿æ¥æ‰€æœ‰ â€˜Oâ€™ çš„å•å…ƒæ ¼æ¥å½¢æˆä¸€ä¸ªåŒºåŸŸã€‚<br />å›´ç»•ï¼šå¦‚æœæ‚¨å¯ä»¥ç”¨ â€˜Xâ€™ å•å…ƒæ ¼ è¿æ¥è¿™ä¸ªåŒºåŸŸï¼Œå¹¶ä¸”åŒºåŸŸä¸­æ²¡æœ‰ä»»ä½•å•å…ƒæ ¼ä½äº board è¾¹ç¼˜ï¼Œåˆ™è¯¥åŒºåŸŸè¢« â€˜Xâ€™ å•å…ƒæ ¼å›´ç»•ã€‚<br />é€šè¿‡å°†è¾“å…¥çŸ©é˜µ board ä¸­çš„æ‰€æœ‰ â€˜Oâ€™ æ›¿æ¢ä¸º â€˜Xâ€™ æ¥ æ•è·è¢«å›´ç»•çš„åŒºåŸŸã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šboard = [[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;O&quot;</span>,<span class="hljs-string">&quot;O&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;O&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;O&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>]]<br><br>è¾“å‡ºï¼š[[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>],[<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;O&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>,<span class="hljs-string">&quot;X&quot;</span>]]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯¹è¾¹ç¼˜çš„æ‰€æœ‰<code>O</code>è¿›è¡ŒDFSï¼Œå°†å…¶ä¿®æ”¹ä¸º<code>B</code>ï¼Œç„¶åéå†æ•´ä¸ªçŸ©é˜µï¼Œå°†<code>O</code>æ”¹ä¸º<code>X</code>ï¼Œ<code>B</code>æ”¹ä¸º<code>O</code>å³å¯</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span> &#123;<br>public:<br>    void solve(vector&lt;vector&lt;char&gt;&gt;&amp; board) &#123;<br>        int m=board.size(),n=board[<span class="hljs-number">0</span>].size();<br>        function&lt;void(int,int)&gt; dfs=[&amp;](int x,int y)&#123;<br>            board[x][y]=<span class="hljs-string">&#x27;B&#x27;</span>;<br>            if(x+<span class="hljs-number">1</span>&lt;m&amp;&amp;board[x+<span class="hljs-number">1</span>][y]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(x+<span class="hljs-number">1</span>,y);<br>            if(y<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;board[x][y<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(x,y<span class="hljs-number">-1</span>);<br>            if(x<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;board[x<span class="hljs-number">-1</span>][y]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(x<span class="hljs-number">-1</span>,y);<br>            if(y+<span class="hljs-number">1</span>&lt;n&amp;&amp;board[x][y+<span class="hljs-number">1</span>]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(x,y+<span class="hljs-number">1</span>);<br>        &#125;;<br>        for(int i=<span class="hljs-number">0</span>;i&lt;m;++i)&#123;<br>            if(board[i][<span class="hljs-number">0</span>]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(i,<span class="hljs-number">0</span>);<br>            if(board[i][n<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(i,n<span class="hljs-number">-1</span>);<br>        &#125;<br>        for(int j=<span class="hljs-number">0</span>;j&lt;n;++j)&#123;<br>            if(board[<span class="hljs-number">0</span>][j]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(<span class="hljs-number">0</span>,j);<br>            if(board[m<span class="hljs-number">-1</span>][j]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                dfs(m<span class="hljs-number">-1</span>,j);<br>        &#125;<br>        for(int i=<span class="hljs-number">0</span>;i&lt;m;++i)&#123;<br>            for(int j=<span class="hljs-number">0</span>;j&lt;n;++j)&#123;<br>                if(board[i][j]==<span class="hljs-string">&#x27;O&#x27;</span>)<br>                    board[i][j]=<span class="hljs-string">&#x27;X&#x27;</span>;<br>                else if(board[i][j]==<span class="hljs-string">&#x27;B&#x27;</span>)<br>                    board[i][j]=<span class="hljs-string">&#x27;O&#x27;</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¼•çˆ†æ°”çƒ</title>
    <link href="/2024/09/25/%E5%BC%95%E7%88%86%E6%B0%94%E7%90%83/"/>
    <url>/2024/09/25/%E5%BC%95%E7%88%86%E6%B0%94%E7%90%83/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼•çˆ†æ°”çƒ"><a class="markdownIt-Anchor" href="#å¼•çˆ†æ°”çƒ"></a> å¼•çˆ†æ°”çƒ</h2><!-- TOC --><ul><li><a href="#%E5%BC%95%E7%88%86%E6%B0%94%E7%90%83">å¼•çˆ†æ°”çƒ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/minimum-number-of-arrows-to-burst-balloons/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸€äº›çƒå½¢æ°”çƒè´´åœ¨ä¸€å µç”¨ XY å¹³é¢è¡¨ç¤ºçš„å¢™é¢ä¸Šã€‚å¢™é¢ä¸Šçš„æ°”çƒè®°å½•åœ¨æ•´æ•°æ•°ç»„ points ï¼Œå…¶ä¸­points[i] = [xstart, xend] è¡¨ç¤ºæ°´å¹³ç›´å¾„åœ¨ xstart å’Œ xendä¹‹é—´çš„æ°”çƒã€‚ä½ ä¸çŸ¥é“æ°”çƒçš„ç¡®åˆ‡ y åæ ‡ã€‚</p><p>ä¸€æ”¯å¼“ç®­å¯ä»¥æ²¿ç€ x è½´ä»ä¸åŒç‚¹ å®Œå…¨å‚ç›´ åœ°å°„å‡ºã€‚åœ¨åæ ‡ x å¤„å°„å‡ºä¸€æ”¯ç®­ï¼Œè‹¥æœ‰ä¸€ä¸ªæ°”çƒçš„ç›´å¾„çš„å¼€å§‹å’Œç»“æŸåæ ‡ä¸º xstartï¼Œxendï¼Œ ä¸”æ»¡è¶³  xstart â‰¤ x â‰¤ xendï¼Œåˆ™è¯¥æ°”çƒä¼šè¢« å¼•çˆ† ã€‚å¯ä»¥å°„å‡ºçš„å¼“ç®­çš„æ•°é‡ æ²¡æœ‰é™åˆ¶ ã€‚ å¼“ç®­ä¸€æ—¦è¢«å°„å‡ºä¹‹åï¼Œå¯ä»¥æ— é™åœ°å‰è¿›ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ points ï¼Œè¿”å›å¼•çˆ†æ‰€æœ‰æ°”çƒæ‰€å¿…é¡»å°„å‡ºçš„ æœ€å° å¼“ç®­æ•° ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼špoints = <span class="hljs-comment">[<span class="hljs-comment">[10,16]</span>,<span class="hljs-comment">[2,8]</span>,<span class="hljs-comment">[1,6]</span>,<span class="hljs-comment">[7,12]</span>]</span><br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼šæ°”çƒå¯ä»¥ç”¨2æ”¯ç®­æ¥çˆ†ç ´:<br>-åœ¨x = 6å¤„å°„å‡ºç®­ï¼Œå‡»ç ´æ°”çƒ<span class="hljs-comment">[2,8]</span>å’Œ<span class="hljs-comment">[1,6]</span>ã€‚<br>-åœ¨x = 11å¤„å‘å°„ç®­ï¼Œå‡»ç ´æ°”çƒ<span class="hljs-comment">[10,16]</span>å’Œ<span class="hljs-comment">[7,12]</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é¢˜ä¸€çœ¼æ’åºï¼Œä½†å¯æƒœæˆ‘æ’æˆå·¦ç«¯ç‚¹äº†ğŸ˜…ã€‚å…ˆå¯¹æ‰€æœ‰åŒºé—´æŒ‰å³ç«¯ç‚¹å‡åºæ’åºï¼Œç„¶åæ¯å½“æœ‰å·¦ç«¯ç‚¹å¤§äºä¸Šä¸€ä¸ªå³ç«¯ç‚¹tmpæ˜¯ï¼Œæ›´æ–°ç­”æ¡ˆï¼Œæ›´æ–°tmpã€‚<br />æŒ‰å·¦ç«¯ç‚¹æ’åºçš„è¯<code>[[3,9],[7,12],[3,8],[6,8],[9,10],[2,9],[0,9],[3,9],[0,6],[2,8]]</code>è¿‡ä¸äº†ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findMinArrowShots</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; points)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=points.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-built_in">sort</span>(points.<span class="hljs-built_in">begin</span>(),points.<span class="hljs-built_in">end</span>(),[&amp;](vector&lt;<span class="hljs-type">int</span>&gt; &amp;a, vector&lt;<span class="hljs-type">int</span>&gt; &amp;b)&#123;<br>            <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>]&lt;b[<span class="hljs-number">0</span>];<br>        &#125;);<br>        <span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> tmp=points[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>            <span class="hljs-keyword">if</span>(points[i][<span class="hljs-number">0</span>]&gt;tmp)&#123;<br>                ++res;<br>                tmp=points[i][<span class="hljs-number">1</span>];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é™¤æ³•æ±‚å€¼</title>
    <link href="/2024/09/24/%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/"/>
    <url>/2024/09/24/%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<h2 id="é™¤æ³•æ±‚å€¼"><a class="markdownIt-Anchor" href="#é™¤æ³•æ±‚å€¼"></a> é™¤æ³•æ±‚å€¼</h2><!-- TOC --><ul><li><a href="#%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC">é™¤æ³•æ±‚å€¼</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/evaluate-division/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ equations å’Œä¸€ä¸ªå®æ•°å€¼æ•°ç»„ values ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ equations[i] = [Ai, Bi] å’Œ values[i] å…±åŒè¡¨ç¤ºç­‰å¼ Ai / Bi = values[i] ã€‚æ¯ä¸ª Ai æˆ– Bi æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚</p><p>å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ queries è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ queries[j] = [Cj, Dj] è¡¨ç¤ºç¬¬ j ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º Cj / Dj = ? çš„ç»“æœä½œä¸ºç­”æ¡ˆã€‚</p><p>è¿”å› æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ ã€‚å¦‚æœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ -1.0 æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚å¦‚æœé—®é¢˜ä¸­å‡ºç°äº†ç»™å®šçš„å·²çŸ¥æ¡ä»¶ä¸­æ²¡æœ‰å‡ºç°çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿéœ€è¦ç”¨ -1.0 æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚</p><p>æ³¨æ„ï¼šè¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚</p><p>æ³¨æ„ï¼šæœªåœ¨ç­‰å¼åˆ—è¡¨ä¸­å‡ºç°çš„å˜é‡æ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æ— æ³•ç¡®å®šå®ƒä»¬çš„ç­”æ¡ˆã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šequations = [[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>],[<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>]], values = [<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>], queries = [[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>],[<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>],[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;e&quot;</span>],[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>],[<span class="hljs-string">&quot;x&quot;</span>,<span class="hljs-string">&quot;x&quot;</span>]]<br>è¾“å‡ºï¼š[<span class="hljs-number">6.00000</span>,<span class="hljs-number">0.50000</span>,<span class="hljs-number">-1.00000</span>,<span class="hljs-number">1.00000</span>,<span class="hljs-number">-1.00000</span>]<br>è§£é‡Šï¼š<br>æ¡ä»¶ï¼ša / b = <span class="hljs-number">2.0</span>, b / c = <span class="hljs-number">3.0</span><br>é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?<br>ç»“æœï¼š[<span class="hljs-number">6.0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">-1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">-1.0</span> ]<br>æ³¨æ„ï¼šx æ˜¯æœªå®šä¹‰çš„ =&gt; <span class="hljs-number">-1.0</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å‚è€ƒäº†è¯„è®ºåŒºå¤§ä½¬çš„æ€è·¯ï¼Œéå¸¸ç®€æ´æ¸…æ™°ã€‚ç”¨ä¸€ä¸ªsetè®°å½•æ‰€æœ‰å‡ºç°è¿‡çš„å­—ç¬¦ä¸²ï¼Œç„¶åç”¨ä¸€ä¸ªmapä¿å­˜ä¸¤ä¸ªå­—ç¬¦ä¸²é—´çš„è¿ç®—ç»“æœï¼Œå¦‚å­—ç¬¦ä¸²aé™¤ä»¥bå¯è¡¨ç¤ºä¸ºmp[a][b]ã€‚<br />æ¥ä¸‹æ¥ï¼Œå¯¹äºå­—ç¬¦ä¸²ä¹‹é—´çš„è¿ç®—ï¼Œé‡‡ç”¨Floydç®—æ³•ï¼Œéå†setä¸­çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœ<code>mp[i][k] &amp;&amp; mp[k][j]</code>ï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—å¾—åˆ°<code>mp[i][j]=mp[i][k]*mp[k][j];</code>ï¼Œå¯¹äºqueryä¸­çš„å­—ç¬¦ä¸²<code>(a,b)</code>ï¼Œè‹¥<code>mp[a][b]</code>ä¸ä¸º0,åˆ™è¿”å›å¯¹åº”çš„å€¼ï¼Œè‹¥ä¸º0åˆ™è¿”å›-1ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">double</span>&gt; <span class="hljs-title">calcEquation</span><span class="hljs-params">(vector&lt;vector&lt;string&gt;&gt;&amp; equations, vector&lt;<span class="hljs-type">double</span>&gt;&amp; values, vector&lt;vector&lt;string&gt;&gt;&amp; queries)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=equations.<span class="hljs-built_in">size</span>();<br>        unordered_set&lt;string&gt; s;<br>        unordered_map&lt;string, unordered_map&lt;string, <span class="hljs-type">double</span>&gt;&gt; mp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)&#123;<br>            string a=equations[i][<span class="hljs-number">0</span>],b=equations[i][<span class="hljs-number">1</span>];<br>            <span class="hljs-type">double</span> c=values[i];<br>            mp[a][b]=c;<br>            mp[b][a]=<span class="hljs-number">1.0</span>/c;<br>            s.<span class="hljs-built_in">insert</span>(a);<br>            s.<span class="hljs-built_in">insert</span>(b);<br>        &#125;<br>        <span class="hljs-keyword">for</span>(string k:s)&#123;<br>            <span class="hljs-keyword">for</span>(string i:s)&#123;<br>                <span class="hljs-keyword">for</span>(string j:s)&#123;<br>                    <span class="hljs-keyword">if</span>(mp[i][k] &amp;&amp; mp[k][j])&#123;<br>                        mp[i][j]=mp[i][k]*mp[k][j];<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        vector&lt;<span class="hljs-type">double</span>&gt; res;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;t:queries)&#123;<br>            string a=t[<span class="hljs-number">0</span>],b=t[<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">if</span>(mp[a][b])<br>                res.<span class="hljs-built_in">push_back</span>(mp[a][b]);<br>            <span class="hljs-keyword">else</span><br>                res.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">-1.0</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</title>
    <link href="/2024/09/23/%E5%AF%BB%E6%89%BE%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC/"/>
    <url>/2024/09/23/%E5%AF%BB%E6%89%BE%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<h2 id="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"><a class="markdownIt-Anchor" href="#å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"></a> å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</h2><!-- TOC --><ul><li><a href="#%E5%AF%BB%E6%89%BE%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC">å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± 1 åˆ° n æ¬¡ æ—‹è½¬ åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚ä¾‹å¦‚ï¼ŒåŸæ•°ç»„ nums = [0,1,2,4,5,6,7] åœ¨å˜åŒ–åå¯èƒ½å¾—åˆ°ï¼š<br />è‹¥æ—‹è½¬ 4 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [4,5,6,7,0,1,2]<br />è‹¥æ—‹è½¬ 7 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [0,1,2,4,5,6,7]<br />æ³¨æ„ï¼Œæ•°ç»„ [a[0], a[1], a[2], â€¦, a[n-1]] æ—‹è½¬ä¸€æ¬¡ çš„ç»“æœä¸ºæ•°ç»„ [a[n-1], a[0], a[1], a[2], â€¦, a[n-2]] ã€‚</p><p>ç»™ä½ ä¸€ä¸ªå…ƒç´ å€¼ äº’ä¸ç›¸åŒ çš„æ•°ç»„ nums ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†å¤šæ¬¡æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ æœ€å°å…ƒç´  ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><p>e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[3,4,5,1,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œæ•°ç»„ç»è¿‡æ—‹è½¬ä¹‹åå·¦å³ä¸¤éƒ¨åˆ†æ˜¯å‡åºçš„ï¼Œå½“midæ¯”rå¤§æ—¶æ”¶ç¼©å·¦è¾¹ç•Œï¼Œå½“midæ¯”rå°æ—¶æ”¶ç¼©å³è¾¹ç•Œå³å¯ã€‚</p><p>è¿™é‡Œé¡ºä¾¿è®°å½•ä¸€ä¸‹äºŒåˆ†æŸ¥æ‰¾çš„æ¨¡æ¿:</p><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stan"><span class="hljs-comment">//æ‰¾å‡ºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„ä¸‹æ ‡ï¼Œå·¦é—­å³å¼€[l,r)</span><br><span class="hljs-type">int</span> lower_bound(<span class="hljs-type">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> taget)&#123;<br>    <span class="hljs-type">int</span> l=<span class="hljs-number">0</span>, r=nums.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>        <span class="hljs-type">int</span> mid=l+(r-l)/<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span>(nums[mid]&lt;<span class="hljs-built_in">target</span>)<br>            l=mid+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r=mid;<br>    &#125;<br>    <span class="hljs-keyword">return</span> l;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int findMin(vector&lt;int&gt;&amp; nums) &#123;<br>        int <span class="hljs-attribute">n</span>=nums.size();<br>        int <span class="hljs-attribute">l</span>=0;<br>        int <span class="hljs-attribute">r</span>=n-1;<br>        <span class="hljs-keyword">while</span>(l&lt;r)&#123;<br>            int <span class="hljs-attribute">mid</span>=l+(r-l)/2;<br>            <span class="hljs-keyword">if</span>(nums[mid]&gt;nums[r])<br>                <span class="hljs-attribute">l</span>=mid+1;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-attribute">r</span>=mid;<br>        &#125;<br>        return nums[l];<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æ ‘æ„é€ </title>
    <link href="/2024/09/22/%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9E%84%E9%80%A0/"/>
    <url>/2024/09/22/%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9E%84%E9%80%A0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%89%8D%E5%BA%8F%E4%B8%AD%E5%BA%8F%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91">å‰åºä¸­åºæ„é€ äºŒå‰æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E5%90%8E%E5%BA%8F%E4%B8%AD%E5%BA%8F%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91">ååºä¸­åºæ„é€ äºŒå‰æ ‘</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å‰åºä¸­åºæ„é€ äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#å‰åºä¸­åºæ„é€ äºŒå‰æ ‘"></a> å‰åºä¸­åºæ„é€ äºŒå‰æ ‘</h2><p><a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ preorder å’Œ inorder ï¼Œå…¶ä¸­ preorder æ˜¯äºŒå‰æ ‘çš„å…ˆåºéå†ï¼Œ inorder æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥: preorder = <span class="hljs-string">[3,9,20,15,7]</span>, inorder = <span class="hljs-string">[9,3,15,20,7]</span><br>è¾“å‡º: <span class="hljs-string">[3,9,20,null,null,15,7]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¦–å…ˆç”¨ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨è®°å½•inorderä¸­å„å…ƒç´ çš„ä¸‹æ ‡ï¼Œç”¨idxè¡¨ç¤ºåœ¨preorderä¸­æ ¹èŠ‚ç‚¹çš„ä¸‹æ ‡ï¼Œidxåˆå§‹ä¸º0ã€‚å®šä¹‰builderå‡½æ•°é€’å½’æ„å»ºäºŒå‰æ ‘ï¼š</p><ul><li>æ ¹æ®idxè·å–æ ¹èŠ‚ç‚¹çš„å€¼rootVal</li><li>æ ¹æ®rootValåœ¨å“ˆå¸Œè¡¨ä¸­è·å–inoderä¸­çš„ä¸‹æ ‡index</li><li>++idx</li><li>æ„å»ºå·¦å­æ ‘ï¼Œbuilder(l,index-1,preorder,inorder);</li><li>æ„å»ºå³å­æ ‘ï¼Œbuilder(index+1,r,preorder,inorder);</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; mp;<br>    <span class="hljs-type">int</span> idx;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">builder</span><span class="hljs-params">(<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(l&gt;r)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-type">int</span> rootVal=preorder[idx];<br>        TreeNode* root=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(rootVal);<br>        <span class="hljs-type">int</span> index=mp[rootVal];<br>        idx++;<br>        root-&gt;left=<span class="hljs-built_in">builder</span>(l,index<span class="hljs-number">-1</span>,preorder,inorder);<br>        root-&gt;right=<span class="hljs-built_in">builder</span>(index+<span class="hljs-number">1</span>,r,preorder,inorder);<br>        <span class="hljs-keyword">return</span> root;<br>    &#125;<br><br>    <span class="hljs-function">TreeNode* <span class="hljs-title">buildTree</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=preorder.<span class="hljs-built_in">size</span>();<br>        idx=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>            mp[inorder[i]]=i;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">builder</span>(<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>,preorder,inorder);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ååºä¸­åºæ„é€ äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#ååºä¸­åºæ„é€ äºŒå‰æ ‘"></a> ååºä¸­åºæ„é€ äºŒå‰æ ‘</h2><p><a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>æ•´ä½“æ€è·¯ä¸ä¸Šé¢ç›¸åŒï¼Œæ³¨æ„idxåˆå§‹åŒ–å€¼(n-1)ä¸æ„å»ºé¡ºåº</p><ul><li>æ ¹æ®idxè·å–æ ¹èŠ‚ç‚¹çš„å€¼rootVal</li><li>æ ¹æ®rootValåœ¨å“ˆå¸Œè¡¨ä¸­è·å–inoderä¸­çš„ä¸‹æ ‡index</li><li>â€“idx</li><li>æ„å»ºå³å­æ ‘ï¼Œbuilder(index+1,r,postorder,inorder);</li><li>æ„å»ºå·¦å­æ ‘ï¼Œbuilder(l,index-1,postorder,inorder);</li></ul><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; mp;<br>    <span class="hljs-type">int</span> idx;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">builder</span><span class="hljs-params">(<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,vector&lt;<span class="hljs-type">int</span>&gt;&amp; postorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(l&gt;r)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-type">int</span> rootVal=postorder[idx];<br>        TreeNode* root=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(rootVal);<br>        <span class="hljs-type">int</span> index=mp[rootVal];<br>        idx--;<br>        root-&gt;right=<span class="hljs-built_in">builder</span>(index+<span class="hljs-number">1</span>,r,postorder,inorder);<br>        root-&gt;left=<span class="hljs-built_in">builder</span>(l,index<span class="hljs-number">-1</span>,postorder,inorder);<br>        <br>        <span class="hljs-keyword">return</span> root;<br>    &#125;<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">buildTree</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; postorder)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=postorder.<span class="hljs-built_in">size</span>();<br>        idx=n<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>            mp[inorder[i]]=i;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">builder</span>(<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>,postorder,inorder);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®€åŒ–è·¯å¾„</title>
    <link href="/2024/09/21/%E7%AE%80%E5%8C%96%E8%B7%AF%E5%BE%84/"/>
    <url>/2024/09/21/%E7%AE%80%E5%8C%96%E8%B7%AF%E5%BE%84/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€åŒ–è·¯å¾„"><a class="markdownIt-Anchor" href="#ç®€åŒ–è·¯å¾„"></a> ç®€åŒ–è·¯å¾„</h2><!-- TOC --><ul><li><a href="#%E7%AE%80%E5%8C%96%E8%B7%AF%E5%BE%84">ç®€åŒ–è·¯å¾„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/simplify-path/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² path ï¼Œè¡¨ç¤ºæŒ‡å‘æŸä¸€æ–‡ä»¶æˆ–ç›®å½•çš„ Unix é£æ ¼ ç»å¯¹è·¯å¾„ ï¼ˆä»¥ â€˜/â€™ å¼€å¤´ï¼‰ï¼Œè¯·ä½ å°†å…¶è½¬åŒ–ä¸º æ›´åŠ ç®€æ´çš„è§„èŒƒè·¯å¾„ã€‚</p><p>åœ¨ Unix é£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿä¸­è§„åˆ™å¦‚ä¸‹ï¼š</p><p>ä¸€ä¸ªç‚¹ â€˜.â€™ è¡¨ç¤ºå½“å‰ç›®å½•æœ¬èº«ã€‚<br />æ­¤å¤–ï¼Œä¸¤ä¸ªç‚¹ â€˜â€¦â€™ è¡¨ç¤ºå°†ç›®å½•åˆ‡æ¢åˆ°ä¸Šä¸€çº§ï¼ˆæŒ‡å‘çˆ¶ç›®å½•ï¼‰ã€‚<br />ä»»æ„å¤šä¸ªè¿ç»­çš„æ–œæ ï¼ˆå³ï¼Œâ€˜//â€™ æˆ– â€˜///â€™ï¼‰éƒ½è¢«è§†ä¸ºå•ä¸ªæ–œæ  â€˜/â€™ã€‚<br />ä»»ä½•å…¶ä»–æ ¼å¼çš„ç‚¹ï¼ˆä¾‹å¦‚ï¼Œâ€˜â€¦â€™ æˆ– â€˜â€¦â€™ï¼‰å‡è¢«è§†ä¸ºæœ‰æ•ˆçš„æ–‡ä»¶/ç›®å½•åç§°ã€‚<br />è¿”å›çš„ ç®€åŒ–è·¯å¾„ å¿…é¡»éµå¾ªä¸‹è¿°æ ¼å¼ï¼š</p><p>å§‹ç»ˆä»¥æ–œæ  â€˜/â€™ å¼€å¤´ã€‚<br />ä¸¤ä¸ªç›®å½•åä¹‹é—´å¿…é¡»åªæœ‰ä¸€ä¸ªæ–œæ  â€˜/â€™ ã€‚<br />æœ€åä¸€ä¸ªç›®å½•åï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¸èƒ½ ä»¥ â€˜/â€™ ç»“å°¾ã€‚<br />æ­¤å¤–ï¼Œè·¯å¾„ä»…åŒ…å«ä»æ ¹ç›®å½•åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ä¸Šçš„ç›®å½•ï¼ˆå³ï¼Œä¸å« â€˜.â€™ æˆ– â€˜â€¦â€™ï¼‰ã€‚<br />è¿”å›ç®€åŒ–åå¾—åˆ°çš„ è§„èŒƒè·¯å¾„ ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼špath <span class="hljs-operator">=</span> <span class="hljs-string">&quot;/home//foo/&quot;</span><br><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;/home/foo&quot;</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å…ˆæŒ‰<code>/</code>åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªpythonä¸€è¡Œå°±æå®šäº†ã€‚ç„¶åå°†åˆ†å‰²åçš„æ•°ç»„æŒ‰è§„åˆ™å…¥æ ˆï¼š</p><ul><li>å¦‚æœä¸º<code>..</code>ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å­—ç¬¦ä¸²</li><li>å¦‚æœä¸ºç©ºæˆ–è€…ä¸º<code>.</code>ï¼Œåˆ™è·³è¿‡</li><li>å…¶ä»–æƒ…å†µå…¥æ ˆ</li></ul><p>æœ€åéå†æ ˆå†…å­—ç¬¦ä¸²å…ƒç´ ï¼Œå°†ä»–ä»¬æ‹¼æ¥ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">string</span> simplifyPath(<span class="hljs-keyword">string</span> path) &#123;<br>        auto split=[&amp;](<span class="hljs-keyword">string</span>&amp; s, <span class="hljs-keyword">char</span> c)-&gt;vector&lt;<span class="hljs-keyword">string</span>&gt;&#123;<br>            vector&lt;<span class="hljs-keyword">string</span>&gt; res;<br>            <span class="hljs-keyword">string</span> cur;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">char</span> t:s)&#123;<br>                <span class="hljs-keyword">if</span>(t==c)&#123;<br>                    res.push_back(cur);<br>                    cur.clear();<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    cur+=t;<br>                &#125;<br>            &#125;<br>            res.push_back(cur);<br>            <span class="hljs-keyword">return</span> res;<br>        &#125;;<br>        vector&lt;<span class="hljs-keyword">string</span>&gt; sr=split(path,<span class="hljs-string">&#x27;/&#x27;</span>);<br>        vector&lt;<span class="hljs-keyword">string</span>&gt; st;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">string</span>&amp; t: sr)&#123;<br>            <span class="hljs-keyword">if</span>(t==<span class="hljs-string">&quot;..&quot;</span>)&#123;<br>                <span class="hljs-keyword">if</span>(!st.<span class="hljs-keyword">empty</span>())<br>                    st.pop_back();<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!t.<span class="hljs-keyword">empty</span>()&amp;&amp;t!=<span class="hljs-string">&quot;.&quot;</span>)<br>                st.push_back(t);<br>        &#125;<br>        <span class="hljs-keyword">string</span> ans;<br>        <span class="hljs-keyword">if</span>(st.<span class="hljs-keyword">empty</span>())<br>            ans+=<span class="hljs-string">&#x27;/&#x27;</span>;<br>        <span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">string</span> t: st)<br>                ans+=<span class="hljs-string">&#x27;/&#x27;</span>+t;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ‰æ•ˆçš„æ•°ç‹¬</title>
    <link href="/2024/09/20/%E6%9C%89%E6%95%88%E7%9A%84%E6%95%B0%E7%8B%AC/"/>
    <url>/2024/09/20/%E6%9C%89%E6%95%88%E7%9A%84%E6%95%B0%E7%8B%AC/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ‰æ•ˆçš„æ•°ç‹¬"><a class="markdownIt-Anchor" href="#æœ‰æ•ˆçš„æ•°ç‹¬"></a> æœ‰æ•ˆçš„æ•°ç‹¬</h2><!-- TOC --><ul><li><a href="#%E6%9C%89%E6%95%88%E7%9A%84%E6%95%B0%E7%8B%AC">æœ‰æ•ˆçš„æ•°ç‹¬</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/valid-sudoku/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>è¯·ä½ åˆ¤æ–­ä¸€ä¸ª 9 x 9 çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ æ ¹æ®ä»¥ä¸‹è§„åˆ™ ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚</p><p>æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚<br />æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚<br />æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šboard = <br>[[<span class="hljs-string">&quot;5&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;7&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>]<br>,[<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;9&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>]<br>,[<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;9&quot;</span>,<span class="hljs-string">&quot;8&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>]<br>,[<span class="hljs-string">&quot;8&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>]<br>,[<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;8&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>]<br>,[<span class="hljs-string">&quot;7&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>]<br>,[<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;8&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>]<br>,[<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;9&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>]<br>,[<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;8&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;7&quot;</span>,<span class="hljs-string">&quot;9&quot;</span>]]<br>è¾“å‡ºï¼štrue<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸‰ä¸ªæ•°ç»„åˆ†åˆ«è¡¨ç¤ºæ¯è¡Œæ¯åˆ—ï¼Œæ¯ä¸ªä¹å®«æ ¼çš„æ•°å­—æ‘†æ”¾æƒ…å†µï¼š</p><ul><li>row[i][num]ï¼Œç¬¬iè¡Œæ•°å­—num+1å‡ºç°çš„æ¬¡æ•°</li><li>col[j][num]ï¼Œç¬¬jåˆ—æ•°å­—num+1å‡ºç°çš„æ¬¡æ•°</li><li>box[i/3][j/3][num]ï¼Œå¯¹åº”å°ä¹å®«æ ¼å†…çš„æ•°å­—num+1å‡ºç°çš„æ¬¡æ•°</li></ul><p>æ¯æ¬¡å¡«å…¥æ•°å­—åï¼Œè‹¥å‡ºç°æ¬¡æ•°å¤§äº2,åˆ™è¿”å›falseå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span> &#123;<br>public:<br>    bool isValidSudoku(vector&lt;vector&lt;char&gt;&gt;&amp; board) &#123;<br>        int rows[<span class="hljs-number">9</span>][<span class="hljs-number">9</span>];<br>        int cols[<span class="hljs-number">9</span>][<span class="hljs-number">9</span>];<br>        int box[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>][<span class="hljs-number">9</span>];<br>        memset(rows,<span class="hljs-number">0</span>,sizeof(rows));<br>        memset(cols,<span class="hljs-number">0</span>,sizeof(cols));<br>        memset(box,<span class="hljs-number">0</span>,sizeof(box));<br>        char c;<br>        int t;<br>        for(int i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">9</span>;++i)&#123;<br>            for(int j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">9</span>;++j)&#123;<br>                c=board[i][j];<br>                if(c!=<span class="hljs-string">&#x27;.&#x27;</span>)&#123;<br>                    t=c-<span class="hljs-string">&#x27;0&#x27;</span>;<br>                    ++rows[i][t<span class="hljs-number">-1</span>];<br>                    ++cols[j][t<span class="hljs-number">-1</span>];<br>                    ++box[i/<span class="hljs-number">3</span>][j/<span class="hljs-number">3</span>][t<span class="hljs-number">-1</span>];<br>                    if(rows[i][t<span class="hljs-number">-1</span>]&gt;<span class="hljs-number">1</span>||cols[j][t<span class="hljs-number">-1</span>]&gt;<span class="hljs-number">1</span>||box[i/<span class="hljs-number">3</span>][j/<span class="hljs-number">3</span>][t<span class="hljs-number">-1</span>]&gt;<span class="hljs-number">1</span>)<br>                        return false;<br>                &#125;<br>            &#125;<br>        &#125;<br>        return true;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€é•¿è¿ç»­åºåˆ—</title>
    <link href="/2024/09/18/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97/"/>
    <url>/2024/09/18/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€é•¿è¿ç»­åºåˆ—"><a class="markdownIt-Anchor" href="#æœ€é•¿è¿ç»­åºåˆ—"></a> æœ€é•¿è¿ç»­åºåˆ—</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97">æœ€é•¿è¿ç»­åºåˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/longest-consecutive-sequence/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚</p><p>è¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[100,4,200,1,3,2]</span><br>è¾“å‡ºï¼š<span class="hljs-number">4</span><br>è§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ <span class="hljs-string">[1, 2, 3, 4]</span>ã€‚å®ƒçš„é•¿åº¦ä¸º <span class="hljs-number">4</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¹‹å‰åšè¿‡ï¼Œä¸è¿‡ç”¨çš„æ˜¯æš´åŠ›æ’åºçš„æ–¹æ³•ï¼Œèƒ½è¿‡ä½†æ˜¯ä¸æ˜¯O(n)æ—¶é—´å¤æ‚åº¦ã€‚è¿™é“é¢˜å¯ä»¥å…ˆç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ä¿å­˜æ‰€æœ‰æ•°å­—ï¼Œå¯¹äºæ•°å­—nï¼Œå¦‚æœn-1ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆnå¯ä»¥ä½œä¸ºä¸€ä¸ªè¿ç»­æ•°ç»„çš„èµ·ç‚¹ï¼Œäºæ˜¯å½“n+1å­˜åœ¨æ—¶ï¼Œå¯ä»¥éå†ä¸‹å»ï¼Œæ±‚å‡ºnä¸ºèµ·ç‚¹çš„æœ€é•¿è¿ç»­åºåˆ—é•¿åº¦ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestConsecutive</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        unordered_set&lt;<span class="hljs-type">int</span>&gt; st;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> &amp;t:nums)<br>            st.<span class="hljs-built_in">insert</span>(t);<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>, len=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> tmp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> &amp;t:nums)&#123;<br>            <span class="hljs-keyword">if</span>(!st.<span class="hljs-built_in">count</span>(t<span class="hljs-number">-1</span>))&#123;<br>                tmp=t;<br>                len=<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">while</span>(st.<span class="hljs-built_in">count</span>(tmp+<span class="hljs-number">1</span>))&#123;<br>                    ++tmp;<br>                    ++len;<br>                &#125;<br>                ans=<span class="hljs-built_in">max</span>(ans,len);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°ç¼–è¾‘è·ç¦»</title>
    <link href="/2024/09/17/%E6%9C%80%E5%B0%8F%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/"/>
    <url>/2024/09/17/%E6%9C%80%E5%B0%8F%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å°ç¼–è¾‘è·ç¦»"><a class="markdownIt-Anchor" href="#æœ€å°ç¼–è¾‘è·ç¦»"></a> æœ€å°ç¼–è¾‘è·ç¦»</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E5%B0%8F%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB">æœ€å°ç¼–è¾‘è·ç¦»</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/edit-distance/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œ è¯·è¿”å›å°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°  ã€‚</p><p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</p><p>æ’å…¥ä¸€ä¸ªå­—ç¬¦<br />åˆ é™¤ä¸€ä¸ªå­—ç¬¦<br />æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</p><p>e.g.</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xl">è¾“å…¥ï¼šword1 = <span class="hljs-string">&quot;horse&quot;</span>, word2 = <span class="hljs-string">&quot;ros&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼š<br><span class="hljs-function"><span class="hljs-title">horse</span> -&gt;</span> rorse (å°† <span class="hljs-string">&#x27;h&#x27;</span> æ›¿æ¢ä¸º <span class="hljs-string">&#x27;r&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">rorse</span> -&gt;</span> rose (åˆ é™¤ <span class="hljs-string">&#x27;r&#x27;</span>)<br><span class="hljs-function"><span class="hljs-title">rose</span> -&gt;</span> ros (åˆ é™¤ <span class="hljs-string">&#x27;e&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚dp[i][j]è¡¨ç¤ºs1çš„å‰iä¸ªå­—ç¬¦å’Œs2çš„å‰jä¸ªå­—ç¬¦çš„æœ€å°ç¼–è¾‘è·ç¦»ã€‚å½“å‰å­—ç¬¦ä¸ç›¸ç­‰æ—¶ï¼Œè€ƒè™‘æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢3ç§æƒ…å†µï¼Œéœ€è¦çš„æ¬¡æ•°åˆ†åˆ«æ˜¯<code>dp[i][j-1]+1, dp[i-1][j]+1, dp[i-1][j-1]+1</code>ï¼Œæ‰€ä»¥çŠ¶æ€æ–¹ç¨‹ä¸ºï¼š<br /><code>dp[i][j]=min(min(dp[i][j-1],dp[i-1][j]),dp[i-1][j-1])+1;</code><br />å½“å‰å­—ç¬¦ä¸ç›¸ç­‰æ—¶ï¼Œæ›¿æ¢æ“ä½œæ— éœ€å¢åŠ æ“ä½œæ•°ï¼Œå› æ­¤çŠ¶æ€æ–¹ç¨‹ä¸º<br /><code>dp[i][j]=min(min(dp[i][j-1],dp[i-1][j]),dp[i-1][j-1]-1)+1;</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs inform7">class Solution &#123;<br>public:<br>    int minDistance(string word1, string word2) &#123;<br>        int m=word1.size(),n=word2.size();<br>        if(m==0||n==0)<br>            return n+m;<br>        vector&lt;vector&lt;int&gt;&gt; dp(m+1,vector&lt;int&gt; (n+1));<br>        for(int i=0;i&lt;=m;++i)<br>            dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>=i;<br>        for(int j=0;j&lt;=n;++j)<br>            dp<span class="hljs-comment">[0]</span><span class="hljs-comment">[j]</span>=j;<br>        for(int i=1;i&lt;=m;++i)&#123;<br>            for(int j=1;j&lt;=n;++j)&#123;<br>                if(word1<span class="hljs-comment">[i-1]</span>==word2<span class="hljs-comment">[j-1]</span>)<br>                    dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=min(min(dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j-1]</span>,dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>),dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j-1]</span>-1)+1;<br>                else<br>                    dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=min(min(dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j-1]</span>,dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>),dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j-1]</span>)+1;<br>            &#125;<br>        &#125;<br>        return dp<span class="hljs-comment">[m]</span><span class="hljs-comment">[n]</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‰¾åˆ°æ‰€æœ‰å­—æ¯å¼‚ä½è¯</title>
    <link href="/2024/09/16/%E6%89%BE%E5%88%B0%E6%89%80%E6%9C%89%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/"/>
    <url>/2024/09/16/%E6%89%BE%E5%88%B0%E6%89%80%E6%9C%89%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="æ‰¾åˆ°æ‰€æœ‰å­—æ¯å¼‚ä½è¯"><a class="markdownIt-Anchor" href="#æ‰¾åˆ°æ‰€æœ‰å­—æ¯å¼‚ä½è¯"></a> æ‰¾åˆ°æ‰€æœ‰å­—æ¯å¼‚ä½è¯</h2><!-- TOC --><ul><li><a href="#%E6%89%BE%E5%88%B0%E6%89%80%E6%9C%89%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D">æ‰¾åˆ°æ‰€æœ‰å­—æ¯å¼‚ä½è¯</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ pï¼Œæ‰¾åˆ° s ä¸­æ‰€æœ‰ p çš„ å¼‚ä½è¯ çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚</p><p>å¼‚ä½è¯ æŒ‡ç”±ç›¸åŒå­—æ¯é‡æ’åˆ—å½¢æˆçš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç›¸åŒçš„å­—ç¬¦ä¸²ï¼‰ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥: s = <span class="hljs-string">&quot;cbaebabacd&quot;</span>, <span class="hljs-selector-tag">p</span> = <span class="hljs-string">&quot;abc&quot;</span><br>è¾“å‡º: <span class="hljs-selector-attr">[0,6]</span><br>è§£é‡Š:<br>èµ·å§‹ç´¢å¼•ç­‰äº <span class="hljs-number">0</span> çš„å­ä¸²æ˜¯ <span class="hljs-string">&quot;cba&quot;</span>, å®ƒæ˜¯ <span class="hljs-string">&quot;abc&quot;</span> çš„å¼‚ä½è¯ã€‚<br>èµ·å§‹ç´¢å¼•ç­‰äº <span class="hljs-number">6</span> çš„å­ä¸²æ˜¯ <span class="hljs-string">&quot;bac&quot;</span>, å®ƒæ˜¯ <span class="hljs-string">&quot;abc&quot;</span> çš„å¼‚ä½è¯ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸€é“æ»‘åŠ¨çª—å£çš„é¢˜ã€‚é¦–å…ˆè¦åˆ¤æ–­sä¸­æ˜¯å¦å­˜åœ¨å­—æ¯å¼‚ä½è¯ï¼Œåªéœ€è¦ä¿è¯sçš„å­ä¸²<code>s1.size()==p.size()</code>ä¸”ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­å­—æ¯å‡ºç°æ¬¡æ•°ç›¸ç­‰å³å¯</p><p>æ‰€ä»¥ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„vså’Œvpè®°å½•å­—æ¯çš„å‡ºç°æƒ…å†µ</p><p>ä¸‹æ¥å¼€å§‹æ»‘çª—ï¼Œæšä¸¾sçš„å·¦ç«¯ç‚¹ï¼Œç„¶åå‘å³æ‰©å±•å³ç«¯ç‚¹ï¼Œå½“å­ä¸²é•¿åº¦ä¸è¶…è¿‡<code>p.size()</code>ä¸”<code>vs!=vp</code>æ—¶ï¼Œ++rï¼Œå¹¶ä¸”æ›´æ–°vsæ•°ç»„ï¼Œæ¯å½“<code>vs==vp</code>ï¼Œå°†å½“å‰å·¦ç«¯ç‚¹låŠ å…¥ans</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">findAnagrams</span><span class="hljs-params">(string s, string p)</span> </span>&#123;<br>        vector&lt;<span class="hljs-type">int</span>&gt; ans;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vs</span><span class="hljs-params">(<span class="hljs-number">26</span>)</span></span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vp</span><span class="hljs-params">(<span class="hljs-number">26</span>)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c:p)<br>            vp[c-<span class="hljs-string">&#x27;a&#x27;</span>]++;<br>        <span class="hljs-type">int</span> slen=s.<span class="hljs-built_in">size</span>(), plen=p.<span class="hljs-built_in">size</span>(), r=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> l=<span class="hljs-number">0</span>;l&lt;slen&amp;&amp;r&lt;slen;++l)&#123;<br>            <span class="hljs-keyword">if</span>(l!=<span class="hljs-number">0</span>)<br>                --vs[s[l<span class="hljs-number">-1</span>]-<span class="hljs-string">&#x27;a&#x27;</span>]; <br>            <span class="hljs-keyword">while</span>(r&lt;slen &amp;&amp; r-l+<span class="hljs-number">1</span>&lt;=plen)&#123;<br>                ++vs[s[r]-<span class="hljs-string">&#x27;a&#x27;</span>];<br>                ++r;<br>                <span class="hljs-keyword">if</span>(vs==vp)&#123;<br>                    ans.<span class="hljs-built_in">push_back</span>(l);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125; <br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LRUç¼“å­˜</title>
    <link href="/2024/09/16/LRU%E7%BC%93%E5%AD%98/"/>
    <url>/2024/09/16/LRU%E7%BC%93%E5%AD%98/</url>
    
    <content type="html"><![CDATA[<h2 id="lruç¼“å­˜"><a class="markdownIt-Anchor" href="#lruç¼“å­˜"></a> LRUç¼“å­˜</h2><!-- TOC --><ul><li><a href="#lru%E7%BC%93%E5%AD%98">LRUç¼“å­˜</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/lru-cache/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³  LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚<br />å®ç° LRUCache ç±»ï¼š<br />LRUCache(int capacity) ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ capacity åˆå§‹åŒ– LRU ç¼“å­˜<br />int get(int key) å¦‚æœå…³é”®å­— key å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚<br />void put(int key, int value) å¦‚æœå…³é”®å­— key å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ value ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ capacity ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚<br />å‡½æ•° get å’Œ put å¿…é¡»ä»¥ O(1) çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥<br>[<span class="hljs-string">&quot;LRUCache&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;put&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;get&quot;</span>]<br>[[<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>]]<br>è¾“å‡º<br>[null, null, null, <span class="hljs-number">1</span>, null, <span class="hljs-number">-1</span>, null, <span class="hljs-number">-1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸€å¼€å§‹çœ‹åˆ°ä»¥O(1)æ—¶é—´å¤æ‚åº¦è¿è¡Œï¼Œæƒ³åˆ°ç”¨ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ªé˜Ÿåˆ—è§£å†³ï¼Œä½†æ˜¯å®é™…ä¸Šæƒ³å¾—å¤ªç®€å•äº†ï¼Œå¿½ç•¥äº†ä¸€äº›å¤æ‚æƒ…å†µã€‚å®˜æ–¹é¢˜è§£ç”¨å“ˆç³»è¡¨å’ŒåŒå‘é˜Ÿåˆ—è§£å†³ï¼Œå†™çš„å¾ˆå¤æ‚ï¼Œæˆ‘ä¸»è¦å‚è€ƒäº†è¯„è®ºåŒºçš„å¤§ä½¬çš„æ€è·¯ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç»“æ„ä½“Nodeï¼ŒåŒ…æ‹¬Key, value, prevæŒ‡é’ˆ, nextæŒ‡é’ˆï¼Œç”¨æ¥ä»£è¡¨ä¸€ä¸ªåŒå‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚</p><p>å¯¹è¯¥ç»“æ„ä½“çš„æ“ä½œæœ‰remove, push_front, get_nodeç­‰<br /><strong>remove</strong><br />ç§»é™¤èŠ‚ç‚¹ï¼Œæ›´æ–°é¦–å°¾æŒ‡é’ˆ</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xl">void remove(Node *x)&#123;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">prev</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>=x-&gt;</span>next;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">prev</span>=x-&gt;</span>prev;<br>    &#125;<br></code></pre></td></tr></table></figure><p><strong>push_front</strong><br />é˜Ÿåˆ—å¤´æ’å…¥æ–°èŠ‚ç‚¹</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xl">void push_front(Node *x)&#123;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span>prev=dummy;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>=dummy-&gt;</span>next;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">prev</span>-&gt;</span>next=x;<br>        <span class="hljs-function"><span class="hljs-title">x</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">next</span>-&gt;</span>prev=x;<br>    &#125;<br></code></pre></td></tr></table></figure><p><strong>get_node</strong><br />æ¨¡æ‹ŸLRUä¸­è®¿é—®æŸä¸ªå…ƒç´ çš„æ“ä½œï¼Œæ¯å½“è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥ä¸å­˜åœ¨è¿”å›ç©ºï¼Œå­˜åœ¨åˆ™é‡æ–°å°†å®ƒæ’å…¥åˆ°å¤´éƒ¨</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs abnf">void push_front(Node *x)&#123;<br>        auto it<span class="hljs-operator">=</span>mp.find(key)<span class="hljs-comment">;</span><br>        if(it<span class="hljs-operator">=</span><span class="hljs-operator">=</span>mp.end())<br>            return nullptr<span class="hljs-comment">;</span><br>        Node *t<span class="hljs-operator">=</span>it-&gt;second<span class="hljs-comment">;</span><br>        remove(t)<span class="hljs-comment">;</span><br>        push_front(t)<span class="hljs-comment">;</span><br>        return t<span class="hljs-comment">;</span><br>    &#125;<br></code></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªå“ˆç³»è¡¨<code>unordered_map&lt;int,Node*&gt;</code>ä¿å­˜æ¯ä¸ªkeyå¯¹åº”çš„Nodeï¼Œæ–¹ä¾¿æŸ¥è¯¢</p><p>å®šä¹‰ä¸€ä¸ªå“¨å…µèŠ‚ç‚¹dummyï¼Œ<code>dummy-&gt;next</code>æŒ‡å‘é˜Ÿåˆ—å¤´ï¼Œ<code>dummy-&gt;prev</code>æŒ‡å‘é˜Ÿåˆ—å°¾ï¼Œåˆå§‹åŒ–<code>dummy-&gt;next=dummyï¼Œdummy-&gt;prev=dummy</code></p><p>åœ¨getæ—¶ï¼Œè°ƒç”¨get_nodeï¼Œå¦‚æœä¸ºç©ºåˆ™è¿”å›-1,å¦åˆ™å°±è¿”å›å¯¹åº”value</p><p>åœ¨putæ—¶ï¼ŒåŒæ ·è°ƒç”¨get_nodeï¼Œè‹¥å·²å­˜åœ¨åˆ™ä¿®æ”¹<code>node-&gt;value</code>å³å¯;å¦åˆ™ä½¿ç”¨push_frontæ’å…¥æ–°èŠ‚ç‚¹ï¼Œç„¶åè‹¥è¶…å‡ºå®¹é‡ï¼Œåˆ é™¤<code>dummy-&gt;prev</code>æŒ‡å‘çš„é˜Ÿåˆ—å°¾å…ƒç´ ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Node&#123;<br>public:<br>    int key,value;<br>    Node *prev,*next;<br>    Node(int <span class="hljs-attribute">k</span>=0, int <span class="hljs-attribute">v</span>=0) : key(k),value(v)&#123;&#125;<br>&#125;;<br><br>class LRUCache &#123;<br>private:    <br>    unordered_map&lt;int,Node*&gt; mp;<br>    Node <span class="hljs-number">*d</span>ummy;<br>    int sz;<br><br>    void <span class="hljs-built_in">remove</span>(Node *x)&#123;<br>        x-&gt;prev-&gt;<span class="hljs-attribute">next</span>=x-&gt;next;<br>        x-&gt;next-&gt;<span class="hljs-attribute">prev</span>=x-&gt;prev;<br>    &#125;<br><br>    void push_front(Node *x)&#123;<br>        x-&gt;<span class="hljs-attribute">prev</span>=dummy;<br>        x-&gt;<span class="hljs-attribute">next</span>=dummy-&gt;next;<br>        x-&gt;prev-&gt;<span class="hljs-attribute">next</span>=x;<br>        x-&gt;next-&gt;<span class="hljs-attribute">prev</span>=x;<br>    &#125;<br><br>    Node *get_node(int key)&#123;<br>        auto <span class="hljs-attribute">it</span>=mp.find(key);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-attribute">it</span>==mp.end())<br>            return nullptr;<br>        Node *<span class="hljs-attribute">t</span>=it-&gt;second;<br>        <span class="hljs-built_in">remove</span>(t);<br>        push_front(t);<br>        return t;<br>    &#125;<br><br>public:<br>    <br>    LRUCache(int capacity):sz(capacity)&#123;<br>        <span class="hljs-attribute">dummy</span>=new Node();<br>        dummy-&gt;<span class="hljs-attribute">prev</span>=dummy;<br>        dummy-&gt;<span class="hljs-attribute">next</span>=dummy;<br>    &#125;<br>    <br>    int <span class="hljs-built_in">get</span>(int key) &#123;<br>        Node *<span class="hljs-attribute">node</span>=get_node(key);<br>        return node ? node-&gt;value:-1; <br>    &#125;<br>    <br>    void put(int key, int value) &#123;<br>        Node *<span class="hljs-attribute">node</span>=get_node(key);<br>        <span class="hljs-keyword">if</span>(node)&#123;<br>            node-&gt;<span class="hljs-attribute">value</span>=value;<br>            return;<br>        &#125;<br>        node =new Node(key,value);<br>        mp[key]=node;<br>        push_front(node);<br>        <span class="hljs-keyword">if</span>(mp.size()&gt;sz)&#123;<br>            Node <span class="hljs-number">*bac</span><span class="hljs-attribute">k</span>=dummy-&gt;prev;<br>            mp.erase(back-&gt;key);<br>            <span class="hljs-built_in">remove</span>(back);<br>            delete back;<br>        &#125;<br>            <br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°æ ˆ</title>
    <link href="/2024/09/15/%E6%9C%80%E5%B0%8F%E6%A0%88/"/>
    <url>/2024/09/15/%E6%9C%80%E5%B0%8F%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å°æ ˆ"><a class="markdownIt-Anchor" href="#æœ€å°æ ˆ"></a> æœ€å°æ ˆ</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E5%B0%8F%E6%A0%88">æœ€å°æ ˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/min-stack/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</p><p>å®ç° MinStack ç±»:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">MinStack</span>() åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚<br>void <span class="hljs-built_in">push</span>(int val) å°†å…ƒç´ valæ¨å…¥å †æ ˆã€‚<br>void <span class="hljs-built_in">pop</span>() åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚<br>int <span class="hljs-attribute">top</span>() è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚<br>int <span class="hljs-built_in">getMin</span>() è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚<br></code></pre></td></tr></table></figure><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">&quot;MinStack&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;getMin&quot;</span>,<span class="hljs-string">&quot;pop&quot;</span>,<span class="hljs-string">&quot;top&quot;</span>,<span class="hljs-string">&quot;getMin&quot;</span>]<br>[[],[<span class="hljs-number">-2</span>],[<span class="hljs-number">0</span>],[<span class="hljs-number">-3</span>],[],[],[],[]]<br><br>è¾“å‡ºï¼š<br>[null,null,null,null,<span class="hljs-number">-3</span>,null,<span class="hljs-number">0</span>,<span class="hljs-number">-2</span>]<br><br>è§£é‡Šï¼š<br><span class="hljs-symbol">MinStack</span> minStack = new <span class="hljs-symbol">MinStack</span>();<br>minStack.push(<span class="hljs-number">-2</span>);<br>minStack.push(<span class="hljs-number">0</span>);<br>minStack.push(<span class="hljs-number">-3</span>);<br>minStack.getMin();   --&gt; è¿”å› <span class="hljs-number">-3.</span><br>minStack.pop();<br>minStack.top();      --&gt; è¿”å› <span class="hljs-number">0.</span><br>minStack.getMin();   --&gt; è¿”å› <span class="hljs-number">-2.</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦éš¾ç‚¹åœ¨äºå¦‚ä½•åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ ã€‚è§£å†³æ–¹æ³•æœ‰ç‚¹ç±»ä¼¼å•è°ƒæ ˆï¼Œé‡æ–°å¼€ä¸€ä¸ªè¾…åŠ©æ ˆï¼Œå…¶æ ˆé¡¶å…ƒç´ ä¸ºå½“å‰ä¸»æ ˆå†…æ‰€æœ‰å…ƒç´ çš„æœ€å°å€¼ã€‚æ¯å½“pushæ“ä½œæ—¶ï¼Œä¸»æ ˆç›´æ¥æ’å…¥ï¼Œè¾…åŠ©æ ˆå°†æ ˆé¡¶å…ƒç´ ä¸è¦æ’å…¥çš„å…ƒç´ è¿›è¡Œå¯¹æ¯”ï¼Œç„¶åæ’å…¥å…¶ä¸­çš„è¾ƒå°çš„ä¸€ä¸ªã€‚popæ“ä½œæ—¶ï¼Œä¸¤ä¸ªæ ˆåŒæ—¶popï¼Œtopæ“ä½œä¸»æ ˆè¿”å›é¡¶éƒ¨å…ƒç´ ï¼ŒgetMin()æ—¶è¾…åŠ©æ ˆè¿”å›é¡¶éƒ¨å…ƒç´ ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MinStack</span> &#123;<br>    stack&lt;<span class="hljs-type">int</span>&gt; st;<br>    stack&lt;<span class="hljs-type">int</span>&gt; aux_st;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MinStack</span>() &#123;<br>        aux_st.<span class="hljs-built_in">push</span>(INT_MAX);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br>        st.<span class="hljs-built_in">push</span>(val);<br>        aux_st.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">min</span>(aux_st.<span class="hljs-built_in">top</span>(),val));<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>        st.<span class="hljs-built_in">pop</span>();<br>        aux_st.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> st.<span class="hljs-built_in">top</span>();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getMin</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> aux_st.<span class="hljs-built_in">top</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å•è¯æ‹†åˆ†</title>
    <link href="/2024/09/14/%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86/"/>
    <url>/2024/09/14/%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h2 id="å•è¯æ‹†åˆ†"><a class="markdownIt-Anchor" href="#å•è¯æ‹†åˆ†"></a> å•è¯æ‹†åˆ†</h2><!-- TOC --><ul><li><a href="#%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86">å•è¯æ‹†åˆ†</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/word-break/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ wordDict ä½œä¸ºå­—å…¸ã€‚å¦‚æœå¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯æ‹¼æ¥å‡º s åˆ™è¿”å› trueã€‚</p><p>æ³¨æ„ï¼šä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚</p><p>e.g.</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥: <span class="hljs-attr">s</span> = <span class="hljs-string">&quot;leetcode&quot;</span>, <span class="hljs-attr">wordDict</span> = [<span class="hljs-string">&quot;leet&quot;</span>, <span class="hljs-string">&quot;code&quot;</span>]<br>è¾“å‡º: <span class="hljs-literal">true</span><br>è§£é‡Š: è¿”å› <span class="hljs-literal">true</span> å› ä¸º <span class="hljs-string">&quot;leetcode&quot;</span> å¯ä»¥ç”± <span class="hljs-string">&quot;leet&quot;</span> å’Œ <span class="hljs-string">&quot;code&quot;</span> æ‹¼æ¥æˆã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯dpã€‚dp[i]è¡¨ç¤º<code>0ï½i-1</code>çš„å­ä¸²æ˜¯å¦å¯ä»¥ç”¨dictä¸­çš„è¯ç»„æˆï¼Œå¯¹äº<code>0&lt;j&lt;i</code>ï¼ŒçŠ¶æ€æ–¹ç¨‹å¯ä»¥å†™ä¸º<code>dp[i]=dp[j] &amp;&amp; check(j,i-1)</code></p><p>å¯¹äº<code>check(j,i-1)</code>ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå“ˆç³»è¡¨stæ¥ä¿å­˜dictä¸­çš„æ‰€æœ‰å•è¯ï¼Œå¦‚æœæ»¡è¶³ï¼š</p><figure class="highlight mizar"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mizar"><span class="hljs-keyword">st</span>.find(s.substr(j,i-j))!=<span class="hljs-keyword">st</span>.<span class="hljs-keyword">end</span>()<br></code></pre></td></tr></table></figure><p>è¯´æ˜<code>j~i-1</code>çš„éƒ¨åˆ†å¯ä»¥ä¸dictä¸­çš„å•è¯åŒ¹é…æˆåŠŸ</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">wordBreak</span><span class="hljs-params">(string s, vector&lt;string&gt;&amp; wordDict)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=s.<span class="hljs-built_in">size</span>();<br>        unordered_set&lt;string&gt; st;<br>        <span class="hljs-keyword">for</span>(string &amp;t:wordDict)&#123;<br>            st.<span class="hljs-built_in">insert</span>(t);<br>        &#125;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n+<span class="hljs-number">1</span>,<span class="hljs-literal">false</span>)</span></span>;<br>        dp[<span class="hljs-number">0</span>]=<span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;i;++j)&#123;<br>                <span class="hljs-keyword">if</span>(dp[j] &amp;&amp; st.<span class="hljs-built_in">find</span>(s.<span class="hljs-built_in">substr</span>(j,i-j))!=st.<span class="hljs-built_in">end</span>())&#123;<br>                    dp[i]=<span class="hljs-literal">true</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[n];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é•¿åº¦æœ€å°å­æ•°ç»„</title>
    <link href="/2024/09/14/%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <url>/2024/09/14/%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h2 id="é•¿åº¦æœ€å°å­æ•°ç»„"><a class="markdownIt-Anchor" href="#é•¿åº¦æœ€å°å­æ•°ç»„"></a> é•¿åº¦æœ€å°å­æ•°ç»„</h2><!-- TOC --><ul><li><a href="#%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E5%AD%90%E6%95%B0%E7%BB%84">é•¿åº¦æœ€å°å­æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p><p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº target çš„é•¿åº¦æœ€å°çš„<br />å­æ•°ç»„<br /><code>[numsl, numsl+1, ..., numsr-1, numsr]</code> ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼štarget = 7, nums = <span class="hljs-comment">[2,3,1,2,4,3]</span><br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼šå­æ•°ç»„ <span class="hljs-comment">[4,3]</span> æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¥½ä¹…æ²¡åˆ·é¢˜äº†ï¼Œä»Šå¤©åšé“æ»‘åŠ¨çª—å£ç»ƒç»ƒï¼Œç»“æœç›´æ¥è¶…æ—¶äº† ğŸ˜…ï¼Œå·å·çœ‹äº†é¢˜è§£ ğŸ˜ï¼Œé¢˜ç›®ä¸éš¾ï¼Œå³è¾¹ç•Œæ‰©å¼ ï¼Œå·¦è¾¹ç•Œæ”¶ç¼©å³å¯ï¼Œå…·ä½“è§ä»£ç ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> Solution &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> minSubArrayLen(<span class="hljs-built_in">int</span> <span class="hljs-keyword">target</span>, vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums) &#123;<br>        <span class="hljs-built_in">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-built_in">int</span> res=INT_MAX;<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(r&lt;n)&#123;<br>            <span class="hljs-built_in">sum</span>+=nums[r];<br>            <span class="hljs-keyword">while</span>(<span class="hljs-built_in">sum</span>&gt;=<span class="hljs-keyword">target</span>)&#123;<br>                res=<span class="hljs-built_in">min</span>(res,r-l+<span class="hljs-number">1</span>);<br>                <span class="hljs-built_in">sum</span>-=nums[l];<br>                ++l;<br>            &#125;<br>            ++r;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res==INT_MAX ? <span class="hljs-number">0</span>:res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‹ä¸€ä¸ªæ’åˆ—</title>
    <link href="/2024/05/30/%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97/"/>
    <url>/2024/05/30/%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸‹ä¸€ä¸ªæ’åˆ—"><a class="markdownIt-Anchor" href="#ä¸‹ä¸€ä¸ªæ’åˆ—"></a> ä¸‹ä¸€ä¸ªæ’åˆ—</h2><!-- TOC --><ul><li><a href="#%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97">ä¸‹ä¸€ä¸ªæ’åˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/next-permutation/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª æ’åˆ—  å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚</p><p>ä¾‹å¦‚ï¼Œarr = [1,2,3] ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ arr çš„æ’åˆ—ï¼š[1,2,3]ã€[1,3,2]ã€[3,1,2]ã€[2,3,1] ã€‚<br />æ•´æ•°æ•°ç»„çš„ ä¸‹ä¸€ä¸ªæ’åˆ— æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ ä¸‹ä¸€ä¸ªæ’åˆ— å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼Œarr = [1,2,3] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,3,2] ã€‚<br />ç±»ä¼¼åœ°ï¼Œarr = [2,3,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [3,1,2] ã€‚<br />è€Œ arr = [3,2,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,2,3] ï¼Œå› ä¸º [3,2,1] ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚<br />ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡º nums çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p><p>å¿…é¡» åŸåœ° ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[1,2,3]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,3,2]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¾ˆä¹…ä¹‹å‰åšè¿‡è¿™é“é¢˜(å½“æ—¶ç›´æ¥next_permutationäº†ğŸ˜)ï¼Œç°åœ¨é‡æ–°å†™ä¸€éã€‚<br />ä¸»è¦åˆ†ä¸‰æ­¥:</p><ul><li>ä»åå¾€å‰éå†ï¼Œæ‰¾åˆ°<code>nums[i]</code>æ»¡è¶³<code>nums[i]&lt;nums[i+1]</code></li><li>ä»åå¾€å‰éå†ï¼Œæ‰¾åˆ°<code>nums[j]</code>æ»¡è¶³<code>nums[i]&lt;nums[j]</code>ï¼Œç„¶åswap</li><li>å°†iä»¥åçš„éƒ¨åˆ†(i+1ï½end) reverse</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Solution</span> &#123;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    void nextPermutation(<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;&amp; <span class="hljs-title">nums</span>) &#123;</span><br><span class="hljs-class">        // next_permutation(<span class="hljs-title">nums</span>.<span class="hljs-title">begin</span>(),nums.end());</span><br><span class="hljs-class">        int n=nums.size();</span><br><span class="hljs-class">        int i=n-2,j=n-1;</span><br><span class="hljs-class">        while(<span class="hljs-title">i</span>&gt;=0&amp;&amp;<span class="hljs-title">nums</span>[<span class="hljs-title">i</span>]&gt;=<span class="hljs-title">nums</span>[<span class="hljs-title">i</span>+1])</span><br><span class="hljs-class">            <span class="hljs-comment">--i;</span></span><br><span class="hljs-class"></span><br><span class="hljs-class">        if(<span class="hljs-title">i</span>&gt;=0)&#123;</span><br><span class="hljs-class">            while(<span class="hljs-title">j</span>&gt;=0&amp;&amp;<span class="hljs-title">nums</span>[<span class="hljs-title">j</span>]&lt;=<span class="hljs-title">nums</span>[<span class="hljs-title">i</span>])</span><br><span class="hljs-class">                <span class="hljs-comment">--j;</span></span><br><span class="hljs-class">            swap(<span class="hljs-title">nums</span>[<span class="hljs-title">i</span>],<span class="hljs-title">nums</span>[<span class="hljs-title">j</span>]);</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        reverse(<span class="hljs-title">nums</span>.<span class="hljs-title">begin</span>()+i+1,nums.end());</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢„æµ‹èµ¢å®¶</title>
    <link href="/2024/05/25/%E9%A2%84%E6%B5%8B%E8%B5%A2%E5%AE%B6/"/>
    <url>/2024/05/25/%E9%A2%84%E6%B5%8B%E8%B5%A2%E5%AE%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="é¢„æµ‹èµ¢å®¶"><a class="markdownIt-Anchor" href="#é¢„æµ‹èµ¢å®¶"></a> é¢„æµ‹èµ¢å®¶</h2><!-- TOC --><ul><li><a href="#%E9%A2%84%E6%B5%8B%E8%B5%A2%E5%AE%B6">é¢„æµ‹èµ¢å®¶</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/predict-the-winner/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ã€‚ç©å®¶ 1 å’Œç©å®¶ 2 åŸºäºè¿™ä¸ªæ•°ç»„è®¾è®¡äº†ä¸€ä¸ªæ¸¸æˆã€‚</p><p>ç©å®¶ 1 å’Œç©å®¶ 2 è½®æµè¿›è¡Œè‡ªå·±çš„å›åˆï¼Œç©å®¶ 1 å…ˆæ‰‹ã€‚å¼€å§‹æ—¶ï¼Œä¸¤ä¸ªç©å®¶çš„åˆå§‹åˆ†å€¼éƒ½æ˜¯ 0 ã€‚æ¯ä¸€å›åˆï¼Œç©å®¶ä»æ•°ç»„çš„ä»»æ„ä¸€ç«¯å–ä¸€ä¸ªæ•°å­—ï¼ˆå³ï¼Œnums[0] æˆ– nums[nums.length - 1]ï¼‰ï¼Œå–åˆ°çš„æ•°å­—å°†ä¼šä»æ•°ç»„ä¸­ç§»é™¤ï¼ˆæ•°ç»„é•¿åº¦å‡ 1 ï¼‰ã€‚ç©å®¶é€‰ä¸­çš„æ•°å­—å°†ä¼šåŠ åˆ°ä»–çš„å¾—åˆ†ä¸Šã€‚å½“æ•°ç»„ä¸­æ²¡æœ‰å‰©ä½™æ•°å­—å¯å–æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚</p><p>å¦‚æœç©å®¶ 1 èƒ½æˆä¸ºèµ¢å®¶ï¼Œè¿”å› true ã€‚å¦‚æœä¸¤ä¸ªç©å®¶å¾—åˆ†ç›¸ç­‰ï¼ŒåŒæ ·è®¤ä¸ºç©å®¶ 1 æ˜¯æ¸¸æˆçš„èµ¢å®¶ï¼Œä¹Ÿè¿”å› true ã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªç©å®¶çš„ç©æ³•éƒ½ä¼šä½¿ä»–çš„åˆ†æ•°æœ€å¤§åŒ–ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šnums = [1,5,2]<br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šä¸€å¼€å§‹ï¼Œç©å®¶<span class="hljs-number"> 1 </span>å¯ä»¥ä»<span class="hljs-number"> 1 </span>å’Œ<span class="hljs-number"> 2 </span>ä¸­è¿›è¡Œé€‰æ‹©ã€‚<br>å¦‚æœä»–é€‰æ‹© 2ï¼ˆæˆ–è€…<span class="hljs-number"> 1 </span>ï¼‰ï¼Œé‚£ä¹ˆç©å®¶<span class="hljs-number"> 2 </span>å¯ä»¥ä» 1ï¼ˆæˆ–è€…<span class="hljs-number"> 2 </span>ï¼‰å’Œ<span class="hljs-number"> 5 </span>ä¸­è¿›è¡Œé€‰æ‹©ã€‚å¦‚æœç©å®¶<span class="hljs-number"> 2 </span>é€‰æ‹©äº†<span class="hljs-number"> 5 </span>ï¼Œé‚£ä¹ˆç©å®¶<span class="hljs-number"> 1 </span>åˆ™åªå‰©ä¸‹ 1ï¼ˆæˆ–è€…<span class="hljs-number"> 2 </span>ï¼‰å¯é€‰ã€‚ <br>æ‰€ä»¥ï¼Œç©å®¶<span class="hljs-number"> 1 </span>çš„æœ€ç»ˆåˆ†æ•°ä¸º<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 2 </span>= 3ï¼Œè€Œç©å®¶<span class="hljs-number"> 2 </span>ä¸º<span class="hljs-number"> 5 </span>ã€‚<br>å› æ­¤ï¼Œç©å®¶<span class="hljs-number"> 1 </span>æ°¸è¿œä¸ä¼šæˆä¸ºèµ¢å®¶ï¼Œè¿”å› false ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸¤ä¸ªç©å®¶è½®æµå–æ•°å­—ï¼Œç”¨dp[i][j]è¡¨ç¤ºåœ¨æ•°å­—i~jä¹‹é—´ï¼Œç©å®¶1å¯¹äºç©å®¶2çš„æœ€å¤§åˆ†æ•°å·®ï¼Œæ˜¾ç„¶ï¼Œå¦‚æœç©å®¶1å–nums[i]ï¼Œé‚£ä¹ˆdp[i+1][j]ä¸ºç©å®¶2å¯¹ç©å®¶1çš„æœ€å¤§åˆ†æ•°å·®;å¦‚æœç©å®¶1å–nums[j]ï¼Œé‚£ä¹ˆdp[i][j-1]ä¸ºç©å®¶2å¯¹ç©å®¶1çš„æœ€å¤§åˆ†æ•°å·®ï¼ŒçŠ¶æ€æ–¹ç¨‹ä¸ºï¼š<code>dp[i][j]=max(nums[i]-dp[i+1][j],nums[j]-dp[i][j-1])</code>ã€‚å¦‚æœi==jï¼Œé‚£ä¹ˆç©å®¶1å…ˆå–ï¼Œdp[i][i]=nums[i]ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">predictTheWinner</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dp</span>(n,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; (n));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>            dp[i][i]=nums[i];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;n;++j)<br>            &#123;<br>                dp[i][j]=<span class="hljs-built_in">max</span>(nums[i]-dp[i+<span class="hljs-number">1</span>][j],nums[j]-dp[i][j<span class="hljs-number">-1</span>]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][n<span class="hljs-number">-1</span>]&gt;=<span class="hljs-number">0</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°åŒºé—´</title>
    <link href="/2024/05/23/%E6%9C%80%E5%B0%8F%E5%8C%BA%E9%97%B4/"/>
    <url>/2024/05/23/%E6%9C%80%E5%B0%8F%E5%8C%BA%E9%97%B4/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å°åŒºé—´"><a class="markdownIt-Anchor" href="#æœ€å°åŒºé—´"></a> æœ€å°åŒºé—´</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E5%B0%8F%E5%8C%BA%E9%97%B4">æœ€å°åŒºé—´</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/smallest-range-covering-elements-from-k-lists/description">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æœ‰ k ä¸ª éé€’å‡æ’åˆ— çš„æ•´æ•°åˆ—è¡¨ã€‚æ‰¾åˆ°ä¸€ä¸ª æœ€å° åŒºé—´ï¼Œä½¿å¾— k ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªåˆ—è¡¨è‡³å°‘æœ‰ä¸€ä¸ªæ•°åŒ…å«åœ¨å…¶ä¸­ã€‚</p><p>æˆ‘ä»¬å®šä¹‰å¦‚æœ b-a &lt; d-c æˆ–è€…åœ¨ b-a == d-c æ—¶ a &lt; cï¼Œåˆ™åŒºé—´ [a,b] æ¯” [c,d] å°</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[<span class="hljs-comment">[4,10,15,24,26]</span>, <span class="hljs-comment">[0,9,12,20]</span>, <span class="hljs-comment">[5,18,22,30]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[20,24]</span><br>è§£é‡Šï¼š <br>åˆ—è¡¨ 1ï¼š<span class="hljs-comment">[4, 10, 15, 24, 26]</span>ï¼Œ24 åœ¨åŒºé—´ <span class="hljs-comment">[20,24]</span> ä¸­ã€‚<br>åˆ—è¡¨ 2ï¼š<span class="hljs-comment">[0, 9, 12, 20]</span>ï¼Œ20 åœ¨åŒºé—´ <span class="hljs-comment">[20,24]</span> ä¸­ã€‚<br>åˆ—è¡¨ 3ï¼š<span class="hljs-comment">[5, 18, 22, 30]</span>ï¼Œ22 åœ¨åŒºé—´ <span class="hljs-comment">[20,24]</span> ä¸­ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜è‡ªå·±çœ‹çš„æ—¶å€™æ²¡ä»€ä¹ˆå¤´ç»ªï¼Œçœ‹äº†å®˜æ–¹é¢˜è§£æ‰æ˜ç™½ã€‚ä¸»è¦æ€è·¯å°±æ˜¯æ»‘åŠ¨çª—å£å’Œå“ˆç³»è¡¨ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå“ˆç³»è¡¨æ¥å‚¨å­˜æ¯ä¸ªæ•°å­—å„è‡ªå±äºå“ªä¸ªæ•°ç»„ï¼Œå¦‚ mp[i]=[0,1,2] è¡¨ç¤ºæ•°å­— i åœ¨ç¬¬ [0,1,2] ä¸ªæ•°ç»„ä¸­éƒ½å‡ºç°è¿‡ï¼Œéå†è¿‡ç¨‹ä¸­ç¡®å®šå‡ºæ‰€æœ‰æ•°å­—çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œä½œä¸ºåˆå§‹ç­”æ¡ˆã€‚æ¥ä¸‹æ¥ï¼Œç”¨ä¸€ä¸ªæ•°ç»„freqç»Ÿè®¡æ¯ä¸ªæ•°ç»„çš„å‡ºç°æ¬¡æ•°ï¼Œcntè¡¨ç¤ºè¦†ç›–çš„æ•°ç»„ä¸ªæ•°, åˆå§‹åŒ–æ»‘çª—å·¦ç«¯ç‚¹ l=minï¼Œå³ç«¯ç‚¹r=l-1ï¼Œé¦–å…ˆæ‰©å¼ å³ç«¯ç‚¹ï¼Œå½“rå­˜åœ¨äºmpä¸­ï¼Œå°†rå‡ºç°è¿‡çš„æ‰€æœ‰æ•°ç»„ freq+1ï¼Œå¦‚æœfreqä¸º1,è¯´æ˜è¯¥æ•°ç»„ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œcnt+1ã€‚ç„¶åï¼Œå½“cnt==næ—¶ï¼Œå·²ç»æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œå…ˆæ›´æ–°æœ€å°åŒºé—´ï¼Œç„¶åå¼€å§‹æ”¶ç¼©å·¦ç«¯ç‚¹ï¼ŒåŒç†ï¼Œå½“lå­˜åœ¨äºmpä¸­ï¼Œå°†lå‡ºç°è¿‡çš„æ‰€æœ‰æ•°ç»„ freq-1ï¼Œå¦‚æœfreqä¸º 0,è¯´æ˜è¯¥æ•°ç»„æ²¡æœ‰è¢«è¦†ç›–ï¼Œcnt-1ï¼Œå¼€å§‹æ–°çš„æ‰©å¼ é˜¶æ®µï¼Œç›´åˆ°rè¾¾åˆ°æ‰€æœ‰æ•°å­—æœ€å¤§å€¼ã€‚å…·ä½“ç»†èŠ‚å‚è€ƒä»£ç ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs perl">class Solution &#123;<br>public:<br>    vector&lt;<span class="hljs-keyword">int</span>&gt; smallestRange(vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; nums) &#123;<br>        <span class="hljs-keyword">int</span> n=nums.size();<br>        unordered_map&lt;<span class="hljs-keyword">int</span>,vector&lt;<span class="hljs-keyword">int</span>&gt;&gt; mp;<span class="hljs-regexp">//</span>è®°å½•æŸå…ƒç´ éƒ½åœ¨å“ªäº›æ•°ç»„å‡ºç°è¿‡<br>        <span class="hljs-keyword">int</span> xmin=INT_MAX,xmax=INT_MIN;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> &amp; t:nums[i])<br>            &#123;<br>                mp[t].push_back(i);<br>                xmin=min(xmin,t);<br>                xmax=max(xmax,t);<br>            &#125;<br>        &#125;<br>        vector&lt;<span class="hljs-keyword">int</span>&gt; fre<span class="hljs-string">q(n)</span>;<span class="hljs-regexp">//</span>ç»Ÿè®¡æ¯ä¸ªæ•°ç»„çš„ç»Ÿè®¡æ¬¡æ•°<br>        <span class="hljs-keyword">int</span> cnt=<span class="hljs-number">0</span>; <span class="hljs-regexp">//</span>cnt==næ—¶è§†ä¸ºæ»¡è¶³æ¡ä»¶<br>        <span class="hljs-keyword">int</span> l=xmin,r=xmin-<span class="hljs-number">1</span>,res_l=xmin,res_r=xmax;<br>        <span class="hljs-keyword">while</span>(r&lt;xmax) //å¼€å§‹æ»‘çª—ï¼Œå…ˆå‘å³æ‰©å¼ ï¼Œå†å‘å·¦æ”¶ç¼©<br>        &#123;<br>            ++r;<br>            <span class="hljs-keyword">if</span>(mp.count(r))<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> &amp;t:mp[r]) //ç»Ÿè®¡å½“å‰æ•°åœ¨å“ªäº›æ•°ç»„å‡ºç°è¿‡ï¼Œå¦‚æœåœ¨æŸæ•°ç»„å‡ºç°åˆ™freq++<br>                &#123;<br>                    ++fre<span class="hljs-string">q[t]</span>;<br>                    <span class="hljs-keyword">if</span>(fre<span class="hljs-string">q[t]</span>==<span class="hljs-number">1</span>) //è‡³å°‘å‡ºç°ä¸€æ¬¡cnt+<span class="hljs-number">1</span><br>                        ++cnt;<br>                &#125;<br>                <span class="hljs-keyword">while</span>(cnt==n)//æ»¡è¶³æ¡ä»¶æ—¶æ›´æ–°ç­”æ¡ˆï¼Œæ”¶ç¼©å·¦åŒºé—´<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(r-l&lt;res_r-res_l) <br>                    &#123;<br>                        res_r=r;<br>                        res_l=l;<br>                    &#125;<br>                    <span class="hljs-keyword">if</span>(mp.count(l))<br>                    &#123;<br>                        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> &amp;t:mp[l])<br>                        &#123;<br>                            --fre<span class="hljs-string">q[t]</span>;<br>                            <span class="hljs-keyword">if</span>(fre<span class="hljs-string">q[t]</span>==<span class="hljs-number">0</span>)//å¦‚æœæŸæ•°ç»„æ²¡æœ‰æ•°åœ¨å½“å‰åŒºé—´å‡ºç°ï¼Œé€€å‡ºæ”¶ç¼©é˜¶æ®µï¼Œç»§ç»­æ‰©å¼ <br>                                --cnt;<br>                        &#125;<br>                    &#125;<br>                    ++l;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;res_l,res_r&#125;;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‘æ•°</title>
    <link href="/2024/05/20/%E4%B8%91%E6%95%B0/"/>
    <url>/2024/05/20/%E4%B8%91%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸‘æ•°"><a class="markdownIt-Anchor" href="#ä¸‘æ•°"></a> ä¸‘æ•°</h2><!-- TOC --><ul><li><a href="#%E4%B8%91%E6%95%B0">ä¸‘æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/ugly-number-ii/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ç¬¬ n ä¸ª ä¸‘æ•° ã€‚</p><p>ä¸‘æ•° å°±æ˜¯è´¨å› å­åªåŒ…å« 2ã€3 å’Œ 5 çš„æ­£æ•´æ•°ã€‚</p><p>e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šn = <span class="hljs-number">10</span><br>è¾“å‡ºï¼š<span class="hljs-number">12</span><br>è§£é‡Šï¼š<span class="hljs-string">[1, 2, 3, 4, 5, 6, 8, 9, 10, 12]</span> æ˜¯ç”±å‰ <span class="hljs-number">10</span> ä¸ªä¸‘æ•°ç»„æˆçš„åºåˆ—ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦ç”¨å †çš„æ€æƒ³ï¼Œä»å°åˆ°è¾¾å°†æœ€å°çš„ä¸‘æ•°1åˆ†åˆ«ä¹˜ä»¥2,3,5åŠ å…¥æœ€å°å †ä¸­ï¼Œå¹¶ä¸”æ³¨æ„ä¸èƒ½åŠ å…¥ç›¸åŒçš„æ•°ï¼Œç„¶ååŠ å…¥çš„ç¬¬nä¸ªæ•°å°±æ˜¯ç­”æ¡ˆã€‚ä¸€å¼€å§‹æ²¡æƒ³åˆ°å †ï¼Œæƒ³å¾—æ˜¯ç”¨è¯•é™¤æ³•ä¸€æ­¥æ­¥ç®—ï¼Œå¤ªä¹…æ²¡åˆ·é¢˜æ„Ÿè§‰è„‘å­éƒ½è½¬ä¸åŠ¨äº†ğŸ˜¢</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">nthUglyNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>        vector&lt;<span class="hljs-type">int</span>&gt; a=&#123;<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>&#125;;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">1</span>;<br>        unordered_set&lt;<span class="hljs-type">long</span>&gt; s;<br>        priority_queue&lt;<span class="hljs-type">long</span>,vector&lt;<span class="hljs-type">long</span>&gt;,greater&lt;<span class="hljs-type">long</span>&gt;&gt; pq;<br>        pq.<span class="hljs-built_in">push</span>(<span class="hljs-number">1</span>);<br>        s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-type">long</span> tmp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;   <br>            tmp=pq.<span class="hljs-built_in">top</span>();<br>            ans=(<span class="hljs-type">int</span>)tmp;<br>            pq.<span class="hljs-built_in">pop</span>();<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> t:a)<br>            &#123;<br>                <span class="hljs-type">long</span> tt=tmp*t;<br>                <span class="hljs-keyword">if</span>(!s.<span class="hljs-built_in">count</span>(tt))<br>                &#123;<br>                    s.<span class="hljs-built_in">insert</span>(tt);<br>                    pq.<span class="hljs-built_in">push</span>(tt);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€è¿‘å…¬å…±ç¥–å…ˆ</title>
    <link href="/2024/05/17/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/"/>
    <url>/2024/05/17/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a class="markdownIt-Anchor" href="#æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a> æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><!-- TOC --><ul><li><a href="#%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88">æœ€è¿‘å…¬å…±ç¥–å…ˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šroot = <span class="hljs-selector-attr">[3,5,1,6,2,0,8,null,null,7,4]</span>, <span class="hljs-selector-tag">p</span> = <span class="hljs-number">5</span>, <span class="hljs-selector-tag">q</span> = <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šèŠ‚ç‚¹ <span class="hljs-number">5</span> å’ŒèŠ‚ç‚¹ <span class="hljs-number">1</span> çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ <span class="hljs-number">3</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¹‹å‰ç»Ÿè®¡è¿‡æœ€è¿‘å…¬å…±ç¥–å…ˆçš„æ¨¡æ¿(<a href="https://lqz2.github.io/2023/06/13/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88LCA/">https://lqz2.github.io/2023/06/13/æœ€è¿‘å…¬å…±ç¥–å…ˆLCA/</a>)ï¼Œä½†æ˜¯æ¯”è¾ƒç¹çã€‚ä¸€ç§ç®€æ´çš„æ€è·¯æ˜¯ï¼Œåˆ†åˆ«ä»å·¦å³å­æ ‘æœç´¢på’Œqï¼Œå½“å‰èŠ‚ç‚¹ä¸ºç©ºæˆ–è€…å½“å‰èŠ‚ç‚¹ç­‰äºpæˆ–qæ—¶è¿”å›å½“å‰èŠ‚ç‚¹ï¼Œå¦‚æœpå’Œqåˆ†åˆ«åœ¨å·¦å³å­æ ‘ä¸­(å·¦å³å­æ ‘è¿”å›å‡ä¸ä¸ºç©º)ï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±æ˜¯LCAï¼Œå¦‚æœpå’Œqåœ¨å·¦å³å­æ ‘å…¶ä¸­ä¸€æ£µä¸Š(å·¦å³å­æ ‘è¿”å›æœ‰ä¸€ä¸ªä¸ºç©º)ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›éç©ºçš„å­æ ‘ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xquery">class Solution &#123;<br>public:<br>    TreeNode* lowestCommonAncestor(TreeNode*<span class="hljs-built_in"> root</span>, TreeNode* p, TreeNode* q) &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">!root</span>|<span class="hljs-built_in">|root</span>==p|<span class="hljs-built_in">|root</span>==q)<br>            <span class="hljs-keyword">return</span><span class="hljs-built_in"> root</span>;<br>        TreeNode* l=lowestCommonAncestor<span class="hljs-built_in">(root</span>-&gt;left,p,q);<br>        TreeNode* r=lowestCommonAncestor<span class="hljs-built_in">(root</span>-&gt;right,p,q);<br>        <span class="hljs-keyword">if</span>(l&amp;&amp;r)<br>            <span class="hljs-keyword">return</span><span class="hljs-built_in"> root</span>;<br>        <span class="hljs-keyword">return</span> l?l:r;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å­é›†ä¸­å…ƒç´ çš„æœ€å¤§æ•°é‡</title>
    <link href="/2024/01/28/%E5%AD%90%E9%9B%86%E4%B8%AD%E5%85%83%E7%B4%A0%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E9%87%8F/"/>
    <url>/2024/01/28/%E5%AD%90%E9%9B%86%E4%B8%AD%E5%85%83%E7%B4%A0%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="å­é›†ä¸­å…ƒç´ çš„æœ€å¤§æ•°é‡"><a class="markdownIt-Anchor" href="#å­é›†ä¸­å…ƒç´ çš„æœ€å¤§æ•°é‡"></a> å­é›†ä¸­å…ƒç´ çš„æœ€å¤§æ•°é‡</h2><p><a href="https://leetcode.cn/problems/find-the-maximum-number-of-elements-in-subset/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª æ­£æ•´æ•° æ•°ç»„ nums ã€‚</p><p>ä½ éœ€è¦ä»æ•°ç»„ä¸­é€‰å‡ºä¸€ä¸ªæ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„å­é›†ï¼š</p><p>ä½ å¯ä»¥å°†é€‰ä¸­çš„å…ƒç´ æ”¾ç½®åœ¨ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ä¸­ï¼Œå¹¶ä½¿å…¶éµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š<code>[x, x^2, x^4, ..., x^k/2, x^k, x^k/2, ..., x^4, x^2, x]</code>ï¼ˆæ³¨æ„ï¼Œk å¯ä»¥æ˜¯ä»»ä½•éè´Ÿçš„2çš„å¹‚ï¼‰ã€‚ä¾‹å¦‚ï¼Œ[2, 4, 16, 4, 2] å’Œ [3, 9, 3] éƒ½ç¬¦åˆè¿™ä¸€æ¨¡å¼ï¼Œè€Œ [2, 4, 8, 4, 2] åˆ™ä¸ç¬¦åˆã€‚<br />è¿”å›æ»¡è¶³è¿™äº›æ¡ä»¶çš„å­é›†ä¸­ï¼Œå…ƒç´ æ•°é‡çš„ æœ€å¤§å€¼ ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯å°±æ˜¯ç»Ÿè®¡å‡ºç°2æ¬¡ä»¥ä¸Šçš„æ•°å­—ï¼Œç„¶åéå†ä»–ä»¬ï¼Œç»Ÿè®¡å­é›†çš„æœ€å¤§æ•°é‡ï¼Œå…·ä½“å®ç°çœ‹ä»£ç å³å¯ç†è§£ï¼Œæ³¨æ„1çš„ç‰¹æ®Šæƒ…å†µã€‚</p><p>å‘¨èµ›ç¬¬äºŒé¢˜ï¼Œæ€è·¯å’Œç­”æ¡ˆä¸€æ ·ï¼Œç”šè‡³æ•°æ®ç»“æ„éƒ½ç”¨çš„ä¸€æ ·ï¼Œä½†æ˜¯å°±å·®ä¸€ç‚¹ç‚¹æ²¡å®ç°å¥½ï¼Œæ„Ÿè§‰ä»£ç å®ç°èƒ½åŠ›è¿˜éœ€è¦å¥½å¥½æå‡ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maximumLength</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;nums)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>        unordered_map&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>, <span class="hljs-type">int</span>&gt; m;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> a : nums)<br>            m[a]++;<br>        <span class="hljs-type">int</span> ans = m[<span class="hljs-number">1</span>] - (m[<span class="hljs-number">1</span>] % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>        m.<span class="hljs-built_in">erase</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : m)<br>        &#123;<br>            <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> t = x.first;<br>            <span class="hljs-keyword">while</span> (m.<span class="hljs-built_in">count</span>(t) &amp;&amp; m[t] &gt; <span class="hljs-number">1</span>)<br>            &#123;<br>                cnt += <span class="hljs-number">2</span>;<br>                t *= t;<br>            &#125;<br>            ans = <span class="hljs-built_in">max</span>(ans, cnt + (m.<span class="hljs-built_in">count</span>(t) ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>));<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¾“å…¥å•è¯éœ€è¦çš„æœ€å°‘æŒ‰é”®æ¬¡æ•°</title>
    <link href="/2024/01/21/%E8%BE%93%E5%85%A5%E5%8D%95%E8%AF%8D%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E6%8C%89%E9%94%AE%E6%AC%A1%E6%95%B0/"/>
    <url>/2024/01/21/%E8%BE%93%E5%85%A5%E5%8D%95%E8%AF%8D%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E6%8C%89%E9%94%AE%E6%AC%A1%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%BE%93%E5%85%A5%E5%8D%95%E8%AF%8D%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E6%8C%89%E9%94%AE%E6%AC%A1%E6%95%B0">è¾“å…¥å•è¯éœ€è¦çš„æœ€å°‘æŒ‰é”®æ¬¡æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è¾“å…¥å•è¯éœ€è¦çš„æœ€å°‘æŒ‰é”®æ¬¡æ•°"><a class="markdownIt-Anchor" href="#è¾“å…¥å•è¯éœ€è¦çš„æœ€å°‘æŒ‰é”®æ¬¡æ•°"></a> è¾“å…¥å•è¯éœ€è¦çš„æœ€å°‘æŒ‰é”®æ¬¡æ•°</h2><p><a href="https://leetcode.cn/problems/minimum-number-of-pushes-to-type-word-ii/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² wordï¼Œç”± ä¸åŒ å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚</p><p>ç”µè¯é”®ç›˜ä¸Šçš„æŒ‰é”®ä¸ ä¸åŒ å°å†™è‹±æ–‡å­—æ¯é›†åˆç›¸æ˜ å°„ï¼Œå¯ä»¥é€šè¿‡æŒ‰å‹æŒ‰é”®æ¥ç»„æˆå•è¯ã€‚ä¾‹å¦‚ï¼ŒæŒ‰é”® 2 å¯¹åº” [â€œaâ€,â€œbâ€,â€œcâ€]ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ä¸€æ¬¡é”®æ¥è¾“å…¥ â€œaâ€ï¼ŒæŒ‰ä¸¤æ¬¡é”®æ¥è¾“å…¥ â€œbâ€ï¼ŒæŒ‰ä¸‰æ¬¡é”®æ¥è¾“å…¥ â€œcâ€ã€‚</p><p>ç°åœ¨å…è®¸ä½ å°†ç¼–å·ä¸º 2 åˆ° 9 çš„æŒ‰é”®é‡æ–°æ˜ å°„åˆ° ä¸åŒ å­—æ¯é›†åˆã€‚æ¯ä¸ªæŒ‰é”®å¯ä»¥æ˜ å°„åˆ° ä»»æ„æ•°é‡ çš„å­—æ¯ï¼Œä½†æ¯ä¸ªå­—æ¯ å¿…é¡» æ°å¥½ æ˜ å°„åˆ° ä¸€ä¸ª æŒ‰é”®ä¸Šã€‚ä½ éœ€è¦æ‰¾åˆ°è¾“å…¥å­—ç¬¦ä¸² word æ‰€éœ€çš„ æœ€å°‘ æŒ‰é”®æ¬¡æ•°ã€‚</p><p>è¿”å›é‡æ–°æ˜ å°„æŒ‰é”®åè¾“å…¥ word æ‰€éœ€çš„ æœ€å°‘ æŒ‰é”®æ¬¡æ•°ã€‚</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šword = &quot;xyzxyzxyzxyz&quot;<br>è¾“å‡ºï¼š12<br>è§£é‡Šï¼šå›¾ç‰‡ä¸­ç»™å‡ºçš„é‡æ–°æ˜ å°„æ–¹æ¡ˆçš„è¾“å…¥æˆæœ¬æœ€å°ã€‚<br>&quot;x&quot; -&gt; åœ¨æŒ‰é”®<span class="hljs-number"> 2 </span>ä¸ŠæŒ‰ä¸€æ¬¡<br>&quot;y&quot; -&gt; åœ¨æŒ‰é”®<span class="hljs-number"> 3 </span>ä¸ŠæŒ‰ä¸€æ¬¡<br>&quot;z&quot; -&gt; åœ¨æŒ‰é”®<span class="hljs-number"> 4 </span>ä¸ŠæŒ‰ä¸€æ¬¡<br>æ€»æˆæœ¬ä¸º<span class="hljs-number"> 1 </span>*<span class="hljs-number"> 4 </span>+<span class="hljs-number"> 1 </span>*<span class="hljs-number"> 4 </span>+<span class="hljs-number"> 1 </span>*<span class="hljs-number"> 4 </span>=<span class="hljs-number"> 12 </span>ã€‚<br>å¯ä»¥è¯æ˜ä¸å­˜åœ¨å…¶ä»–æˆæœ¬æ›´ä½çš„æ˜ å°„æ–¹æ¡ˆã€‚<br>æ³¨æ„æŒ‰é”®<span class="hljs-number"> 9 </span>æ²¡æœ‰æ˜ å°„åˆ°ä»»ä½•å­—æ¯ï¼šä¸å¿…è®©æ¯ä¸ªæŒ‰é”®éƒ½å­˜åœ¨ä¸ä¹‹æ˜ å°„çš„å­—æ¯ï¼Œä½†æ˜¯æ¯ä¸ªå­—æ¯éƒ½å¿…é¡»æ˜ å°„åˆ°æŒ‰é”®ä¸Šã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬ä¸‰é¢˜ï¼Œæ€è·¯å…¶å®å¾ˆç®€å•ï¼Œä½†æ˜¯æ¯”èµ›æ—¶æƒ³å¤æ‚äº†ã€‚é¦–å…ˆç»Ÿè®¡æ‰€æœ‰å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæŒ‰å‡ºç°é¢‘ç‡ä»å¤§å°æ’åºï¼Œç„¶åå¯¹äºå‡ºç°æ¬¡æ•°å‰8å¤§çš„å­—ç¬¦ï¼Œåªéœ€1æ¬¡ï¼Œ9åˆ°16å¤§çš„å­—ç¬¦ï¼Œåªéœ€2æ¬¡ï¼Œä»¥æ­¤ç±»æ¨</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minimumPushes</span><span class="hljs-params">(string <span class="hljs-type">word</span>)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> n = <span class="hljs-type">word</span>.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">cnt</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span></span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>            cnt[<span class="hljs-type">word</span>[i] - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">sort</span>(cnt.<span class="hljs-built_in">begin</span>(), cnt.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)<br>            ans += cnt[i] * ((i / <span class="hljs-number">8</span>) + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä»·å€¼å’Œå°äºç­‰äºkçš„æœ€å¤§æ•°å­—</title>
    <link href="/2024/01/15/%E4%BB%B7%E5%80%BC%E5%92%8C%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8Ek%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E5%AD%97/"/>
    <url>/2024/01/15/%E4%BB%B7%E5%80%BC%E5%92%8C%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8Ek%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E5%AD%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BB%B7%E5%80%BC%E5%92%8C%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8Ek%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E5%AD%97">ä»·å€¼å’Œå°äºç­‰äºkçš„æœ€å¤§æ•°å­—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä»·å€¼å’Œå°äºç­‰äºkçš„æœ€å¤§æ•°å­—"><a class="markdownIt-Anchor" href="#ä»·å€¼å’Œå°äºç­‰äºkçš„æœ€å¤§æ•°å­—"></a> ä»·å€¼å’Œå°äºç­‰äºkçš„æœ€å¤§æ•°å­—</h2><p><a href="https://leetcode.cn/problems/maximum-number-that-sum-of-the-prices-is-less-than-or-equal-to-k/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° k å’Œä¸€ä¸ªæ•´æ•° x ã€‚</p><p>ä»¤ s ä¸ºæ•´æ•° num çš„ä¸‹æ ‡ä» 1 å¼€å§‹çš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚æˆ‘ä»¬è¯´ä¸€ä¸ªæ•´æ•° num çš„ ä»·å€¼ æ˜¯æ»¡è¶³ i % x == 0 ä¸” s[i] æ˜¯ è®¾ç½®ä½ çš„ i çš„æ•°ç›®ã€‚</p><p>è¯·ä½ è¿”å› æœ€å¤§ æ•´æ•° num ï¼Œæ»¡è¶³ä» 1 åˆ° num çš„æ‰€æœ‰æ•´æ•°çš„ ä»·å€¼ å’Œå°äºç­‰äº k ã€‚</p><p>æ³¨æ„ï¼š</p><p>ä¸€ä¸ªæ•´æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹ è®¾ç½®ä½ æ˜¯å€¼ä¸º 1 çš„æ•°ä½ã€‚<br />ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹æ ‡ä»å³åˆ°å·¦ç¼–å·ï¼Œæ¯”æ–¹è¯´å¦‚æœ s == 11100 ï¼Œé‚£ä¹ˆ s[4] == 1 ä¸” s[2] == 0 ã€‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs llvm">è¾“å…¥ï¼šk <span class="hljs-operator">=</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span> <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>è¾“å‡ºï¼š<span class="hljs-number">6</span><br>è§£é‡Šï¼šæ•°å­— <span class="hljs-number">1</span> ï¼Œ<span class="hljs-number">2</span> ï¼Œ<span class="hljs-number">3</span> ï¼Œ<span class="hljs-number">4</span> ï¼Œ<span class="hljs-number">5</span> å’Œ <span class="hljs-number">6</span> äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«ä¸º <span class="hljs-string">&quot;1&quot;</span> ï¼Œ<span class="hljs-string">&quot;10&quot;</span> ï¼Œ<span class="hljs-string">&quot;11&quot;</span> ï¼Œ<span class="hljs-string">&quot;100&quot;</span> ï¼Œ<span class="hljs-string">&quot;101&quot;</span> å’Œ <span class="hljs-string">&quot;110&quot;</span> ã€‚<br>ç”±äº <span class="hljs-keyword">x</span> ç­‰äº <span class="hljs-number">1</span> ï¼Œæ¯ä¸ªæ•°å­—çš„ä»·å€¼åˆ†åˆ«ä¸ºæ‰€æœ‰è®¾ç½®ä½çš„æ•°ç›®ã€‚<br>è¿™äº›æ•°å­—çš„æ‰€æœ‰è®¾ç½®ä½æ•°ç›®æ€»æ•°æ˜¯ <span class="hljs-number">9</span> ï¼Œæ‰€ä»¥å‰ <span class="hljs-number">6</span> ä¸ªæ•°å­—çš„ä»·å€¼å’Œä¸º <span class="hljs-number">9</span> ã€‚<br>æ‰€ä»¥ç­”æ¡ˆä¸º <span class="hljs-number">6</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›çš„ç¬¬3é¢˜ï¼Œåšçš„æ—¶å€™æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–ä¸ä¸‹æ¥ï¼Œä¸€ç›´è¶…æ—¶ã€‚æ•´ä½“æ€è·¯æ˜¯æ•°å­¦åŠ äºŒåˆ†ã€‚</p><p>é¦–å…ˆï¼Œæ±‚1ï½nçš„æ‰€æœ‰æ•°æ¯ä¸ªä½ç½®ä¸Š1çš„æ•°é‡ã€‚è¿™é‡Œå¯ä»¥ç”¨æ•°ä½DPï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ•°å­¦å…¬å¼æ¨å¯¼ï¼š<br />å¯¹äº1ï½nçš„æ‰€æœ‰æ•°ï¼Œç¬¬i(ä»å³åˆ°å·¦é€’å¢ï¼Œä»0å¼€å§‹)ä¸ªä½ç½®çš„1çš„æ•°é‡ä¸º</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><msup><mn>2</mn><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msup></mfrac><mo>Ã—</mo><msup><mn>2</mn><mi>i</mi></msup><mo>+</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">%</mi><msup><mn>2</mn><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><msup><mn>2</mn><mi>i</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{n+1}{2^{i+1}} \times 2^{i} + max(0,(n+1) \% 2^{i+1}-2^i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9579939999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.124664em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">%</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.874664em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1246639999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å¯ä»¥é€šè¿‡ä½è¿ç®—å®Œæˆä¸Šé¢çš„è®¡ç®—ï¼Œæ¯”å¦‚<code>n mod 2^i</code>å³<code>n &amp; ((1 &lt;&lt; i) - 1)</code></p><p>æ‰€ä»¥ä¸Šé¢çš„å¼å­å¯è¡¨ç¤ºä¸ºï¼š</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">(((<span class="hljs-name">n</span> + <span class="hljs-number">1</span>LL) &gt;&gt; (<span class="hljs-name">i</span> + <span class="hljs-number">1</span>LL)) &lt;&lt; i) + max(<span class="hljs-number">0</span>LL, ((<span class="hljs-name">n</span> + <span class="hljs-number">1</span>LL) &amp; ((<span class="hljs-number">1</span>LL &lt;&lt; (<span class="hljs-name">i</span> + <span class="hljs-number">1</span>)) - <span class="hljs-number">1</span>LL)) - (<span class="hljs-number">1</span>LL &lt;&lt; i))<br></code></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å¿«é€Ÿè®¡ç®—1ï½nçš„ä»·å€¼å’Œï¼Œå¾—åˆ°ä»·å€¼å’Œåéœ€è¦ç”¨äºŒåˆ†æŸ¥æ‰¾å¾—åˆ°ä»·å€¼å’Œå°äºç­‰äºKçš„æœ€å¤§çš„nï¼Œå› ä¸ºä»·å€¼å’Œæ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯æ‰¾åˆ°ä»·å€¼å’Œå¤§äºKçš„nå†å‡å»1ï¼Œä¹Ÿå°±æ˜¯ä»·å€¼å’Œå¤§äºç­‰äºK+1çš„nå‡å»1ï¼Œä¸‹é¢è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// åˆ¤æ–­1~nçš„ä»·å€¼å’Œæ˜¯å¦è¶…è¿‡äº†k</span><br>    bool <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> n, <span class="hljs-type">int</span> x, <span class="hljs-type">long</span> <span class="hljs-type">long</span> k)</span><br>    &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">64</span> - __builtin_clzll(n);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; ++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % x == <span class="hljs-number">0</span>)<br>            &#123;<br>                res += (((n + 1LL) &gt;&gt; (i + 1LL)) &lt;&lt; i) + max(0LL, ((n + 1LL) &amp; ((1LL &lt;&lt; (i + <span class="hljs-number">1</span>)) - 1LL)) - (1LL &lt;&lt; i));<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res &lt; k + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title function_">findMaximumNumber</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> k, <span class="hljs-type">int</span> x)</span><br>    &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>, r = (k + <span class="hljs-number">1</span>) &lt;&lt; x;<br>        <span class="hljs-keyword">while</span> (l &lt;= r)<br>        &#123;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (check(mid, x, k))<br>                l = mid + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                r = mid - <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> l - <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç§»é™¤åé›†åˆçš„æœ€å¤šå…ƒç´ æ•°</title>
    <link href="/2024/01/07/%E7%A7%BB%E9%99%A4%E5%90%8E%E9%9B%86%E5%90%88%E7%9A%84%E6%9C%80%E5%A4%9A%E5%85%83%E7%B4%A0%E6%95%B0/"/>
    <url>/2024/01/07/%E7%A7%BB%E9%99%A4%E5%90%8E%E9%9B%86%E5%90%88%E7%9A%84%E6%9C%80%E5%A4%9A%E5%85%83%E7%B4%A0%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%A7%BB%E9%99%A4%E5%90%8E%E9%9B%86%E5%90%88%E7%9A%84%E6%9C%80%E5%A4%9A%E5%85%83%E7%B4%A0%E6%95%B0">ç§»é™¤åé›†åˆçš„æœ€å¤šå…ƒç´ æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç§»é™¤åé›†åˆçš„æœ€å¤šå…ƒç´ æ•°"><a class="markdownIt-Anchor" href="#ç§»é™¤åé›†åˆçš„æœ€å¤šå…ƒç´ æ•°"></a> ç§»é™¤åé›†åˆçš„æœ€å¤šå…ƒç´ æ•°</h2><p><a href="https://leetcode.cn/problems/maximum-size-of-a-set-after-removals/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums1 å’Œ nums2 ï¼Œå®ƒä»¬çš„é•¿åº¦éƒ½æ˜¯å¶æ•° n ã€‚</p><p>ä½ å¿…é¡»ä» nums1 ä¸­ç§»é™¤ n / 2 ä¸ªå…ƒç´ ï¼ŒåŒæ—¶ä» nums2 ä¸­ä¹Ÿç§»é™¤ n / 2 ä¸ªå…ƒç´ ã€‚ç§»é™¤ä¹‹åï¼Œä½ å°† nums1 å’Œ nums2 ä¸­å‰©ä¸‹çš„å…ƒç´ æ’å…¥åˆ°é›†åˆ s ä¸­ã€‚</p><p>è¿”å›é›†åˆ så¯èƒ½çš„ æœ€å¤š åŒ…å«å¤šå°‘å…ƒç´ ã€‚</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gcode">ç¤ºä¾‹ <span class="hljs-number">1</span>ï¼š<br>è¾“å…¥ï¼š<span class="hljs-symbol">nums1</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-symbol">nums2</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šä» <span class="hljs-symbol">nums1</span> å’Œ <span class="hljs-symbol">nums2</span> ä¸­ç§»é™¤ä¸¤ä¸ª <span class="hljs-number">1</span> ã€‚ç§»é™¤åï¼Œæ•°ç»„å˜ä¸º <span class="hljs-symbol">nums1</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>] å’Œ <span class="hljs-symbol">nums2</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>] ã€‚å› æ­¤ï¼Œs = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125; ã€‚<br>å¯ä»¥è¯æ˜ï¼Œåœ¨ç§»é™¤ä¹‹åï¼Œé›†åˆ s æœ€å¤šå¯ä»¥åŒ…å« <span class="hljs-number">2</span> ä¸ªå…ƒç´ ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬3é¢˜ï¼Œæ€è·¯å¾ˆå·§å¦™ï¼Œè‡ªå·±æ²¡æœ‰æƒ³åˆ°ã€‚é¢˜ç›®å¸Œæœ›sä¸­çš„ä¸åŒå…ƒç´ å°½å¯èƒ½å¤šï¼Œä¹Ÿå°±æ˜¯è¯´åº”è¯¥å°½å¯èƒ½ä»ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ç§»é™¤å…ƒç´ ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å°½å¯èƒ½ä¿ç•™ä¸¤ä¸ªæ•°ç»„è‡ªèº«ç‹¬æœ‰çš„ä¸åŒå…ƒç´ ï¼Œå¦‚æœæ•°ç»„é•¿åº¦ä¸ºnï¼Œä¸¤ä¸ªæ•°ç»„ç‹¬æœ‰çš„ä¸åŒå…ƒç´ ä¸ªæ•°ä¸ºcnt1,cnt2ï¼Œåº”å½“ä¼˜å…ˆæ·»åŠ ä¸¤ä¸ªæ•°ç»„ç‹¬æœ‰çš„å…ƒç´ åˆ°sï¼Œå†æ·»åŠ äº¤é›†çš„å…ƒç´ åˆ°sã€‚</p><ul><li>é¦–å…ˆä¸¤ä¸ªæ•°ç»„å› ä¸ºè¦ç§»é™¤n/2ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥cnt1ï¼Œcnt2éƒ½åº”æ»¡è¶³å°äºç­‰äºn/2</li><li>ç„¶åsä¸­çš„æœ€å¤§å…ƒç´ ä¸ªæ•°ä¸ºnï¼Œåœ¨æ·»åŠ äº†cnt1,cnt2åï¼Œæœ€å¤šè¿˜èƒ½æ·»åŠ n-cnt1-cnt2ä¸ªä¸åŒå…ƒç´ ï¼Œè¿™éƒ¨åˆ†å…ƒç´ éœ€è¦ä»äº¤é›†ä¸­è·å–ï¼Œå› æ­¤æ€»çš„ç­”æ¡ˆä¸º<code>cnt1+cnt2+min(n-cnt1-cnt2,cnt3)</code>ï¼Œå…¶ä¸­cnt3ä¸ºäº¤é›†ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maximumSetSize</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;nums1, vector&lt;<span class="hljs-type">int</span>&gt; &amp;nums2)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> n = nums1.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">unordered_set&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">s1</span><span class="hljs-params">(nums1.begin(), nums1.end())</span></span>;<br>        <span class="hljs-function">unordered_set&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">s2</span><span class="hljs-params">(nums2.begin(), nums2.end())</span></span>;<br>        <span class="hljs-type">int</span> cnt1 = s1.<span class="hljs-built_in">size</span>(), cnt2 = s2.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> cnt3 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x : s1)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (s2.<span class="hljs-built_in">find</span>(x) != s2.<span class="hljs-built_in">end</span>())<br>                cnt3++;<br>        &#125;<br>        cnt1 -= cnt3;<br>        cnt2 -= cnt3;<br>        cnt1 = <span class="hljs-built_in">min</span>(cnt1, n / <span class="hljs-number">2</span>);<br>        cnt2 = <span class="hljs-built_in">min</span>(cnt2, n / <span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">return</span> cnt1 + cnt2 + <span class="hljs-built_in">min</span>(n - cnt1 - cnt2, cnt3);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‡³å°‘å‡ºç°ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²</title>
    <link href="/2023/12/31/%E8%87%B3%E5%B0%91%E5%87%BA%E7%8E%B0%E4%B8%89%E6%AC%A1%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2023/12/31/%E8%87%B3%E5%B0%91%E5%87%BA%E7%8E%B0%E4%B8%89%E6%AC%A1%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%87%B3%E5%B0%91%E5%87%BA%E7%8E%B0%E4%B8%89%E6%AC%A1%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2">è‡³å°‘å‡ºç°ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è‡³å°‘å‡ºç°ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#è‡³å°‘å‡ºç°ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²"></a> è‡³å°‘å‡ºç°ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²</h2><p><a href="https://leetcode.cn/problems/find-longest-special-substring-that-occurs-thrice-ii/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² s ã€‚</p><p>å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ä»…ç”±å•ä¸€å­—ç¬¦ç»„æˆï¼Œé‚£ä¹ˆå®ƒè¢«ç§°ä¸º ç‰¹æ®Š å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸² â€œabcâ€ ä¸æ˜¯ç‰¹æ®Šå­—ç¬¦ä¸²ï¼Œè€Œå­—ç¬¦ä¸² â€œdddâ€ã€â€œzzâ€ å’Œ â€œfâ€ æ˜¯ç‰¹æ®Šå­—ç¬¦ä¸²ã€‚</p><p>è¿”å›åœ¨ s ä¸­å‡ºç° è‡³å°‘ä¸‰æ¬¡ çš„ æœ€é•¿ç‰¹æ®Šå­å­—ç¬¦ä¸² çš„é•¿åº¦ï¼Œå¦‚æœä¸å­˜åœ¨å‡ºç°è‡³å°‘ä¸‰æ¬¡çš„ç‰¹æ®Šå­å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› -1 ã€‚</p><p>å­å­—ç¬¦ä¸² æ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªè¿ç»­ éç©º å­—ç¬¦åºåˆ—ã€‚</p><p>e.g.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;aaaa&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šå‡ºç°ä¸‰æ¬¡çš„æœ€é•¿ç‰¹æ®Šå­å­—ç¬¦ä¸²æ˜¯ <span class="hljs-string">&quot;aa&quot;</span> ï¼šå­å­—ç¬¦ä¸² <span class="hljs-string">&quot;aaaa&quot;</span>ã€<span class="hljs-string">&quot;aaaa&quot;</span> å’Œ <span class="hljs-string">&quot;aaaa&quot;</span>ã€‚<br>å¯ä»¥è¯æ˜æœ€å¤§é•¿åº¦æ˜¯ <span class="hljs-number">2</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬ä¸‰é¢˜ï¼Œå’Œç¬¬äºŒé¢˜ä¸€æ ·ï¼Œä½†æ˜¯æ•°æ®è§„æ¨¡å¤§äº†å¾ˆå¤šï¼Œæ—¶é—´å¤æ‚åº¦æˆ‘åªèƒ½åˆ°O(n^2)ï¼Œä½†æ˜¯çœ‹äº†å¤§ä½¬çš„æ€è·¯è§‰å¾—å¾ˆå¥½ï¼Œæ‰€ä»¥å­¦ä¹ å­¦ä¹ ã€‚</p><p>é¦–å…ˆï¼Œç»Ÿè®¡26ä¸ªå­—æ¯æ„æˆçš„å­ä¸²é•¿åº¦ï¼Œå¦‚aaaabbbabbä¸­aä¸º{4,1}ï¼Œbä¸º{3,2}<br />æ¥ä¸‹æ¥å¯¹æ¯ä¸ªå­—æ¯å¯¹åº”çš„æ•°ç»„é™åºæ’åºï¼Œç„¶ååˆ†ç±»è®¨è®ºï¼š</p><ul><li>å¦‚æœåœ¨a[0]ï¼Œä¹Ÿå°±æ˜¯æœ€é•¿çš„å­—ç¬¦ä¸²ä¸­å–3ä¸ªå­å­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥å–ä¸‰ä¸ªé•¿ä¸ºa[0]-2çš„å­ä¸²</li><li>å¦‚æœåœ¨a[0],a[1]ä¸­å–3ä¸ªå­å­—ç¬¦ä¸²ï¼Œåˆ™å–çš„é•¿åº¦ä¸ºmin(a[0]-1,a[1])</li><li>å¦‚æœåœ¨a[0],a[1],a[2]ä¸­å–3ä¸ªå­å­—ç¬¦ä¸²ï¼Œåˆ™ç›´æ¥å–é•¿åº¦ä¸ºa[2]å³å¯</li></ul><p>ç»¼ä¸Šï¼Œå–å¾—é•¿åº¦ä¸º<code>max(a[0]âˆ’2,min(a[0]âˆ’1,a[1]),a[2])</code>ï¼Œéå¸¸ç®€æ´</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maximumLength</span><span class="hljs-params">(string s)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> n = s.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">g</span>(<span class="hljs-number">26</span>);<br>        <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>        &#123;<br>            ++cnt;<br>            <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> == n || s[i] != s[i + <span class="hljs-number">1</span>])<br>            &#123;<br>                g[s[i] - <span class="hljs-string">&#x27;a&#x27;</span>].<span class="hljs-built_in">push_back</span>(cnt);<br>                cnt = <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt; t : g)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (t.<span class="hljs-built_in">empty</span>())<br>                <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-built_in">sort</span>(t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>            t.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">0</span>);<br>            t.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">0</span>);<br>            ans = <span class="hljs-built_in">max</span>(&#123;ans, t[<span class="hljs-number">0</span>] - <span class="hljs-number">2</span>, <span class="hljs-built_in">min</span>(t[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>, t[<span class="hljs-number">1</span>]), t[<span class="hljs-number">2</span>]&#125;);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans == <span class="hljs-number">0</span> ? <span class="hljs-number">-1</span> : ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬</title>
    <link href="/2023/12/24/%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%B0%8F%E6%88%90%E6%9C%AC/"/>
    <url>/2023/12/24/%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%B0%8F%E6%88%90%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<h2 id="ç§»é™¤æ …æ å¾—åˆ°çš„æœ€å¤§æ­£æ–¹å½¢"><a class="markdownIt-Anchor" href="#ç§»é™¤æ …æ å¾—åˆ°çš„æœ€å¤§æ­£æ–¹å½¢"></a> ç§»é™¤æ …æ å¾—åˆ°çš„æœ€å¤§æ­£æ–¹å½¢</h2><p><a href="https://leetcode.cn/problems/maximum-square-area-by-removing-fences-from-a-field/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸€ä¸ªå¤§å‹çš„ (m - 1) x (n - 1) çŸ©å½¢ç”°åœ°ï¼Œå…¶ä¸¤ä¸ªå¯¹è§’åˆ†åˆ«æ˜¯ (1, 1) å’Œ (m, n) ï¼Œç”°åœ°å†…éƒ¨æœ‰ä¸€äº›æ°´å¹³æ …æ å’Œå‚ç›´æ …æ ï¼Œåˆ†åˆ«ç”±æ•°ç»„ hFences å’Œ vFences ç»™å‡ºã€‚</p><p>æ°´å¹³æ …æ ä¸ºåæ ‡ (hFences[i], 1) åˆ° (hFences[i], n)ï¼Œå‚ç›´æ …æ ä¸ºåæ ‡ (1, vFences[i]) åˆ° (m, vFences[i]) ã€‚</p><p>è¿”å›é€šè¿‡ ç§»é™¤ ä¸€äº›æ …æ ï¼ˆå¯èƒ½ä¸ç§»é™¤ï¼‰æ‰€èƒ½å½¢æˆçš„æœ€å¤§é¢ç§¯çš„ æ­£æ–¹å½¢ ç”°åœ°çš„é¢ç§¯ï¼Œæˆ–è€…å¦‚æœæ— æ³•å½¢æˆæ­£æ–¹å½¢ç”°åœ°åˆ™è¿”å› -1ã€‚</p><p>ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¯·è¿”å›ç»“æœå¯¹ 109 + 7 å–ä½™ åçš„å€¼ã€‚</p><p>æ³¨æ„ï¼šç”°åœ°å¤–å›´ä¸¤ä¸ªæ°´å¹³æ …æ ï¼ˆåæ ‡ (1, 1) åˆ° (1, n) å’Œåæ ‡ (m, 1) åˆ° (m, n) ï¼‰ä»¥åŠä¸¤ä¸ªå‚ç›´æ …æ ï¼ˆåæ ‡ (1, 1) åˆ° (m, 1) å’Œåæ ‡ (1, n) åˆ° (m, n) ï¼‰æ‰€åŒ…å›´ã€‚è¿™äº›æ …æ  ä¸èƒ½ è¢«ç§»é™¤ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šm = 4, n = 3, hFences = [2,3], vFences = [2]<br>è¾“å‡ºï¼š4<br>è§£é‡Šï¼šç§»é™¤ä½äº<span class="hljs-number"> 2 </span>çš„æ°´å¹³æ …æ å’Œä½äº<span class="hljs-number"> 2 </span>çš„å‚ç›´æ …æ å°†å¾—åˆ°ä¸€ä¸ªé¢ç§¯ä¸º<span class="hljs-number"> 4 </span>çš„æ­£æ–¹å½¢ç”°åœ°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬äºŒé¢˜ï¼Œå½“æ—¶ä»¥ä¸ºå¾ˆå¤æ‚ï¼Œæš´åŠ›ä¼šè¶…æ—¶ï¼Œä»¥ä¸ºæœ‰ä»€ä¹ˆç‰¹æ®Šåšæ³•ï¼Œç»“æŸä¸€çœ‹ç¡®å®æ˜¯æš´åŠ›åšçš„ã€‚<br />ä¸»è¦æ€è·¯æ˜¯ç”¨ä¸€ä¸ªå“ˆç³»è¡¨å­˜å‚¨æ°´å¹³/å‚ç›´æ–¹å‘çš„æ …æ ä¹‹é—´çš„å·®å€¼ï¼Œè¿™é‡Œä»¥å­˜å‚¨æ°´å¹³æ …æ çš„å·®å€¼ä¸ºä¾‹ï¼Œä¸‹æ¥éå†å‚ç›´æ–¹å‘çš„æ …æ çš„å·®å€¼ï¼Œå¦‚æœæœ‰å·®å€¼xåœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆç”¨xæ›´æ–°æ­£æ–¹å½¢æœ€å¤§è¾¹é•¿eå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">maximizeSquareArea</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> n, vector&lt;<span class="hljs-type">int</span>&gt; &amp;hFences, vector&lt;<span class="hljs-type">int</span>&gt; &amp;vFences)</span><br>    &#123;<br>        unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; h;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">mod</span> <span class="hljs-operator">=</span> <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br>        hFences.push_back(<span class="hljs-number">1</span>);<br>        hFences.push_back(m);<br>        vFences.push_back(<span class="hljs-number">1</span>);<br>        vFences.push_back(n);<br>        sort(hFences.begin(), hFences.end());<br>        sort(vFences.begin(), vFences.end());<br>        <span class="hljs-type">int</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; hFences.size(); i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; hFences.size(); j++)<br>                ++h[hFences[j] - hFences[i]];<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; vFences.size(); i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; vFences.size(); j++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (h[vFences[j] - vFences[i]])<br>                    e = max(e, vFences[j] - vFences[i]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> e==<span class="hljs-number">0</span> ? -<span class="hljs-number">1</span>:(<span class="hljs-type">long</span> <span class="hljs-type">long</span>)e * (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)e % mod;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬"><a class="markdownIt-Anchor" href="#è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬"></a> è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬</h2><p><a href="https://leetcode.cn/problems/minimum-cost-to-convert-string-i/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸² source å’Œ target ï¼Œå®ƒä»¬çš„é•¿åº¦å‡ä¸º n å¹¶ä¸”ç”± å°å†™ è‹±æ–‡å­—æ¯ç»„æˆã€‚</p><p>å¦ç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦æ•°ç»„ original å’Œ changed ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•°æ•°ç»„ cost ï¼Œå…¶ä¸­ cost[i] ä»£è¡¨å°†å­—ç¬¦ original[i] æ›´æ”¹ä¸ºå­—ç¬¦ changed[i] çš„æˆæœ¬ã€‚</p><p>ä½ ä»å­—ç¬¦ä¸² source å¼€å§‹ã€‚åœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œå¦‚æœ å­˜åœ¨ ä»»æ„ ä¸‹æ ‡ j æ»¡è¶³ cost[j] == z  ã€original[j] == x ä»¥åŠ changed[j] == y ã€‚ä½ å°±å¯ä»¥é€‰æ‹©å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ x å¹¶ä»¥ z çš„æˆæœ¬å°†å…¶æ›´æ”¹ä¸ºå­—ç¬¦ y ã€‚</p><p>è¿”å›å°†å­—ç¬¦ä¸² source è½¬æ¢ä¸ºå­—ç¬¦ä¸² target æ‰€éœ€çš„ æœ€å° æˆæœ¬ã€‚å¦‚æœä¸å¯èƒ½å®Œæˆè½¬æ¢ï¼Œåˆ™è¿”å› -1 ã€‚</p><p>æ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨ä¸‹æ ‡ i ã€j ä½¿å¾— original[j] == original[i] ä¸” changed[j] == changed[i] ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šsource = <span class="hljs-string">&quot;abcd&quot;</span>, target = <span class="hljs-string">&quot;acbe&quot;</span>, original = [<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;e&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>], changed = [<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;e&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;e&quot;</span>], cost = [<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">20</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">28</span><br>è§£é‡Šï¼šå°†å­—ç¬¦ä¸² <span class="hljs-string">&quot;abcd&quot;</span> è½¬æ¢ä¸ºå­—ç¬¦ä¸² <span class="hljs-string">&quot;acbe&quot;</span> ï¼š<br>- æ›´æ”¹ä¸‹æ ‡ <span class="hljs-number">1</span> å¤„çš„å€¼ <span class="hljs-string">&#x27;b&#x27;</span> ä¸º <span class="hljs-string">&#x27;c&#x27;</span> ï¼Œæˆæœ¬ä¸º <span class="hljs-number">5</span> ã€‚<br>- æ›´æ”¹ä¸‹æ ‡ <span class="hljs-number">2</span> å¤„çš„å€¼ <span class="hljs-string">&#x27;c&#x27;</span> ä¸º <span class="hljs-string">&#x27;e&#x27;</span> ï¼Œæˆæœ¬ä¸º <span class="hljs-number">1</span> ã€‚<br>- æ›´æ”¹ä¸‹æ ‡ <span class="hljs-number">2</span> å¤„çš„å€¼ <span class="hljs-string">&#x27;e&#x27;</span> ä¸º <span class="hljs-string">&#x27;b&#x27;</span> ï¼Œæˆæœ¬ä¸º <span class="hljs-number">2</span> ã€‚<br>- æ›´æ”¹ä¸‹æ ‡ <span class="hljs-number">3</span> å¤„çš„å€¼ <span class="hljs-string">&#x27;d&#x27;</span> ä¸º <span class="hljs-string">&#x27;e&#x27;</span> ï¼Œæˆæœ¬ä¸º <span class="hljs-number">20</span> ã€‚<br>äº§ç”Ÿçš„æ€»æˆæœ¬æ˜¯ <span class="hljs-number">5</span> + <span class="hljs-number">1</span> + <span class="hljs-number">2</span> + <span class="hljs-number">20</span> = <span class="hljs-number">28</span> ã€‚<br>å¯ä»¥è¯æ˜è¿™æ˜¯å¯èƒ½çš„æœ€å°æˆæœ¬ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬ä¸‰é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯æ±‚26ä¸ªå­—æ¯é—´çš„å¤šæºæœ€çŸ­è·¯ï¼Œä½¿ç”¨Floydæ±‚å¾—æ¯ä¸¤ä¸ªå­—æ¯äº’æ¢çš„æœ€å°ä»£ä»·ï¼Œç„¶åéå†ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè®¡ç®—è½¬æ¢çš„æœ€å°ä»£ä»·ï¼Œå‘¨èµ›ç¬¬å››é¢˜æ˜¯è¿™é“é¢˜çš„å‡çº§ç‰ˆï¼Œ<a href="https://leetcode.cn/problems/minimum-cost-to-convert-string-ii/description/">é“¾æ¥</a></p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span><br>&#123;<br>public:<br>    long long minimumCost(string source, string target, vector&lt;char&gt; &amp;original, vector&lt;char&gt; &amp;changed, vector&lt;int&gt; &amp;cost)<br>    &#123;<br>        int n = source.size();<br>        long long ans = <span class="hljs-number">0</span>;<br>        int costmp[<span class="hljs-number">26</span>][<span class="hljs-number">26</span>];<br>        memset(costmp, <span class="hljs-number">0x3f</span>, sizeof(costmp));<br>        for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; ++i)<br>            costmp[i][i] = <span class="hljs-number">0</span>;<br>        for (int i = <span class="hljs-number">0</span>; i &lt; original.size(); ++i)<br>        &#123;<br>            int u = original[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>            int v = changed[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>            costmp[u][v] = min(costmp[u][v], cost[i]);<br>        &#125;<br>        for (int k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">26</span>; ++k)<br>        &#123;<br>            for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; ++i)<br>            &#123;<br>                for (int j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">26</span>; ++j)<br>                &#123;<br>                    if (costmp[i][k] + costmp[k][j] &lt; costmp[i][j])<br>                        costmp[i][j] = costmp[i][k] + costmp[k][j];<br>                &#125;<br>            &#125;<br>        &#125;<br>        for (int i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>        &#123;<br>            int u = source[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>            int v = target[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>            if (costmp[u][v] == <span class="hljs-number">0x3f3f3f3f</span>)<br>                return <span class="hljs-number">-1</span>;<br>            ans += costmp[u][v];<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‰§è¡Œæ“ä½œä½¿é¢‘ç‡åˆ†æ•°æœ€å¤§</title>
    <link href="/2023/12/17/%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%E4%BD%BF%E9%A2%91%E7%8E%87%E5%88%86%E6%95%B0%E6%9C%80%E5%A4%A7/"/>
    <url>/2023/12/17/%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%E4%BD%BF%E9%A2%91%E7%8E%87%E5%88%86%E6%95%B0%E6%9C%80%E5%A4%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="æ‰§è¡Œæ“ä½œä½¿é¢‘ç‡åˆ†æ•°æœ€å¤§"><a class="markdownIt-Anchor" href="#æ‰§è¡Œæ“ä½œä½¿é¢‘ç‡åˆ†æ•°æœ€å¤§"></a> æ‰§è¡Œæ“ä½œä½¿é¢‘ç‡åˆ†æ•°æœ€å¤§</h2><p><a href="https://leetcode.cn/problems/apply-operations-to-maximize-frequency-score/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ã€‚</p><p>ä½ å¯ä»¥å¯¹æ•°ç»„æ‰§è¡Œ è‡³å¤š k æ¬¡æ“ä½œï¼š</p><p>ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªä¸‹æ ‡ i ï¼Œå°† nums[i] å¢åŠ  æˆ–è€… å‡å°‘ 1 ã€‚<br />æœ€ç»ˆæ•°ç»„çš„é¢‘ç‡åˆ†æ•°å®šä¹‰ä¸ºæ•°ç»„ä¸­ä¼—æ•°çš„ é¢‘ç‡ ã€‚</p><p>è¯·ä½ è¿”å›ä½ å¯ä»¥å¾—åˆ°çš„ æœ€å¤§ é¢‘ç‡åˆ†æ•°ã€‚</p><p>ä¼—æ•°æŒ‡çš„æ˜¯æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ã€‚ä¸€ä¸ªå…ƒç´ çš„é¢‘ç‡æŒ‡çš„æ˜¯æ•°ç»„ä¸­è¿™ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[1,2,6,4]</span>, k = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š<br>- é€‰æ‹© <span class="hljs-selector-tag">i</span> = <span class="hljs-number">0</span> ï¼Œå°† nums<span class="hljs-selector-attr">[0]</span> å¢åŠ  <span class="hljs-number">1</span> ã€‚å¾—åˆ°æ•°ç»„ <span class="hljs-selector-attr">[2,2,6,4]</span> ã€‚<br>- é€‰æ‹© <span class="hljs-selector-tag">i</span> = <span class="hljs-number">3</span> ï¼Œå°† nums<span class="hljs-selector-attr">[3]</span> å‡å°‘ <span class="hljs-number">1</span> ï¼Œå¾—åˆ°æ•°ç»„ <span class="hljs-selector-attr">[2,2,6,3]</span> ã€‚<br>- é€‰æ‹© <span class="hljs-selector-tag">i</span> = <span class="hljs-number">3</span> ï¼Œå°† nums<span class="hljs-selector-attr">[3]</span> å‡å°‘ <span class="hljs-number">1</span> ï¼Œå¾—åˆ°æ•°ç»„ <span class="hljs-selector-attr">[2,2,6,2]</span> ã€‚<br>å…ƒç´  <span class="hljs-number">2</span> æ˜¯æœ€ç»ˆæ•°ç»„ä¸­çš„ä¼—æ•°ï¼Œå‡ºç°äº† <span class="hljs-number">3</span> æ¬¡ï¼Œæ‰€ä»¥é¢‘ç‡åˆ†æ•°ä¸º <span class="hljs-number">3</span> ã€‚<br><span class="hljs-number">3</span> æ˜¯æ‰€æœ‰å¯è¡Œæ–¹æ¡ˆé‡Œçš„æœ€å¤§é¢‘ç‡åˆ†æ•°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬å››é¢˜ï¼Œæ€è·¯æ˜¯å‰ç¼€å’Œæ»‘åŠ¨çª—å£ï¼Œæƒ³åˆ°äº†ä¸­ä½æ•°å’Œæ’åºï¼Œä½†åªæƒ³åˆ°äºŒåˆ†æ²¡æƒ³åˆ°æ»‘åŠ¨çª—å£ã€‚<br />å¯ä»¥çœ‹ä½œæ˜¯å°†ä¸€ä¸ªå­åŒºé—´å†…çš„æ‰€æœ‰æ•°å˜æˆåŒä¸€ä¸ªå€¼çš„æ›¼å“ˆé¡¿è·ç¦»ä¹‹å’Œï¼Œå¦‚å‡åºå­æ•°ç»„a1,a2,a3,a4,a5ï¼Œå¦‚æœè¦ä½¿å¾—æ”¹åŠ¨è·ç¦»å’Œæœ€å°åº”å…¨éƒ¨æ”¹ä¸ºä¸­ä½æ•°ï¼Œå°†è¿™5ä¸ªæ•°å…¨éƒ¨å˜æˆa3ï¼Œå®é™…æ”¹åŠ¨çš„è·ç¦»å’Œæ˜¯ï¼š<br />d=a4-a3+a3-a2+a5-a3+a3-a1=a4+a5-(a1+a2)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¹åŠ¨è·ç¦»å’Œç­‰äºä¸­ä½æ•°å·¦è¾¹çš„æ•°ä¹‹å’Œå‡å»å³è¾¹çš„æ•°ä¹‹å’Œã€‚<br />å¯ä»¥é¢„å¤„ç†æˆå‰ç¼€å’Œæ•°ç»„sumå‡å°æ±‚å’Œçš„å¤æ‚åº¦ã€‚<br />å¯¹äºå­åŒºé—´l~r</p><ul><li>å¦‚æœåŒºé—´é•¿ä¸ºå¥‡æ•°ï¼Œ<code>d = sum[r + 1] - sum[mid + 1] - sum[mid] + sum[l]</code>;</li><li>å¦‚æœåŒºé—´é•¿ä¸ºå¶æ•°ï¼Œ<code>d = sum[r + 1] - 2 * sum[mid + 1] + sum[l]</code></li></ul><p>æ¥ä¸‹æ¥éå†å³ç«¯ç‚¹ï¼Œå¦‚æœå­åŒºé—´è·ç¦»å’Œå¤§äºkï¼Œåˆ™ç¼©å°å­æ•°ç»„é•¿åº¦(++l)ï¼Œæ¯æ¬¡æ›´æ–°å­åŒºé—´æœ€å¤§é•¿åº¦å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> maxFrequencyScore(vector&lt;<span class="hljs-built_in">int</span>&gt; &amp;nums, <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> k)<br>    &#123;<br>        <span class="hljs-built_in">int</span> n = nums.size();<br>        sort(nums.begin(), nums.end());<br>        vector&lt;<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span>&gt; <span class="hljs-keyword">sum</span>(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>            <span class="hljs-keyword">sum</span>[i + <span class="hljs-number">1</span>] = <span class="hljs-keyword">sum</span>[i] + nums[i];<br>        <span class="hljs-built_in">int</span> l = <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>;<br>        function&lt;<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>)&gt; f = [&amp;](<span class="hljs-built_in">int</span> l, <span class="hljs-built_in">int</span> mid, <span class="hljs-built_in">int</span> r)<br>        &#123;<br>            <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> res = <span class="hljs-number">0</span>;<br>            <span class="hljs-built_in">int</span> len = r - l + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (len &amp; <span class="hljs-number">1</span>)<br>                res = <span class="hljs-keyword">sum</span>[r + <span class="hljs-number">1</span>] - <span class="hljs-keyword">sum</span>[mid + <span class="hljs-number">1</span>] - <span class="hljs-keyword">sum</span>[mid] + <span class="hljs-keyword">sum</span>[l];<br>            <span class="hljs-keyword">else</span><br>                res = <span class="hljs-keyword">sum</span>[r + <span class="hljs-number">1</span>] - <span class="hljs-number">2</span> * <span class="hljs-keyword">sum</span>[mid + <span class="hljs-number">1</span>] + <span class="hljs-keyword">sum</span>[l];<br>            <span class="hljs-keyword">return</span> res;<br>        &#125;;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> r = <span class="hljs-number">0</span>; r &lt; n; ++r)<br>        &#123;<br>            <span class="hljs-keyword">while</span> (f(l, (l + r) / <span class="hljs-number">2</span>, r) &gt; k)<br>                ++l;<br>            ans = max(ans, r - l + <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äºŒåˆ†å›¾åŒ¹é…</title>
    <link href="/2023/12/15/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/"/>
    <url>/2023/12/15/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="äºŒåˆ†å›¾åŒ¹é…"><a class="markdownIt-Anchor" href="#äºŒåˆ†å›¾åŒ¹é…"></a> äºŒåˆ†å›¾åŒ¹é…</h2><p><a href="">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒåˆ†å›¾ï¼Œå…¶å·¦éƒ¨ç‚¹çš„ä¸ªæ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ï¼Œå³éƒ¨ç‚¹çš„ä¸ªæ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>ï¼Œè¾¹æ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span>ï¼Œæ±‚å…¶æœ€å¤§åŒ¹é…çš„è¾¹æ•°ã€‚</p><p>å·¦éƒ¨ç‚¹ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> è‡³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ç¼–å·ï¼Œå³éƒ¨ç‚¹ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> è‡³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> ç¼–å·ã€‚</p><h4 id="è¾“å…¥æ ¼å¼"><a class="markdownIt-Anchor" href="#è¾“å…¥æ ¼å¼"></a> è¾“å…¥æ ¼å¼</h4><p>è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸‰ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span>ã€‚</p><p>æ¥ä¸‹æ¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span> è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">u, v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>ï¼Œè¡¨ç¤ºå­˜åœ¨ä¸€æ¡è¿æ¥å·¦éƒ¨ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> å’Œå³éƒ¨ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> çš„è¾¹ã€‚</p><h4 id="è¾“å‡ºæ ¼å¼"><a class="markdownIt-Anchor" href="#è¾“å‡ºæ ¼å¼"></a> è¾“å‡ºæ ¼å¼</h4><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨äºŒåˆ†å›¾æœ€å¤§åŒ¹é…çš„è¾¹æ•°ã€‚</p><h4 id="æ ·ä¾‹è¾“å…¥-1"><a class="markdownIt-Anchor" href="#æ ·ä¾‹è¾“å…¥-1"></a> æ ·ä¾‹è¾“å…¥ #1</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h4 id="æ ·ä¾‹è¾“å‡º-1"><a class="markdownIt-Anchor" href="#æ ·ä¾‹è¾“å‡º-1"></a> æ ·ä¾‹è¾“å‡º #1</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">1<br></code></pre></td></tr></table></figure><h4 id="æ ·ä¾‹è¾“å…¥-2"><a class="markdownIt-Anchor" href="#æ ·ä¾‹è¾“å…¥-2"></a> æ ·ä¾‹è¾“å…¥ #2</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">2</span> <span class="hljs-number">7</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h4 id="æ ·ä¾‹è¾“å‡º-2"><a class="markdownIt-Anchor" href="#æ ·ä¾‹è¾“å‡º-2"></a> æ ·ä¾‹è¾“å‡º #2</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><h4 id="æ•°æ®è§„æ¨¡ä¸çº¦å®š"><a class="markdownIt-Anchor" href="#æ•°æ®è§„æ¨¡ä¸çº¦å®š"></a> æ•°æ®è§„æ¨¡ä¸çº¦å®š</h4><p>å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>â‰¤</mo><mn>500</mn></mrow><annotation encoding="application/x-tex">1 \leq n, m \leq 500</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>e</mi><mo>â‰¤</mo><mn>5</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq e \leq 5 \times 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>u</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \leq u \leq n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>v</mi><mo>â‰¤</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">1 \leq v \leq m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>ã€‚</li></ul><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦ç”¨åˆ°åŒˆç‰™åˆ©ç®—æ³•çš„æ€è·¯ï¼Œæ¯æ¬¡é€šè¿‡dfså°è¯•ä¸ºå·¦éƒ¨åˆ†çš„ç‚¹æ‰¾ä¸€ä¸ªåŒ¹é…å¯¹è±¡ï¼Œæ‰¾åˆ°åˆ™è¿”å›trueï¼Œ++ansã€‚åœ¨äºŒåˆ†å›¾åŒ¹é…ä¸­ï¼ŒåŒˆç‰™åˆ©ç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ï¼š</p><ul><li>å¦‚æœuè¦åŒ¹é…çš„ç›®æ ‡vè¿˜æ²¡æœ‰cpï¼Œé‚£ä¹ˆç›´æ¥åŒ¹é…å³match[v]=u</li><li>å¦‚æœuå‘ç°vå·²ç»åŒ¹é…äº†ï¼Œåˆ™match[v]èƒ½æ‰¾åˆ°æ–°çš„å°±æŠŠvè®©ç»™u(match[v]=u)ï¼Œæ‰¾ä¸åˆ°å°±ä¸è®©ã€‚</li><li>å¦‚æœä»¥å‰çš„ä¸è®©æ­¥ï¼Œuå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚</li><li>å¦‚æœuè°ä¹ŸåŒ¹é…ä¸ä¸Šäº†ï¼Œé‚£å°±åŒ¹é…å¤±è´¥ï¼Œè¿”å›falseã€‚</li></ul><p>dfsè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é˜²æ­¢è®¿é—®è¿‡çš„ç‚¹å¾ªç¯è®¿é—®ï¼Œç”¨ä¸€ä¸ªæ•°ç»„vistime[]æ¥è®°å½•è®¿é—®çŠ¶æ€ï¼Œtagè¡¨ç¤ºè½®æ¬¡ï¼Œvistime[u]=tagï¼Œè¡¨ç¤ºuèŠ‚ç‚¹åœ¨ç¬¬tagè½®å·²ç»è¢«è®¿é—®ï¼Œå·²è¢«è®¿é—®çš„çŠ¶æ€ä¸‹ç›´æ¥è¿”å›falseå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">g</span>(N);<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vistime</span><span class="hljs-params">(N)</span>, <span class="hljs-title">match</span><span class="hljs-params">(N)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m, e;<br>    cin &gt;&gt; n &gt;&gt; m &gt;&gt; e;<br>    <span class="hljs-type">int</span> u, v;<br>    <span class="hljs-keyword">while</span> (e--)<br>    &#123;<br>        cin &gt;&gt; u &gt;&gt; v;<br>        g[u].<span class="hljs-built_in">push_back</span>(v);<br>    &#125;<br>    function&lt;<span class="hljs-type">bool</span>(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)&gt; dfs = [&amp;](<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> tag)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (vistime[u] == tag)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        vistime[u] = tag;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : g[u])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (match[v] == <span class="hljs-number">0</span> || <span class="hljs-built_in">dfs</span>(match[v], tag))<br>            &#123;<br>                match[v] = u;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dfs</span>(i, i))<br>            ++ans;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•ä½œä¸š4</title>
    <link href="/2023/12/11/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A4/"/>
    <url>/2023/12/11/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A4/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%8C%9C%E7%96%91%E9%93%BE">çŒœç–‘é“¾</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E5%86%9C%E5%9C%BA%E7%81%8C%E6%BA%89">å†œåœºçŒæº‰</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E7%A4%BE%E4%BA%A4%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5">ç¤¾äº¤ç½‘ç»œè¿æ¥</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li><li><a href="#%E7%89%A9%E6%B5%81%E8%A7%84%E5%88%92%E5%B8%88">ç‰©æµè§„åˆ’å¸ˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-3">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-3">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="çŒœç–‘é“¾"><a class="markdownIt-Anchor" href="#çŒœç–‘é“¾"></a> çŒœç–‘é“¾</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å‡è®¾æœ‰nä¸ªæ–‡æ˜ï¼Œæ¯ä¸ªæ–‡æ˜éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œä»1åˆ°nã€‚æœ‰ä¸€ç§ä¼ è¨€ï¼Œç§°è¿™äº›æ–‡æ˜ä¸­æœ‰ä¸€ä¸ªæŒæ¡äº†å¼ºå¤§çš„æ¯ç­åŠ›é‡ï¼Œè¢«ç§°ä¸ºâ€œé»‘æš—æ£®æ—ä¹‹ç‹â€ã€‚</p><p>æŒ‰ç…§é»‘æš—æ£®æ—æ³•åˆ™ï¼š</p><p>é»‘æš—æ£®æ—ä¹‹ç‹ä¸ç›¸ä¿¡ä»»ä½•å…¶ä»–æ–‡æ˜ã€‚</p><p>æ¯ä¸ªæ–‡æ˜ï¼ˆé™¤äº†é»‘æš—æ£®æ—ä¹‹ç‹ï¼‰éƒ½ä¿¡ä»»é»‘æš—æ£®æ—ä¹‹ç‹ã€‚</p><p>åªæœ‰ä¸€ä¸ªæ–‡æ˜åŒæ—¶æ»¡è¶³å±æ€§1å’Œå±æ€§2ã€‚</p><p>å¦‚æœé»‘æš—æ£®æ—ä¹‹ç‹å­˜åœ¨å¹¶ä¸”å¯ä»¥ç¡®å®šå…¶èº«ä»½ï¼Œè¯·è¿”å›è¯¥é»‘æš—æ£®æ—ä¹‹ç‹çš„ç¼–å·ï¼›å¦åˆ™ï¼Œè¿”å›-1ã€‚</p><p>input:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>-&gt;<span class="hljs-number">3</span>,<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ï¼Œæ»¡è¶³å…¥åº¦ä¸ºn-1ï¼Œå‡ºåº¦ä¸º0çš„ç‚¹å°±æ˜¯é»‘æš—ä¹‹ç‹</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string s;<br>    cin &gt;&gt; s;<br>    <span class="hljs-function">stringstream <span class="hljs-title">ss</span><span class="hljs-params">(s)</span></span>;<br>    string t;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">in</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">out</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>;<br>    <span class="hljs-type">int</span> a, b, mx = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ss, t, <span class="hljs-string">&#x27;,&#x27;</span>))<br>    &#123;<br>        <span class="hljs-type">int</span> idx = t.<span class="hljs-built_in">find_first_of</span>(<span class="hljs-string">&#x27;-&#x27;</span>);<br>        a = <span class="hljs-built_in">stoi</span>(t.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, idx));<br>        b = <span class="hljs-built_in">stoi</span>(t.<span class="hljs-built_in">substr</span>(idx + <span class="hljs-number">2</span>, t.<span class="hljs-built_in">size</span>() - idx - <span class="hljs-number">2</span>));<br>        mx = <span class="hljs-built_in">max</span>(mx, <span class="hljs-built_in">max</span>(a, b));<br>        in[b]++;<br>        out[a]++;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= mx; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (out[i] == <span class="hljs-number">0</span> &amp;&amp; in[i] == mx - <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = i;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; ans;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å†œåœºçŒæº‰"><a class="markdownIt-Anchor" href="#å†œåœºçŒæº‰"></a> å†œåœºçŒæº‰</h2><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>é¢˜ç›®æè¿°ï¼šåœ¨ä¸€ä¸ªåŒ…å«nä¸ªèŠ‚ç‚¹çš„å†œåœºä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡æ°´æ¸ ç›¸è¿ã€‚ç»™å®šä¸€ä¸ªæ•´æ•°nå’Œä¸€ä¸ªæ•°ç»„pipesï¼Œå…¶ä¸­pipes[i] = [ai, bi]è¡¨ç¤ºå†œåœºä¸­aiå’Œbiä¹‹é—´æœ‰ä¸€æ¡æ°´æ¸ ã€‚è¯·è¿”å›å†œåœºä¸­å·²è¿æ¥æ°´æ¸ çš„æ•°ç›®ã€‚</p><p>e.g.</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bnf">è¾“å…¥ï¼š0<span class="hljs-attribute">&lt;-&gt;</span>1,1<span class="hljs-attribute">&lt;-&gt;</span>2,3<span class="hljs-attribute">&lt;-&gt;</span>4<br><br>è¾“å‡ºï¼š2<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>æ·±åº¦ä¼˜å…ˆæœç´¢(dfs)ï¼Œæ ‡è®°è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œç»Ÿè®¡è¿é€šå­å›¾æ•°é‡ã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string s;<br>    cin &gt;&gt; s;<br>    <span class="hljs-function">stringstream <span class="hljs-title">ss</span><span class="hljs-params">(s)</span></span>;<br>    string t;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">g</span>(<span class="hljs-number">100</span>);<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vis</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>;<br>    <span class="hljs-type">int</span> a, b, mx = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ss, t, <span class="hljs-string">&#x27;,&#x27;</span>))<br>    &#123;<br>        <span class="hljs-type">int</span> idx = t.<span class="hljs-built_in">find_first_of</span>(<span class="hljs-string">&#x27;-&#x27;</span>);<br>        a = <span class="hljs-built_in">stoi</span>(t.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, idx - <span class="hljs-number">1</span>));<br>        b = <span class="hljs-built_in">stoi</span>(t.<span class="hljs-built_in">substr</span>(idx + <span class="hljs-number">2</span>, t.<span class="hljs-built_in">size</span>() - idx));<br>        mx = <span class="hljs-built_in">max</span>(mx, <span class="hljs-built_in">max</span>(a, b));<br>        g[a].<span class="hljs-built_in">push_back</span>(b);<br>        g[b].<span class="hljs-built_in">push_back</span>(a);<br>    &#125;<br>    function&lt;<span class="hljs-type">void</span>(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)&gt; dfs = [&amp;](<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> p)<br>    &#123;<br>        vis[x] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : g[x])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (i == p)<br>                <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (vis[i] == <span class="hljs-number">0</span>)<br>                <span class="hljs-built_in">dfs</span>(i, x);<br>        &#125;<br>    &#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= mx; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (vis[i] == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">dfs</span>(i, <span class="hljs-number">-1</span>);<br>            ans++;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; ans;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="ç¤¾äº¤ç½‘ç»œè¿æ¥"><a class="markdownIt-Anchor" href="#ç¤¾äº¤ç½‘ç»œè¿æ¥"></a> ç¤¾äº¤ç½‘ç»œè¿æ¥</h2><h3 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h3><p>å‡è®¾ä½ æ˜¯ä¸€ä½ç¤¾äº¤ç½‘ç»œå¹³å°çš„æŠ€æœ¯æ€»ç›‘ï¼Œæœ‰ n ä¸ªç”¨æˆ·åœ¨ä½ çš„å¹³å°ä¸Šæ³¨å†Œã€‚ç»™å®šç”¨æˆ·ä¹‹é—´å»ºç«‹è¿æ¥çš„æˆæœ¬ï¼Œä»¥åŠæ¯ä¸ªç”¨æˆ·çš„ç¼–å·ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡ç®—æ³•æ‰¾åˆ°ä»¥æœ€ä½æˆæœ¬è¿æ¥æ‰€æœ‰ç”¨æˆ·çš„æ–¹æ³•ã€‚è¿æ¥æ˜¯åŒå‘çš„ï¼Œæ¯å¯¹ç”¨æˆ·ä¹‹é—´è‡³å°‘æœ‰ä¸€æ¡è·¯å¾„ã€‚å¦‚æœæ— æ³•è¿æ¥æ‰€æœ‰ç”¨æˆ·ï¼Œè¿”å› -1ã€‚æœ€å°æˆæœ¬åº”è¯¥æ˜¯æ‰€ç”¨å…¨éƒ¨è¿æ¥æˆæœ¬çš„æ€»å’Œã€‚</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bnf">è¾“å…¥ï¼š1<span class="hljs-attribute">&lt;-&gt;</span>2 5,1<span class="hljs-attribute">&lt;-&gt;</span>3 6,2<span class="hljs-attribute">&lt;-&gt;</span>3 1<br><br>è¾“å‡ºï¼š6<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h3><p>æ±‚è§£æœ€å°ç”Ÿæˆæ ‘ï¼Œä½¿ç”¨å¹¶æŸ¥é›†ï¼Œä¸»è¦æ˜¯å®šä¹‰findå‡½æ•°ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino">function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>)&gt; find = [&amp;](<span class="hljs-type">int</span> x)<br>&#123;<br>    <span class="hljs-keyword">return</span> fa[x] == x ? x : fa[x] = <span class="hljs-built_in">find</span>(fa[x]);<br>&#125;;<br></code></pre></td></tr></table></figure><p>ç„¶åæ’åºï¼Œä¸æ–­åŠ è¾¹ï¼Œæœ€åç»Ÿè®¡ä¸€ä¸‹è¿é€šå­å›¾çš„ä¸ªæ•°ï¼Œåˆ¤æ–­æ˜¯å¦è¿é€šã€‚</p><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-meta">#include &lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> namespace std;<br>struct e<br>&#123;<br>    <span class="hljs-type">int</span> u, v, w;<br>    e(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v, <span class="hljs-type">int</span> w) : u(u), v(v), w(w) &#123;&#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(const e &amp;o) const<br>    &#123;<br>        <span class="hljs-keyword">return</span> w &lt; o.w;<br>    &#125;<br>&#125;;<br><span class="hljs-type">int</span> main()<br>&#123;<br>    string s;<br>    getline(cin, s);<br>    stringstream ss(s);<br>    string t;<br>    vector&lt;e&gt; edge;<br>    <span class="hljs-type">int</span> a, b, c, mx = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (getline(ss, t, <span class="hljs-string">&#x27;,&#x27;</span>))<br>    &#123;<br>        <span class="hljs-type">int</span> idx1 = t.find_first_of(<span class="hljs-string">&#x27;-&#x27;</span>);<br>        <span class="hljs-type">int</span> idx2 = t.find_first_of(<span class="hljs-string">&#x27; &#x27;</span>);<br>        a = stoi(t.substr(<span class="hljs-number">0</span>, idx1 - <span class="hljs-number">1</span>));<br>        b = stoi(t.substr(idx1 + <span class="hljs-number">2</span>, idx2 - idx1 - <span class="hljs-number">2</span>));<br>        c = stoi(t.substr(idx2 + <span class="hljs-number">1</span>, t.size() - idx2 - <span class="hljs-number">1</span>));<br>        mx = max(mx, max(a, b));<br>        edge.emplace_back(e(a, b, c));<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt; fa(mx + <span class="hljs-number">1</span>);<br>    iota(fa.<span class="hljs-keyword">begin</span>(), fa.<span class="hljs-keyword">end</span>(), <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">function</span>&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>)&gt; find = [&amp;](<span class="hljs-type">int</span> x)<br>    &#123;<br>        <span class="hljs-keyword">return</span> fa[x] == x ? x : fa[x] = find(fa[x]);<br>    &#125;;<br>    sort(edge.<span class="hljs-keyword">begin</span>(), edge.<span class="hljs-keyword">end</span>());<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (e &amp;t : edge)<br>    &#123;<br>        <span class="hljs-type">int</span> x = find(t.u), y = find(t.v);<br>        <span class="hljs-keyword">if</span> (x != y)<br>        &#123;<br>            fa[x] = y;<br>            ans += t.w;<br>            ++cnt;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (cnt == mx - <span class="hljs-number">1</span>)<br>            break;<br>    &#125;<br>    cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= mx; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (fa[i] == i)<br>            ++cnt;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cnt &gt; <span class="hljs-number">1</span>)<br>        cout &lt;&lt; <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">else</span><br>        cout &lt;&lt; ans;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç‰©æµè§„åˆ’å¸ˆ"><a class="markdownIt-Anchor" href="#ç‰©æµè§„åˆ’å¸ˆ"></a> ç‰©æµè§„åˆ’å¸ˆ</h2><h3 id="é¢˜ç›®æè¿°-4"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-4"></a> é¢˜ç›®æè¿°</h3><p>å‡è®¾ä½ æ˜¯ä¸€å®¶è´§è¿å…¬å¸çš„ç‰©æµè§„åˆ’å¸ˆï¼Œæœ‰ n ä¸ªåŸå¸‚ä½œä¸ºè´§ç‰©çš„å‘è´§å’Œæ”¶è´§ç‚¹ã€‚ç»™å®šåŸå¸‚ä¹‹é—´çš„è¿è¾“è·¯å¾„å’Œæ¯æ¡è·¯å¾„çš„æˆåŠŸè¿è¾“æ¦‚ç‡ï¼Œä»¥åŠæ¯ä¸ªåŸå¸‚çš„ç¼–å·ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡ç®—æ³•æ‰¾åˆ°ä»å‘è´§åŸå¸‚åˆ°æ”¶è´§åŸå¸‚æˆåŠŸè¿è¾“æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ã€‚ç»™å®šä¸€ä¸ªç”± n ä¸ªåŸå¸‚å’Œå®ƒä»¬ä¹‹é—´çš„è¿è¾“è·¯å¾„ç»„æˆçš„å›¾ï¼Œä»¥åŠæ¯æ¡è·¯å¾„çš„æˆåŠŸè¿è¾“æ¦‚ç‡ã€‚æŒ‡å®šä¸¤ä¸ªåŸå¸‚åˆ†åˆ«ä½œä¸ºè´§ç‰©çš„å‘è´§ç‚¹å’Œæ”¶è´§ç‚¹ï¼Œä½ éœ€è¦æ‰¾åˆ°ä»å‘è´§åŸå¸‚åˆ°æ”¶è´§åŸå¸‚æˆåŠŸè¿è¾“æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ï¼Œå¹¶è¿”å›è¯¥æ¦‚ç‡ã€‚å¦‚æœä¸å­˜åœ¨ä»å‘è´§åŸå¸‚åˆ°æ”¶è´§åŸå¸‚çš„è·¯å¾„ï¼Œè¯·è¿”å› 0ã€‚</p><p>èµ·ç‚¹ä¸º0ï¼Œæ•°å­—æœ€å¤§ä¸ºç»ˆç‚¹ã€‚</p><p>e.g.</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bnf">è¾“å…¥ï¼š0<span class="hljs-attribute">&lt;-&gt;</span>1 0.5,1<span class="hljs-attribute">&lt;-&gt;</span>2 0.5,0<span class="hljs-attribute">&lt;-&gt;</span>2 0.2<br><br>è¾“å‡ºï¼š0.25000(ä¿ç•™5ä½å°æ•°ï¼Œå…¶ä½™ç›´æ¥èˆæ‰)<br><br>è§£é‡Šï¼šä»èµ·ç‚¹0åˆ°ç»ˆç‚¹2æœ‰ä¸¤æ¡è·¯å¾„ï¼Œå…¶ä¸­ä¸€æ¡çš„æˆåŠŸæ¦‚ç‡ä¸º 0.2 ï¼Œè€Œå¦ä¸€æ¡ä¸º 0.5 * 0.5 = 0.25<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-4"><a class="markdownIt-Anchor" href="#æ€è·¯-4"></a> æ€è·¯</h3><p>å•æºæœ€çŸ­è·¯ï¼Œä½¿ç”¨æœ€æœ´ç´ çš„dijkstraï¼Œæ±‚æœ€é•¿è·¯å¾„å³å¯ã€‚</p><h3 id="ä»£ç -4"><a class="markdownIt-Anchor" href="#ä»£ç -4"></a> ä»£ç </h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#include &lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>double mp[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>];<br>double <span class="hljs-keyword">dis[100];</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bool </span>vis[<span class="hljs-number">100</span>];<br>int main()<br>&#123;<br>    string s;<br>    getline(cin, s);<br>    stringstream ss(s);<br>    string t;<br>    int a, <span class="hljs-keyword">b, </span>mx = <span class="hljs-number">0</span>;<br>    double c;<br>    while (getline(ss, t, <span class="hljs-string">&#x27;,&#x27;</span>))<br>    &#123;<br>        int idx1 = t.find_first_of(<span class="hljs-string">&#x27;-&#x27;</span>);<br>        int idx2 = t.find_first_of(<span class="hljs-string">&#x27; &#x27;</span>);<br>        a = stoi(t.<span class="hljs-keyword">substr(0, </span>idx1 - <span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">b </span>= stoi(t.<span class="hljs-keyword">substr(idx1 </span>+ <span class="hljs-number">2</span>, idx2 - idx1 - <span class="hljs-number">2</span>));<br>        c = stod(t.<span class="hljs-keyword">substr(idx2 </span>+ <span class="hljs-number">1</span>, t.size() - idx2 - <span class="hljs-number">1</span>));<br>        mx = max(mx, max(a, <span class="hljs-keyword">b));</span><br><span class="hljs-keyword"></span>        mp[a][<span class="hljs-keyword">b] </span>= c;<br>        mp[<span class="hljs-keyword">b][a] </span>= c;<br>    &#125;<br>    memset(<span class="hljs-keyword">dis, </span>-<span class="hljs-number">0x3f</span>, sizeof(<span class="hljs-keyword">dis));</span><br><span class="hljs-keyword"></span>    <span class="hljs-keyword">dis[0] </span>= <span class="hljs-number">1</span>.<span class="hljs-number">0</span>;<br>    for (int i = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= mx; ++i)</span><br>    &#123;<br>        int t = -<span class="hljs-number">1</span>;<br>        for (int <span class="hljs-keyword">j </span>= <span class="hljs-number">0</span><span class="hljs-comment">; j &lt;= mx; ++j)</span><br>        &#123;<br>            if (!vis[<span class="hljs-keyword">j] </span>&amp;&amp; (t == -<span class="hljs-number">1</span> <span class="hljs-title">||</span> <span class="hljs-keyword">dis[j] </span>&gt; <span class="hljs-keyword">dis[t]))</span><br><span class="hljs-keyword"></span>                t = <span class="hljs-keyword">j;</span><br><span class="hljs-keyword"></span>        &#125;<br>        vis[t] = true;<br>        for (int <span class="hljs-keyword">j </span>= <span class="hljs-number">0</span><span class="hljs-comment">; j &lt;= mx; ++j)</span><br>        &#123;<br>            <span class="hljs-keyword">dis[j] </span>= max(<span class="hljs-keyword">dis[j], </span><span class="hljs-keyword">dis[t] </span>* mp[t][<span class="hljs-keyword">j]);</span><br><span class="hljs-keyword"></span>        &#125;<br>    &#125;<br>    printf(<span class="hljs-string">&quot;%.5lf&quot;</span>, <span class="hljs-keyword">dis[mx]);</span><br><span class="hljs-keyword"></span>    return <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ·»åŠ ç¡¬å¸çš„æœ€å°æ•°é‡</title>
    <link href="/2023/12/03/%E6%B7%BB%E5%8A%A0%E7%A1%AC%E5%B8%81%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B0%E9%87%8F/"/>
    <url>/2023/12/03/%E6%B7%BB%E5%8A%A0%E7%A1%AC%E5%B8%81%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B0%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%B7%BB%E5%8A%A0%E7%A1%AC%E5%B8%81%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B0%E9%87%8F">æ·»åŠ ç¡¬å¸çš„æœ€å°æ•°é‡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E7%BB%9F%E8%AE%A1%E5%AE%8C%E5%85%A8%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2">ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ·»åŠ ç¡¬å¸çš„æœ€å°æ•°é‡"><a class="markdownIt-Anchor" href="#æ·»åŠ ç¡¬å¸çš„æœ€å°æ•°é‡"></a> æ·»åŠ ç¡¬å¸çš„æœ€å°æ•°é‡</h2><p><a href="https://leetcode.cn/problems/minimum-number-of-coins-to-be-added/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ coinsï¼Œè¡¨ç¤ºå¯ç”¨çš„ç¡¬å¸çš„é¢å€¼ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•° target ã€‚</p><p>å¦‚æœå­˜åœ¨æŸä¸ª coins çš„å­åºåˆ—æ€»å’Œä¸º xï¼Œé‚£ä¹ˆæ•´æ•° x å°±æ˜¯ä¸€ä¸ª å¯å–å¾—çš„é‡‘é¢ ã€‚</p><p>è¿”å›éœ€è¦æ·»åŠ åˆ°æ•°ç»„ä¸­çš„ ä»»æ„é¢å€¼ ç¡¬å¸çš„ æœ€å°æ•°é‡ ï¼Œä½¿èŒƒå›´ [1, target] å†…çš„æ¯ä¸ªæ•´æ•°éƒ½å±äº å¯å–å¾—çš„é‡‘é¢ ã€‚</p><p>æ•°ç»„çš„ å­åºåˆ— æ˜¯é€šè¿‡åˆ é™¤åŸå§‹æ•°ç»„çš„ä¸€äº›ï¼ˆå¯èƒ½ä¸åˆ é™¤ï¼‰å…ƒç´ è€Œå½¢æˆçš„æ–°çš„ éç©º æ•°ç»„ï¼Œåˆ é™¤è¿‡ç¨‹ä¸ä¼šæ”¹å˜å‰©ä½™å…ƒç´ çš„ç›¸å¯¹ä½ç½®ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šcoins = [1,4,10,5,7,19], target = 19<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼šåªéœ€è¦æ·»åŠ ä¸€æšé¢å€¼ä¸º<span class="hljs-number"> 2 </span>çš„ç¡¬å¸ï¼Œå¾—åˆ°ç¡¬å¸æ•°ç»„ [1,2,4,5,7,10,19] ã€‚<br>å¯ä»¥è¯æ˜ä»<span class="hljs-number"> 1 </span>åˆ°<span class="hljs-number"> 19 </span>çš„æ‰€æœ‰æ•´æ•°éƒ½å¯ç”±æ•°ç»„ä¸­çš„ç¡¬å¸ç»„åˆå¾—åˆ°ï¼Œä¸”éœ€è¦æ·»åŠ åˆ°æ•°ç»„ä¸­çš„ç¡¬å¸æ•°ç›®æœ€å°ä¸º<span class="hljs-number"> 1 </span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‘¨èµ›çš„ç¬¬äºŒé¢˜ï¼Œè‡ªå·±æ²¡æƒ³åˆ°ï¼Œé gptç»™äº†æ€è·¯(<s>tclğŸ˜¢</s>)</p><p>é¦–å…ˆå¯¹æ‰€æœ‰coinså‡åºæ’åºï¼Œè®¾å½“å‰å¯å–å¾—çš„æœ€å¤§å€¼æ˜¯maxnum(åˆå§‹ä¸º0)ã€‚æ¥ä¸‹æ¥éå†coinsï¼Œä¸‹ä¸€ä¸ªè¦å–å¾—çš„å€¼åº”ä¸ºmaxnum+1ï¼Œå¦‚æœå½“å‰coin&gt;maxnum+1ï¼Œè¯´æ˜éœ€è¦æ·»åŠ æ–°çš„ç¡¬å¸ï¼Œä¸”æ–°ç¡¬å¸çš„é¢å€¼åº”å½“ä¸ºmaxnum+1ï¼Œè€Œmaxnumä¹Ÿè¦æ›´æ–°ï¼šmaxnum+=maxnum+1ï¼ˆåŸæœ¬å·²æœ‰ç¡¬å¸å¯ä»¥å–å¾—0~maxnumä¹‹é—´ä»»æ„å€¼ï¼ŒåŠ å…¥é¢å€¼ä¸ºmaxnum+1çš„ç¡¬å¸åï¼Œä¸Šç•Œä¹Ÿåº”å½“æ‰©å¤§maxnum+1ï¼‰ï¼Œç›´åˆ°å½“å‰coin &lt;= maxnum+1ï¼Œæ­¤æ—¶è¯´æ˜ä¸ç®—å½“å‰coinå·²æœ‰ç¡¬å¸æœ€å¤§å¯ä»¥å–åˆ°maxnum+1ï¼Œé‚£ä¹ˆç®—ä¸Šcoinåï¼Œmaxnumæ›´æ–°ä¸ºmaxnum+=maxnum+coinã€‚æ¯æ¬¡æ›´æ–°maxnumæ—¶éƒ½åº”æ£€æŸ¥maxnum&gt;=targetï¼Œå¦‚æœæ»¡è¶³é‚£ä¹ˆç›´æ¥è¿”å›åŠ å…¥çš„ç¡¬å¸æ•°é‡ï¼Œå¦‚æœéå†å®Œcoinsï¼Œmaxnumä¾ç„¶å°äºtargetï¼Œé‚£ä¹ˆç»§ç»­maxnum+=maxnum+1ï¼Œ++ansã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">minimumAddedCoins</span>(<span class="hljs-params">vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; coins, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>        sort(coins.begin(), coins.end());<br>        <span class="hljs-built_in">int</span> <span class="hljs-keyword">add</span> = <span class="hljs-number">0</span>, max_num = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> c : coins)<br>        &#123;<br>            <span class="hljs-keyword">while</span> (c &gt; max_num + <span class="hljs-number">1</span>)<br>            &#123;<br>                ++<span class="hljs-keyword">add</span>;<br>                max_num += max_num + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span> (max_num &gt;= target)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">add</span>;<br>            &#125;<br>            max_num += c;<br>            <span class="hljs-keyword">if</span> (max_num &gt;= target)<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">add</span>;<br>        &#125;<br>        <span class="hljs-keyword">while</span> (max_num &lt; target)<br>        &#123;<br>            ++<span class="hljs-keyword">add</span>;<br>            max_num += max_num + <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">add</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸²"></a> ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸²</h2><p><a href="https://leetcode.cn/problems/count-complete-substrings/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² word å’Œä¸€ä¸ªæ•´æ•° k ã€‚</p><p>å¦‚æœ word çš„ä¸€ä¸ªå­å­—ç¬¦ä¸² s æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ å®Œå…¨å­—ç¬¦ä¸²ï¼š</p><p>s ä¸­æ¯ä¸ªå­—ç¬¦ æ°å¥½ å‡ºç° k æ¬¡ã€‚<br />ç›¸é‚»å­—ç¬¦åœ¨å­—æ¯è¡¨ä¸­çš„é¡ºåº è‡³å¤š ç›¸å·® 2 ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œs ä¸­ä¸¤ä¸ªç›¸é‚»å­—ç¬¦ c1 å’Œ c2 ï¼Œå®ƒä»¬åœ¨å­—æ¯è¡¨ä¸­çš„ä½ç½®ç›¸å·® è‡³å¤š ä¸º 2 ã€‚<br />è¯·ä½ è¿”å› word ä¸­ å®Œå…¨ å­å­—ç¬¦ä¸²çš„æ•°ç›®ã€‚</p><p>å­å­—ç¬¦ä¸² æŒ‡çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä¸€æ®µè¿ç»­ éç©º çš„å­—ç¬¦åºåˆ—ã€‚</p><p>e.g.</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">è¾“å…¥ï¼š<span class="hljs-built_in">word</span> = <span class="hljs-string">&quot;igigee&quot;</span>, k = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šå®Œå…¨å­å­—ç¬¦ä¸²éœ€è¦æ»¡è¶³æ¯ä¸ªå­—ç¬¦æ°å¥½å‡ºç° <span class="hljs-number">2</span> æ¬¡ï¼Œä¸”ç›¸é‚»å­—ç¬¦ç›¸å·®è‡³å¤šä¸º <span class="hljs-number">2</span> ï¼šigigee, igigee, igigee ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å‘¨èµ›ç¬¬ä¸‰é¢˜ï¼Œä¸»è¦æ€è·¯æ˜¯åˆ†ç»„åŠ æ»‘åŠ¨çª—å£ã€‚</p><p>è¦æ±‚ç›¸é‚»å­—ç¬¦å·®ä¸å¤§äº2ï¼Œé‚£ä¹ˆå½“ä¸¤ä¸ªå­—ç¬¦é—´å¤§äº2æ—¶ï¼Œå°±å¯ä»¥åœ¨ä¸­é—´è¿›è¡Œåˆ†å‰²ï¼Œè¿™æ ·å°†åŸå§‹å­—ç¬¦ä¸²åˆ’åˆ†æˆè®¸å¤šæ®µï¼Œæ®µå†…è¿›è¡Œå¤„ç†ã€‚</p><p>å¯¹äºæ¯ä¸€æ®µï¼Œéœ€è¦ç»Ÿè®¡æ»¡è¶³kæ¬¡è¦æ±‚çš„å­ä¸²ä¸ªæ•°ï¼Œå¯ä»¥å›ºå®šæ»‘åŠ¨çª—å£çš„å¤§å°ä¸ºm*kï¼Œmæ˜¯å­ä¸²ä¸­å­—ç¬¦ç§ç±»ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªcntæ•°ç»„è®°å½•æ¯ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œéå†æ‰€æœ‰æ»‘çª—ï¼Œç»Ÿè®¡å‡ºæ»‘çª—å†…æ¯ä¸ªå­—ç¬¦éƒ½å‡ºç°kæ¬¡çš„å­ä¸²ä¸ªæ•°ã€‚</p><p>è¿™é“é¢˜æ—¶é—´å¤æ‚åº¦è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæ£€æŸ¥å‡½æ•°å®šä¹‰åœ¨å¤–éƒ¨å°±è¶…æ—¶äº†ã€‚ã€‚ã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs perl">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> <span class="hljs-function"><span class="hljs-keyword">sub</span>(<span class="hljs-title">string</span> <span class="hljs-title">s</span>,<span class="hljs-title">int</span> <span class="hljs-title">k</span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">int</span> res=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> n=s.size();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> m=<span class="hljs-number">1</span>;m&lt;=<span class="hljs-number">26</span> &amp;&amp; m*k&lt;=n;++m)<br>        &#123;<br>            vector&lt;<span class="hljs-keyword">int</span>&gt; cnt(<span class="hljs-number">26</span>);<br>            function&lt;bool()&gt; check=[&amp;]()<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">26</span>;++i)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(cnt[i]&amp;&amp;cnt[i]!=k)<br>                        <span class="hljs-keyword">return</span> false;<br>                &#125;<br>                <span class="hljs-keyword">return</span> true;<br>            &#125;;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> r=<span class="hljs-number">0</span>;r&lt;n;++r)<br>            &#123;<br>                ++cnt[s[r]-<span class="hljs-string">&#x27;a&#x27;</span>];<br>                <span class="hljs-keyword">int</span> l=r-m*k+<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span>(l&gt;=<span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(check()) ++res;<br>                    --cnt[s[l]-<span class="hljs-string">&#x27;a&#x27;</span>];<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>    <span class="hljs-keyword">int</span> countCompleteSubstrings(string word, <span class="hljs-keyword">int</span> k) &#123;<br>        <span class="hljs-keyword">int</span> n=word.size();<br>        <span class="hljs-keyword">int</span> pre_pos=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">abs</span>(word[i]-word[i-<span class="hljs-number">1</span>])&gt;<span class="hljs-number">2</span>)<br>            &#123;<br>                ans+=<span class="hljs-function"><span class="hljs-keyword">sub</span></span>(word.substr(pre_pos,i-pre_pos),k);<br>                pre_pos=i;<br>            &#125;<br>        &#125;<br>        ans+=<span class="hljs-function"><span class="hljs-keyword">sub</span></span>(word.substr(pre_pos,n-pre_pos),k);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å››ç§ä½ç½®ç¼–ç å®ç°</title>
    <link href="/2023/12/02/%E5%9B%9B%E7%A7%8D%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
    <url>/2023/12/02/%E5%9B%9B%E7%A7%8D%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#transformer--vit--swin-transformer--mae%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81%E5%AE%9E%E7%8E%B0">Transformer / VIT / Swin Transformer / MAEä¸­çš„ä½ç½®ç¼–ç å®ç°</a><ul><li><a href="#transformer">Transformer</a></li><li><a href="#vit%E4%B8%AD%E7%9A%84%E7%BB%9D%E5%AF%B9%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81">VITä¸­çš„ç»å¯¹ä½ç½®ç¼–ç </a></li><li><a href="#swin-transformer%E7%9A%84%E7%9B%B8%E5%AF%B9%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81">Swin Transformerçš„ç›¸å¯¹ä½ç½®ç¼–ç </a></li><li><a href="#mae">MAE</a></li></ul></li></ul><!-- /TOC --><h2 id="transformer-vit-swin-transformer-maeä¸­çš„ä½ç½®ç¼–ç å®ç°"><a class="markdownIt-Anchor" href="#transformer-vit-swin-transformer-maeä¸­çš„ä½ç½®ç¼–ç å®ç°"></a> Transformer / VIT / Swin Transformer / MAEä¸­çš„ä½ç½®ç¼–ç å®ç°</h2><h3 id="transformer"><a class="markdownIt-Anchor" href="#transformer"></a> Transformer</h3><p>Transformerä¸­çš„ä½ç½®ç¼–ç æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>P</mi><msub><mi>E</mi><mrow><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi><mo stretchy="false">)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>1000</mn><msup><mn>0</mn><mrow><mn>2</mn><mi>i</mi><mi mathvariant="normal">/</mi><msub><mi>d</mi><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>P</mi><msub><mi>E</mi><mrow><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>1000</mn><msup><mn>0</mn><mrow><mn>2</mn><mi>i</mi><mi mathvariant="normal">/</mi><msub><mi>d</mi><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}PE_{(pos,2i)}&amp;=sin(pos/10000^{2i/d_{\mathrm{model}}})\\PE_{(pos,2i+1)}&amp;=cos(pos/10000^{2i/d_{\mathrm{model}}})\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.196em;vertical-align:-1.348em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.848em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">s</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.3120000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">s</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.348em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.848em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">m</span><span class="mord mathrm mtight">o</span><span class="mord mathrm mtight">d</span><span class="mord mathrm mtight">e</span><span class="mord mathrm mtight">l</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.3120000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mord mtight">/</span><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">m</span><span class="mord mathrm mtight">o</span><span class="mord mathrm mtight">d</span><span class="mord mathrm mtight">e</span><span class="mord mathrm mtight">l</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.348em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_1d_absolute_sincos_pe</span>(<span class="hljs-params">n_pos_vec, dim</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param n_pos_vec: (tensor)torch.arrge(n_pos,dtype=torch.float32)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> dim % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;dim must be even&#x27;</span><br>    position_embedding = torch.zeros((n_pos_vec.numel(), dim), dtype=torch.float32)  <span class="hljs-comment"># [n_pos,dim]</span><br>    omega = torch.arange(dim // <span class="hljs-number">2</span>, dtype=torch.float32)  <span class="hljs-comment"># i</span><br>    omega /= dim / <span class="hljs-number">2</span><br>    omega = <span class="hljs-number">1</span> / (<span class="hljs-number">1e4</span>**omega)<br>    out = n_pos_vec.unsqueeze(<span class="hljs-number">1</span>) @ omega.unsqueeze(<span class="hljs-number">0</span>)  <span class="hljs-comment"># [n_pos,dim//2]</span><br>    position_embedding[:, <span class="hljs-number">0</span>::<span class="hljs-number">2</span>] = torch.sin(out)<br>    position_embedding[:, <span class="hljs-number">1</span>::<span class="hljs-number">2</span>] = torch.cos(out)<br>    <span class="hljs-keyword">return</span> position_embedding<br></code></pre></td></tr></table></figure><h3 id="vitä¸­çš„ç»å¯¹ä½ç½®ç¼–ç "><a class="markdownIt-Anchor" href="#vitä¸­çš„ç»å¯¹ä½ç½®ç¼–ç "></a> VITä¸­çš„ç»å¯¹ä½ç½®ç¼–ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_1d_absolute_trainable_pe</span>(<span class="hljs-params">n_pos_vec, dim</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param n_pos_vec: (tensor)torch.arrge(n_pos,dtype=torch.float32)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    position_embedding = nn.Embedding(n_pos_vec.numel(), dim)<br>    <span class="hljs-comment"># initialize the position embedding</span><br>    nn.init.constant_(position_embedding.weight, <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">return</span> position_embedding<br></code></pre></td></tr></table></figure><h3 id="swin-transformerçš„ç›¸å¯¹ä½ç½®ç¼–ç "><a class="markdownIt-Anchor" href="#swin-transformerçš„ç›¸å¯¹ä½ç½®ç¼–ç "></a> Swin Transformerçš„ç›¸å¯¹ä½ç½®ç¼–ç </h3><p>åœ¨Swinä¸­ï¼Œç›¸å¯¹ä½ç½®ç¼–ç <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>ç”¨äºè®¡ç®—æ³¨æ„åŠ›æ—¶ï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Attention</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">SoftMax</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup><mi mathvariant="normal">/</mi><msqrt><mi>d</mi></msqrt><mo>+</mo><mi>B</mi><mo stretchy="false">)</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">\operatorname{Attention}(Q,K,V)=\operatorname{SoftMax}(QK^T/\sqrt d+B)V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">A</span><span class="mord mathrm">t</span><span class="mord mathrm">t</span><span class="mord mathrm">e</span><span class="mord mathrm">n</span><span class="mord mathrm">t</span><span class="mord mathrm">i</span><span class="mord mathrm">o</span><span class="mord mathrm">n</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.231095em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">S</span><span class="mord mathrm">o</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mord mathrm">t</span><span class="mord mathrm">M</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981095em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="padding-left:0.833em;">d</span></span><span style="top:-2.941095em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.058904999999999985em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">def</span> get_2d_relative_position_index(height, width):<br>    <span class="hljs-attribute">m1</span>, m2 = torch.meshgrid(torch.arange(height), torch.arange(width))  # m1æ¯ä¸€è¡Œç›¸ç­‰ï¼Œm2æ¯ä¸€åˆ—ç›¸ç­‰<br>    <span class="hljs-attribute">coords</span> = torch.stack((m1, m2), dim=<span class="hljs-number">0</span>)  #<span class="hljs-meta"> [2,h,w]</span><br>    <span class="hljs-attribute">coords_f</span> = torch.flatten(coords, <span class="hljs-number">1</span>)  #<span class="hljs-meta"> [2,h*w]</span><br>    <span class="hljs-attribute">relative_coords_bias</span> = coords_f[:, :, None] - coords_f[:, None, :]  #<span class="hljs-meta"> [2,h*w,h*w]</span><br>    <span class="hljs-attribute">relative_coords_bias</span>[<span class="hljs-number">0</span>, :, :] += height - <span class="hljs-number">1</span><br>    <span class="hljs-attribute">relative_coords_bias</span>[<span class="hljs-number">1</span>, :, :] += width - <span class="hljs-number">1</span><br>    <span class="hljs-attribute">relative_coords_bias</span>[<span class="hljs-number">0</span>, :, :] *= relative_coords_bias[<span class="hljs-number">1</span>, :, :].max() + <span class="hljs-number">1</span><br>    <span class="hljs-attribute">return</span> relative_coords_bias[<span class="hljs-number">0</span>, :, :] + relative_coords_bias[<span class="hljs-number">1</span>, :, :]<br><br><br><span class="hljs-attribute">def</span> create_2d_relative_bias_trainable_pe(n_head, height, width, dim):<br>    <span class="hljs-attribute">position_embedding</span> = nn.Embedding((<span class="hljs-number">2</span> * height - <span class="hljs-number">1</span>) * (<span class="hljs-number">2</span> * width - <span class="hljs-number">1</span>), n_head)  # bias[-h+<span class="hljs-number">1</span>,h-<span class="hljs-number">1</span>],bias[-w+<span class="hljs-number">1</span>,w-<span class="hljs-number">1</span>]<br>    <span class="hljs-attribute">nn</span>.init.constant_(position_embedding.weight, <span class="hljs-number">0</span>)<br>    <span class="hljs-attribute">relative_position_index</span> = get_2d_relative_position_index(height, width)  #<span class="hljs-meta"> [h*w,h*w],è·å¾—ç›¸å¯¹ä½ç½®ç´¢å¼•</span><br><span class="hljs-meta">    bias_embedding = position_embedding(torch.flatten(relative_position_index)).reshape(height * width, height * width, n_head)  # [h*w,h*w,n_head]</span><br>    <span class="hljs-attribute">bias_embedding</span> = bias_embedding.permute(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>).unsqueeze(<span class="hljs-number">0</span>)  #<span class="hljs-meta"> [1,n_head,h*w,h*w]</span><br>    <span class="hljs-attribute">return</span> position_embedding<br></code></pre></td></tr></table></figure><p>å› ä¸ºæ¯ä¸ªpatchä¸å…¶ä»–æ‰€æœ‰patchä¹‹é—´çš„ä½ç½®å…³ç³»éƒ½éœ€è¦è¢«ç¼–ç ï¼Œå› æ­¤è¾“å‡ºåä¸¤ç»´æ˜¯h*w</p><h3 id="mae"><a class="markdownIt-Anchor" href="#mae"></a> MAE</h3><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs hsp">def create_2d_absolute_sincos_pe(height, <span class="hljs-keyword">width</span>, <span class="hljs-keyword">dim</span>):<br>    <span class="hljs-keyword">assert</span> <span class="hljs-keyword">dim</span> % <span class="hljs-number">4</span> == <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;dim must be divisible by 4&#x27;</span><br>    position_embedding = torch.zeros((height * <span class="hljs-keyword">width</span>, <span class="hljs-keyword">dim</span>), dtype=torch.float32)  <span class="hljs-meta"># [h*w,dim]</span><br>    coords = torch.stack(torch.meshgrid(torch.arange(height, dtype=torch.float32), torch.arange(<span class="hljs-keyword">width</span>, dtype=torch.float32)), <span class="hljs-keyword">dim</span>=<span class="hljs-number">0</span>)  <span class="hljs-meta"># [<span class="hljs-number">2</span>,h,w]</span><br>    height_embedding = create_1d_absolute_sincos_pe(coords[<span class="hljs-number">0</span>].flatten(), <span class="hljs-keyword">dim</span> <span class="hljs-comment">// 2)  # [h*w,dim//2]</span><br>    width_embedding = create_1d_absolute_sincos_pe(coords[<span class="hljs-number">1</span>].flatten(), <span class="hljs-keyword">dim</span> <span class="hljs-comment">// 2)  # [h*w,dim//2]</span><br>    position_embedding[:, : <span class="hljs-keyword">dim</span> <span class="hljs-comment">// 2] = height_embedding  # [h*w,dim//2]</span><br>    position_embedding[:, <span class="hljs-keyword">dim</span> <span class="hljs-comment">// 2 :] = width_embedding  # [h*w,dim//2]</span><br>    <span class="hljs-keyword">return</span> position_embedding<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>èµ„æ–™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</title>
    <link href="/2023/11/28/%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B9%8B%E5%92%8C/"/>
    <url>/2023/11/28/%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B9%8B%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B9%8B%E5%92%8C">å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ"><a class="markdownIt-Anchor" href="#å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ"></a> å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</h2><p><a href="https://leetcode.cn/problems/sum-of-subarray-minimums/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ arrï¼Œæ‰¾åˆ° min(b) çš„æ€»å’Œï¼Œå…¶ä¸­ b çš„èŒƒå›´ä¸º arr çš„æ¯ä¸ªï¼ˆè¿ç»­ï¼‰å­æ•°ç»„ã€‚</p><p>ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œå› æ­¤ è¿”å›ç­”æ¡ˆæ¨¡ 10^9 + 7 ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr = <span class="hljs-comment">[3,1,2,4]</span><br>è¾“å‡ºï¼š17<br>è§£é‡Šï¼š<br>å­æ•°ç»„ä¸º <span class="hljs-comment">[3]</span>ï¼Œ<span class="hljs-comment">[1]</span>ï¼Œ<span class="hljs-comment">[2]</span>ï¼Œ<span class="hljs-comment">[4]</span>ï¼Œ<span class="hljs-comment">[3,1]</span>ï¼Œ<span class="hljs-comment">[1,2]</span>ï¼Œ<span class="hljs-comment">[2,4]</span>ï¼Œ<span class="hljs-comment">[3,1,2]</span>ï¼Œ<span class="hljs-comment">[1,2,4]</span>ï¼Œ<span class="hljs-comment">[3,1,2,4]</span>ã€‚ <br>æœ€å°å€¼ä¸º 3ï¼Œ1ï¼Œ2ï¼Œ4ï¼Œ1ï¼Œ1ï¼Œ2ï¼Œ1ï¼Œ1ï¼Œ1ï¼Œå’Œä¸º 17ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦è¿˜æ˜¯ç”¨åˆ°å•è°ƒæ ˆçš„æ€æƒ³ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ªä»¥arr[i]ä¸ºæœ€å°å€¼çš„å­æ•°ç»„æœ€å°å€¼ä¹‹å’Œï¼Œä¾‹å¦‚ arr=[1,4,2,3,1]ï¼Œå…¶ä¸­2æ˜¯å­æ•°ç»„[2],[4,2],[2,3],[4,2,3]çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆ2å¯¹ç­”æ¡ˆçš„è´¡çŒ®å°±æ˜¯8ã€‚å› æ­¤ï¼Œéœ€è¦åˆ©ç”¨å•è°ƒæ ˆæ‰¾åˆ°arr[i]å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”ä»–å°çš„æ•°çš„ä¸‹æ ‡Lï¼Œå’Œå³è¾¹ç¬¬ä¸€ä¸ªæ¯”ä»–å°çš„æ•°çš„ä¸‹æ ‡Rï¼Œå› ä¸ºå­æ•°ç»„è¦åŒ…æ‹¬arr[i]ï¼Œå› æ­¤å·¦ç«¯ç‚¹å¯ä»¥æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>L</mi><mo>+</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">L+1, L+2, ... i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathnormal">i</span></span></span></span>å…±i-Lä¸ªï¼Œå³ç«¯ç‚¹å¯ä»¥æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mtext>ï¼Œ</mtext><mi>i</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>L</mi><mo>+</mo><mn>2</mn><mtext>ï¼Œ</mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>R</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">iï¼Œi+1, L+2ï¼Œ... R-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>å…±R-iä¸ªï¼Œå› æ­¤ä»¥arr[i]ä¸ºæœ€å°å€¼çš„å­æ•°ç»„å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º(i-L)*(R-i)*arr[i]ã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºå¯èƒ½å­˜åœ¨é‡å¤çš„æ•°ï¼Œå› æ­¤æ¯ä¸ªarr[i]å¯¹åº”çš„å·¦å³è¾¹ç•Œä¸èƒ½é‡å ï¼Œå¦åˆ™ä¼šå¯¼è‡´é‡å¤è®¡ç®—ï¼Œæ‰€ä»¥å·¦å³è¾¹ç•Œè¦æ»¡è¶³<strong>å·¦é—­å³å¼€ï¼ˆå·¦å¼€å³é—­ï¼‰</strong></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Solution</span> &#123;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    int sumSubarrayMins(<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;&amp; <span class="hljs-title">arr</span>) &#123;</span><br><span class="hljs-class">        int n=arr.size();</span><br><span class="hljs-class">        stack&lt;int&gt; ls,rs;</span><br><span class="hljs-class">        vector&lt;int&gt; left(<span class="hljs-title">n</span>),right(<span class="hljs-title">n</span>);</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            while(!<span class="hljs-title">ls</span>.<span class="hljs-title">empty</span>()&amp;&amp;arr[ls.top()]&gt;=arr[i])</span><br><span class="hljs-class">                ls.pop();</span><br><span class="hljs-class">            left[i]=ls.empty() ? -1:ls.top();</span><br><span class="hljs-class">            ls.push(<span class="hljs-title">i</span>);</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=<span class="hljs-title">n</span>-1;<span class="hljs-title">i</span>&gt;=0;<span class="hljs-comment">--i)</span></span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            <span class="hljs-title">while</span>(!<span class="hljs-title">rs</span>.<span class="hljs-title">empty</span>()&amp;&amp;arr[rs.top()]&gt;arr[i])</span><br><span class="hljs-class">                rs.pop();</span><br><span class="hljs-class">            right[i]=rs.empty() ? n:rs.top();</span><br><span class="hljs-class">            rs.push(<span class="hljs-title">i</span>);</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        int mod=1e9+7;</span><br><span class="hljs-class">        long long ans=0;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">            ans+=((<span class="hljs-title">long</span> <span class="hljs-title">long</span>)(<span class="hljs-title">i</span>-<span class="hljs-title">left</span>[<span class="hljs-title">i</span>])*(<span class="hljs-title">right</span>[<span class="hljs-title">i</span>]-<span class="hljs-title">i</span>)*arr[i])%mod;</span><br><span class="hljs-class">        return ans%mod;</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº¤æ¢å¾—åˆ°å­—å…¸åºæœ€å°çš„æ•°ç»„</title>
    <link href="/2023/11/26/%E4%BA%A4%E6%8D%A2%E5%BE%97%E5%88%B0%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0%E7%BB%84/"/>
    <url>/2023/11/26/%E4%BA%A4%E6%8D%A2%E5%BE%97%E5%88%B0%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BA%A4%E6%8D%A2%E5%BE%97%E5%88%B0%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0%E7%BB%84">äº¤æ¢å¾—åˆ°å­—å…¸åºæœ€å°çš„æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="äº¤æ¢å¾—åˆ°å­—å…¸åºæœ€å°çš„æ•°ç»„"><a class="markdownIt-Anchor" href="#äº¤æ¢å¾—åˆ°å­—å…¸åºæœ€å°çš„æ•°ç»„"></a> äº¤æ¢å¾—åˆ°å­—å…¸åºæœ€å°çš„æ•°ç»„</h2><p><a href="https://leetcode.cn/problems/make-lexicographically-smallest-array-by-swapping-elements/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„ æ­£æ•´æ•° æ•°ç»„ nums å’Œä¸€ä¸ª æ­£æ•´æ•° limit ã€‚</p><p>åœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸¤ä¸ªä¸‹æ ‡ i å’Œ jï¼Œå¦‚æœ æ»¡è¶³ |nums[i] - nums[j]| &lt;= limit ï¼Œåˆ™äº¤æ¢ nums[i] å’Œ nums[j] ã€‚</p><p>è¿”å›æ‰§è¡Œä»»æ„æ¬¡æ“ä½œåèƒ½å¾—åˆ°çš„ å­—å…¸åºæœ€å°çš„æ•°ç»„ ã€‚</p><p>å¦‚æœåœ¨æ•°ç»„ a å’Œæ•°ç»„ b ç¬¬ä¸€ä¸ªä¸åŒçš„ä½ç½®ä¸Šï¼Œæ•°ç»„ a ä¸­çš„å¯¹åº”å­—ç¬¦æ¯”æ•°ç»„ b ä¸­çš„å¯¹åº”å­—ç¬¦çš„å­—å…¸åºæ›´å°ï¼Œåˆ™è®¤ä¸ºæ•°ç»„ a å°±æ¯”æ•°ç»„ b å­—å…¸åºæ›´å°ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [2,10,3] æ¯”æ•°ç»„ [10,2,3] å­—å…¸åºæ›´å°ï¼Œä¸‹æ ‡ 0 å¤„æ˜¯ä¸¤ä¸ªæ•°ç»„ç¬¬ä¸€ä¸ªä¸åŒçš„ä½ç½®ï¼Œä¸” 2 &lt; 10 ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[1,5,3,9,8]</span>, limit = 2<br>è¾“å‡ºï¼š<span class="hljs-comment">[1,3,5,8,9]</span><br>è§£é‡Šï¼šæ‰§è¡Œ 2 æ¬¡æ“ä½œï¼š<br>- äº¤æ¢ nums<span class="hljs-comment">[1]</span> å’Œ nums<span class="hljs-comment">[2]</span> ã€‚æ•°ç»„å˜ä¸º <span class="hljs-comment">[1,3,5,9,8]</span> ã€‚<br>- äº¤æ¢ nums<span class="hljs-comment">[3]</span> å’Œ nums<span class="hljs-comment">[4]</span> ã€‚æ•°ç»„å˜ä¸º <span class="hljs-comment">[1,3,5,8,9]</span> ã€‚<br>å³ä¾¿æ‰§è¡Œæ›´å¤šæ¬¡æ“ä½œï¼Œä¹Ÿæ— æ³•å¾—åˆ°å­—å…¸åºæ›´å°çš„æ•°ç»„ã€‚<br>æ³¨æ„ï¼Œæ‰§è¡Œä¸åŒçš„æ“ä½œä¹Ÿå¯èƒ½ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯åˆ†ç»„æ’åºå’ŒäºŒåˆ†ã€‚é¦–å…ˆéœ€è¦å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ¥ä¸‹æ¥å°†ä»–ä»¬åˆ†ç»„ï¼Œåˆ†ç»„çš„åŸåˆ™æ˜¯ç»„å†…å‡åºä¸”å„ä¸ªç»„ä¹‹é—´ï¼Œä¸å­˜åœ¨ä»»ä½•ä¸€å¯¹å¯ä»¥äº¤æ¢çš„å…ƒç´ <code>(tmp[j]-tmp[i]&gt;limit,j&gt;i)</code>ï¼Œç„¶åç”¨æ•°ç»„idx[]è®°å½•æ¯ä¸ªç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ åœ¨æœ‰åºæ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œoffset[]è®°å½•åç§»é‡ã€‚æ¥ä¸‹æ¥éå†numsæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ å…ˆäºŒåˆ†æŸ¥æ‰¾åœ¨æœ‰åºæ•°ç»„ä¸­çš„ä¸‹æ ‡jï¼Œç„¶åå†äºŒåˆ†æŸ¥æ‰¾jå±äºå“ªä¸ªç»„ï¼Œç„¶åæ ¹æ®ç»„å†…èµ·å§‹ä¸‹æ ‡å’Œç»„å†…åç§»ç¡®å®šåœ¨æœ‰åºæ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œç„¶åæ·»åŠ åˆ°ansä¸­ã€‚æ€»çš„æ¥è¯´ï¼Œæ¯æ¬¡éå†å…ƒç´ æ”¾ç½®çš„æ˜¯å…ƒç´ æ‰€åœ¨ç»„å†…èƒ½äº¤æ¢çš„è¾ƒå°å€¼ï¼Œå› æ­¤ä¿è¯äº†å­—å…¸åºè¾ƒå°ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">lexicographicallySmallestArray</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> limit)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        vector&lt;<span class="hljs-type">int</span>&gt; tmp=nums;<br>        <span class="hljs-built_in">sort</span>(tmp.<span class="hljs-built_in">begin</span>(),tmp.<span class="hljs-built_in">end</span>());<br>        vector&lt;<span class="hljs-type">int</span>&gt; idx;<br>        idx.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-type">int</span> t=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(tmp[i]-tmp[t]&gt;limit)<br>            &#123;<br>                idx.<span class="hljs-built_in">push_back</span>(i);<br>                t=i;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> m=idx.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">offset</span><span class="hljs-params">(m)</span></span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ans</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-type">int</span> j=<span class="hljs-built_in">upper_bound</span>(tmp.<span class="hljs-built_in">begin</span>(),tmp.<span class="hljs-built_in">end</span>(),nums[i])-tmp.<span class="hljs-built_in">begin</span>();<br>            <span class="hljs-type">int</span> k=<span class="hljs-built_in">lower_bound</span>(idx.<span class="hljs-built_in">begin</span>(),idx.<span class="hljs-built_in">end</span>(),j)-idx.<span class="hljs-built_in">begin</span>();<br>            ans[i]=tmp[idx[k<span class="hljs-number">-1</span>]+offset[k<span class="hljs-number">-1</span>]];<br>            ++offset[k<span class="hljs-number">-1</span>];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘æ ¼ä¸­æœ€å°è·¯å¾„ä»£ä»·</title>
    <link href="/2023/11/22/%E7%BD%91%E6%A0%BC%E4%B8%AD%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E4%BB%A3%E4%BB%B7/"/>
    <url>/2023/11/22/%E7%BD%91%E6%A0%BC%E4%B8%AD%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E4%BB%A3%E4%BB%B7/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BD%91%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E4%BB%A3%E4%BB%B7">ç½‘æ ¼ä¸­çš„æœ€å°è·¯å¾„ä»£ä»·</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç½‘æ ¼ä¸­çš„æœ€å°è·¯å¾„ä»£ä»·"><a class="markdownIt-Anchor" href="#ç½‘æ ¼ä¸­çš„æœ€å°è·¯å¾„ä»£ä»·"></a> ç½‘æ ¼ä¸­çš„æœ€å°è·¯å¾„ä»£ä»·</h2><p><a href="https://leetcode.cn/problems/minimum-path-cost-in-a-grid/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°çŸ©é˜µ grid ï¼ŒçŸ©é˜µå¤§å°ä¸º m x n ï¼Œç”±ä» 0 åˆ° m * n - 1 çš„ä¸åŒæ•´æ•°ç»„æˆã€‚ä½ å¯ä»¥åœ¨æ­¤çŸ©é˜µä¸­ï¼Œä»ä¸€ä¸ªå•å…ƒæ ¼ç§»åŠ¨åˆ° ä¸‹ä¸€è¡Œ çš„ä»»ä½•å…¶ä»–å•å…ƒæ ¼ã€‚å¦‚æœä½ ä½äºå•å…ƒæ ¼ (x, y) ï¼Œä¸”æ»¡è¶³ x &lt; m - 1 ï¼Œä½ å¯ä»¥ç§»åŠ¨åˆ° (x + 1, 0), (x + 1, 1), â€¦, (x + 1, n - 1) ä¸­çš„ä»»ä½•ä¸€ä¸ªå•å…ƒæ ¼ã€‚æ³¨æ„ï¼š åœ¨æœ€åä¸€è¡Œä¸­çš„å•å…ƒæ ¼ä¸èƒ½è§¦å‘ç§»åŠ¨ã€‚</p><p>æ¯æ¬¡å¯èƒ½çš„ç§»åŠ¨éƒ½éœ€è¦ä»˜å‡ºå¯¹åº”çš„ä»£ä»·ï¼Œä»£ä»·ç”¨ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„äºŒç»´æ•°ç»„ moveCost è¡¨ç¤ºï¼Œè¯¥æ•°ç»„å¤§å°ä¸º (m * n) x n ï¼Œå…¶ä¸­ moveCost[i][j] æ˜¯ä»å€¼ä¸º i çš„å•å…ƒæ ¼ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œç¬¬ j åˆ—å•å…ƒæ ¼çš„ä»£ä»·ã€‚ä» grid æœ€åä¸€è¡Œçš„å•å…ƒæ ¼ç§»åŠ¨çš„ä»£ä»·å¯ä»¥å¿½ç•¥ã€‚</p><p>grid ä¸€æ¡è·¯å¾„çš„ä»£ä»·æ˜¯ï¼šæ‰€æœ‰è·¯å¾„ç»è¿‡çš„å•å…ƒæ ¼çš„ å€¼ä¹‹å’Œ åŠ ä¸Š æ‰€æœ‰ç§»åŠ¨çš„ ä»£ä»·ä¹‹å’Œ ã€‚ä» ç¬¬ä¸€è¡Œ ä»»æ„å•å…ƒæ ¼å‡ºå‘ï¼Œè¿”å›åˆ°è¾¾ æœ€åä¸€è¡Œ ä»»æ„å•å…ƒæ ¼çš„æœ€å°è·¯å¾„ä»£ä»·ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å…³é”®åœ¨äºç†è§£moveCostçš„æ„æ€ã€‚å¯ä»¥ç”¨dp[i][j]è¡¨ç¤ºä»ç¬¬0è¡ŒæŸå…ƒç´ åˆ°ç¬¬iè¡Œç¬¬jåˆ—å…ƒç´ çš„ä»£ä»·ï¼ŒçŠ¶æ€æ–¹ç¨‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š<code> dp[i][j]=min(dp[i][j],dp[i-1][k]+grid[i][j]+moveCost[grid[i-1][k]][j]);</code>ï¼Œæ³¨æ„è¿™é‡ŒmoveCostçš„è¡Œç´¢å¼•æ˜¯å…ƒç´ çš„å€¼ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> minPathCost(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">grid</span>, <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; moveCost) &#123;<br>        <span class="hljs-keyword">int</span> m=<span class="hljs-keyword">grid</span>.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">int</span> n=<span class="hljs-keyword">grid</span>[<span class="hljs-number">0</span>].<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; dp(m,<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n,INT_MAX));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            dp[<span class="hljs-number">0</span>][j]=<span class="hljs-keyword">grid</span>[<span class="hljs-number">0</span>][j];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;m;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k=<span class="hljs-number">0</span>;k&lt;n;++k)<br>                    dp[i][j]=<span class="hljs-keyword">min</span>(dp[i][j],dp[i<span class="hljs-number">-1</span>][k]+<span class="hljs-keyword">grid</span>[i][j]+moveCost[<span class="hljs-keyword">grid</span>[i<span class="hljs-number">-1</span>][k]][j]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> *min_element(dp[m<span class="hljs-number">-1</span>].begin(),dp[m<span class="hljs-number">-1</span>].end());<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•ä½œä¸š3</title>
    <link href="/2023/11/15/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A3/"/>
    <url>/2023/11/15/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A3/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%B9%A6%E7%B1%8D%E5%BD%92%E6%A1%A3">ä¹¦ç±å½’æ¡£</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E5%81%9C%E8%BD%A6%E5%9C%BA%E7%AE%A1%E7%90%86%E5%91%98">åœè½¦åœºç®¡ç†å‘˜</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E5%AF%B9">æœåŠ¡å™¨é…å¯¹</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li><li><a href="#%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81">å“ˆå¤«æ›¼ç¼–ç </a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-3">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-3">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä¹¦ç±å½’æ¡£"><a class="markdownIt-Anchor" href="#ä¹¦ç±å½’æ¡£"></a> ä¹¦ç±å½’æ¡£</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æ˜¯ä¸€åå›¾ä¹¦é¦†ç®¡ç†å‘˜ï¼Œè´Ÿè´£å½’æ¡£ä¹¦ç±ã€‚ä½ æœ‰ä¸€ä¸ªä¹¦æ¶ï¼Œå®ƒèƒ½æ‰¿è½½ä¸€å®šé‡çš„é‡é‡ã€‚ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ booksï¼Œå…¶ä¸­ books[i] è¡¨ç¤ºç¬¬ i æœ¬ä¹¦çš„é‡é‡ã€‚ä¹¦æ¶çš„æ‰¿é‡é™åˆ¶ä¸º 5000 å•ä½ã€‚è¿”å›ä½ æœ€å¤šå¯ä»¥å½’æ¡£çš„ä¹¦ç±æ•°é‡ã€‚<br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">900 </span><span class="hljs-number">950</span> <span class="hljs-number">800</span> <span class="hljs-number">1000</span> <span class="hljs-number">700</span> <span class="hljs-number">800</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ¯”è¾ƒç®€å•ï¼Œæ’åºç„¶åç»Ÿè®¡ä¸€ä¸‹â€¦</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a) != EOF)<br>        v.<span class="hljs-built_in">push_back</span>(a);<br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> w = <span class="hljs-number">5000</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v.<span class="hljs-built_in">size</span>(); ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (w &gt;= v[i])<br>        &#123;<br>            w -= v[i];<br>            ++ans;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åœè½¦åœºç®¡ç†å‘˜"><a class="markdownIt-Anchor" href="#åœè½¦åœºç®¡ç†å‘˜"></a> åœè½¦åœºç®¡ç†å‘˜</h2><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ä½ æ˜¯ä¸€å®¶è´­ç‰©ä¸­å¿ƒçš„åœè½¦åœºç®¡ç†å‘˜ï¼Œéœ€è¦å®‰æ’å„è¾†è½¦çš„åœè½¦æ—¶æ®µã€‚æ¯è¾†è½¦çš„åœè½¦æ—¶æ®µå¯ä»¥ç”¨ä¸€ä¸ªæ—¶é—´æ•°ç»„æ¥è¡¨ç¤ºï¼Œæ•°ç»„ä¸­åŒ…æ‹¬è½¦è¾†è¿›å…¥å’Œç¦»å¼€çš„æ—¶é—´ ï¼Œä½ çš„ä»»åŠ¡æ˜¯ç¡®å®šè´­ç‰©ä¸­å¿ƒæ‰€éœ€çš„æœ€å°åœè½¦ä½æ•°é‡ã€‚</p><p>e.g.</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼š<span class="hljs-number">0,30 5,10</span> <span class="hljs-number">15</span>,<span class="hljs-number">20</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¯ä¸ªæ—¶é—´æ®µå¯¹æ•°ç»„è¿›è¡Œå¡«å……ï¼Œç»Ÿè®¡æ•°ç»„çš„æœ€å¤§å€¼å³å¯ï¼Œæ³¨æ„å¡«å……æ˜¯è¦å·¦é—­å³å¼€ã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; PII;<br><span class="hljs-type">int</span> d[<span class="hljs-number">100</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;PII&gt; v;<br>    string s;<br>    <span class="hljs-type">int</span> a, b;<br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-built_in">getline</span>(cin, s);<br>    <span class="hljs-function">stringstream <span class="hljs-title">ss</span><span class="hljs-params">(s)</span></span>;<br>    <span class="hljs-keyword">while</span> (ss &gt;&gt; a &gt;&gt; c &gt;&gt; b)<br>        v.<span class="hljs-built_in">push_back</span>(&#123;a, b&#125;);<br><br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (PII p : v)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = p.first; i &lt; p.second; ++i)<br>        &#123;<br>            ++d[i];<br>            ans = <span class="hljs-built_in">max</span>(ans, d[i]);<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æœåŠ¡å™¨é…å¯¹"><a class="markdownIt-Anchor" href="#æœåŠ¡å™¨é…å¯¹"></a> æœåŠ¡å™¨é…å¯¹</h2><h3 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ªå¤§å‹çš„æ•°æ®ä¸­å¿ƒï¼ŒæœåŠ¡å™¨æ˜¯æˆå¯¹å®‰ç½®çš„ï¼Œä»¥ä¾¿è¿›è¡Œæ•°æ®é•œåƒå’Œå†—ä½™å¤‡ä»½ã€‚æ¯å¯¹æœåŠ¡å™¨ç”±ä¸€å¯¹è¿ç»­çš„æ•´æ•°è¡¨ç¤ºï¼Œå¦‚ç¬¬ä¸€å¯¹æ˜¯ (0, 1)ï¼Œç¬¬äºŒå¯¹æ˜¯ (2, 3)ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åä¸€å¯¹æ˜¯ (2n-2, 2n-1)ã€‚ç”±äºé…ç½®é”™è¯¯ï¼ŒæœåŠ¡å™¨çš„é…å¯¹é¡ºåºè¢«æ‰“ä¹±äº†ã€‚ç°åœ¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œä¸­çš„è™šæ‹Ÿäº¤æ¢ï¼Œé‡æ–°é…ç½®æœåŠ¡å™¨ï¼Œä½¿å¾—æ¯å¯¹æœåŠ¡å™¨å¯ä»¥é‡æ–°æˆå¯¹å·¥ä½œã€‚è™šæ‹Ÿäº¤æ¢å¯ä»¥åœ¨ä»»æ„ä¸¤å°æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œï¼Œè€Œä¸ç®¡å®ƒä»¬çš„ä½ç½®å¦‚ä½•ã€‚è¿”å›æœ€å°‘äº¤æ¢æ¬¡æ•°ï¼Œä»¥ä¾¿æ¯å¯¹æœåŠ¡å™¨å¯ä»¥é‡æ–°é…å¯¹å·¥ä½œã€‚<br />e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼š1<span class="hljs-number"> 3 </span>4<span class="hljs-number"> 0 </span>2 5<br>è¾“å‡ºï¼š2<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h3><p>ç”¨ä¸€ä¸ªæ•°ç»„posæ¥è®°å½•æ¯ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œç„¶åéå†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ aï¼Œå’Œä»–é…å¯¹çš„å…ƒç´ æ˜¯a^1ï¼Œå¦‚1é…å¯¹0ï¼Œ2é…å¯¹3ï¼Œ3é…å¯¹2ã€‚éå†æ—¶åªç”¨éå†å¶æ•°ä¸‹æ ‡içš„å…ƒç´ ï¼Œå¦‚æœi+1å…ƒç´ æ— æ³•é…å¯¹ï¼Œé‚£ä¹ˆäº¤æ¢i+1ä½ç½®çš„å…ƒç´ å’Œé…å¯¹å…ƒç´ ï¼ŒåŒæ—¶äº¤æ¢ä»–ä»¬åœ¨posæ•°ç»„ä¸­çš„ä½ç½®ã€‚</p><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; a)<br>        v.<span class="hljs-built_in">push_back</span>(a);<br>    <span class="hljs-type">int</span> n = v.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">pos</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>        pos[v[i]] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i += <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-type">int</span> match = v[i] ^ <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (v[i + <span class="hljs-number">1</span>] != match)<br>        &#123;<br>            ++ans;<br>            <span class="hljs-built_in">swap</span>(v[i + <span class="hljs-number">1</span>], v[pos[match]]);<br>            <span class="hljs-built_in">swap</span>(pos[v[i + <span class="hljs-number">1</span>]], pos[v[pos[match]]]);<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å“ˆå¤«æ›¼ç¼–ç "><a class="markdownIt-Anchor" href="#å“ˆå¤«æ›¼ç¼–ç "></a> å“ˆå¤«æ›¼ç¼–ç </h2><h3 id="é¢˜ç›®æè¿°-4"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-4"></a> é¢˜ç›®æè¿°</h3><p>è¯·ä»¥éœå¤«æ›¼ç¼–ç æ–¹å¼å‹ç¼©ã€Šå‚²æ…¢ä¸åè§ã€‹ï¼Œä¸ºäº†å°†ç¼–ç æ–‡æœ¬å†™å…¥æ–‡ä»¶ï¼ˆä»¥&quot;wb&quot;äºŒè¿›åˆ¶æ¨¡å¼å†™å…¥æ–‡ä»¶ï¼‰ã€‚</p><h3 id="æ€è·¯-4"><a class="markdownIt-Anchor" href="#æ€è·¯-4"></a> æ€è·¯</h3><p>ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æ¨¡æ‹Ÿå…ƒç´ æ’å…¥çš„è¿‡ç¨‹ï¼Œè¾…åŠ©å»ºæ ‘ï¼Œæ³¨æ„ä»£ç ä¸­æ–‡ä»¶è¯»å†™çš„å®ç°å’Œå»ºæ ‘è¿‡ç¨‹ã€‚</p><h3 id="ä»£ç -4"><a class="markdownIt-Anchor" href="#ä»£ç -4"></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span><br>&#123;<br>    <span class="hljs-type">char</span> ch;<br>    <span class="hljs-type">int</span> freq;<br>    Node *left, *right;<br>    <span class="hljs-built_in">Node</span>(<span class="hljs-type">char</span> c, <span class="hljs-type">int</span> f, Node *l = <span class="hljs-literal">nullptr</span>, Node *r = <span class="hljs-literal">nullptr</span>) : <span class="hljs-built_in">ch</span>(c), <span class="hljs-built_in">freq</span>(f), <span class="hljs-built_in">left</span>(l), <span class="hljs-built_in">right</span>(r) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// å®šä¹‰æ’åºè§„åˆ™(å°é¡¶å †)</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">compare</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(Node *l, Node *r)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> l-&gt;freq &gt; r-&gt;freq;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// é€’å½’è·å–å“ˆå¤«æ›¼ç¼–ç </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">encode</span><span class="hljs-params">(Node *root, string str, map&lt;<span class="hljs-type">char</span>, string&gt; &amp;huffmanCode)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (!root-&gt;left &amp;&amp; !root-&gt;right)<br>        huffmanCode[root-&gt;ch] = str;<br>    <span class="hljs-built_in">encode</span>(root-&gt;left, str + <span class="hljs-string">&quot;0&quot;</span>, huffmanCode);<br>    <span class="hljs-built_in">encode</span>(root-&gt;right, str + <span class="hljs-string">&quot;1&quot;</span>, huffmanCode);<br>&#125;<br><br><span class="hljs-comment">// å“ˆå¤«æ›¼ç¼–ç å‹ç¼©ï¼Œè¿”å›å¹³å‡ç¼–ç é•¿åº¦</span><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">huffmanCompress</span><span class="hljs-params">(<span class="hljs-type">const</span> string &amp;filename)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">file</span><span class="hljs-params">(filename, ios::in)</span></span>;<br>    map&lt;<span class="hljs-type">char</span>, <span class="hljs-type">int</span>&gt; freq;<br>    <span class="hljs-type">char</span> ch;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// ç»Ÿè®¡å‡ºç°é¢‘ç‡</span><br>    <span class="hljs-keyword">while</span> (file.<span class="hljs-built_in">get</span>(ch))<br>    &#123;<br>        freq[ch]++;<br>        ++cnt;<br>    &#125;<br><br>    priority_queue&lt;Node *, vector&lt;Node *&gt;, compare&gt; pq;<br>    <span class="hljs-comment">// åˆå§‹åŒ–å¶å­èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it : freq)<br>        pq.<span class="hljs-built_in">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>(it.first, it.second));<br>    <span class="hljs-comment">// æ„å»ºå“ˆå¤«æ›¼æ ‘</span><br>    <span class="hljs-keyword">while</span> (pq.<span class="hljs-built_in">size</span>() != <span class="hljs-number">1</span>)<br>    &#123;<br>        Node *left = pq.<span class="hljs-built_in">top</span>();<br>        pq.<span class="hljs-built_in">pop</span>();<br>        Node *right = pq.<span class="hljs-built_in">top</span>();<br>        pq.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-type">int</span> sum = left-&gt;freq + right-&gt;freq;<br>        pq.<span class="hljs-built_in">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>(<span class="hljs-string">&#x27;\0&#x27;</span>, sum, left, right));<br>    &#125;<br><br>    Node *root = pq.<span class="hljs-built_in">top</span>();<br>    map&lt;<span class="hljs-type">char</span>, string&gt; huffmanCode; <span class="hljs-comment">// ä¿å­˜æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„å“ˆå¤«æ›¼ç¼–ç </span><br>    <span class="hljs-built_in">encode</span>(root, <span class="hljs-string">&quot;&quot;</span>, huffmanCode);<br><br>    <span class="hljs-comment">// è®¡ç®—å¹³å‡ç¼–ç é•¿åº¦</span><br>    <span class="hljs-type">double</span> avgLen = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it : huffmanCode)<br>        avgLen += it.second.<span class="hljs-built_in">size</span>() * freq[it.first];<br>    avgLen /= cnt;<br><br>    file.<span class="hljs-built_in">clear</span>();<br>    file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-function">ofstream <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-string">&quot;text.huff&quot;</span>, ios::out | ios::binary)</span></span>;<br>    <span class="hljs-comment">// å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶</span><br>    <span class="hljs-type">char</span> buffer = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> index = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (file.<span class="hljs-built_in">get</span>(ch))<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : huffmanCode[ch])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;1&#x27;</span>)<br>                buffer |= (<span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">7</span> - index));<br>            index++;<br>            <span class="hljs-keyword">if</span> (index == <span class="hljs-number">8</span>)<br>            &#123;<br>                output &lt;&lt; buffer;<br>                index = <span class="hljs-number">0</span>;<br>                buffer = <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    file.<span class="hljs-built_in">close</span>();<br>    output.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> avgLen;<br>&#125;<br><span class="hljs-comment">// è®¡ç®—å‹ç¼©æ¯”ç‡</span><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getCompressRate</span><span class="hljs-params">(<span class="hljs-type">const</span> string &amp;filename)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">file</span><span class="hljs-params">(filename, ios::in)</span></span>;<br>    file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, ios::end);<br>    <span class="hljs-type">double</span> originSize = file.<span class="hljs-built_in">tellg</span>(); <span class="hljs-comment">// è¿”å›æ–‡ä»¶å­—èŠ‚æ•°</span><br>    file.<span class="hljs-built_in">close</span>();<br>    file.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;text.huff&quot;</span>, ios::in);<br>    file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, ios::end);<br>    <span class="hljs-type">double</span> compressSize = file.<span class="hljs-built_in">tellg</span>();<br>    file.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> compressSize / originSize;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">huffmanCompress</span>(<span class="hljs-string">&quot;Pride and Prejudice.txt&quot;</span>) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Compress Rate: &quot;</span> &lt;&lt; <span class="hljs-built_in">getCompressRate</span>(<span class="hljs-string">&quot;Pride and Prejudice.txt&quot;</span>) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡æœ¬å·¦å³å¯¹é½</title>
    <link href="/2023/11/13/%E6%96%87%E6%9C%AC%E5%B7%A6%E5%8F%B3%E5%AF%B9%E9%BD%90/"/>
    <url>/2023/11/13/%E6%96%87%E6%9C%AC%E5%B7%A6%E5%8F%B3%E5%AF%B9%E9%BD%90/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%96%87%E6%9C%AC%E5%B7%A6%E5%8F%B3%E5%AF%B9%E9%BD%90">æ–‡æœ¬å·¦å³å¯¹é½</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ–‡æœ¬å·¦å³å¯¹é½"><a class="markdownIt-Anchor" href="#æ–‡æœ¬å·¦å³å¯¹é½"></a> æ–‡æœ¬å·¦å³å¯¹é½</h2><p><a href="https://leetcode.cn/problems/text-justification/description/?envType=study-plan-v2&amp;envId=top-interview-150">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªå•è¯æ•°ç»„ words å’Œä¸€ä¸ªé•¿åº¦ maxWidth ï¼Œé‡æ–°æ’ç‰ˆå•è¯ï¼Œä½¿å…¶æˆä¸ºæ¯è¡Œæ°å¥½æœ‰ maxWidth ä¸ªå­—ç¬¦ï¼Œä¸”å·¦å³ä¸¤ç«¯å¯¹é½çš„æ–‡æœ¬ã€‚</p><p>ä½ åº”è¯¥ä½¿ç”¨ â€œè´ªå¿ƒç®—æ³•â€ æ¥æ”¾ç½®ç»™å®šçš„å•è¯ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå°½å¯èƒ½å¤šåœ°å¾€æ¯è¡Œä¸­æ”¾ç½®å•è¯ã€‚å¿…è¦æ—¶å¯ç”¨ç©ºæ ¼ â€™ â€™ å¡«å……ï¼Œä½¿å¾—æ¯è¡Œæ°å¥½æœ‰ maxWidth ä¸ªå­—ç¬¦ã€‚</p><p>è¦æ±‚å°½å¯èƒ½å‡åŒ€åˆ†é…å•è¯é—´çš„ç©ºæ ¼æ•°é‡ã€‚å¦‚æœæŸä¸€è¡Œå•è¯é—´çš„ç©ºæ ¼ä¸èƒ½å‡åŒ€åˆ†é…ï¼Œåˆ™å·¦ä¾§æ”¾ç½®çš„ç©ºæ ¼æ•°è¦å¤šäºå³ä¾§çš„ç©ºæ ¼æ•°ã€‚</p><p>æ–‡æœ¬çš„æœ€åä¸€è¡Œåº”ä¸ºå·¦å¯¹é½ï¼Œä¸”å•è¯ä¹‹é—´ä¸æ’å…¥é¢å¤–çš„ç©ºæ ¼ã€‚</p><p>æ³¨æ„:</p><p>å•è¯æ˜¯æŒ‡ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦åºåˆ—ã€‚<br />æ¯ä¸ªå•è¯çš„é•¿åº¦å¤§äº 0ï¼Œå°äºç­‰äº maxWidthã€‚<br />è¾“å…¥å•è¯æ•°ç»„ words è‡³å°‘åŒ…å«ä¸€ä¸ªå•è¯ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥: words = [<span class="hljs-string">&quot;This&quot;</span>, <span class="hljs-string">&quot;is&quot;</span>, <span class="hljs-string">&quot;an&quot;</span>, <span class="hljs-string">&quot;example&quot;</span>, <span class="hljs-string">&quot;of&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;justification.&quot;</span>], maxWidth = <span class="hljs-number">16</span><br>è¾“å‡º:<br>[<br>   <span class="hljs-string">&quot;This    is    an&quot;</span>,<br>   <span class="hljs-string">&quot;example  of text&quot;</span>,<br>   <span class="hljs-string">&quot;justification.  &quot;</span><br>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸æ¶‰åŠä»€ä¹ˆç®—æ³•ï¼Œä¸»è¦è€ƒå¯Ÿå­—ç¬¦ä¸²å¤„ç†èƒ½åŠ›ã€‚å¯ä»¥æŒ‰è¡Œæ¥å¤„ç†ï¼Œé¦–å…ˆè®°å½•è¦åŠ å…¥æ¯è¡Œçš„å•è¯æœ‰å“ªäº›ï¼Œå¯ä»¥éå†å•è¯ï¼Œç´¯åŠ éå†è¿‡çš„å•è¯é•¿åº¦ï¼Œå¦‚æœåŠ å…¥ä¸‹ä¸€ä¸ªå•è¯åæ€»é•¿åº¦å¤§äºmaxWidthï¼Œæˆ–è€…ä¸‹ä¸€ä¸ªå•è¯æ˜¯æœ€åä¸€ä¸ªå•è¯ï¼Œé‚£ä¹ˆå°±å°†ç°æœ‰åŒºé—´çš„æ‰€æœ‰å•è¯ç”Ÿæˆä¸€è¡Œå¹¶è¿”å›ã€‚</p><p>å¯¹äºç©ºæ ¼ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç»Ÿè®¡æ¯è¡Œæ€»çš„ç©ºæ ¼æ•°é‡spnumï¼Œç„¶åè®¡ç®—æ¯ä¸ªå­—ç¬¦ä¸²åè·Ÿçš„åŸºæœ¬ç©ºæ ¼æ•°<code>base_space=(wordnum==1)? spnum:spnum/(wordnum-1)</code>ï¼Œè¿˜éœ€é¢å¤–çš„ç©ºæ ¼æ•°ä¸º<code>extra_space=(wordnum==1)? 0:spnum%(wordnum-1);</code>ï¼Œæ¯ä¸ªå•è¯åé¢è¡¥çš„ç©ºæ ¼æ•°ä¸º<code>string(base_space+((i-start)&lt;extra_space),' ')</code>ã€‚åœ¨å¤„ç†æ—¶è¦æ³¨æ„ï¼Œå¦‚æœæ˜¯å¤„ç†æœ€åä¸€è¡Œï¼Œåˆ™æ¯ä¸ªå•è¯åé¢åŠ ä¸€ä¸ªç©ºæ ¼å°±è¡Œï¼Œç„¶åæ¯è¡Œæœ€åä¸€ä¸ªå•è¯æ ¹æ®å½“å‰è¡Œçš„é•¿åº¦åœ¨åé¢è¡¥ä¸Šå¯¹åº”æ•°é‡çš„ç©ºæ ¼ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">string <span class="hljs-title">getline</span><span class="hljs-params">(vector&lt;string&gt;&amp; words, <span class="hljs-type">int</span> start,<span class="hljs-type">int</span> end, <span class="hljs-type">int</span> width,<span class="hljs-type">bool</span> last)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> wordnum= end-start+<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=start;i&lt;=end;++i)<br>            sum+=words[i].<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> spnum=width-sum;<br>        <span class="hljs-type">int</span> base_space=(wordnum==<span class="hljs-number">1</span>)? spnum:spnum/(wordnum<span class="hljs-number">-1</span>);<br>        <span class="hljs-type">int</span> extra_space=(wordnum==<span class="hljs-number">1</span>)? <span class="hljs-number">0</span>:spnum%(wordnum<span class="hljs-number">-1</span>);<br>        string res;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=start;i&lt;end;++i)<br>        &#123;<br>            res+=words[i];<br>            <span class="hljs-keyword">if</span>(last)<br>            &#123;<br>                res+=<span class="hljs-string">&#x27; &#x27;</span>;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            res+=<span class="hljs-built_in">string</span>(base_space+((i-start)&lt;extra_space),<span class="hljs-string">&#x27; &#x27;</span>);<br>        &#125;<br>        res+=words[end];<br>        res+=<span class="hljs-built_in">string</span>(width-res.<span class="hljs-built_in">size</span>(),<span class="hljs-string">&#x27; &#x27;</span>);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>    <span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">fullJustify</span><span class="hljs-params">(vector&lt;string&gt;&amp; words, <span class="hljs-type">int</span> maxWidth)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=words.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> start=<span class="hljs-number">0</span>;<br>        vector&lt;string&gt; res;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            sum+=words[i].<span class="hljs-built_in">size</span>()+<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(i+<span class="hljs-number">1</span>==n||sum+words[i+<span class="hljs-number">1</span>].<span class="hljs-built_in">size</span>()&gt;maxWidth)<br>            &#123;<br>                res.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">getline</span>(words,start,i,maxWidth,i+<span class="hljs-number">1</span>==n));<br>                start=i+<span class="hljs-number">1</span>;<br>                sum=<span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;      <br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å‘ç³–æœ</title>
    <link href="/2023/11/08/%E5%88%86%E5%8F%91%E7%B3%96%E6%9E%9C/"/>
    <url>/2023/11/08/%E5%88%86%E5%8F%91%E7%B3%96%E6%9E%9C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%88%86%E5%8F%91%E7%B3%96%E6%9E%9C">åˆ†å‘ç³–æœ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åˆ†å‘ç³–æœ"><a class="markdownIt-Anchor" href="#åˆ†å‘ç³–æœ"></a> åˆ†å‘ç³–æœ</h2><p><a href="https://leetcode.cn/problems/candy/description/?envType=study-plan-v2&amp;envId=top-interview-150">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>n ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ ratings è¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚</p><p>ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š</p><p>æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚<br />ç›¸é‚»ä¸¤ä¸ªå­©å­è¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚<br />è¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„ æœ€å°‘ç³–æœæ•°ç›® ã€‚</p><p>e.g.</p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">è¾“å…¥ï¼šratings </span>=<span class="hljs-string"> [1,0,2]</span><br><span class="hljs-string">è¾“å‡ºï¼š5</span><br><span class="hljs-string">è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯ä»¥åˆ†åˆ«ä»å·¦å³ä¸¤è¾¹å¼€å§‹éå†ï¼Œå½“æ»¡è¶³é¡ºåºè¦æ±‚æ—¶ï¼Œç³–æœæ•°åŠ 1ï¼Œå½“ä¸æ»¡è¶³æ—¶ç³–æœæ•°ä¸º1ï¼Œç„¶åç»Ÿè®¡æ¯ä¸ªäººå·¦å³ä¸¤ç§é¡ºåºä¸‹çš„æœ€å¤§å€¼ç´¯åŠ åˆ°ç­”æ¡ˆä¸­å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> candy(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; ratings) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=ratings.size();<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-built_in">left</span>(<span class="hljs-built_in">n</span>);<br>        <span class="hljs-built_in">left</span>[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;<span class="hljs-built_in">n</span>;++i)<br>        &#123;<br>            <span class="hljs-built_in">if</span>(ratings[i]&gt;ratings[i-<span class="hljs-number">1</span>])<br>                <span class="hljs-built_in">left</span>[i]=<span class="hljs-built_in">left</span>[i-<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>;<br>            else<br>                <span class="hljs-built_in">left</span>[i]=<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-built_in">int</span> r=<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> res=<span class="hljs-number">0</span>;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-built_in">n</span>-<span class="hljs-number">1</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-built_in">if</span>(i+<span class="hljs-number">1</span>&lt;<span class="hljs-built_in">n</span>&amp;&amp;ratings[i]&gt;ratings[i+<span class="hljs-number">1</span>])<br>                ++r;<br>            else<br>                r=<span class="hljs-number">1</span>;<br>            res+=<span class="hljs-built_in">max</span>(r,<span class="hljs-built_in">left</span>[i]);            <br>        &#125;<br>        return res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åŠ æ²¹ç«™</title>
    <link href="/2023/11/06/%E5%8A%A0%E6%B2%B9%E7%AB%99/"/>
    <url>/2023/11/06/%E5%8A%A0%E6%B2%B9%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ æ²¹ç«™"><a class="markdownIt-Anchor" href="#åŠ æ²¹ç«™"></a> åŠ æ²¹ç«™</h2><p><a href="https://leetcode.cn/problems/gas-station/description/?envType=study-plan-v2&amp;envId=top-interview-150">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€æ¡ç¯è·¯ä¸Šæœ‰ n ä¸ªåŠ æ²¹ç«™ï¼Œå…¶ä¸­ç¬¬ i ä¸ªåŠ æ²¹ç«™æœ‰æ±½æ²¹ gas[i]å‡ã€‚</p><p>ä½ æœ‰ä¸€è¾†æ²¹ç®±å®¹é‡æ— é™çš„çš„æ±½è½¦ï¼Œä»ç¬¬ i ä¸ªåŠ æ²¹ç«™å¼€å¾€ç¬¬ i+1 ä¸ªåŠ æ²¹ç«™éœ€è¦æ¶ˆè€—æ±½æ²¹ cost[i] å‡ã€‚ä½ ä»å…¶ä¸­çš„ä¸€ä¸ªåŠ æ²¹ç«™å‡ºå‘ï¼Œå¼€å§‹æ—¶æ²¹ç®±ä¸ºç©ºã€‚</p><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ gas å’Œ cost ï¼Œå¦‚æœä½ å¯ä»¥æŒ‰é¡ºåºç»•ç¯è·¯è¡Œé©¶ä¸€å‘¨ï¼Œåˆ™è¿”å›å‡ºå‘æ—¶åŠ æ²¹ç«™çš„ç¼–å·ï¼Œå¦åˆ™è¿”å› -1 ã€‚å¦‚æœå­˜åœ¨è§£ï¼Œåˆ™ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥: gas = [1,2,3,4,5], cost = [3,4,5,1,2]<br>è¾“å‡º: 3<br>è§£é‡Š:<br>ä»<span class="hljs-number"> 3 </span>å·åŠ æ²¹ç«™(ç´¢å¼•ä¸º<span class="hljs-number"> 3 </span>å¤„)å‡ºå‘ï¼Œå¯è·å¾—<span class="hljs-number"> 4 </span>å‡æ±½æ²¹ã€‚æ­¤æ—¶æ²¹ç®±æœ‰ =<span class="hljs-number"> 0 </span>+<span class="hljs-number"> 4 </span>=<span class="hljs-number"> 4 </span>å‡æ±½æ²¹<br>å¼€å¾€<span class="hljs-number"> 4 </span>å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰<span class="hljs-number"> 4 </span>-<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 5 </span>=<span class="hljs-number"> 8 </span>å‡æ±½æ²¹<br>å¼€å¾€<span class="hljs-number"> 0 </span>å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰<span class="hljs-number"> 8 </span>-<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 1 </span>=<span class="hljs-number"> 7 </span>å‡æ±½æ²¹<br>å¼€å¾€<span class="hljs-number"> 1 </span>å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰<span class="hljs-number"> 7 </span>-<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 2 </span>=<span class="hljs-number"> 6 </span>å‡æ±½æ²¹<br>å¼€å¾€<span class="hljs-number"> 2 </span>å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰<span class="hljs-number"> 6 </span>-<span class="hljs-number"> 4 </span>+<span class="hljs-number"> 3 </span>=<span class="hljs-number"> 5 </span>å‡æ±½æ²¹<br>å¼€å¾€<span class="hljs-number"> 3 </span>å·åŠ æ²¹ç«™ï¼Œä½ éœ€è¦æ¶ˆè€—<span class="hljs-number"> 5 </span>å‡æ±½æ²¹ï¼Œæ­£å¥½è¶³å¤Ÿä½ è¿”å›åˆ°<span class="hljs-number"> 3 </span>å·åŠ æ²¹ç«™ã€‚<br>å› æ­¤ï¼Œ3 å¯ä¸ºèµ·å§‹ç´¢å¼•ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¦–å…ˆæ ¹æ®é¢˜æ„ï¼Œä¸€æ¬¡åªèƒ½åˆ°è¾¾ç›¸é‚»çš„åŠ æ²¹ç«™ï¼Œè€Œä¸”å½“æ€»çš„gaså°äºæ€»costï¼Œåˆ™æ— è®ºå¦‚ä½•éƒ½ä¸èƒ½ç»•è¡Œä¸€å‘¨ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥éå†æ‰€æœ‰èµ·ç‚¹ï¼Œç”¨coså’Œreståˆ†åˆ«ä¿å­˜æŸèµ·ç‚¹å¼€å§‹çš„å‰©ä½™æ²¹é‡å’Œæ€»çš„å‰©ä½™æ²¹é‡ï¼Œå½“cos &lt; 0æ—¶ï¼Œè¯´æ˜å½“å‰iä½ç½®æ— æ³•åˆ°è¾¾i+1ä½ç½®ï¼Œå› æ­¤æŠŠi+1è®¾ç½®ä¸ºstartèµ·ç‚¹ï¼Œå¹¶æŠŠcosç½®ä¸º0ï¼Œéå†å®Œæˆä¹‹åï¼Œå¦‚æœrest &lt; 0ï¼Œè¯´æ˜æ€»çš„gaså°äºæ€»costï¼Œè¿”å›-1ï¼Œå¦åˆ™è¿”å›startã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">canCompleteCircuit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; gas, vector&lt;<span class="hljs-type">int</span>&gt;&amp; cost)</span> </span>&#123;<br>        <span class="hljs-type">int</span> start=<span class="hljs-number">0</span>, cos=<span class="hljs-number">0</span>,rest=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;gas.<span class="hljs-built_in">size</span>();++i)<br>        &#123;<br>            cos+=gas[i]-cost[i];<br>            rest+=gas[i]-cost[i];<br>            <span class="hljs-keyword">if</span>(cos&lt;<span class="hljs-number">0</span>)<br>            &#123;<br>                start=i+<span class="hljs-number">1</span>;<br>                cos=<span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> rest&lt;<span class="hljs-number">0</span>?<span class="hljs-number">-1</span>:start;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çŸ©é˜µé“¾ä¹˜æ³•</title>
    <link href="/2023/11/03/%E7%9F%A9%E9%98%B5%E9%93%BE%E4%B9%98%E6%B3%95/"/>
    <url>/2023/11/03/%E7%9F%A9%E9%98%B5%E9%93%BE%E4%B9%98%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="çŸ©é˜µé“¾ä¹˜æ³•"><a class="markdownIt-Anchor" href="#çŸ©é˜µé“¾ä¹˜æ³•"></a> çŸ©é˜µé“¾ä¹˜æ³•</h2><h3 id="é—®é¢˜æè¿°"><a class="markdownIt-Anchor" href="#é—®é¢˜æè¿°"></a> é—®é¢˜æè¿°</h3><p>çŸ©é˜µä¹˜æ³•çš„è®¡ç®—å¤æ‚åº¦ä¸ç›¸ä¹˜é¡ºåºæœ‰å…³ï¼Œå¯ä»¥é€šè¿‡é€‚å½“çš„ç»“åˆé™ä½è®¡ç®—å¤æ‚åº¦ã€‚<br />ç»™ä½ ä¸€ç³»åˆ—çš„çŸ©é˜µA1,A2,A3,â€¦,Anå’Œä¸€ç³»åˆ—çš„æ•´æ•°P0,P1,P2â€¦,Pnï¼Œæ¯ä¸ªçŸ©é˜µ Ai çš„è§„æ¨¡ä¸ºPi-1 * Pi, 1 &lt;=i &lt; nã€‚<br />ç°åœ¨ï¼Œè¯·ä½ è®¡ç®—è¿™äº›çŸ©é˜µè¿ä¹˜æ‰€éœ€è¦çš„æœ€å°‘çš„è®¡ç®—æ¬¡æ•°æ˜¯å¤šå°‘ï¼Ÿ</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨d[i][j]è¡¨ç¤ºç›¸ä¹˜åçŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">A_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>çš„è®¡ç®—æ¬¡æ•°ï¼Œå¯¹äºi~j(1 &lt;=i &lt; j &lt; n)çš„çŸ©é˜µï¼Œå¯ä»¥åœ¨ä¸­é—´æ‰¾åˆ°ç¬¬kä¸ªçŸ©é˜µè¿›è¡Œåˆ‡å‰²ï¼Œæ­¤æ—¶æ‰€éœ€è®¡ç®—æ¬¡æ•°ä¸ºd[i][k]+d[k+1][j]+<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><msub><mi>p</mi><mi>k</mi></msub><msub><mi>p</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">p_{i-1}p_{k}p_{j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå¯ä»¥éå†i~jä¹‹é—´æ‰€æœ‰kï¼Œæ‰¾åˆ°ä½¿è®¡ç®—æ¬¡æ•°æœ€å°çš„kã€‚é€’æ¨å…³ç³»å¦‚ä¸‹ï¼š</p><ul><li>è‹¥ i== jï¼Œd[i][j]==0</li><li>è‹¥i &lt; j, d[i][j]=din(d[i][k]+d[k+1][j]+p(i-1)p(k)p(j))ï¼Œ i &lt;= k &lt; j</li></ul><p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥æ‰¾å‡ºiï½jä¸ªçŸ©é˜µç›¸ä¹˜çš„å­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œè¯¥å­é—®é¢˜åŒ…å«j-i+1ä¸ªçŸ©é˜µï¼Œå› æ­¤çŸ©é˜µé“¾çš„é•¿åº¦ä¸ºl=j-i+1ï¼Œä¸ºäº†æ±‚å‡ºæ€»ä½“çš„æœ€ä¼˜è§£ï¼Œè¿˜éœ€è¦éå†æ‰€æœ‰å­é“¾çš„é•¿åº¦l(1~n)</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs prolog">void <span class="hljs-symbol">MATRIX_CHAIN_ORDER</span>(int *p,int <span class="hljs-symbol">Length</span>,int d[][<span class="hljs-symbol">M</span>],int s[][<span class="hljs-symbol">M</span>])<br>&#123;<br>    //dä¿å­˜æœ€å°‘è®¡ç®—æ¬¡æ•°ï¼Œsä¿å­˜åˆ’åˆ†ä½ç½®(è·Ÿè¸ªçŸ©é˜µ)<br>int q,n=<span class="hljs-symbol">Length</span><span class="hljs-number">-1</span>;<br>for(int i=<span class="hljs-number">1</span>;i&lt;=n;i++) d[i][i]=<span class="hljs-number">0</span>;<br>for(int l=<span class="hljs-number">2</span>;l&lt;=n;l++) <span class="hljs-comment">/* çŸ©é˜µé“¾çš„é•¿åº¦ */</span><br>&#123;<br>for(int i=<span class="hljs-number">1</span>;i&lt;=n-l+<span class="hljs-number">1</span>;i++) <br>&#123;<br>int j=i+l<span class="hljs-number">-1</span>;         <span class="hljs-comment">/* ç­‰ä»·äº l=j-i+1 */</span><br>d[i][j]=<span class="hljs-symbol">INT_MAX</span>;<br>for(int k=i;k&lt;=j<span class="hljs-number">-1</span>;k++)<br>&#123;<br>q=d[i][k]+d[k+<span class="hljs-number">1</span>][j]+p[i<span class="hljs-number">-1</span>]*p[k]*p[j];<br>if(q&lt;d[i][j])<br>&#123;<br>d[i][j]=q;<br>s[i][j]=k;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•ä½œä¸š2</title>
    <link href="/2023/10/20/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A2/"/>
    <url>/2023/10/20/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%95%B0%E4%B8%80%E6%95%B0">æ•°â€œä¸€â€æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%80%E5%A4%A7%E7%9F%A9%E5%BD%A2">æœ€å¤§çŸ©å½¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ•°ä¸€æ•°"><a class="markdownIt-Anchor" href="#æ•°ä¸€æ•°"></a> æ•°â€œä¸€â€æ•°</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªæ•´æ•° nï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ è¡¨ç¤ºå¯¹åº”æ•´æ•°äºŒè¿›åˆ¶ä¸­ â€œ1â€ çš„æ•°é‡ã€‚</p><p>input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[0, 1, 1, 2, 1, 2]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯ä»¥ç”¨æ•°ç»„resä¿å­˜æ¯ä¸ªæ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„1çš„æ•°é‡</p><ul><li>å¯¹äºå¶æ•°<code>a</code>ï¼Œä»–çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„æ•°é‡å’Œ<code>a/2</code>ç›¸åŒ</li><li>å¯¹äºå¥‡æ•°<code>a</code>,ä»–çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„æ•°é‡æ¯”<code>a/2</code>å¤š1</li></ul><p>å› æ­¤æœ‰é€’æ¨å¼ï¼š<code>res[i]=res[i&gt;&gt;1]+(i&amp;1)</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">res</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>    &#123;<br>        res[i] = res[i &gt;&gt; <span class="hljs-number">1</span>] + i &amp; <span class="hljs-number">1</span>;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;[&#x27;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (i != n)<br>            cout &lt;&lt; res[i] &lt;&lt; <span class="hljs-string">&quot;, &quot;</span>;<br>        <span class="hljs-keyword">else</span><br>            cout &lt;&lt; res[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;]&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æœ€å¤§çŸ©å½¢"><a class="markdownIt-Anchor" href="#æœ€å¤§çŸ©å½¢"></a> æœ€å¤§çŸ©å½¢</h2><p><a href="https://leetcode.cn/problems/maximal-rectangle/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªä»…åŒ…å« 0 å’Œ 1 ã€å¤§å°ä¸º rows x cols çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« 1 çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šmatrix = [[<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>],[<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>],[<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>],[<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;0&quot;</span>]]<br>è¾“å‡ºï¼š<span class="hljs-number">6</span><br>è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>è¿™é“é¢˜éœ€è¦ç”¨åˆ°å•è°ƒæ ˆï¼Œåœ¨<a href="https://lqz2.github.io/2022/09/13/%E5%8D%95%E8%B0%83%E6%A0%88/">å•è°ƒæ ˆ</a>ä¸­ï¼Œé€šè¿‡å•è°ƒæ ˆï¼Œå¯ä»¥æ±‚å¾—æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢ã€‚å¯¹äºè¿™é“é¢˜ï¼Œéœ€è¦å…ˆæŠŠçŸ©é˜µæŒ‰æ¯ä¸€è¡Œè¿ç»­çš„1å¤„ç†æˆæŸ±çŠ¶å›¾ï¼Œä¾‹å¦‚ä¸€è¡Œæ˜¯<code>1 0 1 1 1</code>ï¼Œå¤„ç†åå˜æˆ<code>1 0 1 2 3</code>ã€‚æ¥ä¸‹æ¥ï¼Œå°†æ¯ä¸€åˆ—è§†ä¸ºä¸€ä¸ªæŸ±çŠ¶å›¾ï¼Œè¿™é“é¢˜å¯ä»¥è§†ä¸ºå¯»æ‰¾æ‰€æœ‰åˆ—å¯¹åº”çš„æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§å­çŸ©å½¢ï¼Œå› æ­¤ï¼Œéœ€è¦éå†æ¯åˆ—æŸ±çŠ¶å›¾çš„æœ€å¤§å­çŸ©å½¢ï¼Œç„¶åæ±‚å¾—æœ€å¤§å€¼åè¿”å›ã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Solution</span> &#123;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    int maximalRectangle(<span class="hljs-title">vector</span>&lt;<span class="hljs-title">vector</span>&lt;<span class="hljs-title">char</span>&gt;&gt;&amp; <span class="hljs-title">matrix</span>) &#123;</span><br><span class="hljs-class">        int m=matrix.size(),n=matrix[0].size();</span><br><span class="hljs-class">        vector&lt;vector&lt;int&gt;&gt; a(<span class="hljs-title">m</span>,<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;(<span class="hljs-title">n</span>));</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">matrix</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>]==&#x27;1&#x27;)</span><br><span class="hljs-class">                    a[i][j]=(<span class="hljs-title">j</span>==0?0:<span class="hljs-title">a</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>-1])+1;</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        int res=0,area=0;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            vector&lt;int&gt; up(<span class="hljs-title">m</span>),down(<span class="hljs-title">m</span>);</span><br><span class="hljs-class">            stack&lt;int&gt; ust,dst;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                while(!<span class="hljs-title">ust</span>.<span class="hljs-title">empty</span>()&amp;&amp;a[ust.top()][j]&gt;=a[i][j])</span><br><span class="hljs-class">                    ust.pop();</span><br><span class="hljs-class">                up[i]=ust.empty()?-1:ust.top();</span><br><span class="hljs-class">                ust.push(<span class="hljs-title">i</span>);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=<span class="hljs-title">m</span>-1;<span class="hljs-title">i</span>&gt;=0;<span class="hljs-comment">--i)</span></span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                <span class="hljs-title">while</span>(!<span class="hljs-title">dst</span>.<span class="hljs-title">empty</span>()&amp;&amp;a[dst.top()][j]&gt;=a[i][j])</span><br><span class="hljs-class">                    dst.pop();</span><br><span class="hljs-class">                down[i]=dst.empty()?m:dst.top();</span><br><span class="hljs-class">                dst.push(<span class="hljs-title">i</span>);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                area=a[i][j]*(<span class="hljs-title">down</span>[<span class="hljs-title">i</span>]-<span class="hljs-title">up</span>[<span class="hljs-title">i</span>]-1);</span><br><span class="hljs-class">                res=max(<span class="hljs-title">res</span>,<span class="hljs-title">area</span>);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        return res;</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br><span class="hljs-class"></span><br></code></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"><a class="markdownIt-Anchor" href="#æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"></a> æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</h2><p><a href="https://leetcode.cn/problems/regular-expression-matching/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p><p>â€˜.â€™ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦<br />â€˜*â€™ åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ <br />æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² sçš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p><p>e.g.</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;aa&quot;</span>, p = <span class="hljs-string">&quot;a*&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼šå› ä¸º <span class="hljs-string">&#x27;*&#x27;</span> ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ <span class="hljs-string">&#x27;a&#x27;</span>ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² <span class="hljs-string">&quot;aa&quot;</span> å¯è¢«è§†ä¸º <span class="hljs-string">&#x27;a&#x27;</span> é‡å¤äº†ä¸€æ¬¡ã€‚<br><br>è¾“å…¥ï¼šs = <span class="hljs-string">&quot;ab&quot;</span>, p = <span class="hljs-string">&quot;.*&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼š<span class="hljs-string">&quot;.*&quot;</span> è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ<span class="hljs-string">&#x27;*&#x27;</span>ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ<span class="hljs-string">&#x27;.&#x27;</span>ï¼‰ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h3><p>ç”¨åˆ°åŠ¨æ€è§„åˆ’çš„æ€æƒ³ã€‚ç”¨dp[i][j]è¡¨ç¤ºsä¸­å‰iä¸ªå­—ç¬¦å’Œpä¸­å‰jä¸ªå­—ç¬¦æ˜¯å¦åŒ¹é…,æ¥ä¸‹æ¥åˆ†æƒ…å†µè®¨è®º</p><ul><li>å½“s[i]å’Œp[j]åŒ¹é…æ—¶<code>(s[i-1]=p[j-1]æˆ–è€…p[j-1]=='.')</code>ï¼Œ<code>dp[i][j]=dp[i-1][j-1]</code></li><li>å¦åˆ™ï¼Œå¦‚æœp[j]å½“å‰å­—ç¬¦p[j-1]==â€˜*â€™<ul><li>å¦‚æœs[i]å’Œp[j]çš„å‰ä¸€ä¸ªå­—ç¬¦åŒ¹é…<code>(s[i-1]=p[j-2]æˆ–è€…p[j-2]=='.')</code>ï¼Œæ­¤æ—¶å¯ä»¥åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªs[i]ï¼Œä¹Ÿå¯ä»¥ä¸åŒ¹é…s[i]ï¼ŒçŠ¶æ€æ–¹ç¨‹ä¸º<code>dp[i][j]=dp[i][j-2]||dp[i-1][j]</code></li><li>å¦‚æœs[i]å’Œp[j]çš„å‰ä¸€ä¸ªå­—ç¬¦ä¸åŒ¹é…ï¼Œé‚£ä¹ˆä¸åŒ¹é…s[i]ï¼Œ<code>dp[i][j]=dp[i][j-2]</code></li></ul></li></ul><p>æ€»çš„çŠ¶æ€æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi></mrow><msup><mrow><mo fence="true">(</mo><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo mathvariant="normal">â‰ </mo></mrow><mo lspace="0em" rspace="0em">âˆ—</mo></msup><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">f</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi></mrow><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi></mrow><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mrow><mtext>Â </mtext><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mtext>Â </mtext></mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f[i][j]=\begin{cases}\mathrm{if}\left(p[j]\neq\right.^{*})=\begin{cases}f[i-1][j-1],&amp;matches(s[i],p[j])\\\mathrm{false},&amp;\mathrm{otherwise}&amp;\end{cases}\\\mathrm{otherwise}=\begin{cases}f[i-1][j]\mathrm{~or~}f[i][j-2],&amp;matches(s[i],p[j-1])\\f[i][j-2],&amp;\mathrm{otherwise}&amp;\end{cases}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:6.0000599999999995em;vertical-align:-2.7500299999999998em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500200000000006em;"><span style="top:-1.2999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-1.2949899999999999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-1.58999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-1.8849900000000002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-2.17999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-2.2049900000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.29501em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-4.59001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-4.885010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-5.180010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-5.205010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>âª</span></span></span><span style="top:-5.50002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500299999999998em;"><span style="top:-5.25003em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">i</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel">î€ </span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mclose nulldelimiter"></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.828596em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ—</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mord mathrm">a</span><span class="mord mathrm">l</span><span class="mord mathrm">s</span><span class="mord mathrm">e</span></span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">o</span><span class="mord mathrm">t</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm" style="margin-right:0.01389em;">w</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span><span class="mord mathrm">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">o</span><span class="mord mathrm">t</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm" style="margin-right:0.01389em;">w</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span><span class="mord mathrm">e</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mord"><span class="mspace nobreak">Â </span><span class="mord mathrm">o</span><span class="mord mathrm">r</span><span class="mspace nobreak">Â </span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">o</span><span class="mord mathrm">t</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm" style="margin-right:0.01389em;">w</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span><span class="mord mathrm">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500299999999998em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span> &#123;<br>public:<br>    bool isMatch(string s, string p) &#123;<br>        int m = s.size();<br>        int n = p.size(); <br>        vector&lt;vector&lt;bool&gt;&gt; dp(m+<span class="hljs-number">1</span>,vector&lt;bool&gt;(n+<span class="hljs-number">1</span>,false));<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = true;<br>        //åˆå§‹åŒ–dp,åŒ¹é…ç©ºä¸²æ—¶,*å¯ä»¥æ¶ˆé™¤å‰ä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤çŠ¶æ€ä¸å‰å‰ä¸€ä¸ªçŠ¶æ€ç›¸ç­‰<br>        for(int j =<span class="hljs-number">2</span>;j &lt;=n ;j++)<br>        &#123;<br>            if(p[j<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;*&#x27;</span>)<br>                dp[<span class="hljs-number">0</span>][j]=dp[<span class="hljs-number">0</span>][j<span class="hljs-number">-2</span>];<br>        &#125;<br>        function&lt;bool(int,int)&gt; match=[&amp;](int i,int j)&#123;<br>            if(s[i<span class="hljs-number">-1</span>]==p[j<span class="hljs-number">-1</span>]||p[j<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;.&#x27;</span>)<br>                return true;<br>            return false;<br>        &#125;;<br>        for (int i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        &#123;<br>            for (int j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>            &#123;<br>                //å¦‚æœå½“å‰s[i]å’Œp[j]åŒ¹é…,åˆ™ä¸ä¸Šä¸€ä¸ªçŠ¶æ€ç›¸ç­‰<br>                if (match(i,j))<br>                        dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]; <br>                else if (p[j - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;*&#x27;</span>)//å¦‚æœå½“å‰p[j]ä¸º*<br>                &#123;<br>                    if(match(i,j<span class="hljs-number">-1</span>))//å¦‚æœ*å‰é¢çš„å­—ç¬¦å¯ä»¥åŒ¹é…s[i]<br>                        //åŒ¹é…<span class="hljs-number">0</span>æ¬¡ï¼šdp[i][j<span class="hljs-number">-2</span>],ç›¸å½“äºåˆ é™¤*å‰é¢çš„å­—ç¬¦<br>                        //åŒ¹é…<span class="hljs-number">1</span>æ¬¡æˆ–ä»¥ä¸Šï¼šdp[i<span class="hljs-number">-1</span>][j]<br>                        dp[i][j]=dp[i][j<span class="hljs-number">-2</span>]||dp[i<span class="hljs-number">-1</span>][j];<br>                    else//ç›¸å½“äºåŒ¹é…äº†<span class="hljs-number">0</span>æ¬¡<br>                        dp[i][j]=dp[i][j<span class="hljs-number">-2</span>];<br>                &#125;      <br>            &#125;<br>        &#125;<br>        return dp[m][n];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çŸ©é˜µæ‰“å°é—®é¢˜</title>
    <link href="/2023/10/19/%E7%9F%A9%E9%98%B5%E6%89%93%E5%8D%B0%E9%97%AE%E9%A2%98/"/>
    <url>/2023/10/19/%E7%9F%A9%E9%98%B5%E6%89%93%E5%8D%B0%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%9F%A9%E9%98%B5%E6%89%93%E5%8D%B0%E9%97%AE%E9%A2%98">çŸ©é˜µæ‰“å°é—®é¢˜</a><ul><li><a href="#%E4%B8%8A%E4%B8%89%E8%A7%92%E9%98%B5">ä¸Šä¸‰è§’é˜µ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5%E4%B8%80">èºæ—‹çŸ©é˜µä¸€</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li><li><a href="#%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5%E4%BA%8C">èºæ—‹çŸ©é˜µäºŒ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-2">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-2">ä»£ç </a></li></ul></li><li><a href="#z%E5%AD%97%E5%9E%8B%E8%9B%87%E5%9E%8B">Zå­—å‹(è›‡å‹)</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-3">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-3">ä»£ç </a></li></ul></li></ul></li></ul><!-- /TOC --><h2 id="çŸ©é˜µæ‰“å°é—®é¢˜"><a class="markdownIt-Anchor" href="#çŸ©é˜µæ‰“å°é—®é¢˜"></a> çŸ©é˜µæ‰“å°é—®é¢˜</h2><h3 id="ä¸Šä¸‰è§’é˜µ"><a class="markdownIt-Anchor" href="#ä¸Šä¸‰è§’é˜µ"></a> ä¸Šä¸‰è§’é˜µ</h3><p><a href="https://www.nowcoder.com/practice/649b210ef44446e3b1cd1be6fa4cab5e?tpId=37&amp;tqId=21258&amp;ru=/exam/oj">åŸé¢˜</a></p><h4 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h4><p>è¾“å…¥æè¿°ï¼š<br />è¾“å…¥æ­£æ•´æ•°Nï¼ˆNä¸å¤§äº100ï¼‰</p><p>è¾“å‡ºæè¿°ï¼š<br />è¾“å‡ºä¸€ä¸ªNè¡Œçš„ä¸Šä¸‰è§’çŸ©é˜µ</p><p>input</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><p>output</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">5</span> <span class="hljs-number">9</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">8</span><br><span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h4 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h4><p>æ ¹æ®é¢˜ç›®æè¿°ï¼Œè¾“å‡ºä¸Šä¸‰è§’é˜µåªç”¨è€ƒè™‘å³ä¸Šæ–¹å‘ï¼Œå› æ­¤æ¯è¾“å‡ºä¸€ä¸ªæ•°å°±<code>--i,++j</code>ï¼Œè¶…å‡ºä¸Šè¾¹ç•Œ(i&lt;0)æ—¶ï¼Œå°†jç½®ä¸º0ï¼Œç„¶åæ›´æ–°içš„èµ·å§‹ç‚¹å³å¯ã€‚</p><h4 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>int a[101][101];<br>int main()<br>&#123;<br>    int n;<br>    cin&gt;&gt;n;<br>    int num=(n+1)*n/2;<br>    int <span class="hljs-attribute">cnt</span>=0,i=0,j=0,pre=0,k=1;<br>    <br>    <span class="hljs-keyword">while</span>(cnt&lt;num)<br>    &#123;<br>        a[i][j]=k++;<br>        ++cnt;<br>        --i;++j;<br>        <span class="hljs-keyword">if</span>(i&lt;0)<br>        &#123;<br>            <span class="hljs-attribute">j</span>=0;<br>            <span class="hljs-attribute">i</span>=pre+1;<br>            <span class="hljs-attribute">pre</span>=i;<br>        &#125;<br>    &#125;<br>    int <span class="hljs-attribute">nn</span>=n;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;nn;++j)<br>            cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>        --nn;<br>        cout&lt;&lt;endl;<br>    &#125;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="èºæ—‹çŸ©é˜µä¸€"><a class="markdownIt-Anchor" href="#èºæ—‹çŸ©é˜µä¸€"></a> èºæ—‹çŸ©é˜µä¸€</h3><p><a href="https://leetcode.cn/problems/spiral-matrix/description/">åŸé¢˜</a></p><h4 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h4><p>ç»™ä½ ä¸€ä¸ª m è¡Œ n åˆ—çš„çŸ©é˜µ matrix ï¼Œè¯·æŒ‰ç…§ é¡ºæ—¶é’ˆèºæ—‹é¡ºåº ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,2,3]</span>,<span class="hljs-comment">[4,5,6]</span>,<span class="hljs-comment">[7,8,9]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2,3,6,9,8,7,4,5]</span><br></code></pre></td></tr></table></figure><h4 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h4><p>è¿™é“é¢˜é¦–å…ˆè¦è®¾ç½®ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹ç•Œï¼Œç„¶åæŒ‰ç…§ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦ï¼Œå››ä¸ªè¾¹ç•Œæ‰“å°ï¼Œæ¯ä¾¿åˆ©å®Œä¸€ä¸ªè¾¹ç•Œåˆ¤æ–­ä¸€ä¸‹è¾¹ç•Œæœ‰æ²¡æœ‰è¶Šç•Œ<br />ä¾‹å¦‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">for</span>(int i=l;i&lt;=r;++i)<br>    cout&lt;&lt;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[u]</span><span class="hljs-selector-attr">[i]</span>;<br><span class="hljs-built_in">if</span>(++u&gt;d) break;<br></code></pre></td></tr></table></figure><h4 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h4><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; spiralOrder(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">matrix</span>) &#123;<br>        <span class="hljs-keyword">int</span> m=<span class="hljs-keyword">matrix</span>.<span class="hljs-keyword">size</span>(),n=<span class="hljs-keyword">matrix</span>[<span class="hljs-number">0</span>].<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>,r=n<span class="hljs-number">-1</span>,u=<span class="hljs-number">0</span>,d=m<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; ans;<br>        <span class="hljs-keyword">while</span>(true)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=l;i&lt;=r;++i)<br>                ans.push_back(<span class="hljs-keyword">matrix</span>[u][i]);<br>            <span class="hljs-keyword">if</span>(++u&gt;d) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=u;i&lt;=d;++i)<br>                ans.push_back(<span class="hljs-keyword">matrix</span>[i][r]);<br>            <span class="hljs-keyword">if</span>(--r&lt;l) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=r;i&gt;=l;--i)<br>                ans.push_back(<span class="hljs-keyword">matrix</span>[d][i]);<br>            <span class="hljs-keyword">if</span>(--d&lt;u) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=d;i&gt;=u;--i)<br>                ans.push_back(<span class="hljs-keyword">matrix</span>[i][l]);<br>            <span class="hljs-keyword">if</span>(++l&gt;r) <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="èºæ—‹çŸ©é˜µäºŒ"><a class="markdownIt-Anchor" href="#èºæ—‹çŸ©é˜µäºŒ"></a> èºæ—‹çŸ©é˜µäºŒ</h3><p><a href="https://leetcode.cn/problems/spiral-matrix-iii/description/">åŸé¢˜</a></p><h4 id="é¢˜ç›®æè¿°-3"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-3"></a> é¢˜ç›®æè¿°</h4><p>åœ¨ rows x cols çš„ç½‘æ ¼ä¸Šï¼Œä½ ä»å•å…ƒæ ¼ (rStart, cStart) é¢æœä¸œé¢å¼€å§‹ã€‚ç½‘æ ¼çš„è¥¿åŒ—è§’ä½äºç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼Œç½‘æ ¼çš„ä¸œå—è§’ä½äºæœ€åä¸€è¡Œæœ€åä¸€åˆ—ã€‚</p><p>ä½ éœ€è¦ä»¥é¡ºæ—¶é’ˆæŒ‰èºæ—‹çŠ¶è¡Œèµ°ï¼Œè®¿é—®æ­¤ç½‘æ ¼ä¸­çš„æ¯ä¸ªä½ç½®ã€‚æ¯å½“ç§»åŠ¨åˆ°ç½‘æ ¼çš„è¾¹ç•Œä¹‹å¤–æ—¶ï¼Œéœ€è¦ç»§ç»­åœ¨ç½‘æ ¼ä¹‹å¤–è¡Œèµ°ï¼ˆä½†ç¨åå¯èƒ½ä¼šè¿”å›åˆ°ç½‘æ ¼è¾¹ç•Œï¼‰ã€‚</p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬åˆ°è¿‡ç½‘æ ¼çš„æ‰€æœ‰ rows x cols ä¸ªç©ºé—´ã€‚</p><p>æŒ‰ç…§è®¿é—®é¡ºåºè¿”å›è¡¨ç¤ºç½‘æ ¼ä½ç½®çš„åæ ‡åˆ—è¡¨ã€‚<br />e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šrows = 5, cols = 6, rStart = 1, cStart = 4<br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[1,4]</span>,<span class="hljs-comment">[1,5]</span>,<span class="hljs-comment">[2,5]</span>,<span class="hljs-comment">[2,4]</span>,<span class="hljs-comment">[2,3]</span>,<span class="hljs-comment">[1,3]</span>,<span class="hljs-comment">[0,3]</span>,<span class="hljs-comment">[0,4]</span>,<span class="hljs-comment">[0,5]</span>,<span class="hljs-comment">[3,5]</span>,<span class="hljs-comment">[3,4]</span>,<span class="hljs-comment">[3,3]</span>,<span class="hljs-comment">[3,2]</span>,<span class="hljs-comment">[2,2]</span>,<span class="hljs-comment">[1,2]</span>,<span class="hljs-comment">[0,2]</span>,<span class="hljs-comment">[4,5]</span>,<span class="hljs-comment">[4,4]</span>,<span class="hljs-comment">[4,3]</span>,<span class="hljs-comment">[4,2]</span>,<span class="hljs-comment">[4,1]</span>,<span class="hljs-comment">[3,1]</span>,<span class="hljs-comment">[2,1]</span>,<span class="hljs-comment">[1,1]</span>,<span class="hljs-comment">[0,1]</span>,<span class="hljs-comment">[4,0]</span>,<span class="hljs-comment">[3,0]</span>,<span class="hljs-comment">[2,0]</span>,<span class="hljs-comment">[1,0]</span>,<span class="hljs-comment">[0,0]</span>]</span><br></code></pre></td></tr></table></figure><h4 id="æ€è·¯-3"><a class="markdownIt-Anchor" href="#æ€è·¯-3"></a> æ€è·¯</h4><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯ä»ä¸­å¿ƒå‘å››å‘¨éå†èºæ—‹æ–¹é˜µï¼Œç„¶åè¾“å‡ºåœ¨çŸ©é˜µå†…çš„æ•°ã€‚<br />é¦–å…ˆæ ¹æ®èµ·å§‹ç‚¹çš„åæ ‡ï¼Œåˆå§‹åŒ–ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹ç•Œ(èµ·å§‹ç‚¹å‘¨å›´ç¬¬ä¸€å±‚æ•°)ï¼Œå¹¶åˆå§‹åŒ–æ–¹å‘ä¸ºå³(0,1,2,3å››ä¸ªæ–¹å‘)<br />æ¥ä¸‹æ¥åˆ†æƒ…å†µè®¨è®ºï¼š</p><ul><li>å¦‚æœæ–¹å‘å‘å³ä¸”å·²ç»åˆ°è¾¾å³è¾¹ç•Œï¼Œå³è¾¹ç•Œ+1ï¼Œæ–¹å‘è½¬ä¸ºå‘ä¸‹</li><li>å¦‚æœæ–¹å‘å‘ä¸‹ä¸”å·²ç»åˆ°è¾¾ä¸‹è¾¹ç•Œï¼Œä¸‹è¾¹ç•Œ+1ï¼Œæ–¹å‘è½¬ä¸ºå‘å·¦</li><li>å¦‚æœæ–¹å‘å‘å·¦ä¸”å·²ç»åˆ°è¾¾å·¦è¾¹ç•Œï¼Œå·¦è¾¹ç•Œ-1ï¼Œæ–¹å‘è½¬ä¸ºå‘ä¸Š</li><li>å¦‚æœæ–¹å‘å‘ä¸Šä¸”å·²ç»åˆ°è¾¾ä¸Šè¾¹ç•Œï¼Œä¸Šè¾¹ç•Œ-1ï¼Œæ–¹å‘è½¬ä¸ºå‘å³</li><li>æ ¹æ®å½“å‰æ–¹å‘æ›´æ–°åæ ‡</li></ul><p>æ‰“å°æ—¶åªéœ€è¦åˆ¤æ–­å½“å‰åæ ‡åœ¨çŸ©é˜µå†…å³å¯æ‰“å°</p><h4 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">spiralMatrixIII</span>(<span class="hljs-type">int</span> rows, <span class="hljs-type">int</span> cols, <span class="hljs-type">int</span> rStart, <span class="hljs-type">int</span> cStart) &#123;<br>        <span class="hljs-type">int</span> dir[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]=&#123;&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;,&#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;&#125;;<br>        <span class="hljs-type">int</span> cnt=<span class="hljs-number">0</span>,di=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> i=rStart,j=cStart,l=cStart<span class="hljs-number">-1</span>,r=cStart+<span class="hljs-number">1</span>,u=rStart<span class="hljs-number">-1</span>,d=rStart+<span class="hljs-number">1</span>;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br>        <span class="hljs-keyword">while</span>(cnt&lt;rows*cols)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&gt;=<span class="hljs-number">0</span>&amp;&amp;i&lt;rows&amp;&amp;j&gt;=<span class="hljs-number">0</span>&amp;&amp;j&lt;cols)<br>            &#123;<br>                ans.<span class="hljs-built_in">push_back</span>(&#123;i,j&#125;);<br>                ++cnt;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(di==<span class="hljs-number">0</span>&amp;&amp;j==r)<br>            &#123;<br>                di=(di+<span class="hljs-number">1</span>)%<span class="hljs-number">4</span>;<br>                ++r;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(di==<span class="hljs-number">1</span>&amp;&amp;i==d)<br>            &#123;<br>                di=(di+<span class="hljs-number">1</span>)%<span class="hljs-number">4</span>;<br>                ++d;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(di==<span class="hljs-number">2</span>&amp;&amp;j==l)<br>            &#123;<br>                di=(di+<span class="hljs-number">1</span>)%<span class="hljs-number">4</span>;<br>                --l;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(di==<span class="hljs-number">3</span>&amp;&amp;i==u)<br>            &#123;<br>                di=(di+<span class="hljs-number">1</span>)%<span class="hljs-number">4</span>;<br>                --u;<br>            &#125;<br>            i+=dir[di][<span class="hljs-number">0</span>];<br>            j+=dir[di][<span class="hljs-number">1</span>];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="zå­—å‹è›‡å‹"><a class="markdownIt-Anchor" href="#zå­—å‹è›‡å‹"></a> Zå­—å‹(è›‡å‹)</h3><p><a href="https://www.acwing.com/problem/content/description/3211/">åŸé¢˜</a></p><h4 id="é¢˜ç›®æè¿°-4"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-4"></a> é¢˜ç›®æè¿°</h4><p>å¯¹äºä¸‹é¢çš„ 4Ã—4çš„çŸ©é˜µï¼Œ</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">9</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">7</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>å¯¹å…¶è¿›è¡Œ Zå­—å½¢æ‰«æåå¾—åˆ°é•¿åº¦ä¸º16çš„åºåˆ—ï¼š1 5 3 9 7 3 9 5 4 7 3 6 6 4 1 3ã€‚<br />è¯·å®ç°ä¸€ä¸ªZå­—å½¢æ‰«æçš„ç¨‹åºï¼Œç»™å®šä¸€ä¸ª nÃ—nçš„çŸ©é˜µï¼Œè¾“å‡ºå¯¹è¿™ä¸ªçŸ©é˜µè¿›è¡Œ Zå­—å½¢æ‰«æçš„ç»“æœã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">9</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">7</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">9</span> <span class="hljs-number">7</span> <span class="hljs-number">3</span> <span class="hljs-number">9</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">7</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h4 id="æ€è·¯-4"><a class="markdownIt-Anchor" href="#æ€è·¯-4"></a> æ€è·¯</h4><p>ä¸€å…±æœ‰ä¸¤ç§æ–¹å‘ï¼Œå³ä¸Šæˆ–è€…å·¦ä¸‹ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ªflagï¼Œå½“flagä¸ºtrueæ—¶è¡¨ç¤ºå³ä¸Šï¼Œå¦åˆ™è¡¨ç¤ºå·¦ä¸‹ï¼Œåˆå§‹åŒ–æ–¹å‘ä¸ºå³ä¸Šã€‚</p><ul><li>æ¯å½“åæ ‡i,jåœ¨çŸ©é˜µèŒƒå›´å†…ï¼Œå°±æ‰“å°è¯¥ä½ç½®çš„å€¼</li><li>æ¯æ‰“å°ä¸€ä¸ªå€¼ï¼Œæ ¹æ®æ–¹å‘æ›´æ”¹åæ ‡i,jçš„å€¼</li><li>å¦‚æœi&lt;0ï¼Œiç½®ä¸º0ï¼Œæ–¹å‘å–åï¼Œå¦‚æœj&lt;0ï¼Œjç½®ä¸º0ï¼Œæ–¹å‘å–åã€‚</li></ul><p>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ‰“å°å‡ºæ‰€æœ‰å…ƒç´ </p><h4 id="ä»£ç -4"><a class="markdownIt-Anchor" href="#ä»£ç -4"></a> ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">501</span>;<br><span class="hljs-type">int</span> a[N][N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>     <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            cin&gt;&gt;a[i][j];<br>    &#125;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>,cnt=<span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//true å³ä¸Šï¼Œfalseå·¦ä¸‹</span><br>    <span class="hljs-type">bool</span> flag=<span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">while</span>(cnt&lt;n*n)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(i&lt;n&amp;&amp;j&lt;n)<br>        &#123;<br>            cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>            ++cnt;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(flag)<br>        &#123;<br>            --i;++j;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            ++i;--j;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(i&lt;<span class="hljs-number">0</span>)<br>        &#123;<br>            i=<span class="hljs-number">0</span>;<br>            flag=!flag;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(j&lt;<span class="hljs-number">0</span>)<br>        &#123;<br>            j=<span class="hljs-number">0</span>;<br>            flag=!flag;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç§»åŠ¨æœºå™¨äºº</title>
    <link href="/2023/10/17/%E7%A7%BB%E5%8A%A8%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    <url>/2023/10/17/%E7%A7%BB%E5%8A%A8%E6%9C%BA%E5%99%A8%E4%BA%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="ç§»åŠ¨æœºå™¨äºº"><a class="markdownIt-Anchor" href="#ç§»åŠ¨æœºå™¨äºº"></a> ç§»åŠ¨æœºå™¨äºº</h2><p><a href="https://leetcode.cn/problems/movement-of-robots/?envType=daily-question&amp;envId=2023-10-10">åŸé¢˜</a></p><h2 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h2><p>æœ‰ä¸€äº›æœºå™¨äººåˆ†å¸ƒåœ¨ä¸€æ¡æ— é™é•¿çš„æ•°è½´ä¸Šï¼Œä»–ä»¬åˆå§‹åæ ‡ç”¨ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums è¡¨ç¤ºã€‚å½“ä½ ç»™æœºå™¨äººä¸‹è¾¾å‘½ä»¤æ—¶ï¼Œå®ƒä»¬ä»¥æ¯ç§’é’Ÿä¸€å•ä½çš„é€Ÿåº¦å¼€å§‹ç§»åŠ¨ã€‚</p><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ¯ä¸ªå­—ç¬¦æŒ‰é¡ºåºåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªæœºå™¨äººç§»åŠ¨çš„æ–¹å‘ã€‚â€˜Lâ€™ è¡¨ç¤ºæœºå™¨äººå¾€å·¦æˆ–è€…æ•°è½´çš„è´Ÿæ–¹å‘ç§»åŠ¨ï¼Œâ€˜Râ€™ è¡¨ç¤ºæœºå™¨äººå¾€å³æˆ–è€…æ•°è½´çš„æ­£æ–¹å‘ç§»åŠ¨ã€‚</p><p>å½“ä¸¤ä¸ªæœºå™¨äººç›¸æ’æ—¶ï¼Œå®ƒä»¬å¼€å§‹æ²¿ç€åŸæœ¬ç›¸åçš„æ–¹å‘ç§»åŠ¨ã€‚</p><p>è¯·ä½ è¿”å›æŒ‡ä»¤é‡å¤æ‰§è¡Œ d ç§’åï¼Œæ‰€æœ‰æœºå™¨äººä¹‹é—´ä¸¤ä¸¤è·ç¦»ä¹‹å’Œã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·ä½ å°†ç­”æ¡ˆå¯¹ 109 + 7 å–ä½™åè¿”å›ã€‚</p><p>æ³¨æ„ï¼š</p><p>å¯¹äºåæ ‡åœ¨ i å’Œ j çš„ä¸¤ä¸ªæœºå™¨äººï¼Œ(i,j) å’Œ (j,i) è§†ä¸ºç›¸åŒçš„åæ ‡å¯¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœºå™¨äººè§†ä¸ºæ— å·®åˆ«çš„ã€‚<br />å½“æœºå™¨äººç›¸æ’æ—¶ï¼Œå®ƒä»¬ ç«‹å³æ”¹å˜ å®ƒä»¬çš„å‰è¿›æ–¹å‘ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸æ¶ˆè€—ä»»ä½•æ—¶é—´ã€‚<br />å½“ä¸¤ä¸ªæœºå™¨äººåœ¨åŒä¸€æ—¶åˆ»å æ®ç›¸åŒçš„ä½ç½®æ—¶ï¼Œå°±ä¼šç›¸æ’ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 0 å¹¶å¾€å³ç§»åŠ¨ï¼Œå¦ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 2 å¹¶å¾€å·¦ç§»åŠ¨ï¼Œä¸‹ä¸€ç§’ï¼Œå®ƒä»¬éƒ½å°†å æ®ä½ç½® 1ï¼Œå¹¶æ”¹å˜æ–¹å‘ã€‚å†ä¸‹ä¸€ç§’é’Ÿåï¼Œç¬¬ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 0 å¹¶å¾€å·¦ç§»åŠ¨ï¼Œè€Œå¦ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 2 å¹¶å¾€å³ç§»åŠ¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 0 å¹¶å¾€å³ç§»åŠ¨ï¼Œå¦ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 1 å¹¶å¾€å·¦ç§»åŠ¨ï¼Œä¸‹ä¸€ç§’ï¼Œç¬¬ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 0 å¹¶å¾€å·¦è¡Œé©¶ï¼Œè€Œå¦ä¸€ä¸ªæœºå™¨äººä½äºä½ç½® 1 å¹¶å¾€å³ç§»åŠ¨ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[1,0]</span>, s = <span class="hljs-string">&quot;RL&quot;</span>, d = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br>è§£é‡Šï¼š<br><span class="hljs-number">1</span> ç§’åï¼Œæœºå™¨äººçš„ä½ç½®ä¸º <span class="hljs-selector-attr">[2,-1]</span> ã€‚<br><span class="hljs-number">2</span> ç§’åï¼Œæœºå™¨äººçš„ä½ç½®ä¸º <span class="hljs-selector-attr">[3,-2]</span> ã€‚<br>ä¸¤ä¸ªæœºå™¨äººçš„è·ç¦»ä¸º <span class="hljs-built_in">abs</span>(-<span class="hljs-number">2</span> - <span class="hljs-number">3</span>) = <span class="hljs-number">5</span> ã€‚<br></code></pre></td></tr></table></figure><h2 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h2><p>å¯ä»¥çœ‹ä½œæœºå™¨äººç›¸æ’åç©¿é€äº†å¯¹æ–¹ï¼Œç„¶åå¯ä»¥ç›´æ¥è®¡ç®—å‡ºæ¯ä¸ªæœºå™¨äººdç§’åçš„ä½ç½®pos[]ï¼Œæ¥ä¸‹æ¥è®¡ç®—ä¸¤ä¸¤ä¹‹å’Œã€‚</p><p>å¯¹äºç¬¬iä¸ªæœºå™¨äººï¼Œä»–çš„å·¦è¾¹æœ‰iä¸ªæœºå™¨äººï¼Œå³è¾¹æœ‰n-iä¸ªæœºå™¨äººï¼Œåœ¨è®¡ç®—å·¦å³ä¸¤è¾¹çš„è·ç¦»å’Œæ—¶ï¼Œ<code>pos[i]-pos[i-1]</code>è¿™æ®µè·ç¦»è¢«è®¡ç®—äº†<code>i*(n-i)</code>æ¬¡ï¼Œå› æ­¤å°†æ‰€æœ‰çš„è·ç¦»ç´¯åŠ å³å¯ã€‚</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sumDistance</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, string s, <span class="hljs-type">int</span> d)</span> </span>&#123;<br>        <span class="hljs-type">int</span> mod=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;ll&gt; <span class="hljs-title">pos</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;R&#x27;</span>)<br>                pos[i]=(ll)nums[i]+d;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;L&#x27;</span>)<br>                pos[i]=(ll)nums[i]-d;<br>        &#125;<br>        <span class="hljs-built_in">sort</span>(pos.<span class="hljs-built_in">begin</span>(),pos.<span class="hljs-built_in">end</span>());<br>        ll ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;++i)<br>        &#123;<br>            ans+=(pos[i]-pos[i<span class="hljs-number">-1</span>])*i%mod*(n-i)%mod;<br>            ans%=mod;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­—ç¬¦ä¸²</title>
    <link href="/2023/10/16/%E6%9C%80%E7%9F%AD%E4%B8%94%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E7%BE%8E%E4%B8%BD%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2023/10/16/%E6%9C%80%E7%9F%AD%E4%B8%94%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E7%BE%8E%E4%B8%BD%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E7%9F%AD%E4%B8%94%E5%AD%97%E5%85%B8%E5%BA%8F%E6%9C%80%E5%B0%8F%E7%9A%84%E7%BE%8E%E4%B8%BD%E5%AD%97%E7%AC%A6%E4%B8%B2">æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­—ç¬¦ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0"><strong>é¢˜ç›®æè¿°</strong></a></li><li><a href="#%E6%80%9D%E8%B7%AF"><strong>æ€è·¯</strong></a></li><li><a href="#%E4%BB%A3%E7%A0%81"><strong>ä»£ç </strong></a></li></ul></li><li><a href="#%E6%89%BE%E5%87%BA%E6%BB%A1%E8%B6%B3%E5%B7%AE%E5%80%BC%E6%9D%A1%E4%BB%B6%E7%9A%84%E4%B8%8B%E6%A0%87">æ‰¾å‡ºæ»¡è¶³å·®å€¼æ¡ä»¶çš„ä¸‹æ ‡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1"><strong>é¢˜ç›®æè¿°</strong></a></li><li><a href="#%E6%80%9D%E8%B7%AF-1"><strong>æ€è·¯</strong></a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­—ç¬¦ä¸²"></a> æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­—ç¬¦ä¸²</h2><p><a href="https://leetcode.cn/problems/shortest-and-lexicographically-smallest-beautiful-string/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> <strong>é¢˜ç›®æè¿°</strong></h3><p>ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ­£æ•´æ•° k ã€‚</p><p>å¦‚æœ s çš„æŸä¸ªå­å­—ç¬¦ä¸²ä¸­ 1 çš„ä¸ªæ•°æ°å¥½ç­‰äº k ï¼Œåˆ™ç§°è¿™ä¸ªå­å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª ç¾ä¸½å­å­—ç¬¦ä¸² ã€‚</p><p>ä»¤ len ç­‰äº æœ€çŸ­ ç¾ä¸½å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p><p>è¿”å›é•¿åº¦ç­‰äº len ä¸”å­—å…¸åº æœ€å° çš„ç¾ä¸½å­å­—ç¬¦ä¸²ã€‚å¦‚æœ s ä¸­ä¸å«ç¾ä¸½å­å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ä¸€ä¸ª ç©º å­—ç¬¦ä¸²ã€‚</p><p>å¯¹äºç›¸åŒé•¿åº¦çš„ä¸¤ä¸ªå­—ç¬¦ä¸² a å’Œ b ï¼Œå¦‚æœåœ¨ a å’Œ b å‡ºç°ä¸åŒçš„ç¬¬ä¸€ä¸ªä½ç½®ä¸Šï¼Œa ä¸­è¯¥ä½ç½®ä¸Šçš„å­—ç¬¦ä¸¥æ ¼å¤§äº b ä¸­çš„å¯¹åº”å­—ç¬¦ï¼Œåˆ™è®¤ä¸ºå­—ç¬¦ä¸² a å­—å…¸åº å¤§äº å­—ç¬¦ä¸² b ã€‚</p><p>ä¾‹å¦‚ï¼Œâ€œabcdâ€ çš„å­—å…¸åºå¤§äº â€œabccâ€ ï¼Œå› ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²å‡ºç°ä¸åŒçš„ç¬¬ä¸€ä¸ªä½ç½®å¯¹åº”ç¬¬å››ä¸ªå­—ç¬¦ï¼Œè€Œ d å¤§äº c ã€‚</p><p>e.g.</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;1011&quot;</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;11&quot;</span><br>è§£é‡Šï¼šç¤ºä¾‹ä¸­å…±æœ‰ <span class="hljs-number">3</span> ä¸ªç¾ä¸½å­å­—ç¬¦ä¸²ï¼š<br><span class="hljs-number">1</span>. å­å­—ç¬¦ä¸² <span class="hljs-string">&quot;1011&quot;</span> ã€‚<br><span class="hljs-number">2</span>. å­å­—ç¬¦ä¸² <span class="hljs-string">&quot;1011&quot;</span> ã€‚<br><span class="hljs-number">3</span>. å­å­—ç¬¦ä¸² <span class="hljs-string">&quot;1011&quot;</span> ã€‚<br>æœ€çŸ­ç¾ä¸½å­å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯ <span class="hljs-number">2</span> ã€‚<br>é•¿åº¦ä¸º <span class="hljs-number">2</span> ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­å­—ç¬¦ä¸²æ˜¯å­å­—ç¬¦ä¸² <span class="hljs-string">&quot;11&quot;</span> ã€‚ <br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> <strong>æ€è·¯</strong></h3><p>æ­¤é¢˜ä¸»è¦ä½¿ç”¨åŒæŒ‡é’ˆåŠ æ»‘åŠ¨çª—å£è§£å†³ï¼Œå®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ<code>l,r</code>ï¼Œç„¶åç”¨cntç»Ÿè®¡<code>1</code>çš„ä¸ªæ•°ï¼Œç”¨réå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰å…ƒç´ æ˜¯<code>1</code>é‚£ä¹ˆ<code>cnt++</code>ï¼Œç„¶åå¼€å§‹ç¼©å°çª—å£ï¼Œå½“<code>cnt&gt;k||s[l]=='0'</code>æ—¶ï¼Œ<code>--l</code>ï¼Œæ­¤æ—¶å¦‚æœ<code>cnt==k</code>ï¼Œå¦‚æœå½“å‰å­ä¸²<code>l~r</code>ä¹‹é—´çš„å­ä¸²å°äºresçš„é•¿åº¦ï¼Œæˆ–è€…é•¿åº¦ç›¸ç­‰å­—å…¸åºå°äºresï¼Œé‚£ä¹ˆæ›´æ–°resä¸ºå½“å‰å­ä¸²ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> <strong>ä»£ç </strong></h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    string shortestBeautifulSubstring(string s, int k) &#123;<br>        <span class="hljs-keyword">if</span>(count(s.begin(),s.end(),<span class="hljs-string">&#x27;1&#x27;</span>)&lt;k)<br>            return <span class="hljs-string">&quot;&quot;</span>;<br>        int <span class="hljs-attribute">n</span>=s.size();<br>        int <span class="hljs-attribute">l</span>=0,r=0;<br>        string <span class="hljs-attribute">res</span>=s;<br>        int <span class="hljs-attribute">cnt</span>=0;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-attribute">r</span>=0;r&lt;n;++r)<br>        &#123;   <br>            cnt+=s[r]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>            <span class="hljs-keyword">while</span>(cnt&gt;k||s[l]==<span class="hljs-string">&#x27;0&#x27;</span>)<br>            &#123;<br>                <span class="hljs-attribute">cnt-</span>=s[l]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>                ++l;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-attribute">cnt</span>==k)<br>            &#123;<br>                string <span class="hljs-attribute">t</span>=s.substr(l,r-l+1);<br>                <span class="hljs-keyword">if</span>(t.size()&lt;res.size()||t.size()==res.size()&amp;&amp;t&lt;res)<br>                    <span class="hljs-attribute">res</span>=t;<br>            &#125;<br>        &#125;<br>        return res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æ‰¾å‡ºæ»¡è¶³å·®å€¼æ¡ä»¶çš„ä¸‹æ ‡"><a class="markdownIt-Anchor" href="#æ‰¾å‡ºæ»¡è¶³å·®å€¼æ¡ä»¶çš„ä¸‹æ ‡"></a> æ‰¾å‡ºæ»¡è¶³å·®å€¼æ¡ä»¶çš„ä¸‹æ ‡</h2><p><a href="https://leetcode.cn/problems/find-indices-with-index-and-value-difference-ii/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> <strong>é¢˜ç›®æè¿°</strong></h3><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€é•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums ï¼Œä»¥åŠæ•´æ•° indexDifference å’Œæ•´æ•° valueDifference ã€‚</p><p>ä½ çš„ä»»åŠ¡æ˜¯ä»èŒƒå›´ [0, n - 1] å†…æ‰¾å‡º  2 ä¸ªæ»¡è¶³ä¸‹è¿°æ‰€æœ‰æ¡ä»¶çš„ä¸‹æ ‡ i å’Œ j ï¼š</p><p>abs(i - j) &gt;= indexDifference ä¸”<br />abs(nums[i] - nums[j]) &gt;= valueDifference<br />è¿”å›æ•´æ•°æ•°ç»„ answerã€‚å¦‚æœå­˜åœ¨æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ä¸¤ä¸ªä¸‹æ ‡ï¼Œåˆ™ answer = [i, j] ï¼›å¦åˆ™ï¼Œanswer = [-1, -1] ã€‚å¦‚æœå­˜åœ¨å¤šç»„å¯ä¾›é€‰æ‹©çš„ä¸‹æ ‡å¯¹ï¼Œåªéœ€è¦è¿”å›å…¶ä¸­ä»»æ„ä¸€ç»„å³å¯ã€‚</p><p>æ³¨æ„ï¼ši å’Œ j å¯èƒ½ ç›¸ç­‰ï¼Œè¯·å®ç°O(n)æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[5,1,4,1]</span>, indexDifference = <span class="hljs-number">2</span>, valueDifference = <span class="hljs-number">4</span><br>è¾“å‡ºï¼š<span class="hljs-selector-attr">[0,3]</span><br>è§£é‡Šï¼šåœ¨ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥é€‰æ‹© <span class="hljs-selector-tag">i</span> = <span class="hljs-number">0</span> å’Œ j = <span class="hljs-number">3</span> ã€‚<br><span class="hljs-function"><span class="hljs-title">abs</span><span class="hljs-params">(<span class="hljs-number">0</span> - <span class="hljs-number">3</span>)</span></span> &gt;= <span class="hljs-number">2</span> ä¸” <span class="hljs-built_in">abs</span>(nums<span class="hljs-selector-attr">[0]</span> - nums<span class="hljs-selector-attr">[3]</span>) &gt;= <span class="hljs-number">4</span> ã€‚<br>å› æ­¤ï¼Œ<span class="hljs-selector-attr">[0,3]</span> æ˜¯ä¸€ä¸ªç¬¦åˆé¢˜ç›®è¦æ±‚çš„ç­”æ¡ˆã€‚<br><span class="hljs-selector-attr">[3,0]</span> ä¹Ÿæ˜¯ç¬¦åˆé¢˜ç›®è¦æ±‚çš„ç­”æ¡ˆã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> <strong>æ€è·¯</strong></h3><p>è¿™é“é¢˜è¦æ±‚ç”¨O(n)æ—¶é—´å¤æ‚åº¦å®ç°ï¼Œè‡ªå·±æ²¡æœ‰æƒ³åˆ°ï¼Œå‚è€ƒå¤§ä½¬çš„è§£æ³•æç„¶å¤§æ‚Ÿã€‚<br />å¯ä»¥è®°å½•<strong>ä¹‹å‰çš„é—´éš”index_gapçš„å…ƒç´ ä¸­æœ€å¤§å€¼å’Œæœ€å°å€¼ä¸‹æ ‡</strong>ï¼Œç„¶åä¸å½“å‰å€¼nums[j]å¯¹æ¯”å¦‚æœ<code>max-nums[j]&gt;=valueDifference</code>æˆ–è€…<code>nums[j]-min&gt;=valueDifference</code>ï¼Œé‚£ä¹ˆå³å¯è¿”å›å¯¹åº”çš„æœ€å¤§/æœ€å°å€¼ä¸‹æ ‡å’Œå½“å‰ä¸‹æ ‡j<br /><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">findIndices</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> indexDifference, <span class="hljs-type">int</span> valueDifference)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> mx_idx=<span class="hljs-number">0</span>,mn_idx=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> i;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=indexDifference;j&lt;n;++j)<br>        &#123;<br>            i=j-indexDifference;<br>            <span class="hljs-keyword">if</span>(nums[i]&gt;nums[mx_idx])<br>                mx_idx=i;<br>            <span class="hljs-keyword">if</span>(nums[i]&lt;nums[mn_idx])<br>                mn_idx=i;<br>            <span class="hljs-keyword">if</span>(nums[mx_idx]-nums[j]&gt;=valueDifference)<br>                <span class="hljs-keyword">return</span> &#123;mx_idx,j&#125;;<br>            <span class="hljs-keyword">if</span>(nums[j]-nums[mn_idx]&gt;=valueDifference)<br>                <span class="hljs-keyword">return</span> &#123;mn_idx,j&#125;;<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>&#125;;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•ä½œä¸š1</title>
    <link href="/2023/09/25/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A1/"/>
    <url>/2023/09/25/%E7%AE%97%E6%B3%95%E4%BD%9C%E4%B8%9A1/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%87%BA%E7%8E%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%85%83%E7%B4%A0">å‡ºç°æœ€å¤šçš„å…ƒç´ </a></li><li><a href="#%E5%AF%84%E5%8C%85%E8%A3%B9">å¯„åŒ…è£¹</a></li><li><a href="#%E7%BF%BB%E8%BD%AC%E5%AF%B9">ç¿»è½¬å¯¹</a></li></ul><!-- /TOC --><h2 id="å‡ºç°æœ€å¤šçš„å…ƒç´ "><a class="markdownIt-Anchor" href="#å‡ºç°æœ€å¤šçš„å…ƒç´ "></a> å‡ºç°æœ€å¤šçš„å…ƒç´ </h2><p><strong>é¢˜ç›®æè¿°</strong><br />æä¾›ä¸€ä¸ªåŒ…å« n ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¦æ±‚è¿”å›å…¶ä¸­å‡ºç°æ¬¡æ•°å¤§äºåŠæ•°ï¼ˆå¤§äº âŒŠn/2âŒ‹ï¼‰çš„å…ƒç´ ã€‚å‡è®¾æ•°ç»„ä¸­ä¸€å®šå­˜åœ¨è¿™æ ·çš„å…ƒç´ ã€‚</p><p>Input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>Output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong><br />è¿™é“é¢˜è¦æ±‚æ‰¾å‡ºç°æ¬¡æ•°å¤§äºåŠæ•°çš„æ•°ï¼Œä¾‹å¦‚æ•°ç»„æœ‰<code>n</code>ä¸ªæ•°ï¼Œé‚£ä¹ˆå°±è¿”å›å”¯ä¸€çš„å‡ºç°æ¬¡æ•°å¤§äº<code>n/2</code>çš„æ•°ï¼Œä¹Ÿå°±æ˜¯å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ã€‚</p><p>é¦–å…ˆæƒ³åˆ°çš„æ€è·¯æ˜¯ç”¨å“ˆç³»è¡¨è®°å½•æ¯ä¸ªå‡ºç°æ¬¡æ•°ï¼Œç„¶åéå†æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ã€‚</p><p>è¿™é‡Œè¿˜å¯ä»¥ç”¨æŠ•ç¥¨æ³•ï¼Œå› ä¸ºç”±é¢˜ç›®å·²çŸ¥è¿™é‡Œçš„å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼Œå®ƒæ‰€å‡ºç°çš„æ¬¡æ•°æ˜¯å¤§äº<code>n/2</code>çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶ä»–æ•°çš„å‡ºç°æ¬¡æ•°ä¹‹å’Œä¹Ÿå°äºå®ƒçš„å‡ºç°æ¬¡æ•°ã€‚å› æ­¤ï¼Œå¯ä»¥ç»´æŠ¤ä¸¤ä¸ªå˜é‡cntå’Œcandidate(åˆå§‹éƒ½ä¸º0)ï¼Œç„¶åéå†æ•°ç»„ï¼Œå½“cntä¸º0æ—¶æ›´æ–°candidateï¼Œç„¶åå¦‚æœ<code>num==candidate</code>ï¼Œåˆ™cntåŠ 1ï¼Œå¦åˆ™å‡1ã€‚è¿™æ ·ï¼Œæœ€åçš„candidateå³å‡ºç°æœ€å¤šçš„æ•°ã€‚ç”±äºè¿™é“é¢˜è¾“å‡ºæ˜¯å”¯ä¸€çš„(å‡ºç°æ¬¡æ•°å¤§äº<code>n/2</code>)ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æŠ•ç¥¨æ³•è§£å†³ã€‚</p><p>ä»£ç (é™„å“ˆç³»è¡¨è§£æ³•)ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a) != EOF)<br>        v.<span class="hljs-built_in">push_back</span>(a);<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>, cand = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c : v)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (cnt == <span class="hljs-number">0</span>)<br>            cand = c;<br>        cnt += c == cand ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>;<br>    &#125;<br>    cout &lt;&lt; cand &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> cand;<br>&#125;<br><span class="hljs-comment">// int main()</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//     vector&lt;int&gt; v;</span><br><span class="hljs-comment">//     int a;</span><br><span class="hljs-comment">//     while (scanf(&quot;%d&quot;, &amp;a) != EOF)</span><br><span class="hljs-comment">//         v.push_back(a);</span><br><span class="hljs-comment">//     int n = v.size();</span><br><span class="hljs-comment">//     unordered_map&lt;int, int&gt; m;</span><br><span class="hljs-comment">//     for (int i = 0; i &lt; n; i++)</span><br><span class="hljs-comment">//         ++m[v[i]];</span><br><br><span class="hljs-comment">//     int max = 0, res = 0;</span><br><br><span class="hljs-comment">//     for (auto it = m.begin(); it != m.end(); it++)</span><br><span class="hljs-comment">//     &#123;</span><br><span class="hljs-comment">//         if (it-&gt;second &gt; max)</span><br><span class="hljs-comment">//         &#123;</span><br><span class="hljs-comment">//             max = it-&gt;second;</span><br><span class="hljs-comment">//             res = it-&gt;first;</span><br><span class="hljs-comment">//         &#125;</span><br><span class="hljs-comment">//     &#125;</span><br><span class="hljs-comment">//     cout &lt;&lt; res;</span><br><span class="hljs-comment">//     return res;</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure><h2 id="å¯„åŒ…è£¹"><a class="markdownIt-Anchor" href="#å¯„åŒ…è£¹"></a> å¯„åŒ…è£¹</h2><p><strong>é¢˜ç›®æè¿°</strong><br />ç°åœ¨æœ‰ n ä¸ªä¸åŒçš„åŒ…è£¹ï¼Œéœ€è¦å¯„ç»™ n ä¸ªä¸åŒçš„åœ°å€ï¼Œè¯·ç¼–ç¨‹æ±‚å‡ºæ¯ä¸ªåŒ…è£¹éƒ½é€é”™åœ°å€çš„æƒ…å†µå…±æœ‰å¤šå°‘ç§ã€‚</p><p>Input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><p>Output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">44<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong><br />è¿™é“é¢˜å±äºé”™æ’é—®é¢˜ï¼Œå…³äºé”™æ’é—®é¢˜ï¼Œæœ‰å…¬å¼$D(n)=(n-1)(D(n-1)+D(n-2)) $ï¼Œå‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/466098489">è¿™é‡Œ</a></p><p>ä»£ç :</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">// int f(int a)</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//     if (a == 1)</span><br><span class="hljs-comment">//         return 0;</span><br><span class="hljs-comment">//     else if (a == 2)</span><br><span class="hljs-comment">//         return 1;</span><br><span class="hljs-comment">//     else</span><br><span class="hljs-comment">//         return (a - 1) * (f(a - 1) + f(a - 2));</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    dp[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">3</span>; i &lt;= n; ++i)<br>        dp[i] = (i - <span class="hljs-number">1</span>) * (dp[i - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">2</span>]);<br>    cout &lt;&lt; dp[n];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¿»è½¬å¯¹"><a class="markdownIt-Anchor" href="#ç¿»è½¬å¯¹"></a> ç¿»è½¬å¯¹</h2><p><strong>é¢˜ç›®æè¿°</strong><br />ç°åœ¨æœ‰ n ä¸ªä¸åŒçš„åŒ…è£¹ï¼Œéœ€è¦å¯„ç»™ n ä¸ªä¸åŒçš„åœ°å€ï¼Œè¯·ç¼–ç¨‹æ±‚å‡ºæ¯ä¸ªåŒ…è£¹éƒ½é€é”™åœ°å€çš„æƒ…å†µå…±æœ‰å¤šå°‘ç§ã€‚<br />ç»™å®šä¸€ä¸ªæ•°ç»„numsï¼Œå¦‚æœ i &lt; j ä¸” nums[i] &gt; 3*nums[j] æˆ‘ä»¬å°±å°† (i, j) ç§°ä½œä¸€ä¸ªé‡è¦ç¿»è½¬å¯¹ã€‚</p><p>ä½ éœ€è¦è¿”å›ç»™å®šæ•°ç»„ä¸­çš„é‡è¦ç¿»è½¬å¯¹çš„æ•°é‡ã€‚</p><p><strong>æ€è·¯</strong><br />è¿™é“é¢˜æ˜¯æ±‚é€†åºå¯¹æ•°çš„å°å˜å½¢ï¼Œæ±‚é€†åºå¯¹çš„ä¸»è¦æ€æƒ³æ˜¯å½’å¹¶æ’åºï¼Œå¯¹äºå·²ç»æœ‰åºçš„åŒºé—´<code>[l,mid]</code>å’Œ<code>[mid+1,r]</code>ï¼Œå½“<code>nums[i]&gt;3*nums[j]</code>ï¼Œè¯´æ˜<code>[i,mid]</code>åŒºé—´çš„å…ƒç´ éƒ½å¤§äº<code>3*nums[j]</code>ï¼Œå› æ­¤é€†åºå¯¹æ•°å¢åŠ <code>mid-i+1</code>ï¼Œå…¶ä½™éƒ¨åˆ†è¿›è¡Œå½’å¹¶æ’åºå³å¯ã€‚</p><p>ä»£ç :</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> cnt;<br>vector&lt;<span class="hljs-type">int</span>&gt; num;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (l &gt;= r)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> nl = mid - l + <span class="hljs-number">1</span>, nr = r - mid;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">al</span><span class="hljs-params">(nl)</span>, <span class="hljs-title">ar</span><span class="hljs-params">(nr)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nl; ++i)<br>        al[i] = num[l + i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nr; ++i)<br>        ar[i] = num[mid + <span class="hljs-number">1</span> + i];<br>    <span class="hljs-type">int</span> i = l, j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (num[i] &gt; <span class="hljs-number">3</span> * num[j])<br>        &#123;<br>            cnt += mid - i + <span class="hljs-number">1</span>;<br>            ++j;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>            ++i;<br>    &#125;<br>    i = <span class="hljs-number">0</span>;<br>    j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i &lt; nl &amp;&amp; j &lt; nr)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (al[i] &lt;= ar[j])<br>            num[l++] = al[i++];<br>        <span class="hljs-keyword">else</span><br>            num[l++] = ar[j++];<br>    &#125;<br>    <span class="hljs-keyword">while</span> (i &lt; nl)<br>        num[l++] = al[i++];<br>    <span class="hljs-keyword">while</span> (j &lt; nr)<br>        num[l++] = ar[j++];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mergesort</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">mergesort</span>(l, mid);<br>        <span class="hljs-built_in">mergesort</span>(mid + <span class="hljs-number">1</span>, r);<br>        <span class="hljs-built_in">merge</span>(l, mid, r);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a) != EOF)<br>        num.<span class="hljs-built_in">push_back</span>(a);<br>    <span class="hljs-type">int</span> n = num.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-built_in">mergesort</span>(<span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>);<br>    cout &lt;&lt; cnt &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç›¸å…³é—®é¢˜åŠè§£å†³æ–¹æ³•</title>
    <link href="/2023/08/11/%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2023/08/11/%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0rainbowrainbowrainbow">é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•ï¼ˆæŒç»­æ›´æ–°ï¼ï¼‰ğŸŒˆğŸŒˆğŸŒˆ</a><ul><li><a href="#%E7%AC%AC1%E5%91%A8rainbow">ç¬¬1å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC2%E5%91%A8rainbow">ç¬¬2å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC3%E5%91%A8rainbow">ç¬¬3å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC4%E5%91%A8rainbow">ç¬¬4å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC5%E5%91%A8rainbow">ç¬¬5å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC6%E5%91%A8rainbow">ç¬¬6å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC7%E5%91%A8rainbow">ç¬¬7å‘¨ğŸŒˆ</a></li><li><a href="#%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0rainbow">æŒç»­æ›´æ–°ğŸŒˆ</a></li></ul></li></ul><!-- /TOC --><h2 id="é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•æŒç»­æ›´æ–°"><a class="markdownIt-Anchor" href="#é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•æŒç»­æ›´æ–°"></a> é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•ï¼ˆæŒç»­æ›´æ–°ï¼ï¼‰ğŸŒˆğŸŒˆğŸŒˆ</h2><h3 id="ç¬¬1å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬1å‘¨"></a> ç¬¬1å‘¨ğŸŒˆ</h3><ol><li>windowsç¯å¢ƒä¸‹å®‰è£…pycocotoolsæŠ¥é”™ï¼šERROR: Could not build wheels for pycocotools, which is required to install pyproject.toml-based projectsï¼Œè§£å†³æ–¹æ³•ï¼š<a href="https://blog.csdn.net/weixin_45775136/article/details/130248372?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=ERROR:%20Could%20not%20build%20wheels%20&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-130248372.nonecase&amp;spm=1018.2226.3001.4187">1</a></li><li>windowsç¯å¢ƒä¸‹å®‰è£…mmcvåº“æŠ¥é”™ï¼šERROR:Could not build wheels for mmcv, which is required to install pyproject.toml-based projectsï¼Œè§£å†³æ–¹æ³•ï¼šå…ˆpip install openmimï¼Œç„¶åmim install mmcv</li><li>è®­ç»ƒæ—¶å‡ºç°OSError: [WinError 1455] é¡µé¢æ–‡ä»¶å¤ªå°,æ— æ³•å®Œæˆæ“ä½œï¼ŒåŸå› æ˜¯dataloaderçš„num_workerè®¾ç½®çš„å¤ªå¤§ï¼ŒCPUçº¿ç¨‹ä¸æ”¯æŒï¼Œè§£å†³æ–¹æ³•ï¼šnum_workerè®¾ç½®å°ä¸€äº›å³å¯</li><li>TarDALä»£ç ä¸­ï¼Œæ£€æµ‹éƒ¨åˆ†yolov5sç½‘ç»œè¾“å‡ºçš„ç»“æœshapeä¸ä¸€è‡´ï¼Œè§£å†³åŠæ³•ï¼šè°ƒè¯•ä¹‹åå‘ç°yolov5æºç ä¸­ä¼šæ ¹æ®å½“å‰æ¨¡å¼(train or eval)é€‰æ‹©è¾“å‡º</li><li>MetaFusionè®ºæ–‡å¹¶æœªæä¾›è¯¦ç»†ä»£ç ï¼Œåªæä¾›äº†æµ‹è¯•ä»£ç ï¼Œå› æ­¤æ— æ³•å¾—çŸ¥ç½‘ç»œå…·ä½“çš„è®­ç»ƒç­–ç•¥ä»¥åŠæŸå¤±è®¡ç®—çš„è¯¦ç»†è¿‡ç¨‹ã€‚</li><li>è®­ç»ƒTarDALæ—¶ï¼Œè‡ªå·±è®­ç»ƒçš„å­æ¨¡å‹æ— æ³•åŠ è½½åˆ°ä¸‹ä¸€ä¸ªå­æ¨¡å‹ä¸­ï¼Œè€Œè®ºæ–‡æä¾›çš„é¢„è®­ç»ƒæ¨¡å‹å´å¯ä»¥ã€‚è§£å†³æ–¹æ³•ï¼šè¯¥ç¯‡è®ºæ–‡æä¾›çš„æºç å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œç»è¿‡å¤šç•ªè°ƒè¯•å‘ç°ï¼Œè‡ªå·±è®­ç»ƒçš„æ¨¡å‹æ— æ³•åŠ è½½çš„åŸå› æ˜¯å› ä¸ºåˆ¤åˆ«å™¨æ¨¡å‹linearå±‚å‚æ•°çš„sizeä¸å½“å‰åˆ¤åˆ«å™¨æ¨¡å‹å¯¹åº”å±‚å‚æ•°sizeä¸åŒ¹é…ï¼Œè€Œæä¾›çš„é¢„è®­ç»ƒæƒé‡å¯ä»¥æ­£å¸¸åŠ è½½çš„åŸå› æ˜¯é¢„è®­ç»ƒæƒé‡åªåŒ…å«äº†ç”Ÿæˆå™¨çš„æƒé‡ï¼Œå› æ­¤ä»£ç åœ¨åŠ è½½é¢„è®­ç»ƒæƒé‡æ—¶æ²¡æœ‰åŠ è½½åˆ¤åˆ«å™¨æƒé‡ã€‚è¿›ä¸€æ­¥è°ƒè¯•åå‘ç°ï¼Œlinearå±‚å‚æ•°sizeä¸åŒ¹é…çš„åŸå› æ˜¯ä¸åŒå­æ¨¡å‹è®­ç»ƒæ—¶è¾“å…¥å›¾ç‰‡çš„å¤§å°ä¸ä¸€è‡´ï¼Œå¯¼è‡´åç»­å­æ¨¡å‹æ— æ³•åŠ è½½æƒé‡ã€‚</li><li>è®­ç»ƒæ—¶æ¢¯åº¦å›ä¼ æ—¶å‡ºç°nanã€‚è§£å†³æ–¹æ³•ï¼šå…ˆæ£€æŸ¥æ•°æ®æœ‰æ²¡æœ‰é—®é¢˜ï¼Œæ²¡æœ‰é—®é¢˜åˆ™å°è¯•å°†å¯¹åº”çš„å­¦ä¹ ç‡è°ƒä½ã€‚</li></ol><h3 id="ç¬¬2å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬2å‘¨"></a> ç¬¬2å‘¨ğŸŒˆ</h3><ol><li>æ‰§è¡Œshè„šæœ¬æ–‡ä»¶æ—¶å‡ºç°æ‰¾ä¸åˆ°ç›®å½•ã€‚è§£å†³æ–¹æ³•ï¼šwindowsé»˜è®¤æ¢è¡Œç¬¦æ˜¯\r\nï¼Œlinuxä¸‹æ˜¯\nï¼Œæˆ‘åœ¨windowsç¯å¢ƒä¸‹ä½¿ç”¨vscodeè¿æ¥è¿œç¨‹æœåŠ¡å™¨æ—¶ï¼Œä½¿ç”¨çš„æ¢è¡Œç¬¦ä¾æ—§æ˜¯\r\nï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œcdæ—¶æ‰¾ä¸åˆ°ç›®å½•ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨dos2unixå‘½ä»¤æ¥è½¬æ¢è„šæœ¬æ–‡ä»¶ã€‚</li><li>OSError: cannot write mode F as PNGã€‚è§£å†³æ–¹æ³•ï¼šè¿™é‡Œçš„ mode F æ„æ€æ˜¯å›¾åƒä¸­æµ®ç‚¹ç±»å‹çš„åƒç´ å€¼ï¼ŒåŸå› æ˜¯ä»£ç ä¸­çš„ img æ•°ç»„æ˜¯ float ç±»å‹çš„ï¼Œè€Œå›¾åƒä¸­æ¯ä¸ªåƒç´ çš„å€¼åº”è¯¥æ˜¯ 0-255(uint8 ç±»å‹)ã€‚ä½¿ç”¨astype(np.uint8)è½¬æ¢æ•°æ®ç±»å‹å³å¯ã€‚</li><li>ä½¿ç”¨wandbæ—¶å‡ºé”™ï¼Œwandb: ERROR Internal wandb error: file data was not syncedã€‚è§£å†³æ–¹æ³•ï¼šè¯¥é”™è¯¯ä¸protobufåº“æœ‰å…³ï¼Œå¸è½½åé‡æ–°å®‰è£…å³å¯è§£å†³ã€‚</li><li>detfusionåœ¨ä½¿ç”¨bash compile.shç¼–è¯‘mmdetæ—¶æŠ¥é”™ã€‚è§£å†³æ–¹æ³•ï¼šåŸå› æ˜¯å› ä¸ºpython. cuda. pytorchç‰ˆæœ¬è¿‡é«˜å¯¼è‡´çš„ï¼Œå®‰è£…python3.7. åˆ‡æ¢cudaç‰ˆæœ¬å®‰è£…pytorchä½ç‰ˆæœ¬1.3.1åè§£å†³ã€‚</li><li>å°è¯•è¿è¡Œdetfusionæ—¶å‡ºç°ModuleNotFoundError: No module named â€˜DOTA_devkitâ€™ã€‚è§£å†³æ–¹æ³•ï¼šå®‰è£…swigï¼Œç„¶ågitä¸‹DOTA_devkitè¿œç¨‹ä»“åº“ï¼Œç„¶åç¼–è¯‘c++æ‰©å±•ã€‚å…·ä½“å‚è€ƒï¼š(<a href="https://zhuanlan.zhihu.com/p/355862906">https://zhuanlan.zhihu.com/p/355862906</a>)</li><li>è¿è¡Œæ—¶æŠ¥é”™ImportError: urllib3 v2.0 only supports OpenSSL 1.1.1+, currently the â€˜sslâ€™ module is compiled with 'OpenSSL 1.0.2uã€‚è§£å†³æ–¹æ³•ï¼šurllibç‰ˆæœ¬è¿‡é«˜å¯¼è‡´ï¼Œå®‰è£…å¯¹åº”ç‰ˆæœ¬çš„urllibå³å¯ã€‚</li><li>ä½¿ç”¨faster rcnnå¯¹detfusionçš„èåˆç»“æœè¿›è¡Œæ£€æµ‹æ—¶ï¼Œè¾¹ç•Œæ¡†å›å½’æŸå¤±å‡ºç°nanã€‚è§£å†³æ–¹æ³•ï¼šèµ·åˆè®¤ä¸ºæ˜¯å­¦ä¹ ç‡è¿‡é«˜å¯¼è‡´ï¼Œåæ¥é™ä½å­¦ä¹ ç‡æ— æœåï¼Œæ€€ç–‘æ˜¯ä½œè€…ç»™çš„annotationså­˜åœ¨é—®é¢˜ï¼Œç¼–å†™ç®€å•è„šæœ¬è¿›è¡Œæ£€æŸ¥åå‘ç°ï¼Œæœ‰5å¼ å›¾ç‰‡çš„gtå­˜åœ¨é—®é¢˜ï¼Œå…·ä½“é—®é¢˜æ˜¯xmin==xmaxå¯¼è‡´è¾¹ç•Œæ¡†å›å½’è®¡ç®—å‡ºé”™ï¼Œå°†å‡ºé”™çš„gtåˆ é™¤å³å¯ã€‚</li><li>éƒ¨ç½²æ¨¡å‹æ—¶å‡ºç°timm.layersæœªæ‰¾åˆ°ï¼Œtimmæ›´æ–°åè·¯å¾„æ”¹å˜å¯¼è‡´ã€‚è§£å†³æ–¹æ³•ï¼šæ”¹ä¸ºtimm.models.layers</li><li>ä½¿ç”¨lyngorç¼–è¯‘æ¨¡å‹æ—¶å‡ºç°AttributeError: module â€˜torchâ€™ has no attribute â€˜get_autocast_gpu_dtypeâ€™ã€‚è§£å†³æ–¹æ³•ï¼šè¿™æ˜¯å› ä¸ºpytorchç‰ˆæœ¬è¿‡ä½å¯¼è‡´ï¼Œå¯ä»¥å‡çº§pytorchæˆ–è€…æ‰‹åŠ¨æ›´æ”¹ä»£ç ä¸­çš„dtypeï¼Œæˆ‘é€šè¿‡æœ¬åœ°é«˜ç‰ˆæœ¬pytorchæ‰“å°å‡ºè¯¥å‡½æ•°è¿”å›å€¼ï¼Œç„¶åæ‰‹åŠ¨æ”¹ä¸ºtorch.halfå’Œtorch.bfloat16</li><li>AttributeError: â€˜strâ€™ object has no attribute â€˜fromatâ€™ï¼Œè§£å†³æ–¹æ³•ï¼šæ”¹æˆf-stringå½¢å¼ã€‚</li><li>ValueError: only one element tensors can be converted to Python scalarsï¼Œè§£å†³æ–¹æ³•ï¼š<a href="https://blog.csdn.net/Vertira/article/details/127814093?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372428616800225573433%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169372428616800225573433&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-2-127814093-null-null.142%5Ev93%5Econtrol&amp;utm_term=ValueError%3A%20only%20one%20element%20tensors%20can%20be%20converted%20to%20Python%20scalars&amp;spm=1018.2226.3001.4187">1</a></li></ol><h3 id="ç¬¬3å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬3å‘¨"></a> ç¬¬3å‘¨ğŸŒˆ</h3><ol><li>pythonå¯¼å…¥å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„åŒ…æ—¶æç¤ºæ‰¾ä¸åˆ°æ¨¡å—ï¼Œå¦‚/a/aa.pyçš„aa.pyæ–‡ä»¶éœ€è¦å¯¼å…¥/b/bb.pyæ–‡ä»¶ï¼Œaa.pyæ–‡ä»¶æç¤ºæ‰¾ä¸åˆ°bbæ¨¡å—ã€‚è§£å†³æ–¹æ³•ï¼šéœ€è¦åœ¨/b/æ–‡ä»¶å¤¹ä¸‹åˆ›å»º__init__.pyï¼Œç„¶åå†aa.pyä¸­åŠ å…¥import sys,sys.path.append(â€˜â€¦â€™)ï¼Œå°†ä¸Šçº§ç›®å½•æ·»åŠ åˆ°å·¥ä½œè·¯å¾„ä¸­ã€‚</li><li>ImportError: attempted relative import with no known parent packageã€‚è§£å†³æ–¹æ³•ï¼šè¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯ç”±äºç›¸å¯¹å¯¼å…¥çš„æ¨¡å—æ²¡æœ‰æ­£ç¡®çš„çˆ¶çº§åŒ…å¯¼è‡´çš„ï¼Œä½¿ç”¨ç»å¯¹å¯¼å…¥å³å¯è§£å†³ã€‚</li><li>ä½¿ç”¨thopè®¡ç®—æ¨¡å‹å‚æ•°é‡æ—¶å‡ºç°RuntimeError: module must have its parameters and buffers on device cuda:0 (device_ids[0]) but found one of them on device: cpuã€‚è§£å†³æ–¹æ³•ï¼šåŸå› æ˜¯nn.DataParallel()å¯¼è‡´éƒ¨åˆ†æ¨¡å‹æ²¡æœ‰åœ¨åŒä¸€å¼ GPUä¸Šï¼Œä½¿ç”¨å•å¡è®¡ç®—å‚æ•°é‡å’Œè®¡ç®—é‡å³å¯ã€‚</li><li>åœ¨æ”¹åŠ¨CDDFuseä»£ç æ—¶ï¼Œä½¿ç”¨params_groupä¸ºä¸åŒå‚æ•°è®¾ç½®å­¦ä¹ ç‡åï¼Œå‡ºç°æ¢¯åº¦ä¸º0ï¼Œlossä¸å˜çš„æƒ…å†µã€‚è§£å†³æ–¹æ³•ï¼šç»è¿‡æ’æŸ¥æ˜¯å­¦ä¹ ç‡å¤ªå¤§å¯¼è‡´ï¼Œé™ä½å­¦ä¹ ç‡å³å¯ã€‚</li><li>åœ¨ä½¿ç”¨FFTè®¡ç®—é¢‘è°±çš„æ—¶å€™ï¼Œä½¿ç”¨torch.fft.ifftnå°†é¢‘è°±é€†å˜æ¢å›æ¥ï¼Œç„¶åä¿å­˜ä¸ºå›¾åƒæ—¶æŠ¥é”™ã€‚è§£å†³åŠæ³•ï¼šå›¾åƒçš„æ•°æ®éœ€è¦è½¬æ¢ä¸ºnp.uint8ç±»å‹ï¼Œæ‰€ä»¥é€†å˜æ¢åéœ€è¦å°†æ•°æ®è½¬æ¢æˆnp.uint8æ‰èƒ½æ­£å¸¸ä¿å­˜ã€‚</li><li>å°†é¢‘åŸŸä¿¡æ¯è¾“å…¥åˆ°å·ç§¯å±‚æ—¶æŠ¥é”™ã€‚è§£å†³æ–¹æ³•ï¼šnn.Linearï¼Œnn.Conv2dç­‰é»˜è®¤è¾“å…¥æ•°æ®ç±»å‹æ˜¯torch.float32ï¼Œé¢‘åŸŸæ•°æ®æ˜¯å¤æ•°ï¼Œæ‰€ä»¥éœ€è¦å°†dtypeæ”¹æˆtorch.complex64å³å¯è§£å†³ã€‚</li><li>ä½¿ç”¨åˆ‡ç‰‡æ“ä½œå¾—åˆ°é¢„æµ‹çš„æ»¤æ³¢å™¨æ—¶æŠ¥é”™ï¼šRuntimeError: â€œdiv_floor_cudaâ€ not implemented for â€˜ComplexFloatâ€™ã€‚è§£å†³æ–¹æ³•ï¼šè¯¥é”™è¯¯å’Œæ•°æ®ç±»å‹æœ‰å…³ï¼Œéœ€è¦ä½¿ç”¨torch.abså°†æ•°æ®ç±»å‹ä¸ºtorch.complexçš„æ•°æ®è½¬æ¢ä¸€ä¸‹ã€‚</li></ol><h3 id="ç¬¬4å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬4å‘¨"></a> ç¬¬4å‘¨ğŸŒˆ</h3><ol><li>è‡ªå·±æ­å»ºçš„èåˆç½‘ç»œè¿›è¡Œæ¨ç†æµ‹è¯•æ—¶æŠ¥é”™ï¼šIndexError: invalid index of a 0-dim tensor. Use <code>tensor.item()</code> in Python or <code>tensor.item&lt;T&gt;()</code> in C++ to convert a 0-dim tensor to a numberã€‚è§£å†³æ–¹æ³•ï¼šå› ä¸ºåœ¨æ¨ç†æ—¶ï¼Œbatchsizeä¸º1ï¼Œæ‰€ä»¥è®¡ç®—æ—¶å‡ºç°äº†ç»´åº¦é”™è¯¯ï¼Œå°†ç›¸åº”çš„å’Œbatchæœ‰å…³çš„è®¡ç®—è¿›è¡Œæ›´æ”¹å³å¯ã€‚</li><li>å°†ycbcrè¿›è¡Œæ‹¼æ¥è½¬ä¸ºrgbå›¾åƒæ—¶ï¼Œå›¾åƒæ˜¾ç¤ºæ—¶è‰²å½©å¼‚å¸¸ã€‚è§£å†³æ–¹æ³•ï¼šå‡ºç°æ­¤æƒ…å†µçš„åŸå› æ—¶è¯»å–ycbcrå›¾åƒæ—¶ï¼Œå…ˆåˆ†åˆ«è¯»å–å‡ºyï¼Œcbcrï¼Œç„¶ååœ¨åˆ†åˆ«è¿›è¡Œå½’ä¸€åŒ–ï¼Œå› ä¸ºrgb2ycbcrçš„è¿‡ç¨‹ä¸­æ¶‰åŠå…¶ä»–è®¡ç®—ï¼Œæ‰€ä»¥åº”å½“å…ˆå¯¹æ•´å¼ å›¾åƒå½’ä¸€åŒ–ï¼Œå†åˆ†åˆ«è¯»å–å‡ºyï¼Œcbcrã€‚</li><li>æ¨ç†æ—¶æŠ¥é”™TypeError: conv2d() received an invalid combination of arguments - got (tuple, Parameter, NoneType, tuple, tuple, tuple, int), but expected one of: * (Tensor input, Tensor weight, Tensor bias, tuple of ints stride, tuple of ints padding, tuple of ints dilation, int groups)didnâ€™t match because some of the arguments have invalid types: (tuple of (Tensor, Tensor), Parameter, NoneType, tuple of (int, int), tuple of (int, int), tuple of (int, int), int)ã€‚è§£å†³æ–¹æ³•ï¼šåŸå› æ˜¯è¾“å…¥æ¨¡å‹çš„æ•°æ®æœ‰è¯¯ï¼Œè¯¯æŠŠæŸä¸ªtupleç±»å‹çš„æ•°æ®è¾“å…¥åˆ°ä¸€ä¸ªæœ¬è¯¥ä¸ºtensorçš„æ•°æ®ä¸­ã€‚</li></ol><h3 id="ç¬¬5å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬5å‘¨"></a> ç¬¬5å‘¨ğŸŒˆ</h3><ol><li>ä½¿ç”¨git pushå‡ºç°<br />error: å¯¹è±¡æ–‡ä»¶ .git/objects/f2/22d3b7ccb69f6a75af88129fa8ebc652a6d349 ä¸ºç©º<br />error: å¯¹è±¡æ–‡ä»¶ .git/objects/f2/22d3b7ccb69f6a75af88129fa8ebc652a6d349 ä¸ºç©º<br />fatal: æ¾æ•£å¯¹è±¡ f222d3b7ccb69f6a75af88129fa8ebc652a6d349ï¼ˆä¿å­˜åœ¨ .git/objects/f2/22d3b7ccb69f6a75af88129fa8ebc652a6d349ï¼‰å·²æŸå<br />è§£å†³æ–¹æ³•ï¼šæ˜¯å› ä¸ºè™šæ‹Ÿæœºå¼ºåˆ¶é€€å‡ºå¼•èµ·çš„ï¼ŒæŒ‰ç…§ç½‘ä¸Šçš„æ–¹æ³•è¦find .git/objects/ -size 0 -exec rm -f {} ;<br />git fetch originï¼Œä½†æ²¡æœ‰è§£å†³ï¼Œåº”è¯¥å°†å¤‡ä»½åˆ†æ”¯çš„.gitæ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä¸»ç›®å½•ï¼Œéƒ¨ç½²åˆ†æ”¯çš„.gitæ”¾åœ¨.deploy_git</li><li>error: æºå¼•ç”¨è§„æ ¼ main æ²¡æœ‰åŒ¹é…ï¼Œè§£å†³æ–¹æ³•ï¼Œæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯åç§°ä¸åŒ¹é…ï¼ŒæŒ‡å®šæ¨é€çš„è¿œç¨‹åˆ†æ”¯åç§°å³å¯ã€‚</li><li>vscodeç»ˆç«¯è¿è¡Œc++æ–‡ä»¶è¾“å‡ºä¸­æ–‡ä¹±ç ï¼Œè§£å†³æ–¹æ³•ï¼šåŸå› æ˜¯vscodeæ–‡ä»¶ç¼–ç ä¸ºutf8è€Œç»ˆç«¯ç¼–ç ä¸ºgbkï¼Œå› æ­¤éœ€è¦æŠŠç»ˆç«¯ç¼–ç æ”¹ä¸ºutf8ï¼Œå¯¹äºpowershellï¼Œéœ€è¦æŒ‰ctrl+,ç„¶ååœ¨å‘½ä»¤è¡Œåé¢åŠ powershell.exe -NoExit chcp 65001ï¼Œå¯¹äºcmdï¼Œéœ€è¦åœ¨æ³¨å†Œè¡¨HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processoræ–°å»ºå­—ç¬¦ä¸²å€¼ï¼Œç„¶åè¾“å…¥chcp 65001ã€‚æˆ–è€…åœ¨ä»£ç ä¸­ï¼ŒåŒ…å«#include &lt;windows.h&gt;ï¼Œç„¶ååœ¨è¾“å‡ºå‰åŠ ä¸€è¡ŒSetConsoleOutputCP(CP_UTF8);è¿™æ ·å°±å¯ä»¥æ­£å¸¸è¾“å‡ºä¸­æ–‡äº†ã€‚</li></ol><h3 id="ç¬¬6å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬6å‘¨"></a> ç¬¬6å‘¨ğŸŒˆ</h3><ol><li>linuxä¸‹è¿è¡Œshè„šæœ¬ï¼Œå‘½ä»¤è¡Œå‚æ•°é—´è‡ªåŠ¨å¢åŠ \rï¼Œè§£å†³æ–¹æ³•ï¼šdos2unix <a href="http://a.sh">a.sh</a> æˆ–è€… sed -i â€œs/\r//â€ <a href="http://a.sh">a.sh</a>ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/qq_25112523/article/details/109279059">https://blog.csdn.net/qq_25112523/article/details/109279059</a>)</li><li>å®‰è£…tinycudannæ—¶æŠ¥é”™ERROR: Could not build wheels for tinycudann, which is required to install pyproject.toml-based projectsï¼Œæ­¤æ—¶è¿˜å‘ç°å…¶ä»–æŠ¥é”™ä¿¡æ¯ï¼ŒThe detected CUDA version (12.2) mismatches the version that was used to compile PyTorch (11.7). Please make sure to use the same CUDA versions.å› æ­¤å› è¯¥æ˜¯ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œè§£å†³æ–¹æ³•ï¼šåˆ‡æ¢cudaç‰ˆæœ¬</li><li>UnboundLocalError: local variable â€˜dirâ€™ referenced before assignmentã€‚è§£å†³æ–¹æ³•ï¼Œæˆ‘åœ¨ä½¿ç”¨ifè¯­å¥æ—¶ï¼Œæ¯ä¸ªåˆ†æ”¯å†…å®šä¹‰äº†dirå˜é‡ï¼Œç„¶åå‡½æ•°è¿”å›diræ—¶å¦‚æœéƒ½ä¸æ»¡è¶³å¯èƒ½ä¸è®¤è¯†ï¼Œå› æ­¤åº”åœ¨ifè¯­å¥å‰åˆå§‹åŒ–ä¸€ä¸‹dirå˜é‡</li><li>pipå®‰è£…requirementså¤±è´¥ï¼Œè§£å†³æ–¹æ³•ï¼šä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œéœ€è¦å…ˆå®‰è£…ä¸€ä¸ªtorchï¼Œç»§ç»­å®‰è£…requirementså°±æ­£å¸¸äº†ã€‚</li><li>è£…ç¯å¢ƒæŠ¥é”™error in gym setup command: â€˜extras_requireâ€™ must be a dictionary whose values are strings or lists of strings containing valid project/version requirement specifiers.ã€‚è§£å†³åŠæ³•ï¼špip install setuptools== 65.5.0<br />pip install --user wheel==0.38.0</li><li>å®‰è£…ç¯å¢ƒæ—¶æŠ¥é”™ï¼ŒCaused by SSLError(SSLZeroReturnError(6, â€˜TLS/SSL connection has been closed (EOF) (_ssl.c:1131)â€™))) - skippingè§£å†³æ–¹æ³•ï¼šå…³é—­ç³»ç»Ÿä»£ç†</li><li>TypeError: Cannot handle this data type: (1, 1), &lt; i8ï¼Œè§£å†³æ–¹æ³•ï¼Œéœ€è¦å°†å›¾åƒæ•°ç»„è½¬æ¢æˆnp.uint8</li></ol><h3 id="ç¬¬7å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬7å‘¨"></a> ç¬¬7å‘¨ğŸŒˆ</h3><ol><li>cannot import name â€˜greycomatrixâ€™ from â€˜skimage.featureâ€™ï¼Œè§£å†³æ–¹æ³•ï¼Œç”±äºskimageç‰ˆæœ¬é—®é¢˜ï¼Œæ—§ç‰ˆæœ¬ä¸ºgreycomatrixï¼Œæ–°ç‰ˆæœ¬ä¸ºgraycomatrixï¼Œæ›´æ­£å³å¯</li><li>fftåé¢‘åŸŸèåˆçš„ç»“æœä¸ç†æƒ³ï¼Œè§£å†³æ–¹æ³•ï¼šä»”ç»†æ£€æŸ¥åå‘ç°å¹…å€¼å’Œç›¸ä½çš„å¤„ç†æœ‰é—®é¢˜ï¼Œä¸€äº›æŸå¤±å‡½æ•°å¦‚reluï¼Œsigmoidä¼šå¯¹ç»“æœæœ‰å¾ˆå¤§å½±å“ï¼Œéœ€è¦é‡æ–°åˆ†æï¼Œåˆ†ææ—¶è¦è€ƒè™‘å€¼åŸŸä»¥åŠç›¸åº”çš„å‡ ä½•æ„ä¹‰ã€‚</li></ol><h3 id="æŒç»­æ›´æ–°"><a class="markdownIt-Anchor" href="#æŒç»­æ›´æ–°"></a> æŒç»­æ›´æ–°ğŸŒˆ</h3><ol><li>è®­ç»ƒç½‘ç»œæ—¶æŠ¥é”™ï¼ŒRuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation: [torch.cuda.FloatTensor [4, 32, 320, 320]], which is output 0 of ReluBackward0, is at version 1; expected version 0 instead. Hint: enable anomaly detection to find the operation that failed to compute its gradient, with torch.autograd.set_detect_anomaly(True). åŸå› ï¼šåˆ©ç”¨aå˜é‡è¿›è¡Œä¸€æ¬¡ç½‘ç»œè¿ç®—åï¼Œä½¿ç”¨ä¿®æ”¹åçš„aå˜é‡åˆè¿›è¡Œä¸€æ¬¡ç½‘ç»œè¿ç®—ï¼Œè€Œç½‘ç»œåœ¨åå‘ä¼ æ’­æ—¶ï¼Œå‘ç°ç¬¬ä¸€æ¬¡ç½‘ç»œè¿ç®—çš„æ¢¯åº¦æº¯æºå¤±è´¥ï¼Œaå˜é‡è¢«ä¿®æ”¹äº†ã€‚è§£å†³æ–¹æ³•ï¼Œåœ¨å‡ºé”™çš„åœ°æ–¹å°†xæ¢æˆx.clone()ï¼Œä¾‹å¦‚<code>x = self.dhsa(x.clone())</code>å³å¯</li></ol>]]></content>
    
    
    <categories>
      
      <category>èµ„æ–™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å‚è€ƒèµ„æ–™åˆé›†</title>
    <link href="/2023/08/11/%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%E5%90%88%E9%9B%86/"/>
    <url>/2023/08/11/%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%E5%90%88%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%B8%80%E4%BA%9B%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0rainbowrainbowrainbow">ä¸€äº›æœ‰ä»·å€¼çš„å‚è€ƒèµ„æ–™ï¼ˆæŒç»­æ›´æ–°!ï¼‰ğŸŒˆğŸŒˆğŸŒˆ</a><ul><li><a href="#%E7%AC%AC1%E5%91%A8rainbow">ç¬¬1å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC2%E5%91%A8rainbow">ç¬¬2å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC3%E5%91%A8rainbow">ç¬¬3å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC4%E5%91%A8rainbow">ç¬¬4å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC5%E5%91%A8rainbow">ç¬¬5å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC6%E5%91%A8rainbow">ç¬¬6å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC7%E5%91%A8rainbow">ç¬¬7å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC8%E5%91%A8rainbow">ç¬¬8å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC9%E5%91%A8rainbow">ç¬¬9å‘¨ğŸŒˆ</a></li><li><a href="#%E7%AC%AC10%E5%91%A8rainbow">ç¬¬10å‘¨ğŸŒˆ</a></li><li><a href="#%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0rainbow">æŒç»­æ›´æ–°ğŸŒˆ</a></li></ul></li></ul><!-- /TOC --><h2 id="ä¸€äº›æœ‰ä»·å€¼çš„å‚è€ƒèµ„æ–™æŒç»­æ›´æ–°"><a class="markdownIt-Anchor" href="#ä¸€äº›æœ‰ä»·å€¼çš„å‚è€ƒèµ„æ–™æŒç»­æ›´æ–°"></a> ä¸€äº›æœ‰ä»·å€¼çš„å‚è€ƒèµ„æ–™ï¼ˆæŒç»­æ›´æ–°!ï¼‰ğŸŒˆğŸŒˆğŸŒˆ</h2><h3 id="ç¬¬1å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬1å‘¨"></a> ç¬¬1å‘¨ğŸŒˆ</h3><ol><li>äº†è§£äº†åœ¨çº¿æ·±åº¦å­¦ä¹ å¯è§†åŒ–è¾…åŠ©å·¥å…·wandb</li><li>å…³äºç»“æ„æ€§ç›¸ä¼¼åº¦ï¼ˆSSIMï¼‰çš„è®ºæ–‡ï¼Œã€ŠImage quality assessment: from error visibility to structural similarityã€‹</li><li>åœ¨TarDALä¸­ä½¿ç”¨æ˜¾è‘—æ€§æ£€æµ‹ä»çº¢å¤–å›¾åƒä¸­ç”Ÿæˆmaskçš„ç½‘ç»œï¼Œã€ŠR3Net: Recurrent Residual Refinement Network for Saliency Detectionã€‹</li><li>GANç½‘ç»œä¸­ä¸ºä»€ä¹ˆåˆ¤åˆ«å™¨è®­ç»ƒçš„è¶Šå¥½ï¼Œç”Ÿæˆå™¨æ¢¯åº¦æ¶ˆå¤±è¶Šä¸¥é‡ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/qq_42693593/article/details/127365516?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372361316800182792093%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169372361316800182792093&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-127365516-null-null.142%5Ev93%5Econtrol&amp;utm_term=%E4%B8%BA%E4%BB%80%E4%B9%88%E5%88%A4%E5%88%AB%E5%99%A8%E8%AE%AD%E7%BB%83%E7%9A%84%E8%B6%8A%E5%A5%BD%EF%BC%8C%E7%94%9F%E6%88%90%E5%99%A8%E6%A2%AF%E5%BA%A6%E6%B6%88%E5%A4%B1%E8%B6%8A%E4%B8%A5%E9%87%8D&amp;spm=1018.2226.3001.4187">1</a></li><li>åœ¨TarDALè®ºæ–‡ä¸­ï¼Œåˆ¤åˆ«å™¨æŸå¤±å‡½æ•°ä½¿ç”¨äº†WGAN-divæŸå¤±å‡½æ•°ï¼Œå³å¼•å…¥äº†Wassersteinæ•£åº¦ï¼Œå…·ä½“å‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/25071913">https://zhuanlan.zhihu.com/p/25071913</a>)ï¼Œ<a href="https://blog.csdn.net/qq_39237205/article/details/123718856?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372388816800182120614%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169372388816800182120614&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-5-123718856-null-null.142%5Ev93%5Econtrol&amp;utm_term=wgan-div&amp;spm=1018.2226.3001.4187">1</a>ï¼Œæ€»çš„æ¥è¯´WGANå¯ä»¥å¸®åŠ©GANç½‘ç»œçš„è®­ç»ƒå˜çš„æ›´åŠ ç¨³å®šã€‚</li><li>å…³äºå›¾åƒèåˆè¯„ä»·æŒ‡æ ‡çš„è®¡ç®—ï¼š<a href="https://blog.csdn.net/fovever_/article/details/129332278?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372348316800188584429%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169372348316800188584429&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-129332278-null-null.142%5Ev93%5Econtrol&amp;utm_term=%E5%9B%BE%E5%83%8F%E8%9E%8D%E5%90%88%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87python&amp;spm=1018.2226.3001.4187">1</a></li></ol><h3 id="ç¬¬2å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬2å‘¨"></a> ç¬¬2å‘¨ğŸŒˆ</h3><ol><li>linuxä¸‹é€šè¿‡è½¯è¿æ¥åˆ‡æ¢cudaç‰ˆæœ¬ï¼Œé¦–å…ˆ ls /usr/local | grep cudaæŸ¥çœ‹å·²å®‰è£…çš„cudaç‰ˆæœ¬ï¼Œç„¶åsudo ln -snf /usr/local/cuda-10.0 /usr/local/cudaå»ºç«‹è½¯è¿æ¥å³å¯ï¼Œ-sè¡¨ç¤ºåˆ›å»ºè½¯è¿æ¥ï¼Œ-nè¡¨ç¤ºè½¯è¿æ¥å·²å­˜åœ¨åˆ™åˆ é™¤ï¼Œ-fè¡¨ç¤ºå¼ºåˆ¶è¦†ç›–ï¼Œå…·ä½“å¯å‚è€ƒ<a href="https://blog.csdn.net/fxmtb/article/details/130573696?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169371218816800213030057%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169371218816800213030057&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-130573696-null-null.142%5Ev93%5Econtrol&amp;utm_term=linux%E4%B8%8B%E5%88%87%E6%8D%A2cuda%E7%89%88%E6%9C%AC%E8%BD%AF%E8%BF%9E%E6%8E%A5&amp;spm=1018.2226.3001.4187">1</a>ï¼Œå¦‚æœæ²¡æœ‰rootæƒé™ï¼Œå¯é€šè¿‡ä¿®æ”¹~/.bashrcæ–‡ä»¶çš„æ–¹æ³•åˆ‡æ¢ï¼Œå…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/Marquis_Z/article/details/129683777?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169371196516800211516194%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169371196516800211516194&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-129683777-null-null.142%5Ev93%5Econtrol&amp;utm_term=linux%E4%B8%8B%E5%88%87%E6%8D%A2cuda%E7%89%88%E6%9C%AC&amp;spm=1018.2226.3001.4187">2</a>,<a href="https://blog.csdn.net/deersonglzx/article/details/132103228?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169371204116800188517144%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169371204116800188517144&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-1-132103228-null-null.142%5Ev93%5Econtrol&amp;utm_term=linux%E4%B8%8B%E5%88%87%E6%8D%A2cuda%E7%89%88%E6%9C%AC&amp;spm=1018.2226.3001.4187">3</a></li><li>vscodeè¿œç¨‹è°ƒè¯•ä¸­æ–‡ä»¶è·¯å¾„æ— æ³•æ‰¾åˆ°æ—¶ï¼Œå¯ä»¥å°†launch.jsonä¸­pargramè®¾ç½®ä¸ºè¿è¡Œæ–‡ä»¶ï¼Œcwdè®¾ç½®ä¸ºè¿è¡Œç›®å½•ï¼Œè¿™æ ·å³å¯æ­£å¸¸è°ƒè¯•ã€‚</li><li>è°ƒè¯•è¿‡ç¨‹æŸ¥çœ‹æ¢¯åº¦ï¼šåœ¨vscodeè°ƒè¯•æ—¶ï¼Œå°è¯•åœ¨è°ƒè¯•æ§åˆ¶å°æŸ¥çœ‹æ¨¡å‹çš„æ¢¯åº¦ï¼Œä½†æ˜¯åªèƒ½åœ¨å˜é‡ä¸­çœ‹åˆ°nn.module.parameters()å‡½æ•°ï¼Œè¦å…·ä½“æŸ¥çœ‹å‚æ•°éœ€è¦é€šè¿‡ä»£ç å°†æ¢¯åº¦æ‰“å°å‡ºæ¥ï¼Œå¦‚for name, param in self.detect.net.named_parameters(): print(name, param.grad)ï¼Œç»è¿‡è°ƒè¯•å¾—å‡ºï¼Œåœ¨ä¼˜åŒ–å™¨æ›´æ–°å‚æ•°æ—¶ï¼Œåªæœ‰æ¨¡å‹çš„lossç»è¿‡backward()å›ä¼ æ‰ä¼šè®¡ç®—æ¢¯åº¦ï¼Œæ¯”å¦‚gloss=a * floss+b * dlossï¼Œå¦‚æœa=0ï¼Œé‚£ä¹ˆgloss.backward()åï¼Œä¼šè®¡ç®—æ¨¡å‹dæ¢¯åº¦è€Œä¸ä¼šè®¡ç®—æ¨¡å‹fçš„æ¢¯åº¦ã€‚</li><li>pytorchä¸­permuteå‡½æ•°å’Œview()/reshape()å‡½æ•°çš„åŒºåˆ«ï¼Œå‰è€…æ˜¯åœ¨ç»´åº¦ä¸Šäº’æ¢æˆ–è€…é‡æ–°æ’åˆ—ï¼Œåè€…ç›¸å½“äºå°†æ‰€æœ‰å…ƒç´ é‡æ–°å–å‡ºå†æ’åˆ—ã€‚è¯¦ç»†å‚è€ƒ<a href="https://blog.csdn.net/Dust_Evc/article/details/128565263?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=permute%E5%92%8Cview/reshape%E5%8C%BA%E5%88%AB&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-128565263.142%5Ev93%5Econtrol&amp;spm=1018.2226.3001.4187">1</a>,<a href="https://blog.csdn.net/ODIMAYA/article/details/123898732?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169371133116800226577302%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169371133116800226577302&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-11-123898732-null-null.142%5Ev93%5Econtrol&amp;utm_term=permute%E5%92%8Cview%2Freshape%E5%8C%BA%E5%88%AB&amp;spm=1018.2226.3001.4187">2</a>ï¼ŒåŒæ—¶torch.nn.Flattenä¸torch.flattenä¹Ÿæœ‰ç‚¹å°åŒºåˆ«ï¼Œå³å‰è€…é»˜è®¤ä»ç»´åº¦1å¼€å§‹ï¼Œåè€…é»˜è®¤ä»ç»´åº¦0å¼€å§‹ã€‚</li><li>einopsåº“ä¸­çš„çŸ©é˜µæ“ä½œä¸einsumçŸ©é˜µä¹˜æ³•ï¼Œå‚è€ƒï¼š<a href="https://blog.csdn.net/a486259/article/details/126966772?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169370823316800182774809%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169370823316800182774809&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-6-126966772-null-null.142%5Ev93%5Econtrol&amp;utm_term=einops%E4%B8%8Eeinsum&amp;spm=1018.2226.3001.4187">1</a></li><li>å…³äºdataloaderä¸­çš„collate_fnå‡½æ•°ï¼Œä»–çš„ä½œç”¨æ˜¯æ‰‹åŠ¨è°ƒæ•´1ä¸ªbatchä¸­çš„æ•°æ®çš„ç»„ç»‡æ–¹å¼ï¼Œå…¶ä¼ å…¥å‚æ•°ä¸ºbatch(1ä¸ªå¤§å°ä¸ºbatchsizeçš„list)ï¼Œå…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/dong_liuqi/article/details/114521240">1</a>ï¼Œå¦‚æœ__getitem__å‡½æ•°ä¸­å‡ºç°æ ‡ç­¾ä¸ºç©ºçš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡collate_fnè¿›è¡Œæ”¹åŠ¨ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/guyuealian/article/details/91129367###">2</a></li><li>pytorchä¸­torchvision.transform.Resize()å’Œtorch.nn.functions.interpolateçš„åŒºåˆ«ï¼šå‰è€…æ˜¯åŸºäºæ’å€¼å®ç°çš„ï¼Œç”¨äºè°ƒæ•´å›¾åƒçš„å¤§å°ï¼Œåè€…å¸¸ç”¨äºå¯¹ç‰¹å¾å›¾è¿›è¡Œä¸Šé‡‡æ ·ç­‰æ“ä½œã€‚æ›´å¤šå…³äºå›¾åƒé¢„å¤„ç†çš„æ–¹æ³•ï¼Œå‚è€ƒtorchvisionå®˜æ–¹æ–‡æ¡£(<a href="https://pytorch.org/vision/0.15/transforms.html#transforms-scriptability">https://pytorch.org/vision/0.15/transforms.html#transforms-scriptability</a>)</li><li>IEEE Conference latexæ¨¡æ¿ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/Hsin96/article/details/121133441">1</a>ï¼Œlatexåˆ—è¡¨çš„ä½¿ç”¨ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/xovee/article/details/106365532?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372332716800188537784%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169372332716800188537784&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-106365532-null-null.142%5Ev93%5Econtrol&amp;utm_term=latex%E5%88%97%E8%A1%A8&amp;spm=1018.2226.3001.4187">2</a></li><li>pptç»˜å›¾åä½¿ç”¨vbaå®1é”®å¯¼å‡ºä¸ºpdfå¹¶è£å‰ªï¼Œå‚è€ƒ<a href="https://blog.csdn.net/leida_wt/article/details/114326133?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169372340516800180676210%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169372340516800180676210&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-114326133-null-null.142%5Ev93%5Econtrol&amp;utm_term=ppt%E4%BD%BF%E7%94%A8vba%E5%AF%BC%E5%87%BApdf&amp;spm=1018.2226.3001.4187">1</a>ï¼Œè¿™é‡Œvbaä»£ç ä¸­ä½¿ç”¨pdfcropåœ¨æˆ‘çš„ç”µè„‘ä¸­å¤±æ•ˆï¼Œå¯ä»¥shellä»£ç æ”¹ä¸ºShell &quot;pdfcrop &quot; &amp; strNotes &amp; sExt &amp; &quot; &quot; &amp; strNotes &amp; sExtï¼Œç„¶ååœ¨å‰é¢åŠ ä¸ŠChDir sPathæ›´æ”¹å·¥ä½œè·¯å¾„ï¼Œæˆ–è€…æ‰‹åŠ¨ä½¿ç”¨pdfcropè¿›è¡Œpdfè£å‰ª</li><li>ç§‘ç ”ä½œå›¾å’Œè¡¨æ ¼å‚è€ƒï¼š(<a href="https://zhuanlan.zhihu.com/p/603088040">https://zhuanlan.zhihu.com/p/603088040</a>)</li><li>ç»Ÿè®¡æ¨¡å‹å‚æ•°é‡å’Œè®¡ç®—é‡ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/qq_43426908/article/details/130338449?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169370415016800182723428%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169370415016800182723428&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-4-130338449-null-null.142%5Ev93%5Econtrol&amp;utm_term=torchstat&amp;spm=1018.2226.3001.4187">1</a></li><li>etc.ï¼Œet al.ï¼Œi.e.ï¼Œe.g.çš„åŒºåˆ«ï¼Œå‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/85630819">https://zhuanlan.zhihu.com/p/85630819</a>)</li><li>å›¾åƒçš„ç›¸å…³ç³»æ•°è®¡ç®—ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/weixin_30394333/article/details/95754064?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E5%9B%BE%E5%83%8F%E7%9A%84%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0%E8%AE%A1%E7%AE%97&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-95754064.142%5Ev93%5Econtrol&amp;spm=1018.2226.3001.4187">1</a></li><li>å…³äºèŒƒæ•°ï¼Œ0èŒƒæ•°è¡¨ç¤ºéé›¶å…ƒç´ ä¸ªæ•°ï¼Œ1èŒƒæ•°è¡¨ç¤ºæ‰€æœ‰å…ƒç´ ç»å¯¹å€¼ä¹‹å’Œï¼Œ2èŒƒæ•°è¡¨ç¤ºæ‰€æœ‰å…ƒç´ é—´å¹³æ–¹å’Œï¼Œæ— ç©·èŒƒæ•°è¡¨ç¤ºæ‰€æœ‰å…ƒç´ æœ€å¤§å€¼ï¼Œå¯¹äºä¸¤ä¸ªå‘é‡ï¼ŒL1èŒƒæ•°åˆå«æ›¼å“ˆé¡¿è·ç¦»ï¼Œæ˜¯å…ƒç´ é—´çš„ç»å¯¹è¯¯å·®å’Œ(å·®çš„ç»å¯¹å€¼æ±‚å’Œ)ï¼Œè€ŒL2èŒƒæ•°æ˜¯æ¬§æ°è·ç¦»ï¼Œæ˜¯å…ƒç´ é—´çš„å¹³æ–¹å·®å’Œã€‚</li><li>æ¢¯åº¦è£å‰ªnn.utils.clip_grad_norm_çš„ä½¿ç”¨ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/Mikeyboi/article/details/119522689">1</a>ï¼Œ<a href="https://blog.csdn.net/zhaohongfei_358/article/details/122820992?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169365178316800213092562%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169365178316800213092562&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-122820992-null-null.142%5Ev93%5Econtrol&amp;utm_term=nn.utils.clip_grad_norm_&amp;spm=1018.2226.3001.4187">2</a></li><li>æœ¬åœ°æ–‡ä»¶ä¼ è¾“åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œè¿œç¨‹æœåŠ¡å™¨æ–‡ä»¶äº’ç›¸ä¼ è¾“ï¼Œå‚è€ƒï¼š(<a href="https://cloud.tencent.com/developer/article/2092491">https://cloud.tencent.com/developer/article/2092491</a>)</li><li>æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½®ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/lu962820662/article/details/129340504?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169365169716800211535651%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=169365169716800211535651&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-3-129340504-null-null.142%5Ev93%5Econtrol&amp;utm_term=linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%98%B2%E7%81%AB%E5%A2%99%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8&amp;spm=1018.2226.3001.4187">1</a></li><li>å…³äºè‡ªæ³¨æ„åŠ›çš„æ„ä¹‰çš„è¯¦ç»†è§£æï¼Œå‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/410776234">https://zhuanlan.zhihu.com/p/410776234</a>)</li><li>BatchNormï¼ŒLayerNormï¼ŒGroupNormçš„åŒºåˆ«ï¼Œå‚è€ƒï¼š<a href="https://blog.csdn.net/qq_43426908/article/details/123119919?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169365115016800225577832%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169365115016800225577832&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-123119919-null-null.142%5Ev93%5Econtrol&amp;utm_term=batchnorm%20layernorm%20%20groupnorm&amp;spm=1018.2226.3001.4187">1</a></li><li>pythonå¹¿æ’­æœºåˆ¶çš„ç”¨æ³•ï¼Œå‚è€ƒï¼š(<a href="https://zhuanlan.zhihu.com/p/86997775">https://zhuanlan.zhihu.com/p/86997775</a>)</li><li>h5pyåº“çš„ç”¨æ³•ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/csdn15698845876/article/details/73278120?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%2273278120%22%2C%22source%22%3A%22qq_45909764%22%7D&amp;fromshare=blogdetail">1</a></li></ol><h3 id="ç¬¬3å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬3å‘¨"></a> ç¬¬3å‘¨ğŸŒˆ</h3><ol><li>ä¸¤å°æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡ä»¶çš„æ–¹æ³•ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/Black_8/article/details/122925549?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22122925549%22%2C%22source%22%3A%22qq_45909764%22%7D&amp;fromshare=blogdetail">1</a></li><li>å…³äºpythonä¸­æ–‡ä»¶è·¯å¾„çš„ä»‹ç»ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/The_Time_Runner/article/details/84147220?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%2284147220%22%2C%22source%22%3A%22qq_45909764%22%7D&amp;fromshare=blogdetail">1</a></li><li>å…³äºpythonä¸­super()å‡½æ•°ï¼Œæœ‰æ—¶å€™çœ‹åˆ°åœ¨superå‡½æ•°ä¸­ä¼ é€’å½“å‰ç±»çš„å®ä¾‹å¦‚super(AttentionBase, self).<strong>init</strong>()ï¼Œåˆæ˜¯åˆ™ä¸ä¼ é€’ï¼Œå¦‚super().<strong>init</strong>()ï¼Œåœ¨Python 3ä¸­ï¼Œå¦‚æœsuper()ä¸ä¼ é€’ä»»ä½•å‚æ•°ï¼Œåˆ™å‡½æ•°å°†è‡ªåŠ¨ä½¿ç”¨å½“å‰ç±»å’Œå®ä¾‹ä½œä¸ºå‚æ•°ã€‚å› æ­¤ç›´æ¥super().<strong>init</strong>()ä¸å‰è€…æ˜¯ç­‰æ•ˆçš„ã€‚</li><li>listï¼Œnumpyï¼Œtensoräº’ç›¸è½¬æ¢åŠå¸¸ç”¨æ“ä½œï¼Œå‚è€ƒï¼š<a href="https://blog.csdn.net/onion_rain/article/details/107460601?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22107460601%22%2C%22source%22%3A%22qq_45909764%22%7D&amp;fromshare=blogdetail">1</a></li><li>å¯¹listè¿›è¡Œ[:None]å’Œ[None:]çš„ä½œç”¨ï¼Œå‚è€ƒï¼š(<a href="https://zhuanlan.zhihu.com/p/598562546">https://zhuanlan.zhihu.com/p/598562546</a>)</li><li>å…³äºä½¿ç”¨np.percentileè®¡ç®—ç™¾åˆ†ä½æ•°çš„ç”¨æ³•ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/yxf771hotmail/article/details/131849484?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22131849484%22%2C%22source%22%3A%22qq_45909764%22%7D&amp;fromshare=blogdetail">1</a></li><li>pythonå¯¼å…¥ä¸Šçº§ç›®å½•. åŒçº§ç›®å½•. ä¸‹çº§ç›®å½•çš„åŒ…ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/gaifuxi9518/article/details/81038818?ops_request_misc=%7B%22request%5Fid%22%3A%22169382667516800197050835%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169382667516800197050835&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-81038818-null-null.142%5Ev93%5Econtrol&amp;utm_term=python%E5%AF%BC%E5%85%A5%E5%8C%85%E7%9A%84%E5%8E%9F%E7%90%86&amp;spm=1018.2226.3001.4187">1</a>ï¼Œ<a href="https://blog.csdn.net/anshiquanshu/article/details/116174774?ops_request_misc=%7B%22request%5Fid%22%3A%22169381126916800225545986%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169381126916800225545986&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-5-116174774-null-null.142%5Ev93%5Econtrol&amp;utm_term=python%E6%89%BE%E4%B8%8D%E5%88%B0%E4%B8%8A%E7%BA%A7%E7%9B%AE%E5%BD%95%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9&amp;spm=1018.2226.3001.4187">2</a>ï¼Œä¸ºäº†å‡å°‘å¯¼å…¥åŒ…æ—¶å€™çš„é”™è¯¯ï¼Œå¯¼å…¥åŒä¸€åŒ…(ç›®å½•)ä¸­çš„æ¨¡å—åº”ä½¿ç”¨ç›¸å¯¹å¯¼å…¥(.)ï¼Œå¯¼å…¥å…¶ä»–åŒ…ä¸­æ¨¡å—åº”ä½¿ç”¨ç»å¯¹å¯¼å…¥ã€‚</li><li>å…³äºpythonä¸­çš„è§£åŒ…å’Œæ‰“åŒ…ï¼Œ<em>é€šå¸¸ç”¨äºè§£åŒ…ï¼Œå¦‚<code>a=[[1,2],[3,4]]</code>ï¼Œåˆ™ä½¿ç”¨</em>aè¿”å›ä¸¤ä¸ªListï¼Œ<code>[1,2]</code>å’Œ<code>[3,4]</code>ï¼Œä½¿ç”¨zipè¿›è¡Œæ‰“åŒ…ï¼Œå®ƒä¼šå°†ä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡ç›¸åŒä½ç½®çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾‹å¦‚<code>a=[1,2]</code>ï¼Œ<code>b=[3,4]</code>ï¼Œzip(a,b)ä¼šå¾—åˆ°ä¸¤ä¸ªå…ƒç»„<code>(1,3)ï¼Œ(2,4)</code>ï¼Œå¯ä»¥ç”¨foræ¥è¿›è¡Œè¿­ä»£ã€‚é€šå¸¸åœ¨__collate_fn__ä¸­ï¼Œä½¿ç”¨zip(*batch)é‡æ–°ç»„ç»‡ä¸€æ‰¹æ•°æ®ï¼Œä¾‹å¦‚get_itemå‡½æ•°è¿”å›äº†ä¸¤ä¸ªåˆ—è¡¨a,bï¼Œå‡è®¾batchsizeä¸º8ï¼Œä¼ å…¥åˆ°__collate_fn__ä¸­çš„batchæ˜¯ä¸€ä¸ªåŒ…å«8ä¸ªå…ƒç´ çš„listï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ºå…ƒç»„(a,b)ï¼Œ*batchä¼šå°†listè§£åŒ…ï¼Œç„¶åzipä¼šå°†8ä¸ªå…ƒç»„ä¸­çš„aæ‰“åŒ…æˆä¸€ä¸ªæ–°çš„å…ƒç»„ï¼Œç„¶åå°†8ä¸ªå…ƒç»„ä¸­çš„bæ‰“åŒ…æˆä¸€ä¸ªæ–°çš„å…ƒç»„ï¼Œä¹Ÿå°±æ˜¯è¯´å¾—åˆ°äº†ä¸¤ä¸ªæ–°å…ƒç»„x(ç”±8ä¸ªaç»„æˆ)å’Œy(ç”±8ä¸ªbç»„æˆ)ï¼Œç„¶ååˆ†åˆ«è¿”å›xï¼Œyå³å¯ã€‚</li><li>å…³äºparams_groupï¼Œä»¥åŠå¦‚ä½•ä¸ºä¸åŒå±‚è®¾ç½®ä¸åŒå­¦ä¹ ç‡ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/weixin_45464524/article/details/130456843?ops_request_misc=%7B%22request%5Fid%22%3A%22169390449016800192272047%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169390449016800192272047&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-2-130456843-null-null.142%5Ev93%5Econtrol&amp;utm_term=pytorch%E7%9A%84params_group&amp;spm=1018.2226.3001.4187">1</a>ï¼Œ<a href="https://zhuanlan.zhihu.com/p/347929433">2</a>ï¼Œ<a href="https://blog.csdn.net/weixin_45464524/article/details/130477798?ops_request_misc=%7B%22request%5Fid%22%3A%22169407405916800184146887%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169407405916800184146887&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-130477798-null-null.142%5Ev93%5Econtrol&amp;utm_term=%E4%BD%BF%E7%94%A8params_group%E5%AF%B9%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE%E4%B8%8D%E5%90%8C%E5%AD%A6%E4%B9%A0%E7%8E%87&amp;spm=1018.2226.3001.4187">3</a>ã€‚</li><li>å…³äºpythonä¸­çŸ©é˜µä¹˜æ³•multiply(). dot().  matmul(). â€™ * '. '@'çš„åŒºåˆ«ï¼Œå‚è€ƒ:<a href="https://blog.csdn.net/u011851421/article/details/83783826?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=@,dot,multiply%E7%9A%84%E5%8C%BA%E5%88%AB&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-83783826.142%5Ev93%5Econtrol&amp;spm=1018.2226.3001.4187">1</a></li><li>optimizer.zero_gradå’Œmodel.zero_gradçš„åŒºåˆ«ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/qq_32614873/article/details/128626028?ops_request_misc=%7B%22request%5Fid%22%3A%22169400319916777224491083%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169400319916777224491083&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-128626028-null-null.142%5Ev93%5Econtrol&amp;utm_term=model.zero_grad()%E5%92%8Coptimizer.zero_grad()&amp;spm=1018.2226.3001.4187">1</a>ã€‚</li><li>pytorchçš„æ˜¾å­˜åˆ†é…æœºåˆ¶ï¼Œå‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/424512257">https://zhuanlan.zhihu.com/p/424512257</a>)</li><li>å“ªäº›éƒ¨åˆ†éœ€è¦to(device)? æŸå¤±å‡½æ•°éœ€ä¸éœ€è¦to(device)? å‚è€ƒ<a href="https://blog.csdn.net/virus111222/article/details/129773728?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=pytorch%E5%93%AA%E4%BA%9B%E9%9C%80%E8%A6%81to(device)&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-129773728.142%5Ev93%5Econtrol&amp;spm=1018.2226.3001.4187">1</a></li><li>å…³äºåˆ†ç»„å·ç§¯ï¼Œå³conv2dä¸­groupså‚æ•°ï¼Œæ¯ä¸ªå·ç§¯æ ¸çš„é€šé“æ•°ä¸ºin_channel / groupsï¼Œç„¶åå…±æœ‰out_channelsä¸ªå·ç§¯æ ¸ï¼Œæ¯ä¸ªç»„å†…æœ‰out_channels / groupsä¸ªå·ç§¯æ ¸ï¼Œæ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„è¾“å…¥è¾“å‡ºé€šé“æ•°ä»¥åŠgroupséƒ½ç›¸åŒï¼Œå…·ä½“ä¾‹å­å‚è€ƒ<a href="https://blog.csdn.net/u012633319/article/details/109171775?ops_request_misc=%7B%22request%5Fid%22%3A%22169443420016800180671495%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169443420016800180671495&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-109171775-null-null.142%5Ev93%5Econtrol&amp;utm_term=conv2d%E7%9A%84groups%E5%8F%82%E6%95%B0&amp;spm=1018.2226.3001.4187">1</a></li><li>å…³äºå…¨å±€å¹³å‡æ± åŒ–(GAP)çš„åŸç†ä»¥åŠå®ç°ã€‚å‚è€ƒ<a href="https://blog.csdn.net/qq_41990294/article/details/128930017?ops_request_misc=%7B%22request%5Fid%22%3A%22169466072616800185863464%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169466072616800185863464&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-128930017-null-null.142%5Ev94%5Econtrol&amp;utm_term=globalaveragepooling&amp;spm=1018.2226.3001.4187">1</a>ï¼Œpytorchä¸­ä¸»è¦é€šè¿‡è‡ªé€‚åº”æ± åŒ–å®ç°ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/weixin_45928096/article/details/122506640?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169926028516777224462932%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169926028516777224462932&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-122506640-null-null.142%5Ev96%5Epc_search_result_base5&amp;utm_term=adaptive%20avg%20pool&amp;spm=1018.2226.3001.4187">2</a></li></ol><h3 id="ç¬¬4å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬4å‘¨"></a> ç¬¬4å‘¨ğŸŒˆ</h3><ol><li>å…³äºæ¨¡å‹æ–­ç‚¹ç»§ç»­è®­ç»ƒï¼Œå‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/611485709">https://zhuanlan.zhihu.com/p/611485709</a>),                           (<a href="https://zhuanlan.zhihu.com/p/647349640">https://zhuanlan.zhihu.com/p/647349640</a>)</li><li>å…³äºè¿›åº¦æ¡tqdmçš„ä½¿ç”¨ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/wxd1233/article/details/118371404">https://blog.csdn.net/wxd1233/article/details/118371404</a>)</li><li>å…³äºè¯åµŒå…¥å‘é‡torch.nn.Embeddingï¼Œå‚è€ƒ<a href="https://blog.csdn.net/athrunsunny/article/details/123068113?spm=1001.2014.3001.5501">1</a></li><li>åŒˆç‰™åˆ©ç®—æ³•å¸¸ç”¨æ¥è§£å†³æœ€ä¼˜æŒ‡æ´¾é—®é¢˜ï¼Œåœ¨DETRé‡Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºæ¯ä¸€ä¸ªgtåŒ¹é…åˆ°å”¯ä¸€çš„queryï¼Œä»è€Œä½¿ä»£ä»·çŸ©é˜µçš„åŒ¹é…æˆåŠŸçš„queryå’Œgtçš„ä»£ä»·å’Œæœ€å°ï¼Œå…³äºåŒˆç‰™åˆ©ç®—æ³•çš„ç®€å•ç†è§£ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/athrunsunny/article/details/123504015?spm=1001.2014.3001.5502">1</a></li><li>å„ç§IOUçš„ä»‹ç»ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/weixin_43694096/article/details/126455488?ops_request_misc=%7B%22request%5Fid%22%3A%22169544548316800180675276%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=169544548316800180675276&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~times_rank-17-126455488-null-null.142%5Ev94%5Econtrol&amp;utm_term=ciou,diou,giou&amp;spm=1018.2226.3001.4187">1</a></li><li>latexé…ç½®cå’Œpythonä»£ç å—é£æ ¼ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/Aldielshala/article/details/89840206">1</a>ï¼Œ<a href="https://zhuanlan.zhihu.com/p/464141424">2</a></li><li>latexå†™ä¼ªä»£ç ï¼Œå‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/599142563">https://zhuanlan.zhihu.com/p/599142563</a>)ï¼Œ(<a href="https://zhuanlan.zhihu.com/p/572285214">https://zhuanlan.zhihu.com/p/572285214</a>)</li><li>plt.subplotsçš„ä½¿ç”¨,å‚è€ƒ<a href="https://blog.csdn.net/weixin_39258979/article/details/126039763">1</a></li></ol><h3 id="ç¬¬5å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬5å‘¨"></a> ç¬¬5å‘¨ğŸŒˆ</h3><ol><li>ä½¿ç”¨algorithmicå®åŒ…ç¼–å†™ä¼ªä»£ç æ—¶çš„åˆ†é¡µé—®é¢˜ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/Yiigel/article/details/53840888">https://blog.csdn.net/Yiigel/article/details/53840888</a>)</li><li>cvä¸­çš„ç»å¯¹ä½ç½®ç¼–ç å’Œç›¸å¯¹ä½ç½®ç¼–ç ï¼Œç»å¯¹ä½ç½®ç¼–ç ï¼šä¸€èˆ¬æ˜¯å¯å­¦ä¹ çš„ï¼Œå®ç°éå¸¸ç®€æ´ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå½¢çŠ¶å’Œç»è¿‡patch_embeddingåçš„è¾“å‡ºxç›¸åŒçš„å‚æ•°ï¼Œç„¶åç›´æ¥åŠ åˆ°xä¸Šï¼Œåœ¨è®­ç»ƒé˜¶æ®µä¸€èµ·è®­ç»ƒï¼Œæœ‰ç‚¹åƒåŠ äº†ä¸€ä¸ªå¯å­¦ä¹ çš„biasï¼ŒVITä¸­ä½¿ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚å¯¹äºç›¸å¯¹ä½ç½®ç¼–ç ï¼šç»å¯¹ä½ç½®ç¼–ç æ˜¯åœ¨patch_embeddingä¹‹åï¼Œè®¡ç®—è‡ªæ³¨æ„åŠ›(Q,K,V)ä¹‹å‰ï¼Œè€Œç›¸å¯¹ä½ç½®ç¼–ç æ˜¯åœ¨è®¡ç®—è‡ªæ³¨æ„åŠ›çš„æ—¶å€™åŠ å…¥çš„ï¼Œåœ¨swin transformerä¸­ï¼Œå°†äºŒç»´ä½ç½®ä¿¡æ¯è½¬æ¢ä¸ºä¸€ç»´ä½ç½®ä¿¡æ¯ï¼Œç„¶åå»æ ¹æ®ç›¸å¯¹ä½ç½®åç§»è¡¨æŸ¥è¯¢å…·ä½“çš„å€¼ï¼Œä½ç½®åç§»è¡¨çš„å€¼æ˜¯è®­ç»ƒå‡ºæ¥çš„ï¼Œåœ¨æ–‡ç« ä¸­ï¼Œç›¸å¯¹ä½ç½®ç¼–ç æ•ˆæœå¥½äºç»å¯¹ä½ç½®ç¼–ç ã€‚å…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/qq_43733107/article/details/127077056">è¿™é‡Œ</a>ã€‚</li><li>dense blockï¼Œæ¯ä¸€å±‚å°†ä¹‹å‰æ‰€æœ‰å±‚çš„è¾“å…¥è¿›è¡Œæ‹¼æ¥ï¼Œä¹‹åå°†è¾“å‡ºçš„ç‰¹å¾å›¾ä¼ é€’ç»™ä¹‹åçš„æ‰€æœ‰å±‚ï¼Œå¯ä»¥å¯ä»¥å‡è½»æ¢¯åº¦æ¶ˆå¤±ç°è±¡ï¼ŒåŠ å¼ºç‰¹å¾çš„èåˆã€‚å‚è€ƒ(<a href="https://www.jianshu.com/p/0b8fc900abef">https://www.jianshu.com/p/0b8fc900abef</a>)</li><li>å…³äºå˜å¼‚ç³»æ•°CV(coefficient of variation)ï¼Œéœ€è¦æ¯”è¾ƒä¸¤ç»„æ•°æ®ç¦»æ•£ç¨‹åº¦å¤§å°çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ç»„æ•°æ®çš„æµ‹é‡å°ºåº¦ç›¸å·®å¤ªå¤§ï¼Œæˆ–è€…æ•°æ®é‡çº²çš„ä¸åŒï¼Œç›´æ¥ä½¿ç”¨æ ‡å‡†å·®æ¥è¿›è¡Œæ¯”è¾ƒä¸åˆé€‚ï¼Œæ­¤æ—¶å°±åº”å½“æ¶ˆé™¤æµ‹é‡å°ºåº¦å’Œé‡çº²çš„å½±å“ï¼Œè€Œå˜å¼‚ç³»æ•°å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒæ˜¯åŸå§‹æ•°æ®æ ‡å‡†å·®ä¸åŸå§‹æ•°æ®å¹³å‡æ•°çš„æ¯”ã€‚CVæ²¡æœ‰é‡çº²ï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œå®¢è§‚æ¯”è¾ƒäº†ã€‚äº‹å®ä¸Šï¼Œå¯ä»¥è®¤ä¸ºå˜å¼‚ç³»æ•°å’Œæå·®. æ ‡å‡†å·®å’Œæ–¹å·®ä¸€æ ·ï¼Œéƒ½æ˜¯åæ˜ æ•°æ®ç¦»æ•£ç¨‹åº¦çš„ç»å¯¹å€¼ã€‚å…¶æ•°æ®å¤§å°ä¸ä»…å—å˜é‡å€¼ç¦»æ•£ç¨‹åº¦çš„å½±å“ï¼Œè€Œä¸”è¿˜å—å˜é‡å€¼å¹³å‡æ°´å¹³å¤§å°çš„å½±å“ã€‚å‚è€ƒ<a href="https://blog.csdn.net/m0_64799907/article/details/130041485?ops_request_misc=%7B%22request%5Fid%22%3A%22169745656316800225536260%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169745656316800225536260&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-130041485-null-null.142%5Ev96%5Econtrol&amp;utm_term=coefficientofvariation&amp;spm=1018.2226.3001.4187">1</a></li><li>git fetch å’Œgit pullçš„åŒºåˆ«ï¼Œgit fetchæ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰åˆ°æœ¬åœ°ï¼Œç”¨æˆ·åœ¨æ£€æŸ¥äº†ä»¥åå†³å®šæ˜¯å¦åˆå¹¶åˆ°å·¥ä½œæœ¬æœºåˆ†æ”¯ä¸­ã€‚è€Œgit pull åˆ™æ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰ä¸‹æ¥åç›´æ¥åˆå¹¶ï¼Œå³ï¼šgit pull = git fetch + git mergeï¼Œè¿™æ ·å¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ã€‚</li><li>è½¬ç½®å·ç§¯çš„è®¡ç®—è¯¦è§£ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/ZhaoDongyu_AK47/article/details/130602195">1</a></li></ol><h3 id="ç¬¬6å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬6å‘¨"></a> ç¬¬6å‘¨ğŸŒˆ</h3><ol><li>æ–°è®¾å¤‡é…ç½®gitæ—¶ï¼ŒéªŒè¯æ˜¯å¦æˆåŠŸssh -T <a href="mailto:git@github.com">git@github.com</a>ï¼Œå¯æ™ºå¹³å°åŒç†ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/m0_72983118/article/details/130546429">1</a></li><li>vboxçš„è™šæ‹Ÿç¯å¢ƒçš„å¤åˆ¶ï¼Œåªéœ€è¦å¤åˆ¶.vbox, .vdi, vbox-prevæ–‡ä»¶åˆ°ç›¸åŒè·¯å¾„ï¼Œç„¶ååœ¨vboxä¸­æ³¨å†Œå³å¯</li><li>vscodeç»ˆç«¯æ”¯æŒcondaå‘½ä»¤ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/takedachia/article/details/124694616">1</a></li><li>listçš„extendå’Œappendçš„åŒºåˆ«ï¼šappendï¼ˆï¼‰ç”¨äºåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡ï¼Œè¾“å…¥å‚æ•°ä¸ºå¯¹è±¡ï¼›extendï¼ˆï¼‰ç”¨äºåœ¨åˆ—è¡¨æœ«å°¾è¿½åŠ å¦ä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼Œè¾“å…¥å¯¹è±¡ä¸ºå…ƒç´ é˜Ÿåˆ—ï¼›</li><li>numpyçš„ravelå’Œflattenå‡½æ•°çš„åŒºåˆ«ï¼šå‚è€ƒ<a href="https://blog.csdn.net/liuweiyuxiang/article/details/78220080?ops_request_misc=%7B%22request%5Fid%22%3A%22169830186016800186578235%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=169830186016800186578235&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-78220080-null-null.142%5Ev96%5Epc_search_result_base5&amp;utm_term=ravel%E5%87%BD%E6%95%B0&amp;spm=1018.2226.3001.4187">1</a></li><li>delctypeå’Œautoçš„åŒºåˆ«ï¼ŒäºŒè€…éƒ½ç”¨äºè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œä½†delctypeæ›´ä¸ºçµæ´»ï¼Œautoæ‰€ä¿®é¥°çš„å˜é‡å¿…é¡»è¢«åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨éœ€è¦é€šè¿‡åˆå§‹åŒ–æ¥ç¡®å®šautoæ‰€ä»£è¡¨çš„ç±»å‹ï¼Œå³å¿…é¡»è¦å®šä¹‰å˜é‡ã€‚è‹¥ä»…å¸Œæœ›å¾—åˆ°ç±»å‹ï¼Œåˆ™å¯ä»¥ç”¨delctypeï¼Œå¦‚ä¸€äº›æ’åºè§„åˆ™éœ€è¦ä½¿ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥ç”¨lambdaè¡¨è¾¾å¼å®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œç„¶åç”¨decltypeè‡ªåŠ¨æ¨å¯¼ã€‚å‚è€ƒ(<a href="https://zhuanlan.zhihu.com/p/152154499">https://zhuanlan.zhihu.com/p/152154499</a>)</li></ol><h3 id="ç¬¬7å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬7å‘¨"></a> ç¬¬7å‘¨ğŸŒˆ</h3><ol><li>pythonä¸­å‡½æ•°å‘½åæ—¶ä¸‹åˆ’çº¿çš„ä½œç”¨ï¼Œå•å‰ç½®ä¸‹åˆ’çº¿ä½œä¸ºç±»åæˆ–è€…å‡½æ•°åæ—¶ï¼Œè¡¨ç¤ºä¼šé˜»æ­¢å…¶ä»–pythonè„šæœ¬é€šè¿‡ã€from module import *ã€‘è¯­å¥å¯¼å…¥è¯¥åå­—ï¼Œå³è¯¥åå­—ä¸ä¼šè¢«æ˜Ÿå·åŒ¹é…ï¼›å‰åå‡å¸¦æœ‰åŒä¸‹åˆ’çº¿çš„åå­—ï¼Œä¸€èˆ¬ç”¨äºç‰¹æ®Šæ–¹æ³•çš„å‘½åï¼Œç”¨æ¥å®ç°å¯¹è±¡çš„ä¸€äº›è¡Œä¸ºæˆ–è€…åŠŸèƒ½ï¼Œå¦‚__new__()æ–¹æ³•ç”¨æ¥åˆ›å»ºå®ä¾‹ï¼Œ<strong>init</strong>()æ–¹æ³•ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œx + yæ“ä½œè¢«æ˜ å°„ä¸ºæ–¹æ³•x.<strong>add</strong>(y)ï¼Œåºåˆ—æˆ–è€…å­—å…¸çš„ç´¢å¼•æ“ä½œx[k]æ˜ å°„ä¸ºx.<strong>getitem</strong>(k), <strong>len</strong>(), <strong>str</strong>()åˆ†åˆ«è¢«å†…ç½®å‡½æ•°len(). str()è°ƒç”¨ç­‰ç­‰ï¼›ä»…å¼€å¤´å¸¦åŒä¸‹åˆ’çº¿çš„å‘½åï¼Œè¡¨ç¤ºï¼Œä»¥æ­¤å‘½åçš„å±æ€§æˆ–è€…æ–¹æ³•ä¸ºç±»çš„ç§æœ‰å±æ€§æˆ–è€…ç§æœ‰æ–¹æ³•ã€‚</li><li>linuxç»ˆç«¯å‘½ä»¤ä¸­&amp;&amp;å’Œ&amp;çš„åŒºåˆ«ï¼Œ&amp;&amp; ç”¨äºé¡ºåºæ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‘½ä»¤ä»…åœ¨ç¬¬ä¸€ä¸ªæˆåŠŸæ—¶æ‰æ‰§è¡Œï¼Œè€Œ &amp; ç”¨äºå°†å‘½ä»¤ç½®äºåå°è¿è¡Œï¼Œå…è®¸ä½ åŒæ—¶æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</li><li>ä½™å¼¦é€€ç«è°ƒæ•´å­¦ä¹ ç‡ï¼Œä¸€èˆ¬è®­ç»ƒæ—¶æ¢¯åº¦ä¸‹é™ç®—æ³•å¯èƒ½é™·å…¥å±€éƒ¨æœ€å°å€¼ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡çªç„¶æé«˜å­¦ä¹ ç‡ï¼Œæ¥â€œè·³å‡ºâ€å±€éƒ¨æœ€å°å€¼å¹¶æ‰¾åˆ°é€šå‘å…¨å±€æœ€å°å€¼çš„è·¯å¾„ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºå¸¦é‡å¯çš„éšæœºæ¢¯åº¦ä¸‹é™æ–¹æ³•ã€‚å‚è€ƒ(<a href="https://blog.csdn.net/weixin_35848967/article/details/108493217">https://blog.csdn.net/weixin_35848967/article/details/108493217</a>)</li><li>å…³äºtorch.backends.cudnn.benchmarkï¼Œè¯¥é€‰é¡¹è®¾ç½®ä¸ºtrueæ—¶ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å·ç§¯ç®—å­ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹æ˜¯éšæœºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿å›ºå®šäº†éšæœºç§å­ï¼Œå¦‚æœè¿™ä¸€é¡¹ä¸ºtrueï¼Œè®­ç»ƒçš„ç»“æœä¾ç„¶ä¼šä¸åŒã€‚</li><li>windowsç»ˆç«¯æŸ¥çœ‹ç¼–ç æ ¼å¼ï¼Œchcpï¼Œåˆ‡æ¢ç¼–ç chcp 65001(utf-8) chcp 936(ç®€ä½“ä¸­æ–‡gbk) chcp 437(è‹±è¯­)</li></ol><h3 id="ç¬¬8å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬8å‘¨"></a> ç¬¬8å‘¨ğŸŒˆ</h3><ol><li>colabä¸­å‘½ä»¤å‰åŠ ï¼å°±å¯ä»¥æ‰§è¡Œlinuxå‘½ä»¤ï¼Œä½†æ˜¯cdå‰éœ€è¦åŠ %</li><li>linuxä¸‹ä½¿ç”¨ä»£ç†ï¼Œç»ˆç«¯è¾“å…¥export https_proxy=https://proxy_ip:protæˆ–è€…export https_proxy=<a href="https://username">https://username</a>:password@proxy_ip:port</li><li>pythonä¸­çš„functools.partialçš„ç”¨æ³•ï¼Œpartialå¯ä»¥ä¸ºå‡½æ•°å›ºå®šä¸€ä¸ªå‚æ•°ï¼Œå¦‚å‡½æ•°f(a,b)-&gt;a+bï¼Œé‚£ä¹ˆff=partial(f,3)å°±å°†fçš„ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸º3ï¼Œff(3)çš„ç»“æœä¸º3+3=6ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/qsloony/article/details/123802110">https://blog.csdn.net/qsloony/article/details/123802110</a>)</li><li>git cloneå’Œgit fetchçš„åŒºåˆ«ï¼Œgit cloneç”¨äºé¦–æ¬¡è·å–æ•´ä¸ªè¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ã€‚git fetchç”¨äºæ£€æŸ¥è¿œç¨‹ä»“åº“çš„æ›´æ–°å¹¶å°†è¿™äº›æ›´æ–°æ‹‰å–åˆ°æœ¬åœ°ï¼Œä½†ä¸ä¼šè‡ªåŠ¨åˆå¹¶è¿™äº›æ›´æ–°ã€‚åœ¨ä½¿ç”¨git fetchåï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨git mergeæˆ–git rebaseæ¥å°†è·å–çš„æ›´æ–°åˆå¹¶åˆ°ä½ çš„å½“å‰åˆ†æ”¯ã€‚å¦‚æœæƒ³åŒæ—¶è·å–å¹¶åˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨git pullï¼Œå®ƒå®é™…ä¸Šæ˜¯git fetchå’Œgit mergeçš„ç»„åˆã€‚</li><li>upstreamå’Œoriginçš„åŒºåˆ«ï¼šgit remote add upstream ç”¨äºæ·»åŠ åŸå§‹ä»“åº“çš„å¼•ç”¨ï¼Œé€šå¸¸ç”¨äºåŒæ­¥ä½  fork çš„ä»“åº“ã€‚git remote add origin ç”¨äºæ·»åŠ ä½ è‡ªå·±çš„è¿œç¨‹ä»“åº“çš„å¼•ç”¨ï¼Œé€šå¸¸æ˜¯ä½  fork çš„ä»“åº“æˆ–ä½ è‡ªå·±åˆ›å»ºçš„æ–°ä»“åº“ã€‚åˆ é™¤å½“å‰æ·»åŠ çš„è¿œç¨‹ä»“åº“ï¼šgit remote rm origin(ä»“åº“åˆ«å)</li><li>æ·»åŠ è‡ªå·±ä»£ç åˆ°åˆ«äººä»“åº“çš„æ–¹æ³•ï¼Œå…ˆforkåˆ«äººçš„ä»“åº“ï¼Œç„¶åcloneåˆ°æœ¬åœ°ï¼Œç„¶ågit remote add upstream urlæ·»åŠ åˆ«äººçš„åŸå§‹ä»“åº“ä½œä¸ºä¸Šæ¸¸ï¼Œç„¶åä¾æ®éœ€è¦å†³å®šæ˜¯å¦åˆ›å»ºæ–°åˆ†æ”¯(git checkout -b branch)ï¼Œç„¶åadd commitï¼Œåœ¨pushä¹‹å‰ï¼Œä¸€èˆ¬å¯ä»¥å…ˆä»upstreamè·å–ä»£ç æ›´æ–°(git pull upstream åˆ†æ”¯å)ï¼Œç„¶åpushåˆ°è‡ªå·±çš„ä»“åº“git push origin åˆ†æ”¯åï¼Œç„¶ååœ¨è‡ªå·±çš„ä»“åº“æäº¤PRå³å¯ï¼Œé€šè¿‡ååŸå§‹ä»“åº“ä¼šæŠŠè‡ªå·±çš„ä»£ç ä¿®æ”¹æ›´æ–°è¿‡å»ã€‚</li><li>è½¯è¿æ¥çš„æ³¨æ„äº‹é¡¹ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/liu16659/article/details/83714066">https://blog.csdn.net/liu16659/article/details/83714066</a>)</li></ol><h3 id="ç¬¬9å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬9å‘¨"></a> ç¬¬9å‘¨ğŸŒˆ</h3><ol><li>terminalä¸­ä½¿ç”¨pdbè°ƒè¯•ä»£ç ï¼Œåœ¨ä»£ç ä¸­import pdb;ç„¶åä½¿ç”¨pdb.set_trace()åŠ å…¥æ–­ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤p varnameæ¥æŸ¥çœ‹å˜é‡varnameçš„å€¼ï¼Œä½¿ç”¨å‘½ä»¤cæ¥æ‰§è¡Œç¨‹åºåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œä½¿ç”¨å‘½ä»¤qæ¥é€€å‡ºè°ƒè¯•æ¨¡å¼ï¼Œnè¡¨ç¤ºæ‰§è¡Œä¸‹ä¸€è¡Œä¸è¿›å…¥å­ç¨‹åºï¼Œsè¡¨ç¤ºæ‰§è¡Œä¸‹ä¸€è¡Œè¿›å…¥å­ç¨‹åºï¼Œclè¡¨ç¤ºæ¸…é™¤æ‰€æœ‰æ–­ç‚¹ï¼Œåœ¨è°ƒè¯•å®Œæˆåï¼Œéœ€è¦å°†import pdb; pdb.set_trace()è¿™è¡Œä»£ç ä»ç¨‹åºä¸­åˆ é™¤ï¼Œå¦åˆ™ç¨‹åºæ¯æ¬¡æ‰§è¡Œåˆ°è¿™ä¸ªä½ç½®éƒ½ä¼šè¿›å…¥è°ƒè¯•æ¨¡å¼ï¼Œå½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>nn.Conv2då’ŒF.conv2dçš„åŒºåˆ«ï¼Œå‰è€…æ˜¯å·ç§¯å±‚ï¼ˆç±»æ¥å£ï¼‰ï¼Œé€šè¿‡forwardå‡½æ•°è¿ç®—ï¼Œåªéœ€å®šä¹‰in_cï¼Œout_cï¼Œkernel_sizeç­‰å‚æ•°ï¼Œåè€…æ˜¯å·ç§¯æ“ä½œï¼ˆå‡½æ•°æ¥å£ï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰kernelå’Œbiasï¼Œå¦‚kernel=(16,3,5,5)è¡¨ç¤ºè¾“å‡ºé€šé“æ•°16ï¼Œè¾“å…¥é€šé“æ•°3ï¼Œbiasè®¾ç½®ä¸ºå’Œè¾“å‡ºé€šé“æ•°ç›¸ç­‰ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/SHU15121856/article/details/88956545">https://blog.csdn.net/SHU15121856/article/details/88956545</a>)</li><li>pytorchæ‰¹é‡çŸ©é˜µä¹˜æ³•torch.bmmç”¨æ³•ï¼Œå‚è€ƒ(<a href="https://blog.csdn.net/AdamCY888/article/details/131269958">https://blog.csdn.net/AdamCY888/article/details/131269958</a>)</li><li>å‡ ç§å½’ä¸€åŒ–çš„åŒºåˆ«ï¼Œbatchnormï¼š[n,c,h,w]-&gt;[c]ï¼Œlayernormï¼š[n,c,h,w]-&gt;[n]ï¼Œinstancenormï¼š[n,c,h,w]-&gt;[n,c]ï¼Œgroupnormï¼š[n,g,c//g,h,w]-&gt;[n,g]ï¼Œweightnormï¼šä¸»è¦æ€æƒ³æ˜¯å°†æƒé‡å‘é‡åˆ†è§£ä¸ºä¸¤ä¸ªå› å­ï¼šæ–¹å‘å’Œå¤§å°ã€‚ç„¶åï¼Œå¯¹æ–¹å‘è¿›è¡Œå½’ä¸€åŒ–ï¼Œä½¿å…¶å…·æœ‰å•ä½èŒƒæ•°ï¼Œè€Œå¤§å°åˆ™ä½œä¸ºä¸€ä¸ªå¯è®­ç»ƒçš„å‚æ•°ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå®ƒå¯ä»¥å‡å°‘æ¢¯åº¦ä¸‹é™ä¸­çš„è·¯å¾„ä¾èµ–æ€§ï¼Œä»è€Œé¿å…å±€éƒ¨æœ€ä¼˜å’Œéç‚¹ã€‚</li><li>windowsç»ˆç«¯ä½¿ç”¨ä»£ç†(éœ€å®‰è£…ç›¸å…³ä»£ç†è½¯ä»¶)ï¼Œcmd:set https_proxy=â€œxxxxâ€,powershell: $env:https_proxy=â€œxxxxâ€</li></ol><h3 id="ç¬¬10å‘¨"><a class="markdownIt-Anchor" href="#ç¬¬10å‘¨"></a> ç¬¬10å‘¨ğŸŒˆ</h3><ol><li>å¦‚æœè¦å†»ç»“éƒ¨åˆ†æ¨¡å‹çš„å‚æ•°æ›´æ–°ï¼Œè®¾ç½®required_gradä¸ºfalseå’Œwith torch.no_grad()éƒ½å¯ä»¥ï¼Œé€šå¸¸å‰è€…æ•ˆç‡æ›´é«˜</li><li>å…³äºGLCMçš„èµ„æ–™ï¼Œå‚è€ƒ(<a href="https://cloud.tencent.com/developer/article/2219407?areaId=106001">https://cloud.tencent.com/developer/article/2219407?areaId=106001</a>)</li><li>å¯¹é½ç‰ˆæœ¬çš„FLIRæ•°æ®é›†ï¼Œå‚è€ƒ<a href="https://github.com/DocF/multispectral-object-detection">https://github.com/DocF/multispectral-object-detection</a></li><li>è§£å‹ä»¥.tar.001,.tar.002,â€¦ç»“å°¾çš„å‹ç¼©æ–‡ä»¶ï¼šlinuxç«¯å…ˆ<code>cat file.tar.001 file.tar.002 file.tar.003 &gt; file.tar</code>åˆå¹¶æ–‡ä»¶ï¼Œç„¶å<code>tar -xvf file.tar</code>è§£å‹ï¼Œwindowsç«¯å…ˆ<code>copy /b file.tar.001 + file.tar.002 + file.tar.003 file.tar</code>ï¼Œå†ç”¨å‹ç¼©è½¯ä»¶è§£å‹ã€‚</li><li>linuxæœåŠ¡å™¨è®¾ç½®huggingfaceé•œåƒï¼Œé¦–å…ˆ<code>pip install huggingface_hub</code>ï¼Œç„¶å<code>export HF_ENDPOINT=https://hf-mirror.com</code></li></ol><h3 id="æŒç»­æ›´æ–°"><a class="markdownIt-Anchor" href="#æŒç»­æ›´æ–°"></a> æŒç»­æ›´æ–°ğŸŒˆ</h3>]]></content>
    
    
    <categories>
      
      <category>èµ„æ–™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€è¿‘å…¬å…±ç¥–å…ˆLCA</title>
    <link href="/2023/06/13/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88LCA/"/>
    <url>/2023/06/13/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88LCA/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%A5%96%E5%85%88">æ ‘èŠ‚ç‚¹çš„ç¬¬Kä¸ªç¥–å…ˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ ‘èŠ‚ç‚¹çš„ç¬¬kä¸ªç¥–å…ˆ"><a class="markdownIt-Anchor" href="#æ ‘èŠ‚ç‚¹çš„ç¬¬kä¸ªç¥–å…ˆ"></a> æ ‘èŠ‚ç‚¹çš„ç¬¬Kä¸ªç¥–å…ˆ</h2><p><a href="https://leetcode.cn/problems/kth-ancestor-of-a-tree-node/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€æ£µæ ‘ï¼Œæ ‘ä¸Šæœ‰ n ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‰ä» 0 åˆ° n-1 ç¼–å·ã€‚æ ‘ä»¥çˆ¶èŠ‚ç‚¹æ•°ç»„çš„å½¢å¼ç»™å‡ºï¼Œå…¶ä¸­ parent[i] æ˜¯èŠ‚ç‚¹ i çš„çˆ¶èŠ‚ç‚¹ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯ç¼–å·ä¸º 0 çš„èŠ‚ç‚¹ã€‚</p><p>æ ‘èŠ‚ç‚¹çš„ç¬¬ k ä¸ªç¥–å…ˆèŠ‚ç‚¹æ˜¯ä»è¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹è·¯å¾„ä¸Šçš„ç¬¬ k ä¸ªèŠ‚ç‚¹ã€‚</p><p>å®ç° TreeAncestor ç±»ï¼š</p><p>TreeAncestorï¼ˆint nï¼Œ int[] parentï¼‰ å¯¹æ ‘å’Œçˆ¶æ•°ç»„ä¸­çš„èŠ‚ç‚¹æ•°åˆå§‹åŒ–å¯¹è±¡ã€‚<br />getKthAncestor(int node, int k) è¿”å›èŠ‚ç‚¹ node çš„ç¬¬ k ä¸ªç¥–å…ˆèŠ‚ç‚¹ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œè¿”å› -1 ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼š<br>[<span class="hljs-string">&quot;TreeAncestor&quot;</span>,<span class="hljs-string">&quot;getKthAncestor&quot;</span>,<span class="hljs-string">&quot;getKthAncestor&quot;</span>,<span class="hljs-string">&quot;getKthAncestor&quot;</span>]<br>[[<span class="hljs-number">7</span>,[<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]],[<span class="hljs-number">3</span>,<span class="hljs-number">1</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">6</span>,<span class="hljs-number">3</span>]]<br><br>è¾“å‡ºï¼š<br>[null,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>]<br><br>è§£é‡Šï¼š<br><span class="hljs-symbol">TreeAncestor</span> treeAncestor = new <span class="hljs-symbol">TreeAncestor</span>(<span class="hljs-number">7</span>, [<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]);<br>treeAncestor.getKthAncestor(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>);  // è¿”å› <span class="hljs-number">1</span> ï¼Œå®ƒæ˜¯ <span class="hljs-number">3</span> çš„çˆ¶èŠ‚ç‚¹<br>treeAncestor.getKthAncestor(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>);  // è¿”å› <span class="hljs-number">0</span> ï¼Œå®ƒæ˜¯ <span class="hljs-number">5</span> çš„ç¥–çˆ¶èŠ‚ç‚¹<br>treeAncestor.getKthAncestor(<span class="hljs-number">6</span>, <span class="hljs-number">3</span>);  // è¿”å› <span class="hljs-number">-1</span> å› ä¸ºä¸å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç¥–å…ˆèŠ‚ç‚¹<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦ç”¨åˆ°æ ‘ä¸Šå€å¢ç®—æ³•ï¼Œéœ€è¦ç”¨äºŒç»´æ•°ç»„<code>pa[x][i]</code>è¡¨ç¤ºèŠ‚ç‚¹<code>x</code>çš„ç¬¬<code>2^i</code>ç¥–å…ˆèŠ‚ç‚¹ï¼Œåˆ™æ»¡è¶³<code>pa[x][i+1]=pa[pa[x][i]][i]</code>ï¼Œç„¶åè·å–ç¬¬kä¸ªç¥–å…ˆèŠ‚ç‚¹æ—¶ï¼Œå°†kè½¬æ¢æˆäºŒè¿›åˆ¶ç„¶åæŒ‰ä½è®¡ç®—å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">TreeAncestor</span> &#123;<br>    vector&lt;vector&lt;<span class="hljs-built_in">int</span>&gt;&gt; pa;<br><span class="hljs-keyword">public</span>:<br>    TreeAncestor(<span class="hljs-built_in">int</span> n, vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; parent) &#123;<br>        <span class="hljs-built_in">int</span> m=<span class="hljs-number">32</span>-__builtin_clz(n);<br>        pa.resize(n,vector&lt;<span class="hljs-built_in">int</span>&gt;(m,<span class="hljs-number">-1</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>            pa[i][<span class="hljs-number">0</span>]=parent[i];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;m<span class="hljs-number">-1</span>;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> x=<span class="hljs-number">0</span>;x&lt;n;++x)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-built_in">int</span> p=pa[x][i];p!=<span class="hljs-number">-1</span>)<br>                    pa[x][i+<span class="hljs-number">1</span>]=pa[p][i];<br>            &#125;<br>        &#125;<br>    &#125;  <br>    <span class="hljs-built_in">int</span> getKthAncestor(<span class="hljs-built_in">int</span> node, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">32</span>-__builtin_clz(k);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;l;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>((k&gt;&gt;i)&amp;<span class="hljs-number">1</span>)<br>            &#123;<br>                node=pa[node][i];<br>                <span class="hljs-keyword">if</span>(node&lt;<span class="hljs-number">0</span>)<br>                    <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> node;    <br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æœ€è¿‘å…¬å…±ç¥–å…ˆlca"><a class="markdownIt-Anchor" href="#æœ€è¿‘å…¬å…±ç¥–å…ˆlca"></a> æœ€è¿‘å…¬å…±ç¥–å…ˆLCA</h2><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å…³äºä¸¤ä¸ªç‚¹xå’Œyçš„lcaï¼Œå¯ä»¥å…ˆé¢„å¤„ç†å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦æ•°ç»„<code>depth[i]</code>ï¼Œç”±äºxå’Œyçš„æ·±åº¦å¯èƒ½ä¸åŒï¼Œæ‰€ä»¥éœ€è¦ç°å°†æ·±åº¦è¾ƒæ·±çš„ä¸€ä¸ªå¦‚<code>y</code>è½¬æ¢æˆå®ƒå’ŒxåŒä¸€æ·±åº¦çš„ç¥–å…ˆ<code>y'</code>ï¼Œç„¶åxå’ŒyåŒæ—¶å¾€ä¸Šè·³ï¼Œåœ¨xåˆ°æ ¹èŠ‚ç‚¹çš„è¿™æ¡è·¯å¾„ä¸ŠçŒœä¸€ä¸ªç‚¹zå½“ä½œlcaï¼Œä¸”xä¸zç›¸è·<code>2^i</code>æ­¥ã€‚æŠŠxå’ŒyåŒæ—¶å‘ä¸Šè·³<code>2^i</code>æ­¥ï¼Œå¦‚æœ<code>xâ‰ y</code>ï¼Œå°±è¯´æ˜lcaåœ¨zçš„ä¸Šé¢ï¼Œå¦åˆ™lcaè¦ä¹ˆæ˜¯zï¼Œè¦ä¹ˆåœ¨zçš„ä¸‹é¢ã€‚</p><p>ä¸‹é¢æ˜¯æ¨¡æ¿ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeAncestor</span> &#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; depth;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; pa;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">TreeAncestor</span>(vector&lt;pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; &amp;edges) &#123;<br>        <span class="hljs-type">int</span> n = edges.<span class="hljs-built_in">size</span>() + <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> m = <span class="hljs-number">32</span> - __builtin_clz(n); <span class="hljs-comment">// n çš„äºŒè¿›åˆ¶é•¿åº¦</span><br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">g</span>(n);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [x, y]: edges) &#123; <span class="hljs-comment">// èŠ‚ç‚¹ç¼–å·ä» 0 å¼€å§‹</span><br>            g[x].<span class="hljs-built_in">push_back</span>(y);<br>            g[y].<span class="hljs-built_in">push_back</span>(x);<br>        &#125;<br><br>        depth.<span class="hljs-built_in">resize</span>(n);<br>        pa.<span class="hljs-built_in">resize</span>(n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(m, <span class="hljs-number">-1</span>));<br>        function&lt;<span class="hljs-type">void</span>(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)&gt; dfs = [&amp;](<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> fa) &#123;<br>            pa[x][<span class="hljs-number">0</span>] = fa;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y: g[x]) &#123;<br>                <span class="hljs-keyword">if</span> (y != fa) &#123;<br>                    depth[y] = depth[x] + <span class="hljs-number">1</span>;<br>                    <span class="hljs-built_in">dfs</span>(y, x);<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m - <span class="hljs-number">1</span>; i++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>; x &lt; n; x++)<br>                <span class="hljs-keyword">if</span> (<span class="hljs-type">int</span> p = pa[x][i]; p != <span class="hljs-number">-1</span>)<br>                    pa[x][i + <span class="hljs-number">1</span>] = pa[p][i];<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_kth_ancestor</span><span class="hljs-params">(<span class="hljs-type">int</span> node, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (; k; k &amp;= k - <span class="hljs-number">1</span>)<br>            node = pa[node][__builtin_ctz(k)];<br>        <span class="hljs-keyword">return</span> node;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å› x å’Œ y çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆèŠ‚ç‚¹ç¼–å·ä» 0 å¼€å§‹ï¼‰</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_lca</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (depth[x] &gt; depth[y])<br>            <span class="hljs-built_in">swap</span>(x, y);<br>        <span class="hljs-comment">// ä½¿ y å’Œ x åœ¨åŒä¸€æ·±åº¦</span><br>        y = <span class="hljs-built_in">get_kth_ancestor</span>(y, depth[y] - depth[x]);<br>        <span class="hljs-keyword">if</span> (y == x)<br>            <span class="hljs-keyword">return</span> x;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = pa[x].<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            <span class="hljs-type">int</span> px = pa[x][i], py = pa[y][i];<br>            <span class="hljs-keyword">if</span> (px != py) &#123;<br>                x = px;<br>                y = py;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> pa[x][<span class="hljs-number">0</span>];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ´»å­—å°åˆ·</title>
    <link href="/2023/05/19/%E6%B4%BB%E5%AD%97%E5%8D%B0%E5%88%B7/"/>
    <url>/2023/05/19/%E6%B4%BB%E5%AD%97%E5%8D%B0%E5%88%B7/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%B4%BB%E5%AD%97%E5%8D%B0%E5%88%B7">æ´»å­—å°åˆ·</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ´»å­—å°åˆ·"><a class="markdownIt-Anchor" href="#æ´»å­—å°åˆ·"></a> æ´»å­—å°åˆ·</h2><p><a href="https://leetcode.cn/problems/letter-tile-possibilities/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æœ‰ä¸€å¥—æ´»å­—å­—æ¨¡ tilesï¼Œå…¶ä¸­æ¯ä¸ªå­—æ¨¡ä¸Šéƒ½åˆ»æœ‰ä¸€ä¸ªå­—æ¯ tiles[i]ã€‚è¿”å›ä½ å¯ä»¥å°å‡ºçš„éç©ºå­—æ¯åºåˆ—çš„æ•°ç›®ã€‚</p><p>æ³¨æ„ï¼šæœ¬é¢˜ä¸­ï¼Œæ¯ä¸ªæ´»å­—å­—æ¨¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</p><p>e.g.</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼š<span class="hljs-string">&quot;AAB&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">8</span><br>è§£é‡Šï¼šå¯èƒ½çš„åºåˆ—ä¸º <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;AA&quot;</span>, <span class="hljs-string">&quot;AB&quot;</span>, <span class="hljs-string">&quot;BA&quot;</span>, <span class="hljs-string">&quot;AAB&quot;</span>, <span class="hljs-string">&quot;ABA&quot;</span>, <span class="hljs-string">&quot;BAA&quot;</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è®¡æ•°dpï¼Œç”¨<code>dp[i][j]</code>è¡¨ç¤ºå‰iç§å­—ç¬¦ç”Ÿæˆé•¿åº¦ä¸ºjçš„å­—ç¬¦ä¸²æ—¶ï¼Œèƒ½å¾—åˆ°çš„æ–¹æ¡ˆæ•°ï¼Œç”¨äºŒä½æ•°ç»„vé¢„å¤„ç†ç»„åˆæ•°ï¼Œç”¨å“ˆç³»è¡¨ç»Ÿè®¡å­—ç¬¦å‡ºç°é¢‘ç‡ï¼Œå½“ä¸é€‰ç¬¬iç§å­—ç¬¦æ—¶ï¼Œ<code>dp[i][j]=dp[i-1][j]</code>ï¼Œå½“é€‰ä¸­kä¸ªiå­—ç¬¦æ—¶ï¼Œéœ€è¦ä»jä¸­é€‰å‡ºkä¸ªä½ç½®æ”¾ç½®è¿™äº›å­—ç¬¦ï¼Œå…¶ä½™ä½ç½®å°±æ˜¯ç”¨å‰<code>i-1</code>ç§å­—ç¬¦æ„é€ é•¿ä¸º<code>j-k</code>çš„å­—ç¬¦ä¸²ï¼Œå³<code>dp[i][j]=dp[i-1][j-k]*v[j][k]</code>ï¼Œæœ€åæŠŠæ‰€æœ‰ä¸åŒé•¿åº¦çš„æ–¹æ¡ˆæ•°åŠ èµ·æ¥å³æœ€ç»ˆç­”æ¡ˆã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">numTilePossibilities</span><span class="hljs-params">(string tiles)</span> </span>&#123;<br>        unordered_map&lt;<span class="hljs-type">char</span>,<span class="hljs-type">int</span>&gt; mp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> &amp;c:tiles)<br>            ++mp[c];<br>        <span class="hljs-type">int</span> n=tiles.<span class="hljs-built_in">size</span>(),m=mp.<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">v</span>(n+<span class="hljs-number">1</span>,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n+<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=n;++i)<br>        &#123;<br>            v[i][<span class="hljs-number">0</span>]=v[i][i]=<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;i;++j)<br>                v[i][j]=v[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]+v[i<span class="hljs-number">-1</span>][j];<br>        &#125;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dp</span>(m+<span class="hljs-number">1</span>,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>));<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; it:mp)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=n;++j)<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;k&lt;=j&amp;&amp;k&lt;=it.second;++k)<br>                    dp[i][j]+=dp[i<span class="hljs-number">-1</span>][j-k]*v[j][k];<br>            &#125;<br>            ++i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">accumulate</span>(dp[m].<span class="hljs-built_in">begin</span>()+<span class="hljs-number">1</span>,dp[m].<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŒ‰åˆ—ç¿»è½¬å¾—åˆ°æœ€å¤§å€¼ç­‰è¡Œæ•°</title>
    <link href="/2023/05/15/%E6%8C%89%E5%88%97%E7%BF%BB%E8%BD%AC%E5%BE%97%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E7%AD%89%E8%A1%8C%E6%95%B0/"/>
    <url>/2023/05/15/%E6%8C%89%E5%88%97%E7%BF%BB%E8%BD%AC%E5%BE%97%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E7%AD%89%E8%A1%8C%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%8C%89%E5%88%97%E7%BF%BB%E8%BD%AC%E5%BE%97%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E7%AD%89%E8%A1%8C%E6%95%B0">æŒ‰åˆ—ç¿»è½¬å¾—åˆ°æœ€å¤§å€¼ç­‰è¡Œæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æŒ‰åˆ—ç¿»è½¬å¾—åˆ°æœ€å¤§å€¼ç­‰è¡Œæ•°"><a class="markdownIt-Anchor" href="#æŒ‰åˆ—ç¿»è½¬å¾—åˆ°æœ€å¤§å€¼ç­‰è¡Œæ•°"></a> æŒ‰åˆ—ç¿»è½¬å¾—åˆ°æœ€å¤§å€¼ç­‰è¡Œæ•°</h2><p><a href="https://leetcode.cn/problems/flip-columns-for-maximum-number-of-equal-rows/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®š m x n çŸ©é˜µ matrix ã€‚</p><p>ä½ å¯ä»¥ä»ä¸­é€‰å‡ºä»»æ„æ•°é‡çš„åˆ—å¹¶ç¿»è½¬å…¶ä¸Šçš„ æ¯ä¸ª å•å…ƒæ ¼ã€‚ï¼ˆå³ç¿»è½¬åï¼Œå•å…ƒæ ¼çš„å€¼ä» 0 å˜æˆ 1ï¼Œæˆ–è€…ä» 1 å˜ä¸º 0 ã€‚ï¼‰</p><p>è¿”å› ç»è¿‡ä¸€äº›ç¿»è½¬åï¼Œè¡Œä¸è¡Œä¹‹é—´æ‰€æœ‰å€¼éƒ½ç›¸ç­‰çš„æœ€å¤§è¡Œæ•° ã€‚</p><p>e.g.</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šmatrix = <span class="hljs-string">[[0,1],[1,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šä¸è¿›è¡Œç¿»è½¬ï¼Œæœ‰ <span class="hljs-number">1</span> è¡Œæ‰€æœ‰å€¼éƒ½ç›¸ç­‰ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å› ä¸ºæœ€ç»ˆç»Ÿè®¡çš„è¡Œéƒ½æ˜¯å…¨0æˆ–è€…å…¨1ï¼Œæ‰€ä»¥è¿™é“é¢˜çš„æœ€ç»ˆç›®çš„æ˜¯æ‰¾åˆ°äº’è¡¥çš„è¡Œæ•°ï¼Œæ‰€ä»¥å¯¹å„è¡Œä¸­é¦–ä¸ªå…ƒç´ ä¸º1çš„è¡Œå–åï¼Œç„¶åå°†æ¯è¡Œè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç”¨å“ˆç³»è¡¨ç»Ÿè®¡ç›¸åŒè¡Œçš„æœ€å¤§æ•°é‡å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> maxEqualRowsAfterFlips(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; <span class="hljs-keyword">matrix</span>) &#123;<br>        <span class="hljs-keyword">int</span> n=<span class="hljs-keyword">matrix</span>[<span class="hljs-number">0</span>].<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;<br>        unordered_map&lt;<span class="hljs-keyword">string</span>,<span class="hljs-keyword">int</span>&gt; mp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; t:<span class="hljs-keyword">matrix</span>)<br>        &#123;<br>            <span class="hljs-keyword">string</span> s(n,<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>                s[i]=t[i]^t[<span class="hljs-number">0</span>];<br>            ++mp[s];<br>            ans=<span class="hljs-keyword">max</span>(ans,mp[s]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¨ç®±å­</title>
    <link href="/2023/05/08/%E6%8E%A8%E7%AE%B1%E5%AD%90/"/>
    <url>/2023/05/08/%E6%8E%A8%E7%AE%B1%E5%AD%90/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%8E%A8%E7%AE%B1%E5%AD%90">æ¨ç®±å­</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ¨ç®±å­"><a class="markdownIt-Anchor" href="#æ¨ç®±å­"></a> æ¨ç®±å­</h2><p><a href="https://leetcode.cn/problems/minimum-moves-to-move-a-box-to-their-target-location/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æ¨ç®±å­ã€æ˜¯ä¸€æ¬¾é£é¡å…¨çƒçš„ç›Šæ™ºå°æ¸¸æˆï¼Œç©å®¶éœ€è¦å°†ç®±å­æ¨åˆ°ä»“åº“ä¸­çš„ç›®æ ‡ä½ç½®ã€‚</p><p>æ¸¸æˆåœ°å›¾ç”¨å¤§å°ä¸º m x n çš„ç½‘æ ¼ grid è¡¨ç¤ºï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯å¢™ã€åœ°æ¿æˆ–è€…æ˜¯ç®±å­ã€‚</p><p>ç°åœ¨ä½ å°†ä½œä¸ºç©å®¶å‚ä¸æ¸¸æˆï¼ŒæŒ‰è§„åˆ™å°†ç®±å­ â€˜Bâ€™ ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½® â€˜Tâ€™ ï¼š</p><p>ç©å®¶ç”¨å­—ç¬¦ â€˜Sâ€™ è¡¨ç¤ºï¼Œåªè¦ä»–åœ¨åœ°æ¿ä¸Šï¼Œå°±å¯ä»¥åœ¨ç½‘æ ¼ä¸­å‘ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç§»åŠ¨ã€‚<br />åœ°æ¿ç”¨å­—ç¬¦ â€˜.â€™ è¡¨ç¤ºï¼Œæ„å‘³ç€å¯ä»¥è‡ªç”±è¡Œèµ°ã€‚<br />å¢™ç”¨å­—ç¬¦ â€˜#â€™ è¡¨ç¤ºï¼Œæ„å‘³ç€éšœç¢ç‰©ï¼Œä¸èƒ½é€šè¡Œã€‚<br />ç®±å­ä»…æœ‰ä¸€ä¸ªï¼Œç”¨å­—ç¬¦ â€˜Bâ€™ è¡¨ç¤ºã€‚ç›¸åº”åœ°ï¼Œç½‘æ ¼ä¸Šæœ‰ä¸€ä¸ªç›®æ ‡ä½ç½® â€˜Tâ€™ã€‚<br />ç©å®¶éœ€è¦ç«™åœ¨ç®±å­æ—è¾¹ï¼Œç„¶åæ²¿ç€ç®±å­çš„æ–¹å‘è¿›è¡Œç§»åŠ¨ï¼Œæ­¤æ—¶ç®±å­ä¼šè¢«ç§»åŠ¨åˆ°ç›¸é‚»çš„åœ°æ¿å•å…ƒæ ¼ã€‚è®°ä½œä¸€æ¬¡ã€Œæ¨åŠ¨ã€ã€‚<br />ç©å®¶æ— æ³•è¶Šè¿‡ç®±å­ã€‚<br />è¿”å›å°†ç®±å­æ¨åˆ°ç›®æ ‡ä½ç½®çš„æœ€å° æ¨åŠ¨ æ¬¡æ•°ï¼Œå¦‚æœæ— æ³•åšåˆ°ï¼Œè¯·è¿”å› -1ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šgrid = [[<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>],<br>             [<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;T&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>],<br>             [<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>],<br>             [<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>],<br>             [<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;S&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>],<br>             [<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>,<span class="hljs-string">&quot;#&quot;</span>]]<br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šæˆ‘ä»¬åªéœ€è¦è¿”å›æ¨ç®±å­çš„æ¬¡æ•°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ·±åº¦ä¼˜å…ˆæœç´¢(BFS)ï¼Œé€šè¿‡<code>vis[px][py][bx][by]</code>è®°å½•å½“å‰ç®±å­å’Œäººçš„ä½ç½®æ˜¯å¦è¢«è®¿é—®è¿‡ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—<code>deque&lt;tuple&lt;int,int,int,int&gt;&gt;</code>ï¼Œæ¯ä¸ªå…ƒç´ è®°å½•äººçš„ä½ç½®ã€ç®±å­çš„ä½ç½®å’Œå½“å‰æ¨åŠ¨è·ç¦»ï¼Œç„¶åè¿›è¡Œbfsï¼Œæ¯æ¬¡å–å‡ºé˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœç®±å­åˆ°è¾¾ç›®çš„åœ°åˆ™è¿”å›æ¨åŠ¨è·ç¦»ï¼Œå¦åˆ™å…ˆè®©äººç§»åŠ¨ï¼Œå½“äººç§»åŠ¨åˆ°ç®±å­ä½ç½®æ—¶æ¨åŠ¨ç®±å­(æ›´æ–°ç®±å­ä½ç½®)ï¼Œå¦‚æœæ¨åŠ¨åäººå’Œç®±å­å½“å‰ä½ç½®æœªè¢«è®¿é—®ï¼Œåˆ™å°†è¯¥çŠ¶æ€åŠ å…¥é˜Ÿå°¾ï¼Œå¦‚æœäººæœªç§»åŠ¨åˆ°ç®±å­ä½ç½®å¹¶ä¸”å½“å‰äºŒè€…ä½ç½®æœªè¢«è®¿é—®ï¼Œåˆ™å°†å½“å‰çŠ¶æ€åŠ å…¥é˜Ÿé¦–ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤çŸ¥é“é˜Ÿåˆ—ä¸ºç©ºä¸ºæ­¢ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span> &#123;<br>int dir[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;&#125;;<br>bool vis[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>][<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;<span class="hljs-number">0</span>&#125;;<br>public:<br>    int minPushBox(vector&lt;vector&lt;char&gt;&gt;&amp; grid) &#123;<br>        int m=grid.size(),n=grid[<span class="hljs-number">0</span>].size();<br>        auto isvalid=[&amp;](int x,int y)-&gt;bool&#123;<br>            return x&gt;=<span class="hljs-number">0</span>&amp;&amp;x&lt;m&amp;&amp;y&gt;=<span class="hljs-number">0</span>&amp;&amp;y&lt;n&amp;&amp;grid[x][y]!=<span class="hljs-string">&#x27;#&#x27;</span>;<br>        &#125;;<br>        int startx,starty,boxx,boxy,endx,endy;<br>        for(int i=<span class="hljs-number">0</span>;i&lt;m;++i)<br>        &#123;<br>            for(int j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                if(grid[i][j]==<span class="hljs-string">&#x27;S&#x27;</span>)<br>                &#123;<br>                    startx=i;starty=j;<br>                &#125;<br>                else if(grid[i][j]==<span class="hljs-string">&#x27;B&#x27;</span>)<br>                &#123;<br>                    boxx=i;boxy=j;<br>                &#125;<br>                else if(grid[i][j]==<span class="hljs-string">&#x27;T&#x27;</span>)<br>                &#123;<br>                    endx=i;endy=j;<br>                &#125;<br>            &#125;<br>        &#125;<br>        deque&lt;tuple&lt;int,int,int,int,int&gt;&gt; q;<br>        q.emplace_front(startx,starty,boxx,boxy,<span class="hljs-number">0</span>);<br>        vis[startx][starty][boxx][boxy]=true;<br>        while(!q.empty())<br>        &#123;<br>            auto [px,py,bx,by,d]=q.front();<br>            q.pop_front();<br>            if(bx==endx&amp;&amp;by==endy)<br>                return d;<br>            for(auto [dx,dy]:dir)<br>            &#123;<br>                int npx=px+dx,npy=py+dy;<br>                if(!isvalid(npx,npy))<br>                    continue;<br>                if(npx==bx&amp;&amp;npy==by)<br>                &#123;<br>                    int nbx=bx+dx,nby=by+dy;<br>                    if(!isvalid(nbx,nby)||vis[npx][npy][nbx][nby])<br>                        continue;<br>                    q.emplace_back(npx,npy,nbx,nby,d+<span class="hljs-number">1</span>);<br>                    vis[npx][npy][nbx][nby]=true;<br>                &#125;<br>                else if(!vis[npx][npy][bx][by])<br>                &#123;<br>                    q.emplace_front(npx,npy,bx,by,d);<br>                    vis[npx][npy][bx][by]=true;<br>                &#125;  <br>            &#125;<br>        &#125;<br>        return <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‘˜æ°´æœ</title>
    <link href="/2023/05/04/%E6%91%98%E6%B0%B4%E6%9E%9C/"/>
    <url>/2023/05/04/%E6%91%98%E6%B0%B4%E6%9E%9C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%91%98%E6%B0%B4%E6%9E%9C">æ‘˜æ°´æœ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ‘˜æ°´æœ"><a class="markdownIt-Anchor" href="#æ‘˜æ°´æœ"></a> æ‘˜æ°´æœ</h2><p><a href="https://leetcode.cn/problems/maximum-fruits-harvested-after-at-most-k-steps/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ªæ— é™çš„ x åæ ‡è½´ä¸Šï¼Œæœ‰è®¸å¤šæ°´æœåˆ†å¸ƒåœ¨å…¶ä¸­æŸäº›ä½ç½®ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ fruits ï¼Œå…¶ä¸­ fruits[i] = [positioni, amounti] è¡¨ç¤ºå…±æœ‰ amounti ä¸ªæ°´æœæ”¾ç½®åœ¨ positioni ä¸Šã€‚fruits å·²ç»æŒ‰ positioni å‡åºæ’åˆ— ï¼Œæ¯ä¸ª positioni äº’ä¸ç›¸åŒ ã€‚</p><p>å¦ç»™ä½ ä¸¤ä¸ªæ•´æ•° startPos å’Œ k ã€‚æœ€åˆï¼Œä½ ä½äº startPos ã€‚ä»ä»»ä½•ä½ç½®ï¼Œä½ å¯ä»¥é€‰æ‹© å‘å·¦æˆ–è€…å‘å³ èµ°ã€‚åœ¨ x è½´ä¸Šæ¯ç§»åŠ¨ ä¸€ä¸ªå•ä½ ï¼Œå°±è®°ä½œ ä¸€æ­¥ ã€‚ä½ æ€»å…±å¯ä»¥èµ° æœ€å¤š k æ­¥ã€‚ä½ æ¯è¾¾åˆ°ä¸€ä¸ªä½ç½®ï¼Œéƒ½ä¼šæ‘˜æ‰å…¨éƒ¨çš„æ°´æœï¼Œæ°´æœä¹Ÿå°†ä»è¯¥ä½ç½®æ¶ˆå¤±ï¼ˆä¸ä¼šå†ç”Ÿï¼‰ã€‚</p><p>è¿”å›ä½ å¯ä»¥æ‘˜åˆ°æ°´æœçš„ æœ€å¤§æ€»æ•° ã€‚<br />e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šfruits = [[2,8],[6,3],[8,6]], startPos = 5, k = 4<br>è¾“å‡ºï¼š9<br>è§£é‡Šï¼š<br>æœ€ä½³è·¯çº¿ä¸ºï¼š<br>- å‘å³ç§»åŠ¨åˆ°ä½ç½®<span class="hljs-number"> 6 </span>ï¼Œæ‘˜åˆ°<span class="hljs-number"> 3 </span>ä¸ªæ°´æœ<br>- å‘å³ç§»åŠ¨åˆ°ä½ç½®<span class="hljs-number"> 8 </span>ï¼Œæ‘˜åˆ°<span class="hljs-number"> 6 </span>ä¸ªæ°´æœ<br>ç§»åŠ¨<span class="hljs-number"> 3 </span>æ­¥ï¼Œå…±æ‘˜åˆ°<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 6 </span>=<span class="hljs-number"> 9 </span>ä¸ªæ°´æœ<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æšä¸¾ç§»åŠ¨çš„åŒºé—´<code>[left,right]</code>ï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾æ¥ç¡®å®šç§»åŠ¨åŒºé—´ï¼Œå®é™…ç§»åŠ¨æ—¶ï¼Œè¦ä¹ˆå…ˆå‘å·¦ç§»åŠ¨<code>x</code>æ­¥ï¼Œå†å‘å³ç§»åŠ¨<code>k-x</code>ï¼Œè¦ä¹ˆå…ˆå‘å³ç§»åŠ¨<code>x</code>æ­¥ï¼Œå†å‘å·¦ç§»åŠ¨<code>k-x</code>æ­¥ï¼Œé€šè¿‡å‰ç¼€å’Œæ¥å¿«é€Ÿè®¡ç®—åŒºé—´çš„æ°´æœæ•°é‡ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾æšä¸¾ç§»åŠ¨åŒºé—´çš„æ—¶å€™ï¼Œè¦æ³¨æ„è¾¹ç•Œï¼Œæœ€åæ›´æ–°æœ€å¤§å€¼å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> maxTotalFruits(vector&lt;vector&lt;<span class="hljs-built_in">int</span>&gt;&gt;&amp; fruits, <span class="hljs-built_in">int</span> startPos, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=fruits.size();<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>);<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; idx(<span class="hljs-built_in">n</span>);<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)<br>        &#123;<br>            <span class="hljs-built_in">sum</span>[i+<span class="hljs-number">1</span>]=<span class="hljs-built_in">sum</span>[i]+fruits[i][<span class="hljs-number">1</span>];<br>            idx[i]=fruits[i][<span class="hljs-number">0</span>];<br>        &#125;<br>        <span class="hljs-built_in">int</span> res=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">t</span>=k/<span class="hljs-number">2</span>;<br>        for(<span class="hljs-built_in">int</span> x=<span class="hljs-number">0</span>;x&lt;=<span class="hljs-built_in">t</span>;++x)<br>        &#123;<br>            <span class="hljs-built_in">int</span> <span class="hljs-built_in">offset</span>=k-<span class="hljs-number">2</span>*x;<br>            <span class="hljs-built_in">int</span> <span class="hljs-built_in">left</span>=startPos-x;<br>            <span class="hljs-built_in">int</span> <span class="hljs-built_in">right</span>=startPos+<span class="hljs-built_in">offset</span>;<br>            <span class="hljs-built_in">int</span> l=lower_bound(idx.begin(),idx.end(),<span class="hljs-built_in">left</span>)-idx.begin();<br>            <span class="hljs-built_in">int</span> r=upper_bound(idx.begin(),idx.end(),<span class="hljs-built_in">right</span>)-idx.begin();<br>            res=<span class="hljs-built_in">max</span>(res,<span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l]);<br>            <span class="hljs-built_in">right</span>=startPos+x;<br>            <span class="hljs-built_in">left</span>=startPos-<span class="hljs-built_in">offset</span>;<br>            l=lower_bound(idx.begin(),idx.end(),<span class="hljs-built_in">left</span>)-idx.begin();<br>            r=upper_bound(idx.begin(),idx.end(),<span class="hljs-built_in">right</span>)-idx.begin();<br>            res=<span class="hljs-built_in">max</span>(res,<span class="hljs-built_in">sum</span>[r]-<span class="hljs-built_in">sum</span>[l]);<br>        &#125;<br>        return res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ£€æŸ¥æ›¿æ¢åçš„è¯æ˜¯å¦æœ‰æ•ˆ</title>
    <link href="/2023/05/03/%E6%A3%80%E6%9F%A5%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E8%AF%8D%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88/"/>
    <url>/2023/05/03/%E6%A3%80%E6%9F%A5%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E8%AF%8D%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%A3%80%E6%9F%A5%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E8%AF%8D%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88">æ£€æŸ¥æ›¿æ¢åçš„è¯æ˜¯å¦æœ‰æ•ˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ£€æŸ¥æ›¿æ¢åçš„è¯æ˜¯å¦æœ‰æ•ˆ"><a class="markdownIt-Anchor" href="#æ£€æŸ¥æ›¿æ¢åçš„è¯æ˜¯å¦æœ‰æ•ˆ"></a> æ£€æŸ¥æ›¿æ¢åçš„è¯æ˜¯å¦æœ‰æ•ˆ</h2><p><a href="https://leetcode.cn/problems/check-if-word-is-valid-after-substitutions/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ åˆ¤æ–­å®ƒæ˜¯å¦ æœ‰æ•ˆ ã€‚<br />å­—ç¬¦ä¸² s æœ‰æ•ˆ éœ€è¦æ»¡è¶³ï¼šå‡è®¾å¼€å§‹æœ‰ä¸€ä¸ªç©ºå­—ç¬¦ä¸² t = â€œâ€ ï¼Œä½ å¯ä»¥æ‰§è¡Œ ä»»æ„æ¬¡ ä¸‹è¿°æ“ä½œå°† t è½¬æ¢ä¸º s ï¼š</p><p>å°†å­—ç¬¦ä¸² â€œabcâ€ æ’å…¥åˆ° t ä¸­çš„ä»»æ„ä½ç½®ã€‚å½¢å¼ä¸Šï¼Œt å˜ä¸º tleft + â€œabcâ€ + trightï¼Œå…¶ä¸­ t == tleft + tright ã€‚æ³¨æ„ï¼Œtleft å’Œ tright å¯èƒ½ä¸º ç©º ã€‚<br />å¦‚æœå­—ç¬¦ä¸² s æœ‰æ•ˆï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚</p><p>e.g.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs è¾“å…¥ï¼šs">è¾“å‡ºï¼štrue<br>è§£é‡Šï¼š<br>&quot;&quot; -&gt; &quot;abc&quot; -&gt; &quot;aabcbc&quot;<br>å› æ­¤ï¼Œ&quot;aabcbc&quot; æœ‰æ•ˆã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åˆ›å»ºä¸€ä¸ªæ ˆ,ç„¶åéå†å­—ç¬¦ä¸²sï¼Œå¦‚æœé‡åˆ°aï¼Œå°±åŠ å…¥æ ˆï¼Œé‡åˆ°bï¼Œæ£€æŸ¥ä¸€ä¸‹æ ˆé¡¶æ˜¯å¦ä¸ºaï¼Œæ˜¯çš„è¯æŠŠbå…¥æ ˆï¼Œå¦åˆ™è¿”å›falseï¼Œé‡åˆ°cï¼Œä¾æ¬¡æ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯baï¼Œæ˜¯åˆ™å¼¹å‡ºæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ ï¼Œå¦åˆ™è¿”å›falseã€‚æœ€åå¦‚æœæ ˆéç©ºï¼Œè¿”å›falseã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">bool</span> isValid(<span class="hljs-keyword">string</span> s) &#123;<br>        stack&lt;<span class="hljs-keyword">char</span>&gt; st;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">char</span> c:s)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;a&#x27;</span>)<br>                st.push(c);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;b&#x27;</span>&amp;&amp;!st.<span class="hljs-keyword">empty</span>()&amp;&amp;st.top()==<span class="hljs-string">&#x27;a&#x27;</span>)<br>                st.push(c);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;c&#x27;</span>&amp;&amp;!st.<span class="hljs-keyword">empty</span>()&amp;&amp;st.top()==<span class="hljs-string">&#x27;b&#x27;</span>)<br>            &#123;<br>                st.pop();<br>                <span class="hljs-keyword">if</span>(!st.<span class="hljs-keyword">empty</span>()&amp;&amp;st.top()==<span class="hljs-string">&#x27;a&#x27;</span>)<br>                    st.pop();<br>                <span class="hljs-keyword">else</span><br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(!st.<span class="hljs-keyword">empty</span>())<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€é•¿ç­‰å·®æ•°åˆ—</title>
    <link href="/2023/04/22/%E6%9C%80%E9%95%BF%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97/"/>
    <url>/2023/04/22/%E6%9C%80%E9%95%BF%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E9%95%BF%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97">æœ€é•¿ç­‰å·®æ•°åˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€é•¿ç­‰å·®æ•°åˆ—"><a class="markdownIt-Anchor" href="#æœ€é•¿ç­‰å·®æ•°åˆ—"></a> æœ€é•¿ç­‰å·®æ•°åˆ—</h2><p><a href="https://leetcode.cn/problems/longest-arithmetic-subsequence/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å› nums ä¸­æœ€é•¿ç­‰å·®å­åºåˆ—çš„é•¿åº¦ã€‚</p><p>å›æƒ³ä¸€ä¸‹ï¼Œnums çš„å­åºåˆ—æ˜¯ä¸€ä¸ªåˆ—è¡¨ nums[i1], nums[i2], â€¦, nums[ik] ï¼Œä¸” 0 &lt;= i1 &lt; i2 &lt; â€¦ &lt; ik &lt;= nums.length - 1ã€‚å¹¶ä¸”å¦‚æœ seq[i+1] - seq[i]( 0 &lt;= i &lt; seq.length - 1) çš„å€¼éƒ½ç›¸åŒï¼Œé‚£ä¹ˆåºåˆ— seq æ˜¯ç­‰å·®çš„ã€‚</p><p>e.g.</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">3,6,9,12</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">4</span><br>è§£é‡Šï¼š <br>æ•´ä¸ªæ•°ç»„æ˜¯å…¬å·®ä¸º <span class="hljs-number">3</span> çš„ç­‰å·®æ•°åˆ—ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å…¶å®æ˜¯<a href="https://leetcode.cn/problems/longest-increasing-subsequence/description/">æœ€é•¿é€’å¢å­åºåˆ—</a>çš„å‡çº§ç‰ˆï¼Œåªä¸è¿‡åŠ äº†å…¬å·®çš„é™åˆ¶ï¼Œç”¨<code>dp[i][d]</code>è¡¨ç¤ºiä½ç½®å¤„å…¬å·®ä¸ºdçš„æœ€é•¿å­åºåˆ—é•¿åº¦ï¼Œç„¶åéå†<code>j(j&lt;i)</code>ä½ç½®ï¼Œå½“<code>dp[j][d]+1&gt;dp[i][d]</code>æ—¶æ›´æ–°<code>dp[i][d]</code>ï¼Œè¿”å›æ•´ä¸ªè¿‡ç¨‹æœ€å¤§é•¿åº¦å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestArithSeqLength</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dp</span>(n,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1001</span>,<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;i;++j)<br>            &#123;<br>                <span class="hljs-type">int</span> d=nums[i]-nums[j]+<span class="hljs-number">500</span>;<br>                dp[i][d]=<span class="hljs-built_in">max</span>(dp[i][d],dp[j][d]+<span class="hljs-number">1</span>);<br>                ans=<span class="hljs-built_in">max</span>(ans,dp[i][d]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿æ•°ç»„ä¸¥æ ¼é€’å¢</title>
    <link href="/2023/04/20/%E4%BD%BF%E6%95%B0%E7%BB%84%E4%B8%A5%E6%A0%BC%E9%80%92%E5%A2%9E/"/>
    <url>/2023/04/20/%E4%BD%BF%E6%95%B0%E7%BB%84%E4%B8%A5%E6%A0%BC%E9%80%92%E5%A2%9E/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BD%BF%E6%95%B0%E7%BB%84%E4%B8%A5%E6%A0%BC%E9%80%92%E5%A2%9E">ä½¿æ•°ç»„ä¸¥æ ¼é€’å¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä½¿æ•°ç»„ä¸¥æ ¼é€’å¢"><a class="markdownIt-Anchor" href="#ä½¿æ•°ç»„ä¸¥æ ¼é€’å¢"></a> ä½¿æ•°ç»„ä¸¥æ ¼é€’å¢</h2><p><a href="https://leetcode.cn/problems/make-array-strictly-increasing/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªæ•´æ•°æ•°ç»„ arr1 å’Œ arr2ï¼Œè¿”å›ä½¿ arr1 ä¸¥æ ¼é€’å¢æ‰€éœ€è¦çš„æœ€å°ã€Œæ“ä½œã€æ•°ï¼ˆå¯èƒ½ä¸º 0ï¼‰ã€‚</p><p>æ¯ä¸€æ­¥ã€Œæ“ä½œã€ä¸­ï¼Œä½ å¯ä»¥åˆ†åˆ«ä» arr1 å’Œ arr2 ä¸­å„é€‰å‡ºä¸€ä¸ªç´¢å¼•ï¼Œåˆ†åˆ«ä¸º i å’Œ jï¼Œ0 &lt;= i &lt; arr1.length å’Œ 0 &lt;= j &lt; arr2.lengthï¼Œç„¶åè¿›è¡Œèµ‹å€¼è¿ç®— arr1[i] = arr2[j]ã€‚</p><p>å¦‚æœæ— æ³•è®© arr1 ä¸¥æ ¼é€’å¢ï¼Œè¯·è¿”å› -1ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šarr1 = <span class="hljs-comment">[1,5,3,6,7]</span>, arr2 = <span class="hljs-comment">[4,3,1]</span><br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼šç”¨ 3 æ¥æ›¿æ¢ 5ï¼Œç„¶åç”¨ 4 æ¥æ›¿æ¢ 3ï¼Œå¾—åˆ° arr1 = <span class="hljs-comment">[1, 3, 4, 6, 7]</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨<code>dfsï¼ˆi,rï¼‰</code>è¡¨ç¤º<code>0~i</code>åŒºé—´ä¸¥æ ¼é€’å¢ï¼Œä¸”<code>a[i]&lt;r</code>çš„æœ€å°æ“ä½œæ¬¡æ•°ï¼Œå¯¹äº<code>i</code>ä½ç½®çš„æ•°ï¼Œè®°å®ƒå³è¾¹çš„æ•°æ˜¯<code>r</code>ï¼Œé‚£ä¹ˆ<code>i</code>ä½ç½®åˆ†æ›¿æ¢å’Œä¸æ›¿æ¢ä¸¤ç§æƒ…å†µ</p><ul><li>ä¸æ›¿æ¢ï¼š<code>a[i]&lt;r</code>ï¼Œ<code>dfs(i,r)=dfs(i-1,a[i])</code></li><li>æ›¿æ¢ï¼š<code>a[i]&gt;=r</code>ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾åœ¨bä¸­æ‰¾åˆ°å°äºrçš„æœ€å¤§æ•°<code>b[k]</code>ï¼Œç„¶åæ›¿æ¢ï¼Œdfs(i,pre)=dfs(i-1,b[k])+1;</li></ul><p>ä¸ºäº†å‡å°‘æ—¶é—´ï¼Œè¿˜å¯ä»¥ç”¨ä¸€ä¸ªå“ˆç³»è¡¨è®°å½•æ¯ä¸ªä½ç½®çš„å€¼ï¼Œå¦‚æœiå·²ç»è®¿é—®è¿‡åˆ™ç›´æ¥è¿”å›ç»“æœå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">makeArrayIncreasing</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; a, vector&lt;<span class="hljs-type">int</span>&gt;&amp; b)</span> </span>&#123;<br>        <span class="hljs-built_in">sort</span>(b.<span class="hljs-built_in">begin</span>(),b.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-type">int</span> n=a.<span class="hljs-built_in">size</span>();<br>        unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; m[n];<br>        function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>,<span class="hljs-type">int</span>)&gt; dfs=[&amp;](<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> r)-&gt;<span class="hljs-type">int</span>&#123;<br>            <span class="hljs-keyword">if</span>(i&lt;<span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">auto</span> it=m[i].<span class="hljs-built_in">find</span>(r);<br>            <span class="hljs-comment">// è®¡ç®—è¿‡ç›´æ¥ç”¨ä¹‹å‰çš„ç»“æœ</span><br>            <span class="hljs-keyword">if</span>(it!=m[i].<span class="hljs-built_in">end</span>())<br>                <span class="hljs-keyword">return</span> it-&gt;second;<br>            <span class="hljs-type">int</span> res=a[i]&lt;r ? <span class="hljs-built_in">dfs</span>(i<span class="hljs-number">-1</span>,a[i]):INT_MAX/<span class="hljs-number">2</span>;<br>            <span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾bä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äºrçš„ä½ç½®</span><br>            <span class="hljs-keyword">auto</span> k=<span class="hljs-built_in">lower_bound</span>(b.<span class="hljs-built_in">begin</span>(),b.<span class="hljs-built_in">end</span>(),r);<br>            <span class="hljs-keyword">if</span>(k!=b.<span class="hljs-built_in">begin</span>())<br>                res=<span class="hljs-built_in">min</span>(res,<span class="hljs-built_in">dfs</span>(i<span class="hljs-number">-1</span>,*(--k))+<span class="hljs-number">1</span>);<br>            m[i][r]=res;<br>            <span class="hljs-keyword">return</span> res;<br>        &#125;;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-built_in">dfs</span>(n<span class="hljs-number">-1</span>,INT_MAX);<br>        <span class="hljs-keyword">return</span> ans&gt;n ? <span class="hljs-number">-1</span>:ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</title>
    <link href="/2023/04/14/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/"/>
    <url>/2023/04/14/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a class="markdownIt-Anchor" href="#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a> ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h2><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚</p><p>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šk = 2, prices = [3,2,6,5,0,3]<br>è¾“å‡ºï¼š7<br>è§£é‡Šï¼šåœ¨ç¬¬<span class="hljs-number"> 2 </span>å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬<span class="hljs-number"> 3 </span>å¤© (è‚¡ç¥¨ä»·æ ¼ = 6) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-2 =<span class="hljs-number"> 4 </span>ã€‚<br>     éšåï¼Œåœ¨ç¬¬<span class="hljs-number"> 5 </span>å¤© (è‚¡ç¥¨ä»·æ ¼ = 0) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬<span class="hljs-number"> 6 </span>å¤© (è‚¡ç¥¨ä»·æ ¼ = 3) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 =<span class="hljs-number"> 3 </span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’,ç”¨<code>buy[i][j]</code>è¡¨ç¤ºç¬¬<code>i</code>å¤©æ—¶å‘ç”Ÿ<code>j</code>ç¬”äº¤æ˜“æ—¶çš„æœ€å¤§åˆ©æ¶¦ï¼Œä¸”æ­¤æ—¶æŒæœ‰è‚¡ç¥¨ï¼ŒåŒç†<code>sell[i][j]</code>è¡¨ç¤ºæ­¤æ—¶ä¸æŒæœ‰è‚¡ç¥¨ï¼Œç„¶ååˆ†ç±»è®¨è®ºã€‚</p><p>å¯¹äº<code>buy[i][j]</code>:</p><ul><li>è‹¥å‰ä¸€å¤©æœ¬å°±æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆç­‰äº<code>buy[i-1][j]</code></li><li>è‹¥å‰ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä»Šå¤©éœ€ä¹°å…¥è‚¡ç¥¨ï¼Œé‚£ä¹ˆç­‰äº<code>sell[i-1][j]-prices[i]</code></li></ul><p>å¯¹äº<code>sell[i][j]</code>:</p><ul><li>è‹¥å‰ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆç­‰äº<code>sell[i-1][j]</code></li><li>è‹¥å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä»Šå¤©éœ€å–å‡ºè‚¡ç¥¨ï¼Œé‚£ä¹ˆç­‰äº<code>buy[i-1][j-1]+prices[i]</code></li></ul><p>æœ€åçš„ç­”æ¡ˆåº”è¯¥æ˜¯å–å‡ºæ‰€æœ‰è‚¡ç¥¨åçš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥è¿”å›sell[n-1]çš„æœ€å¤§å€¼</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs inform7">class Solution &#123;<br>public:<br>    int maxProfit(int k, vector&lt;int&gt;&amp; prices) &#123;<br>        int n=prices.size();<br>        k=min(k,n/2);<br>        if(n==0)<br>            return 0;<br>        vector&lt;vector&lt;int&gt;&gt; buy(n,vector&lt;int&gt;(k+1));<br>        vector&lt;vector&lt;int&gt;&gt; sell(n,vector&lt;int&gt;(k+1));<br>        buy<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span>=-prices<span class="hljs-comment">[0]</span>;<br>        sell<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span>=0;<br>        for(int i=1;i&lt;=k;++i)<br>            buy<span class="hljs-comment">[0]</span><span class="hljs-comment">[i]</span>=sell<span class="hljs-comment">[0]</span><span class="hljs-comment">[i]</span>=-1e6;<br>        for(int i=1;i&lt;n;++i)<br>        &#123;<br>            buy<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>=max(buy<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[0]</span>,sell<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[0]</span>-prices<span class="hljs-comment">[i]</span>);<br>            for(int j=1;j&lt;=k;++j)<br>            &#123;<br>                buy<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=max(buy<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>,sell<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>-prices<span class="hljs-comment">[i]</span>);<br>                sell<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=max(sell<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>,buy<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j-1]</span>+prices<span class="hljs-comment">[i]</span>);<br>            &#125;<br>        &#125;<br>        return *max_element(sell<span class="hljs-comment">[n-1]</span>.begin(),sell<span class="hljs-comment">[n-1]</span>.end());<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ®µå¼å›æ–‡</title>
    <link href="/2023/04/12/%E6%AE%B5%E5%BC%8F%E5%9B%9E%E6%96%87/"/>
    <url>/2023/04/12/%E6%AE%B5%E5%BC%8F%E5%9B%9E%E6%96%87/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%AE%B5%E5%BC%8F%E5%9B%9E%E6%96%87">æ®µå¼å›æ–‡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ®µå¼å›æ–‡"><a class="markdownIt-Anchor" href="#æ®µå¼å›æ–‡"></a> æ®µå¼å›æ–‡</h2><p><a href="https://leetcode.cn/problems/longest-chunked-palindrome-decomposition/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² text ã€‚ä½ åº”è¯¥æŠŠå®ƒåˆ†æˆ k ä¸ªå­å­—ç¬¦ä¸² (subtext1, subtext2ï¼Œâ€¦ï¼Œ subtextk) ï¼Œè¦æ±‚æ»¡è¶³:</p><ul><li>subtexti æ˜¯ éç©º å­—ç¬¦ä¸²</li><li>æ‰€æœ‰å­å­—ç¬¦ä¸²çš„è¿æ¥ç­‰äº text ( å³subtext1 + subtext2 + â€¦ + subtextk == text )</li><li>å¯¹äºæ‰€æœ‰ i çš„æœ‰æ•ˆå€¼( å³ 1 &lt;= i &lt;= k ) ï¼Œsubtexti == subtextk - i + 1 å‡æˆç«‹<br />è¿”å›kå¯èƒ½æœ€å¤§å€¼ã€‚</li></ul><p>e.g.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼štext <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ghiabcdefhelloadamhelloabcdefghi&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">7</span><br>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŠŠå­—ç¬¦ä¸²æ‹†åˆ†æˆ <span class="hljs-string">&quot;(ghi)(abcdef)(hello)(adam)(hello)(abcdef)(ghi)&quot;</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æšä¸¾å­ä¸²çš„é•¿åº¦<code>i</code>ï¼Œåˆ†åˆ«æˆªå–å‰åé•¿åº¦ä¸º<code>i</code>çš„å­ä¸²ï¼Œå¦‚æœç›¸ç­‰ï¼Œç­”æ¡ˆåŠ 2ï¼Œå¦åˆ™ç»§ç»­æšä¸¾ï¼Œå½“<code>i&gt;text.length/2</code>æ—¶ï¼Œè¯´æ˜å·²ç»ä¸å¯å†åˆ†ï¼Œç­”æ¡ˆåŠ 1</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestDecomposition</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(!text.<span class="hljs-built_in">empty</span>())<br>        &#123;<br>            <span class="hljs-type">int</span> i=<span class="hljs-number">1</span>,n=text.<span class="hljs-built_in">length</span>();<br>            <span class="hljs-keyword">while</span>(i&lt;=n/<span class="hljs-number">2</span>&amp;&amp;text.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>,i)!=text.<span class="hljs-built_in">substr</span>(n-i))<br>                ++i;<br>            <span class="hljs-keyword">if</span>(i&gt;n/<span class="hljs-number">2</span>)<br>            &#123;<br>                ++ans;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            ans+=<span class="hljs-number">2</span>;<br>            text=text.<span class="hljs-built_in">substr</span>(i,n-i*<span class="hljs-number">2</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬</title>
    <link href="/2023/04/04/%E5%90%88%E5%B9%B6%E7%9F%B3%E5%A4%B4%E7%9A%84%E6%9C%80%E4%BD%8E%E6%88%90%E6%9C%AC/"/>
    <url>/2023/04/04/%E5%90%88%E5%B9%B6%E7%9F%B3%E5%A4%B4%E7%9A%84%E6%9C%80%E4%BD%8E%E6%88%90%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%90%88%E5%B9%B6%E7%9F%B3%E5%A4%B4%E7%9A%84%E6%9C%80%E4%BD%8E%E6%88%90%E6%9C%AC">åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬"><a class="markdownIt-Anchor" href="#åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬"></a> åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬</h2><p><a href="https://leetcode.cn/problems/minimum-cost-to-merge-stones/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ N å †çŸ³å¤´æ’æˆä¸€æ’ï¼Œç¬¬ i å †ä¸­æœ‰ stones[i] å—çŸ³å¤´ã€‚</p><p>æ¯æ¬¡ç§»åŠ¨ï¼ˆmoveï¼‰éœ€è¦å°†è¿ç»­çš„ K å †çŸ³å¤´åˆå¹¶ä¸ºä¸€å †ï¼Œè€Œè¿™ä¸ªç§»åŠ¨çš„æˆæœ¬ä¸ºè¿™ K å †çŸ³å¤´çš„æ€»æ•°ã€‚</p><p>æ‰¾å‡ºæŠŠæ‰€æœ‰çŸ³å¤´åˆå¹¶æˆä¸€å †çš„æœ€ä½æˆæœ¬ã€‚å¦‚æœä¸å¯èƒ½ï¼Œè¿”å› -1 ã€‚<br />e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šstones = <span class="hljs-comment">[3,2,4,1]</span>, K = 2<br>è¾“å‡ºï¼š20<br>è§£é‡Šï¼š<br>ä» <span class="hljs-comment">[3, 2, 4, 1]</span> å¼€å§‹ã€‚<br>åˆå¹¶ <span class="hljs-comment">[3, 2]</span>ï¼Œæˆæœ¬ä¸º 5ï¼Œå‰©ä¸‹ <span class="hljs-comment">[5, 4, 1]</span>ã€‚<br>åˆå¹¶ <span class="hljs-comment">[4, 1]</span>ï¼Œæˆæœ¬ä¸º 5ï¼Œå‰©ä¸‹ <span class="hljs-comment">[5, 5]</span>ã€‚<br>åˆå¹¶ <span class="hljs-comment">[5, 5]</span>ï¼Œæˆæœ¬ä¸º 10ï¼Œå‰©ä¸‹ <span class="hljs-comment">[10]</span>ã€‚<br>æ€»æˆæœ¬ 20ï¼Œè¿™æ˜¯å¯èƒ½çš„æœ€å°å€¼ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨<code>dfs(i,j,p)</code>è¡¨ç¤ºæŠŠç¬¬iå †åˆ°ç¬¬jå †åˆå¹¶æˆpå †éœ€è¦çš„æœ€å°æˆæœ¬ï¼Œç„¶åå°†åŸé—®é¢˜åˆ’åˆ†æˆå­é—®é¢˜ã€‚æ¯”å¦‚æœ‰7å †çŸ³å­ï¼Œk=3ï¼Œå®é™…ä¸Šè¦æ±‚çš„å°±æ˜¯<code>dfs(0,6,1)</code>ï¼Œè€Œå®ƒåˆå¯ä»¥åˆ’åˆ†ä¸º<code>dfs(0,6,3)+0åˆ°6æ‰€æœ‰å †ä¹‹å’Œ</code>ï¼Œå¯¹äº<code>dfs(0,6,3)</code>ï¼ŒæŒ‰ç¬¬ä¸€å †çš„åˆå¹¶æ–¹å¼ä¹Ÿåˆ†ä¸ºå‡ ç§æƒ…å†µï¼Œæ¯”å¦‚<code>dfs(0,0,1)+dfs(1,6,2)</code>ï¼Œ<code>dfs(0,2,1)+dfs(3,6,2)</code>ï¼Œ<code>dfs(0,4,1)+dfs(5,6,2)</code>ï¼Œå–è¿™äº›æƒ…å†µä¸­æœ€å°çš„å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> mergeStones(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; stones, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>=stones.size();<br>        <span class="hljs-built_in">if</span>((<span class="hljs-built_in">n</span>-<span class="hljs-number">1</span>)%(k-<span class="hljs-number">1</span>))<br>            return -<span class="hljs-number">1</span>;<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>);<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">n</span>;++i)<br>            <span class="hljs-built_in">sum</span>[i+<span class="hljs-number">1</span>]=<span class="hljs-built_in">sum</span>[i]+stones[i];<br>        <span class="hljs-built_in">int</span> m[<span class="hljs-built_in">n</span>][<span class="hljs-built_in">n</span>][k+<span class="hljs-number">1</span>];<br>        memset(m,-<span class="hljs-number">1</span>,sizeof(m));<br>        function&lt;<span class="hljs-built_in">int</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">int</span>,<span class="hljs-built_in">int</span>)&gt; dfs=[&amp;](<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> j,<span class="hljs-built_in">int</span> p)-&gt;<span class="hljs-built_in">int</span><br>        &#123;<br>            <span class="hljs-built_in">if</span>(m[i][j][p]!=-<span class="hljs-number">1</span>)<br>                return m[i][j][p];<br>            <span class="hljs-built_in">if</span>(p==<span class="hljs-number">1</span>)<br>            &#123;<br>                <span class="hljs-built_in">if</span>(i==j)<br>                    return <span class="hljs-number">0</span>;<br>                else<br>                    return dfs(i,j,k)+<span class="hljs-built_in">sum</span>[j+<span class="hljs-number">1</span>]-<span class="hljs-built_in">sum</span>[i];<br>            &#125;<br>            <span class="hljs-built_in">int</span> res=INT_MAX;<br>            for(<span class="hljs-built_in">int</span> <span class="hljs-built_in">t</span>=i;<span class="hljs-built_in">t</span>&lt;j;<span class="hljs-built_in">t</span>+=k-<span class="hljs-number">1</span>)<br>            &#123;<br>                res=<span class="hljs-built_in">min</span>(res,dfs(i,<span class="hljs-built_in">t</span>,<span class="hljs-number">1</span>)+dfs(<span class="hljs-built_in">t</span>+<span class="hljs-number">1</span>,j,p-<span class="hljs-number">1</span>));<br>            &#125;<br>            m[i][j][p]=res;<br>            return res;<br>        &#125;;<br>        return dfs(<span class="hljs-number">0</span>,<span class="hljs-built_in">n</span>-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—</title>
    <link href="/2023/04/03/%E4%BA%A4%E6%8D%A2%E4%B8%80%E6%AC%A1%E7%9A%84%E5%85%88%E5%89%8D%E6%8E%92%E5%88%97/"/>
    <url>/2023/04/03/%E4%BA%A4%E6%8D%A2%E4%B8%80%E6%AC%A1%E7%9A%84%E5%85%88%E5%89%8D%E6%8E%92%E5%88%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BA%A4%E6%8D%A2%E4%B8%80%E6%AC%A1%E7%9A%84%E5%85%88%E5%89%8D%E6%8E%92%E5%88%97">äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—"><a class="markdownIt-Anchor" href="#äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—"></a> äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—</h2><p><a href="https://leetcode.cn/problems/previous-permutation-with-one-swap/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ arrï¼ˆå¯èƒ½å­˜åœ¨é‡å¤çš„å…ƒç´ ï¼‰ï¼Œè¯·ä½ è¿”å›å¯åœ¨ ä¸€æ¬¡äº¤æ¢ï¼ˆäº¤æ¢ä¸¤æ•°å­— arr[i] å’Œ arr[j] çš„ä½ç½®ï¼‰åå¾—åˆ°çš„ã€æŒ‰å­—å…¸åºæ’åˆ—å°äº arr çš„æœ€å¤§æ’åˆ—ã€‚</p><p>å¦‚æœæ— æ³•è¿™ä¹ˆæ“ä½œï¼Œå°±è¯·è¿”å›åŸæ•°ç»„ã€‚</p><p>e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šarr = <span class="hljs-string">[1,9,4,6,7]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[1,7,4,6,9]</span><br>è§£é‡Šï¼šäº¤æ¢ <span class="hljs-number">9</span> å’Œ <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å…ˆä»åå¾€å‰ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªé™åºæ’åˆ—çš„æ•°<code>a[i]</code>ï¼Œå¹¶å¯çŸ¥ä»–åé¢çš„æ•°éƒ½æ˜¯éé€’å‡æ’åˆ—çš„ï¼Œå†æ¬¡ä»åå¾€å‰éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äº<code>a[i]</code>ä¸”ä¸‹æ ‡å°½å¯èƒ½å°çš„æ•°(é‡å¤æ•°å­—å–ä¸‹æ ‡æ›´å°çš„)ä¸<code>a[i]</code>äº¤æ¢å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">prevPermOpt1</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=arr.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> i=n<span class="hljs-number">-2</span>,j=n<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span>(i=n<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(arr[i]&gt;arr[i+<span class="hljs-number">1</span>])<br>            &#123;<br>                <span class="hljs-keyword">while</span>(arr[j]&gt;=arr[i]||arr[j]==arr[j<span class="hljs-number">-1</span>])<br>                    --j;<br>                <span class="hljs-built_in">swap</span>(arr[i],arr[j]);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> arr;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</title>
    <link href="/2023/04/02/%E5%A4%9A%E8%BE%B9%E5%BD%A2%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86%E7%9A%84%E6%9C%80%E4%BD%8E%E5%BE%97%E5%88%86/"/>
    <url>/2023/04/02/%E5%A4%9A%E8%BE%B9%E5%BD%A2%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86%E7%9A%84%E6%9C%80%E4%BD%8E%E5%BE%97%E5%88%86/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%A4%9A%E8%BE%B9%E5%BD%A2%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86%E7%9A%84%E6%9C%80%E4%BD%8E%E5%BE%97%E5%88%86">å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†"><a class="markdownIt-Anchor" href="#å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†"></a> å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</h2><p><a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æœ‰ä¸€ä¸ªå‡¸çš„ n è¾¹å½¢ï¼Œå…¶æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ä¸€ä¸ªæ•´æ•°å€¼ã€‚ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ values ï¼Œå…¶ä¸­ values[i] æ˜¯ç¬¬ i ä¸ªé¡¶ç‚¹çš„å€¼ï¼ˆå³ é¡ºæ—¶é’ˆé¡ºåº ï¼‰ã€‚</p><p>å‡è®¾å°†å¤šè¾¹å½¢ å‰–åˆ† ä¸º n - 2 ä¸ªä¸‰è§’å½¢ã€‚å¯¹äºæ¯ä¸ªä¸‰è§’å½¢ï¼Œè¯¥ä¸‰è§’å½¢çš„å€¼æ˜¯é¡¶ç‚¹æ ‡è®°çš„ä¹˜ç§¯ï¼Œä¸‰è§’å‰–åˆ†çš„åˆ†æ•°æ˜¯è¿›è¡Œä¸‰è§’å‰–åˆ†åæ‰€æœ‰ n - 2 ä¸ªä¸‰è§’å½¢çš„å€¼ä¹‹å’Œã€‚</p><p>è¿”å› å¤šè¾¹å½¢è¿›è¡Œä¸‰è§’å‰–åˆ†åå¯ä»¥å¾—åˆ°çš„æœ€ä½åˆ† ã€‚<br />e.g.</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">è¾“å…¥ï¼švalues = [3,7,4,5]<br>è¾“å‡ºï¼š144<br>è§£é‡Šï¼šæœ‰ä¸¤ç§ä¸‰è§’å‰–åˆ†ï¼Œå¯èƒ½å¾—åˆ†åˆ†åˆ«ä¸ºï¼š3<span class="hljs-number">*7</span><span class="hljs-number">*5</span> + 4<span class="hljs-number">*5</span><span class="hljs-number">*7</span> = 245ï¼Œæˆ– 3<span class="hljs-number">*4</span><span class="hljs-number">*5</span> + 3<span class="hljs-number">*4</span><span class="hljs-number">*7</span> = 144ã€‚æœ€ä½åˆ†æ•°ä¸º 144ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯¹äºé¡¶ç‚¹<code>i~j</code>ï¼Œå¯ä»¥é€‰å–ä¸­é—´çš„é¡¶ç‚¹<code>k(i&lt;k&lt;j)</code>,è¿™3ä¸ªç‚¹ä¼šå°†å¤šè¾¹å½¢åˆ†ä¸º3éƒ¨åˆ†ï¼Œå…¶ä¸­i,j,kç»„æˆçš„æ˜¯ä¸‰è§’å½¢ï¼Œå…¶ä½™ä¸¤éƒ¨åˆ†å½¢çŠ¶ä¸ç¡®å®šï¼Œå› æ­¤å¯ä»¥ç”¨é€’å½’çš„æ–¹å¼å¯¹å…¶ä½™ä¸¤éƒ¨åˆ†å†è¿›è¡Œåˆ’åˆ†ï¼Œè¿™æ ·å°±å¯ä»¥å¾—å‡ºé¡¶ç‚¹<code>i~j</code>ä¹‹é—´å‰–åˆ†æˆä¸‰è§’å½¢çš„æœ€ä½åˆ†æ•°ï¼Œåœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç”¨è®°å¿†åŒ–æœç´¢æ¥è·³è¿‡å·²ç»è®¡ç®—è¿‡çš„åŒºé—´ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minScoreTriangulation</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; values)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=values.<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">m</span>(n,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n+<span class="hljs-number">1</span>));<br>        function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>,<span class="hljs-type">int</span>)&gt; dfs=[&amp;](<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> j)-&gt;<span class="hljs-type">int</span><br>        &#123;<br>            <span class="hljs-keyword">if</span>(m[i][j]||i+<span class="hljs-number">1</span>==j)<br>                <span class="hljs-keyword">return</span> m[i][j];<br>            <span class="hljs-type">int</span> res=INT_MAX;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=i+<span class="hljs-number">1</span>;k&lt;j;++k)<br>                res=<span class="hljs-built_in">min</span>(res,<span class="hljs-built_in">dfs</span>(i,k)+<span class="hljs-built_in">dfs</span>(k,j)+values[i]*values[k]*values[j]);<br>            m[i][j]=res;<br>            <span class="hljs-keyword">return</span> res;<br>        &#125;;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»Ÿè®¡å­—å…¸åºå…ƒéŸ³å­—ç¬¦ä¸²çš„æ•°ç›®</title>
    <link href="/2023/03/29/%E7%BB%9F%E8%AE%A1%E5%AD%97%E5%85%B8%E5%BA%8F%E5%85%83%E9%9F%B3%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%95%B0%E7%9B%AE/"/>
    <url>/2023/03/29/%E7%BB%9F%E8%AE%A1%E5%AD%97%E5%85%B8%E5%BA%8F%E5%85%83%E9%9F%B3%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%95%B0%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BB%9F%E8%AE%A1%E5%AD%97%E5%85%B8%E5%BA%8F%E5%85%83%E9%9F%B3%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%95%B0%E7%9B%AE">ç»Ÿè®¡å­—å…¸åºå…ƒéŸ³å­—ç¬¦ä¸²çš„æ•°ç›®</a></li><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul><!-- /TOC --><h2 id="ç»Ÿè®¡å­—å…¸åºå…ƒéŸ³å­—ç¬¦ä¸²çš„æ•°ç›®"><a class="markdownIt-Anchor" href="#ç»Ÿè®¡å­—å…¸åºå…ƒéŸ³å­—ç¬¦ä¸²çš„æ•°ç›®"></a> ç»Ÿè®¡å­—å…¸åºå…ƒéŸ³å­—ç¬¦ä¸²çš„æ•°ç›®</h2><p><a href="https://leetcode.cn/problems/count-sorted-vowel-strings/description/">åŸé¢˜</a></p><h2 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° nï¼Œè¯·è¿”å›é•¿åº¦ä¸º n ã€ä»…ç”±å…ƒéŸ³ (a, e, i, o, u) ç»„æˆä¸”æŒ‰ å­—å…¸åºæ’åˆ— çš„å­—ç¬¦ä¸²æ•°é‡ã€‚</p><p>å­—ç¬¦ä¸² s æŒ‰ å­—å…¸åºæ’åˆ— éœ€è¦æ»¡è¶³ï¼šå¯¹äºæ‰€æœ‰æœ‰æ•ˆçš„ iï¼Œs[i] åœ¨å­—æ¯è¡¨ä¸­çš„ä½ç½®æ€»æ˜¯ä¸ s[i+1] ç›¸åŒæˆ–åœ¨ s[i+1] ä¹‹å‰ã€‚</p><p>e.g.</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šn = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">15</span><br>è§£é‡Šï¼šä»…ç”±å…ƒéŸ³ç»„æˆçš„ <span class="hljs-number">15</span> ä¸ªå­—å…¸åºå­—ç¬¦ä¸²ä¸º<br>[<span class="hljs-string">&quot;aa&quot;</span>,<span class="hljs-string">&quot;ae&quot;</span>,<span class="hljs-string">&quot;ai&quot;</span>,<span class="hljs-string">&quot;ao&quot;</span>,<span class="hljs-string">&quot;au&quot;</span>,<span class="hljs-string">&quot;ee&quot;</span>,<span class="hljs-string">&quot;ei&quot;</span>,<span class="hljs-string">&quot;eo&quot;</span>,<span class="hljs-string">&quot;eu&quot;</span>,<span class="hljs-string">&quot;ii&quot;</span>,<span class="hljs-string">&quot;io&quot;</span>,<span class="hljs-string">&quot;iu&quot;</span>,<span class="hljs-string">&quot;oo&quot;</span>,<span class="hljs-string">&quot;ou&quot;</span>,<span class="hljs-string">&quot;uu&quot;</span>]<br>æ³¨æ„ï¼Œ<span class="hljs-string">&quot;ea&quot;</span> ä¸æ˜¯ç¬¦åˆé¢˜æ„çš„å­—ç¬¦ä¸²ï¼Œå› ä¸º <span class="hljs-string">&#x27;e&#x27;</span> åœ¨å­—æ¯è¡¨ä¸­çš„ä½ç½®æ¯” <span class="hljs-string">&#x27;a&#x27;</span> é å<br></code></pre></td></tr></table></figure><h2 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h2><p>çœ‹åˆ°äº†ä¸€ä¸ªå¾ˆç®€æ´çš„æ€è·¯ï¼ŒğŸ˜¢ï¼Œä¸»è¦éœ€è¦è€ƒè™‘åˆ†åˆ«ä»¥5ä¸ªå­—æ¯ç»“å°¾çš„ä¸ªæ•°ï¼Œå¯¹äºé•¿åº¦ä¸ºnçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¦æ»¡è¶³æŒ‰å­—å…¸åºæ’åˆ—ï¼Œä»¥aç»“å°¾çš„ä¸ªæ•°åªæœ‰1ä¸ªï¼Œè€Œä»¥eç»“å°¾çš„ä¸ªæ•°ç­‰äºå‰ä¸€ä½ä»¥aç»“å°¾çš„æ•°ç›®åŠ ä¸Šä»¥eç»“å°¾çš„æ•°ç›®ï¼Œå³<code>e=a+e</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚ã€‚ã€‚</p><h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int countVowelStrings(int n) &#123;<br>        int <span class="hljs-attribute">a</span>=1,e=1,i=1,o=1,u=1;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">k</span>=1;k&lt;n;++k)<br>        &#123;<br>            <span class="hljs-attribute">e</span>=a+e;<br>            <span class="hljs-attribute">i</span>=e+i;<br>            <span class="hljs-attribute">o</span>=i+o;<br>            <span class="hljs-attribute">u</span>=o+u;<br>        &#125;<br>        return a+e+i+o+u;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€çŸ­å…¬å…±è¶…åºåˆ—</title>
    <link href="/2023/03/28/%E6%9C%80%E7%9F%AD%E5%85%AC%E5%85%B1%E8%B6%85%E5%BA%8F%E5%88%97/"/>
    <url>/2023/03/28/%E6%9C%80%E7%9F%AD%E5%85%AC%E5%85%B1%E8%B6%85%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E7%9F%AD%E5%85%AC%E5%85%B1%E8%B6%85%E5%BA%8F%E5%88%97">æœ€çŸ­å…¬å…±è¶…åºåˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€çŸ­å…¬å…±è¶…åºåˆ—"><a class="markdownIt-Anchor" href="#æœ€çŸ­å…¬å…±è¶…åºåˆ—"></a> æœ€çŸ­å…¬å…±è¶…åºåˆ—</h2><p><a href="https://leetcode.cn/problems/shortest-common-supersequence/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å‡ºä¸¤ä¸ªå­—ç¬¦ä¸² str1 å’Œ str2ï¼Œè¿”å›åŒæ—¶ä»¥ str1 å’Œ str2 ä½œä¸ºå­åºåˆ—çš„æœ€çŸ­å­—ç¬¦ä¸²ã€‚å¦‚æœç­”æ¡ˆä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥è¿”å›æ»¡è¶³æ¡ä»¶çš„ä»»æ„ä¸€ä¸ªç­”æ¡ˆã€‚</p><p>ï¼ˆå¦‚æœä»å­—ç¬¦ä¸² T ä¸­åˆ é™¤ä¸€äº›å­—ç¬¦ï¼ˆä¹Ÿå¯èƒ½ä¸åˆ é™¤ï¼Œå¹¶ä¸”é€‰å‡ºçš„è¿™äº›å­—ç¬¦å¯ä»¥ä½äº T ä¸­çš„ ä»»æ„ä½ç½®ï¼‰ï¼Œå¯ä»¥å¾—åˆ°å­—ç¬¦ä¸² Sï¼Œé‚£ä¹ˆ S å°±æ˜¯ T çš„å­åºåˆ—ï¼‰</p><p>e.g.</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">è¾“å…¥ï¼šstr1 = <span class="hljs-string">&quot;abac&quot;</span>, str2 = <span class="hljs-string">&quot;cab&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;cabac&quot;</span><br>è§£é‡Šï¼š<br>str1 = <span class="hljs-string">&quot;abac&quot;</span> æ˜¯ <span class="hljs-string">&quot;cabac&quot;</span> çš„ä¸€ä¸ªå­ä¸²ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åˆ å» <span class="hljs-string">&quot;cabac&quot;</span> çš„ç¬¬ä¸€ä¸ª <span class="hljs-string">&quot;c&quot;</span>å¾—åˆ° <span class="hljs-string">&quot;abac&quot;</span>ã€‚ <br>str2 = <span class="hljs-string">&quot;cab&quot;</span> æ˜¯ <span class="hljs-string">&quot;cabac&quot;</span> çš„ä¸€ä¸ªå­ä¸²ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åˆ å» <span class="hljs-string">&quot;cabac&quot;</span> æœ«å°¾çš„ <span class="hljs-string">&quot;ac&quot;</span> å¾—åˆ° <span class="hljs-string">&quot;cab&quot;</span>ã€‚<br>æœ€ç»ˆæˆ‘ä»¬ç»™å‡ºçš„ç­”æ¡ˆæ˜¯æ»¡è¶³ä¸Šè¿°å±æ€§çš„æœ€çŸ­å­—ç¬¦ä¸²<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¦‚æœæƒ³è¦æ„æˆçš„è¶…åºåˆ—æœ€çŸ­ï¼Œé‚£ä¹ˆå…¬å…±çš„å­ä¸²éƒ¨åˆ†å°±è¦å°½å¯èƒ½é•¿ï¼Œå› æ­¤å…ˆæ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²æœ€é•¿å…¬å…±å­ä¸²çš„dpæ•°ç»„ã€‚å¾—åˆ°ä¹‹åéœ€è¦æ„é€ æœ€çŸ­å…¬å…±è¶…åºåˆ—ï¼Œè‹¥è¦æ»¡è¶³æœ€çŸ­æ¡ä»¶ï¼Œé‚£ä¹ˆå…¬å…±éƒ¨åˆ†å°±è¦å°½å¯èƒ½é•¿ï¼Œå› æ­¤ä»å³è‡³å·¦é€‰æ‹©å­—ç¬¦æ—¶ï¼Œå½“<code>str[i]==str[j]</code>ï¼ŒåŒæ—¶<code>--i;--j</code>ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ä¼˜å…ˆé€‰æ‹©ä¸ä¼šæŸå¤±dpæ•°ç»„çš„å­—ç¬¦ï¼Œä¾‹å¦‚å¦‚æœ<code>dp[i-1][j]&gt;dp[i][j-1]</code>ï¼Œè¯´æ˜é€‰æ‹©str1[i]ä¸ä¼šæŸå¤±dpæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå½±å“å½“å½“å‰ä½ç½®çš„æœ€é•¿å…¬å…±å­ä¸²ï¼Œå› æ­¤é€‰æ‹©str1[i]ã€‚å½“æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å…ˆåˆ°è¾¾å·¦ç«¯ç‚¹æ—¶é€€å‡ºå¾ªç¯ï¼Œç„¶åæ„é€ å‰©ä½™éƒ¨åˆ†å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs inform7">class Solution &#123;<br>public:<br>    string shortestCommonSupersequence(string str1, string str2) &#123;<br>        int m=str1.size(),n=str2.size();<br>        vector&lt;vector&lt;int&gt;&gt; dp(m+1,vector&lt;int&gt;(n+1));<br>        for(int i=1;i&lt;=m;++i)<br>        &#123;<br>            for(int j=1;j&lt;=n;++j)<br>            &#123;<br>                if(str1<span class="hljs-comment">[i-1]</span>==str2<span class="hljs-comment">[j-1]</span>)<br>                    dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j-1]</span>+1;<br>                else<br>                    dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=max(dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j-1]</span>);<br>            &#125;<br>        &#125;<br>        string res;<br>        int i=m,j=n;<br>        while(i&gt;0&amp;&amp;j&gt;0)<br>        &#123;<br>            if(str1<span class="hljs-comment">[i-1]</span>==str2<span class="hljs-comment">[j-1]</span>)<br>            &#123;<br>                res+=str1<span class="hljs-comment">[i-1]</span>;<br>                --i;<br>                --j;<br>            &#125;<br>            else if(dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>&gt;dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j-1]</span>)<br>            &#123;<br>                res+=str1<span class="hljs-comment">[i-1]</span>;<br>                --i;<br>            &#125;<br>            else<br>            &#123;<br>                res+=str2<span class="hljs-comment">[j-1]</span>;<br>                --j;<br>            &#125;<br>        &#125;<br>        while(i&gt;0)<br>        &#123;<br>            res+=str1<span class="hljs-comment">[i-1]</span>;<br>            --i;<br>        &#125;<br>        while(j&gt;0)<br>        &#123;<br>            res+=str2<span class="hljs-comment">[j-1]</span>;<br>            --j;<br>        &#125;<br>        reverse(res.begin(),res.end());<br>        return res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ— çŸ›ç›¾çš„æœ€ä½³çƒé˜Ÿ</title>
    <link href="/2023/03/22/%E6%97%A0%E7%9F%9B%E7%9B%BE%E7%9A%84%E6%9C%80%E4%BD%B3%E7%90%83%E9%98%9F/"/>
    <url>/2023/03/22/%E6%97%A0%E7%9F%9B%E7%9B%BE%E7%9A%84%E6%9C%80%E4%BD%B3%E7%90%83%E9%98%9F/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%97%A0%E7%9F%9B%E7%9B%BE%E7%9A%84%E6%9C%80%E4%BD%B3%E7%90%83%E9%98%9F">æ— çŸ›ç›¾çš„æœ€ä½³çƒé˜Ÿ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ— çŸ›ç›¾çš„æœ€ä½³çƒé˜Ÿ"><a class="markdownIt-Anchor" href="#æ— çŸ›ç›¾çš„æœ€ä½³çƒé˜Ÿ"></a> æ— çŸ›ç›¾çš„æœ€ä½³çƒé˜Ÿ</h2><p><a href="https://leetcode.cn/problems/best-team-with-no-conflicts/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å‡è®¾ä½ æ˜¯çƒé˜Ÿçš„ç»ç†ã€‚å¯¹äºå³å°†åˆ°æ¥çš„é”¦æ ‡èµ›ï¼Œä½ æƒ³ç»„åˆä¸€æ”¯æ€»ä½“å¾—åˆ†æœ€é«˜çš„çƒé˜Ÿã€‚çƒé˜Ÿçš„å¾—åˆ†æ˜¯çƒé˜Ÿä¸­æ‰€æœ‰çƒå‘˜çš„åˆ†æ•° æ€»å’Œ ã€‚</p><p>ç„¶è€Œï¼Œçƒé˜Ÿä¸­çš„çŸ›ç›¾ä¼šé™åˆ¶çƒå‘˜çš„å‘æŒ¥ï¼Œæ‰€ä»¥å¿…é¡»é€‰å‡ºä¸€æ”¯ æ²¡æœ‰çŸ›ç›¾ çš„çƒé˜Ÿã€‚å¦‚æœä¸€åå¹´é¾„è¾ƒå°çƒå‘˜çš„åˆ†æ•° ä¸¥æ ¼å¤§äº ä¸€åå¹´é¾„è¾ƒå¤§çš„çƒå‘˜ï¼Œåˆ™å­˜åœ¨çŸ›ç›¾ã€‚åŒé¾„çƒå‘˜ä¹‹é—´ä¸ä¼šå‘ç”ŸçŸ›ç›¾ã€‚</p><p>ç»™ä½ ä¸¤ä¸ªåˆ—è¡¨ scores å’Œ agesï¼Œå…¶ä¸­æ¯ç»„ scores[i] å’Œ ages[i] è¡¨ç¤ºç¬¬ i åçƒå‘˜çš„åˆ†æ•°å’Œå¹´é¾„ã€‚è¯·ä½ è¿”å› æ‰€æœ‰å¯èƒ½çš„æ— çŸ›ç›¾çƒé˜Ÿä¸­å¾—åˆ†æœ€é«˜é‚£æ”¯çš„åˆ†æ•° ã€‚</p><p>e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šscores = <span class="hljs-string">[1,3,5,10,15]</span>, ages = <span class="hljs-string">[1,2,3,4,5]</span><br>è¾“å‡ºï¼š<span class="hljs-number">34</span><br>è§£é‡Šï¼šä½ å¯ä»¥é€‰ä¸­æ‰€æœ‰çƒå‘˜ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¦–å…ˆå¯¹æ‰€æœ‰äººæŒ‰ç…§åˆ†æ•°å‡åºæ’åºï¼Œ<code>dp[i]</code>è¡¨ç¤ºé€‰æ‹©åˆ°ç¬¬<code>i</code>åçƒå‘˜æ—¶çš„æœ€å¤§åˆ†æ•°ï¼Œå¯¹äºçƒå‘˜<code>i</code>,éœ€è¦æ‰¾åˆ°<code>j</code>æ»¡è¶³<code>j</code>çš„å¹´é¾„å°äº<code>i</code>ä¸”<code>j&lt;i</code>ï¼Œå¹¶ä¸”<code>dp[j]</code>æ˜¯æ‰€æœ‰<code>i</code>ä¹‹å‰ä¸”å¹´é¾„å°äº<code>i</code>çš„çƒå‘˜çš„æœ€å¤§åˆ†æ•°ï¼Œå› æ­¤<code>dp[i]=dp[j]+score[i]</code>ï¼Œç„¶åæ›´æ–°ç­”æ¡ˆå³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bestTeamScore</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; scores, vector&lt;<span class="hljs-type">int</span>&gt;&amp; ages)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=scores.<span class="hljs-built_in">size</span>();<br>        vector&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; v;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>            v.<span class="hljs-built_in">push_back</span>(&#123;scores[i],ages[i]&#125;);<br>        <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i<span class="hljs-number">-1</span>;j&gt;=<span class="hljs-number">0</span>;--j)<br>                <span class="hljs-keyword">if</span>(v[j].second&lt;=v[i].second)<br>                dp[i]=<span class="hljs-built_in">max</span>(dp[i],dp[j]);<br>            <br>            dp[i]+=v[i].first;<br>            ans=<span class="hljs-built_in">max</span>(ans,dp[i]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å‰²å¾—åˆ°å­—ç¬¦ä¸²</title>
    <link href="/2023/03/18/%E5%88%86%E5%89%B2%E5%BE%97%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2023/03/18/%E5%88%86%E5%89%B2%E5%BE%97%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%88%86%E5%89%B2%E5%BE%97%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2">åˆ†å‰²å¾—åˆ°å­—ç¬¦ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åˆ†å‰²å¾—åˆ°å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#åˆ†å‰²å¾—åˆ°å­—ç¬¦ä¸²"></a> åˆ†å‰²å¾—åˆ°å­—ç¬¦ä¸²</h2><p><a href="https://leetcode.cn/problems/split-two-strings-to-make-palindrome/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² a å’Œ b ï¼Œå®ƒä»¬é•¿åº¦ç›¸åŒã€‚è¯·ä½ é€‰æ‹©ä¸€ä¸ªä¸‹æ ‡ï¼Œå°†ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½åœ¨ ç›¸åŒçš„ä¸‹æ ‡ åˆ†å‰²å¼€ã€‚ç”± a å¯ä»¥å¾—åˆ°ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š aprefix å’Œ asuffix ï¼Œæ»¡è¶³ a = aprefix + asuffix ï¼ŒåŒç†ï¼Œç”± b å¯ä»¥å¾—åˆ°ä¸¤ä¸ªå­—ç¬¦ä¸² bprefix å’Œ bsuffix ï¼Œæ»¡è¶³ b = bprefix + bsuffix ã€‚è¯·ä½ åˆ¤æ–­ aprefix + bsuffix æˆ–è€… bprefix + asuffix èƒ½å¦æ„æˆå›æ–‡ä¸²ã€‚</p><p>å½“ä½ å°†ä¸€ä¸ªå­—ç¬¦ä¸² s åˆ†å‰²æˆ sprefix å’Œ ssuffix æ—¶ï¼Œ ssuffix æˆ–è€… sprefix å¯ä»¥ä¸ºç©ºã€‚æ¯”æ–¹è¯´ï¼Œ s = â€œabcâ€ é‚£ä¹ˆ â€œâ€ + â€œabcâ€ ï¼Œ â€œaâ€ + â€œbcâ€ ï¼Œ â€œabâ€ + â€œcâ€ å’Œ â€œabcâ€ + â€œâ€ éƒ½æ˜¯åˆæ³•åˆ†å‰²ã€‚</p><p>å¦‚æœ èƒ½æ„æˆå›æ–‡å­—ç¬¦ä¸² ï¼Œé‚£ä¹ˆè¯·è¿”å› trueï¼Œå¦åˆ™è¿”å› false ã€‚</p><p>æ³¨æ„ï¼Œ x + y è¡¨ç¤ºè¿æ¥å­—ç¬¦ä¸² x å’Œ y ã€‚</p><p>e.g.</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">è¾“å…¥ï¼š<span class="hljs-keyword">a</span> = <span class="hljs-string">&quot;abdef&quot;</span>, b = <span class="hljs-string">&quot;fecab&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä½¿ç”¨åŒæŒ‡é’ˆçš„æ€æƒ³ï¼Œåˆ†å–açš„å‰ç¼€å’Œå–bå‰ç¼€ä¸¤ç§æƒ…å†µï¼Œä½†æ˜¯å¤„ç†æ–¹å¼ç›¸åŒã€‚ä»¥å–aå‰ç¼€ä¸ºä¾‹ï¼Œé¦–å…ˆåˆ†åˆ«ä»aå·¦ç«¯å’Œbå³ç«¯å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœ<code>a[l]==b[r]</code>,é‚£ä¹ˆ<code>++l,--r</code>ï¼Œç›´åˆ°ä¸ç›¸ç­‰æˆ–è€…<code>l&gt;=r</code>ä¸ºæ­¢ï¼Œå¦‚æœ<code>l&gt;=r</code>è¯´æ˜åœ¨ä¸­é—´ä½ç½®åˆ†å‰²å¯æ»¡è¶³è¦æ±‚ï¼Œç›´æ¥è¿”å›<code>true</code>;å¦‚æœæ˜¯ä¸ç›¸ç­‰çš„æƒ…å†µï¼Œåˆ™éœ€è¦åˆ¤æ–­æ˜¯ä»¥lè¿˜æ˜¯rä¸ºåˆ†å‰²ç‚¹ï¼Œå¹¶åˆ¤æ–­l~rä¹‹é—´çš„å­ä¸²æ˜¯å¦å›æ–‡ï¼Œå¦‚æœæ»¡è¶³è¦æ±‚å³å¯è¿”å›<code>true</code>ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">checksub</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> a,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;a[l]==a[r])<br>        &#123;<br>            ++l;--r;<br>        &#125;<br>        <span class="hljs-keyword">return</span> l&gt;=r;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">check</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> a,<span class="hljs-built_in">string</span> b,<span class="hljs-built_in">int</span> n</span>)</span><br>    &#123;<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>,r=n<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;a[l]==b[r])<br>        &#123;<br>            ++l;--r;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(l&gt;=r)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">return</span> checksub(a,l,r)||checksub(b,l,r);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">checkPalindromeFormation</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> a, <span class="hljs-built_in">string</span> b</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> n=a.size();<br>        <span class="hljs-keyword">return</span> check(a,b,n)||check(b,a,n);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»Ÿè®¡ä¸­ä½æ•°ä¸ºKçš„å­æ•°ç»„</title>
    <link href="/2023/03/16/%E7%BB%9F%E8%AE%A1%E4%B8%AD%E4%BD%8D%E6%95%B0%E4%B8%BAK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <url>/2023/03/16/%E7%BB%9F%E8%AE%A1%E4%B8%AD%E4%BD%8D%E6%95%B0%E4%B8%BAK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BB%9F%E8%AE%A1%E4%B8%AD%E4%BD%8D%E6%95%B0%E4%B8%BA-k-%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84">ç»Ÿè®¡ä¸­ä½æ•°ä¸º K çš„å­æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç»Ÿè®¡ä¸­ä½æ•°ä¸º-k-çš„å­æ•°ç»„"><a class="markdownIt-Anchor" href="#ç»Ÿè®¡ä¸­ä½æ•°ä¸º-k-çš„å­æ•°ç»„"></a> ç»Ÿè®¡ä¸­ä½æ•°ä¸º K çš„å­æ•°ç»„</h2><p><a href="https://leetcode.cn/problems/count-subarrays-with-median-k/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums ï¼Œè¯¥æ•°ç»„ç”±ä» 1 åˆ° n çš„ ä¸åŒ æ•´æ•°ç»„æˆã€‚å¦ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° k ã€‚</p><p>ç»Ÿè®¡å¹¶è¿”å› nums ä¸­çš„ ä¸­ä½æ•° ç­‰äº k çš„éç©ºå­æ•°ç»„çš„æ•°ç›®ã€‚</p><p>æ³¨æ„ï¼š</p><p>æ•°ç»„çš„ä¸­ä½æ•°æ˜¯æŒ‰ é€’å¢ é¡ºåºæ’åˆ—åä½äº ä¸­é—´ çš„é‚£ä¸ªå…ƒç´ ï¼Œå¦‚æœæ•°ç»„é•¿åº¦ä¸ºå¶æ•°ï¼Œåˆ™ä¸­ä½æ•°æ˜¯ä½äºä¸­é—´é  å·¦ çš„é‚£ä¸ªå…ƒç´ ã€‚<br />ä¾‹å¦‚ï¼Œ[2,3,1,4] çš„ä¸­ä½æ•°æ˜¯ 2 ï¼Œ[8,4,3,5,1] çš„ä¸­ä½æ•°æ˜¯ 4 ã€‚<br />å­æ•°ç»„æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚</p><p>e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[3,2,1,4,5]</span>, k = 4<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼šä¸­ä½æ•°ç­‰äº 4 çš„å­æ•°ç»„æœ‰ï¼š<span class="hljs-comment">[4]</span>ã€<span class="hljs-comment">[4,5]</span> å’Œ <span class="hljs-comment">[1,4,5]</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>é¦–å…ˆæ‰¾å‡º<code>k</code>åœ¨æ•°ç»„ä¸­çš„ä½ç½®<code>idx</code>ï¼Œå¯¹äºæ¯ä¸ªæ•°ï¼Œå¤§äº<code>k</code>è®°ä¸º1,å¦åˆ™ä¸º-1ï¼Œç»Ÿè®¡æ¯ä¸ªä½ç½®å‰ç¼€å’Œã€‚å¦‚æœä¸‹æ ‡<code>l</code>å¤„ä¸<code>r</code>å¤„çš„å‰ç¼€å’Œä¹‹å·®ä¸º0æˆ–1,é‚£ä¹ˆè¯´æ˜<code>[l+1,r]</code>èŒƒå›´å†…çš„å­æ•°ç»„å…ƒç´ å’Œä¸º0æˆ–1,é‚£ä¹ˆ<code>k</code>å°±æ˜¯è¯¥å­æ•°ç»„çš„ä¸­ä½æ•°ã€‚åœ¨ç»Ÿè®¡ç›¸åŒå‰ç¼€å’Œä¸ªæ•°æ—¶ï¼Œç”¨å“ˆç³»è¡¨è®°å½•å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åå¯¹ç¬¦åˆè¦æ±‚çš„ä½ç½®ç´¯åŠ å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> judge(<span class="hljs-built_in">int</span> a,<span class="hljs-built_in">int</span> b)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(a&gt;b)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a&lt;b)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">int</span> countSubarrays(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> n=nums.size();<br>        <span class="hljs-built_in">int</span> idx=<span class="hljs-number">0</span>,sum=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(nums[i]==k)<br>            &#123;<br>                idx=i;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        unordered_map&lt;<span class="hljs-built_in">int</span>,<span class="hljs-built_in">int</span>&gt; mp;<br>        mp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            sum+=judge(nums[i],k);<br>            <span class="hljs-keyword">if</span>(i&lt;idx)<br>                ++mp[sum];<br>            <span class="hljs-keyword">else</span><br>                ans+=mp[sum]+mp[sum<span class="hljs-number">-1</span>];<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»™å®šè¡Œå’Œåˆ—çš„å’Œæ±‚å¯è¡ŒçŸ©é˜µ</title>
    <link href="/2023/03/14/%E7%BB%99%E5%AE%9A%E8%A1%8C%E5%92%8C%E5%88%97%E7%9A%84%E5%92%8C%E6%B1%82%E5%8F%AF%E8%A1%8C%E7%9F%A9%E9%98%B5/"/>
    <url>/2023/03/14/%E7%BB%99%E5%AE%9A%E8%A1%8C%E5%92%8C%E5%88%97%E7%9A%84%E5%92%8C%E6%B1%82%E5%8F%AF%E8%A1%8C%E7%9F%A9%E9%98%B5/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BB%99%E5%AE%9A%E8%A1%8C%E5%92%8C%E5%88%97%E7%9A%84%E5%92%8C%E6%B1%82%E5%8F%AF%E8%A1%8C%E7%9F%A9%E9%98%B5">ç»™å®šè¡Œå’Œåˆ—çš„å’Œæ±‚å¯è¡ŒçŸ©é˜µ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç»™å®šè¡Œå’Œåˆ—çš„å’Œæ±‚å¯è¡ŒçŸ©é˜µ"><a class="markdownIt-Anchor" href="#ç»™å®šè¡Œå’Œåˆ—çš„å’Œæ±‚å¯è¡ŒçŸ©é˜µ"></a> ç»™å®šè¡Œå’Œåˆ—çš„å’Œæ±‚å¯è¡ŒçŸ©é˜µ</h2><p><a href="https://leetcode.cn/problems/find-valid-matrix-given-row-and-column-sums/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ rowSum å’Œ colSum ï¼Œå…¶ä¸­ rowSum[i] æ˜¯äºŒç»´çŸ©é˜µä¸­ç¬¬ i è¡Œå…ƒç´ çš„å’Œï¼Œ colSum[j] æ˜¯ç¬¬ j åˆ—å…ƒç´ çš„å’Œã€‚æ¢è¨€ä¹‹ä½ ä¸çŸ¥é“çŸ©é˜µé‡Œçš„æ¯ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä½ çŸ¥é“æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—çš„å’Œã€‚</p><p>è¯·æ‰¾åˆ°å¤§å°ä¸º rowSum.length x colSum.length çš„ä»»æ„ éè´Ÿæ•´æ•° çŸ©é˜µï¼Œä¸”è¯¥çŸ©é˜µæ»¡è¶³ rowSum å’Œ colSum çš„è¦æ±‚ã€‚</p><p>è¯·ä½ è¿”å›ä»»æ„ä¸€ä¸ªæ»¡è¶³é¢˜ç›®è¦æ±‚çš„äºŒç»´çŸ©é˜µï¼Œé¢˜ç›®ä¿è¯å­˜åœ¨ è‡³å°‘ä¸€ä¸ª å¯è¡ŒçŸ©é˜µã€‚<br />e.g.</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šrowSum = <span class="hljs-comment">[3,8]</span>, colSum = <span class="hljs-comment">[4,7]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[3,0]</span>,</span><br><span class="hljs-comment">      <span class="hljs-comment">[1,7]</span>]</span><br>è§£é‡Šï¼š<br>ç¬¬ 0 è¡Œï¼š3 + 0 = 3 == rowSum<span class="hljs-comment">[0]</span><br>ç¬¬ 1 è¡Œï¼š1 + 7 = 8 == rowSum<span class="hljs-comment">[1]</span><br>ç¬¬ 0 åˆ—ï¼š3 + 1 = 4 == colSum<span class="hljs-comment">[0]</span><br>ç¬¬ 1 åˆ—ï¼š0 + 7 = 7 == colSum<span class="hljs-comment">[1]</span><br>è¡Œå’Œåˆ—çš„å’Œéƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œä¸”æ‰€æœ‰çŸ©é˜µå…ƒç´ éƒ½æ˜¯éè´Ÿçš„ã€‚<br>å¦ä¸€ä¸ªå¯è¡Œçš„çŸ©é˜µä¸ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[1,2]</span>,</span><br><span class="hljs-comment">                  <span class="hljs-comment">[3,5]</span>]</span><br><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>çŸ©é˜µæ¯è¡Œå’Œæ¯åˆ—çš„æœ€å¤§å€¼å·²çŸ¥ï¼Œé‚£ä¹ˆæ¯æ¬¡å¡«çš„æ—¶å€™é€‰æ‹©<code>min(rowsum[i],colsum[j])</code>ï¼Œè¿™æ ·è¢«é€‰æ‹©çš„æŸè¡Œ/åˆ—åç»­çš„å€¼éƒ½ä¸º0,æ¯å¡«ä¸€ä¸ªä½ç½®åï¼Œè¿˜è¦æ›´æ–°rowsumæˆ–è€…colsumï¼Œè¿™æ ·ä¸€å…±éœ€å¡«<code>m+n-1ä¸ªå€¼</code>ï¼Œå…¶ä½™ä½ç½®éƒ½ä¸º0ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">restoreMatrix</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; rowSum, vector&lt;<span class="hljs-type">int</span>&gt;&amp; colSum) &#123;<br>        <span class="hljs-type">int</span> m=rowSum.<span class="hljs-built_in">size</span>(),n=colSum.<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">ans</span>(m,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n));<br>        <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i&lt;m&amp;&amp;j&lt;n)<br>        &#123;<br>            <span class="hljs-type">int</span> r=rowSum[i],c=colSum[j];<br>            <span class="hljs-keyword">if</span>(r&lt;=c)<br>            &#123;<br>                colSum[j]-=r;<br>                ans[i++][j]=r;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                rowSum[i]-=c;<br>                ans[i][j++]=c;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å­—æ¯ä¸æ•°å­—</title>
    <link href="/2023/03/11/%E5%AD%97%E6%AF%8D%E4%B8%8E%E6%95%B0%E5%AD%97/"/>
    <url>/2023/03/11/%E5%AD%97%E6%AF%8D%E4%B8%8E%E6%95%B0%E5%AD%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%AD%97%E6%AF%8D%E4%B8%8E%E6%95%B0%E5%AD%97">å­—æ¯ä¸æ•°å­—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å­—æ¯ä¸æ•°å­—"><a class="markdownIt-Anchor" href="#å­—æ¯ä¸æ•°å­—"></a> å­—æ¯ä¸æ•°å­—</h2><p><a href="https://leetcode.cn/problems/find-longest-subarray-lcci/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ”¾æœ‰å­—æ¯å’Œæ•°å­—çš„æ•°ç»„ï¼Œæ‰¾åˆ°æœ€é•¿çš„å­æ•°ç»„ï¼Œä¸”åŒ…å«çš„å­—æ¯å’Œæ•°å­—çš„ä¸ªæ•°ç›¸åŒã€‚</p><p>è¿”å›è¯¥å­æ•°ç»„ï¼Œè‹¥å­˜åœ¨å¤šä¸ªæœ€é•¿å­æ•°ç»„ï¼Œè¿”å›å·¦ç«¯ç‚¹ä¸‹æ ‡å€¼æœ€å°çš„å­æ•°ç»„ã€‚è‹¥ä¸å­˜åœ¨è¿™æ ·çš„æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p><p>e.g.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less">è¾“å…¥: <span class="hljs-selector-attr">[<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-string">&quot;E&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>,<span class="hljs-string">&quot;F&quot;</span>,<span class="hljs-string">&quot;G&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;7&quot;</span>,<span class="hljs-string">&quot;H&quot;</span>,<span class="hljs-string">&quot;I&quot;</span>,<span class="hljs-string">&quot;J&quot;</span>,<span class="hljs-string">&quot;K&quot;</span>,<span class="hljs-string">&quot;L&quot;</span>,<span class="hljs-string">&quot;M&quot;</span>]</span><br><br>è¾“å‡º: <span class="hljs-selector-attr">[<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-string">&quot;E&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>,<span class="hljs-string">&quot;F&quot;</span>,<span class="hljs-string">&quot;G&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>,<span class="hljs-string">&quot;7&quot;</span>]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨åˆ°å‰ç¼€å’Œçš„æ€æƒ³ï¼Œå½“å…ƒç´ ä¸ºå­—æ¯æ—¶åŠ 1ï¼Œä¸ºæ•°å­—æ—¶å‡1ï¼Œå½“<code>i</code>å’Œ<code>j</code>ä½ç½®å¤„çš„å‰ç¼€å’Œç›¸ç­‰ï¼Œè¯´æ˜ä»–ä»¬ä¹‹é—´çš„å­æ•°ç»„æ»¡è¶³è¦æ±‚ã€‚ç”¨å“ˆç³»è¡¨ä¿å­˜æ¯ä¸€ä¸ªå‰ç¼€å’Œçš„å€¼ç¬¬ä¸€æ¬¡å‡ºç°æ—¶å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ï¼Œå¹¶éå†æ•°ç»„ï¼Œå¦‚æœå‰ç¼€å’Œçš„å€¼å·²ç»å‡ºç°è¿‡ï¼Œé‚£ä¹ˆè®°å½•å­æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œæ›´æ–°æœ€å¤§é•¿åº¦ï¼Œå¦åˆ™åœ¨å“ˆç³»è¡¨ä¸­è®°å½•è¯¥ä¸‹æ ‡ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stan">class Solution &#123;<br>public:<br>    <span class="hljs-type">vector</span>&lt;string&gt; findLongestSubarray(<span class="hljs-type">vector</span>&lt;string&gt;&amp; <span class="hljs-type">array</span>) &#123;<br>        unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; mp;<br>        mp[<span class="hljs-number">0</span>]=-<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>,maxlen=<span class="hljs-number">0</span>,start=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> n=<span class="hljs-type">array</span>.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(isalpha(<span class="hljs-type">array</span>[i][<span class="hljs-number">0</span>]))<br>                ++<span class="hljs-built_in">sum</span>;<br>            <span class="hljs-keyword">else</span><br>                --<span class="hljs-built_in">sum</span>;<br>            <span class="hljs-keyword">if</span>(mp.count(<span class="hljs-built_in">sum</span>))<br>            &#123;<br>                <span class="hljs-type">int</span> preidx=mp[<span class="hljs-built_in">sum</span>];<br>                <span class="hljs-keyword">if</span>(i-preidx&gt;maxlen)<br>                &#123;<br>                    maxlen=i-preidx;<br>                    start=preidx+<span class="hljs-number">1</span>;<br>                &#125;    <br>            &#125;<br>            <span class="hljs-keyword">else</span><br>                mp[<span class="hljs-built_in">sum</span>]=i;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(maxlen==<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> &#123;&#125;;<br>        <br>        <span class="hljs-keyword">return</span> <span class="hljs-type">vector</span>&lt;string&gt;(<span class="hljs-type">array</span>.begin()+start,<span class="hljs-type">array</span>.begin()+start+maxlen);<br>    &#125;   <br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿æ•°ç»„å’Œèƒ½è¢«Pæ•´é™¤</title>
    <link href="/2023/03/10/%E4%BD%BF%E6%95%B0%E7%BB%84%E5%92%8C%E8%83%BD%E8%A2%ABP%E6%95%B4%E9%99%A4/"/>
    <url>/2023/03/10/%E4%BD%BF%E6%95%B0%E7%BB%84%E5%92%8C%E8%83%BD%E8%A2%ABP%E6%95%B4%E9%99%A4/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BD%BF%E6%95%B0%E7%BB%84%E5%92%8C%E8%83%BD%E8%A2%AB-p-%E6%95%B4%E9%99%A4">ä½¿æ•°ç»„å’Œèƒ½è¢« P æ•´é™¤</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä½¿æ•°ç»„å’Œèƒ½è¢«-p-æ•´é™¤"><a class="markdownIt-Anchor" href="#ä½¿æ•°ç»„å’Œèƒ½è¢«-p-æ•´é™¤"></a> ä½¿æ•°ç»„å’Œèƒ½è¢« P æ•´é™¤</h2><p><a href="https://leetcode.cn/problems/make-sum-divisible-by-p/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numsï¼Œè¯·ä½ ç§»é™¤ æœ€çŸ­ å­æ•°ç»„ï¼ˆå¯ä»¥ä¸º ç©ºï¼‰ï¼Œä½¿å¾—å‰©ä½™å…ƒç´ çš„ å’Œ èƒ½è¢« p æ•´é™¤ã€‚ ä¸å…è®¸ å°†æ•´ä¸ªæ•°ç»„éƒ½ç§»é™¤ã€‚</p><p>è¯·ä½ è¿”å›ä½ éœ€è¦ç§»é™¤çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœæ— æ³•æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œè¿”å› -1 ã€‚</p><p>å­æ•°ç»„ å®šä¹‰ä¸ºåŸæ•°ç»„ä¸­è¿ç»­çš„ä¸€ç»„å…ƒç´ ã€‚</p><p>e.g.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[3,1,4,2]</span>, <span class="hljs-selector-tag">p</span> = <span class="hljs-number">6</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šnums ä¸­å…ƒç´ å’Œä¸º <span class="hljs-number">10</span>ï¼Œä¸èƒ½è¢« <span class="hljs-selector-tag">p</span> æ•´é™¤ã€‚æˆ‘ä»¬å¯ä»¥ç§»é™¤å­æ•°ç»„ <span class="hljs-selector-attr">[4]</span> ï¼Œå‰©ä½™å…ƒç´ çš„å’Œä¸º <span class="hljs-number">6</span> <br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è®¾æ•´ä¸ªæ•°ç»„çš„å’Œå¯¹på–æ¨¡çš„å€¼ä¸º<code>x</code>ï¼Œå‰ç¼€å’Œ(ç»è¿‡å–æ¨¡å¤„ç†)æ•°ç»„ä¸º<code>sum</code>ï¼Œè‹¥è¦æ»¡è¶³å»æ‰<code>nums[i]~nums[j]</code>ä¹‹é—´çš„æ•°åï¼Œå‰©ä¸‹çš„æ•°ä¹‹å’Œèƒ½è¢«pæ•´é™¤ï¼Œåˆ™æ»¡è¶³<code>(sum[j]-x+p)%p==sum[i]</code>,ä¸ºäº†è®¡ç®—æœ€çŸ­é•¿åº¦ï¼Œè¿˜éœ€è¦ç”¨å“ˆç³»è¡¨è®°å½•å½“å‰ä½ç½®<code>sum[j]</code>çš„ä¸‹æ ‡jï¼Œåœ¨ä»£ç å®ç°æ—¶ï¼Œ<code>sum</code>æ•°ç»„å¯ä»¥é€šè¿‡ç»´æŠ¤ä¸€ä¸ªæ•´å‹å€¼ä»£æ›¿ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> minSubarray(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> p) &#123;<br>        <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> a:nums)<br>            x=(x+a)%p;<br>        <span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        unordered_map&lt;<span class="hljs-keyword">int</span>,<span class="hljs-keyword">int</span>&gt; idx;<br>        <span class="hljs-keyword">int</span> y=<span class="hljs-number">0</span>,res=nums.<span class="hljs-keyword">size</span>(),n=nums.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            idx[y]=i;<br>            y=(y+nums[i])%p;<br>            <span class="hljs-keyword">if</span>(idx.count((y-x+p)%p)&gt;<span class="hljs-number">0</span>)<br>                res=<span class="hljs-keyword">min</span>(res,i-idx[(y-x+p)%p]+<span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> res==n?<span class="hljs-number">-1</span>:res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>èŠ±æ‹¬å·å±•å¼€</title>
    <link href="/2023/03/07/%E8%8A%B1%E6%8B%AC%E5%8F%B7%E5%B1%95%E5%BC%80/"/>
    <url>/2023/03/07/%E8%8A%B1%E6%8B%AC%E5%8F%B7%E5%B1%95%E5%BC%80/</url>
    
    <content type="html"><![CDATA[<h2 id="èŠ±æ‹¬å·å±•å¼€"><a class="markdownIt-Anchor" href="#èŠ±æ‹¬å·å±•å¼€"></a> èŠ±æ‹¬å·å±•å¼€</h2><p><a href="https://leetcode.cn/problems/brace-expansion-ii/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å¦‚æœä½ ç†Ÿæ‚‰ Shell ç¼–ç¨‹ï¼Œé‚£ä¹ˆä¸€å®šäº†è§£è¿‡èŠ±æ‹¬å·å±•å¼€ï¼Œå®ƒå¯ä»¥ç”¨æ¥ç”Ÿæˆä»»æ„å­—ç¬¦ä¸²ã€‚<br />èŠ±æ‹¬å·å±•å¼€çš„è¡¨è¾¾å¼å¯ä»¥çœ‹ä½œä¸€ä¸ªç”± èŠ±æ‹¬å·ã€é€—å· å’Œ å°å†™è‹±æ–‡å­—æ¯ ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå®šä¹‰ä¸‹é¢å‡ æ¡è¯­æ³•è§„åˆ™ï¼š<br />å¦‚æœåªç»™å‡ºå•ä¸€çš„å…ƒç´  xï¼Œé‚£ä¹ˆè¡¨è¾¾å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²å°±åªæœ‰ <code>&quot;x&quot;</code>ã€‚<code>R(x) = &#123;x&#125;</code><br />ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>&quot;a&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;a&quot;</code>ã€‚<br />è€Œè¡¨è¾¾å¼ <code>&quot;w&quot;</code> å°±è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;w&quot;</code>ã€‚<br />å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼å¹¶åˆ—ï¼Œä»¥é€—å·åˆ†éš”ï¼Œæˆ‘ä»¬å–è¿™äº›è¡¨è¾¾å¼ä¸­å…ƒç´ çš„å¹¶é›†ã€‚<code>R(&#123;e_1,e_2,...&#125;) = R(e_1) âˆª R(e_2) âˆª ...</code><br />ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>&quot;&#123;a,b,c&#125;&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;a&quot;,``&quot;b&quot;</code>,<code>&quot;c&quot;</code>ã€‚<br />è€Œè¡¨è¾¾å¼ <code>&quot;&#123;&#123;a,b&#125;,&#123;b,c&#125;&#125;&quot;</code> ä¹Ÿå¯ä»¥è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;a&quot;</code>,<code>&quot;b&quot;</code>,<code>&quot;c&quot;</code>ã€‚<br />è¦æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ç›¸æ¥ï¼Œä¸­é—´æ²¡æœ‰éš”å¼€æ—¶ï¼Œæˆ‘ä»¬ä»è¿™äº›è¡¨è¾¾å¼ä¸­å„å–ä¸€ä¸ªå…ƒç´ ä¾æ¬¡è¿æ¥å½¢æˆå­—ç¬¦ä¸²ã€‚<code>R(e_1 + e_2) = &#123;a + b for (a, b) in R(e_1) Ã— R(e_2)&#125;</code><br />ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>&quot;&#123;a,b&#125;&#123;c,d&#125;&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;ac&quot;,&quot;ad&quot;,&quot;bc&quot;,&quot;bd&quot;</code>ã€‚<br />è¡¨è¾¾å¼ä¹‹é—´å…è®¸åµŒå¥—ï¼Œå•ä¸€å…ƒç´ ä¸è¡¨è¾¾å¼çš„è¿æ¥ä¹Ÿæ˜¯å…è®¸çš„ã€‚<br />ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>&quot;a&#123;b,c,d&#125;&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;ab&quot;,&quot;ac&quot;,&quot;ad&quot;â€‹â€‹â€‹â€‹â€‹â€‹</code>ã€‚<br />ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>&quot;a&#123;b,c&#125;&#123;d,e&#125;f&#123;g,h&#125;&quot;</code> å¯ä»¥è¡¨ç¤ºå­—ç¬¦ä¸² <code>&quot;abdfg&quot;, &quot;abdfh&quot;, &quot;abefg&quot;, &quot;abefh&quot;, &quot;acdfg&quot;, &quot;acdfh&quot;, &quot;acefg&quot;, &quot;acefh&quot;</code>ã€‚<br />ç»™å‡ºè¡¨ç¤ºåŸºäºç»™å®šè¯­æ³•è§„åˆ™çš„è¡¨è¾¾å¼ expressionï¼Œè¿”å›å®ƒæ‰€è¡¨ç¤ºçš„æ‰€æœ‰å­—ç¬¦ä¸²ç»„æˆçš„æœ‰åºåˆ—è¡¨ã€‚</p><p>e.g.</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mel">è¾“å…¥ï¼š<span class="hljs-keyword">expression</span> = <span class="hljs-string">&quot;&#123;a,b&#125;&#123;c,&#123;d,e&#125;&#125;&quot;</span><br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;ac&quot;</span>,<span class="hljs-string">&quot;ad&quot;</span>,<span class="hljs-string">&quot;ae&quot;</span>,<span class="hljs-string">&quot;bc&quot;</span>,<span class="hljs-string">&quot;bd&quot;</span>,<span class="hljs-string">&quot;be&quot;</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å¯ä»¥ç”¨ç±»ä¼¼ä¸­ç¼€è¡¨è¾¾å¼æ±‚å€¼çš„åšæ³•ï¼ŒæŠŠå¹¶åˆ—æ“ä½œçœ‹ä½œ<code>+</code>ï¼ŒæŠŠç»„åˆæ“ä½œçœ‹ä½œ<code>*</code>ï¼Œéœ€è¦å»ºç«‹ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªç”¨æ¥ä¿å­˜è¿ç®—ç¬¦ï¼Œä¸€ä¸ªç”¨æ¥ä¿å­˜å·²æœ‰é›†åˆï¼Œç„¶ååˆ†æƒ…å†µè®¨è®ºï¼š</p><ul><li>å¦‚æœå½“å‰å­—ç¬¦ä¸º<code>&#123;</code>ï¼Œå¦‚æœä¸Šä¸€ä¸ªå­—ç¬¦ä¸º<code>&#125;</code>æˆ–è€…å­—æ¯ï¼Œåˆ™è¿ç®—ç¬¦æ ˆå…ˆåŠ å…¥<code>*</code>å†åŠ å…¥<code>&#123;</code></li><li>å¦‚æœå½“å‰å­—ç¬¦ä¸º<code>,</code>ï¼Œå¦‚æœè¿ç®—ç¬¦æ ˆé¡¶ä¸º<code>*</code>ï¼Œé‚£ä¹ˆä¸æ–­å¼¹å‡ºå…ƒç´ å¹¶è®¡ç®—ï¼Œç›´åˆ°æ ˆé¡¶ä¸æ˜¯<code>*</code>ï¼Œç„¶ååŠ å…¥<code>+</code></li><li>å¦‚æœä¸º<code>&#125;</code>ï¼Œåˆ™ä¸æ–­å¼¹å‡ºå…ƒç´ å¹¶è®¡ç®—ï¼Œç›´åˆ°é‡åˆ°<code>&#123;</code>ä¸ºæ­¢ï¼Œå¹¶å°†å·¦æ‹¬å·ä¹Ÿå¼¹å‡º</li><li>å¦‚æœä¸ºå­—æ¯ï¼Œå¦‚æœä¸Šä¸€ä¸ªå­—ç¬¦ä¸º<code>&#125;</code>æˆ–è€…å­—æ¯ï¼Œåˆ™è¿ç®—ç¬¦æ ˆå…ˆåŠ å…¥<code>*</code>ï¼Œå†å°†å­—æ¯å•ç‹¬æ„é€ æˆä¸€ä¸ªé›†åˆï¼ŒåŠ å…¥é›†åˆæ ˆ</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">vector</span>&lt;char&gt; op;<br>    <span class="hljs-keyword">vector</span>&lt;set&lt;<span class="hljs-keyword">string</span>&gt;&gt; e;<br>    <span class="hljs-comment">//å¼¹å‡ºæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ å¹¶è®¡ç®—</span><br>    void compute()<br>    &#123;<br>        <span class="hljs-keyword">int</span> r=e.<span class="hljs-keyword">size</span>()<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">int</span> l=r<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">if</span>(op.back()==<span class="hljs-string">&#x27;+&#x27;</span>)<br>            e[l].merge(e[r]);<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            set&lt;<span class="hljs-keyword">string</span>&gt; tmp;<br>            <span class="hljs-keyword">for</span>(auto&amp; a:e[l])<br>            &#123;<br>                <span class="hljs-keyword">for</span>(auto&amp; b:e[r])<br>                    tmp.insert(a+b);<br>            &#125;<br>            e[l]=<span class="hljs-keyword">move</span>(tmp);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">string</span>&gt; braceExpansionII(<span class="hljs-keyword">string</span> <span class="hljs-keyword">expression</span>) &#123;<br>        <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; ans;<br>        <br>        <span class="hljs-keyword">int</span> n=<span class="hljs-keyword">expression</span>.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">expression</span>[i]==<span class="hljs-string">&#x27;&#123;&#x27;</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-keyword">expression</span>[i<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;&#125;&#x27;</span>||isalpha(<span class="hljs-keyword">expression</span>[i<span class="hljs-number">-1</span>])))<br>                    op.push_back(<span class="hljs-string">&#x27;*&#x27;</span>);<br>                op.push_back(<span class="hljs-string">&#x27;&#123;&#x27;</span>);   <br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">expression</span>[i]==<span class="hljs-string">&#x27;,&#x27;</span>)<br>            &#123;<br>                <span class="hljs-keyword">while</span>(op.<span class="hljs-keyword">size</span>()&amp;&amp;op.back()==<span class="hljs-string">&#x27;*&#x27;</span>)<br>                &#123;<br>                    compute();<br>                    op.pop_back();<br>                    e.pop_back();<br>                &#125;<br>                op.push_back(<span class="hljs-string">&#x27;+&#x27;</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">expression</span>[i]==<span class="hljs-string">&#x27;&#125;&#x27;</span>)<br>            &#123;<br>                <span class="hljs-keyword">while</span>(op.<span class="hljs-keyword">size</span>()&amp;&amp;op.back()!=<span class="hljs-string">&#x27;&#123;&#x27;</span>)<br>                &#123;<br>                    compute();<br>                    op.pop_back();<br>                    e.pop_back();<br>                &#125;<br>                op.pop_back();<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                set&lt;<span class="hljs-keyword">string</span>&gt; tmp;<br>                <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-keyword">expression</span>[i<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;&#125;&#x27;</span>||isalpha(<span class="hljs-keyword">expression</span>[i<span class="hljs-number">-1</span>])))<br>                    op.push_back(<span class="hljs-string">&#x27;*&#x27;</span>);<br>                <span class="hljs-keyword">string</span> s;<br>                s+=<span class="hljs-keyword">expression</span>[i];<br>                tmp.insert(s);<br>                e.push_back(tmp);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(op.<span class="hljs-keyword">size</span>())<br>        &#123;<br>            compute();<br>            op.pop_back();<br>            e.pop_back();<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;e.back().begin(),e.back().end()&#125;;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°‘åˆ é™¤æ¬¡æ•°</title>
    <link href="/2023/03/06/%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B3%E8%A1%A1%E7%9A%84%E6%9C%80%E5%B0%91%E5%88%A0%E9%99%A4%E6%AC%A1%E6%95%B0/"/>
    <url>/2023/03/06/%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B3%E8%A1%A1%E7%9A%84%E6%9C%80%E5%B0%91%E5%88%A0%E9%99%A4%E6%AC%A1%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B3%E8%A1%A1%E7%9A%84%E6%9C%80%E5%B0%91%E5%88%A0%E9%99%A4%E6%AC%A1%E6%95%B0">ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°‘åˆ é™¤æ¬¡æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°‘åˆ é™¤æ¬¡æ•°"><a class="markdownIt-Anchor" href="#ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°‘åˆ é™¤æ¬¡æ•°"></a> ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°‘åˆ é™¤æ¬¡æ•°</h2><p><a href="https://leetcode.cn/problems/minimum-deletions-to-make-string-balanced/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œå®ƒä»…åŒ…å«å­—ç¬¦ â€˜aâ€™ å’Œ 'bâ€™â€‹â€‹â€‹â€‹ ã€‚</p><p>ä½ å¯ä»¥åˆ é™¤ s ä¸­ä»»æ„æ•°ç›®çš„å­—ç¬¦ï¼Œä½¿å¾— s å¹³è¡¡ ã€‚å½“ä¸å­˜åœ¨ä¸‹æ ‡å¯¹ (i,j) æ»¡è¶³ i &lt; j ï¼Œä¸” s[i] = â€˜bâ€™ çš„åŒæ—¶ s[j]= â€˜aâ€™ ï¼Œæ­¤æ—¶è®¤ä¸º s æ˜¯ å¹³è¡¡ çš„ã€‚</p><p>è¯·ä½ è¿”å›ä½¿ s å¹³è¡¡ çš„ æœ€å°‘ åˆ é™¤æ¬¡æ•°ã€‚</p><p>e.g.</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;aababbab&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹æ¡ˆï¼š<br>ä¸‹æ ‡ä» <span class="hljs-number">0</span> å¼€å§‹ï¼Œåˆ é™¤ç¬¬ <span class="hljs-number">2</span> å’Œç¬¬ <span class="hljs-number">6</span> ä¸ªå­—ç¬¦ï¼ˆ<span class="hljs-string">&quot;aababbab&quot;</span> -&gt; <span class="hljs-string">&quot;aaabbb&quot;</span>ï¼‰ï¼Œ<br>ä¸‹æ ‡ä» <span class="hljs-number">0</span> å¼€å§‹ï¼Œåˆ é™¤ç¬¬ <span class="hljs-number">3</span> å’Œç¬¬ <span class="hljs-number">6</span> ä¸ªå­—ç¬¦ï¼ˆ<span class="hljs-string">&quot;aababbab&quot;</span> -&gt; <span class="hljs-string">&quot;aabbbb&quot;</span>ï¼‰ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‚è€ƒäº†çµç¥çš„æ€è·¯ï¼ŒtqlğŸ˜†<br />é¦–å…ˆè¦éå†ä¸€éè®°å½•å­—ç¬¦<code>a</code>çš„ä¸ªæ•°cntï¼Œç„¶åéå†åˆ†å‰²ç‚¹ï¼Œå¦‚æœæ˜¯<code>a</code>åˆ™cnt-1ï¼Œå¦åˆ™cnt+1ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­cntæœ€å°å€¼å³ä¸ºæœ€å°çš„åˆ é™¤æ¬¡æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹ï¼Œå…¶å®ç›¸å½“äºç»Ÿè®¡åˆ†å‰²ç‚¹å·¦è¾¹<code>b</code>çš„ä¸ªæ•°å’Œå³è¾¹<code>a</code>çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯æ»¡è¶³é¢˜æ„çš„æœ€å°‘åˆ é™¤æ¬¡æ•°ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">minimumDeletions</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> cnt=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">char</span> c:s)<br>            cnt+=<span class="hljs-string">&#x27;b&#x27;</span>-c;<br>        ans=cnt;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">char</span> c:s)<br>        &#123;<br>            cnt+=(c-<span class="hljs-string">&#x27;a&#x27;</span>)*<span class="hljs-number">2</span><span class="hljs-number">-1</span>;<br>            ans=min(ans,cnt);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿è¥æ‘©å¤©è½®</title>
    <link href="/2023/03/05/%E8%BF%90%E8%90%A5%E6%91%A9%E5%A4%A9%E8%BD%AE/"/>
    <url>/2023/03/05/%E8%BF%90%E8%90%A5%E6%91%A9%E5%A4%A9%E8%BD%AE/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%BF%90%E8%90%A5%E6%91%A9%E5%A4%A9%E8%BD%AE">è¿è¥æ‘©å¤©è½®</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è¿è¥æ‘©å¤©è½®"><a class="markdownIt-Anchor" href="#è¿è¥æ‘©å¤©è½®"></a> è¿è¥æ‘©å¤©è½®</h2><p><a href="https://leetcode.cn/problems/maximum-profit-of-operating-a-centennial-wheel/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æ­£åœ¨ç»è¥ä¸€åº§æ‘©å¤©è½®ï¼Œè¯¥æ‘©å¤©è½®å…±æœ‰ 4 ä¸ªåº§èˆ± ï¼Œæ¯ä¸ªåº§èˆ± æœ€å¤šå¯ä»¥å®¹çº³ 4 ä½æ¸¸å®¢ ã€‚ä½ å¯ä»¥ é€†æ—¶é’ˆ è½®è½¬åº§èˆ±ï¼Œä½†æ¯æ¬¡è½®è½¬éƒ½éœ€è¦æ”¯ä»˜ä¸€å®šçš„è¿è¡Œæˆæœ¬ runningCost ã€‚æ‘©å¤©è½®æ¯æ¬¡è½®è½¬éƒ½æ°å¥½è½¬åŠ¨ 1 / 4 å‘¨ã€‚</p><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ customers ï¼Œ customers[i] æ˜¯åœ¨ç¬¬ i æ¬¡è½®è½¬ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¹‹å‰åˆ°è¾¾çš„æ–°æ¸¸å®¢çš„æ•°é‡ã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ å¿…é¡»åœ¨æ–°æ¸¸å®¢åˆ°æ¥å‰è½®è½¬ i æ¬¡ã€‚æ¯ä½æ¸¸å®¢åœ¨ç™»ä¸Šç¦»åœ°é¢æœ€è¿‘çš„åº§èˆ±å‰éƒ½ä¼šæ”¯ä»˜ç™»èˆ±æˆæœ¬ boardingCost ï¼Œä¸€æ—¦è¯¥åº§èˆ±å†æ¬¡æŠµè¾¾åœ°é¢ï¼Œä»–ä»¬å°±ä¼šç¦»å¼€åº§èˆ±ç»“æŸæ¸¸ç©ã€‚</p><p>ä½ å¯ä»¥éšæ—¶åœä¸‹æ‘©å¤©è½®ï¼Œå³ä¾¿æ˜¯ åœ¨æœåŠ¡æ‰€æœ‰æ¸¸å®¢ä¹‹å‰ ã€‚å¦‚æœä½ å†³å®šåœæ­¢è¿è¥æ‘©å¤©è½®ï¼Œä¸ºäº†ä¿è¯æ‰€æœ‰æ¸¸å®¢å®‰å…¨ç€é™†ï¼Œå°†å…è´¹è¿›è¡Œæ‰€æœ‰åç»­è½®è½¬ ã€‚æ³¨æ„ï¼Œå¦‚æœæœ‰è¶…è¿‡ 4 ä½æ¸¸å®¢åœ¨ç­‰æ‘©å¤©è½®ï¼Œé‚£ä¹ˆåªæœ‰ 4 ä½æ¸¸å®¢å¯ä»¥ç™»ä¸Šæ‘©å¤©è½®ï¼Œå…¶ä½™çš„éœ€è¦ç­‰å¾… ä¸‹ä¸€æ¬¡è½®è½¬ ã€‚</p><p>è¿”å›æœ€å¤§åŒ–åˆ©æ¶¦æ‰€éœ€æ‰§è¡Œçš„ æœ€å°è½®è½¬æ¬¡æ•° ã€‚ å¦‚æœä¸å­˜åœ¨åˆ©æ¶¦ä¸ºæ­£çš„æ–¹æ¡ˆï¼Œåˆ™è¿”å› -1 ã€‚</p><p>e.g.</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šcustomers = [8,3], boardingCost = 5, runningCost = 6<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼šåº§èˆ±ä¸Šæ ‡æ³¨çš„æ•°å­—æ˜¯è¯¥åº§èˆ±çš„å½“å‰æ¸¸å®¢æ•°ã€‚<br>1.<span class="hljs-number"> 8 </span>ä½æ¸¸å®¢æŠµè¾¾ï¼Œ4 ä½ç™»èˆ±ï¼Œ4 ä½ç­‰å¾…ä¸‹ä¸€èˆ±ï¼Œæ‘©å¤©è½®è½®è½¬ã€‚å½“å‰åˆ©æ¶¦ä¸º<span class="hljs-number"> 4 </span>* $5 -<span class="hljs-number"> 1 </span>* $6 = $14 ã€‚<br>2.<span class="hljs-number"> 3 </span>ä½æ¸¸å®¢æŠµè¾¾ï¼Œ4 ä½åœ¨ç­‰å¾…çš„æ¸¸å®¢ç™»èˆ±ï¼Œå…¶ä»–<span class="hljs-number"> 3 </span>ä½ç­‰å¾…ï¼Œæ‘©å¤©è½®è½®è½¬ã€‚å½“å‰åˆ©æ¶¦ä¸º<span class="hljs-number"> 8 </span>* $5 -<span class="hljs-number"> 2 </span>* $6 = $28 ã€‚<br>3. æœ€å<span class="hljs-number"> 3 </span>ä½æ¸¸å®¢ç™»èˆ±ï¼Œæ‘©å¤©è½®è½®è½¬ã€‚å½“å‰åˆ©æ¶¦ä¸º<span class="hljs-number"> 11 </span>* $5 -<span class="hljs-number"> 3 </span>* $6 = $37 ã€‚<br>è½®è½¬<span class="hljs-number"> 3 </span>æ¬¡å¾—åˆ°æœ€å¤§åˆ©æ¶¦ï¼Œæœ€å¤§åˆ©æ¶¦ä¸º $37 ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ¨¡æ‹Ÿæ‘©å¤©è½®çš„è¿è¥è¿‡ç¨‹ï¼Œé¦–å…ˆè®°å½•æ¯æ¬¡åˆ°æ¥çš„äººæ•°<code>come</code>å’Œæ’é˜Ÿäººæ•°<code>wait</code>ï¼Œå½“äºŒè€…ä¹‹å’Œå¤§äº4,ç»Ÿè®¡æ”¶å…¥ï¼Œç„¶åæ›´æ–°æ’é˜Ÿäººæ•°ï¼Œå½“äºŒè€…ä¹‹å’Œå°äºï¼Œç»Ÿè®¡æ”¶å…¥ï¼Œæ’é˜Ÿäººæ•°æ¸…é›¶ï¼Œæ¯ä¸€è½®è¿‡åå‡å»è¿è¥æˆæœ¬ï¼Œå¹¶æ›´æ–°æœ€å¤§åˆ©æ¶¦å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> Solution &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> minOperationsMaxProfit(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; customers, <span class="hljs-built_in">int</span> boardingCost, <span class="hljs-built_in">int</span> runningCost) &#123;<br>        <span class="hljs-built_in">int</span> n=customers.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-built_in">int</span> ans=-<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> come=<span class="hljs-number">0</span>,<span class="hljs-keyword">wait</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>,<span class="hljs-built_in">max</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i&lt;n||<span class="hljs-keyword">wait</span>&gt;<span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&gt;=n)<br>                come=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span><br>                come=customers[i];<br>            <br>            <span class="hljs-keyword">if</span>(come+<span class="hljs-keyword">wait</span>&gt;<span class="hljs-number">4</span>)<br>            &#123;<br>                <span class="hljs-built_in">sum</span>+=boardingCost*<span class="hljs-number">4</span>;<br>                <span class="hljs-keyword">wait</span>=come+<span class="hljs-keyword">wait</span>-<span class="hljs-number">4</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">sum</span>+=(come+<span class="hljs-keyword">wait</span>)*boardingCost;<br>                <span class="hljs-keyword">wait</span>=<span class="hljs-number">0</span>;<br>            &#125;<br>            <span class="hljs-built_in">sum</span>-=runningCost;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sum</span>&gt;<span class="hljs-built_in">max</span>)<br>            &#123;<br>                ans=i+<span class="hljs-number">1</span>;<br>                <span class="hljs-built_in">max</span>=<span class="hljs-built_in">sum</span>;<br>            &#125;<br>            ++i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æŒ‰ä½ä¸ä¸º0çš„ä¸‰å…ƒç»„</title>
    <link href="/2023/03/04/%E6%8C%89%E4%BD%8D%E4%B8%8E%E4%B8%BA0%E7%9A%84%E4%B8%89%E5%85%83%E7%BB%84/"/>
    <url>/2023/03/04/%E6%8C%89%E4%BD%8D%E4%B8%8E%E4%B8%BA0%E7%9A%84%E4%B8%89%E5%85%83%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%8C%89%E4%BD%8D%E4%B8%8E%E4%B8%BA0%E7%9A%84%E4%B8%89%E5%85%83%E7%BB%84">æŒ‰ä½ä¸ä¸º0çš„ä¸‰å…ƒç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æŒ‰ä½ä¸ä¸º0çš„ä¸‰å…ƒç»„"><a class="markdownIt-Anchor" href="#æŒ‰ä½ä¸ä¸º0çš„ä¸‰å…ƒç»„"></a> æŒ‰ä½ä¸ä¸º0çš„ä¸‰å…ƒç»„</h2><p><a href="https://leetcode.cn/problems/triples-with-bitwise-and-equal-to-zero/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¿”å›å…¶ä¸­ æŒ‰ä½ä¸ä¸‰å…ƒç»„ çš„æ•°ç›®ã€‚</p><p>æŒ‰ä½ä¸ä¸‰å…ƒç»„ æ˜¯ç”±ä¸‹æ ‡ (i, j, k) ç»„æˆçš„ä¸‰å…ƒç»„ï¼Œå¹¶æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ï¼š</p><p>0 &lt;= i &lt; nums.length<br />0 &lt;= j &lt; nums.length<br />0 &lt;= k &lt; nums.length<br />nums[i] &amp; nums[j] &amp; nums[k] == 0 ï¼Œå…¶ä¸­ &amp; è¡¨ç¤ºæŒ‰ä½ä¸è¿ç®—ç¬¦ã€‚</p><p>e.g.</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs routeros">è¾“å…¥ï¼šnums = [2,1,3]<br>è¾“å‡ºï¼š12<br>è§£é‡Šï¼šå¯ä»¥é€‰å‡ºå¦‚ä¸‹ i, j, k ä¸‰å…ƒç»„ï¼š<br>(<span class="hljs-attribute">i</span>=0, <span class="hljs-attribute">j</span>=0, <span class="hljs-attribute">k</span>=1) : 2 &amp; 2 &amp; 1<br>(<span class="hljs-attribute">i</span>=0, <span class="hljs-attribute">j</span>=1, <span class="hljs-attribute">k</span>=0) : 2 &amp; 1 &amp; 2<br>(<span class="hljs-attribute">i</span>=0, <span class="hljs-attribute">j</span>=1, <span class="hljs-attribute">k</span>=1) : 2 &amp; 1 &amp; 1<br>(<span class="hljs-attribute">i</span>=0, <span class="hljs-attribute">j</span>=1, <span class="hljs-attribute">k</span>=2) : 2 &amp; 1 &amp; 3<br>(<span class="hljs-attribute">i</span>=0, <span class="hljs-attribute">j</span>=2, <span class="hljs-attribute">k</span>=1) : 2 &amp; 3 &amp; 1<br>(<span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=0, <span class="hljs-attribute">k</span>=0) : 1 &amp; 2 &amp; 2<br>(<span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=0, <span class="hljs-attribute">k</span>=1) : 1 &amp; 2 &amp; 1<br>(<span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=0, <span class="hljs-attribute">k</span>=2) : 1 &amp; 2 &amp; 3<br>(<span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=1, <span class="hljs-attribute">k</span>=0) : 1 &amp; 1 &amp; 2<br>(<span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=2, <span class="hljs-attribute">k</span>=0) : 1 &amp; 3 &amp; 2<br>(<span class="hljs-attribute">i</span>=2, <span class="hljs-attribute">j</span>=0, <span class="hljs-attribute">k</span>=1) : 3 &amp; 2 &amp; 1<br>(<span class="hljs-attribute">i</span>=2, <span class="hljs-attribute">j</span>=1, <span class="hljs-attribute">k</span>=0) : 3 &amp; 1 &amp; 2<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ç›´æ¥æšä¸¾çš„è¯æ—¶é—´å¤æ‚åº¦å¤ªé«˜ï¼Œä¼šè¶…æ—¶ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•ä¸¤ä¸ªæ•°å­—ç›¸ä¸ç»“æœå‡ºç°çš„é¢‘ç‡ï¼Œç„¶åéå†ç¬¬ä¸‰ä¸ªæ•°ä¸å…¶ç›¸ä¸ï¼Œå¦‚æœç»“æœä¸º<code>0</code>ï¼Œåˆ™ç»Ÿè®¡åˆ°ç»“æœä¸­ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">countTriplets</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">16</span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> a:nums)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> b:nums)<br>                ++v[a&amp;b];<br>        &#125;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x:nums)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;k&lt;n;++k)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(v[k]&amp;&amp;(x&amp;k)==<span class="hljs-number">0</span>)<br>                    ans+=v[k];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¾—åˆ†æœ€é«˜å•è¯é›†åˆ</title>
    <link href="/2023/02/26/%E5%BE%97%E5%88%86%E6%9C%80%E9%AB%98%E5%8D%95%E8%AF%8D%E9%9B%86%E5%90%88/"/>
    <url>/2023/02/26/%E5%BE%97%E5%88%86%E6%9C%80%E9%AB%98%E5%8D%95%E8%AF%8D%E9%9B%86%E5%90%88/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%BE%97%E5%88%86%E6%9C%80%E9%AB%98%E5%8D%95%E8%AF%8D%E9%9B%86%E5%90%88">å¾—åˆ†æœ€é«˜å•è¯é›†åˆ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å¾—åˆ†æœ€é«˜å•è¯é›†åˆ"><a class="markdownIt-Anchor" href="#å¾—åˆ†æœ€é«˜å•è¯é›†åˆ"></a> å¾—åˆ†æœ€é«˜å•è¯é›†åˆ</h2><p><a href="https://leetcode.cn/problems/maximum-score-words-formed-by-letters/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ å°†ä¼šå¾—åˆ°ä¸€ä»½å•è¯è¡¨ wordsï¼Œä¸€ä¸ªå­—æ¯è¡¨ letters ï¼ˆå¯èƒ½ä¼šæœ‰é‡å¤å­—æ¯ï¼‰ï¼Œä»¥åŠæ¯ä¸ªå­—æ¯å¯¹åº”çš„å¾—åˆ†æƒ…å†µè¡¨ scoreã€‚</p><p>è¯·ä½ å¸®å¿™è®¡ç®—ç©å®¶åœ¨å•è¯æ‹¼å†™æ¸¸æˆä¸­æ‰€èƒ½è·å¾—çš„ã€Œæœ€é«˜å¾—åˆ†ã€ï¼šèƒ½å¤Ÿç”± letters é‡Œçš„å­—æ¯æ‹¼å†™å‡ºçš„ ä»»æ„ å±äº words å•è¯å­é›†ä¸­ï¼Œåˆ†æ•°æœ€é«˜çš„å•è¯é›†åˆçš„å¾—åˆ†ã€‚</p><p>å•è¯æ‹¼å†™æ¸¸æˆçš„è§„åˆ™æ¦‚è¿°å¦‚ä¸‹ï¼š</p><p>ç©å®¶éœ€è¦ç”¨å­—æ¯è¡¨ letters é‡Œçš„å­—æ¯æ¥æ‹¼å†™å•è¯è¡¨ words ä¸­çš„å•è¯ã€‚<br />å¯ä»¥åªä½¿ç”¨å­—æ¯è¡¨ letters ä¸­çš„éƒ¨åˆ†å­—æ¯ï¼Œä½†æ˜¯æ¯ä¸ªå­—æ¯æœ€å¤šè¢«ä½¿ç”¨ä¸€æ¬¡ã€‚<br />å•è¯è¡¨ words ä¸­æ¯ä¸ªå•è¯åªèƒ½è®¡åˆ†ï¼ˆä½¿ç”¨ï¼‰ä¸€æ¬¡ã€‚<br />æ ¹æ®å­—æ¯å¾—åˆ†æƒ…å†µè¡¨scoreï¼Œå­—æ¯ â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€¦ , â€˜zâ€™ å¯¹åº”çš„å¾—åˆ†åˆ†åˆ«ä¸º score[0], score[1], â€¦, score[25]ã€‚<br />æœ¬åœºæ¸¸æˆçš„ã€Œå¾—åˆ†ã€æ˜¯æŒ‡ï¼šç©å®¶æ‰€æ‹¼å†™å‡ºçš„å•è¯é›†åˆé‡ŒåŒ…å«çš„æ‰€æœ‰å­—æ¯çš„å¾—åˆ†ä¹‹å’Œã€‚</p><p>e.g.</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">è¾“å…¥ï¼šwords = [<span class="hljs-string">&quot;dog&quot;</span>,<span class="hljs-string">&quot;cat&quot;</span>,<span class="hljs-string">&quot;dad&quot;</span>,<span class="hljs-string">&quot;good&quot;</span>], letters = [<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>,<span class="hljs-string">&quot;g&quot;</span>,<span class="hljs-string">&quot;o&quot;</span>,<span class="hljs-string">&quot;o&quot;</span>], score = [1,0,9,5,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0]<br>è¾“å‡ºï¼š23<br>è§£é‡Šï¼š<br>å­—æ¯å¾—åˆ†ä¸º  <span class="hljs-attribute">a</span>=1, <span class="hljs-attribute">c</span>=9, <span class="hljs-attribute">d</span>=5, <span class="hljs-attribute">g</span>=3, <span class="hljs-attribute">o</span>=2<br>ä½¿ç”¨ç»™å®šçš„å­—æ¯è¡¨ lettersï¼Œæˆ‘ä»¬å¯ä»¥æ‹¼å†™å•è¯ <span class="hljs-string">&quot;dad&quot;</span> (5+1+5)å’Œ <span class="hljs-string">&quot;good&quot;</span> (3+2+2+5)ï¼Œå¾—åˆ†ä¸º 23 ã€‚<br>è€Œå•è¯ <span class="hljs-string">&quot;dad&quot;</span> å’Œ <span class="hljs-string">&quot;dog&quot;</span> åªèƒ½å¾—åˆ° 21 åˆ†ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦ç”¨åˆ°çŠ¶æ€å‹ç¼©çš„æ€æƒ³ï¼Œå¯¹äºwordsä¸­çš„æ¯ä¸ªå•è¯ï¼Œéƒ½å¯ä»¥ç”¨<code>0/1</code>æ¥è¡¨ç¤ºä»–æ˜¯å¦è¢«ä½¿ç”¨ï¼Œæ¯”å¦‚â€™<code>110</code>å¯ä»¥è¡¨ç¤ºä½¿ç”¨äº†ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå•è¯ï¼Œå‡è®¾wordsä¸­å…±æœ‰<code>n</code>ä¸ªå•è¯ï¼Œé‚£ä¹ˆä¸€å…±æœ‰<code>1&lt;&lt;n</code>ç§çŠ¶æ€ï¼Œéœ€è¦éå†æ‰€æœ‰çŠ¶æ€ã€‚æ¯æ¬¡éå†æ—¶ï¼Œä»¥æ­¤éå†wordsä¸­çš„å•è¯ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨å½“å‰çŠ¶æ€é‡Œï¼Œå¦‚æœåœ¨çš„è¯ï¼Œç»Ÿè®¡å„ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œæ¯éå†å®Œä¸€ä¸ªçŠ¶æ€ï¼Œè®¡ç®—ä¸€æ¬¡å¾—åˆ†ï¼Œå¹¶æ›´æ–°æœ€é«˜åˆ†æ•°å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxScoreWords</span><span class="hljs-params">(vector&lt;string&gt;&amp; words, vector&lt;<span class="hljs-type">char</span>&gt;&amp; letters, vector&lt;<span class="hljs-type">int</span>&gt;&amp; score)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=words.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">cnt</span><span class="hljs-params">(<span class="hljs-number">26</span>)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> &amp; c:letters)<br>            ++cnt[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>        <span class="hljs-type">int</span> num=<span class="hljs-number">1</span>&lt;&lt;n;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;num;++i)<br>        &#123;<br>            <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">t</span><span class="hljs-params">(<span class="hljs-number">26</span>)</span></span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>((<span class="hljs-number">1</span>&lt;&lt;j)&amp;i)<br>                &#123;<br>                    <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span>&amp;c:words[j])<br>                        ++t[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">bool</span> flag=<span class="hljs-literal">true</span>;<br>            <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;k&lt;<span class="hljs-number">26</span>;++k)<br>            &#123;<br>                sum+=score[k]*t[k];<br>                <span class="hljs-keyword">if</span>(t[k]&gt;cnt[k])<br>                &#123;<br>                    flag=<span class="hljs-literal">false</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(flag)<br>                ans=<span class="hljs-built_in">max</span>(ans,sum);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äº¤æ¢å­—ç¬¦ä½¿å­—ç¬¦ä¸²ç›¸åŒ</title>
    <link href="/2023/02/25/%E4%BA%A4%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%90%8C/"/>
    <url>/2023/02/25/%E4%BA%A4%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%90%8C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BA%A4%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%BD%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%90%8C">äº¤æ¢å­—ç¬¦ä½¿å­—ç¬¦ä¸²ç›¸åŒ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="äº¤æ¢å­—ç¬¦ä½¿å­—ç¬¦ä¸²ç›¸åŒ"><a class="markdownIt-Anchor" href="#äº¤æ¢å­—ç¬¦ä½¿å­—ç¬¦ä¸²ç›¸åŒ"></a> äº¤æ¢å­—ç¬¦ä½¿å­—ç¬¦ä¸²ç›¸åŒ</h2><p><a href="https://leetcode.cn/problems/minimum-swaps-to-make-strings-equal/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸¤ä¸ªé•¿åº¦ç›¸åŒçš„å­—ç¬¦ä¸² s1 å’Œ s2ï¼Œä¸”å®ƒä»¬å…¶ä¸­ åªå«æœ‰ å­—ç¬¦ â€œxâ€ å’Œ â€œyâ€ï¼Œä½ éœ€è¦é€šè¿‡ã€Œäº¤æ¢å­—ç¬¦ã€çš„æ–¹å¼ä½¿è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒã€‚</p><p>æ¯æ¬¡ã€Œäº¤æ¢å­—ç¬¦ã€çš„æ—¶å€™ï¼Œä½ éƒ½å¯ä»¥åœ¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­å„é€‰ä¸€ä¸ªå­—ç¬¦è¿›è¡Œäº¤æ¢ã€‚</p><p>äº¤æ¢åªèƒ½å‘ç”Ÿåœ¨ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ä¹‹é—´ï¼Œç»å¯¹ä¸èƒ½å‘ç”Ÿåœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²å†…éƒ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥äº¤æ¢ s1[i] å’Œ s2[j]ï¼Œä½†ä¸èƒ½äº¤æ¢ s1[i] å’Œ s1[j]ã€‚</p><p>æœ€åï¼Œè¯·ä½ è¿”å›ä½¿ s1 å’Œ s2 ç›¸åŒçš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼Œå¦‚æœæ²¡æœ‰æ–¹æ³•èƒ½å¤Ÿä½¿å¾—è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¿”å› -1</p><p>ç¤ºä¾‹</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;xx&quot;</span>, <span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;yy&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼š<br>äº¤æ¢ <span class="hljs-built_in">s1</span>[<span class="hljs-number">0</span>] å’Œ <span class="hljs-built_in">s2</span>[<span class="hljs-number">1</span>]ï¼Œå¾—åˆ° <span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;yx&quot;</span>ï¼Œ<span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;yx&quot;</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨xyè¡¨ç¤º<code>s1[i]=x,s2[i]=y</code>å‡ºç°çš„æ¬¡æ•°ï¼ŒyxåŒç†ï¼Œè¿™æ—¶æœ‰ä¸¤ç§äº¤æ¢æƒ…å†µ</p><ul><li><p>äº¤æ¢ä¸€æ¬¡,ä½¿xyæˆ–è€…yxçš„å€¼å‡å°‘2,å¦‚<code>xx,yy-&gt;yx,yx</code></p></li><li><p>äº¤æ¢ä¸¤æ¬¡ï¼Œä½¿xyå’Œyxå„å‡å°‘1,å¦‚<code>xy,yx-&gt;yy,xx-&gt;xy,xy</code></p></li></ul><p>ä¸ºäº†å°½å¯èƒ½å‡å°‘äº¤æ¢æ¬¡æ•°ï¼Œåº”å½“å°½é‡ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼ŒåŒæ—¶å¦‚æœ<code>xy+yx</code>ä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆæ€ä¹ˆäº¤æ¢ä¹Ÿä¸èƒ½ç›¸ç­‰ï¼Œå› ä¸ºæ­¤æ—¶s1å’Œs2ä¸¤è¾¹æœ‰å¥‡æ•°ä¸ªxæˆ–yï¼Œæ— æ³•äº¤æ¢ä½¿å¾—ä¸¤ä¸ªå­—ç¬¦ä¸²çš„xå’Œyæ•°é‡ç›¸ç­‰ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">minimumSwap</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s1, <span class="hljs-built_in">string</span> s2</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> n=s1.size();<br>        <span class="hljs-built_in">int</span> xy=<span class="hljs-number">0</span>,yx=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s1[i]==<span class="hljs-string">&#x27;x&#x27;</span>&amp;&amp;s2[i]==<span class="hljs-string">&#x27;y&#x27;</span>)<br>                ++xy;<br>            <span class="hljs-keyword">if</span>(s1[i]==<span class="hljs-string">&#x27;y&#x27;</span>&amp;&amp;s2[i]==<span class="hljs-string">&#x27;x&#x27;</span>)<br>                ++yx;<br>        &#125;<br>        <span class="hljs-keyword">if</span>((xy+yx)&amp;<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">return</span> xy/<span class="hljs-number">2</span>+yx/<span class="hljs-number">2</span>+(xy%<span class="hljs-number">2</span>)*<span class="hljs-number">2</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¾ªç¯ç </title>
    <link href="/2023/02/23/%E5%BE%AA%E7%8E%AF%E7%A0%81/"/>
    <url>/2023/02/23/%E5%BE%AA%E7%8E%AF%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%BE%AA%E7%8E%AF%E7%A0%81">å¾ªç¯ç </a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å¾ªç¯ç "><a class="markdownIt-Anchor" href="#å¾ªç¯ç "></a> å¾ªç¯ç </h2><p><a href="https://leetcode.cn/problems/circular-permutation-in-binary-representation/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªæ•´æ•° n å’Œ startã€‚ä½ çš„ä»»åŠ¡æ˜¯è¿”å›ä»»æ„ (0,1,2,â€¦,2^n-1) çš„æ’åˆ— pï¼Œå¹¶ä¸”æ»¡è¶³ï¼š</p><ul><li>p[0] = start</li><li>[i] å’Œ p[i+1] çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼åªæœ‰ä¸€ä½ä¸åŒ</li><li>[0] å’Œ p[2^n -1] çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ä¹Ÿåªæœ‰ä¸€ä½ä¸åŒ</li></ul><p>ç¤ºä¾‹</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šn = <span class="hljs-number">2</span>, start = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-number">3,2,0,1</span>]<br>è§£é‡Šï¼šè¿™ä¸ªæ’åˆ—çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ (<span class="hljs-number">11,10,00,01</span>)<br>     æ‰€æœ‰çš„ç›¸é‚»å…ƒç´ éƒ½æœ‰ä¸€ä½æ˜¯ä¸åŒçš„ï¼Œå¦ä¸€ä¸ªæœ‰æ•ˆçš„æ’åˆ—æ˜¯ [<span class="hljs-number">3,1,0,2</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜éœ€è¦ç”¨åˆ°è§„å¾‹ï¼š<br />å¯¹äºnä½æ•°ï¼Œå¯ç”Ÿæˆ<code>1&lt;&lt;n</code>ä¸ªå¾ªç¯ç ï¼Œæ¯ä¸ªå¾ªç¯ç çš„è¡¨è¾¾å¼ä¸º: <code>res[i]=i^(i&gt;&gt;1)</code>,å¦‚æœè¦ç”Ÿæˆä»<code>start</code>å¼€å§‹çš„å¾ªç¯ç ï¼Œåˆ™è¡¨è¾¾å¼ä¸º<code>res[i]=i^(i&gt;&gt;1)^start</code>ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">circularPermutation</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> start)</span> </span>&#123;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">res</span><span class="hljs-params">(<span class="hljs-number">1</span>&lt;&lt;n)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;res.<span class="hljs-built_in">size</span>();++i)<br>            res[i]=i^(i&gt;&gt;<span class="hljs-number">1</span>)^start;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çŒæº‰èŠ±å›­</title>
    <link href="/2023/02/21/%E7%81%8C%E6%BA%89%E8%8A%B1%E5%9B%AD/"/>
    <url>/2023/02/21/%E7%81%8C%E6%BA%89%E8%8A%B1%E5%9B%AD/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%81%8C%E6%BA%89%E8%8A%B1%E5%9B%AD">çŒæº‰èŠ±å›­</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF1">æ€è·¯1</a></li><li><a href="#%E4%BB%A3%E7%A0%811">ä»£ç 1</a></li><li><a href="#%E6%80%9D%E8%B7%AF2">æ€è·¯2</a></li><li><a href="#%E4%BB%A3%E7%A0%812">ä»£ç 2</a></li></ul></li></ul><!-- /TOC --><h2 id="çŒæº‰èŠ±å›­"><a class="markdownIt-Anchor" href="#çŒæº‰èŠ±å›­"></a> çŒæº‰èŠ±å›­</h2><p><a href="https://leetcode.cn/problems/minimum-number-of-taps-to-open-to-water-a-garden/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ x è½´ä¸Šæœ‰ä¸€ä¸ªä¸€ç»´çš„èŠ±å›­ã€‚èŠ±å›­é•¿åº¦ä¸º nï¼Œä»ç‚¹ 0 å¼€å§‹ï¼Œåˆ°ç‚¹ n ç»“æŸã€‚</p><p>èŠ±å›­é‡Œæ€»å…±æœ‰ n + 1 ä¸ªæ°´é¾™å¤´ï¼Œåˆ†åˆ«ä½äº [0, 1, â€¦, n] ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n å’Œä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•´æ•°æ•°ç»„ ranges ï¼Œå…¶ä¸­ ranges[i] ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰è¡¨ç¤ºï¼šå¦‚æœæ‰“å¼€ç‚¹ i å¤„çš„æ°´é¾™å¤´ï¼Œå¯ä»¥çŒæº‰çš„åŒºåŸŸä¸º [i -  ranges[i], i + ranges[i]] ã€‚</p><p>è¯·ä½ è¿”å›å¯ä»¥çŒæº‰æ•´ä¸ªèŠ±å›­çš„ æœ€å°‘æ°´é¾™å¤´æ•°ç›® ã€‚å¦‚æœèŠ±å›­å§‹ç»ˆå­˜åœ¨æ— æ³•çŒæº‰åˆ°çš„åœ°æ–¹ï¼Œè¯·ä½ è¿”å› -1 ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šn = 5, ranges = <span class="hljs-comment">[3,4,1,1,0,0]</span><br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š<br>ç‚¹ 0 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[-3,3]</span><br>ç‚¹ 1 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[-3,5]</span><br>ç‚¹ 2 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[1,3]</span><br>ç‚¹ 3 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[2,4]</span><br>ç‚¹ 4 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[4,4]</span><br>ç‚¹ 5 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ <span class="hljs-comment">[5,5]</span><br>åªéœ€è¦æ‰“å¼€ç‚¹ 1 å¤„çš„æ°´é¾™å¤´å³å¯çŒæº‰æ•´ä¸ªèŠ±å›­ <span class="hljs-comment">[0,5]</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯1"><a class="markdownIt-Anchor" href="#æ€è·¯1"></a> æ€è·¯1</h3><p>åŠ¨æ€è§„åˆ’ï¼Œç”¨<code>dp[i]</code>è¡¨ç¤º<code>0ï½i</code>ä¹‹é—´æœ€å°‘çš„æ°´é¾™å¤´æ•°é‡ï¼Œé¦–å…ˆè®¡ç®—æ¯ä¸ªæ°´é¾™å¤´å¯¹åº”çš„è¦†ç›–èŒƒå›´<code>(l,r)</code>ï¼Œå¹¶æŒ‰ç…§å·¦åŒºé—´å‡åºæ’åºã€‚åˆå§‹åŒ–dpæ•°ç»„çš„å€¼ä¸ºINT_MAXï¼Œæ¥ä¸‹æ¥å¯¹æ¯ä¸ªæ°´é¾™å¤´çš„èŒƒå›´è¿›è¡Œéå†ï¼Œæ›´æ–°dpã€‚åœ¨éå†æ—¶ï¼Œå¯¹äºä½ç½®<code>i(l&lt;=i&lt;=r)</code>ï¼Œ<code>l~r</code>ä½ç½®çš„å·²ç»è¢«è¦†ç›–ï¼Œæ‰€ä»¥éœ€è¦å…³æ³¨<code>0~l</code>ä½ç½®ï¼Œæ‰€ä»¥çŠ¶æ€æ–¹ç¨‹ä¸º<code>dp[i]=min(dp[i],1+dp[l])</code>ï¼Œå¦‚æœæŸä¸ªèŒƒå›´çš„<code>dp[l]=INT_MAX</code>ï¼Œè¯´æ˜<code>l</code>ä½ç½®æ°¸è¿œæ— æ³•è¢«è¦†ç›–ï¼Œç›´æ¥è¿”å›-1å³å¯ã€‚</p><h3 id="ä»£ç 1"><a class="markdownIt-Anchor" href="#ä»£ç 1"></a> ä»£ç 1</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minTaps</span><span class="hljs-params">(<span class="hljs-type">int</span> n, vector&lt;<span class="hljs-type">int</span>&gt;&amp; ranges)</span> </span>&#123;<br>        vector&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; v;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=n;++i)<br>        &#123;<br>            <span class="hljs-type">int</span> l=<span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>,i-ranges[i]);<br>            <span class="hljs-type">int</span> r=<span class="hljs-built_in">min</span>(n,i+ranges[i]);<br>            v.<span class="hljs-built_in">push_back</span>(&#123;l,r&#125;);<br>        &#125;<br>        <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n+<span class="hljs-number">1</span>,INT_MAX)</span></span>;<br>        dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; t:v)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(dp[t.first]==INT_MAX)<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=t.first;i&lt;=t.second;++i)<br>                dp[i]=<span class="hljs-built_in">min</span>(dp[i],<span class="hljs-number">1</span>+dp[t.first]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[n];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯2"><a class="markdownIt-Anchor" href="#æ€è·¯2"></a> æ€è·¯2</h3><p>è¿™é“é¢˜å®é™…ä¸Šä¸<a href="https://leetcode.cn/problems/jump-game-ii/description">è·³è·ƒæ¸¸æˆII</a>ç±»ä¼¼ã€‚é¦–å…ˆéœ€è¦å°†rangeæ•°ç»„å¤„ç†æˆä¸€ä¸ªæ–°æ•°ç»„<code>v[i]</code>ï¼Œ<code>v[i]</code>è¡¨ç¤ºä»iä½ç½®å¼€å§‹å¯ä»¥è¾¾åˆ°çš„æœ€è¿œè·ç¦»ã€‚ç„¶åè¿™é“é¢˜åŸºæœ¬å°±å’Œè·³è·ƒæ¸¸æˆä¸€æ ·äº†ï¼Œç”¨&quot;é€ æ¡¥&quot;çš„æ€è·¯å¯ä»¥è§£å†³ã€‚ä½†æ˜¯è¦æ³¨æ„<br />è¿™é“é¢˜å­˜åœ¨å¯èƒ½æ— æ³•åˆ°è¾¾ç»ˆç‚¹çš„æƒ…å†µï¼Œå› æ­¤å½“<code>i==cur</code>æ—¶ï¼Œå¦‚æœå½“å‰<code>cur==next_cur</code>ï¼Œè¯´æ˜æ— æ³•åˆ°è¾¾ç»ˆç‚¹ï¼Œè¿”å›-1ã€‚<br />æ³¨æ„ï¼šéå†çš„ç»ˆç‚¹æ˜¯n-1ï¼Œå› ä¸ºå¦‚æœiåˆ°è¾¾n-1æ—¶ï¼Œiå°äºcurè¯´æ˜å·²ç»å¯ä»¥åˆ°è¾¾äº†ï¼Œå¦‚æœiç­‰äºcur,é‚£ä¹ˆä¼šè‡ªåŠ¨é€ ä¸€ä¸ªæ¡¥ï¼Œæ‰€ä»¥ä¸éœ€è¦éå†åˆ°nã€‚</p><h3 id="ä»£ç 2"><a class="markdownIt-Anchor" href="#ä»£ç 2"></a> ä»£ç 2</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int minTaps(int n, vector&lt;int&gt;&amp; ranges) &#123;<br>        vector&lt;int&gt; v(n+1);<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n+1;++i)&#123;<br>            int <span class="hljs-attribute">len</span>=ranges[i];<br>            int <span class="hljs-attribute">l</span>=max(i-len,0);<br>            v[l]=max(v[l],i+len);<br>        &#125;<br>        int <span class="hljs-attribute">ans</span>=0,cur=0,next_cur=0;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)&#123;<br>            <span class="hljs-attribute">next_cur</span>=max(next_cur,v[i]);<br>            <span class="hljs-keyword">if</span>(<span class="hljs-attribute">i</span>==cur)&#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-attribute">cur</span>==next_cur)&#123;<br>                    return -1;<br>                &#125;<br>                <span class="hljs-attribute">cur</span>=next_cur;<br>                ++ans;<br>            &#125;<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§å¹³å‡é€šè¿‡ç‡</title>
    <link href="/2023/02/19/%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E9%80%9A%E8%BF%87%E7%8E%87/"/>
    <url>/2023/02/19/%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E9%80%9A%E8%BF%87%E7%8E%87/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E9%80%9A%E8%BF%87%E7%8E%87">æœ€å¤§å¹³å‡é€šè¿‡ç‡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å¤§å¹³å‡é€šè¿‡ç‡"><a class="markdownIt-Anchor" href="#æœ€å¤§å¹³å‡é€šè¿‡ç‡"></a> æœ€å¤§å¹³å‡é€šè¿‡ç‡</h2><p><a href="https://leetcode.cn/problems/maximum-average-pass-ratio/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä¸€æ‰€å­¦æ ¡é‡Œæœ‰ä¸€äº›ç­çº§ï¼Œæ¯ä¸ªç­çº§é‡Œæœ‰ä¸€äº›å­¦ç”Ÿï¼Œç°åœ¨æ¯ä¸ªç­éƒ½ä¼šè¿›è¡Œä¸€åœºæœŸæœ«è€ƒè¯•ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•°ç»„ classes ï¼Œå…¶ä¸­ classes[i] = [passi, totali] ï¼Œè¡¨ç¤ºä½ æå‰çŸ¥é“äº†ç¬¬ i ä¸ªç­çº§æ€»å…±æœ‰ totali ä¸ªå­¦ç”Ÿï¼Œå…¶ä¸­åªæœ‰ passi ä¸ªå­¦ç”Ÿå¯ä»¥é€šè¿‡è€ƒè¯•ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° extraStudents ï¼Œè¡¨ç¤ºé¢å¤–æœ‰ extraStudents ä¸ªèªæ˜çš„å­¦ç”Ÿï¼Œä»–ä»¬ ä¸€å®š èƒ½é€šè¿‡ä»»ä½•ç­çº§çš„æœŸæœ«è€ƒã€‚ä½ éœ€è¦ç»™è¿™ extraStudents ä¸ªå­¦ç”Ÿæ¯äººéƒ½å®‰æ’ä¸€ä¸ªç­çº§ï¼Œä½¿å¾— æ‰€æœ‰ ç­çº§çš„ å¹³å‡ é€šè¿‡ç‡ æœ€å¤§ ã€‚</p><p>ä¸€ä¸ªç­çº§çš„ é€šè¿‡ç‡ ç­‰äºè¿™ä¸ªç­çº§é€šè¿‡è€ƒè¯•çš„å­¦ç”Ÿäººæ•°é™¤ä»¥è¿™ä¸ªç­çº§çš„æ€»äººæ•°ã€‚å¹³å‡é€šè¿‡ç‡ æ˜¯æ‰€æœ‰ç­çº§çš„é€šè¿‡ç‡ä¹‹å’Œé™¤ä»¥ç­çº§æ•°ç›®ã€‚</p><p>è¯·ä½ è¿”å›åœ¨å®‰æ’è¿™ extraStudents ä¸ªå­¦ç”Ÿå»å¯¹åº”ç­çº§åçš„ æœ€å¤§ å¹³å‡é€šè¿‡ç‡ã€‚ä¸æ ‡å‡†ç­”æ¡ˆè¯¯å·®èŒƒå›´åœ¨ 10-5 ä»¥å†…çš„ç»“æœéƒ½ä¼šè§†ä¸ºæ­£ç¡®ç»“æœã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šclasses = <span class="hljs-string">[[1,2],[3,5],[2,2]]</span>, extraStudents = <span class="hljs-number">2</span><br>è¾“å‡ºï¼š<span class="hljs-number">0.78333</span><br>è§£é‡Šï¼šä½ å¯ä»¥å°†é¢å¤–çš„ä¸¤ä¸ªå­¦ç”Ÿéƒ½å®‰æ’åˆ°ç¬¬ä¸€ä¸ªç­çº§ï¼Œå¹³å‡é€šè¿‡ç‡ä¸º (<span class="hljs-number">3</span>/<span class="hljs-number">4</span> + <span class="hljs-number">3</span>/<span class="hljs-number">5</span> + <span class="hljs-number">2</span>/<span class="hljs-number">2</span>) / <span class="hljs-number">3</span> = <span class="hljs-number">0.78333</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜çš„æ ¸å¿ƒæ€æƒ³æ˜¯è´ªå¿ƒï¼Œå°±æ˜¯éœ€è¦ä¿è¯æ¯æ¬¡å®‰æ’çš„ç­çº§é€šè¿‡ç‡å¢åŠ çš„æœ€å¤šã€‚</p><p>å‡è®¾ä¸€ä¸ªç­çº§å½“å‰çš„é€šè¿‡ç‡ä¸º<code>a/b</code>ï¼Œå¦‚æœå°†ä¸€ä¸ªèªæ˜çš„å­¦ç”Ÿå®‰æ’åˆ°æ­¤ç­çº§ï¼Œé‚£ä¹ˆç­çº§çš„é€šè¿‡ç‡å°±ä¼šå˜ä¸º<code>a+1/b+1</code>,å¯ä»¥å‘ç°ï¼Œé€šè¿‡ç‡çš„å¢é‡ä¸º<code>a+1/b+1-a/b</code>ã€‚</p><p>æ‰€ä»¥å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§é¡¶å †ï¼Œå­˜å‚¨çš„æ˜¯æ¯ä¸ªç­çº§çš„é€šè¿‡ç‡å¢é‡ã€‚</p><p>è¿›è¡Œ <code>extraStudents</code> æ¬¡æ“ä½œï¼Œæ¯æ¬¡ä»å †é¡¶å–å‡ºä¸€ä¸ªç­çº§ï¼Œå°†è¿™ä¸ªç­çº§çš„äººæ•°å’Œé€šè¿‡äººæ•°éƒ½åŠ  1ï¼Œç„¶åå°†è¿™ä¸ªç­çº§çš„é€šè¿‡ç‡å¢é‡é‡æ–°è®¡ç®—å¹¶æ”¾å›å †ä¸­ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å°†æ‰€æœ‰çš„å­¦ç”Ÿéƒ½åˆ†é…å®Œæ¯•ã€‚</p><p>æœ€åï¼Œå°†æ‰€æœ‰ç­çº§çš„é€šè¿‡ç‡æ±‚å’Œï¼Œç„¶åé™¤ä»¥ç­çº§æ•°ç›®ï¼Œå³ä¸ºç­”æ¡ˆã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">struct</span> node<br>    &#123;<br>        <span class="hljs-built_in">double</span> <span class="hljs-keyword">add</span>;<br>        <span class="hljs-built_in">int</span> pass,total;<br>        node(<span class="hljs-built_in">double</span> a,<span class="hljs-built_in">int</span> b,<span class="hljs-built_in">int</span> c):<span class="hljs-keyword">add</span>(a),pass(b),total(c)&#123;&#125;<br>        <span class="hljs-built_in">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-keyword">const</span> node&amp; t) <span class="hljs-keyword">const</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">add</span>&lt;t.<span class="hljs-keyword">add</span>;<br>        &#125;<br>    &#125;;<br>    priority_queue&lt;node&gt; q;<br>    <span class="hljs-function"><span class="hljs-built_in">double</span> <span class="hljs-title">maxAverageRatio</span>(<span class="hljs-params">vector&lt;vector&lt;<span class="hljs-built_in">int</span>&gt;&gt;&amp; classes, <span class="hljs-built_in">int</span> extraStudents</span>)</span> &#123;<br>        <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; v:classes)<br>        &#123;<br>            <span class="hljs-built_in">int</span> a=v[<span class="hljs-number">0</span>],b=v[<span class="hljs-number">1</span>];<br>            <span class="hljs-built_in">double</span> <span class="hljs-keyword">add</span>=(<span class="hljs-built_in">double</span>)(a+<span class="hljs-number">1</span>)/(b+<span class="hljs-number">1</span>)-(<span class="hljs-built_in">double</span>)a/b;<br>            q.push(node(<span class="hljs-keyword">add</span>,a,b));<br>        &#125;<br>        <span class="hljs-keyword">while</span>(extraStudents--)<br>        &#123;<br>            node t=q.top();<br>            q.pop();<br>            ++t.pass;<br>            ++t.total;<br>            t.<span class="hljs-keyword">add</span>=(<span class="hljs-built_in">double</span>)(t.pass+<span class="hljs-number">1</span>)/(t.total+<span class="hljs-number">1</span>)-(<span class="hljs-built_in">double</span>)t.pass/t.total;<br>            q.push(t);<br>        &#125;<br>        <span class="hljs-built_in">double</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(!q.empty())<br>        &#123;<br>            node t=q.top();<br>            q.pop();<br>            ans+=(<span class="hljs-built_in">double</span>) t.pass/t.total;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans/classes.size();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§æ­£æ–¹å½¢</title>
    <link href="/2023/02/17/%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/"/>
    <url>/2023/02/17/%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2">æœ€å¤§æ­£æ–¹å½¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å¤§æ­£æ–¹å½¢"><a class="markdownIt-Anchor" href="#æœ€å¤§æ­£æ–¹å½¢"></a> æœ€å¤§æ­£æ–¹å½¢</h2><p><a href="https://leetcode.cn/problems/largest-1-bordered-square/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹² 0 å’Œ 1 ç»„æˆçš„äºŒç»´ç½‘æ ¼ gridï¼Œè¯·ä½ æ‰¾å‡ºè¾¹ç•Œå…¨éƒ¨ç”± 1 ç»„æˆçš„æœ€å¤§ æ­£æ–¹å½¢ å­ç½‘æ ¼ï¼Œå¹¶è¿”å›è¯¥å­ç½‘æ ¼ä¸­çš„å…ƒç´ æ•°é‡ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› 0ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šgrid = <span class="hljs-string">[[1,1,1],[1,0,1],[1,1,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨åˆ°å‰ç¼€å’Œçš„æ€è·¯ï¼ŒæŠŠæ¯è¡Œæ¯åˆ—çš„å‰ç¼€å’Œæ•°ç»„ä¿å­˜ä¸‹æ¥ï¼Œç”¨æ¥å¿«é€Ÿè®¡ç®—è¾¹ç•Œï¼Œç„¶åä¾æ¬¡éå†è¾¹ç•Œé•¿åº¦(ä»å¤§åˆ°å°)å’Œå·¦ä¸Šè§’åæ ‡ï¼Œå½“æ»¡è¶³æ¡ä»¶æ—¶è¿”å›æ­£æ–¹å½¢é¢ç§¯å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stan">class Solution &#123;<br>public:<br>    <span class="hljs-type">int</span> largest1BorderedSquare(<span class="hljs-type">vector</span>&lt;<span class="hljs-type">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid) &#123;<br>        <span class="hljs-type">int</span> m = grid.<span class="hljs-built_in">size</span>(),n=grid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">vector</span>&lt;<span class="hljs-type">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">row</span>(m,<span class="hljs-type">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n+<span class="hljs-number">1</span>)),<span class="hljs-built_in">col</span>(n,<span class="hljs-type">vector</span>&lt;<span class="hljs-type">int</span>&gt;(m+<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                <span class="hljs-built_in">row</span>[i][j+<span class="hljs-number">1</span>]=<span class="hljs-built_in">row</span>[i][j]+grid[i][j];<br>                <span class="hljs-built_in">col</span>[j][i+<span class="hljs-number">1</span>]=<span class="hljs-built_in">col</span>[j][i]+grid[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> d=<span class="hljs-built_in">min</span>(m,n);<br>        <span class="hljs-keyword">for</span>(;d&gt;<span class="hljs-number">0</span>;--d)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=m-d;++i)<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=n-d;++j)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">row</span>[i][j+d]-<span class="hljs-built_in">row</span>[i][j]==d&amp;&amp;<br>                    <span class="hljs-built_in">row</span>[i+d-<span class="hljs-number">1</span>][j+d]-<span class="hljs-built_in">row</span>[i+d-<span class="hljs-number">1</span>][j]==d&amp;&amp;<br>                    <span class="hljs-built_in">col</span>[j][i+d]-<span class="hljs-built_in">col</span>[j][i]==d&amp;&amp;<br>                    <span class="hljs-built_in">col</span>[j+d-<span class="hljs-number">1</span>][i+d]-<span class="hljs-built_in">col</span>[j+d-<span class="hljs-number">1</span>][i]==d)<br>                        <span class="hljs-keyword">return</span> d*d;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ£€æŸ¥å¥½æ•°ç»„</title>
    <link href="/2023/02/16/%E6%A3%80%E6%9F%A5%E5%A5%BD%E6%95%B0%E7%BB%84/"/>
    <url>/2023/02/16/%E6%A3%80%E6%9F%A5%E5%A5%BD%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%A3%80%E6%9F%A5%E5%A5%BD%E6%95%B0%E7%BB%84">æ£€æŸ¥å¥½æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ£€æŸ¥å¥½æ•°ç»„"><a class="markdownIt-Anchor" href="#æ£€æŸ¥å¥½æ•°ç»„"></a> æ£€æŸ¥å¥½æ•°ç»„</h2><p><a href="https://leetcode.cn/problems/check-if-it-is-a-good-array/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numsï¼Œä½ éœ€è¦ä»ä¸­ä»»é€‰ä¸€äº›å­é›†ï¼Œç„¶åå°†å­é›†ä¸­æ¯ä¸€ä¸ªæ•°ä¹˜ä»¥ä¸€ä¸ª ä»»æ„æ•´æ•°ï¼Œå¹¶æ±‚å‡ºä»–ä»¬çš„å’Œã€‚</p><p>å‡å¦‚è¯¥å’Œç»“æœä¸º 1ï¼Œé‚£ä¹ˆåŸæ•°ç»„å°±æ˜¯ä¸€ä¸ªã€Œå¥½æ•°ç»„ã€ï¼Œåˆ™è¿”å› Trueï¼›å¦åˆ™è¯·è¿”å› Falseã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">è¾“å…¥ï¼šnums = [12,5,7,23]<br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br>è§£é‡Šï¼šæŒ‘é€‰æ•°å­— 5 å’Œ 7ã€‚<br>5<span class="hljs-number">*3</span> + 7*(-2) = 1<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯ä¸ªæ•°å­¦é¢˜ğŸ˜…ï¼Œç”¨åˆ°è£´èœ€å®šç†ï¼š<br />å¯¹äºä¸å…¨ä¸ºé›¶çš„ä»»æ„æ•´æ•° <code>a</code> å’Œ <code>b</code>ï¼Œè®° <code>g=gcdâ¡(a,b)</code>ï¼Œåˆ™å¯¹äºä»»æ„æ•´æ•° <code>x</code> å’Œ <code>y</code> éƒ½æ»¡è¶³ <code>aÃ—x+bÃ—y</code> æ˜¯ <code>g</code> çš„å€æ•°ï¼Œç‰¹åˆ«åœ°ï¼Œå­˜åœ¨æ•´æ•° <code>x</code> å’Œ <code>y</code> æ»¡è¶³ <code>aÃ—x+bÃ—y=g</code>ï¼Œå¯¹äºå¤šä¸ªæ•´æ•°åŒæ ·é€‚ç”¨ã€‚</p><p>å› æ­¤æœ¬ä½“åªéœ€è¦è€ƒè™‘æœ€å¤§å…¬çº¦æ•°æ˜¯å¦ä¸º1å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isGoodArray</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> divisor = nums[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>            divisor = <span class="hljs-built_in">gcd</span>(divisor, num);<br>            <span class="hljs-keyword">if</span> (divisor == <span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> divisor == <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ›¿æ¢å­ä¸²</title>
    <link href="/2023/02/13/%E6%9B%BF%E6%8D%A2%E5%AD%90%E4%B8%B2/"/>
    <url>/2023/02/13/%E6%9B%BF%E6%8D%A2%E5%AD%90%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9B%BF%E6%8D%A2%E5%AD%90%E4%B8%B2%E5%BE%97%E5%88%B0%E5%B9%B3%E8%A1%A1%E5%AD%97%E7%AC%A6%E4%B8%B2">æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸²"></a> æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸²</h2><p><a href="https://leetcode.cn/problems/replace-the-substring-for-balanced-string/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸€ä¸ªåªå«æœ‰ â€˜Qâ€™, â€˜Wâ€™, â€˜Eâ€™, â€˜Râ€™ å››ç§å­—ç¬¦ï¼Œä¸”é•¿åº¦ä¸º n çš„å­—ç¬¦ä¸²ã€‚</p><p>å‡å¦‚åœ¨è¯¥å­—ç¬¦ä¸²ä¸­ï¼Œè¿™å››ä¸ªå­—ç¬¦éƒ½æ°å¥½å‡ºç° n/4 æ¬¡ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªã€Œå¹³è¡¡å­—ç¬¦ä¸²ã€ã€‚</p><p>ç»™ä½ ä¸€ä¸ªè¿™æ ·çš„å­—ç¬¦ä¸² sï¼Œè¯·é€šè¿‡ã€Œæ›¿æ¢ä¸€ä¸ªå­ä¸²ã€çš„æ–¹å¼ï¼Œä½¿åŸå­—ç¬¦ä¸² s å˜æˆä¸€ä¸ªã€Œå¹³è¡¡å­—ç¬¦ä¸²ã€ã€‚</p><p>ä½ å¯ä»¥ç”¨å’Œã€Œå¾…æ›¿æ¢å­ä¸²ã€é•¿åº¦ç›¸åŒçš„ ä»»ä½• å…¶ä»–å­—ç¬¦ä¸²æ¥å®Œæˆæ›¿æ¢ã€‚</p><p>è¯·è¿”å›å¾…æ›¿æ¢å­ä¸²çš„æœ€å°å¯èƒ½é•¿åº¦ã€‚</p><p>å¦‚æœåŸå­—ç¬¦ä¸²è‡ªèº«å°±æ˜¯ä¸€ä¸ªå¹³è¡¡å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› 0ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;QQWE&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šæˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ª &#x27;Q&#x27; æ›¿æ¢æˆ &#x27;R&#x27;ï¼Œè¿™æ ·å¾—åˆ°çš„ <span class="hljs-string">&quot;RQWE&quot;</span> (æˆ– <span class="hljs-string">&quot;QRWE&quot;</span>) æ˜¯å¹³è¡¡çš„ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦ç”¨åˆ°åŒæŒ‡é’ˆï¼Œæ ¹æ®é¢˜ç›®çš„æè¿°å¯ä»¥å¾—çŸ¥ï¼Œå½“æ›¿æ¢éƒ¨åˆ†ä»¥å¤–çš„å…¶ä»–å­—æ¯éƒ½å°äºç­‰äº<code>n/4</code>æ—¶ï¼Œæ›¿æ¢åæ‰èƒ½ç¬¦åˆè¦æ±‚ã€‚å› æ­¤å³æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œå½“ç¬¦åˆè¦æ±‚æ—¶ï¼Œæ›´æ–°ç­”æ¡ˆï¼Œå·¦æŒ‡é’ˆç¼©å°å­ä¸²é•¿åº¦ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs hsp">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> balancedString(string s) &#123;<br>        <span class="hljs-keyword">int</span> n=s.size()<span class="hljs-comment">;</span><br>        <span class="hljs-keyword">int</span> m=n/<span class="hljs-number">4</span><span class="hljs-comment">;</span><br>        vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-keyword">cnt</span>(<span class="hljs-number">26</span>)<span class="hljs-comment">;</span><br>        <span class="hljs-keyword">for</span>(char c:s)<br>        &#123;<br>            ++<span class="hljs-keyword">cnt</span>[c-<span class="hljs-string">&#x27;A&#x27;</span>]<span class="hljs-comment">;</span><br>        &#125;<br>        <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span><span class="hljs-comment">;</span><br>        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">1</span>e9<span class="hljs-comment">;</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;Q&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]==m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;W&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]==m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;E&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]==m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;R&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]==m)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><span class="hljs-comment">;</span><br>        <span class="hljs-keyword">for</span>(r=<span class="hljs-number">0</span><span class="hljs-comment">;r&lt;n;++r)</span><br>        &#123;<br>            --<span class="hljs-keyword">cnt</span>[s[r]-<span class="hljs-string">&#x27;A&#x27;</span>]<span class="hljs-comment">;</span><br>            <span class="hljs-keyword">while</span>(<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;Q&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]&lt;=m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;W&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]&lt;=m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;E&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]&lt;=m&amp;&amp;<span class="hljs-keyword">cnt</span>[<span class="hljs-string">&#x27;R&#x27;</span>-<span class="hljs-string">&#x27;A&#x27;</span>]&lt;=m)<br>            &#123;<br>                ans=min(ans,r-l+<span class="hljs-number">1</span>)<span class="hljs-comment">;</span><br>                ++<span class="hljs-keyword">cnt</span>[s[l]-<span class="hljs-string">&#x27;A&#x27;</span>]<span class="hljs-comment">;</span><br>                ++l<span class="hljs-comment">;</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans<span class="hljs-comment">;</span><br>    &#125;<br>&#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ·éª°å­</title>
    <link href="/2023/02/10/%E6%8E%B7%E9%AA%B0%E5%AD%90/"/>
    <url>/2023/02/10/%E6%8E%B7%E9%AA%B0%E5%AD%90/</url>
    
    <content type="html"><![CDATA[<h2 id="æ·éª°å­æ¨¡æ‹Ÿ"><a class="markdownIt-Anchor" href="#æ·éª°å­æ¨¡æ‹Ÿ"></a> æ·éª°å­æ¨¡æ‹Ÿ</h2><p><a href="https://leetcode.cn/problems/dice-roll-simulation/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸€ä¸ªéª°å­æ¨¡æ‹Ÿå™¨ä¼šæ¯æ¬¡æŠ•æ·çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ª 1 åˆ° 6 çš„éšæœºæ•°ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒæ—¶æœ‰ä¸ªçº¦æŸï¼Œå°±æ˜¯ä½¿å¾—æŠ•æ·éª°å­æ—¶ï¼Œè¿ç»­ æ·å‡ºæ•°å­— i çš„æ¬¡æ•°ä¸èƒ½è¶…è¿‡ rollMax[i]ï¼ˆi ä» 1 å¼€å§‹ç¼–å·ï¼‰ã€‚</p><p>ç°åœ¨ï¼Œç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ rollMax å’Œä¸€ä¸ªæ•´æ•° nï¼Œè¯·ä½ æ¥è®¡ç®—æ· n æ¬¡éª°å­å¯å¾—åˆ°çš„ä¸åŒç‚¹æ•°åºåˆ—çš„æ•°é‡ã€‚</p><p>å‡å¦‚ä¸¤ä¸ªåºåˆ—ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ ä¸åŒï¼Œå°±è®¤ä¸ºè¿™ä¸¤ä¸ªåºåˆ—æ˜¯ä¸åŒçš„ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¯·è¿”å› æ¨¡ 10^9 + 7 ä¹‹åçš„ç»“æœã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn = 2, rollMax = [1,1,2,2,2,3]<br>è¾“å‡ºï¼š34<br>è§£é‡Šï¼šæˆ‘ä»¬æ·<span class="hljs-number"> 2 </span>æ¬¡éª°å­ï¼Œå¦‚æœæ²¡æœ‰çº¦æŸçš„è¯ï¼Œå…±æœ‰<span class="hljs-number"> 6 </span>*<span class="hljs-number"> 6 </span>=<span class="hljs-number"> 36 </span>ç§å¯èƒ½çš„ç»„åˆã€‚ä½†æ˜¯æ ¹æ® rollMax æ•°ç»„ï¼Œæ•°å­—<span class="hljs-number"> 1 </span>å’Œ<span class="hljs-number"> 2 </span>æœ€å¤šè¿ç»­å‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°åºåˆ— (1,1) å’Œ (2,2)ã€‚å› æ­¤ï¼Œæœ€ç»ˆç­”æ¡ˆæ˜¯ 36-2 = 34ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜è‡ªå·±å®Œå…¨æ²¡å•¥å¤´ç»ªï¼Œå¼ºçƒˆæ¨èå¤§ä½¬çš„æ€è·¯ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs prolog">// -------------------------------------------------è¯´æ˜-----------------------------------------------------------------<br><br>// é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäºŒç»´dpæ•°ç»„ã€‚<br>//  dp[i][j]è¡¨ç¤ºç¬¬iæ¬¡æ·å‡ºéª°å­æ—¶ï¼Œæ•°å­—jå‡ºç°çš„å¯èƒ½çš„åºåˆ—æ€»æ•°ã€‚<br>// ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬iæ¬¡æ·å‡ºçš„éª°å­æ•°å­—æ˜¯ j æ‰€æœ‰å¯èƒ½çš„åºåˆ—æ•°) <br>// å…¶ä¸­ <span class="hljs-number">1</span> &lt;= i &lt;= n    <span class="hljs-number">1</span> &lt;= j &lt;= <span class="hljs-number">6</span><br><br>// æ˜æ˜¾ï¼Œdp[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>],dp[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]... dp[<span class="hljs-number">1</span>][<span class="hljs-number">6</span>]å‡ä¸º <span class="hljs-number">1</span><br>// æ‰€ä»¥ï¼Œæœ€åç»“æœæœ‰æ•ˆåºåˆ—æ€»æ•°å°±æ˜¯ sum (dp[n][<span class="hljs-number">1</span>] + dp[n][<span class="hljs-number">2</span>] + ... + dp[n][<span class="hljs-number">6</span>])  | sumä¸ºæ±‚å’Œå‡½æ•°<br><br>// é‚£ä¹ˆï¼Œå¦‚ä½•è®¡ç®—ç¬¬iæ¬¡éª°å­æ·å‡ºæ—¶ï¼Œæ·å‡ºæ•°å­—ä¸ºjçš„åºåˆ—æ€»æ•°ä¸ºå¤šå°‘å‘¢?<br>// ä»”ç»†æ€è€ƒä¸€ä¸‹dp[i][j]å’Œä»€ä¹ˆæœ‰å…³?<br><br>// ç¬¬ä¸€: dp[i][j] å’Œdp[i<span class="hljs-number">-1</span>][j]æœ‰å…³ï¼Œä¸ä»…å¦‚æ­¤ï¼Œdp[i][j] å’Œ dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>], dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>],...dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">6</span>]éƒ½æœ‰å…³<br>// ç¬¬äºŒ: ç”±äºè¿ç»­æ•°å­—é™åˆ¶ï¼Œdp[i][j]è¿˜å’Œ dp[i-rollMax[j<span class="hljs-number">-1</span>]][<span class="hljs-number">1</span>],...,dp[i-rollMax[j<span class="hljs-number">-1</span>]][<span class="hljs-number">6</span>]å‡æœ‰å…³<br>// å³ï¼Œ ç¬¬iæ¬¡æ·å‡ºéª°å­çš„åºåˆ—æ€»æ•°åªå’Œç¬¬i<span class="hljs-number">-1</span>æ¬¡æ·å‡ºéª°å­çš„åºåˆ—æ€»æ•°ï¼Œä»¥åŠç¬¬i-rollMax[j<span class="hljs-number">-1</span>]æ¬¡æ·å‡ºéª°å­çš„åºåˆ—æ€»æ•°æœ‰å…³ã€‚<br><br>// --------------------------------------------------ä¸¾ä¾‹----------------------------------------------------------------<br><br>// è¿™ä¹ˆè¯´ å¯èƒ½è¿˜æ˜¯ä¸å¤Ÿæ¸…æ¥šï¼Œ ä¸¾ä¸ªä¾‹å­<br><br>// å‡å¦‚ç°åœ¨æ˜¯ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºéª°å­ï¼Œ ä¸”æ·å‡ºçš„æ•°å­—æ˜¯ <span class="hljs-number">6</span>, è€Œæœ€å¤šèƒ½è¿ç»­å‡ºç° <span class="hljs-number">3</span> æ¬¡ <span class="hljs-number">6</span>ï¼Œ dp[<span class="hljs-number">5</span>][<span class="hljs-number">6</span>]å¦‚ä½•è®¡ç®—?<br><br>// åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>   <span class="hljs-symbol">___</span>   <span class="hljs-number">6</span> <br>// æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>    <span class="hljs-number">5</span><br><br>â‘  å¦‚æœç¬¬ <span class="hljs-number">4</span> æ¬¡æ·å‡ºçš„æ•°å­—æ˜¯ <span class="hljs-number">1</span>ï¼Œ<span class="hljs-number">2</span>ï¼Œ<span class="hljs-number">3</span>ï¼Œ<span class="hljs-number">4</span>ï¼Œ<span class="hljs-number">5</span> ä¸­çš„ä¸€ç§ï¼Œ ä¼šä¸ä¼šå¯¹ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºçš„ <span class="hljs-number">6</span> äº§ç”Ÿå½±å“? <br>  ç­”æ¡ˆæ˜¯ ä¸ä¼šï¼Œå› ä¸ºå¦‚æœç¬¬ <span class="hljs-number">4</span> æ¬¡ä¸æ˜¯ <span class="hljs-number">6</span>ï¼Œé‚£ä¹ˆç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºçš„ <span class="hljs-number">6</span> è‚¯å®šæ˜¯ç¬¬ä¸€ä¸ª <span class="hljs-number">6</span>ï¼Œ è‚¯å®šä¸ä¼šè¿ç»­ã€‚<br>  æ‰€ä»¥ä¸ç”¨è€ƒè™‘é™åˆ¶æ•°ç»„rollMaxã€‚<br>  ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ç›´æ¥å°† dp[<span class="hljs-number">4</span>][<span class="hljs-number">1</span>]ï¼Œdp[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]ï¼Œdp[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>]ï¼Œdp[<span class="hljs-number">4</span>][<span class="hljs-number">4</span>]ï¼Œdp[<span class="hljs-number">4</span>][<span class="hljs-number">5</span>]åŠ å…¥åˆ° dp[<span class="hljs-number">5</span>][<span class="hljs-number">6</span>] ä¸­ã€‚<br>  <br>  // <span class="hljs-number">5</span>ç§å¯èƒ½<br>  // åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>    <span class="hljs-number">1</span>   <span class="hljs-number">6</span>       åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>    <span class="hljs-number">2</span>   <span class="hljs-number">6</span>  ...  åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>    <span class="hljs-number">5</span>   <span class="hljs-number">6</span><br>  // æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>   <span class="hljs-number">5</span>       æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>   <span class="hljs-number">5</span>  ...  æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>   <span class="hljs-number">5</span><br><br>â‘¡ å¦‚æœç¬¬ <span class="hljs-number">4</span> æ¬¡æ·å‡ºçš„æ•°å­—æ˜¯ <span class="hljs-number">6</span> ï¼Œä¼šä¸ä¼šå¯¹ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºçš„ <span class="hljs-number">6</span> äº§ç”Ÿå½±å“? <br>  ç­”æ¡ˆæ˜¯ ä¸ä¸€å®šã€‚ä¸ºä»€ä¹ˆæ˜¯ä¸ä¸€å®š? å› ä¸ºç¬¬ <span class="hljs-number">4</span> æ¬¡æ·å‡ºçš„ <span class="hljs-number">6</span> åŠ ä¸Šç¬¬äº”æ¬¡æ·å‡ºçš„ <span class="hljs-number">6</span> å¯èƒ½éƒ½è¿˜æ²¡è¾¾åˆ°rollMaxä¸­æ‰€è®¾ç½®çš„ä¸Šé™ã€‚<br>  é‚£ä¹ˆï¼Œå¯ä»¥å…ˆå°†dp[<span class="hljs-number">4</span>][<span class="hljs-number">6</span>] åŠ å…¥åˆ°dp[<span class="hljs-number">5</span>][<span class="hljs-number">6</span>]ä¸­å»ã€‚åªæ˜¯åé¢éœ€è¦å»é™¤ä¸åˆæ³•çš„åºåˆ—ç½¢äº†ã€‚ï¼ˆæ³¨æ„ï¼‰<br>   <br>   // ç±»ä¼¼è¿™ç§<br>   // åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>    <span class="hljs-number">6</span>   <span class="hljs-number">6</span>      // åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>   <span class="hljs-number">6</span>    <span class="hljs-number">6</span>   <span class="hljs-number">6</span><br>   // æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>   <span class="hljs-number">5</span>      // æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span>   <span class="hljs-number">5</span><br><br>â‘¢ å¥½çš„ï¼Œç¬¬â‘¡æ­¥ä¸­æˆ‘ä»¬å¤šåŠ äº†ä¸€äº›ä¸åˆæ³•çš„åºåˆ—æ•°ç›®ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å°†å…¶å‡æ‰ã€‚é‚£ä¹ˆåˆ°åº•éœ€è¦å‡å»å¤šå°‘å‘¢?<br>  <br>  æˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œ ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºæ•°å­— <span class="hljs-number">6</span> æ—¶ï¼Œæ·å‡ºä¹‹å‰è¿ç»­ <span class="hljs-number">6</span> çš„æ•°é‡æœ€å¤§æœ‰å¤šå°‘?<br>  ç­”æ¡ˆæ˜¯ rollMax[<span class="hljs-number">5</span>]ï¼ˆæ•°å­— <span class="hljs-number">6</span> çš„ä¸Šé™ï¼‰ï¼Œä¸å¯èƒ½è¶…è¿‡è¯¥æ•°å­— ï¼Œ<br>  å› ä¸ºå¦‚æœè¶…è¿‡äº†rollMax[<span class="hljs-number">5</span>]ï¼ˆ<span class="hljs-number">6</span>çš„ä¸Šé™ï¼‰ï¼Œåœ¨ç¬¬ <span class="hljs-number">4</span> æ¬¡è‚¯å®šå°±å·²ç»è¢«å¤„ç†äº†ã€‚<br><br>  é‚£ä¹ˆï¼Œç°åœ¨åˆå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š<br>  a. ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºæ•°å­— <span class="hljs-number">6</span> ä¹‹å‰è¿ç»­ <span class="hljs-number">6</span> çš„æ•°é‡ &lt; rollMax[<span class="hljs-number">5</span>] ï¼ˆ<span class="hljs-number">6</span>çš„ä¸Šé™ï¼‰<br>  b. ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºæ•°å­— <span class="hljs-number">6</span> ä¹‹å‰è¿ç»­ <span class="hljs-number">6</span> çš„æ•°é‡ == rollMax[<span class="hljs-number">5</span>] ï¼ˆ<span class="hljs-number">6</span>çš„ä¸Šé™ï¼‰<br>  æƒ…å†µa. æˆ‘ä»¬ä¸éœ€è¦è¿‡å¤šè€ƒè™‘ï¼Œå› ä¸ºè¿˜æ²¡æœ‰è¾¾åˆ°ä¸Šé™ï¼Œç›´æ¥å°†dp[<span class="hljs-number">4</span>][<span class="hljs-number">6</span>]åŠ å…¥dp[<span class="hljs-number">5</span>][<span class="hljs-number">6</span>] å³å¯ï¼ˆå‰é¢å·²ç»åŠ å…¥ï¼‰<br>  æƒ…å†µb. åœ¨ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºä¹‹å‰è¿ç»­ <span class="hljs-number">6</span> çš„æ•°é‡å°±å·²ç»åˆ°è¾¾äº†ä¸Šé™ï¼Œé‚£ä¹ˆç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡º <span class="hljs-number">6</span> æ˜¯éæ³•çš„ï¼Œ<br>  è¿™ç§æƒ…å†µä¸‹çš„åºåˆ—æ•°ç›®å°±æ˜¯æˆ‘ä»¬æ­¥éª¤â‘¡ä¸­éœ€è¦å‡å»çš„æ•°é‡<br>  <br>  // æƒ…å†µa. ï¼ˆåˆæ³•çš„ï¼‰                            // æƒ…å†µb. ï¼ˆä¸åˆæ³•çš„ï¼‰<br>  // åºåˆ—  <span class="hljs-symbol">___</span>  <span class="hljs-symbol">___</span>   <span class="hljs-symbol">___</span>   <span class="hljs-number">6</span>   <span class="hljs-number">6</span>                // åºåˆ—  <span class="hljs-symbol">___</span>   <span class="hljs-number">6</span>    <span class="hljs-number">6</span>    <span class="hljs-number">6</span>   <span class="hljs-number">6</span><br>  // æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>     <span class="hljs-number">3</span>    <span class="hljs-number">4</span>   <span class="hljs-number">5</span>                // æ¬¡æ•°   <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span>   <span class="hljs-number">5</span><br><br>  ä»”ç»†åˆ†æä¸€ä¸‹æƒ…å†µ b.<br>  åœ¨ç¬¬ <span class="hljs-number">5</span> æ¬¡æ·å‡ºä¹‹å‰è¿ç»­ <span class="hljs-number">6</span> çš„æ•°é‡å°±å·²ç»åˆ°è¾¾äº†ä¸Šé™ï¼Œè¯´æ˜ç¬¬ <span class="hljs-number">2</span> æ¬¡ï¼Œç¬¬ <span class="hljs-number">3</span> æ¬¡ï¼Œç¬¬ <span class="hljs-number">4</span> æ¬¡æ·å‡ºçš„æ•°å­—ä¸€å®šéƒ½æ˜¯<span class="hljs-number">6</span>ï¼Œ<br>  è€Œä¸”ï¼Œç¬¬<span class="hljs-number">1</span>æ¬¡æ·å‡ºçš„æ•°å­—ä¸€å®šä¸æ˜¯<span class="hljs-number">6</span>ã€‚<br>  ç»“æœä¹Ÿå°±å¾ˆæ˜æ˜¾äº†å§ï¼Œç¬¬ <span class="hljs-number">1</span> æ¬¡ä¸æ˜¯ <span class="hljs-number">6</span> ï¼Œé‚£å°±æ˜¯ <span class="hljs-number">1</span>ï¼Œ<span class="hljs-number">2</span>ï¼Œ<span class="hljs-number">3</span>ï¼Œ<span class="hljs-number">4</span>ï¼Œ<span class="hljs-number">5</span> ä¸­çš„ä¸€ç§å‘—!!!<br>  éœ€è¦å‡å»çš„åºåˆ—æ•°é‡ä¸º: sum (dp[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + dp[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + dp[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>] + dp[<span class="hljs-number">1</span>][<span class="hljs-number">4</span>] + dp[<span class="hljs-number">1</span>][<span class="hljs-number">5</span>])<br><br>// ------------------------------------------------------------------------------------------------------------------<br>  <br>  å…¶ä»–çš„æ•°å­—<span class="hljs-number">1</span>ï¼Œ<span class="hljs-number">2</span>ï¼Œ<span class="hljs-number">3</span>ï¼Œ<span class="hljs-number">4</span>ï¼Œ<span class="hljs-number">5</span>å¯ä¾æ¬¡ç±»æ¨...<br><br>// ------------------------------------------------------------------------------------------------------------------<br><br>ä½œè€…ï¼šyexâ°<br>é“¾æ¥ï¼šhttps://leetcode.cn/problems/dice-roll-simulation/solutions/<span class="hljs-number">492200</span>/ni-bi-dong-chao-jian-dan-dong-tai-gui-hua-fu-za-du/<br>æ¥æºï¼šåŠ›æ‰£ï¼ˆ<span class="hljs-symbol">LeetCode</span>ï¼‰<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚<br></code></pre></td></tr></table></figure><p>tqlå‘œå‘œå‘œ</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br><br>    typedef long long ll;<br><br>    <span class="hljs-built_in">int</span> dieSimulator(<span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>, vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; rollMax) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">mod</span>=<span class="hljs-number">1</span>e9+<span class="hljs-number">7</span>;<br>        vector&lt;vector&lt;ll&gt;&gt; dp(<span class="hljs-built_in">n</span>+<span class="hljs-number">1</span>,vector&lt;ll&gt;(<span class="hljs-number">7</span>));<br>        for(<span class="hljs-built_in">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">6</span>;++j)<br>            dp[<span class="hljs-number">1</span>][j]=<span class="hljs-number">1</span>;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-built_in">n</span>;++i)<br>        &#123;<br>            for(<span class="hljs-built_in">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">6</span>;++j)<br>            &#123;<br>                ll <span class="hljs-built_in">t</span>=accumulate(dp[i-<span class="hljs-number">1</span>].begin(),dp[i-<span class="hljs-number">1</span>].end(),<span class="hljs-number">0</span>ll);<br>                <span class="hljs-built_in">int</span> idx=i-<span class="hljs-number">1</span>-rollMax[j-<span class="hljs-number">1</span>];<br>                <span class="hljs-built_in">if</span>(idx&gt;=<span class="hljs-number">1</span>)<br>                &#123;<br>                    <span class="hljs-built_in">t</span>=accumulate(dp[idx].begin(),dp[idx].end(),<span class="hljs-built_in">t</span>,[&amp;](ll a,ll b)&#123;<br>                        return a+<span class="hljs-built_in">mod</span>-b;<br>                    &#125;);<br>                    <span class="hljs-built_in">t</span>+=dp[idx][j];<br>                &#125;<br>                else <span class="hljs-built_in">if</span>(idx==<span class="hljs-number">0</span>)<br>                    <span class="hljs-built_in">t</span>-=<span class="hljs-number">1</span>;<br>                dp[i][j]=<span class="hljs-built_in">t</span>%<span class="hljs-built_in">mod</span>;<br>            &#125;<br>        &#125;<br>        return accumulate(dp[<span class="hljs-built_in">n</span>].begin(),dp[<span class="hljs-built_in">n</span>].end(),<span class="hljs-number">0</span>ll)%<span class="hljs-built_in">mod</span>;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ„é€ è¿ç»­å€¼</title>
    <link href="/2023/02/04/%E6%9E%84%E9%80%A0%E8%BF%9E%E7%BB%AD%E5%80%BC/"/>
    <url>/2023/02/04/%E6%9E%84%E9%80%A0%E8%BF%9E%E7%BB%AD%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9E%84%E9%80%A0%E8%BF%9E%E7%BB%AD%E5%80%BC">æ„é€ è¿ç»­å€¼</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ„é€ è¿ç»­å€¼"><a class="markdownIt-Anchor" href="#æ„é€ è¿ç»­å€¼"></a> æ„é€ è¿ç»­å€¼</h2><p><a href="https://leetcode.cn/problems/maximum-number-of-consecutive-values-you-can-make/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ coins ï¼Œå®ƒä»£è¡¨ä½ æ‹¥æœ‰çš„ n ä¸ªç¡¬å¸ã€‚ç¬¬ i ä¸ªç¡¬å¸çš„å€¼ä¸º coins[i] ã€‚å¦‚æœä½ ä»è¿™äº›ç¡¬å¸ä¸­é€‰å‡ºä¸€éƒ¨åˆ†ç¡¬å¸ï¼Œå®ƒä»¬çš„å’Œä¸º x ï¼Œé‚£ä¹ˆç§°ï¼Œä½ å¯ä»¥ æ„é€  å‡º x ã€‚</p><p>è¯·è¿”å›ä» 0 å¼€å§‹ï¼ˆåŒ…æ‹¬ 0 ï¼‰ï¼Œä½ æœ€å¤šèƒ½ æ„é€  å‡ºå¤šå°‘ä¸ªè¿ç»­æ•´æ•°ã€‚</p><p>ä½ å¯èƒ½æœ‰å¤šä¸ªç›¸åŒå€¼çš„ç¡¬å¸ã€‚</p><p>ç¤ºä¾‹:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šcoins = <span class="hljs-comment">[1,1,1,4]</span><br>è¾“å‡ºï¼š8<br>è§£é‡Šï¼šä½ å¯ä»¥å¾—åˆ°ä»¥ä¸‹è¿™äº›å€¼ï¼š<br>- 0ï¼šä»€ä¹ˆéƒ½ä¸å– <span class="hljs-comment">[]</span><br>- 1ï¼šå– <span class="hljs-comment">[1]</span><br>- 2ï¼šå– <span class="hljs-comment">[1,1]</span><br>- 3ï¼šå– <span class="hljs-comment">[1,1,1]</span><br>- 4ï¼šå– <span class="hljs-comment">[4]</span><br>- 5ï¼šå– <span class="hljs-comment">[4,1]</span><br>- 6ï¼šå– <span class="hljs-comment">[4,1,1]</span><br>- 7ï¼šå– <span class="hljs-comment">[4,1,1,1]</span><br>ä» 0 å¼€å§‹ï¼Œä½ å¯ä»¥æ„é€ å‡º 8 ä¸ªè¿ç»­æ•´æ•°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å°±æ˜¯æ„é€ ä»0å¼€å§‹çš„è¿ç»­æ•´æ•°çš„ä¸ªæ•°ï¼Œä»£ç åŠå…¶ç®€å•ï¼Œä½†æ€è·¯å¾ˆå¥½ï¼Œç¬¬ä¸€çœ¼çœ‹ä¸‹å»æˆ‘æƒ³ä¸åˆ°ğŸ˜¢ğŸ˜¢ğŸ˜¢ï¼Œtcl.</p><p>é¦–å…ˆæ€è€ƒï¼Œå¦‚æœæ•°ç»„ä¸­çš„è‹¥å¹²å…ƒç´ èƒ½æ„é€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">0 \sim x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ï¼Œé‚£ä¹ˆå½“åŠ å…¥äº†ä¸€ä¸ªå…ƒç´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>,èƒ½æ„é€ çš„èŒƒå›´å°±å˜æˆäº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mi>x</mi><mo>âˆª</mo><mi>k</mi><mo>âˆ¼</mo><mi>k</mi><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">0 \sim x \cup k \sim k+x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ï¼Œå½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>â‰¤</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k \le x+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>æ—¶ï¼Œä¸¤ä¸ªèŒƒå›´å°±åˆå¹¶ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mi>k</mi><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">0 \sim k+x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ã€‚å› æ­¤ï¼Œè¿™é“é¢˜ä¸­ï¼Œç”¨resè¡¨ç¤ºä¸‹ä¸€ä¸ªè¦æ„é€ çš„æ•°ï¼Œå…ˆå¯¹æ•°ç»„æ’åºï¼Œç„¶åä¾æ¬¡å–æ•°ç»„ä¸­çš„å…ƒç´ <code>i</code>ï¼Œå¦‚æœ<code>i&lt;=res</code>ï¼Œè¯´æ˜å¯æ„é€ çš„èŒƒå›´éœ€è¦æ‰©å¤§ï¼Œä¸‹ä¸€ä¸ªè¦æ„é€ çš„æ•°å˜ä¸º<code>res+i</code>ï¼Œç›´åˆ°<code>i&gt;res</code>ï¼Œè¯´æ˜æ­¤æ—¶å·²ç»æ— æ³•ç»§ç»­æ„é€ è¿ç»­çš„æ•´æ•°ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getMaximumConsecutive</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; coins)</span> </span>&#123;<br>        <span class="hljs-built_in">sort</span>(coins.<span class="hljs-built_in">begin</span>(),coins.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> i:coins)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&lt;=res)<br>                res+=i;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢œè‰²äº¤æ›¿æœ€çŸ­è·¯</title>
    <link href="/2023/02/02/%E9%A2%9C%E8%89%B2%E4%BA%A4%E6%9B%BF%E6%9C%80%E7%9F%AD%E8%B7%AF/"/>
    <url>/2023/02/02/%E9%A2%9C%E8%89%B2%E4%BA%A4%E6%9B%BF%E6%9C%80%E7%9F%AD%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%A2%9C%E8%89%B2%E4%BA%A4%E6%9B%BF%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF">é¢œè‰²äº¤æ›¿çš„æœ€çŸ­è·¯</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="é¢œè‰²äº¤æ›¿çš„æœ€çŸ­è·¯"><a class="markdownIt-Anchor" href="#é¢œè‰²äº¤æ›¿çš„æœ€çŸ­è·¯"></a> é¢œè‰²äº¤æ›¿çš„æœ€çŸ­è·¯</h2><p><a href="https://leetcode.cn/problems/shortest-path-with-alternating-colors/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ªæœ‰å‘å›¾ä¸­ï¼ŒèŠ‚ç‚¹åˆ†åˆ«æ ‡è®°ä¸º 0, 1, â€¦, n-1ã€‚å›¾ä¸­æ¯æ¡è¾¹ä¸ºçº¢è‰²æˆ–è€…è“è‰²ï¼Œä¸”å­˜åœ¨è‡ªç¯æˆ–å¹³è¡Œè¾¹ã€‚</p><p>red_edges ä¸­çš„æ¯ä¸€ä¸ª [i, j] å¯¹è¡¨ç¤ºä»èŠ‚ç‚¹ i åˆ°èŠ‚ç‚¹ j çš„çº¢è‰²æœ‰å‘è¾¹ã€‚ç±»ä¼¼åœ°ï¼Œblue_edges ä¸­çš„æ¯ä¸€ä¸ª [i, j] å¯¹è¡¨ç¤ºä»èŠ‚ç‚¹ i åˆ°èŠ‚ç‚¹ j çš„è“è‰²æœ‰å‘è¾¹ã€‚</p><p>è¿”å›é•¿åº¦ä¸º n çš„æ•°ç»„ answerï¼Œå…¶ä¸­ answer[X] æ˜¯ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ X çš„çº¢è‰²è¾¹å’Œè“è‰²è¾¹äº¤æ›¿å‡ºç°çš„æœ€çŸ­è·¯å¾„çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è·¯å¾„ï¼Œé‚£ä¹ˆ answer[x] = -1ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šn = <span class="hljs-number">3</span>, red_edges = <span class="hljs-string">[[0,1]]</span>, blue_edges = <span class="hljs-string">[[2,1]]</span><br>è¾“å‡ºï¼š[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>]<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ˜¯bfsçš„æ€æƒ³ï¼Œä¸€å¼€å§‹æˆ‘æƒ³çš„æ˜¯å§çº¢è‰²è¾¹å’Œè“è‰²è¾¹æ”¾åœ¨ä¸€ä¸ªå›¾å¤„ç†ï¼Œä½†æ˜¯è¿™æ ·åšçš„é—®é¢˜å°±æ˜¯åé¢æˆ‘ä¸ä¼šå¤„ç†ç¯è·¯çš„æƒ…å†µäº†ï¼Œè‡ªå·±ä¹Ÿæ™•äº†ï¼Œå‚è€ƒå¤§ä½¬çš„æ€è·¯åï¼Œæ‰è§£å†³ï¼Œå…¶å®çº¢è‰²è¾¹å’Œè“è‰²è¾¹åˆ†ä¸ºä¸¤ä¸ªå›¾ï¼Œæ¯ä¸ªè¾¹å¤„ç†åï¼Œé¢œè‰²å–åï¼Œç„¶åå»å¯¹åº”é¢œè‰²çš„å›¾é‡Œæ‰¾ä¸‹ä¸€æ¡è¾¹å³å¯ã€‚</p><p>é¦–å…ˆå°†èµ·ç‚¹ 0 å’Œèµ·ç‚¹è¾¹çš„é¢œè‰² 0 æˆ– 1 å…¥é˜Ÿï¼Œè¡¨ç¤ºä»èµ·ç‚¹å‡ºå‘ï¼Œä¸”å½“å‰æ˜¯çº¢è‰²æˆ–è“è‰²è¾¹ã€‚æ¥ä¸‹æ¥ï¼Œè¿›è¡Œ BFS ã€‚æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹<code>(u,clr)</code>ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„ç­”æ¡ˆè¿˜æœªæ›´æ–°ï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹çš„ç­”æ¡ˆæ›´æ–°ä¸ºå½“å‰å±‚æ•°<code>d</code>ï¼Œå³ <code>ans[i]=d</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å½“å‰è¾¹çš„é¢œè‰² <code>clr</code> å–åï¼Œå³å¦‚æœå½“å‰è¾¹ä¸ºçº¢è‰²ï¼Œåˆ™å°†å…¶å˜ä¸ºè“è‰²ï¼Œä¹‹åå–å‡ºé¢œè‰²å¯¹åº”çš„æ‰€æœ‰è¾¹ï¼Œå¦‚æœè¾¹çš„å¦ä¸€ç«¯èŠ‚ç‚¹æœªè¢«æœç´¢è¿‡ï¼Œåˆ™å°†å…¶å…¥é˜Ÿã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    queue&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; q;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">shortestAlternatingPaths</span><span class="hljs-params">(<span class="hljs-type">int</span> n, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; redEdges, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; blueEdges)</span> </span>&#123;<br>        vector&lt;vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&gt; <span class="hljs-built_in">edges</span>(<span class="hljs-number">2</span>, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;(n));<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; e : redEdges) <br>            edges[<span class="hljs-number">0</span>][e[<span class="hljs-number">0</span>]].<span class="hljs-built_in">push_back</span>(e[<span class="hljs-number">1</span>]);<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; e : blueEdges)<br>            edges[<span class="hljs-number">1</span>][e[<span class="hljs-number">0</span>]].<span class="hljs-built_in">push_back</span>(e[<span class="hljs-number">1</span>]);<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ans</span><span class="hljs-params">(n,<span class="hljs-number">-1</span>)</span></span>;<br>        vector&lt;vector&lt;<span class="hljs-type">bool</span>&gt;&gt; <span class="hljs-built_in">vis</span>(n,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt;(<span class="hljs-number">2</span>,<span class="hljs-literal">false</span>));<br>        <span class="hljs-type">int</span> d=<span class="hljs-number">0</span>;<br>        q.<span class="hljs-built_in">emplace</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>        q.<span class="hljs-built_in">emplace</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>        &#123;<br>            <span class="hljs-type">int</span> sz=q.<span class="hljs-built_in">size</span>();<br>            <span class="hljs-keyword">while</span>(sz--)<br>            &#123;<br>                <span class="hljs-type">int</span> u=q.<span class="hljs-built_in">front</span>().first;<br>                <span class="hljs-type">int</span> clr=q.<span class="hljs-built_in">front</span>().second;<br>                q.<span class="hljs-built_in">pop</span>();<br>                <span class="hljs-keyword">if</span>(ans[u]==<span class="hljs-number">-1</span>)<br>                    ans[u]=d;<br>                vis[u][clr]=<span class="hljs-literal">true</span>;<br>                clr^=<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span>&amp; v:edges[clr][u])<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(!vis[v][clr])<br>                        q.<span class="hljs-built_in">emplace</span>(v,clr);<br>                &#125;<br>            &#125;<br>            ++d;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¹³è¡¡æ•°ç»„æ–¹æ¡ˆæ•°</title>
    <link href="/2023/01/28/%E5%B9%B3%E8%A1%A1%E6%95%B0%E7%BB%84%E6%96%B9%E6%A1%88%E6%95%B0/"/>
    <url>/2023/01/28/%E5%B9%B3%E8%A1%A1%E6%95%B0%E7%BB%84%E6%96%B9%E6%A1%88%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%B9%B3%E8%A1%A1%E6%95%B0%E7%BB%84%E6%96%B9%E6%A1%88%E6%95%B0">å¹³è¡¡æ•°ç»„æ–¹æ¡ˆæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å¹³è¡¡æ•°ç»„æ–¹æ¡ˆæ•°"><a class="markdownIt-Anchor" href="#å¹³è¡¡æ•°ç»„æ–¹æ¡ˆæ•°"></a> å¹³è¡¡æ•°ç»„æ–¹æ¡ˆæ•°</h2><p><a href="https://leetcode.cn/problems/ways-to-make-a-fair-array/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ã€‚ä½ éœ€è¦é€‰æ‹© æ°å¥½ ä¸€ä¸ªä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰å¹¶åˆ é™¤å¯¹åº”çš„å…ƒç´ ã€‚è¯·æ³¨æ„å‰©ä¸‹å…ƒç´ çš„ä¸‹æ ‡å¯èƒ½ä¼šå› ä¸ºåˆ é™¤æ“ä½œè€Œå‘ç”Ÿæ”¹å˜ã€‚</p><p>æ¯”æ–¹è¯´ï¼Œå¦‚æœ nums = [6,1,7,4,1] ï¼Œé‚£ä¹ˆï¼š</p><p>é€‰æ‹©åˆ é™¤ä¸‹æ ‡ 1 ï¼Œå‰©ä¸‹çš„æ•°ç»„ä¸º nums = [6,7,4,1] ã€‚<br />é€‰æ‹©åˆ é™¤ä¸‹æ ‡ 2 ï¼Œå‰©ä¸‹çš„æ•°ç»„ä¸º nums = [6,1,4,1] ã€‚<br />é€‰æ‹©åˆ é™¤ä¸‹æ ‡ 4 ï¼Œå‰©ä¸‹çš„æ•°ç»„ä¸º nums = [6,1,7,4] ã€‚<br />å¦‚æœä¸€ä¸ªæ•°ç»„æ»¡è¶³å¥‡æ•°ä¸‹æ ‡å…ƒç´ çš„å’Œä¸å¶æ•°ä¸‹æ ‡å…ƒç´ çš„å’Œç›¸ç­‰ï¼Œè¯¥æ•°ç»„å°±æ˜¯ä¸€ä¸ª å¹³è¡¡æ•°ç»„ ã€‚</p><p>è¯·ä½ è¿”å›åˆ é™¤æ“ä½œåï¼Œå‰©ä¸‹çš„æ•°ç»„ nums æ˜¯ å¹³è¡¡æ•°ç»„ çš„ æ–¹æ¡ˆæ•° ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šnums = [2,1,6,4]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š<br>åˆ é™¤ä¸‹æ ‡<span class="hljs-number"> 0 </span>ï¼š[1,6,4] -&gt; å¶æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š1 +<span class="hljs-number"> 4 </span>=<span class="hljs-number"> 5 </span>ã€‚å¥‡æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š6 ã€‚ä¸å¹³è¡¡ã€‚<br>åˆ é™¤ä¸‹æ ‡<span class="hljs-number"> 1 </span>ï¼š[2,6,4] -&gt; å¶æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š2 +<span class="hljs-number"> 4 </span>=<span class="hljs-number"> 6 </span>ã€‚å¥‡æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š6 ã€‚å¹³è¡¡ã€‚<br>åˆ é™¤ä¸‹æ ‡<span class="hljs-number"> 2 </span>ï¼š[2,1,4] -&gt; å¶æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š2 +<span class="hljs-number"> 4 </span>=<span class="hljs-number"> 6 </span>ã€‚å¥‡æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š1 ã€‚ä¸å¹³è¡¡ã€‚<br>åˆ é™¤ä¸‹æ ‡<span class="hljs-number"> 3 </span>ï¼š[2,1,6] -&gt; å¶æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š2 +<span class="hljs-number"> 6 </span>=<span class="hljs-number"> 8 </span>ã€‚å¥‡æ•°å…ƒç´ ä¸‹æ ‡ä¸ºï¼š1 ã€‚ä¸å¹³è¡¡ã€‚<br>åªæœ‰ä¸€ç§è®©å‰©ä½™æ•°ç»„æˆä¸ºå¹³è¡¡æ•°ç»„çš„æ–¹æ¡ˆã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å¯¹äºä½ç½®<code>i</code>æ¥è¯´ï¼Œéœ€è¦ç»´æŠ¤4ä¸ªå˜é‡ <code>prej,preo,sufj,sufo</code>,åˆ†åˆ«è¡¨ç¤ºä½ç½®<code>i</code>ä¹‹å‰å¥‡æ•°ä¸‹æ ‡çš„æ•°ä¹‹å’Œï¼Œå¶æ•°ä¸‹æ ‡çš„æ•°ä¹‹å’Œï¼Œä»¥åŠä½ç½®<code>i</code>ä¹‹åå¥‡æ•°ä¸‹æ ‡çš„æ•°ä¹‹å’Œä¸å¶æ•°ä¸‹æ ‡çš„æ•°ä¹‹å’Œã€‚å½“ä½ç½®<code>i</code>å¤„çš„æ•°å­—è¢«å»æ‰åï¼Œåªéœ€åˆ¤æ–­<code>prej+sufo==preo+sufj</code>æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰åˆ™ç¬¦åˆè¦æ±‚ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int waysToMakeFair(vector&lt;int&gt;&amp; nums) &#123;<br>        int <span class="hljs-attribute">n</span>=nums.size();<br>        int <span class="hljs-attribute">prej</span>=0,preo=0,sufj=0,sufo=0;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&amp;1)<br>                sufj+=nums[i];<br>            <span class="hljs-keyword">else</span><br>                sufo+=nums[i];<br>        &#125;<br>        int <span class="hljs-attribute">res</span>=0;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&amp;1)<br>                <span class="hljs-attribute">sufj-</span>=nums[i];<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-attribute">sufo-</span>=nums[i];<br>            <span class="hljs-keyword">if</span>(prej+<span class="hljs-attribute">sufo</span>==preo+sufj)<br>                ++res;<br>            <span class="hljs-keyword">if</span>(i&amp;1)<br>                prej+=nums[i];<br>            <span class="hljs-keyword">else</span><br>                preo+=nums[i];<br>        &#125;<br>        return res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çŸ©é˜µè½¬æ¢åçš„ç§©</title>
    <link href="/2023/01/25/%E7%9F%A9%E9%98%B5%E8%BD%AC%E6%8D%A2%E5%90%8E%E7%9A%84%E7%A7%A9/"/>
    <url>/2023/01/25/%E7%9F%A9%E9%98%B5%E8%BD%AC%E6%8D%A2%E5%90%8E%E7%9A%84%E7%A7%A9/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%9F%A9%E9%98%B5%E8%BD%AC%E6%8D%A2%E5%90%8E%E7%9A%84%E7%A7%A9">çŸ©é˜µè½¬æ¢åçš„ç§©</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="çŸ©é˜µè½¬æ¢åçš„ç§©"><a class="markdownIt-Anchor" href="#çŸ©é˜µè½¬æ¢åçš„ç§©"></a> çŸ©é˜µè½¬æ¢åçš„ç§©</h2><p><a href="https://leetcode.cn/problems/rank-transform-of-a-matrix/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª m x n çš„çŸ©é˜µ matrix ï¼Œè¯·ä½ è¿”å›ä¸€ä¸ªæ–°çš„çŸ©é˜µ answer ï¼Œå…¶ä¸­ answer[row][col] æ˜¯ matrix[row][col] çš„ç§©ã€‚</p><p>æ¯ä¸ªå…ƒç´ çš„ ç§© æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªå…ƒç´ ç›¸å¯¹äºå…¶ä»–å…ƒç´ çš„å¤§å°å…³ç³»ï¼Œå®ƒæŒ‰ç…§å¦‚ä¸‹è§„åˆ™è®¡ç®—ï¼š</p><p>ç§©æ˜¯ä» 1 å¼€å§‹çš„ä¸€ä¸ªæ•´æ•°ã€‚<br />å¦‚æœä¸¤ä¸ªå…ƒç´  p å’Œ q åœ¨ åŒä¸€è¡Œ æˆ–è€… åŒä¸€åˆ— ï¼Œé‚£ä¹ˆï¼š<br />å¦‚æœ p &lt; q ï¼Œé‚£ä¹ˆ rank(p) &lt; rank(q)<br />å¦‚æœ p == q ï¼Œé‚£ä¹ˆ rank(p) == rank(q)<br />å¦‚æœ p &gt; q ï¼Œé‚£ä¹ˆ rank(p) &gt; rank(q)<br />ç§© éœ€è¦è¶Š å° è¶Šå¥½ã€‚<br />é¢˜ç›®ä¿è¯æŒ‰ç…§ä¸Šé¢è§„åˆ™ answer æ•°ç»„æ˜¯å”¯ä¸€çš„ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šmatrix = <span class="hljs-comment">[<span class="hljs-comment">[1,2]</span>,<span class="hljs-comment">[3,4]</span>]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[<span class="hljs-comment">[1,2]</span>,<span class="hljs-comment">[2,3]</span>]</span><br>è§£é‡Šï¼š<br>matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span> çš„ç§©ä¸º 1 ï¼Œå› ä¸ºå®ƒæ˜¯æ‰€åœ¨è¡Œå’Œåˆ—çš„æœ€å°æ•´æ•°ã€‚<br>matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[1]</span> çš„ç§©ä¸º 2 ï¼Œå› ä¸º matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[1]</span> &gt; matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span> ä¸” matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span> çš„ç§©ä¸º 1 ã€‚<br>matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[0]</span> çš„ç§©ä¸º 2 ï¼Œå› ä¸º matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[0]</span> &gt; matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span> ä¸” matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[0]</span> çš„ç§©ä¸º 1 ã€‚<br>matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[1]</span> çš„ç§©ä¸º 3 ï¼Œå› ä¸º matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[1]</span> &gt; matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[1]</span>ï¼Œ matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[1]</span> &gt; matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[0]</span> ä¸” matrix<span class="hljs-comment">[0]</span><span class="hljs-comment">[1]</span> å’Œ matrix<span class="hljs-comment">[1]</span><span class="hljs-comment">[0]</span> çš„ç§©éƒ½ä¸º 2 ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œè¦ç”¨åˆ°å¹¶æŸ¥é›†+æ‹“æ‰‘æ’åºï¼Œçœ‹äº†é¢˜è§£ä¹Ÿå¾ˆå‹‰å¼ºçš„å†™ä¸‹æ¥ğŸ˜¢</p><p>ä¸»è¦çš„æ€è·¯å°±æ˜¯ï¼Œç”¨å“ˆå¸Œè¡¨æŠŠæ¯è¡Œç›¸åŒå…ƒç´ çš„ä¸‹æ ‡è®°å½•ä¸‹æ¥ï¼Œç„¶åç”¨å¹¶æŸ¥é›†æŠŠç›¸åŒå…ƒç´ çš„ä¸‹æ ‡è¿æ¥èµ·æ¥ï¼Œä¸‹é¢å°±æ˜¯å»ºå›¾ï¼Œæˆ‘ä»¬å¸Œæœ›æ„å»ºè¿™æ ·çš„å›¾ï¼Œä¸€æ¡è¾¹<code>u-&gt;v</code>ä¸­ï¼Œ<code>u</code>æ˜¯è¾ƒå°çš„å…ƒç´ çš„é›†åˆçš„<code>root</code>ï¼Œ<code>v</code>æ˜¯è¾ƒå¤§çš„å…ƒç´ çš„é›†åˆçš„<code>root</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå»ºç«‹çš„æ˜¯ä¸åŒé›†åˆé—´çš„æ‹“æ‰‘å›¾ï¼Œç„¶åé€šè¿‡æ‹“æ‰‘æ’åºï¼Œä¸ºæ¯ä¸ªé›†åˆçš„æ ¹èŠ‚ç‚¹è®¾ç½®å®ƒçš„ â€œç§©â€ï¼Œç„¶åæŠŠåŒä¸€é›†åˆçš„å…ƒç´ çš„å€¼è®¾ç½®ä¸ºé›†åˆå†…æ ¹èŠ‚ç‚¹çš„å€¼å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> unionset</span><br><span class="hljs-class">&#123;</span><br><span class="hljs-class">    vector&lt;int&gt; vset,sz;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    unionset(<span class="hljs-title">int</span> <span class="hljs-title">n</span>)</span><br><span class="hljs-class">    &#123;</span><br><span class="hljs-class">        vset=vector&lt;int&gt; (<span class="hljs-title">n</span>);</span><br><span class="hljs-class">        sz=vector&lt;int&gt; (<span class="hljs-title">n</span>,1);</span><br><span class="hljs-class">        iota(<span class="hljs-title">vset</span>.<span class="hljs-title">begin</span>(),vset.end(),0);</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">    int find(<span class="hljs-title">int</span> <span class="hljs-title">a</span>)</span><br><span class="hljs-class">    &#123;</span><br><span class="hljs-class">        if(<span class="hljs-title">vset</span>[<span class="hljs-title">a</span>]==<span class="hljs-title">a</span>)</span><br><span class="hljs-class">            return a;</span><br><span class="hljs-class">        return vset[a]=find(<span class="hljs-title">vset</span>[<span class="hljs-title">a</span>]);</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">    void con(<span class="hljs-title">int</span> <span class="hljs-title">a</span>,<span class="hljs-title">int</span> <span class="hljs-title">b</span>)</span><br><span class="hljs-class">    &#123;</span><br><span class="hljs-class">        int x=find(<span class="hljs-title">a</span>);</span><br><span class="hljs-class">        int y=find(<span class="hljs-title">b</span>);</span><br><span class="hljs-class">        if(<span class="hljs-title">x</span>!=<span class="hljs-title">y</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            if(<span class="hljs-title">sz</span>[<span class="hljs-title">x</span>]&gt;<span class="hljs-title">sz</span>[<span class="hljs-title">y</span>])</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                vset[y]=x;</span><br><span class="hljs-class">                sz[x]+=sz[y];</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">            else</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                vset[x]=y;</span><br><span class="hljs-class">                sz[y]+=sz[x];</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Solution</span> &#123;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    vector&lt;vector&lt;int&gt;&gt; matrixRankTransform(<span class="hljs-title">vector</span>&lt;<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;&gt;&amp; <span class="hljs-title">matrix</span>) &#123;</span><br><span class="hljs-class">        int n=matrix.size(),m=matrix[0].size();</span><br><span class="hljs-class">        unionset uset(<span class="hljs-title">n</span>*<span class="hljs-title">m</span>);</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            map&lt;int,vector&lt;int&gt;&gt; mp;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">                mp[matrix[i][j]].emplace_back(<span class="hljs-title">i</span>*<span class="hljs-title">m</span>+<span class="hljs-title">j</span>);</span><br><span class="hljs-class">            for(<span class="hljs-title">auto</span> &amp;[<span class="hljs-title">num</span>,<span class="hljs-title">vec</span>]:<span class="hljs-title">mp</span>)//å°†æ¯è¡Œç›¸åŒå…ƒç´ connect</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                for(<span class="hljs-title">int</span> <span class="hljs-title">k</span>=0;<span class="hljs-title">k</span>+1&lt;<span class="hljs-title">vec</span>.<span class="hljs-title">size</span>();++k)</span><br><span class="hljs-class">                    uset.con(<span class="hljs-title">vec</span>[<span class="hljs-title">k</span>],<span class="hljs-title">vec</span>[<span class="hljs-title">k</span>+1]);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            map&lt;int,vector&lt;int&gt;&gt; mp;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">                mp[matrix[i][j]].emplace_back(<span class="hljs-title">i</span>*<span class="hljs-title">m</span>+<span class="hljs-title">j</span>);</span><br><span class="hljs-class">            for(<span class="hljs-title">auto</span> &amp;[<span class="hljs-title">num</span>,<span class="hljs-title">vec</span>]:<span class="hljs-title">mp</span>)//å°†æ¯åˆ—ç›¸åŒå…ƒç´ connect</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                for(<span class="hljs-title">int</span> <span class="hljs-title">k</span>=0;<span class="hljs-title">k</span>+1&lt;<span class="hljs-title">vec</span>.<span class="hljs-title">size</span>();++k)</span><br><span class="hljs-class">                    uset.con(<span class="hljs-title">vec</span>[<span class="hljs-title">k</span>],<span class="hljs-title">vec</span>[<span class="hljs-title">k</span>+1]);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        vector&lt;vector&lt;int&gt;&gt; adj(<span class="hljs-title">n</span>*<span class="hljs-title">m</span>);</span><br><span class="hljs-class">        vector&lt;int&gt; in(<span class="hljs-title">n</span>*<span class="hljs-title">m</span>);</span><br><span class="hljs-class">        //å»ºå›¾</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            vector&lt;pair&lt;int,int&gt;&gt; v(<span class="hljs-title">m</span>);</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">                v[j]=&#123;matrix[i][j],j&#125;;</span><br><span class="hljs-class">            sort(<span class="hljs-title">v</span>.<span class="hljs-title">begin</span>(),v.end());</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>+1&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">v</span>[<span class="hljs-title">j</span>].<span class="hljs-title">first</span>!=<span class="hljs-title">v</span>[<span class="hljs-title">j</span>+1].<span class="hljs-title">first</span>)</span><br><span class="hljs-class">                &#123;</span><br><span class="hljs-class">                    int uu=uset.find(<span class="hljs-title">i</span>*<span class="hljs-title">m</span>+<span class="hljs-title">v</span>[<span class="hljs-title">j</span>].<span class="hljs-title">second</span>);</span><br><span class="hljs-class">                    int vv=uset.find(<span class="hljs-title">i</span>*<span class="hljs-title">m</span>+<span class="hljs-title">v</span>[<span class="hljs-title">j</span>+1].<span class="hljs-title">second</span>);</span><br><span class="hljs-class">                    adj[uu].emplace_back(<span class="hljs-title">vv</span>);</span><br><span class="hljs-class">                    ++in[vv];</span><br><span class="hljs-class">                &#125;</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            vector&lt;pair&lt;int,int&gt;&gt; v(<span class="hljs-title">n</span>);</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">                v[i]=&#123;matrix[i][j],i&#125;;</span><br><span class="hljs-class">            sort(<span class="hljs-title">v</span>.<span class="hljs-title">begin</span>(),v.end());</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>+1&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">v</span>[<span class="hljs-title">i</span>].<span class="hljs-title">first</span>!=<span class="hljs-title">v</span>[<span class="hljs-title">i</span>+1].<span class="hljs-title">first</span>)</span><br><span class="hljs-class">                &#123;</span><br><span class="hljs-class">                    int uu=uset.find(<span class="hljs-title">v</span>[<span class="hljs-title">i</span>].<span class="hljs-title">second</span>*<span class="hljs-title">m</span>+<span class="hljs-title">j</span>);</span><br><span class="hljs-class">                    int vv=uset.find(<span class="hljs-title">v</span>[<span class="hljs-title">i</span>+1].<span class="hljs-title">second</span>*<span class="hljs-title">m</span>+<span class="hljs-title">j</span>);</span><br><span class="hljs-class">                    adj[uu].emplace_back(<span class="hljs-title">vv</span>);</span><br><span class="hljs-class">                    ++in[vv];</span><br><span class="hljs-class">                &#125;</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        vector&lt;int&gt; ans(<span class="hljs-title">n</span>*<span class="hljs-title">m</span>,1);</span><br><span class="hljs-class">        queue&lt;int&gt; q;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>*<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            if(<span class="hljs-title">uset</span>.<span class="hljs-title">find</span>(<span class="hljs-title">i</span>)==i&amp;&amp;in[i]==0)</span><br><span class="hljs-class">                q.emplace(<span class="hljs-title">i</span>);</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        while(!<span class="hljs-title">q</span>.<span class="hljs-title">empty</span>())</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            int u=q.front();</span><br><span class="hljs-class">            q.pop();</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> &amp;<span class="hljs-title">v</span>:<span class="hljs-title">adj</span>[<span class="hljs-title">u</span>])</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                ans[v]=ans[u]+1;</span><br><span class="hljs-class">                <span class="hljs-comment">--in[v];</span></span><br><span class="hljs-class">                if(<span class="hljs-title">in</span>[<span class="hljs-title">v</span>]==0)</span><br><span class="hljs-class">                    q.emplace(<span class="hljs-title">v</span>);</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        vector&lt;vector&lt;int&gt;&gt; res(<span class="hljs-title">n</span>,<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt; (<span class="hljs-title">m</span>));</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                res[i][j]=ans[uset.find(<span class="hljs-title">i</span>*<span class="hljs-title">m</span>+<span class="hljs-title">j</span>)];</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        return res;</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å°ä¾§è·³æ¬¡æ•°</title>
    <link href="/2023/01/21/%E6%9C%80%E5%B0%8F%E4%BE%A7%E8%B7%B3%E6%AC%A1%E6%95%B0/"/>
    <url>/2023/01/21/%E6%9C%80%E5%B0%8F%E4%BE%A7%E8%B7%B3%E6%AC%A1%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%B0%8F%E4%BE%A7%E8%B7%B3%E6%AC%A1%E6%95%B0">æœ€å°ä¾§è·³æ¬¡æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å°ä¾§è·³æ¬¡æ•°"><a class="markdownIt-Anchor" href="#æœ€å°ä¾§è·³æ¬¡æ•°"></a> æœ€å°ä¾§è·³æ¬¡æ•°</h2><p><a href="https://leetcode.cn/problems/minimum-sideway-jumps/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„ 3 è·‘é“é“è·¯ ï¼Œå®ƒæ€»å…±åŒ…å« n + 1 ä¸ª ç‚¹ ï¼Œç¼–å·ä¸º 0 åˆ° n ã€‚ä¸€åªé’è›™ä» 0 å·ç‚¹ç¬¬äºŒæ¡è·‘é“ å‡ºå‘ ï¼Œå®ƒæƒ³è¦è·³åˆ°ç‚¹ n å¤„ã€‚ç„¶è€Œé“è·¯ä¸Šå¯èƒ½æœ‰ä¸€äº›éšœç¢ã€‚</p><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ obstacles ï¼Œå…¶ä¸­ obstacles[i] ï¼ˆå–å€¼èŒƒå›´ä» 0 åˆ° 3ï¼‰è¡¨ç¤ºåœ¨ç‚¹ i å¤„çš„ obstacles[i] è·‘é“ä¸Šæœ‰ä¸€ä¸ªéšœç¢ã€‚å¦‚æœ obstacles[i] == 0 ï¼Œé‚£ä¹ˆç‚¹ i å¤„æ²¡æœ‰éšœç¢ã€‚ä»»ä½•ä¸€ä¸ªç‚¹çš„ä¸‰æ¡è·‘é“ä¸­ æœ€å¤šæœ‰ä¸€ä¸ª éšœç¢ã€‚</p><p>æ¯”æ–¹è¯´ï¼Œå¦‚æœ obstacles[2] == 1 ï¼Œé‚£ä¹ˆè¯´æ˜åœ¨ç‚¹ 2 å¤„è·‘é“ 1 æœ‰éšœç¢ã€‚<br />è¿™åªé’è›™ä»ç‚¹ i è·³åˆ°ç‚¹ i + 1 ä¸”è·‘é“ä¸å˜çš„å‰ææ˜¯ç‚¹ i + 1 çš„åŒä¸€è·‘é“ä¸Šæ²¡æœ‰éšœç¢ã€‚ä¸ºäº†èº²é¿éšœç¢ï¼Œè¿™åªé’è›™ä¹Ÿå¯ä»¥åœ¨ åŒä¸€ä¸ª ç‚¹å¤„ ä¾§è·³ åˆ° å¦å¤–ä¸€æ¡ è·‘é“ï¼ˆè¿™ä¸¤æ¡è·‘é“å¯ä»¥ä¸ç›¸é‚»ï¼‰ï¼Œä½†å‰ææ˜¯è·³è¿‡å»çš„è·‘é“è¯¥ç‚¹å¤„æ²¡æœ‰éšœç¢ã€‚</p><p>æ¯”æ–¹è¯´ï¼Œè¿™åªé’è›™å¯ä»¥ä»ç‚¹ 3 å¤„çš„è·‘é“ 3 è·³åˆ°ç‚¹ 3 å¤„çš„è·‘é“ 1 ã€‚<br />è¿™åªé’è›™ä»ç‚¹ 0 å¤„è·‘é“ 2 å‡ºå‘ï¼Œå¹¶æƒ³åˆ°è¾¾ç‚¹ n å¤„çš„ ä»»ä¸€è·‘é“ ï¼Œè¯·ä½ è¿”å› æœ€å°‘ä¾§è·³æ¬¡æ•° ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’ï¼Œç”¨æ•°ç»„<code>d[j]</code>è¡¨ç¤ºå½“å‰ä½ç½®åœ¨jè·‘é“ä¸Šæœ€çŸ­ä¾§è·³æ¬¡æ•°ï¼Œå¯¹äºæ¯ä¸€ä¸ªä½ç½®iï¼Œå…ˆæ‰¾å‡º<code>i-1</code>ä½ç½®3ä¸ªè·‘é“ä¸­æœ€å°<code>d[j]</code>ï¼Œè®°ä¸ºcnt,ç„¶åç”¨<code>d[j]=min(d[j],cnt+1)</code>è¿›è¡Œæ›´æ–°å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    int minSideJumps(vector&lt;int&gt;&amp; obstacles) &#123;<br>        int <span class="hljs-attribute">inf</span>=0x3f3f3f3f;<br>        int <span class="hljs-attribute">n</span>=obstacles.size()-1;<br>        int d[3]=&#123;1,0,1&#125;;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=1;i&lt;=n;++i)<br>        &#123;<br>            int <span class="hljs-attribute">cnt</span>=inf;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;3;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-attribute">j</span>==obstacles[i]-1)<br>                    d[j]=inf;<br>                <span class="hljs-keyword">else</span><br>                    <span class="hljs-attribute">cnt</span>=min(cnt,d[j]);<br>            &#125;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;3;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(j!=obstacles[i]-1)<br>                    d[j]=min(cnt+1,d[j]);<br>            &#125;<br>        &#125;<br>        return *min_element(d,d+3);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§å…¬çº¦æ•°çš„ä¸ªæ•°</title>
    <link href="/2023/01/14/%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0%E7%9A%84%E4%B8%AA%E6%95%B0/"/>
    <url>/2023/01/14/%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å¤§å…¬çº¦æ•°çš„ä¸ªæ•°"><a class="markdownIt-Anchor" href="#æœ€å¤§å…¬çº¦æ•°çš„ä¸ªæ•°"></a> æœ€å¤§å…¬çº¦æ•°çš„ä¸ªæ•°</h2><p><a href="">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªç”±æ­£æ•´æ•°ç»„æˆçš„æ•°ç»„ nums ã€‚</p><p>æ•°å­—åºåˆ—çš„ æœ€å¤§å…¬çº¦æ•° å®šä¹‰ä¸ºåºåˆ—ä¸­æ‰€æœ‰æ•´æ•°çš„å…±æœ‰çº¦æ•°ä¸­çš„æœ€å¤§æ•´æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œåºåˆ— [4,6,16] çš„æœ€å¤§å…¬çº¦æ•°æ˜¯ 2 ã€‚<br />æ•°ç»„çš„ä¸€ä¸ª å­åºåˆ— æœ¬è´¨æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå¯ä»¥é€šè¿‡åˆ é™¤æ•°ç»„ä¸­çš„æŸäº›å…ƒç´ ï¼ˆæˆ–è€…ä¸åˆ é™¤ï¼‰å¾—åˆ°ã€‚</p><p>ä¾‹å¦‚ï¼Œ[2,5,10] æ˜¯ [1,2,1,2,4,1,5,10] çš„ä¸€ä¸ªå­åºåˆ—ã€‚<br />è®¡ç®—å¹¶è¿”å› nums çš„æ‰€æœ‰ éç©º å­åºåˆ—ä¸­ ä¸åŒ æœ€å¤§å…¬çº¦æ•°çš„ æ•°ç›® ã€‚</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šnums = [6,10,3]<br>è¾“å‡ºï¼š5<br>è§£é‡Šï¼šä¸åŒçš„æœ€å¤§å…¬çº¦æ•°ä¸º<span class="hljs-number"> 6 </span>ã€10 ã€3 ã€2 å’Œ<span class="hljs-number"> 1 </span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å‚è€ƒäº†å¤§ä½¬çš„æ€è·¯ï¼Œæšä¸¾<code>1~maxval</code>ä¹‹é—´çš„æ•°ä½œä¸ºæœ€å¤§å…¬çº¦æ•°çš„å€æ•°ï¼Œä¾‹å¦‚[1,2,3,â€¦]ï¼Œ[2,4,6,â€¦]ï¼Œå½“æŸä¸ªæ•°åœ¨numsä¸­æ—¶ï¼Œæ›´æ–°è¯¥å­åºåˆ—çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå¦‚æœå¾ªç¯ç»“æŸæœ€å¤§å…¬çº¦æ•°ç­‰äºå¼€å§‹æ—¶çš„å€¼ï¼Œåˆ™<code>++ans</code>ï¼Œå¯ä»¥é€šè¿‡ä»£ç å¸®åŠ©ç†è§£ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">countDifferentSubsequenceGCDs</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> maxv=*<span class="hljs-built_in">max_element</span>(nums.<span class="hljs-built_in">begin</span>(),nums.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">vis</span><span class="hljs-params">(maxv+<span class="hljs-number">1</span>,<span class="hljs-literal">false</span>)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> &amp;t:nums)<br>            vis[t]=<span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=maxv;++i)<br>        &#123;<br>            <span class="hljs-type">int</span> t=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i;j&lt;=maxv&amp;&amp;t!=i;j+=i)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(vis[j]==<span class="hljs-literal">true</span>)<br>                    t=<span class="hljs-built_in">gcd</span>(t,j);<br>            &#125;<br>            <span class="hljs-keyword">if</span>(t==i)<br>                ++ans;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç ´è§£ä¿é™©ç®±</title>
    <link href="/2023/01/10/%E7%A0%B4%E8%A7%A3%E4%BF%9D%E9%99%A9%E7%AE%B1/"/>
    <url>/2023/01/10/%E7%A0%B4%E8%A7%A3%E4%BF%9D%E9%99%A9%E7%AE%B1/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%A0%B4%E8%A7%A3%E4%BF%9D%E9%99%A9%E7%AE%B1">ç ´è§£ä¿é™©ç®±</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç ´è§£ä¿é™©ç®±"><a class="markdownIt-Anchor" href="#ç ´è§£ä¿é™©ç®±"></a> ç ´è§£ä¿é™©ç®±</h2><p><a href="https://leetcode.cn/problems/cracking-the-safe/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>There is a safe protected by a password. The password is a sequence of n digits where each digit can be in the range [0, k - 1].</p><p>The safe has a peculiar way of checking the password. When you enter in a sequence, it checks the most recent n digits that were entered each time you type a digit.</p><p>For example, the correct password is â€œ345â€ and you enter in â€œ012345â€:<br />After typing 0, the most recent 3 digits is â€œ0â€, which is incorrect.<br />After typing 1, the most recent 3 digits is â€œ01â€, which is incorrect.<br />After typing 2, the most recent 3 digits is â€œ012â€, which is incorrect.<br />After typing 3, the most recent 3 digits is â€œ123â€, which is incorrect.<br />After typing 4, the most recent 3 digits is â€œ234â€, which is incorrect.<br />After typing 5, the most recent 3 digits is â€œ345â€, which is correct and the safe unlocks.<br />Return any string of minimum length that will unlock the safe at some point of entering it.</p><p>exampleï¼š</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">Input:</span> n = <span class="hljs-number">2</span>, k = <span class="hljs-number">2</span><br><span class="hljs-symbol">Output:</span> <span class="hljs-string">&quot;01100&quot;</span><br><span class="hljs-symbol">Explanation:</span> <span class="hljs-keyword">For</span> <span class="hljs-keyword">each</span> possible password:<br>- <span class="hljs-string">&quot;00&quot;</span> <span class="hljs-built_in">is</span> typed <span class="hljs-keyword">in</span> starting <span class="hljs-keyword">from</span> the <span class="hljs-number">4</span>th digit.<br>- <span class="hljs-string">&quot;01&quot;</span> <span class="hljs-built_in">is</span> typed <span class="hljs-keyword">in</span> starting <span class="hljs-keyword">from</span> the <span class="hljs-number">1s</span>t digit.<br>- <span class="hljs-string">&quot;10&quot;</span> <span class="hljs-built_in">is</span> typed <span class="hljs-keyword">in</span> starting <span class="hljs-keyword">from</span> the <span class="hljs-number">3</span>rd digit.<br>- <span class="hljs-string">&quot;11&quot;</span> <span class="hljs-built_in">is</span> typed <span class="hljs-keyword">in</span> starting <span class="hljs-keyword">from</span> the <span class="hljs-number">2</span>nd digit.<br>Thus <span class="hljs-string">&quot;01100&quot;</span> will unlock the safe. <span class="hljs-string">&quot;01100&quot;</span>, <span class="hljs-string">&quot;10011&quot;</span>, <span class="hljs-built_in">and</span> <span class="hljs-string">&quot;11001&quot;</span> would also unlock the safe.<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é¢˜å¾ˆå¤§ä¸€éƒ¨åˆ†éš¾åº¦åœ¨äºè¯»é¢˜ï¼Œä¸­æ–‡é¢˜ç›®æè¿°å®åœ¨æ˜¯å¤ªå·æ‡’äº†ï¼Œå·®è¯„!!!ğŸ˜ <br />æ‰€ä»¥è¿™é‡Œé¢˜ç›®æè¿°ç»™è‹±æ–‡çš„ğŸ±</p><p>é¢˜æ„æ˜¯è¯´ï¼Œç»™ä¸€ä¸ªkå€¼ï¼Œç„¶åæœ‰ä¸€ä¸ªnä½çš„å¯†ç ï¼Œå¯†ç çš„æ¯ä¸€ä½æ¥è‡ª<code>0~k-1</code>ä¹‹é—´ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²çš„ånä½æ˜¯å¯èƒ½çš„å¯†ç ã€‚</p><p>é‚£ä¹ˆå¯†ç åˆ°åº•æ˜¯æ€ä¹ˆè§„å®šçš„å‘¢ï¼Ÿ å¯†ç å…¶å®æ˜¯nä½æ•°å­—çš„ä»»æ„æ’åˆ—ï¼Œæ¯”å¦‚<code>k=5,n=3</code>ï¼Œå¦‚æœ3ä½å–çš„æ˜¯<code>012</code>ï¼Œé‚£ä¹ˆå¯†ç å¯èƒ½å°±æ˜¯<code>000,001,002,010,011,012,021,022...,222</code>;å¦‚æœ3ä½å–çš„æ˜¯<code>123</code>,é‚£ä¹ˆå¯†ç å¯èƒ½æ˜¯<code>111,112,113,121,122,123....</code>ï¼Œå¯¹äº<code>k=5,n=3</code>çš„æƒ…å†µ,næ¯ä¸€ä½éƒ½å¯ä»¥å–<code>0,1,2,3,4</code>,æ‰€ä»¥æ»¡è¶³æ¡ä»¶çš„å¯†ç ä¸€å…±æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>k</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">k^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>ä¸ª</p><p>è¦è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†æ‰€æœ‰å¯èƒ½çš„å¯†ç ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æ„é€ å¯†ç ç»„æˆç­”æ¡ˆ<br />é€šè¿‡ä»£ç å¯ä»¥æ›´å¥½çš„ç†è§£æ€è·¯ <s>(å…¶å®æ˜¯ä¸æƒ³æ‰“å­—äº†ğŸ¶)</s></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    unordered_set&lt;<span class="hljs-built_in">string</span>&gt; st;<br>    <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">crackSafe</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n, <span class="hljs-built_in">int</span> k</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> cnt=pow(k,n);<br>        <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">ans</span>(<span class="hljs-params">n,<span class="hljs-string">&#x27;0&#x27;</span></span>)</span>;<br>        st.insert(ans);<br>        <span class="hljs-built_in">string</span> t=ans;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;cnt<span class="hljs-number">-1</span>;++i)<br>        &#123;<br>            t.erase(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=k<span class="hljs-number">-1</span>;j&gt;=<span class="hljs-number">0</span>;--j)<br>            &#123;<br>                t+=j+<span class="hljs-string">&#x27;0&#x27;</span>;<br>                <span class="hljs-keyword">if</span>(!st.count(t))<br>                &#123;<br>                    st.insert(t);<br>                    ans+=j+<span class="hljs-string">&#x27;0&#x27;</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                    t.pop_back();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å‡ä¸º0çš„æœ€å°æ“ä½œæ•°</title>
    <link href="/2023/01/07/%E5%87%8F%E4%B8%BA0%E7%9A%84%E6%9C%80%E5%B0%8F%E6%93%8D%E4%BD%9C%E6%95%B0/"/>
    <url>/2023/01/07/%E5%87%8F%E4%B8%BA0%E7%9A%84%E6%9C%80%E5%B0%8F%E6%93%8D%E4%BD%9C%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%87%8F%E4%B8%BA0%E7%9A%84%E6%9C%80%E5%B0%8F%E6%93%8D%E4%BD%9C%E6%95%B0">å‡ä¸º0çš„æœ€å°æ“ä½œæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å‡ä¸º0çš„æœ€å°æ“ä½œæ•°"><a class="markdownIt-Anchor" href="#å‡ä¸º0çš„æœ€å°æ“ä½œæ•°"></a> å‡ä¸º0çš„æœ€å°æ“ä½œæ•°</h2><p><a href="https://leetcode.cn/problems/minimum-operations-to-reduce-x-to-zero/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° x ã€‚æ¯ä¸€æ¬¡æ“ä½œæ—¶ï¼Œä½ åº”å½“ç§»é™¤æ•°ç»„ nums æœ€å·¦è¾¹æˆ–æœ€å³è¾¹çš„å…ƒç´ ï¼Œç„¶åä» x ä¸­å‡å»è¯¥å…ƒç´ çš„å€¼ã€‚è¯·æ³¨æ„ï¼Œéœ€è¦ ä¿®æ”¹ æ•°ç»„ä»¥ä¾›æ¥ä¸‹æ¥çš„æ“ä½œä½¿ç”¨ã€‚</p><p>å¦‚æœå¯ä»¥å°† x æ°å¥½ å‡åˆ° 0 ï¼Œè¿”å› æœ€å°æ“ä½œæ•° ï¼›å¦åˆ™ï¼Œè¿”å› -1 ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">è¾“å…¥ï¼šnums <span class="hljs-operator">=</span> [<span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span>]<span class="hljs-punctuation">,</span> <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šæœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯ç§»é™¤åä¸¤ä¸ªå…ƒç´ ï¼Œå°† <span class="hljs-keyword">x</span> å‡åˆ° <span class="hljs-number">0</span> ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŒæŒ‡é’ˆï¼Œé¦–å…ˆè®¡ç®—å°äº<code>x</code>çš„æœ€é•¿åç¼€é•¿åº¦ï¼Œç„¶åä¾æ¬¡ä»å·¦å‘å³åŠ å…¥å·¦è¾¹å…ƒç´ ï¼Œæ¯åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå°±å°è¯•å‡å°‘åç¼€é•¿åº¦ï¼Œå½“å‰ç¼€åç¼€çš„å…ƒç´ å’Œç­‰äº<code>x</code>æ—¶æ›´æ–°<code>ans</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> minOperations(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums, <span class="hljs-built_in">int</span> x) &#123;<br>        <span class="hljs-built_in">int</span> n=nums.size();<br>        <span class="hljs-built_in">int</span> <span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>,r=n;<br>        <span class="hljs-keyword">while</span>(r&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">sum</span>+nums[r<span class="hljs-number">-1</span>]&lt;=x)<br>            <span class="hljs-keyword">sum</span>+=nums[--r];<br>        <span class="hljs-keyword">if</span>(r==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">sum</span>&lt;x)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-keyword">sum</span>==x?n-r:INT_MAX;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>;l&lt;n;++l)<br>        &#123;<br>            <span class="hljs-keyword">sum</span>+=nums[l];<br>            <span class="hljs-keyword">while</span>(r&lt;n&amp;&amp;<span class="hljs-keyword">sum</span>&gt;x)<span class="hljs-comment">//å‡å°‘åç¼€</span><br>                <span class="hljs-keyword">sum</span>-=nums[r++];<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">sum</span>&gt;x)<span class="hljs-comment">//å‰ç¼€è¿‡å¤§</span><br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">sum</span>==x)<br>                ans=min(ans,l+<span class="hljs-number">1</span>+n-r);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans&gt;n ? <span class="hljs-number">-1</span>:ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è€ƒåœºå°±åº§</title>
    <link href="/2022/12/30/%E8%80%83%E5%9C%BA%E5%B0%B1%E5%BA%A7/"/>
    <url>/2022/12/30/%E8%80%83%E5%9C%BA%E5%B0%B1%E5%BA%A7/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%80%83%E5%9C%BA%E5%B0%B1%E5%BA%A7">è€ƒåœºå°±åº§</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è€ƒåœºå°±åº§"><a class="markdownIt-Anchor" href="#è€ƒåœºå°±åº§"></a> è€ƒåœºå°±åº§</h2><p><a href="https://leetcode.cn/problems/exam-room/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨è€ƒåœºé‡Œï¼Œä¸€æ’æœ‰ N ä¸ªåº§ä½ï¼Œåˆ†åˆ«ç¼–å·ä¸º 0, 1, 2, â€¦, N-1 ã€‚</p><p>å½“å­¦ç”Ÿè¿›å…¥è€ƒåœºåï¼Œä»–å¿…é¡»ååœ¨èƒ½å¤Ÿä½¿ä»–ä¸ç¦»ä»–æœ€è¿‘çš„äººä¹‹é—´çš„è·ç¦»è¾¾åˆ°æœ€å¤§åŒ–çš„åº§ä½ä¸Šã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„åº§ä½ï¼Œä»–ä¼šååœ¨ç¼–å·æœ€å°çš„åº§ä½ä¸Šã€‚(å¦å¤–ï¼Œå¦‚æœè€ƒåœºé‡Œæ²¡æœ‰äººï¼Œé‚£ä¹ˆå­¦ç”Ÿå°±ååœ¨ 0 å·åº§ä½ä¸Šã€‚)</p><p>è¿”å› ExamRoom(int N) ç±»ï¼Œå®ƒæœ‰ä¸¤ä¸ªå…¬å¼€çš„å‡½æ•°ï¼šå…¶ä¸­ï¼Œå‡½æ•° ExamRoom.seat() ä¼šè¿”å›ä¸€ä¸ª int ï¼ˆæ•´å‹æ•°æ®ï¼‰ï¼Œä»£è¡¨å­¦ç”Ÿåçš„ä½ç½®ï¼›å‡½æ•° ExamRoom.leave(int p) ä»£è¡¨ååœ¨åº§ä½ p ä¸Šçš„å­¦ç”Ÿç°åœ¨ç¦»å¼€äº†è€ƒåœºã€‚æ¯æ¬¡è°ƒç”¨ ExamRoom.leave(p) æ—¶éƒ½ä¿è¯æœ‰å­¦ç”Ÿååœ¨åº§ä½ p ä¸Šã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦è§£å†³ååœ¨å“ªé‡Œçš„é—®é¢˜ï¼Œè®¾ç½®ä¸€ä¸ª<code>set</code>ï¼Œæ¯æ¬¡å®‰æ’åº§ä½ï¼Œéå†ä¸€é<code>set</code>ï¼Œæ‰¾å‡ºæœ€å¤§ä½ç½®å¤„ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¸€ä¸ª<code>pre</code>è®°å½•ä¸Šä¸€ä¸ªåº§ä½çš„ä½ç½®ï¼Œç„¶å<code>maxd</code>è®°å½•å½“å‰æœ€å¤§è·ç¦»ï¼Œå¦‚æœå½“å‰ä½ç½®è·ç¦»å¤§äº<code>maxd</code>,é‚£å°±æ›´æ–°æ’å…¥ä½ç½®å’Œ<code>maxd</code>å³å¯</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExamRoom</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m;<br>    set&lt;<span class="hljs-type">int</span>&gt; st;<br>    <span class="hljs-built_in">ExamRoom</span>(<span class="hljs-type">int</span> n) &#123;<br>        m=n;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">seat</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span>(st.<span class="hljs-built_in">empty</span>())<br>        &#123;<br>            st.<span class="hljs-built_in">insert</span>(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> pre=<span class="hljs-number">-1</span>,maxd=<span class="hljs-number">0</span>,p=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; t:st)<br>        &#123;<br>            <span class="hljs-type">int</span> d=(t-pre)/<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span>(d&gt;maxd)<br>            &#123;<br>                maxd=d;<br>                p= pre==<span class="hljs-number">-1</span>?<span class="hljs-number">0</span>:pre+d;<br>            &#125;<br>            pre=t;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(m<span class="hljs-number">-1</span>-pre&gt;maxd)<br>            p=m<span class="hljs-number">-1</span>;<br>        st.<span class="hljs-built_in">insert</span>(p);<br>        <span class="hljs-keyword">return</span> p;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">leave</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> </span>&#123;<br>        st.<span class="hljs-built_in">erase</span>(p);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°</title>
    <link href="/2022/12/22/%E7%BB%9F%E8%AE%A1%E7%89%B9%E6%AE%8A%E6%95%B4%E6%95%B0/"/>
    <url>/2022/12/22/%E7%BB%9F%E8%AE%A1%E7%89%B9%E6%AE%8A%E6%95%B4%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BB%9F%E8%AE%A1%E7%89%B9%E6%AE%8A%E6%95%B4%E6%95%B0">ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°"><a class="markdownIt-Anchor" href="#ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°"></a> ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°</h2><p><a href="https://leetcode.cn/problems/count-special-integers/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>å¦‚æœä¸€ä¸ªæ­£æ•´æ•°æ¯ä¸€ä¸ªæ•°ä½éƒ½æ˜¯ äº’ä¸ç›¸åŒ çš„ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ ç‰¹æ®Šæ•´æ•° ã€‚</p><p>ç»™ä½ ä¸€ä¸ª æ­£ æ•´æ•° n ï¼Œè¯·ä½ è¿”å›åŒºé—´ [1, n] ä¹‹é—´ç‰¹æ®Šæ•´æ•°çš„æ•°ç›®ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>æ•°ä½dpæ¨¡æ¿é¢˜ï¼Œéœ€è¦æŒ‰ä½è¿›è¡Œåˆ†æƒ…å†µè®¨è®º.</p><ul><li><p>ç”¨<code>dp[i][mask]</code>è®°å½•ç¬¬iä½çŠ¶æ€ä¸ºmaskæ—¶çš„æ•°ç›®</p></li><li><p>å®šä¹‰äº†å‡½æ•°<code>f(int i,int mask,bool limit,bool isnum)</code></p></li><li><p><code>i</code>è¡¨ç¤ºå½“å‰è®¡ç®—ç¬¬<code>i</code>ä½ï¼Œ<code>mask</code>å­˜å‚¨ä¹‹å‰ä½¿ç”¨è¿‡å¾—æ•°å­—ï¼Œ<code>limit</code>è¡¨ç¤ºå½“å‰ä½å¯ä»¥å–çš„å€¼æ˜¯å¦å—é™åˆ¶ï¼Œ<code>isnum</code>è¡¨ç¤ºå½“å‰ä½å‰é¢æ˜¯å¦æœ‰æ•°å­—</p></li></ul><p>å…·ä½“å®ç°çœ‹ä»£ç å³å¯</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">countSpecialNumbers</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>        string s=<span class="hljs-built_in">to_string</span>(n);<br>        <span class="hljs-type">int</span> len=s.<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">dp</span>(len,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">10</span>,<span class="hljs-number">-1</span>));<br>        function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>,<span class="hljs-type">int</span>,<span class="hljs-type">bool</span>,<span class="hljs-type">bool</span>)&gt; f=[&amp;](<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> mask,<span class="hljs-type">bool</span> limit,<span class="hljs-type">bool</span> isnum)-&gt;<span class="hljs-type">int</span>&#123;<br>            <span class="hljs-keyword">if</span>(i==len)<br>                <span class="hljs-keyword">return</span> isnum;<br>            <span class="hljs-comment">//å‰ªæï¼Œå¦‚æœå½“å‰ä½æ— limitä¸”å‰é¢æœ‰æ•°å­—ï¼Œåˆ™å¯ä»¥åˆ©ç”¨ä¹‹å‰è®¡ç®—è¿‡çš„ç»“æœ</span><br>            <span class="hljs-keyword">if</span>(!limit&amp;&amp;isnum&amp;&amp;dp[i][mask]&gt;=<span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">return</span> dp[i][mask];<br>            <span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br>            <span class="hljs-comment">//å¦‚æœå½“å‰ä½ä¹‹å‰æ²¡æœ‰å¡«æ•°å­—ï¼Œè·³è¿‡å½“å‰ä½</span><br>            <span class="hljs-keyword">if</span>(!isnum)<br>                res=<span class="hljs-built_in">f</span>(i+<span class="hljs-number">1</span>,mask,<span class="hljs-literal">false</span>,<span class="hljs-literal">false</span>);<br>            <span class="hljs-type">int</span> up,down;<br>            <span class="hljs-comment">//å¦‚æœæœ‰limitä¸Šç•Œä¸ºs[i]ï¼Œæ²¡æœ‰åˆ™ä¸Šç•Œä¸º9</span><br>            up= limit ? s[i]-<span class="hljs-string">&#x27;0&#x27;</span>:<span class="hljs-number">9</span>;<br>            <span class="hljs-comment">//å¦‚æœå‰é¢çš„ä½æœ‰æ•°å­—ï¼Œä¸‹ç•Œä¸º0ï¼Œå¦åˆ™ä¸‹ç•Œä¸º1</span><br>            down= isnum ? <span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<br>            <br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> t=down;t&lt;=up;++t)<br>            &#123;<br>                <span class="hljs-comment">//å¦‚æœå½“å‰æ•°å­—æ²¡ç”¨è¿‡,åˆ™ç»§ç»­</span><br>                <span class="hljs-keyword">if</span>((mask&gt;&gt;t&amp;<span class="hljs-number">1</span>)==<span class="hljs-number">0</span>)<br>                &#123;<br>                    res+=<span class="hljs-built_in">f</span>(i+<span class="hljs-number">1</span>,mask|<span class="hljs-number">1</span>&lt;&lt;t,limit&amp;&amp;t==up,<span class="hljs-literal">true</span>);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(!limit&amp;&amp;isnum)<br>                 dp[i][mask]=res;<br>            <span class="hljs-keyword">return</span> res;<br>        &#125;;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">f</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-literal">true</span>,<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†è¢‹å­é‡Œçš„çƒ</title>
    <link href="/2022/12/20/%E5%88%86%E8%A2%8B%E5%AD%90%E9%87%8C%E7%9A%84%E7%90%83/"/>
    <url>/2022/12/20/%E5%88%86%E8%A2%8B%E5%AD%90%E9%87%8C%E7%9A%84%E7%90%83/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%88%86%E8%A2%8B%E5%AD%90%E9%87%8C%E7%9A%84%E7%90%83">åˆ†è¢‹å­é‡Œçš„çƒ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åˆ†è¢‹å­é‡Œçš„çƒ"><a class="markdownIt-Anchor" href="#åˆ†è¢‹å­é‡Œçš„çƒ"></a> åˆ†è¢‹å­é‡Œçš„çƒ</h2><p><a href="">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­ nums[i] è¡¨ç¤ºç¬¬ i ä¸ªè¢‹å­é‡Œçƒçš„æ•°ç›®ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° maxOperations ã€‚</p><p>ä½ å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œè‡³å¤š maxOperations æ¬¡ï¼š</p><p>é€‰æ‹©ä»»æ„ä¸€ä¸ªè¢‹å­ï¼Œå¹¶å°†è¢‹å­é‡Œçš„çƒåˆ†åˆ° 2 ä¸ªæ–°çš„è¢‹å­ä¸­ï¼Œæ¯ä¸ªè¢‹å­é‡Œéƒ½æœ‰ æ­£æ•´æ•° ä¸ªçƒã€‚<br />æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªè¢‹å­é‡Œæœ‰ 5 ä¸ªçƒï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ°ä¸¤ä¸ªæ–°è¢‹å­é‡Œï¼Œåˆ†åˆ«æœ‰ 1 ä¸ªå’Œ 4 ä¸ªçƒï¼Œæˆ–è€…åˆ†åˆ«æœ‰ 2 ä¸ªå’Œ 3 ä¸ªçƒã€‚<br />ä½ çš„å¼€é”€æ˜¯å•ä¸ªè¢‹å­é‡Œçƒæ•°ç›®çš„ æœ€å¤§å€¼ ï¼Œä½ æƒ³è¦ æœ€å°åŒ– å¼€é”€ã€‚</p><p>è¯·ä½ è¿”å›è¿›è¡Œä¸Šè¿°æ“ä½œåçš„æœ€å°å¼€é”€ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨åˆ°äºŒåˆ†çš„æ€æƒ³(<s>ä¸ºä»€ä¹ˆæˆ‘å°±æƒ³ä¸åˆ°ğŸ˜¢</s>)ï¼Œå¯¹äºäºŒåˆ†çš„ä¸­é—´é‡midï¼Œè¡¨ç¤ºæŠŠå½“å‰æ‰€æœ‰æ•°å­—å…¨éƒ¨åˆ†æˆå°äºç­‰äºmidçš„æ•°å­—ï¼Œç»Ÿè®¡æ“ä½œæ¬¡æ•°ï¼Œå¦‚æœæ“ä½œæ¬¡æ•°å°äºè§„å®šæ¬¡æ•°ï¼Œr=mid-1ï¼Œç»§ç»­å¯»æ‰¾æ›´å°çš„ç¬¦åˆè¦æ±‚çš„midï¼Œå¦åˆ™ï¼Œl=mid+1,è°ƒå¤§midçš„å€¼ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minimumSize</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> maxOperations)</span> </span>&#123;<br>        <span class="hljs-type">int</span> l=<span class="hljs-number">1</span>,r=*<span class="hljs-built_in">max_element</span>(nums.<span class="hljs-built_in">begin</span>(),nums.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>,mid;<br>        <span class="hljs-keyword">while</span>(l&lt;=r)<br>        &#123;<br>            mid=(l+r)/<span class="hljs-number">2</span>;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> cnt=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x:nums)<br>                cnt+=(x<span class="hljs-number">-1</span>) / mid;<br>            <span class="hljs-keyword">if</span>(cnt&lt;=maxOperations)<br>            &#123;<br>                ans=mid;<br>                r=mid<span class="hljs-number">-1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>                l=mid+<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„</title>
    <link href="/2022/12/14/%E8%BE%B9%E9%95%BF%E5%BA%A6%E9%99%90%E5%88%B6%E7%9A%84%E8%B7%AF%E5%BE%84/"/>
    <url>/2022/12/14/%E8%BE%B9%E9%95%BF%E5%BA%A6%E9%99%90%E5%88%B6%E7%9A%84%E8%B7%AF%E5%BE%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%BE%B9%E9%95%BF%E5%BA%A6%E9%99%90%E5%88%B6%E7%9A%84%E8%B7%AF%E5%BE%84">è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„"><a class="markdownIt-Anchor" href="#è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„"></a> è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„</h2><p><a href="https://leetcode.cn/problems/checking-existence-of-edge-length-limited-paths/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ª n ä¸ªç‚¹ç»„æˆçš„æ— å‘å›¾è¾¹é›† edgeList ï¼Œå…¶ä¸­ edgeList[i] = [ui, vi, disi] è¡¨ç¤ºç‚¹ ui å’Œç‚¹ vi ä¹‹é—´æœ‰ä¸€æ¡é•¿åº¦ä¸º disi çš„è¾¹ã€‚è¯·æ³¨æ„ï¼Œä¸¤ä¸ªç‚¹ä¹‹é—´å¯èƒ½æœ‰ è¶…è¿‡ä¸€æ¡è¾¹ ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæŸ¥è¯¢æ•°ç»„queries ï¼Œå…¶ä¸­ queries[j] = [pj, qj, limitj] ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¯¹äºæ¯ä¸ªæŸ¥è¯¢ queries[j] ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä» pj åˆ° qj çš„è·¯å¾„ï¼Œä¸”è¿™æ¡è·¯å¾„ä¸Šçš„æ¯ä¸€æ¡è¾¹éƒ½ ä¸¥æ ¼å°äº limitj ã€‚</p><p>è¯·ä½ è¿”å›ä¸€ä¸ª å¸ƒå°”æ•°ç»„ answer ï¼Œå…¶ä¸­ answer.length == queries.length ï¼Œå½“ queries[j] çš„æŸ¥è¯¢ç»“æœä¸º true æ—¶ï¼Œ answer ç¬¬ j ä¸ªå€¼ä¸º true ï¼Œå¦åˆ™ä¸º false ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><blockquote><p>ä¸»è¦ç”¨åˆ°å¹¶æŸ¥é›†çš„æ€æƒ³ï¼Œå…ˆå°†edgelistå’Œqueriesä¸­çš„è¾¹æŒ‰é•¿åº¦å‡åºæ’åºï¼Œå¯¹äºqueriesçš„æ¯æ¡è¾¹ï¼Œå…ˆå°†edgelistä¸­é•¿åº¦å°äºlimitçš„è¾¹åŠ å…¥å¹¶æŸ¥é›†ï¼Œç„¶åå†åˆ¤æ–­queriesçš„p,qæ˜¯å¦è¿é€šï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜å­˜åœ¨påˆ°qçš„è·¯å¾„ï¼Œè€Œä¸”å› ä¸ºå½“å‰å¹¶æŸ¥é›†ä¸­çš„è¾¹éƒ½å°äºæ­¤queryçš„limitï¼Œæ‰€ä»¥påˆ°qè·¯å¾„ä¸Šçš„æ‰€æœ‰è¾¹ä¹Ÿå°äºlimitï¼Œè¯¥queryçš„ç»“æœä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚</p></blockquote><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><p>æˆ‘åœ¨å®ç°å¹¶æŸ¥é›†æ—¶ä¹ æƒ¯åˆå§‹åŒ–ä¸º-1ï¼Œä½†è¿™é“é¢˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸èƒ½åˆå§‹åŒ–ä¸º-1ï¼Œåé¢åæœºä¼šå†çœ‹å§ğŸ˜¢</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; vset,<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(vset[a]==a)<br>            <span class="hljs-keyword">return</span> a;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> vset[a]=<span class="hljs-built_in">find</span>(vset,vset[a]);<br>    &#125;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">distanceLimitedPathsExist</span><span class="hljs-params">(<span class="hljs-type">int</span> n, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; edgeList, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; queries)</span> </span>&#123;<br>        <span class="hljs-built_in">sort</span>(edgeList.<span class="hljs-built_in">begin</span>(),edgeList.<span class="hljs-built_in">end</span>(),[](vector&lt;<span class="hljs-type">int</span>&gt;&amp; a,vector&lt;<span class="hljs-type">int</span>&gt;&amp; b)&#123;<br>            <span class="hljs-keyword">return</span> a[<span class="hljs-number">2</span>]&lt;b[<span class="hljs-number">2</span>];<br>        &#125;);<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vset</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-built_in">iota</span>(vset.<span class="hljs-built_in">begin</span>(),vset.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">idx</span><span class="hljs-params">(queries.size())</span></span>;<br>        <span class="hljs-built_in">iota</span>(idx.<span class="hljs-built_in">begin</span>(),idx.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">sort</span>(idx.<span class="hljs-built_in">begin</span>(),idx.<span class="hljs-built_in">end</span>(),[&amp;](<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)&#123;<br>            <span class="hljs-keyword">return</span> queries[a][<span class="hljs-number">2</span>]&lt;queries[b][<span class="hljs-number">2</span>];<br>        &#125;);<br>        <span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">ans</span><span class="hljs-params">(queries.size())</span></span>;<br>        <span class="hljs-type">int</span> sz=edgeList.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i:idx)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(k&lt;sz&amp;&amp;edgeList[k][<span class="hljs-number">2</span>]&lt;queries[i][<span class="hljs-number">2</span>])<br>            &#123;<br>                <span class="hljs-type">int</span> x=<span class="hljs-built_in">find</span>(vset,edgeList[k][<span class="hljs-number">0</span>]);<br>                <span class="hljs-type">int</span> y=<span class="hljs-built_in">find</span>(vset,edgeList[k][<span class="hljs-number">1</span>]);<br>                vset[x]=y;<br>                ++k;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(vset,queries[i][<span class="hljs-number">0</span>])==<span class="hljs-built_in">find</span>(vset,queries[i][<span class="hljs-number">1</span>]))<br>                ans[i]=<span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å †é•¿æ–¹ä½“</title>
    <link href="/2022/12/10/%E5%A0%86%E9%95%BF%E6%96%B9%E4%BD%93/"/>
    <url>/2022/12/10/%E5%A0%86%E9%95%BF%E6%96%B9%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%A0%86%E9%95%BF%E6%96%B9%E4%BD%93">å †é•¿æ–¹ä½“</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å †é•¿æ–¹ä½“"><a class="markdownIt-Anchor" href="#å †é•¿æ–¹ä½“"></a> å †é•¿æ–¹ä½“</h2><p><a href="https://leetcode.cn/problems/maximum-height-by-stacking-cuboids/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½  n ä¸ªé•¿æ–¹ä½“ cuboids ï¼Œå…¶ä¸­ç¬¬ i ä¸ªé•¿æ–¹ä½“çš„é•¿å®½é«˜è¡¨ç¤ºä¸º cuboids[i] = [widthi, lengthi, heighti]ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚è¯·ä½ ä» cuboids é€‰å‡ºä¸€ä¸ª å­é›† ï¼Œå¹¶å°†å®ƒä»¬å †å èµ·æ¥ã€‚</p><p>å¦‚æœ widthi &lt;= widthj ä¸” lengthi &lt;= lengthj ä¸” heighti &lt;= heightj ï¼Œä½ å°±å¯ä»¥å°†é•¿æ–¹ä½“ i å †å åœ¨é•¿æ–¹ä½“ j ä¸Šã€‚ä½ å¯ä»¥é€šè¿‡æ—‹è½¬æŠŠé•¿æ–¹ä½“çš„é•¿å®½é«˜é‡æ–°æ’åˆ—ï¼Œä»¥å°†å®ƒæ”¾åœ¨å¦ä¸€ä¸ªé•¿æ–¹ä½“ä¸Šã€‚</p><p>è¿”å› å †å é•¿æ–¹ä½“ cuboids å¯ä»¥å¾—åˆ°çš„ æœ€å¤§é«˜åº¦ ã€‚</p><p>ç¤ºä¾‹:</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šcuboids = [[50,45,20],[95,37,53],[45,23,12]]<br>è¾“å‡ºï¼š190<br>è§£é‡Šï¼š<br>ç¬¬<span class="hljs-number"> 1 </span>ä¸ªé•¿æ–¹ä½“æ”¾åœ¨åº•éƒ¨ï¼Œ53x37 çš„ä¸€é¢æœä¸‹ï¼Œé«˜åº¦ä¸º<span class="hljs-number"> 95 </span>ã€‚<br>ç¬¬<span class="hljs-number"> 0 </span>ä¸ªé•¿æ–¹ä½“æ”¾åœ¨ä¸­é—´ï¼Œ45x20 çš„ä¸€é¢æœä¸‹ï¼Œé«˜åº¦ä¸º<span class="hljs-number"> 50 </span>ã€‚<br>ç¬¬<span class="hljs-number"> 2 </span>ä¸ªé•¿æ–¹ä½“æ”¾åœ¨ä¸Šé¢ï¼Œ23x12 çš„ä¸€é¢æœä¸‹ï¼Œé«˜åº¦ä¸º<span class="hljs-number"> 45 </span>ã€‚<br>æ€»é«˜åº¦æ˜¯<span class="hljs-number"> 95 </span>+<span class="hljs-number"> 50 </span>+<span class="hljs-number"> 45 </span>=<span class="hljs-number"> 190 </span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨åˆ°åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œ<code>dp[i]</code>è¡¨ç¤ºåˆ°ç¬¬iä¸ªé•¿æ–¹ä½“çš„æœ€å¤§é«˜åº¦ï¼ŒçŠ¶æ€æ–¹ç¨‹ä¸º<code>dp[i]=max(dp[i],dp[j]+cu[i][2])</code></p><p>åŠ¨æ€è§„åˆ’ä¹‹å‰ï¼Œå…ˆå¯¹æ¯ä¸ªé•¿æ–¹ä½“å†…éƒ¨æ’åºï¼Œç„¶åæŒ‰<code>w,h,l</code>ä¹‹å’Œæ’åº</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs inform7">class Solution &#123;<br>public:<br>    int maxHeight(vector&lt;vector&lt;int&gt;&gt;&amp; cuboids) &#123;<br>        int n=cuboids.size();<br>        for(auto&amp; t:cuboids)<br>        &#123;<br>            sort(t.begin(),t.end());<br>        &#125;<br>        sort(cuboids.begin(),cuboids.end(),<span class="hljs-comment">[&amp;]</span>(vector&lt;int&gt;&amp; a,vector&lt;int&gt;&amp; b)&#123;<br>            return a<span class="hljs-comment">[0]</span>+a<span class="hljs-comment">[1]</span>+a<span class="hljs-comment">[2]</span>&lt;b<span class="hljs-comment">[0]</span>+b<span class="hljs-comment">[1]</span>+b<span class="hljs-comment">[2]</span>;<br>        &#125;);<br>        vector&lt;int&gt; dp(n);<br>        int ans=0;<br>        for(int i=0;i&lt;n;++i)<br>        &#123;<br>            dp<span class="hljs-comment">[i]</span>=cuboids<span class="hljs-comment">[i]</span><span class="hljs-comment">[2]</span>;<br>            for(int j=0;j&lt;i;++j)<br>            &#123;<br>                if(cuboids<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>&gt;=cuboids<span class="hljs-comment">[j]</span><span class="hljs-comment">[0]</span>&amp;&amp;cuboids<span class="hljs-comment">[i]</span><span class="hljs-comment">[1]</span>&gt;=cuboids<span class="hljs-comment">[j]</span><span class="hljs-comment">[1]</span>&amp;&amp;cuboids<span class="hljs-comment">[i]</span><span class="hljs-comment">[2]</span>&gt;=cuboids<span class="hljs-comment">[j]</span><span class="hljs-comment">[2]</span>)<br>                &#123;<br>                    dp<span class="hljs-comment">[i]</span>=max(dp<span class="hljs-comment">[i]</span>,dp<span class="hljs-comment">[j]</span>+cuboids<span class="hljs-comment">[i]</span><span class="hljs-comment">[2]</span>);<br>                &#125;<br>            &#125;<br>            ans=max(ans,dp<span class="hljs-comment">[i]</span>);<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”œç‚¹æˆæœ¬</title>
    <link href="/2022/12/04/%E7%94%9C%E7%82%B9%E6%88%90%E6%9C%AC/"/>
    <url>/2022/12/04/%E7%94%9C%E7%82%B9%E6%88%90%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<h2 id="ç”œç‚¹æˆæœ¬"><a class="markdownIt-Anchor" href="#ç”œç‚¹æˆæœ¬"></a> ç”œç‚¹æˆæœ¬</h2><p><a href="https://leetcode.cn/problems/closest-dessert-cost/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æ‰“ç®—åšç”œç‚¹ï¼Œç°åœ¨éœ€è¦è´­ä¹°é…æ–™ã€‚ç›®å‰å…±æœ‰ n ç§å†°æ¿€å‡ŒåŸºæ–™å’Œ m ç§é…æ–™å¯ä¾›é€‰è´­ã€‚è€Œåˆ¶ä½œç”œç‚¹éœ€è¦éµå¾ªä»¥ä¸‹å‡ æ¡è§„åˆ™ï¼š</p><p>å¿…é¡»é€‰æ‹© ä¸€ç§ å†°æ¿€å‡ŒåŸºæ–™ã€‚<br />å¯ä»¥æ·»åŠ  ä¸€ç§æˆ–å¤šç§ é…æ–™ï¼Œä¹Ÿå¯ä»¥ä¸æ·»åŠ ä»»ä½•é…æ–™ã€‚<br />æ¯ç§ç±»å‹çš„é…æ–™ æœ€å¤šä¸¤ä»½ ã€‚<br />ç»™ä½ ä»¥ä¸‹ä¸‰ä¸ªè¾“å…¥ï¼š</p><p>baseCosts ï¼Œä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ª baseCosts[i] è¡¨ç¤ºç¬¬ i ç§å†°æ¿€å‡ŒåŸºæ–™çš„ä»·æ ¼ã€‚<br />toppingCostsï¼Œä¸€ä¸ªé•¿åº¦ä¸º m çš„æ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ª toppingCosts[i] è¡¨ç¤º ä¸€ä»½ ç¬¬ i ç§å†°æ¿€å‡Œé…æ–™çš„ä»·æ ¼ã€‚<br />target ï¼Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä½ åˆ¶ä½œç”œç‚¹çš„ç›®æ ‡ä»·æ ¼ã€‚<br />ä½ å¸Œæœ›è‡ªå·±åšçš„ç”œç‚¹æ€»æˆæœ¬å°½å¯èƒ½æ¥è¿‘ç›®æ ‡ä»·æ ¼ target ã€‚</p><p>è¿”å›æœ€æ¥è¿‘ target çš„ç”œç‚¹æˆæœ¬ã€‚å¦‚æœæœ‰å¤šç§æ–¹æ¡ˆï¼Œè¿”å› æˆæœ¬ç›¸å¯¹è¾ƒä½ çš„ä¸€ç§ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šbaseCosts = [2,3], toppingCosts = [4,5,100], target = 18<br>è¾“å‡ºï¼š17<br>è§£é‡Šï¼šè€ƒè™‘ä¸‹é¢çš„æ–¹æ¡ˆç»„åˆï¼ˆæ‰€æœ‰ä¸‹æ ‡å‡ä»<span class="hljs-number"> 0 </span>å¼€å§‹ï¼‰ï¼š<br>- é€‰æ‹©<span class="hljs-number"> 1 </span>å·åŸºæ–™ï¼šæˆæœ¬ 3<br>- é€‰æ‹©<span class="hljs-number"> 1 </span>ä»½<span class="hljs-number"> 0 </span>å·é…æ–™ï¼šæˆæœ¬<span class="hljs-number"> 1 </span>x<span class="hljs-number"> 4 </span>= 4<br>- é€‰æ‹©<span class="hljs-number"> 2 </span>ä»½<span class="hljs-number"> 1 </span>å·é…æ–™ï¼šæˆæœ¬<span class="hljs-number"> 2 </span>x<span class="hljs-number"> 5 </span>= 10<br>- é€‰æ‹©<span class="hljs-number"> 0 </span>ä»½<span class="hljs-number"> 2 </span>å·é…æ–™ï¼šæˆæœ¬<span class="hljs-number"> 0 </span>x<span class="hljs-number"> 100 </span>= 0<br>æ€»æˆæœ¬ï¼š3 +<span class="hljs-number"> 4 </span>+<span class="hljs-number"> 10 </span>+<span class="hljs-number"> 0 </span>=<span class="hljs-number"> 17 </span>ã€‚ä¸å­˜åœ¨æ€»æˆæœ¬ä¸º<span class="hljs-number"> 18 </span>çš„ç”œç‚¹åˆ¶ä½œæ–¹æ¡ˆã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™æ˜¯ä¸€é“èƒŒåŒ…é—®é¢˜çš„å˜ç§ï¼Œå¯ä»¥æŠŠæ‰€æœ‰çš„æ–¹æ¡ˆåˆ†æˆä¸¤å¤§ç±»ï¼Œæ€»æˆæœ¬å¤§äºtargetçš„å’Œæ€»æˆæœ¬å°äºtargetçš„ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡resè®°å½•å¤§äºtargetçš„æœ€å°æˆæœ¬ï¼Œç„¶åå¯¹å°äºtargetçš„æ–¹æ¡ˆè¿›è¡ŒåŠ¨æ€è§„åˆ’ã€‚</p><p>é¦–å…ˆç»´æŠ¤ä¸€ä¸ªæ•°ç»„<code>can[]</code>,è¡¨ç¤ºæ¯ä¸ªå°äºtargetçš„æ–¹æ¡ˆæ˜¯å¦åˆæ³•ï¼ˆå³å¯ä»¥é€šè¿‡baseæˆ–è€…é…æ–™ç»„åˆå¾—åˆ°çš„æ•°å€¼ï¼‰ï¼Œå…ˆéå†basecostsï¼Œå¦‚æœæœ‰xå°äºtargetçš„ï¼Œåˆ™<code>can[x]=true</code>ï¼Œå¤§äºtargetåˆ™æ›´æ–°resã€‚ç„¶åå¼€å§‹åŠ¨æ€è§„åˆ’ï¼Œæ¯ä¸ªé…æ–™éå†ä¸¤æ¬¡ï¼Œå¦‚æœåŠ ä¸Šå½“å‰é…æ–™åæˆæœ¬å¤§äºtargetï¼Œåˆ™æ›´æ–°resï¼Œå¦‚æœå½“å‰æˆæœ¬ä¸åˆæ³•ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½å‡å»å½“å‰é…æ–™åå°±åˆæ³•äº†ï¼Œæ‰€ä»¥æ®æ­¤æ›´æ–°å½“å‰çš„<code>can</code></p><p>æœ€åï¼Œåªéœ€è¦è€ƒè™‘åœ¨<code>res-target</code>çš„è·ç¦»å†…ï¼Œå°äºtargetçš„æ–¹æ¡ˆæœ‰æ²¡æœ‰åˆæ³•çš„ï¼Œå› ä¸ºå¦‚æœå¤§äºè¿™ä¸ªè·ç¦»ï¼Œé‚£ä¹ˆæœ€æ¥è¿‘targetçš„æ–¹æ¡ˆå°±æ˜¯resäº†ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> Solution &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> closestCost(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; baseCosts, vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; toppingCosts, <span class="hljs-built_in">int</span> <span class="hljs-keyword">target</span>) &#123;<br>        <span class="hljs-built_in">int</span> b=*min_element(baseCosts.begin(),baseCosts.<span class="hljs-keyword">end</span>());<br>        <span class="hljs-keyword">if</span>(b&gt;=<span class="hljs-keyword">target</span>)<br>            <span class="hljs-keyword">return</span> b;<br>        vector&lt;bool&gt; can(<span class="hljs-keyword">target</span>+<span class="hljs-number">1</span>,false);<br>        <span class="hljs-built_in">int</span> res=<span class="hljs-number">2</span>*<span class="hljs-keyword">target</span>-b;<br>        for(<span class="hljs-built_in">int</span> &amp;t:baseCosts)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(t&lt;=<span class="hljs-keyword">target</span>)<br>                can[t]=true;<br>            <span class="hljs-keyword">else</span><br>                res=<span class="hljs-built_in">min</span>(res,t);<br>        &#125;<br>        for(<span class="hljs-built_in">int</span>&amp; t:toppingCosts)<br>        &#123;<br>            for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;++i)<br>            &#123;<br>                for(<span class="hljs-built_in">int</span> j=<span class="hljs-keyword">target</span>;j&gt;=<span class="hljs-number">0</span>;--j)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(can[j]&amp;&amp;j+t&gt;<span class="hljs-keyword">target</span>)<br>                        res=<span class="hljs-built_in">min</span>(res,j+t);<br>                    <span class="hljs-keyword">if</span>(j-t&gt;=<span class="hljs-number">0</span>)<br>                        can[j]=can[j]|can[j-t];<br>                &#125;<br>            &#125;<br>        &#125;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;=res-<span class="hljs-keyword">target</span>;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(can[<span class="hljs-keyword">target</span>-i])<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">target</span>-i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç§»åŠ¨çƒçš„æœ€å°æ¬¡æ•°</title>
    <link href="/2022/12/02/%E7%A7%BB%E5%8A%A8%E7%90%83%E7%9A%84%E6%9C%80%E5%B0%8F%E6%AC%A1%E6%95%B0/"/>
    <url>/2022/12/02/%E7%A7%BB%E5%8A%A8%E7%90%83%E7%9A%84%E6%9C%80%E5%B0%8F%E6%AC%A1%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%A7%BB%E5%8A%A8%E6%89%80%E6%9C%89%E7%90%83%E5%88%B0%E6%AF%8F%E4%B8%AA%E7%9B%92%E5%AD%90%E6%89%80%E9%9C%80%E7%9A%84%E6%9C%80%E5%B0%8F%E6%93%8D%E4%BD%9C%E6%95%B0">ç§»åŠ¨æ‰€æœ‰çƒåˆ°æ¯ä¸ªç›’å­æ‰€éœ€çš„æœ€å°æ“ä½œæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç§»åŠ¨æ‰€æœ‰çƒåˆ°æ¯ä¸ªç›’å­æ‰€éœ€çš„æœ€å°æ“ä½œæ•°"><a class="markdownIt-Anchor" href="#ç§»åŠ¨æ‰€æœ‰çƒåˆ°æ¯ä¸ªç›’å­æ‰€éœ€çš„æœ€å°æ“ä½œæ•°"></a> ç§»åŠ¨æ‰€æœ‰çƒåˆ°æ¯ä¸ªç›’å­æ‰€éœ€çš„æœ€å°æ“ä½œæ•°</h2><p><a href="https://leetcode.cn/problems/minimum-number-of-operations-to-move-all-balls-to-each-box/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ n ä¸ªç›’å­ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² boxes ï¼Œå…¶ä¸­ boxes[i] çš„å€¼ä¸º â€˜0â€™ è¡¨ç¤ºç¬¬ i ä¸ªç›’å­æ˜¯ ç©º çš„ï¼Œè€Œ boxes[i] çš„å€¼ä¸º â€˜1â€™ è¡¨ç¤ºç›’å­é‡Œæœ‰ ä¸€ä¸ª å°çƒã€‚</p><p>åœ¨ä¸€æ­¥æ“ä½œä¸­ï¼Œä½ å¯ä»¥å°† ä¸€ä¸ª å°çƒä»æŸä¸ªç›’å­ç§»åŠ¨åˆ°ä¸€ä¸ªä¸ä¹‹ç›¸é‚»çš„ç›’å­ä¸­ã€‚ç¬¬ i ä¸ªç›’å­å’Œç¬¬ j ä¸ªç›’å­ç›¸é‚»éœ€æ»¡è¶³ abs(i - j) == 1 ã€‚æ³¨æ„ï¼Œæ“ä½œæ‰§è¡Œåï¼ŒæŸäº›ç›’å­ä¸­å¯èƒ½ä¼šå­˜åœ¨ä¸æ­¢ä¸€ä¸ªå°çƒã€‚</p><p>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯å°†æ‰€æœ‰å°çƒç§»åŠ¨åˆ°ç¬¬ i ä¸ªç›’å­æ‰€éœ€çš„ æœ€å° æ“ä½œæ•°ã€‚</p><p>æ¯ä¸ª answer[i] éƒ½éœ€è¦æ ¹æ®ç›’å­çš„ åˆå§‹çŠ¶æ€ è¿›è¡Œè®¡ç®—ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šboxes = &quot;110&quot;<br>è¾“å‡ºï¼š[1,1,3]<br>è§£é‡Šï¼šæ¯ä¸ªç›’å­å¯¹åº”çš„æœ€å°æ“ä½œæ•°å¦‚ä¸‹ï¼š<br>1) ç¬¬<span class="hljs-number"> 1 </span>ä¸ªç›’å­ï¼šå°†ä¸€ä¸ªå°çƒä»ç¬¬<span class="hljs-number"> 2 </span>ä¸ªç›’å­ç§»åŠ¨åˆ°ç¬¬<span class="hljs-number"> 1 </span>ä¸ªç›’å­ï¼Œéœ€è¦<span class="hljs-number"> 1 </span>æ­¥æ“ä½œã€‚<br>2) ç¬¬<span class="hljs-number"> 2 </span>ä¸ªç›’å­ï¼šå°†ä¸€ä¸ªå°çƒä»ç¬¬<span class="hljs-number"> 1 </span>ä¸ªç›’å­ç§»åŠ¨åˆ°ç¬¬<span class="hljs-number"> 2 </span>ä¸ªç›’å­ï¼Œéœ€è¦<span class="hljs-number"> 1 </span>æ­¥æ“ä½œã€‚<br>3) ç¬¬<span class="hljs-number"> 3 </span>ä¸ªç›’å­ï¼šå°†ä¸€ä¸ªå°çƒä»ç¬¬<span class="hljs-number"> 1 </span>ä¸ªç›’å­ç§»åŠ¨åˆ°ç¬¬<span class="hljs-number"> 3 </span>ä¸ªç›’å­ï¼Œéœ€è¦<span class="hljs-number"> 2 </span>æ­¥æ“ä½œã€‚å°†ä¸€ä¸ªå°çƒä»ç¬¬<span class="hljs-number"> 2 </span>ä¸ªç›’å­ç§»åŠ¨åˆ°ç¬¬<span class="hljs-number"> 3 </span>ä¸ªç›’å­ï¼Œéœ€è¦<span class="hljs-number"> 1 </span>æ­¥æ“ä½œã€‚å…±è®¡<span class="hljs-number"> 3 </span>æ­¥æ“ä½œã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å› ä¸ºæ ·ä¾‹å°‘ï¼Œæ‰€ä»¥æš´åŠ›ä¹Ÿèƒ½è¿‡ï¼Œè¿™é‡Œç”¨å‰ç¼€å’Œä¸åç¼€å’Œè¿›è¡Œä¼˜åŒ–ã€‚</p><p><code>pre[i]</code>è¡¨ç¤ºæŠŠiä½ç½®ä¹‹å‰æ‰€æœ‰çš„1ç§»åˆ°iä½ç½®æ‰€éœ€è¦çš„æ¬¡æ•°ï¼ŒçŠ¶æ€æ–¹ç¨‹<code>pre[i]=pre[i-1]+presum</code>,å¯ä»¥çœ‹åšå…ˆæŠŠå‰é¢çš„æ‰€æœ‰çƒç§»åŠ¨åˆ°i-1ä½ç½®ï¼Œéœ€è¦<code>pre[i-1]</code>æ¬¡ï¼Œç„¶åi-1ä½ç½®ä¸€å…±æœ‰presumä¸ªå°çƒï¼ŒæŠŠä»–ä»¬ä¾æ¬¡ç§»åŠ¨åˆ°iä½ç½®å³å¯</p><p>åç¼€åŒç†ï¼Œé‚£ä¹ˆæ¯ä¸ªä½ç½®æ‰€éœ€çš„ç§»åŠ¨æ¬¡æ•°å°±æ˜¯<code>pre[i]+aft[i]</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">minOperations</span><span class="hljs-params">(string boxes)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = boxes.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">res</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">pre</span><span class="hljs-params">(n)</span></span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">aft</span><span class="hljs-params">(n)</span></span>;<br><br>        <span class="hljs-type">int</span> prsum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span>)<br>                pre[i] = pre[i - <span class="hljs-number">1</span>] + prsum;<br>            <span class="hljs-keyword">if</span>(boxes[i] == <span class="hljs-string">&#x27;1&#x27;</span>) <br>                ++prsum;<br>        &#125;<br><br>        <span class="hljs-type">int</span> afsum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(i&lt;n<span class="hljs-number">-1</span>)<br>                aft[i] = aft[i + <span class="hljs-number">1</span>] + afsum;<br>            <span class="hljs-keyword">if</span>(boxes[i] == <span class="hljs-string">&#x27;1&#x27;</span>) <br>                ++afsum;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span> ; i &lt; n ; i++)<br>            res[i] = pre[i] + aft[i];<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§é¢‘ç‡æ ˆ</title>
    <link href="/2022/11/30/%E6%9C%80%E5%A4%A7%E9%A2%91%E7%8E%87%E6%A0%88/"/>
    <url>/2022/11/30/%E6%9C%80%E5%A4%A7%E9%A2%91%E7%8E%87%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å¤§é¢‘ç‡æ ˆ"><a class="markdownIt-Anchor" href="#æœ€å¤§é¢‘ç‡æ ˆ"></a> æœ€å¤§é¢‘ç‡æ ˆ</h2><p><a href="https://leetcode.cn/problems/maximum-frequency-stack/description/">é¢˜ç›®</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>è®¾è®¡ä¸€ä¸ªç±»ä¼¼å †æ ˆçš„æ•°æ®ç»“æ„ï¼Œå°†å…ƒç´ æ¨å…¥å †æ ˆï¼Œå¹¶ä»å †æ ˆä¸­å¼¹å‡ºå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ã€‚</p><p>å®ç° FreqStack ç±»:</p><p>FreqStack() æ„é€ ä¸€ä¸ªç©ºçš„å †æ ˆã€‚<br />void push(int val) å°†ä¸€ä¸ªæ•´æ•° val å‹å…¥æ ˆé¡¶ã€‚<br />int pop() åˆ é™¤å¹¶è¿”å›å †æ ˆä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ã€‚<br />å¦‚æœå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ä¸åªä¸€ä¸ªï¼Œåˆ™ç§»é™¤å¹¶è¿”å›æœ€æ¥è¿‘æ ˆé¡¶çš„å…ƒç´ ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs arcade">è¾“å…¥ï¼š<br>[<span class="hljs-string">&quot;FreqStack&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;push&quot;</span>,<span class="hljs-string">&quot;pop&quot;</span>,<span class="hljs-string">&quot;pop&quot;</span>,<span class="hljs-string">&quot;pop&quot;</span>,<span class="hljs-string">&quot;pop&quot;</span>],<br>[[],[<span class="hljs-number">5</span>],[<span class="hljs-number">7</span>],[<span class="hljs-number">5</span>],[<span class="hljs-number">7</span>],[<span class="hljs-number">4</span>],[<span class="hljs-number">5</span>],[],[],[],[]]<br>è¾“å‡ºï¼š[<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>]<br>è§£é‡Šï¼š<br>FreqStack = <span class="hljs-keyword">new</span> FreqStack();<br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">5</span>);<span class="hljs-comment">//å †æ ˆä¸º [5]</span><br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">7</span>);<span class="hljs-comment">//å †æ ˆæ˜¯ [5,7]</span><br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">5</span>);<span class="hljs-comment">//å †æ ˆæ˜¯ [5,7,5]</span><br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">7</span>);<span class="hljs-comment">//å †æ ˆæ˜¯ [5,7,5,7]</span><br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">4</span>);<span class="hljs-comment">//å †æ ˆæ˜¯ [5,7,5,7,4]</span><br>freqStack.<span class="hljs-built_in">push</span> (<span class="hljs-number">5</span>);<span class="hljs-comment">//å †æ ˆæ˜¯ [5,7,5,7,4,5]</span><br>freqStack.<span class="hljs-built_in">pop</span> ();<span class="hljs-comment">//è¿”å› 5 ï¼Œå› ä¸º 5 å‡ºç°é¢‘ç‡æœ€é«˜ã€‚å †æ ˆå˜æˆ [5,7,5,7,4]ã€‚</span><br>freqStack.<span class="hljs-built_in">pop</span> ();<span class="hljs-comment">//è¿”å› 7 ï¼Œå› ä¸º 5 å’Œ 7 å‡ºç°é¢‘ç‡æœ€é«˜ï¼Œä½†7æœ€æ¥è¿‘é¡¶éƒ¨ã€‚å †æ ˆå˜æˆ [5,7,5,4]ã€‚</span><br>freqStack.<span class="hljs-built_in">pop</span> ();<span class="hljs-comment">//è¿”å› 5 ï¼Œå› ä¸º 5 å‡ºç°é¢‘ç‡æœ€é«˜ã€‚å †æ ˆå˜æˆ [5,7,4]ã€‚</span><br>freqStack.<span class="hljs-built_in">pop</span> ();<span class="hljs-comment">//è¿”å› 4 ï¼Œå› ä¸º 4, 5 å’Œ 7 å‡ºç°é¢‘ç‡æœ€é«˜ï¼Œä½† 4 æ˜¯æœ€æ¥è¿‘é¡¶éƒ¨çš„ã€‚å †æ ˆå˜æˆ [5,7]ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸€ä¸ªmapè®°å½•æ•°å­—å’Œå¯¹åº”é¢‘ç‡ï¼Œç„¶åæ¯ä¸€ä¸ªé¢‘ç‡å¯¹åº”ä¸€ä¸ªæ ˆï¼Œæ¯å½“åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå°±æŠŠè¿™ä¸ªå…ƒç´ åŠ å…¥åˆ°å¯¹åº”é¢‘ç‡çš„æ ˆä¸­ï¼Œå–å‡ºæ—¶ä»æœ€å¤§é¢‘ç‡å¯¹åº”çš„æ ˆå¼¹å‡ºå…ƒç´ å³å¯ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FreqStack</span> &#123;<br><span class="hljs-keyword">public</span>: <br>    unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; mp;<br>    unordered_map&lt;<span class="hljs-type">int</span>,stack&lt;<span class="hljs-type">int</span>&gt;&gt; st;<br>    <span class="hljs-type">int</span> maxfreq;<br>    <span class="hljs-built_in">FreqStack</span>() &#123;<br>        maxfreq=<span class="hljs-number">0</span>;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br>        ++mp[val];<br>        st[mp[val]].<span class="hljs-built_in">push</span>(val);<br>        maxfreq=<span class="hljs-built_in">max</span>(maxfreq,mp[val]);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-type">int</span> res=st[maxfreq].<span class="hljs-built_in">top</span>();<br>        st[maxfreq].<span class="hljs-built_in">pop</span>();<br>        --mp[res];<br>        <span class="hljs-keyword">if</span>(st[maxfreq].<span class="hljs-built_in">empty</span>())<br>            --maxfreq;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„</title>
    <link href="/2022/11/28/%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E5%80%BC%E5%92%8C%E7%9A%84%E5%88%86%E7%BB%84/"/>
    <url>/2022/11/28/%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E5%80%BC%E5%92%8C%E7%9A%84%E5%88%86%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E5%80%BC%E5%92%8C%E7%9A%84%E5%88%86%E7%BB%84">æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„"><a class="markdownIt-Anchor" href="#æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„"></a> æœ€å¤§å¹³å‡å€¼å’Œçš„åˆ†ç»„</h2><p><a href="https://leetcode.cn/problems/largest-sum-of-averages/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šæ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ã€‚æˆ‘ä»¬å°†ç»™å®šçš„æ•°ç»„ nums åˆ†æˆ æœ€å¤š k ä¸ªç›¸é‚»çš„éç©ºå­æ•°ç»„ ã€‚ åˆ†æ•° ç”±æ¯ä¸ªå­æ•°ç»„å†…çš„å¹³å‡å€¼çš„æ€»å’Œæ„æˆã€‚</p><p>æ³¨æ„æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ nums æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸”åˆ†æ•°ä¸ä¸€å®šéœ€è¦æ˜¯æ•´æ•°ã€‚</p><p>è¿”å›æˆ‘ä»¬æ‰€èƒ½å¾—åˆ°çš„æœ€å¤§ åˆ†æ•° æ˜¯å¤šå°‘ã€‚ç­”æ¡ˆè¯¯å·®åœ¨ 10-6 å†…è¢«è§†ä¸ºæ˜¯æ­£ç¡®çš„ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥: nums = [<span class="hljs-number">9</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">9</span>], k = <span class="hljs-number">3</span><br>è¾“å‡º: <span class="hljs-number">20.00000</span><br>è§£é‡Š: <br>nums çš„æœ€ä¼˜åˆ†ç»„æ˜¯[<span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">9</span>]. å¾—åˆ°çš„åˆ†æ•°æ˜¯ <span class="hljs-number">9</span> + (<span class="hljs-number">1</span> + <span class="hljs-number">2</span> + <span class="hljs-number">3</span>) / <span class="hljs-number">3</span> + <span class="hljs-number">9</span> = <span class="hljs-number">20.</span> <br>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ nums åˆ†æˆ[<span class="hljs-number">9</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">9</span>]. <br>è¿™æ ·çš„åˆ†ç»„å¾—åˆ°çš„åˆ†æ•°ä¸º <span class="hljs-number">5</span> + <span class="hljs-number">2</span> + <span class="hljs-number">6</span> = <span class="hljs-number">13</span>, ä½†ä¸æ˜¯æœ€å¤§å€¼.<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’ï¼Œç”¨<code>dp[i][j]</code>è¡¨ç¤ºå‰iä¸ªæ•°åˆ†jç»„æ—¶çš„æœ€å¤§å¹³å‡å€¼å’Œï¼Œç„¶åå†™å‡ºçŠ¶æ€æ–¹ç¨‹:<br /><code>dp[i][j]=max(dp[i][j],dp[x][j-1]+(sum[i]-sum[x])/(i-x))</code></p><ul><li>j:<code>2~k</code></li><li>i:<code>j~n</code></li><li>x:<code>j-1~i</code></li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">largestSumOfAverages</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">double</span>&gt; <span class="hljs-title">sum</span><span class="hljs-params">(n+<span class="hljs-number">1</span>)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            sum[i+<span class="hljs-number">1</span>]=sum[i]+nums[i];<br>        &#125;<br>        vector&lt;vector&lt;<span class="hljs-type">double</span>&gt;&gt; <span class="hljs-built_in">dp</span>(n+<span class="hljs-number">1</span>,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">double</span>&gt;(k+<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>        &#123;<br>            dp[i][<span class="hljs-number">1</span>]=sum[i]/i;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">2</span>;j&lt;=k;++j)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=j;i&lt;=n;++i)<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x=j<span class="hljs-number">-1</span>;x&lt;i;++x)<br>                &#123;<br>                    dp[i][j]=<span class="hljs-built_in">max</span>(dp[i][j],dp[x][j<span class="hljs-number">-1</span>]+(sum[i]-sum[x])/(i-x));<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[n][k];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€é•¿å…¬å…±å­ä¸²</title>
    <link href="/2022/11/27/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E4%B8%B2/"/>
    <url>/2022/11/27/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E4%B8%B2">æœ€é•¿å…¬å…±å­ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82">é¢˜ç›®è¦æ±‚</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€é•¿å…¬å…±å­ä¸²"><a class="markdownIt-Anchor" href="#æœ€é•¿å…¬å…±å­ä¸²"></a> æœ€é•¿å…¬å…±å­ä¸²</h2><h3 id="é¢˜ç›®è¦æ±‚"><a class="markdownIt-Anchor" href="#é¢˜ç›®è¦æ±‚"></a> é¢˜ç›®è¦æ±‚</h3><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²str1å’Œstr2,è¾“å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²ï¼Œå¦‚æœæœ€é•¿å…¬å…±å­ä¸²ä¸ºç©ºï¼Œè¾“å‡º-1ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸€é“æ¨¡æ¿é¢˜ï¼Œè¿™é‡Œè¦è¾“å‡ºæœ€é•¿çš„å…¬å…±å­ä¸²è€Œä¸æ˜¯å…¶é•¿åº¦ï¼Œä»£ç å¦‚ä¸‹</p><p>æ³¨æ„ï¼Œ<code>starti</code>ä»ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æœ«å°¾å¼€å§‹ï¼Œ<code>startj</code>ä»ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å¼€å¤´å¼€å§‹</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>string maxsubstr(string s1,string s2)<br>&#123;<br>int <span class="hljs-attribute">l1</span>=s1.size();<br>int <span class="hljs-attribute">l2</span>=s2.size();<br>int <span class="hljs-attribute">maxlen</span>=0,curlen=0;<br>int <span class="hljs-attribute">starti</span>=l1-1,startj=0;<br>int <span class="hljs-attribute">endi</span>=-1;<br><span class="hljs-keyword">while</span>(startj&lt;l2)<br>&#123;<br><span class="hljs-attribute">curlen</span>=0;<br><span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=starti,j=startj;i&lt;l1&amp;&amp;j&lt;l2;++i,++j)<br>&#123;<br><span class="hljs-keyword">if</span>(s1[i]==s2[j])<br>&#123;<br>++curlen;<br><span class="hljs-keyword">if</span>(curlen&gt;maxlen)<br>&#123;<br><span class="hljs-attribute">maxlen</span>=curlen;<br><span class="hljs-attribute">endi</span>=i;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span><br><span class="hljs-attribute">curlen</span>=0;<br>&#125;<br><span class="hljs-keyword">if</span>(starti&gt;0)<br>--starti;<br><span class="hljs-keyword">else</span><br>++startj;<br>&#125;<br>return <span class="hljs-attribute">maxlen</span>==0 ? <span class="hljs-string">&quot;-1&quot;</span>:s1.substr(endi-maxlen+1,maxlen);<br>&#125;<br><br>int main()<br>&#123;<br>string s1,s2;<br>cin&gt;&gt;s1&gt;&gt;s2;<br>cout&lt;&lt;maxsubstr(s1,s2)&lt;&lt;endl;<br>return 0;<br><br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»†åˆ†å›¾çš„å¯åˆ°è¾¾èŠ‚ç‚¹</title>
    <link href="/2022/11/26/%E7%BB%86%E5%88%86%E5%9B%BE%E7%9A%84%E5%8F%AF%E5%88%B0%E8%BE%BE%E8%8A%82%E7%82%B9/"/>
    <url>/2022/11/26/%E7%BB%86%E5%88%86%E5%9B%BE%E7%9A%84%E5%8F%AF%E5%88%B0%E8%BE%BE%E8%8A%82%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BB%86%E5%88%86%E5%9B%BE%E7%9A%84%E5%8F%AF%E5%88%B0%E8%BE%BE%E8%8A%82%E7%82%B9">ç»†åˆ†å›¾çš„å¯åˆ°è¾¾èŠ‚ç‚¹</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç»†åˆ†å›¾çš„å¯åˆ°è¾¾èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#ç»†åˆ†å›¾çš„å¯åˆ°è¾¾èŠ‚ç‚¹"></a> ç»†åˆ†å›¾çš„å¯åˆ°è¾¾èŠ‚ç‚¹</h2><p><a href="https://leetcode.cn/problems/reachable-nodes-in-subdivided-graph/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ— å‘å›¾ï¼ˆåŸå§‹å›¾ï¼‰ï¼Œå›¾ä¸­æœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œç¼–å·ä» 0 åˆ° n - 1 ã€‚ä½ å†³å®šå°†å›¾ä¸­çš„æ¯æ¡è¾¹ ç»†åˆ† ä¸ºä¸€æ¡èŠ‚ç‚¹é“¾ï¼Œæ¯æ¡è¾¹ä¹‹é—´çš„æ–°èŠ‚ç‚¹æ•°å„ä¸ç›¸åŒã€‚</p><p>å›¾ç”¨ç”±è¾¹ç»„æˆçš„äºŒç»´æ•°ç»„ edges è¡¨ç¤ºï¼Œå…¶ä¸­ edges[i] = [ui, vi, cnti] è¡¨ç¤ºåŸå§‹å›¾ä¸­èŠ‚ç‚¹ ui å’Œ vi ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œcnti æ˜¯å°†è¾¹ ç»†åˆ† åçš„æ–°èŠ‚ç‚¹æ€»æ•°ã€‚æ³¨æ„ï¼Œcnti == 0 è¡¨ç¤ºè¾¹ä¸å¯ç»†åˆ†ã€‚</p><p>è¦ ç»†åˆ† è¾¹ [ui, vi] ï¼Œéœ€è¦å°†å…¶æ›¿æ¢ä¸º (cnti + 1) æ¡æ–°è¾¹ï¼Œå’Œ cnti ä¸ªæ–°èŠ‚ç‚¹ã€‚æ–°èŠ‚ç‚¹ä¸º x1, x2, â€¦, xcnti ï¼Œæ–°è¾¹ä¸º [ui, x1], [x1, x2], [x2, x3], â€¦, [xcnti+1, xcnti], [xcnti, vi] ã€‚</p><p>ç°åœ¨å¾—åˆ°ä¸€ä¸ª æ–°çš„ç»†åˆ†å›¾ ï¼Œè¯·ä½ è®¡ç®—ä»èŠ‚ç‚¹ 0 å‡ºå‘ï¼Œå¯ä»¥åˆ°è¾¾å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Ÿå¦‚æœèŠ‚ç‚¹é—´è·ç¦»æ˜¯ maxMoves æˆ–æ›´å°‘ï¼Œåˆ™è§†ä¸º å¯ä»¥åˆ°è¾¾ ã€‚</p><p>ç»™ä½ åŸå§‹å›¾å’Œ maxMoves ï¼Œè¿”å› æ–°çš„ç»†åˆ†å›¾ä¸­ä»èŠ‚ç‚¹ 0 å‡ºå‘ å¯åˆ°è¾¾çš„èŠ‚ç‚¹æ•° ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šedges = <span class="hljs-comment">[<span class="hljs-comment">[0,1,4]</span>,<span class="hljs-comment">[1,2,6]</span>,<span class="hljs-comment">[0,2,8]</span>,<span class="hljs-comment">[1,3,1]</span>]</span>, maxMoves = 10, n = 4<br>è¾“å‡ºï¼š23<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜çœ‹äº†ä¸€éé¢˜æ²¡å¤ªçœ‹æ‡‚ï¼Œæœ¬æ¥æƒ³ç›´æ¥cväº†ğŸ˜¢ï¼Œçœ‹äº†çœ¼é¢˜è§£å‘ç°æ˜¯æœ€çŸ­è·¯ï¼Œå°±å‚è€ƒå¤§ä½¬çµèŒ¶å±±çš„é¢˜è§£å†™äº†ï¼Œé¡ºä¾¿å¤ä¹ ä¸€ä¸‹å †ä¼˜åŒ–çš„dijkstraå’Œé“¾å¼å‰å‘æ˜Ÿå­˜å›¾</p><p><a href="https://leetcode.cn/problems/reachable-nodes-in-subdivided-graph/solutions/1991509/tu-jie-zhuan-huan-cheng-dan-yuan-zui-dua-6l8o/">é“¾æ¥</a></p><ul><li>é¦–å…ˆéœ€è¦è¿›è¡Œä¸€è¾¹dijkstraï¼Œæ±‚å‡º0åˆ°å…¶ä»–ç‚¹çš„æœ€çŸ­è·¯</li><li>éå†æ‰€æœ‰é¡¶ç‚¹ï¼Œå°äºmaxmovesåˆ™<code>++ans</code></li><li>éå†æ‰€æœ‰è¾¹ï¼Œè®¾ä¸€æ¡è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ä¸ºuå’Œvï¼Œåˆ†åˆ«ç”¨maxmoveså‡å»<code>dis[u]</code>å’Œ<code>dis[v]</code>å¾—åˆ°aå’Œb,è¿™æ¡è¾¹ä¸Šç¬¦åˆè¦æ±‚çš„ç‚¹ä¸ªæ•°å³ä¸º<code>min(a+b,cnt)</code>,åŠ å…¥åˆ°ansä¸­å³å¯</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> dis[<span class="hljs-number">3005</span>];<br>    <span class="hljs-built_in">bool</span> vis[<span class="hljs-number">3005</span>];<br>    static <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;<br>    <span class="hljs-built_in">int</span> head[N];<br>    <span class="hljs-built_in">int</span> cnt;<br>    struct edges<br>    &#123;<br>        <span class="hljs-built_in">int</span> to,next,w;<br>    &#125;e[<span class="hljs-number">2</span>*N];<br><br>    struct node<br>    &#123;<br>        <span class="hljs-built_in">int</span> n,w;<br>        node(<span class="hljs-built_in">int</span> nn,<span class="hljs-built_in">int</span> ww):n(nn),w(ww)&#123;&#125;<br>        <span class="hljs-built_in">bool</span> operator &lt; (<span class="hljs-keyword">const</span> node &amp; t) <span class="hljs-keyword">const</span>&#123;<br>            <span class="hljs-keyword">return</span> w&gt;t.w;<br>        &#125;<br>    &#125;;<br>    priority_queue&lt;node&gt; q;<br>    <span class="hljs-built_in">void</span> add(<span class="hljs-built_in">int</span> u,<span class="hljs-built_in">int</span> v,<span class="hljs-built_in">int</span> w)<br>    &#123;<br>        ++cnt;<br>        e[cnt].to=v;<br>        e[cnt].w=w;<br>        e[cnt].next=head[u];<br>        head[u]=cnt;<br>    &#125;<br>    <span class="hljs-built_in">int</span> reachableNodes(vector&lt;vector&lt;<span class="hljs-built_in">int</span>&gt;&gt;&amp; edges, <span class="hljs-built_in">int</span> maxMoves, <span class="hljs-built_in">int</span> n) <br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">auto</span> &amp;e: edges) <br>        &#123;<br>            <span class="hljs-built_in">int</span> u = e[<span class="hljs-number">0</span>], v = e[<span class="hljs-number">1</span>], cnt = e[<span class="hljs-number">2</span>];<br>            add(u,v,cnt+<span class="hljs-number">1</span>);<br>            add(v,u,cnt+<span class="hljs-number">1</span>);<br>        &#125;<br>        memset(dis,<span class="hljs-number">0x3f</span>,sizeof(dis));<br>        <span class="hljs-built_in">int</span> u,v,w;<br>        dis[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        q.push(node(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>));<br>        <span class="hljs-keyword">while</span>(!q.empty())<br>        &#123;<br>            node t=q.top();<br>            q.pop();<br>            u=t.n;<br>            <span class="hljs-keyword">if</span>(!vis[u])<br>            &#123;<br>                vis[u]=<span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=head[u];i;i=e[i].next)<br>                &#123;<br>                    v=e[i].to;<br>                    w=e[i].w;<br>                    <span class="hljs-keyword">if</span>(dis[u]+w&lt;dis[v])<br>                    &#123;<br>                        dis[v]=dis[u]+w;<br>                        <span class="hljs-keyword">if</span>(!vis[v])<br>                            q.push(node(v,dis[v]));<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// return dis[2];</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(dis[i]&lt;=maxMoves)<br>                ++ans;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">auto</span> &amp;e: edges) <br>        &#123;<br>            <span class="hljs-built_in">int</span> u = e[<span class="hljs-number">0</span>], v = e[<span class="hljs-number">1</span>], cnt = e[<span class="hljs-number">2</span>];<br>            <span class="hljs-built_in">int</span> a=max(maxMoves-dis[u],<span class="hljs-number">0</span>);<br>            <span class="hljs-built_in">int</span> b=max(maxMoves-dis[v],<span class="hljs-number">0</span>);<br>            ans+=min(a+b,cnt);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æƒ…æ„Ÿä¸°å¯Œçš„æ–‡å­—</title>
    <link href="/2022/11/25/%E6%83%85%E6%84%9F%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%96%87%E5%AD%97/"/>
    <url>/2022/11/25/%E6%83%85%E6%84%9F%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%96%87%E5%AD%97/</url>
    
    <content type="html"><![CDATA[<h2 id="æƒ…æ„Ÿä¸°å¯Œçš„æ–‡å­—"><a class="markdownIt-Anchor" href="#æƒ…æ„Ÿä¸°å¯Œçš„æ–‡å­—"></a> æƒ…æ„Ÿä¸°å¯Œçš„æ–‡å­—</h2><p><a href="https://leetcode.cn/problems/expressive-words/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰æ—¶å€™äººä»¬ä¼šç”¨é‡å¤å†™ä¸€äº›å­—æ¯æ¥è¡¨ç¤ºé¢å¤–çš„æ„Ÿå—ï¼Œæ¯”å¦‚ â€œhelloâ€ -&gt; â€œheeelloooâ€, â€œhiâ€ -&gt; â€œhiiiâ€ã€‚æˆ‘ä»¬å°†ç›¸é‚»å­—æ¯éƒ½ç›¸åŒçš„ä¸€ä¸²å­—ç¬¦å®šä¹‰ä¸ºç›¸åŒå­—æ¯ç»„ï¼Œä¾‹å¦‚ï¼šâ€œhâ€, â€œeeeâ€, â€œllâ€, â€œoooâ€ã€‚</p><p>å¯¹äºä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸² S ï¼Œå¦‚æœå¦ä¸€ä¸ªå•è¯èƒ½å¤Ÿé€šè¿‡å°†ä¸€äº›å­—æ¯ç»„æ‰©å¼ ä»è€Œä½¿å…¶å’Œ S ç›¸åŒï¼Œæˆ‘ä»¬å°†è¿™ä¸ªå•è¯å®šä¹‰ä¸ºå¯æ‰©å¼ çš„ï¼ˆstretchyï¼‰ã€‚æ‰©å¼ æ“ä½œå®šä¹‰å¦‚ä¸‹ï¼šé€‰æ‹©ä¸€ä¸ªå­—æ¯ç»„ï¼ˆåŒ…å«å­—æ¯ c ï¼‰ï¼Œç„¶åå¾€å…¶ä¸­æ·»åŠ ç›¸åŒçš„å­—æ¯ c ä½¿å…¶é•¿åº¦è¾¾åˆ° 3 æˆ–ä»¥ä¸Šã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ â€œhelloâ€ ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å­—æ¯ç»„ â€œoâ€ æ‰©å¼ å¾—åˆ° â€œhelloooâ€ï¼Œä½†æ˜¯æ— æ³•ä»¥åŒæ ·çš„æ–¹æ³•å¾—åˆ° â€œhellooâ€ å› ä¸ºå­—æ¯ç»„ â€œooâ€ é•¿åº¦å°äº 3ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦ä¸€ç§æ‰©å¼  â€œllâ€ -&gt; â€œlllllâ€ ä»¥è·å¾— â€œhellllloooâ€ã€‚å¦‚æœ S = â€œhellllloooâ€ï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯ â€œhelloâ€ æ˜¯å¯æ‰©å¼ çš„ï¼Œå› ä¸ºå¯ä»¥å¯¹å®ƒæ‰§è¡Œè¿™ä¸¤ç§æ‰©å¼ æ“ä½œä½¿å¾— query = â€œhelloâ€ -&gt; â€œhelloooâ€ -&gt; â€œhellllloooâ€ = Sã€‚</p><p>è¾“å…¥ä¸€ç»„æŸ¥è¯¢å•è¯ï¼Œè¾“å‡ºå…¶ä¸­å¯æ‰©å¼ çš„å•è¯æ•°é‡ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">è¾“å…¥ï¼š <br>S = <span class="hljs-string">&quot;heeellooo&quot;</span><br>words = [<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;hi&quot;</span>, <span class="hljs-string">&quot;helo&quot;</span>]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š<br>æˆ‘ä»¬èƒ½é€šè¿‡æ‰©å¼  <span class="hljs-string">&quot;hello&quot;</span> çš„ <span class="hljs-string">&quot;e&quot;</span> å’Œ <span class="hljs-string">&quot;o&quot;</span> æ¥å¾—åˆ° <span class="hljs-string">&quot;heeellooo&quot;</span>ã€‚<br>æˆ‘ä»¬ä¸èƒ½é€šè¿‡æ‰©å¼  <span class="hljs-string">&quot;helo&quot;</span> æ¥å¾—åˆ° <span class="hljs-string">&quot;heeellooo&quot;</span> å› ä¸º <span class="hljs-string">&quot;ll&quot;</span> çš„é•¿åº¦å°äº 3 ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿ç»­å­—ç¬¦çš„å‡ºç°é¢‘ç‡ï¼Œåˆ†ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å½“ä¸¤ä¸ªæŒ‡é’ˆå¯¹åº”çš„å­—ç¬¦ä¸åŒï¼Œä¸åŒ¹é…</li><li>å½“sçš„æŒ‡é’ˆç»Ÿè®¡çš„å­—ç¬¦cå‡ºç°æ¬¡æ•°å°äºäºtä¸­è¯¥å­—ç¬¦æ¬¡æ•°ï¼Œä¸åŒ¹é…</li><li>å¦‚æœå­—ç¬¦cåœ¨ä¸¤ä¸ªä¸²ä¸­å‡ºç°çš„æ¬¡æ•°ä¸ç›¸ç­‰ï¼Œä¸”åœ¨sä¸­å‡ºç°æ¬¡æ•°å°äº3,ä¸åŒ¹é…</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">judge</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>&amp; s,<span class="hljs-built_in">string</span>&amp; t</span>)</span><br>    &#123;<br>        <span class="hljs-built_in">int</span> len1=s.size();<br>        <span class="hljs-built_in">int</span> len2=t.size();<br>        <span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">char</span> c;<br>        <span class="hljs-keyword">while</span>(i&lt;len1&amp;&amp;j&lt;len2)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s[i]!=t[j])<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            c=s[i];<br>            <span class="hljs-built_in">int</span> c1=<span class="hljs-number">0</span>,c2=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>(i&lt;len1&amp;&amp;s[i]==c)<br>            &#123;<br>                ++i;<br>                ++c1;<br>            &#125;<br>            <span class="hljs-keyword">while</span>(j&lt;len2&amp;&amp;t[j]==c)<br>            &#123;<br>                ++j;<br>                ++c2;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(c1&lt;c2)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c1&gt;c2&amp;&amp;c1&lt;<span class="hljs-number">3</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i==len1&amp;&amp;j==len2;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">expressiveWords</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s, vector&lt;<span class="hljs-built_in">string</span>&gt;&amp; words</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">string</span>&amp; ss:words)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(judge(s,ss))<br>                ++ans;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ°è¾¾é¦–éƒ½çš„æœ€å°æ²¹è€—</title>
    <link href="/2022/11/21/%E5%88%B0%E8%BE%BE%E9%A6%96%E9%83%BD%E7%9A%84%E6%9C%80%E5%B0%8F%E6%B2%B9%E8%80%97/"/>
    <url>/2022/11/21/%E5%88%B0%E8%BE%BE%E9%A6%96%E9%83%BD%E7%9A%84%E6%9C%80%E5%B0%8F%E6%B2%B9%E8%80%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%88%B0%E8%BE%BE%E9%A6%96%E9%83%BD%E7%9A%84%E6%9C%80%E5%B0%8F%E6%B2%B9%E8%80%97">åˆ°è¾¾é¦–éƒ½çš„æœ€å°æ²¹è€—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åˆ°è¾¾é¦–éƒ½çš„æœ€å°æ²¹è€—"><a class="markdownIt-Anchor" href="#åˆ°è¾¾é¦–éƒ½çš„æœ€å°æ²¹è€—"></a> åˆ°è¾¾é¦–éƒ½çš„æœ€å°æ²¹è€—</h2><p><a href="https://leetcode.cn/problems/minimum-fuel-cost-to-report-to-the-capital/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€æ£µ n ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼ˆä¸€ä¸ªæ— å‘ã€è¿é€šã€æ— ç¯å›¾ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªåŸå¸‚ï¼Œç¼–å·ä» 0 åˆ° n - 1 ï¼Œä¸”æ°å¥½æœ‰ n - 1 æ¡è·¯ã€‚0 æ˜¯é¦–éƒ½ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ roads ï¼Œå…¶ä¸­ roads[i] = [ai, bi] ï¼Œè¡¨ç¤ºåŸå¸‚ ai å’Œ bi ä¹‹é—´æœ‰ä¸€æ¡ åŒå‘è·¯ ã€‚</p><p>æ¯ä¸ªåŸå¸‚é‡Œæœ‰ä¸€ä¸ªä»£è¡¨ï¼Œä»–ä»¬éƒ½è¦å»é¦–éƒ½å‚åŠ ä¸€ä¸ªä¼šè®®ã€‚</p><p>æ¯åº§åŸå¸‚é‡Œæœ‰ä¸€è¾†è½¦ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•° seats è¡¨ç¤ºæ¯è¾†è½¦é‡Œé¢åº§ä½çš„æ•°ç›®ã€‚</p><p>åŸå¸‚é‡Œçš„ä»£è¡¨å¯ä»¥é€‰æ‹©ä¹˜åæ‰€åœ¨åŸå¸‚çš„è½¦ï¼Œæˆ–è€…ä¹˜åå…¶ä»–åŸå¸‚çš„è½¦ã€‚ç›¸é‚»åŸå¸‚ä¹‹é—´ä¸€è¾†è½¦çš„æ²¹è€—æ˜¯ä¸€å‡æ±½æ²¹ã€‚</p><p>è¯·ä½ è¿”å›åˆ°è¾¾é¦–éƒ½æœ€å°‘éœ€è¦å¤šå°‘å‡æ±½æ²¹ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šroads = [[3,1],[3,2],[1,0],[0,4],[0,5],[4,6]], seats = 2<br>è¾“å‡ºï¼š7<br>è§£é‡Šï¼š<br>- ä»£è¡¨<span class="hljs-number"> 2 </span>åˆ°è¾¾åŸå¸‚<span class="hljs-number"> 3 </span>ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 2 </span>å’Œä»£è¡¨<span class="hljs-number"> 3 </span>ä¸€èµ·åˆ°è¾¾åŸå¸‚<span class="hljs-number"> 1 </span>ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 2 </span>å’Œä»£è¡¨<span class="hljs-number"> 3 </span>ä¸€èµ·åˆ°è¾¾é¦–éƒ½ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 1 </span>ç›´æ¥åˆ°è¾¾é¦–éƒ½ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 5 </span>ç›´æ¥åˆ°è¾¾é¦–éƒ½ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 6 </span>åˆ°è¾¾åŸå¸‚<span class="hljs-number"> 4 </span>ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>- ä»£è¡¨<span class="hljs-number"> 4 </span>å’Œä»£è¡¨<span class="hljs-number"> 6 </span>ä¸€èµ·åˆ°è¾¾é¦–éƒ½ï¼Œæ¶ˆè€—<span class="hljs-number"> 1 </span>å‡æ±½æ²¹ã€‚<br>æœ€å°‘æ¶ˆè€—<span class="hljs-number"> 7 </span>å‡æ±½æ²¹ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯åœ¨ç®—è½¦çš„æ•°é‡ï¼Œä»¥0ä¸ºæ ¹èŠ‚ç‚¹ï¼Œç”¨dfsæ¥è®¡ç®—æ‰€æœ‰æ ‘å¯¹0çš„è´¡çŒ®å€¼</p><p>ä¾‹å¦‚ï¼ŒæŸä¸ªå­æ ‘å¦‚ä¸‹å›¾:</p><p><img src="https://pic.leetcode.cn/1668950622-FRRlaR-4.png" alt="fig1" /></p><p>æœ€ä¸‹é¢ä¸¤ä¸ªèŠ‚ç‚¹çš„è´¡çŒ®å„è‡ªä¸º1,ç„¶åç¬¬äºŒå±‚çš„èŠ‚ç‚¹æœ‰3ä¸ªäººï¼Œè€Œåº§ä½æ•°ä¸º2ï¼Œé‚£ä¹ˆè´¡çŒ®å€¼å°±æ˜¯2ï¼ˆ3/2å‘ä¸Šå–æ•´ï¼‰,æ‰€ä»¥è¯¥å­æ ‘çš„æ€»è´¡çŒ®æ˜¯1+1+2=4</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">minimumFuelCost</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; roads, <span class="hljs-type">int</span> seats)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=roads.<span class="hljs-built_in">size</span>()+<span class="hljs-number">1</span>;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">g</span>(n);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; t:roads)<br>        &#123;<br>            g[t[<span class="hljs-number">0</span>]].<span class="hljs-built_in">push_back</span>(t[<span class="hljs-number">1</span>]);<br>            g[t[<span class="hljs-number">1</span>]].<span class="hljs-built_in">push_back</span>(t[<span class="hljs-number">0</span>]);<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-type">long</span> ans=<span class="hljs-number">0</span>;<br>        function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>,<span class="hljs-type">int</span>)&gt; dfs=[&amp;](<span class="hljs-type">int</span> t,<span class="hljs-type">int</span> par)-&gt;<span class="hljs-type">int</span>&#123;<br>            <span class="hljs-type">int</span> num=<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span>&amp; c:g[t])<br>            &#123;<br>                <span class="hljs-keyword">if</span>(c!=par)<br>                    num+=<span class="hljs-built_in">dfs</span>(c,t);<br>            &#125;<br>            <span class="hljs-keyword">if</span>(t!=<span class="hljs-number">0</span>)<br>                ans+=(num<span class="hljs-number">-1</span>)/seats+<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">return</span> num;<br>        &#125;;<br>        <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¦™æ§Ÿå¡”</title>
    <link href="/2022/11/20/%E9%A6%99%E6%A7%9F%E5%A1%94/"/>
    <url>/2022/11/20/%E9%A6%99%E6%A7%9F%E5%A1%94/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%A6%99%E6%A7%9F%E5%A1%94">é¦™æ§Ÿå¡”</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="é¦™æ§Ÿå¡”"><a class="markdownIt-Anchor" href="#é¦™æ§Ÿå¡”"></a> é¦™æ§Ÿå¡”</h2><p><a href="https://leetcode.cn/problems/champagne-tower/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æˆ‘ä»¬æŠŠç»ç’ƒæ¯æ‘†æˆé‡‘å­—å¡”çš„å½¢çŠ¶ï¼Œå…¶ä¸­ ç¬¬ä¸€å±‚ æœ‰ 1 ä¸ªç»ç’ƒæ¯ï¼Œ ç¬¬äºŒå±‚ æœ‰ 2 ä¸ªï¼Œä¾æ¬¡ç±»æ¨åˆ°ç¬¬ 100 å±‚ï¼Œæ¯ä¸ªç»ç’ƒæ¯ (250ml) å°†ç››æœ‰é¦™æ§Ÿã€‚</p><p>ä»é¡¶å±‚çš„ç¬¬ä¸€ä¸ªç»ç’ƒæ¯å¼€å§‹å€¾å€’ä¸€äº›é¦™æ§Ÿï¼Œå½“é¡¶å±‚çš„æ¯å­æ»¡äº†ï¼Œä»»ä½•æº¢å‡ºçš„é¦™æ§Ÿéƒ½ä¼šç«‹åˆ»ç­‰æµé‡çš„æµå‘å·¦å³ä¸¤ä¾§çš„ç»ç’ƒæ¯ã€‚å½“å·¦å³ä¸¤è¾¹çš„æ¯å­ä¹Ÿæ»¡äº†ï¼Œå°±ä¼šç­‰æµé‡çš„æµå‘å®ƒä»¬å·¦å³ä¸¤è¾¹çš„æ¯å­ï¼Œä¾æ¬¡ç±»æ¨ã€‚ï¼ˆå½“æœ€åº•å±‚çš„ç»ç’ƒæ¯æ»¡äº†ï¼Œé¦™æ§Ÿä¼šæµåˆ°åœ°æ¿ä¸Šï¼‰</p><p>ç¤ºä¾‹</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥: poured = <span class="hljs-number">100000009</span>, query_row = <span class="hljs-number">33</span>, query_glass = <span class="hljs-number">17</span><br>è¾“å‡º: <span class="hljs-number">1.00000</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ä¸ªæ•°å­¦è§„å¾‹é¢˜ï¼Œç»“æœæ²¡æƒ³åˆ°è¿˜æ˜¯ä¸ªåŠ¨æ€è§„åˆ’ğŸ˜‚</p><p><code>dp[i][j]</code>è¡¨ç¤ºç¬¬iè¡Œç¬¬jä¸ªæ¯å­çš„ç››æ°´é‡ï¼Œå¯ä»¥å¾—å‡ºçŠ¶æ€æ–¹ç¨‹ä¸ºï¼š</p><p><code>dp[i][j]=max(dp[i-1][j]-1,0.0)/2+max(dp[i-1][j-1]-1,0.0)/2;</code></p><p>ä¸ºäº†é˜²æ­¢ä¸‹æ ‡è¶Šç•Œï¼Œdpæ•°ç»„ä¸‹æ ‡ä»1å¼€å§‹</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">champagneTower</span><span class="hljs-params">(<span class="hljs-type">int</span> poured, <span class="hljs-type">int</span> query_row, <span class="hljs-type">int</span> query_glass)</span> </span>&#123;<br>        vector&lt;vector&lt;<span class="hljs-type">double</span>&gt;&gt; <span class="hljs-built_in">dp</span>(<span class="hljs-number">101</span>,<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">double</span>&gt;(<span class="hljs-number">101</span>));<br>        dp[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=poured;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=query_row+<span class="hljs-number">1</span>;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=i;++j)<br>            &#123;<br>                dp[i][j]=<span class="hljs-built_in">max</span>(dp[i<span class="hljs-number">-1</span>][j]<span class="hljs-number">-1</span>,<span class="hljs-number">0.0</span>)/<span class="hljs-number">2</span>+<span class="hljs-built_in">max</span>(dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]<span class="hljs-number">-1</span>,<span class="hljs-number">0.0</span>)/<span class="hljs-number">2</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(dp[query_row+<span class="hljs-number">1</span>][query_glass+<span class="hljs-number">1</span>],<span class="hljs-number">1.0</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å­åºåˆ—å®½åº¦ä¹‹å’Œ</title>
    <link href="/2022/11/18/%E5%AD%90%E5%BA%8F%E5%88%97%E5%AE%BD%E5%BA%A6%E4%B9%8B%E5%92%8C/"/>
    <url>/2022/11/18/%E5%AD%90%E5%BA%8F%E5%88%97%E5%AE%BD%E5%BA%A6%E4%B9%8B%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%AD%90%E5%BA%8F%E5%88%97%E5%AE%BD%E5%BA%A6%E4%B9%8B%E5%92%8C">å­åºåˆ—å®½åº¦ä¹‹å’Œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å­åºåˆ—å®½åº¦ä¹‹å’Œ"><a class="markdownIt-Anchor" href="#å­åºåˆ—å®½åº¦ä¹‹å’Œ"></a> å­åºåˆ—å®½åº¦ä¹‹å’Œ</h2><p><a href="https://leetcode.cn/problems/sum-of-subsequence-widths/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä¸€ä¸ªåºåˆ—çš„ å®½åº¦ å®šä¹‰ä¸ºè¯¥åºåˆ—ä¸­æœ€å¤§å…ƒç´ å’Œæœ€å°å…ƒç´ çš„å·®å€¼ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¿”å› nums çš„æ‰€æœ‰éç©º å­åºåˆ— çš„ å®½åº¦ä¹‹å’Œ ã€‚ç”±äºç­”æ¡ˆå¯èƒ½éå¸¸å¤§ï¼Œè¯·è¿”å›å¯¹ 109 + 7 å–ä½™ åçš„ç»“æœã€‚</p><p>å­åºåˆ— å®šä¹‰ä¸ºä»ä¸€ä¸ªæ•°ç»„é‡Œåˆ é™¤ä¸€äº›ï¼ˆæˆ–è€…ä¸åˆ é™¤ï¼‰å…ƒç´ ï¼Œä½†ä¸æ”¹å˜å‰©ä¸‹å…ƒç´ çš„é¡ºåºå¾—åˆ°çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] å°±æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„ä¸€ä¸ªå­åºåˆ—ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[2,1,3]</span><br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šå­åºåˆ—ä¸º <span class="hljs-comment">[1]</span>, <span class="hljs-comment">[2]</span>, <span class="hljs-comment">[3]</span>, <span class="hljs-comment">[2,1]</span>, <span class="hljs-comment">[2,3]</span>, <span class="hljs-comment">[1,3]</span>, <span class="hljs-comment">[2,1,3]</span> ã€‚<br>ç›¸åº”çš„å®½åº¦æ˜¯ 0, 0, 0, 1, 1, 2, 2 ã€‚<br>å®½åº¦ä¹‹å’Œæ˜¯ 6 ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜æ²¡ä»€ä¹ˆå¥½çš„æ€è·¯ï¼Œå‚è€ƒäº†å¤§ä½¬çš„ï¼š<a href="https://leetcode.cn/problems/sum-of-subsequence-widths/solutions/1977443/tan-xin-by-heren1229-bo9s/">é“¾æ¥</a></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªæ•°ç»„æœ‰<code>2^n-1ä¸ª</code>éç©ºå­åºåˆ—ï¼Œæšä¸¾æ˜¾ç„¶æ˜¯ä¸å¯è¡Œçš„ã€‚ æ¢ä¸€ä¸ªè§’åº¦æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œäº‹å®ä¸Šï¼Œå¯¹äºæ¯ä¸€ä¸ªå­åºåˆ—ï¼Œå…ƒç´ çš„é¡ºåºä¸å½±å“ç»“æœï¼Œå› ä¸ºæˆ‘ä»¬åªè¦çŸ¥é“å®ƒçš„æœ€å¤§å€¼å’Œæœ€å°å€¼å°±å¯ä»¥äº†ã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³çŸ¥é“ï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ æ¥è¯´ï¼Œæœ‰å‡ ä¸ªå­åºåˆ—ä»¥å®ƒä¸ºæœ€å¤§å€¼ï¼Œåˆæœ‰å‡ ä¸ªå­åºåˆ—ä»¥å®ƒä¸ºæœ€å°å€¼ï¼Ÿ è€ƒè™‘ä»¥æŸä¸ªå…ƒç´ ä¸ºæœ€å°å€¼çš„åºåˆ—ä¸ªæ•°ã€‚å¦‚æœæ˜¯æ•´ä¸ªåºåˆ—çš„æœ€å°å€¼ï¼Œæ˜¾ç„¶ï¼Œæ‰€æœ‰åŒ…å«å®ƒçš„å­åºåˆ—éƒ½ä»¥å®ƒä¸ºæœ€å°å€¼ï¼Œæ•°ç›®ä¸º<code>2^(n-1)</code>ã€‚é‚£æ¬¡å°å€¼å‘¢ï¼Ÿå°±æ˜¯åŒ…å«å®ƒï¼Œä½†ä¸åŒ…å«æœ€å°å€¼çš„åºåˆ—ä¸ªæ•°ï¼Œå°±æ˜¯2<sup>(n-2)ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±çœ‹å‡ºè§„å¾‹æ¥äº†ï¼šå¦‚æœæŸä¸ªæ•°æ˜¯æ•°ç»„ä¸­ç¬¬kå°çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»¥å®ƒä¸ºæœ€å°å€¼çš„å­åºåˆ—å°±æœ‰2</sup>(n-k)ä¸ªã€‚å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä»é€‰ä¸ä¸é€‰çš„è§’åº¦è€ƒè™‘å­åºåˆ—ä¸ªæ•°ï¼Œå½“ç¡®å®šä»¥ç¬¬kå°çš„å…ƒç´ ä¸ºæœ€å°å€¼æ—¶ï¼Œå‰é¢k-1ä¸ªéƒ½ä¸èƒ½é€‰ï¼Œç¬¬kä¸ªå¿…é¡»é€‰ï¼Œå‰©ä¸‹å¯é€‰å¯ä¸é€‰çš„è¿˜æœ‰n-kä¸ªï¼Œå­åºåˆ—è‡ªç„¶å°±æ˜¯<code>2^(n-k)</code>ä¸ªäº†ã€‚ åŒç†ï¼Œä»¥ç¬¬kå¤§å…ƒç´ ä¸ºæœ€å¤§å€¼çš„å­åºåˆ—ä¹Ÿæœ‰<code>2^(n-k)</code>ä¸ªã€‚ æ¥ä¸‹æ¥è€ƒè™‘å¦‚ä½•ç”¨ä»£ç è®¡ç®—ã€‚ç›´æ¥å†™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºä¸å¯èƒ½ç®—<code>2^100000</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªç³»æ•°ï¼Œä»1åˆ°<code>2^(n-1)</code>ï¼Œæ¯æ¬¡ä¹˜äºŒï¼Œæ ¹æ®ä¸Šè¿°çš„æè¿°ï¼Œå¯ä»¥æ¨çŸ¥ï¼Œä»¥ç¬¬kå°å…ƒç´ ä¸ºæœ€å¤§å€¼çš„åºåˆ—æ•°=ä»¥ç¬¬kå¤§å…ƒç´ ä¸ºæœ€å°å€¼çš„åºåˆ—æ•°<code>2^k</code>ï¼Œ(kä»0å¼€å§‹)ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»å°åˆ°å¤§éå†ï¼Œæ¯æ¬¡åŠ ä¸Š<code>(2^k)</code>ä¹˜ä»¥ç¬¬kå°å€¼ï¼Œå‡å»<code>(2^k)</code>ä¹˜ä»¥ç¬¬kå¤§å€¼ã€‚ æ’åºæ—¶é—´å¤æ‚åº¦O(nlogn)ï¼Œè®¡ç®—æ—¶é—´å¤æ‚åº¦O(n)</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">mod</span>=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>; <br>    <span class="hljs-built_in">int</span> sumSubseqWidths(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums) &#123;<br>        <span class="hljs-built_in">int</span> n=nums.size();<br>        sort(nums.begin(),nums.end());<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> k=<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            ans=(ans+nums[i]*k-nums[n<span class="hljs-number">-1</span>-i]*k)%<span class="hljs-keyword">mod</span>;<br>            k=(k*<span class="hljs-number">2</span>)%<span class="hljs-keyword">mod</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åŒ¹é…å­åºåˆ—çš„å•è¯æ•°</title>
    <link href="/2022/11/17/%E5%8C%B9%E9%85%8D%E5%AD%90%E5%BA%8F%E5%88%97%E7%9A%84%E5%8D%95%E8%AF%8D%E6%95%B0/"/>
    <url>/2022/11/17/%E5%8C%B9%E9%85%8D%E5%AD%90%E5%BA%8F%E5%88%97%E7%9A%84%E5%8D%95%E8%AF%8D%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%8C%B9%E9%85%8D%E5%AD%90%E5%BA%8F%E5%88%97%E7%9A%84%E5%8D%95%E8%AF%8D%E6%95%B0">åŒ¹é…å­åºåˆ—çš„å•è¯æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åŒ¹é…å­åºåˆ—çš„å•è¯æ•°"><a class="markdownIt-Anchor" href="#åŒ¹é…å­åºåˆ—çš„å•è¯æ•°"></a> åŒ¹é…å­åºåˆ—çš„å•è¯æ•°</h2><p><a href="https://leetcode.cn/problems/number-of-matching-subsequences/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šå­—ç¬¦ä¸² s å’Œå­—ç¬¦ä¸²æ•°ç»„ words, è¿”å›  words[i] ä¸­æ˜¯sçš„å­åºåˆ—çš„å•è¯ä¸ªæ•° ã€‚</p><p>å­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯ä»åŸå§‹å­—ç¬¦ä¸²ä¸­ç”Ÿæˆçš„æ–°å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä»ä¸­åˆ å»ä¸€äº›å­—ç¬¦(å¯ä»¥æ˜¯none)ï¼Œè€Œä¸æ”¹å˜å…¶ä½™å­—ç¬¦çš„ç›¸å¯¹é¡ºåºã€‚</p><p>ä¾‹å¦‚ï¼Œ â€œaceâ€ æ˜¯ â€œabcdeâ€ çš„å­åºåˆ—ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">è¾“å…¥: s = <span class="hljs-string">&quot;dsahjpjauf&quot;</span>, <span class="hljs-built_in">words</span> = [<span class="hljs-string">&quot;ahjpjau&quot;</span>,<span class="hljs-string">&quot;ja&quot;</span>,<span class="hljs-string">&quot;ahbwzgqnuk&quot;</span>,<span class="hljs-string">&quot;tnmlanowax&quot;</span>]<br>è¾“å‡º: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨<code>pair(i,j)</code>è¡¨ç¤ºwordsä¸­ï¼Œç¬¬<code>i</code>ä¸ªå­—ç¬¦ä¸²çš„æŸ¥è¯¢åˆ°äº†ç¬¬<code>j</code>ä¸ªå­—ç¬¦ï¼Œå¼€å§‹å…ˆå°†wordsä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ”¾å…¥å¯¹åº”queueä¸­ï¼Œç„¶åéå†æ‰€æœ‰sä¸­çš„å­—ç¬¦ï¼Œå–å‡ºå­—ç¬¦å¯¹åº”çš„queueï¼Œç„¶åä¾æ¬¡å‡ºé˜Ÿåˆ—ï¼Œå°†å¯¹åº”wordsä¸­çš„å­—ç¬¦ä¸²çš„ä¸‹æ ‡<code>j</code>å¢åŠ 1ï¼Œå¦‚æœ<code>j</code>ç­‰äºæ‰€åœ¨å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¯´æ˜è¯¥å­—ç¬¦ä¸²ç¬¦åˆè¦æ±‚ã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">numMatchingSubseq</span><span class="hljs-params">(string s, vector&lt;string&gt;&amp; words)</span> </span>&#123;<br>        <span class="hljs-type">int</span> len=words.<span class="hljs-built_in">size</span>();<br>        vector&lt;queue&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt;&gt; <span class="hljs-built_in">v</span>(<span class="hljs-number">26</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>            v[words[i][<span class="hljs-number">0</span>]-<span class="hljs-string">&#x27;a&#x27;</span>].<span class="hljs-built_in">push</span>(&#123;i,<span class="hljs-number">0</span>&#125;);<br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span>&amp; c:s)<br>        &#123;<br>            <span class="hljs-keyword">auto</span>&amp; q=v[c-<span class="hljs-string">&#x27;a&#x27;</span>];<br>            <span class="hljs-type">int</span> n=q.<span class="hljs-built_in">size</span>();<br>            <span class="hljs-keyword">while</span>(n--)<br>            &#123;<br>                <span class="hljs-type">int</span> i=q.<span class="hljs-built_in">front</span>().first;<br>                <span class="hljs-type">int</span> j=q.<span class="hljs-built_in">front</span>().second;<br>                q.<span class="hljs-built_in">pop</span>();<br>                ++j;<br>                <span class="hljs-keyword">if</span>(j==words[i].<span class="hljs-built_in">size</span>())<br>                    ++ans;<br>                <span class="hljs-keyword">else</span><br>                    v[words[i][j]-<span class="hljs-string">&#x27;a&#x27;</span>].<span class="hljs-built_in">push</span>(&#123;i,j&#125;);                <br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å›æ–‡ä¸²ä¸ªæ•°</title>
    <link href="/2022/11/13/%E5%9B%9E%E6%96%87%E4%B8%B2%E4%B8%AA%E6%95%B0/"/>
    <url>/2022/11/13/%E5%9B%9E%E6%96%87%E4%B8%B2%E4%B8%AA%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2">å›æ–‡å­ä¸²</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E4%B8%8D%E9%87%8D%E5%8F%A0%E5%9B%9E%E6%96%87%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E7%9B%AE">ä¸é‡å å›æ–‡å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å›æ–‡å­ä¸²"><a class="markdownIt-Anchor" href="#å›æ–‡å­ä¸²"></a> å›æ–‡å­ä¸²</h2><p><a href="https://leetcode.cn/problems/palindromic-substrings/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ä¸­ å›æ–‡å­ä¸² çš„æ•°ç›®ã€‚</p><p>å›æ–‡å­—ç¬¦ä¸² æ˜¯æ­£ç€è¯»å’Œå€’è¿‡æ¥è¯»ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚</p><p>å­å­—ç¬¦ä¸² æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç”±è¿ç»­å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªåºåˆ—ã€‚</p><p>å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;aaa&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">6</span><br>è§£é‡Šï¼š<span class="hljs-number">6</span>ä¸ªå›æ–‡å­ä¸²: <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-string">&quot;aaa&quot;</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å…³äºå›æ–‡ä¸²æ•°é‡é—®é¢˜ä¸€èˆ¬ç”¨ä¸­å¿ƒæ‰©å±•æ³•ï¼Œå³ï¼š</p><blockquote><p>æšä¸¾æ¯ä¸€ä¸ªå¯èƒ½çš„å›æ–‡ä¸­å¿ƒï¼Œç„¶åç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«å‘å·¦å³ä¸¤è¾¹æ‹“å±•ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ç›¸åŒçš„æ—¶å€™å°±æ‹“å±•ï¼Œå¦åˆ™åœæ­¢æ‹“å±•ã€‚</p></blockquote><p>å…³äºå›æ–‡ä¸­å¿ƒçš„æ•°é‡ï¼Œæœ‰ä»¥ä¸‹è§„å¾‹ï¼š</p><ul><li>é•¿åº¦ä¸º<code>n</code>çš„å­—ç¬¦ä¸²å¯ä»¥å¾—åˆ°<code>2*n-1</code>ç»„å›æ–‡ä¸­å¿ƒ<code>[l,r]</code></li><li>ç¬¬<code>i</code>ç»„å›æ–‡ä¸­å¿ƒçš„<code>l=i/2,r=i/2+i%2</code>;</li></ul><p>ä»æ‰€æœ‰å›æ–‡ä¸­å¿ƒå¼€å§‹æ‰©å±•ï¼Œå¯ä»¥å¾—åˆ°æ‰€æœ‰å›æ–‡å­ä¸²çš„æ•°é‡</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> countSubstrings(<span class="hljs-built_in">string</span> s) &#123;<br>        <span class="hljs-built_in">int</span> n=s.size();<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>*n<span class="hljs-number">-1</span>;++i)<br>        &#123;<br>            <span class="hljs-built_in">int</span> l=i/<span class="hljs-number">2</span>;<br>            <span class="hljs-built_in">int</span> r=l+i%<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">while</span>(l&gt;=<span class="hljs-number">0</span>&amp;&amp;r&lt;n&amp;&amp;s[l]==s[r])<br>            &#123;<br>                --l;<br>                ++r;<br>                ++ans;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ä¸é‡å å›æ–‡å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®"><a class="markdownIt-Anchor" href="#ä¸é‡å å›æ–‡å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®"></a> ä¸é‡å å›æ–‡å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®</h2><p><a href="https://leetcode.cn/problems/maximum-number-of-non-overlapping-palindrome-substrings/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ª æ­£ æ•´æ•° k ã€‚</p><p>ä»å­—ç¬¦ä¸² s ä¸­é€‰å‡ºä¸€ç»„æ»¡è¶³ä¸‹è¿°æ¡ä»¶ä¸” ä¸é‡å  çš„å­å­—ç¬¦ä¸²ï¼š</p><p>æ¯ä¸ªå­å­—ç¬¦ä¸²çš„é•¿åº¦ è‡³å°‘ ä¸º k ã€‚<br />æ¯ä¸ªå­å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª å›æ–‡ä¸² ã€‚<br />è¿”å›æœ€ä¼˜æ–¹æ¡ˆä¸­èƒ½é€‰æ‹©çš„å­å­—ç¬¦ä¸²çš„ æœ€å¤§ æ•°ç›®ã€‚</p><p>å­å­—ç¬¦ä¸² æ˜¯å­—ç¬¦ä¸²ä¸­ä¸€ä¸ªè¿ç»­çš„å­—ç¬¦åºåˆ—ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;abaccdbbd&quot;</span>, <span class="hljs-attr">k</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šå¯ä»¥é€‰æ‹© <span class="hljs-attr">s</span> = <span class="hljs-string">&quot;abaccdbbd&quot;</span> ä¸­æ–œä½“åŠ ç²—çš„å­å­—ç¬¦ä¸²ã€‚<span class="hljs-string">&quot;aba&quot;</span> å’Œ <span class="hljs-string">&quot;dbbd&quot;</span> éƒ½æ˜¯å›æ–‡ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º <span class="hljs-attr">k</span> = <span class="hljs-number">3</span> ã€‚<br>å¯ä»¥è¯æ˜ï¼Œæ— æ³•é€‰å‡ºä¸¤ä¸ªä»¥ä¸Šçš„æœ‰æ•ˆå­å­—ç¬¦ä¸²ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯ä¸­å¿ƒæ‰©å±•æ³•+dp</p><p>ä¸­å¿ƒæ‰©å±•æ³•å¯å‚è€ƒä¸Šé¢çš„é¢˜ï¼Œæ­¤é¢˜ä¸­ç”¨<code>dp[i]</code>è¡¨ç¤º<code>0ï½i-1</code>çš„å­ä¸²ä¸­ç¬¦åˆè¦æ±‚çš„å­ä¸²ä¸ªæ•°ï¼Œé€šè¿‡ä¸­å¿ƒæ‰©å±•æ³•å¯å¾—åˆ°è‹¥å¹²å›æ–‡ä¸­å¿ƒï¼Œå¯¹äºæ¯ä¸€ä¸ªå›æ–‡ä¸­å¿ƒï¼Œè¦æ›´æ–°lã€rå¯¹åº”çš„dpå€¼ï¼Œå³<code>dp[l+1]</code>å’Œ<code>dp[r+1]</code>ã€‚</p><ul><li>å¯¹äº<code>dp[l+1]</code>ï¼Œè¦è€ƒè™‘æ˜¯å¦åŠ å…¥<code>l</code>ä½ç½®çš„å­—ç¬¦ï¼Œæ‰€ä»¥<code>dp[l+1]=max(dp[l+1],dp[l])</code></li><li>å¯¹äº<code>dp[r+1]</code>ï¼Œå› ä¸º<code>l~r</code>æ˜¯ä¸ªå›æ–‡ä¸²ï¼Œæ‰€ä»¥æ¯”è¾ƒçš„æ˜¯<code>0~l-1</code>å’Œ<code>0~r</code>è¿™ä¸¤æ®µï¼Œ<code>dp[r+1]=max(dp[r+1],dp[l]+1)</code></li></ul><p>æœ€å<code>dp[n]</code>å³æœ€ç»ˆç­”æ¡ˆ</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> maxPalindromes(<span class="hljs-keyword">string</span> s, <span class="hljs-keyword">int</span> k) &#123;<br>        <span class="hljs-keyword">int</span> n=s.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; dp(n+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>*n<span class="hljs-number">-1</span>;++i)<br>        &#123;<br>            <span class="hljs-keyword">int</span> l=i/<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">int</span> r=l+i%2;<br>            dp[l+<span class="hljs-number">1</span>]=<span class="hljs-keyword">max</span>(dp[l+<span class="hljs-number">1</span>],dp[l]);<br>            <span class="hljs-keyword">while</span>(l&gt;=<span class="hljs-number">0</span>&amp;&amp;r&lt;n&amp;&amp;s[l]==s[r])<br>            &#123;<br>                <span class="hljs-keyword">if</span>(r-l+<span class="hljs-number">1</span>&gt;=k)<br>                &#123;<br>                    dp[r+<span class="hljs-number">1</span>]=<span class="hljs-keyword">max</span>(dp[r+<span class="hljs-number">1</span>],dp[l]+<span class="hljs-number">1</span>);<br>                &#125;<br>                --l;<br>                ++r;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[n];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤šç±³è¯ºå’Œæ‰˜ç±³è¯ºå¹³é“º</title>
    <link href="/2022/11/12/%E5%A4%9A%E7%B1%B3%E8%AF%BA%E5%92%8C%E6%89%98%E7%B1%B3%E8%AF%BA%E5%B9%B3%E9%93%BA/"/>
    <url>/2022/11/12/%E5%A4%9A%E7%B1%B3%E8%AF%BA%E5%92%8C%E6%89%98%E7%B1%B3%E8%AF%BA%E5%B9%B3%E9%93%BA/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%A4%9A%E7%B1%B3%E8%AF%BA%E5%92%8C%E6%89%98%E7%B1%B3%E8%AF%BA%E5%B9%B3%E9%93%BA">å¤šç±³è¯ºå’Œæ‰˜ç±³è¯ºå¹³é“º</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å¤šç±³è¯ºå’Œæ‰˜ç±³è¯ºå¹³é“º"><a class="markdownIt-Anchor" href="#å¤šç±³è¯ºå’Œæ‰˜ç±³è¯ºå¹³é“º"></a> å¤šç±³è¯ºå’Œæ‰˜ç±³è¯ºå¹³é“º</h2><p><a href="https://leetcode.cn/problems/domino-and-tromino-tiling/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰ä¸¤ç§å½¢çŠ¶çš„ç“·ç –ï¼šä¸€ç§æ˜¯ 2 x 1 çš„å¤šç±³è¯ºå½¢ï¼Œå¦ä¸€ç§æ˜¯å½¢å¦‚ â€œLâ€ çš„æ‰˜ç±³è¯ºå½¢ã€‚ä¸¤ç§å½¢çŠ¶éƒ½å¯ä»¥æ—‹è½¬ã€‚<br /><img src="https://assets.leetcode.com/uploads/2021/07/15/lc-domino.jpg" alt="" /><br />ç»™å®šæ•´æ•° n ï¼Œè¿”å›å¯ä»¥å¹³é“º 2 x n çš„é¢æ¿çš„æ–¹æ³•çš„æ•°é‡ã€‚è¿”å›å¯¹ 109 + 7 å–æ¨¡ çš„å€¼ã€‚</p><p>å¹³é“ºæŒ‡çš„æ˜¯æ¯ä¸ªæ­£æ–¹å½¢éƒ½å¿…é¡»æœ‰ç“·ç –è¦†ç›–ã€‚ä¸¤ä¸ªå¹³é“ºä¸åŒï¼Œå½“ä¸”ä»…å½“é¢æ¿ä¸Šæœ‰å››ä¸ªæ–¹å‘ä¸Šçš„ç›¸é‚»å•å…ƒä¸­çš„ä¸¤ä¸ªï¼Œä½¿å¾—æ°å¥½æœ‰ä¸€ä¸ªå¹³é“ºæœ‰ä¸€ä¸ªç“·ç –å æ®ä¸¤ä¸ªæ­£æ–¹å½¢ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: n = 3</span><br><span class="hljs-section">è¾“å‡º: 5</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’é¢˜ç›®ï¼Œ<code>dp[i][4]</code>è¡¨ç¤ºç¬¬iåˆ—åœ¨4ç§æƒ…å†µä¸‹çš„ç±»æ•°ã€‚</p><ul><li>dp[i][0]:å½“ç¬¬iåˆ—ä¸€ä¸ªç“·ç –ä¹Ÿæ²¡æœ‰ï¼Œè¯´æ˜ä¸Šä¸€åˆ—å¡«æ»¡äº†,<code>dp[i][0]=dp[i-1][3]</code></li><li>dp[i][1]:ç¬¬iåˆ—åªæœ‰ä¸Šè¾¹æœ‰ç“·ç –ï¼Œè¯´æ˜i-1åˆ—å¯èƒ½åªæœ‰ä¸‹è¾¹æœ‰ï¼Œæˆ–è€…ä¸€ä¸ªä¹Ÿæ²¡æœ‰ï¼Œ<code>dp[i][1]=dp[i-1][0]+dp[i-1][2]</code></li><li>dp[i][2]:ç¬¬iåˆ—åªæœ‰ä¸‹è¾¹æœ‰ç“·ç –ï¼Œè¯´æ˜i-1åˆ—å¯èƒ½åªæœ‰ä¸Šè¾¹æœ‰ï¼Œæˆ–è€…ä¸€ä¸ªä¹Ÿæ²¡æœ‰ï¼Œ<code>dp[i][2]=dp[i-1][0]+dp[i-1][1]</code></li><li>dp[i][3]:ç¬¬iåˆ—ä¸Šä¸‹éƒ½æœ‰ï¼Œå¯èƒ½i-1åˆ—ä¸Šä¸‹éƒ½æœ‰ï¼Œä¹Ÿå¯èƒ½i-1åˆ—ä¸Šæˆ–è€…ä¸‹æœ‰ï¼Œè¦åŠ Lå‹çš„ï¼Œä¹Ÿå¯èƒ½i-1åˆ—ä¸Šä¸‹éƒ½æ²¡æœ‰ï¼ŒåŠ äº†ä¸¤ä¸ªå¤šç±³è¯ºçš„ã€‚<code>dp[i][3]=dp[i-1][0]+dp[i-1][1]+dp[i-1][2]+dp[i-1][3]</code></li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><br>class <span class="hljs-symbol">Solution</span> &#123;<br>public:<br>    static const int mod=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br>    long long dp[<span class="hljs-number">1001</span>][<span class="hljs-number">4</span>];<br>    int numTilings(int n) &#123;<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">3</span>]=<span class="hljs-number">1</span>;<br>        for(int i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>        &#123;<br>            dp[i][<span class="hljs-number">0</span>]=dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>]<span class="hljs-comment">%mod;</span><br>            dp[i][<span class="hljs-number">1</span>]=(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]+dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>])<span class="hljs-comment">%mod;</span><br>            dp[i][<span class="hljs-number">2</span>]=(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]+dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>])<span class="hljs-comment">%mod;</span><br>            dp[i][<span class="hljs-number">3</span>]=(dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>]+dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">1</span>]+dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">2</span>]+dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">3</span>])<span class="hljs-comment">%mod;</span><br>        &#125;<br>        return dp[n][<span class="hljs-number">3</span>];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ»‘åŠ¨çª—å£</title>
    <link href="/2022/11/11/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"/>
    <url>/2022/11/11/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%95%BF%E5%BA%A6%E4%B8%BA-k-%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C">é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E5%8C%BA%E9%97%B4%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AA%E6%95%B0">åŒºé—´å­æ•°ç»„ä¸ªæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><blockquote><p>æ»‘åŠ¨çª—å£ä¹Ÿæ˜¯å¾ˆå…¸å‹çš„ä¸€ç±»é¢˜ï¼Œè¿™é‡Œä¸¾ä¸ªç®€å•çš„ä¾‹å­å›é¡¾ä¸€ä¸‹ä¸»è¦æ€æƒ³ã€‚<s>(æ°´ç¯‡åšå®¢ğŸ˜‚)</s></p></blockquote><h2 id="é•¿åº¦ä¸º-k-å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ"><a class="markdownIt-Anchor" href="#é•¿åº¦ä¸º-k-å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ"></a> é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ</h2><p><a href="https://leetcode.cn/problems/maximum-sum-of-distinct-subarrays-with-length-k/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ã€‚è¯·ä½ ä» nums ä¸­æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„å…¨éƒ¨å­æ•°ç»„ä¸­æ‰¾å‡ºæœ€å¤§å­æ•°ç»„å’Œï¼š</p><p>å­æ•°ç»„çš„é•¿åº¦æ˜¯ kï¼Œä¸”<br />å­æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´  å„ä¸ç›¸åŒ ã€‚<br />è¿”å›æ»¡è¶³é¢˜é¢è¦æ±‚çš„æœ€å¤§å­æ•°ç»„å’Œã€‚å¦‚æœä¸å­˜åœ¨å­æ•°ç»„æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œè¿”å› 0 ã€‚</p><p>å­æ•°ç»„ æ˜¯æ•°ç»„ä¸­ä¸€æ®µè¿ç»­éç©ºçš„å…ƒç´ åºåˆ—ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è®¾ç½®ä¸€ä¸ª<code>hashset</code>ï¼Œç”¨<code>l</code>è®°å½•æ»‘åŠ¨çª—å£å·¦ç«¯ä¸‹æ ‡ï¼Œç„¶åéå†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ul><li>åˆ¤æ–­setä¸­æœ‰æ²¡æœ‰è¯¥å…ƒç´ ï¼Œæœ‰çš„è¯ä¸æ–­åˆ é™¤æœ€å·¦è¾¹çš„æ•°ç›´åˆ°æ²¡æœ‰è¯¥å…ƒç´ </li><li>çª—å£å¤§å°å¦‚æœå¤§äºç­‰äºkï¼Œä»å·¦è¾¹åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååŠ å…¥å½“å‰å…ƒç´ ï¼Œæ›´æ–°æœ€å¤§å’Œ</li><li>çª—å£å¤§å°å¦‚æœå°äºkï¼Œåˆ™åŠ å…¥å½“å‰å…ƒç´ ï¼Œå¦‚æœåŠ å…¥åçª—å£å¤§å°ä¸ºkï¼Œæ›´æ–°æœ€å¤§å’Œ</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    unordered_set&lt;<span class="hljs-built_in">int</span>&gt; st;<br>    <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> maximumSubarraySum(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums, <span class="hljs-built_in">int</span> k) &#123;<br>        <span class="hljs-built_in">int</span> len=nums.size();<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> <span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(st.<span class="hljs-keyword">count</span>(nums[i]))<br>            &#123;<br>                <span class="hljs-keyword">sum</span>-=nums[l];<br>                st.erase(nums[l]);<br>                ++l;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(i-l&gt;=k)<br>            &#123;<br>                <span class="hljs-keyword">sum</span>-=nums[l];<br>                st.erase(nums[l]);<br>                ++l;<br>                <span class="hljs-keyword">sum</span>+=nums[i];<br>                st.insert(nums[i]);<br>                ans=max(ans,<span class="hljs-keyword">sum</span>);   <br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                st.insert(nums[i]);<br>                <span class="hljs-keyword">sum</span>+=nums[i];<br>                <span class="hljs-keyword">if</span>(i-l==k<span class="hljs-number">-1</span>)<br>                    ans=max(ans,<span class="hljs-keyword">sum</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="åŒºé—´å­æ•°ç»„ä¸ªæ•°"><a class="markdownIt-Anchor" href="#åŒºé—´å­æ•°ç»„ä¸ªæ•°"></a> åŒºé—´å­æ•°ç»„ä¸ªæ•°</h2><p><a href="https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸¤ä¸ªæ•´æ•°ï¼šleft åŠ right ã€‚æ‰¾å‡º nums ä¸­è¿ç»­ã€éç©ºä¸”å…¶ä¸­æœ€å¤§å…ƒç´ åœ¨èŒƒå›´ [left, right] å†…çš„å­æ•°ç»„ï¼Œå¹¶è¿”å›æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><p>ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¿è¯ç»“æœç¬¦åˆ 32-bit æ•´æ•°èŒƒå›´ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[2,1,4,3]</span>, <span class="hljs-attribute">left</span> = <span class="hljs-number">2</span>, right = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼šæ»¡è¶³æ¡ä»¶çš„ä¸‰ä¸ªå­æ•°ç»„ï¼š<span class="hljs-selector-attr">[2]</span>, <span class="hljs-selector-attr">[2, 1]</span>, <span class="hljs-selector-attr">[3]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>ç”¨lå’Œrè®°å½•æ»‘åŠ¨çª—å£çš„å·¦å³ç«¯ï¼Œç„¶åä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¦‚æœå½“å‰å…ƒç´ ç¬¦åˆè¦æ±‚ï¼Œ<code>r=i</code>ï¼Œå¦‚æœå½“å‰å…ƒç´ å¤§äºrightï¼Œ<code>r=i+1</code>,ç„¶ååŠ ä¸Šæ¯æ¬¡çš„ç»“æœ<code>r-l+1</code></p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs excel">class Solution &#123;<br>publ<span class="hljs-symbol">ic:</span><br>    <span class="hljs-built_in">int</span> numSubarrayBoundedMax(vector&lt;<span class="hljs-built_in">int</span>&gt;&amp; nums, <span class="hljs-built_in">int</span> <span class="hljs-built_in">left</span>, <span class="hljs-built_in">int</span> <span class="hljs-built_in">right</span>) &#123;<br>        <span class="hljs-built_in">int</span> <span class="hljs-built_in">len</span>=nums.size();<br>        <span class="hljs-built_in">int</span> l=<span class="hljs-number">0</span>,r=-<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>;++i)<br>        &#123;<br>            <span class="hljs-built_in">if</span>(nums[i]&gt;=<span class="hljs-built_in">left</span>&amp;&amp;nums[i]&lt;=<span class="hljs-built_in">right</span>)<br>                r=i;<br>            else <span class="hljs-built_in">if</span>(nums[i]&gt;<span class="hljs-built_in">right</span>)<br>                l=i+<span class="hljs-number">1</span>;<br>            ans+=<span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>,r-l+<span class="hljs-number">1</span>);<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è·å–æ‰€æœ‰é’¥åŒ™çš„æœ€çŸ­è·¯å¾„</title>
    <link href="/2022/11/10/%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%92%A5%E5%8C%99%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/"/>
    <url>/2022/11/10/%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%92%A5%E5%8C%99%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%92%A5%E5%8C%99%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84">è·å–æ‰€æœ‰é’¥åŒ™çš„æœ€çŸ­è·¯å¾„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è·å–æ‰€æœ‰é’¥åŒ™çš„æœ€çŸ­è·¯å¾„"><a class="markdownIt-Anchor" href="#è·å–æ‰€æœ‰é’¥åŒ™çš„æœ€çŸ­è·¯å¾„"></a> è·å–æ‰€æœ‰é’¥åŒ™çš„æœ€çŸ­è·¯å¾„</h2><p><a href="https://leetcode.cn/problems/shortest-path-to-get-all-keys/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªäºŒç»´ç½‘æ ¼ grid ï¼Œå…¶ä¸­ï¼š</p><p>â€˜.â€™ ä»£è¡¨ä¸€ä¸ªç©ºæˆ¿é—´<br />â€˜#â€™ ä»£è¡¨ä¸€å µ<br />â€˜@â€™ æ˜¯èµ·ç‚¹<br />å°å†™å­—æ¯ä»£è¡¨é’¥åŒ™<br />å¤§å†™å­—æ¯ä»£è¡¨é”<br />æˆ‘ä»¬ä»èµ·ç‚¹å¼€å§‹å‡ºå‘ï¼Œä¸€æ¬¡ç§»åŠ¨æ˜¯æŒ‡å‘å››ä¸ªåŸºæœ¬æ–¹å‘ä¹‹ä¸€è¡Œèµ°ä¸€ä¸ªå•ä½ç©ºé—´ã€‚æˆ‘ä»¬ä¸èƒ½åœ¨ç½‘æ ¼å¤–é¢è¡Œèµ°ï¼Œä¹Ÿæ— æ³•ç©¿è¿‡ä¸€å µå¢™ã€‚å¦‚æœé€”ç»ä¸€ä¸ªé’¥åŒ™ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒæ¡èµ·æ¥ã€‚é™¤éæˆ‘ä»¬æ‰‹é‡Œæœ‰å¯¹åº”çš„é’¥åŒ™ï¼Œå¦åˆ™æ— æ³•é€šè¿‡é”ã€‚</p><p>å‡è®¾ k ä¸º é’¥åŒ™/é” çš„ä¸ªæ•°ï¼Œä¸”æ»¡è¶³ 1 &lt;= k &lt;= 6ï¼Œå­—æ¯è¡¨ä¸­çš„å‰ k ä¸ªå­—æ¯åœ¨ç½‘æ ¼ä¸­éƒ½æœ‰è‡ªå·±å¯¹åº”çš„ä¸€ä¸ªå°å†™å’Œä¸€ä¸ªå¤§å†™å­—æ¯ã€‚æ¢è¨€ä¹‹ï¼Œæ¯ä¸ªé”æœ‰å”¯ä¸€å¯¹åº”çš„é’¥åŒ™ï¼Œæ¯ä¸ªé’¥åŒ™ä¹Ÿæœ‰å”¯ä¸€å¯¹åº”çš„é”ã€‚å¦å¤–ï¼Œä»£è¡¨é’¥åŒ™å’Œé”çš„å­—æ¯äº’ä¸ºå¤§å°å†™å¹¶æŒ‰å­—æ¯é¡ºåºæ’åˆ—ã€‚</p><p>è¿”å›è·å–æ‰€æœ‰é’¥åŒ™æ‰€éœ€è¦çš„ç§»åŠ¨çš„æœ€å°‘æ¬¡æ•°ã€‚å¦‚æœæ— æ³•è·å–æ‰€æœ‰é’¥åŒ™ï¼Œè¿”å› -1 ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs maxima">è¾“å…¥ï¼š<span class="hljs-built_in">grid</span> = [<span class="hljs-string">&quot;@.a.#&quot;</span>,<span class="hljs-string">&quot;###.#&quot;</span>,<span class="hljs-string">&quot;b.A.B&quot;</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">8</span><br>è§£é‡Šï¼šç›®æ ‡æ˜¯è·å¾—æ‰€æœ‰é’¥åŒ™ï¼Œè€Œä¸æ˜¯æ‰“å¼€æ‰€æœ‰é”<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ä¸€ä¸ªä¸‰å…ƒç»„<code>(x,y,status)</code> è¡¨ç¤ºå½“å‰çš„çŠ¶æ€ï¼Œå…¶ä¸­ <code>(x,y)</code> è¡¨ç¤ºå½“å‰æ‰€å¤„çš„ä½ç½®ï¼Œ<code>status</code> æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œé•¿åº¦æ°å¥½ç­‰äºç½‘æ ¼ä¸­é’¥åŒ™çš„æ•°ç›®ï¼Œ<code>status</code> çš„ç¬¬ i ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1ï¼Œå½“ä¸”ä»…å½“æˆ‘ä»¬å·²ç»è·å¾—äº†ç½‘æ ¼ä¸­çš„ç¬¬ i æŠŠé’¥åŒ™ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸Šè¿°çš„çŠ¶æ€è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚åˆå§‹æ—¶ï¼Œæˆ‘ä»¬æŠŠ <code>(srcx,srcy,0)</code>åŠ å…¥é˜Ÿåˆ—ï¼Œå…¶ä¸­ <code>srcx,srcy)</code> ä¸ºèµ·ç‚¹ã€‚åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘è¿›è¡Œæ‰©å±•ï¼š</p><p>å¦‚æœå¯¹åº”æ–¹å‘æ˜¯ç©ºæˆ¿é—´ï¼Œé‚£ä¹ˆ <code>status</code> çš„å€¼ä¸å˜ï¼›</p><p>å¦‚æœå¯¹åº”æ–¹å‘æ˜¯ç¬¬ i æŠŠé’¥åŒ™ï¼Œé‚£ä¹ˆå°† <code>status</code> çš„ç¬¬ i ä½ç½®ä¸º 111ï¼›</p><p>å¦‚æœå¯¹åº”æ–¹å‘æ˜¯ç¬¬ i æŠŠé”ï¼Œé‚£ä¹ˆåªæœ‰åœ¨ <code>status</code> çš„ç¬¬ i ä½ä¸º 1 æ—¶ï¼Œæ‰å¯ä»¥é€šè¿‡ã€‚</p><p>å½“ <code>status</code> æ¯ä¸€ä½éƒ½ä¸º1æ—¶ï¼Œè¯´æ˜è·å–äº†æ‰€æœ‰é’¥åŒ™ï¼Œæ­¤æ—¶å°±å¯ä»¥è¿”å›æœ€çŸ­è·¯ä½œä¸ºç­”æ¡ˆã€‚</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs prolog">int dir[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>]=&#123;&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>&#125;,&#123;<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;,&#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;&#125;;<br>class <span class="hljs-symbol">Solution</span> &#123;<br>public:<br>    unordered_map&lt;char,int&gt; mp;<br>    queue&lt;tuple&lt;int,int,int&gt;&gt; q;<br>    int shortestPathAllKeys(vector&lt;string&gt;&amp; grid) &#123;<br>        int m=grid.size(),n=grid[<span class="hljs-number">0</span>].size();<br>        int srcx,srcy,dx,dy;<br>        for(int i=<span class="hljs-number">0</span>;i&lt;m;++i)<br>        &#123;<br>            for(int j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                if(grid[i][j]==<span class="hljs-string">&#x27;@&#x27;</span>)<br>                &#123;<br>                    srcx=i;<br>                    srcy=j;<br>                &#125;<br>                else if(grid[i][j]&gt;=<span class="hljs-string">&#x27;a&#x27;</span>&amp;&amp;grid[i][j]&lt;=<span class="hljs-string">&#x27;z&#x27;</span>)<br>                &#123;<br>                    if(!mp.count(grid[i][j]))<br>                        mp[grid[i][j]]=mp.size();<br>                &#125;<br>            &#125;<br>        &#125;<br>        vector&lt;vector&lt;vector&lt;int&gt;&gt;&gt; dis(m,vector&lt;vector&lt;int&gt;&gt;(n,vector&lt;int&gt;(<span class="hljs-number">1</span>&lt;&lt;mp.size(),<span class="hljs-number">-1</span>)));<br>        q.push(&#123;srcx,srcy,<span class="hljs-number">0</span>&#125;);<br>        dis[srcx][srcy][<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        while(!q.empty())<br>        &#123;   <br>            auto[x,y,status]=q.front();<br>            q.pop();<br>            for(int i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;++i)<br>            &#123;<br>                dx=x+dir[i][<span class="hljs-number">0</span>];<br>                dy=y+dir[i][<span class="hljs-number">1</span>];<br>                if(dx&gt;=<span class="hljs-number">0</span>&amp;&amp;dx&lt;m&amp;&amp;dy&gt;=<span class="hljs-number">0</span>&amp;&amp;dy&lt;n&amp;&amp;grid[dx][dy]!=<span class="hljs-string">&#x27;#&#x27;</span>)<br>                &#123;<br>                    if(grid[dx][dy]==<span class="hljs-string">&#x27;.&#x27;</span>||grid[dx][dy]==<span class="hljs-string">&#x27;@&#x27;</span>)<br>                    &#123;<br>                        if(dis[dx][dy][status]==<span class="hljs-number">-1</span>)<br>                        &#123;<br>                            dis[dx][dy][status]=dis[x][y][status]+<span class="hljs-number">1</span>;<br>                            q.push(&#123;dx,dy,status&#125;);<br>                        &#125;<br>                    &#125;<br>                    else if(grid[dx][dy]&gt;=<span class="hljs-string">&#x27;a&#x27;</span>&amp;&amp;grid[dx][dy]&lt;=<span class="hljs-string">&#x27;z&#x27;</span>)<br>                    &#123;<br>                        int idx=mp[grid[dx][dy]];<br>                        if(dis[dx][dy][status|(<span class="hljs-number">1</span>&lt;&lt;idx)]==<span class="hljs-number">-1</span>)<br>                        &#123;<br>                            dis[dx][dy][status|(<span class="hljs-number">1</span>&lt;&lt;idx)]=dis[x][y][status]+<span class="hljs-number">1</span>;<br>                            if((status|(<span class="hljs-number">1</span>&lt;&lt;idx))==(<span class="hljs-number">1</span>&lt;&lt;mp.size())<span class="hljs-number">-1</span>)<br>                                return dis[dx][dy][status|(<span class="hljs-number">1</span>&lt;&lt;idx)];<br>                            q.push(&#123;dx,dy,status|(<span class="hljs-number">1</span>&lt;&lt;idx)&#125;);<br>                        &#125;<br>                    &#125;<br>                    else<br>                    &#123;<br>                        int idx=mp[grid[dx][dy]+<span class="hljs-number">32</span>];<br>                        if((status &amp; (<span class="hljs-number">1</span>&lt;&lt;idx)) &amp;&amp; dis[dx][dy][status]==<span class="hljs-number">-1</span>)<br>                        &#123;<br>                            dis[dx][dy][status]=dis[x][y][status]+<span class="hljs-number">1</span>;<br>                            q.push(&#123;dx,dy,status&#125;);<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        return <span class="hljs-number">-1</span>;<br>    &#125;<br><br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§åŠ å·æ ‡å¿—</title>
    <link href="/2022/11/09/%E6%9C%80%E5%A4%A7%E5%8A%A0%E5%8F%B7%E6%A0%87%E5%BF%97/"/>
    <url>/2022/11/09/%E6%9C%80%E5%A4%A7%E5%8A%A0%E5%8F%B7%E6%A0%87%E5%BF%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%A4%A7%E5%8A%A0%E5%8F%B7%E6%A0%87%E5%BF%97">æœ€å¤§åŠ å·æ ‡å¿—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å¤§åŠ å·æ ‡å¿—"><a class="markdownIt-Anchor" href="#æœ€å¤§åŠ å·æ ‡å¿—"></a> æœ€å¤§åŠ å·æ ‡å¿—</h2><p><a href="https://leetcode.cn/problems/largest-plus-sign/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ª n x n çš„çŸ©é˜µ grid ä¸­ï¼Œé™¤äº†åœ¨æ•°ç»„ mines ä¸­ç»™å‡ºçš„å…ƒç´ ä¸º 0ï¼Œå…¶ä»–æ¯ä¸ªå…ƒç´ éƒ½ä¸º 1ã€‚mines[i] = [xi, yi]è¡¨ç¤º grid[xi][yi] == 0</p><p>è¿”å›  grid ä¸­åŒ…å« 1 çš„æœ€å¤§çš„ è½´å¯¹é½ åŠ å·æ ‡å¿—çš„é˜¶æ•° ã€‚å¦‚æœæœªæ‰¾åˆ°åŠ å·æ ‡å¿—ï¼Œåˆ™è¿”å› 0 ã€‚</p><p>ä¸€ä¸ª k é˜¶ç”± 1 ç»„æˆçš„ â€œè½´å¯¹ç§°â€åŠ å·æ ‡å¿— å…·æœ‰ä¸­å¿ƒç½‘æ ¼ grid[r][c] == 1 ï¼Œä»¥åŠ4ä¸ªä»ä¸­å¿ƒå‘ä¸Šã€å‘ä¸‹ã€å‘å·¦ã€å‘å³å»¶ä¼¸ï¼Œé•¿åº¦ä¸º k-1ï¼Œç”± 1 ç»„æˆçš„è‡‚ã€‚æ³¨æ„ï¼Œåªæœ‰åŠ å·æ ‡å¿—çš„æ‰€æœ‰ç½‘æ ¼è¦æ±‚ä¸º 1 ï¼Œåˆ«çš„ç½‘æ ¼å¯èƒ½ä¸º 0 ä¹Ÿå¯èƒ½ä¸º 1 ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥: n = <span class="hljs-number">5</span>, mines = <span class="hljs-string">[[4, 2]]</span><br>è¾“å‡º: <span class="hljs-number">2</span><br>è§£é‡Š: åœ¨ä¸Šé¢çš„ç½‘æ ¼ä¸­ï¼Œæœ€å¤§åŠ å·æ ‡å¿—çš„é˜¶åªèƒ½æ˜¯<span class="hljs-number">2</span>ã€‚ä¸€ä¸ªæ ‡å¿—å·²åœ¨å›¾ä¸­æ ‡å‡ºã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><blockquote><p>è¿™é“é¢˜å±äºåŠ¨æ€è§„åˆ’ï¼Œç”¨<code>dp[i][j]</code>è¡¨ç¤ºåœ¨<code>(i,j)</code>ä½ç½®å››ä¸ªæ–¹å‘é˜¶æ•°çš„æœ€å°å€¼ï¼Œç„¶åæ‰¾åˆ°dpæ•°ç»„ä¸­çš„æœ€å¤§å€¼å³å¯ã€‚<br />æ³¨æ„ï¼šéå†æ—¶è¦å…ˆå¤„ç†æ°´å¹³æ–¹å‘ï¼Œå†å¤„ç†å‚ç›´æ–¹å‘ï¼Œä¸ç„¶æ— æ³•æ­£ç¡®æ›´æ–°dpæ•°ç»„</p></blockquote><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class Solution &#123;<br>public:<br>    bool vis[250001];<br>    int orderOfLargestPlusSign(int n, vector&lt;vector&lt;int&gt;&gt;&amp; mines) &#123;<br>        vector&lt;vector&lt;int&gt;&gt; dp(n,vector&lt;int&gt;(n,n));<br>        <span class="hljs-keyword">for</span>(auto &amp; t:mines)<br>            vis[t[0]*n+t[1]]=<span class="hljs-literal">true</span>;<br>        int <span class="hljs-attribute">count</span>=0;<br>        int <span class="hljs-attribute">ans</span>=0;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;n;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(vis[i*n+j])<br>                    <span class="hljs-attribute">count</span>=0;<br>                <span class="hljs-keyword">else</span><br>                    ++count;<br>                dp[i][j]=min(dp[i][j],count);<br>            &#125;<br>            <span class="hljs-attribute">count</span>=0;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=n-1;j&gt;=0;--j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(vis[i*n+j])<br>                    <span class="hljs-attribute">count</span>=0;<br>                <span class="hljs-keyword">else</span><br>                    ++count;<br>                dp[i][j]=min(dp[i][j],count);<br>            &#125;<br>            <span class="hljs-attribute">count</span>=0;<br>            <br>        &#125;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;n;++j)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(vis[i*n+j])<br>                    <span class="hljs-attribute">count</span>=0;<br>                <span class="hljs-keyword">else</span><br>                    ++count;<br>                dp[i][j]=min(dp[i][j],count);<br>            &#125;<br>            <span class="hljs-attribute">count</span>=0;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=n-1;i&gt;=0;--i)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(vis[i*n+j])<br>                    <span class="hljs-attribute">count</span>=0;<br>                <span class="hljs-keyword">else</span><br>                    ++count;<br>                dp[i][j]=min(dp[i][j],count);<br>                <span class="hljs-attribute">ans</span>=max(dp[i][j],ans);<br>            &#125;<br>            <span class="hljs-attribute">count</span>=0;<br>        &#125;<br>        return ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¾ä¸½æ•´æ•°æœ€å°å¢é‡</title>
    <link href="/2022/11/08/%E7%BE%8E%E4%B8%BD%E6%95%B4%E6%95%B0%E6%9C%80%E5%B0%8F%E5%A2%9E%E9%87%8F/"/>
    <url>/2022/11/08/%E7%BE%8E%E4%B8%BD%E6%95%B4%E6%95%B0%E6%9C%80%E5%B0%8F%E5%A2%9E%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BE%8E%E4%B8%BD%E6%95%B4%E6%95%B0%E7%9A%84%E6%9C%80%E5%B0%8F%E5%A2%9E%E9%87%8F">ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡"><a class="markdownIt-Anchor" href="#ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡"></a> ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡</h2><p><a href="https://leetcode.cn/problems/minimum-addition-to-make-integer-beautiful/description/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™ä½ ä¸¤ä¸ªæ­£æ•´æ•° n å’Œ target ã€‚</p><p>å¦‚æœæŸä¸ªæ•´æ•°æ¯ä¸€ä½ä¸Šçš„æ•°å­—ç›¸åŠ å°äºæˆ–ç­‰äº target ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªæ•´æ•°æ˜¯ä¸€ä¸ª ç¾ä¸½æ•´æ•° ã€‚</p><p>æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ n + x æ˜¯ ç¾ä¸½æ•´æ•° çš„æœ€å°éè´Ÿæ•´æ•° x ã€‚ç”Ÿæˆçš„è¾“å…¥ä¿è¯æ€»å¯ä»¥ä½¿ n å˜æˆä¸€ä¸ªç¾ä¸½æ•´æ•°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šn = 16, target = 6<br>è¾“å‡ºï¼š4<br>è§£é‡Šï¼šæœ€åˆï¼Œn æ˜¯<span class="hljs-number"> 16 </span>ï¼Œä¸”å…¶æ¯ä¸€ä½æ•°å­—çš„å’Œæ˜¯<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 6 </span>=<span class="hljs-number"> 7 </span>ã€‚<br>åœ¨åŠ <span class="hljs-number"> 4 </span>ä¹‹åï¼Œn å˜ä¸º<span class="hljs-number"> 20 </span>ä¸”æ¯ä¸€ä½æ•°å­—çš„å’Œå˜æˆ<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 0 </span>=<span class="hljs-number"> 2 </span>ã€‚å¯ä»¥è¯æ˜æ— æ³•åŠ ä¸Šä¸€ä¸ªå°äº<span class="hljs-number"> 4 </span>çš„éè´Ÿæ•´æ•°ä½¿ n å˜æˆä¸€ä¸ªç¾ä¸½æ•´æ•°ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä»å³åˆ°å·¦éå†ï¼Œä¾æ¬¡è¿›è¡Œé«˜ä½åŠ 1,ä½ä½ç½®0,ç›´åˆ°æ»¡è¶³æ¡ä»¶ä¸ºæ­¢</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> makeIntegerBeautiful(<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> n, <span class="hljs-built_in">int</span> target) &#123;<br>        string s=to_string(n);<br>        <span class="hljs-built_in">int</span> <span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> len=s.size();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">char</span> c:s)<br>            <span class="hljs-keyword">sum</span>+=c-<span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">sum</span>&lt;=target)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=len<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;9&#x27;</span>)<br>                <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;=i;++j)<br>                <span class="hljs-keyword">sum</span>+=s[j]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>            ++<span class="hljs-keyword">sum</span>;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">sum</span>&lt;=target)<br>            &#123;<br>                string ans=s;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=i+<span class="hljs-number">1</span>;j&lt;len;++j)<br>                    ans[j]=<span class="hljs-string">&#x27;0&#x27;</span>;<br>                ++ans[i];<br>                <span class="hljs-keyword">return</span> stoll(ans)-n;<br>            &#125;<br><br>        &#125;<br>        <span class="hljs-keyword">return</span> stoll(<span class="hljs-string">&#x27;1&#x27;</span>+string(len,<span class="hljs-string">&#x27;0&#x27;</span>))-n;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>transformerç¬”è®°</title>
    <link href="/2022/11/03/transformer%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/11/03/transformer%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#transformer%E7%AC%94%E8%AE%B0">Transformerç¬”è®°</a><ul><li><a href="#transformer%E7%9A%84%E6%8F%90%E5%87%BA">transformerçš„æå‡º</a></li><li><a href="#%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6">è‡ªæ³¨æ„åŠ›æœºåˆ¶</a></li><li><a href="#%E5%A4%9A%E5%A4%B4%E6%B3%A8%E6%84%8F%E5%8A%9B">å¤šå¤´æ³¨æ„åŠ›</a></li><li><a href="#%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81">ä½ç½®ç¼–ç </a><ul><li><a href="#token-embedding">Token Embedding</a></li><li><a href="#positional-embedding">Positional Embedding</a></li></ul></li><li><a href="#transformer%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84">Transformerç½‘ç»œç»“æ„</a><ul><li><a href="#encoder">Encoder</a></li><li><a href="#decoder">Decoder</a></li><li><a href="#%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%8E%A9%E7%A0%81%E6%9C%BA%E5%88%B6">æ³¨æ„åŠ›æ©ç æœºåˆ¶</a></li></ul></li><li><a href="#%E5%9F%BA%E4%BA%8Etransformer%E7%9A%84%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B">åŸºäºtransformerçš„åˆ†ç±»æ¨¡å‹</a></li></ul></li></ul><!-- /TOC --><h1 id="transformerç¬”è®°"><a class="markdownIt-Anchor" href="#transformerç¬”è®°"></a> Transformerç¬”è®°</h1><p>åœ¨å†™æœ¬ç¯‡åšå®¢æ—¶ï¼Œä¸»è¦å‚è€ƒäº†è¿™ç¯‡åšå®¢ï¼ˆ<a href="https://zhuanlan.zhihu.com/p/420820453">åšå®¢é“¾æ¥</a>ï¼‰ï¼Œåšä¸»ä»‹ç»çš„éå¸¸ç»†è‡´ï¼Œå¼ºçƒˆæ¨èã€‚</p><h2 id="transformerçš„æå‡º"><a class="markdownIt-Anchor" href="#transformerçš„æå‡º"></a> transformerçš„æå‡º</h2><p>è¯¥æ¨¡å‹çš„æå‡ºï¼Œæ¥æºäº2017å¹´çš„ä¸€ç¯‡è®ºæ–‡ï¼šAttention is all you need</p><p>åœ¨è®ºæ–‡ä¸­ä½œè€…æåˆ°ï¼Œå½“å‰ä¸»æµçš„åºåˆ—æ¨¡å‹éƒ½æ˜¯åŸºäºå¤æ‚çš„RNNæˆ–è€…CNNæ„é€ çš„Encoder-Decoderæ¨¡å‹,è¿™ç§æ¨¡å‹ä½¿å¾—ä¸‹ä¸€ä¸ªæ—¶åˆ»çš„è®¡ç®—è¿‡ç¨‹ä¾èµ–äºä¸Šä¸€ä¸ªæ—¶åˆ»çš„è¾“å‡ºï¼Œå› æ­¤RNNåœ¨è®¡ç®—æ•ˆç‡ä¸Šå—åˆ°å¾ˆå¤§é™åˆ¶ã€‚äºæ˜¯ä½œè€…æå‡ºäº†transformeræ¶æ„ï¼Œä»–æŠ›å¼ƒäº†RNNç»“æ„ï¼Œå¼•å…¥äº†æ³¨æ„åŠ›æœºåˆ¶æ¥è®¡ç®—æ¨¡å‹è¾“å…¥è¾“å‡ºé—´çš„éšå«è¡¨ç¤ºã€‚</p><h2 id="è‡ªæ³¨æ„åŠ›æœºåˆ¶"><a class="markdownIt-Anchor" href="#è‡ªæ³¨æ„åŠ›æœºåˆ¶"></a> è‡ªæ³¨æ„åŠ›æœºåˆ¶</h2><p>æ³¨æ„åŠ›æœºåˆ¶å¯ä»¥æè¿°ä¸ºå°†queryå’Œä¸€ç³»åˆ—çš„key-valueå¯¹æ˜ å°„åˆ°æŸä¸ªè¾“å‡ºçš„è¿‡ç¨‹ï¼Œè€Œè¿™ä¸ªè¾“å‡ºçš„å‘é‡å°±æ˜¯æ ¹æ®queryå’Œkeyè®¡ç®—å¾—åˆ°çš„æƒé‡ä½œç”¨äºvalueä¸Šçš„æƒé‡å’Œã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-21ebe709cd12dda0a9c9da7559d3e045_720w.webp" alt="" /><br />å¯ä»¥çœ‹å‡ºï¼Œè‡ªæ³¨æ„åŠ›çš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯é€šè¿‡Queryå’ŒKeyè®¡ç®—å‡ºæƒé‡ï¼Œç„¶åä¸Valueç›¸ä¹˜å¾—åˆ°è¾“å‡ºã€‚</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mrow><mo fence="true">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">Attention\left(Q,K,V\right)=softmax\left(\frac{QK^T}{\sqrt{d_k}}\right)V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">t</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.468361em;vertical-align:-0.95003em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183309999999999em;"><span style="top:-2.25278em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.81722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.18278000000000005em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></p><p>å…¶ä¸­Q,K,Våˆ†åˆ«æ˜¯ä¸‰ä¸ªçŸ©é˜µï¼Œè€Œé™¤ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.18278000000000005em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.81722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.18278000000000005em;"><span></span></span></span></span></span></span></span></span>å°±æ˜¯ä¸Šå›¾ä¸­çš„scaleè¿‡ç¨‹ã€‚ä½œè€…å‘ç°æŸäº›æƒ…å†µä¸‹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.035771em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span>ä¼šå¾—åˆ°å¾ˆå¤§çš„å€¼ï¼Œè¿™ä¼šå¯¼è‡´softmaxåäº§ç”Ÿå¾ˆå°çš„æ¢¯åº¦ï¼Œä¸åˆ©äºè®­ç»ƒï¼Œæ‰€ä»¥åŠ å…¥scaleçš„è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜Q,K,Væ˜¯æ€ä¹ˆæ¥çš„ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-28903ee6a9c01d4895af7836b1e5997f_720w.webp" alt="" /></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒQï¼ŒKï¼ŒVå…¶å®å°±æ˜¯è¾“å…¥Xä¹˜ä»¥ä¸‰ä¸ªä¸åŒçš„çŸ©é˜µè®¡ç®—è€Œæ¥ï¼Œå³ï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mo>=</mo><mi>X</mi><msup><mi>W</mi><mi>q</mi></msup><mspace linebreak="newline"></mspace><mi>K</mi><mo>=</mo><mi>X</mi><msup><mi>W</mi><mi>k</mi></msup><mspace linebreak="newline"></mspace><mi>V</mi><mo>=</mo><mi>X</mi><msup><mi>W</mi><mi>v</mi></msup></mrow><annotation encoding="application/x-tex">Q=XW^q\\K=XW^k\\V=XW^v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.714392em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714392em;"><span style="top:-3.1130000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8991079999999999em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span></span></span></span></span></span></span></span></p><p>å¾—åˆ°Q,K,Vä¹‹åï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥è®¡ç®—å¾—åˆ°æƒé‡å‘é‡ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-3173490f0b8fb89b22a22b65d2851c7f_720w.webp" alt="" /><br />å‡å¦‚Qå’ŒKçš„è®¡ç®—ç»“æœå¦‚ä¸Šå›¾ï¼Œå¯¹äºæƒé‡çŸ©é˜µçš„ç¬¬1è¡Œæ¥è¯´ï¼Œ0.7è¡¨ç¤ºçš„å°±æ˜¯â€œæˆ‘â€ä¸â€œæˆ‘â€çš„æ³¨æ„åŠ›å€¼ï¼›0.2è¡¨ç¤ºçš„å°±æ˜¯â€œæˆ‘â€ä¸â€æ˜¯â€çš„æ³¨æ„åŠ›å€¼ï¼›0.1è¡¨ç¤ºçš„å°±æ˜¯â€œæˆ‘â€ä¸â€œè°â€çš„æ³¨æ„åŠ›å€¼ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨å¯¹åºåˆ—ä¸­çš„â€œæˆ‘â€œè¿›è¡Œç¼–ç æ—¶ï¼Œåº”è¯¥å°†0.7çš„æ³¨æ„åŠ›æ”¾åœ¨â€œæˆ‘â€ä¸Šï¼Œ0.2çš„æ³¨æ„åŠ›æ”¾åœ¨â€œæ˜¯â€ä¸Šï¼Œå°†0.1çš„æ³¨æ„åŠ›æ”¾åœ¨è°ä¸Šã€‚</p><p>ä¸è¿‡ï¼Œä¸Šé¢çš„è§„å¾‹ä¹Ÿåæ˜ äº†ä¸€ä¸ªå°é—®é¢˜ï¼š<strong>æ¨¡å‹åœ¨å¯¹å½“å‰ä½ç½®çš„ä¿¡æ¯è¿›è¡Œç¼–ç æ—¶ï¼Œä¼šè¿‡åº¦çš„å°†æ³¨æ„åŠ›é›†ä¸­äºè‡ªèº«çš„ä½ç½®è€Œå¯èƒ½å¿½ç•¥äº†å…¶å®ƒä½ç½®ã€‚</strong></p><p>å¾—åˆ°æƒé‡çŸ©é˜µä¹‹åï¼Œä¸Vç›¸ä¹˜ï¼š</p><p><img src="https://pic3.zhimg.com/80/v2-a574d12396e1e2006716eb58f9fa5806_720w.webp" alt="" /></p><p>å¯¹äºâ€œæ˜¯â€è€Œè¨€ï¼Œå®ƒçš„ç¼–ç å‘é‡å…¶å®å°±æ˜¯â€œæˆ‘ï¼Œæ˜¯ï¼Œè°â€ä¸‰ä¸ªå­—çš„åŠ æƒå’Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic2.zhimg.com/80/v2-3de3645627bd94e4258a89c4376227c1_720w.webp" alt="" /></p><p>è¿™ç§è‡ªæ³¨æ„åŠ›æœºåˆ¶,ç¡®å®è§£å†³äº†ä½œè€…åœ¨è®ºæ–‡ä¸­æ‰€æå‡ºçš„â€œä¼ ç»Ÿåºåˆ—æ¨¡å‹åœ¨ç¼–ç è¿‡ç¨‹ä¸­éƒ½éœ€é¡ºåºè¿›è¡Œçš„å¼Šç«¯â€çš„é—®é¢˜ï¼Œæœ‰äº†è‡ªæ³¨æ„åŠ›æœºåˆ¶åï¼Œä»…ä»…åªéœ€è¦å¯¹åŸå§‹è¾“å…¥è¿›è¡Œå‡ æ¬¡çŸ©é˜µå˜æ¢ä¾¿èƒ½å¤Ÿå¾—åˆ°æœ€ç»ˆåŒ…å«æœ‰ä¸åŒä½ç½®æ³¨æ„åŠ›ä¿¡æ¯çš„ç¼–ç å‘é‡ã€‚</p><h2 id="å¤šå¤´æ³¨æ„åŠ›"><a class="markdownIt-Anchor" href="#å¤šå¤´æ³¨æ„åŠ›"></a> å¤šå¤´æ³¨æ„åŠ›</h2><p>ä¹‹å‰æåˆ°ï¼Œè‡ªæ³¨æ„åŠ›åœ¨å¯¹å½“å‰ä½ç½®çš„ä¿¡æ¯è¿›è¡Œç¼–ç æ—¶ï¼Œä¼šè¿‡åº¦çš„å°†æ³¨æ„åŠ›é›†ä¸­äºè‡ªèº«çš„ä½ç½®ï¼Œæ‰€ä»¥æå‡ºäº†Multi-head Attentionæ¥è¿›è¡Œæ”¹è¿›ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-849a1a08e54a4ab3b2bfadfaceddfeab_720w.webp" alt="" /></p><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å…¶å®å°±æ˜¯å°†åŸå§‹çš„è¾“å…¥åºåˆ—è¿›è¡Œå¤šç»„çš„è‡ªæ³¨æ„åŠ›å¤„ç†è¿‡ç¨‹ï¼›ç„¶åå†å°†æ¯ä¸€ç»„è‡ªæ³¨æ„åŠ›çš„ç»“æœæ‹¼æ¥èµ·æ¥è¿›è¡Œä¸€æ¬¡çº¿æ€§å˜æ¢å¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºç»“æœã€‚å…·ä½“çš„ï¼Œå…¶è®¡ç®—å…¬å¼ä¸ºï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mi>u</mi><mi>l</mi><mi>t</mi><mi>i</mi><mi>H</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>c</mi><mi>a</mi><mi>t</mi><mo stretchy="false">(</mo><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mi>h</mi></msub><mo stretchy="false">)</mo><msup><mi>W</mi><mi>O</mi></msup><mspace linebreak="newline"></mspace><mspace linebreak="newline"></mspace><mi>W</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>h</mi><mi>e</mi><mi>a</mi><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><msubsup><mi>W</mi><mi>i</mi><mi>Q</mi></msubsup><mo separator="true">,</mo><mi>K</mi><msubsup><mi>W</mi><mi>i</mi><mi>K</mi></msubsup><mo separator="true">,</mo><mi>V</mi><msubsup><mi>W</mi><mi>i</mi><mi>V</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">MultiHead(Q,K,V)=Concat(head_1,...,head_h)W^O\\\\Where head_i=Attention(QW_i^Q,KW^K_i,VW_i^V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">e</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.236103em;vertical-align:-0.276864em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">t</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9592389999999998em;"><span style="top:-2.4231360000000004em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.180908em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.276864em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä½œè€…ä½¿ç”¨äº†ä¸ªå¹¶è¡Œçš„è‡ªæ³¨æ„åŠ›æ¨¡å—ï¼ˆ8ä¸ªå¤´ï¼‰æ¥æ„å»ºä¸€ä¸ªæ³¨æ„åŠ›å±‚ï¼Œè®ºæ–‡ä¸­æ‰€ä½¿ç”¨çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å…¶å®å°±æ˜¯å°†ä¸€ä¸ªå¤§çš„é«˜ç»´å•å¤´æ‹†åˆ†æˆäº†hä¸ªå¤šå¤´ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-382a68f2a5543f00b7a4a1fd84e29b83_720w.webp" alt="" /></p><p>å½“è¿›è¡Œè¿›è¡Œæ³¨æ„åŠ›æƒé‡çŸ©é˜µè®¡ç®—æ—¶ï¼Œhè¶Šå¤§é‚£ä¹ˆQ,K,Vå°±ä¼šè¢«åˆ‡åˆ†å¾—è¶Šå°ï¼Œè¿›è€Œå¾—åˆ°çš„æ³¨æ„åŠ›æƒé‡åˆ†é…æ–¹å¼è¶Šå¤šï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-8837a813f9028886bb8529a59c6cd9c8_720w.webp" alt="" /></p><p>å› è€Œå¤šå¤´è¿™ä¸€åšæ³•ä¹Ÿæ°å¥½ç”¨äºå…‹æœæ¨¡å‹åœ¨å¯¹å½“å‰ä½ç½®çš„ä¿¡æ¯è¿›è¡Œç¼–ç æ—¶ï¼Œä¼šè¿‡åº¦çš„å°†æ³¨æ„åŠ›é›†ä¸­äºè‡ªèº«çš„ä½ç½®çš„é—®é¢˜ï¼Œä½¿å¾—æƒé‡åˆ†é…æ›´åˆç†ã€‚</p><h2 id="ä½ç½®ç¼–ç "><a class="markdownIt-Anchor" href="#ä½ç½®ç¼–ç "></a> ä½ç½®ç¼–ç </h2><h3 id="token-embedding"><a class="markdownIt-Anchor" href="#token-embedding"></a> Token Embedding</h3><p>åœ¨å¯¹æ–‡æœ¬ç›¸å…³çš„æ•°æ®è¿›è¡Œå»ºæ¨¡æ—¶é¦–å…ˆè¦åšçš„ä¾¿æ˜¯å¯¹å…¶è¿›è¡Œå‘é‡åŒ–(Embedding),åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ›´å¸¸è§çš„åšæ³•ä¾¿æ˜¯å°†å„ä¸ªè¯ï¼ˆæˆ–è€…å­—ï¼‰é€šè¿‡ä¸€ä¸ªEmbeddingå±‚æ˜ å°„åˆ°ä½ç»´ç¨ å¯†çš„å‘é‡ç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨Transformeræ¨¡å‹ä¸­ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥è¦åšçš„åŒæ ·æ˜¯å°†æ–‡æœ¬ä»¥è¿™æ ·çš„æ–¹å¼è¿›è¡Œå‘é‡åŒ–è¡¨ç¤ºï¼Œå¹¶ä¸”å°†å…¶ç§°ä¹‹ä¸ºToken Embeddingï¼Œä¹Ÿå°±æ˜¯æ·±åº¦å­¦ä¹ ä¸­å¸¸è¯´çš„è¯åµŒå…¥ï¼ˆWord Embeddingï¼‰</p><p><img src="https://pic4.zhimg.com/80/v2-9e4cb60bd2ed3e1aca137928bf34a537_720w.webp" alt="" /></p><p>å¦‚æœæ˜¯æ¢åšä¹‹å‰çš„ç½‘ç»œæ¨¡å‹ï¼Œä¾‹å¦‚CNNæˆ–è€…RNNï¼Œé‚£ä¹ˆå¯¹äºæ–‡æœ¬å‘é‡åŒ–çš„æ­¥éª¤å°±åˆ°æ­¤ç»“æŸäº†ï¼Œå› ä¸ºè¿™äº›ç½‘ç»œç»“æ„æœ¬èº«å·²ç»å…·å¤‡äº†æ•æ‰æ—¶åºç‰¹å¾çš„èƒ½åŠ›,ä½†æ˜¯è¿™å¯¹ä»…ä»…åªæœ‰è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ç½‘ç»œç»“æ„æ¥è¯´å´ä¸è¡Œã€‚è‡ªæ³¨æ„åŠ›æœºåˆ¶åœ¨å®é™…è¿ç®—è¿‡ç¨‹ä¸­ä¸è¿‡å°±æ˜¯å‡ ä¸ªçŸ©é˜µæ¥å›ç›¸ä¹˜è¿›è¡Œ<strong>çº¿æ€§å˜æ¢</strong>è€Œå·²ã€‚å› æ­¤ï¼Œè¿™å°±å¯¼è‡´å³ä½¿æ˜¯æ‰“ä¹±å„ä¸ªè¯çš„é¡ºåºï¼Œé‚£ä¹ˆæœ€ç»ˆè®¡ç®—å¾—åˆ°çš„ç»“æœæœ¬è´¨ä¸Šå´æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜æ¢ï¼Œæ¢å¥è¯è¯´ä»…ä»…åªä½¿ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶ä¼šä¸¢å¤±æ–‡æœ¬åŸæœ‰çš„åºåˆ—ä¿¡æ¯ï¼ˆ<s>æ¢ä¸ªé¡ºåºå­¦ä¹ ä¸åˆ°æ–°çš„ä¸œè¥¿</s>ï¼‰ã€‚</p><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜åŸå› ï¼š</p><p><img src="https://pic4.zhimg.com/80/v2-a61fbde8b2b7958eef3dd134f722c69b_720w.webp" alt="" /></p><p>ç»è¿‡è¯åµŒå…¥è¡¨ç¤ºåï¼Œåºåˆ—â€œæˆ‘ åœ¨ çœ‹ ä¹¦â€ç»è¿‡äº†ä¸€æ¬¡çº¿æ€§å˜æ¢ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åºåˆ—å˜æˆâ€œä¹¦ åœ¨ çœ‹ æˆ‘â€ï¼Œç„¶ååŒæ ·ä»¥ä¸­é—´è¿™ä¸ªæƒé‡çŸ©é˜µæ¥è¿›è¡Œçº¿æ€§å˜æ¢ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-9aede5435fe5c6f010457c5818ec3ce3_720w.webp" alt="" /></p><p>æ‰€ä»¥ï¼Œåºåˆ—åœ¨äº¤æ¢ä½ç½®å‰å’Œäº¤æ¢ä½ç½®åè®¡ç®—å¾—åˆ°çš„ç»“æœåœ¨æœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä»…ä»…åªæ˜¯äº¤æ¢äº†å¯¹åº”çš„ä½ç½®ã€‚å› æ­¤ï¼ŒåŸºäºè¿™æ ·çš„åŸå› ï¼ŒTransformeråœ¨åŸå§‹è¾“å…¥æ–‡æœ¬è¿›è¡ŒEmbeddingåï¼Œåˆé¢å¤–çš„åŠ å…¥äº†ä¸€ä¸ªPositional Embeddingæ¥åˆ»ç”»æ•°æ®åœ¨æ—¶åºä¸Šçš„ç‰¹å¾ã€‚</p><h3 id="positional-embedding"><a class="markdownIt-Anchor" href="#positional-embedding"></a> Positional Embedding</h3><p>å…ˆæ¥é€šè¿‡ä¸€å¹…å›¾ç›´è§‚çœ‹çœ‹ç»è¿‡Positional Embeddingå¤„ç†ååˆ°åº•äº§ç”Ÿäº†ä»€ä¹ˆæ ·çš„å˜åŒ–ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-8110b24565ffbfb028866a19050940fa_720w.webp" alt="" /></p><blockquote><p>å¦‚å›¾æ‰€ç¤ºï¼Œæ¨ªåæ ‡è¡¨ç¤ºè¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªTokenï¼Œæ¯ä¸€æ¡æ›²çº¿æˆ–è€…ç›´çº¿è¡¨ç¤ºå¯¹åº”Tokenåœ¨æ¯ä¸ªç»´åº¦ä¸Šå¯¹åº”çš„ä½ç½®ä¿¡æ¯ã€‚åœ¨å·¦å›¾ä¸­ï¼Œæ¯ä¸ªç»´åº¦æ‰€å¯¹åº”çš„ä½ç½®ä¿¡æ¯éƒ½æ˜¯ä¸€ä¸ªä¸å˜çš„å¸¸æ•°ï¼›è€Œåœ¨å³å›¾ä¸­ï¼Œæ¯ä¸ªç»´åº¦æ‰€å¯¹åº”çš„ä½ç½®ä¿¡æ¯éƒ½æ˜¯åŸºäºæŸç§å…¬å¼å˜æ¢æ‰€å¾—åˆ°ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå·¦å›¾ä¸­ä»»æ„ä¸¤ä¸ªTokenä¸Šçš„å‘é‡éƒ½å¯ä»¥è¿›è¡Œä½ç½®äº¤æ¢è€Œæ¨¡å‹å´ä¸èƒ½æ•æ‰åˆ°è¿™ä¸€å·®å¼‚ï¼Œä½†æ˜¯åŠ å…¥å³å›¾è¿™æ ·çš„ä½ç½®ä¿¡æ¯æ¨¡å‹å´èƒ½å¤Ÿæ„ŸçŸ¥åˆ°ã€‚ä¾‹å¦‚ä½ç½®20è¿™ä¸€å¤„çš„å‘é‡ï¼Œåœ¨å·¦å›¾ä¸­æ— è®ºä½ å°†å®ƒæ¢åˆ°å“ªä¸ªä½ç½®ï¼Œéƒ½å’ŒåŸæ¥ä¸€æ¨¡ä¸€æ ·ï¼›ä½†åœ¨å³å›¾ä¸­ï¼Œä½ å´å†ä¹Ÿæ‰¾ä¸åˆ°ä¸ä½ç½®20å¤„ä½ç½®ä¿¡æ¯ç›¸åŒçš„ä½ç½®ã€‚</p></blockquote><p>ä¸‹é¢å†çœ‹ä¸€ä¸ªä¾‹å­</p><p><img src="https://pic1.zhimg.com/80/v2-9a4be9596e49f523e90c2c9eb7b37864_720w.webp" alt="" /></p><p>åŸå§‹è¾“å…¥åœ¨ç»è¿‡Token Embeddingåï¼ŒåˆåŠ å…¥äº†ä¸€ä¸ªå¸¸æ•°ä½ç½®ä¿¡æ¯çš„çš„Positional Embeddingã€‚åœ¨ç»è¿‡ä¸€æ¬¡çº¿æ€§å˜æ¢åä¾¿å¾—åˆ°äº†å›¾2-5å·¦å³è¾¹æ‰€ç¤ºçš„ç»“æœã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†äº¤æ¢åºåˆ—çš„ä½ç½®ï¼Œå¹¶åŒæ—¶è¿›è¡ŒPositional Embeddingè§‚å¯Ÿå…¶ç»“æœã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-d98e246f487827ee1ad6411cc00928e6_720w.webp" alt="" /></p><p>å¯ä»¥çœ‹åˆ°ï¼Œäº¤æ¢ä½ç½®åå¾—åˆ°çš„æƒé‡çŸ©é˜µåªæ˜¯å‘ç”Ÿäº†æ™®é€šçš„çº¿æ€§å˜æ¢ï¼Œè¯´æ˜ä¸Šè¿°ç±»å‹çš„PEæ˜¯æ— æ•ˆçš„ã€‚</p><p>åœ¨Transformerä¸­ï¼Œä½œè€…é‡‡ç”¨äº†ä»¥ä¸‹å…¬å¼æ‰€ç¤ºçš„è§„åˆ™æ¥ç”Ÿæˆå„ä¸ªç»´åº¦çš„ä½ç½®ä¿¡æ¯ã€‚</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><msub><mi>E</mi><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi></mrow></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>n</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow><mrow><mn>1000</mn><msup><mn>0</mn><mfrac><mrow><mn>2</mn><mi>i</mi></mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mfrac></msup></mrow></mfrac><mo fence="true">)</mo></mrow><mspace linebreak="newline"></mspace><mi>P</mi><msub><mi>E</mi><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo separator="true">,</mo><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow><mrow><mn>1000</mn><msup><mn>0</mn><mfrac><mrow><mn>2</mn><mi>i</mi></mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mfrac></msup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">PE_{pos,2i}=sin\left(\frac{pos}{10000^{\frac{2i}{d_{model}}}}\right)\\PE_{pos,2i+1}=cos\left(\frac{pos}{10000^{\frac{2i}{d_{model}}}}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">s</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4619299999999997em;vertical-align:-1.01193em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.12193em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1219299999999999em;"><span style="top:-3.5233700000000003em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8550857142857142em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.34963999999999995em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5937428571428571em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.35193em;"><span class="pstrut" style="height:3.12193em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.79893em;"><span class="pstrut" style="height:3.12193em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.01193em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">s</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4619299999999997em;vertical-align:-1.01193em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.12193em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1219299999999999em;"><span style="top:-3.5233700000000003em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8550857142857142em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.34963999999999995em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5937428571428571em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.35193em;"><span class="pstrut" style="height:3.12193em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.79893em;"><span class="pstrut" style="height:3.12193em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.01193em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><p>ä¸Šå¼ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">PE</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span>å°±æ˜¯embeddingçš„çŸ©é˜µï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">pos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span></span></span></span>ä»£è¡¨æŸä¸€ä¸ªä½ç½®,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>ä»£è¡¨æŸä¸€ä¸ªç»´åº¦ï¼Œåœ¨èå…¥è¿™ç§éå¸¸æ•°çš„Positional Embeddingä½ç½®ä¿¡æ¯åï¼Œä¾¿å¯ä»¥å¾—åˆ°ä¸‹å›¾ç»“æœã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-0c62651daf9f5c0c1de77e9137b058b6_720w.webp" alt="" /></p><p>è¿™å°±è¯´æ˜é€šè¿‡Positional Embeddingå¯ä»¥å¼¥è¡¥è‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸èƒ½æ•æ‰åºåˆ—æ—¶åºä¿¡æ¯çš„ç¼ºé™·(<s>æ„Ÿè§‰ç±»ä¼¼äºæ¿€æ´»å±‚çš„ä½œç”¨</s>)ã€‚</p><h2 id="transformerç½‘ç»œç»“æ„"><a class="markdownIt-Anchor" href="#transformerç½‘ç»œç»“æ„"></a> Transformerç½‘ç»œç»“æ„</h2><p>æ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic1.zhimg.com/80/v2-6da4c9720ec88860295bd63e19344820_720w.webp" alt="" /></p><h3 id="encoder"><a class="markdownIt-Anchor" href="#encoder"></a> Encoder</h3><p><img src="https://pic3.zhimg.com/80/v2-5da93887d468045677e9983f14b35db6_720w.webp" alt="" /></p><p>ä¸»è¦ç”±å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å’Œä¸¤å±‚å‰é¦ˆç¥ç»ç½‘ç»œæ„æˆï¼Œå¹¶ä¸”éƒ½åŠ å…¥äº†æ®‹å·®è¿æ¥ï¼Œå¹¶è¿›è¡Œäº†å±‚å½’ä¸€åŒ–ã€‚å…¶ä¸­å‰é¦ˆç¥ç»ç½‘ç»œä¸»è¦ç”¨äºå˜æ¢ç»´åº¦ï¼Œå¢å¼ºæ¨¡å‹è¡¨è¾¾èƒ½åŠ›ã€‚</p><h3 id="decoder"><a class="markdownIt-Anchor" href="#decoder"></a> Decoder</h3><p><img src="https://pic1.zhimg.com/80/v2-8ab2c37e224137c05332419d525c88cc_720w.webp" alt="" /></p><p>ä¸åŒäºEncoderéƒ¨åˆ†ï¼Œåœ¨Decoderä¸­ä¸€å…±åŒ…å«æœ‰3ä¸ªéƒ¨åˆ†çš„ç½‘ç»œç»“æ„ã€‚æœ€ä¸Šé¢çš„å’Œæœ€ä¸‹é¢çš„éƒ¨åˆ†ï¼ˆæš‚æ—¶å¿½ç•¥Maskï¼‰ä¸Encoderç›¸åŒï¼Œåªæ˜¯å¤šäº†ä¸­é—´è¿™ä¸ªä¸Encoderè¾“å‡ºï¼ˆMemoryï¼‰è¿›è¡Œäº¤äº’çš„éƒ¨åˆ†ï¼Œä½œè€…ç§°ä¹‹ä¸ºâ€œEncoder-Decoder attentionâ€ã€‚<strong>å¯¹äºè¿™éƒ¨åˆ†çš„è¾“å…¥ï¼ŒQæ¥è‡ªäºä¸‹é¢å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„è¾“å‡ºï¼ŒKå’ŒVå‡æ˜¯Encoderéƒ¨åˆ†çš„è¾“å‡ºï¼ˆMemoryï¼‰ç»è¿‡çº¿æ€§å˜æ¢åå¾—åˆ°ã€‚</strong></p><p>å…·ä½“è§£ç è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œå¾…è§£ç å‘é‡å’ŒMemoryåˆ†åˆ«å„è‡ªä¹˜ä¸Šä¸€ä¸ªçŸ©é˜µåå¾—åˆ°Qã€Kã€Vã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-22669eedb0931017b8ed1d56dcd28089_720w.webp" alt="" /></p><p><img src="https://pic4.zhimg.com/80/v2-56ab4338fc9da4ca495fe070904846cf_720w.webp" alt="" /></p><p>åœ¨è§£ç ç¬¬1ä¸ªæ—¶åˆ»æ—¶ï¼Œé¦–å…ˆQé€šè¿‡ä¸Kè¿›è¡Œäº¤äº’å¾—åˆ°æƒé‡å‘é‡ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åšæ˜¯<strong>Qï¼ˆå¾…è§£ç å‘é‡ï¼‰åœ¨Kï¼ˆæœ¬è´¨ä¸Šä¹Ÿå°±æ˜¯Memoryï¼‰ä¸­æŸ¥è¯¢Memoryä¸­å„ä¸ªä½ç½®ä¸Qæœ‰å…³çš„ä¿¡æ¯</strong>ï¼›ç„¶åå°†æƒé‡å‘é‡ä¸Vè¿›è¡Œè¿ç®—å¾—åˆ°è§£ç å‘é‡ï¼Œæ­¤æ—¶è¿™ä¸ªè§£ç å‘é‡å¯ä»¥çœ‹ä½œæ˜¯<strong>è€ƒè™‘äº†Memoryä¸­å„ä¸ªä½ç½®ç¼–ç ä¿¡æ¯çš„è¾“å‡ºå‘é‡</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåŒ…å«äº†åœ¨è§£ç å½“å‰æ—¶åˆ»æ—¶åº”è¯¥å°†æ³¨æ„åŠ›æ”¾åœ¨Memoryä¸­å“ªäº›ä½ç½®ä¸Šçš„ä¿¡æ¯ã€‚</p><p>åœ¨å¾—åˆ°è¿™ä¸ªè§£ç å‘é‡å¹¶ç»è¿‡å›¾2-10ä¸­æœ€ä¸Šé¢çš„ä¸¤å±‚å…¨è¿æ¥å±‚åï¼Œä¾¿å°†å…¶è¾“å…¥åˆ°åˆ†ç±»å±‚ä¸­è¿›è¡Œåˆ†ç±»å¾—åˆ°å½“å‰æ—¶åˆ»çš„è§£ç è¾“å‡ºå€¼ã€‚</p><h3 id="æ³¨æ„åŠ›æ©ç æœºåˆ¶"><a class="markdownIt-Anchor" href="#æ³¨æ„åŠ›æ©ç æœºåˆ¶"></a> æ³¨æ„åŠ›æ©ç æœºåˆ¶</h3><p>æ¨¡å‹åœ¨å®é™…çš„é¢„æµ‹è¿‡ç¨‹ä¸­åªæ˜¯å°†å½“å‰æ—¶åˆ»ä¹‹å‰ï¼ˆåŒ…æ‹¬å½“å‰æ—¶åˆ»ï¼‰çš„æ‰€æœ‰æ—¶åˆ»ä½œä¸ºè¾“å…¥æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªæ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯è¯´æ¨¡å‹åœ¨é¢„æµ‹æ—¶æ˜¯çœ‹ä¸åˆ°å½“å‰æ—¶åˆ»ä¹‹åçš„ä¿¡æ¯ã€‚å› æ­¤ï¼ŒTransformerä¸­çš„Decoderé€šè¿‡åŠ å…¥æ³¨æ„åŠ›æ©ç æœºåˆ¶ï¼ˆMasked Multi-Head Attentionï¼‰æ¥è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-ef714b246dfc08c912db18aaec0542cb_720w.webp" alt="" /></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹ä¾æ—§æ˜¯é€šè¿‡Qå’ŒKè®¡ç®—å¾—åˆ°äº†æ³¨æ„åŠ›æƒé‡çŸ©é˜µï¼ˆæ­¤æ—¶è¿˜æœªè¿›è¡Œsoftmaxæ“ä½œï¼‰ï¼Œè€Œä¸­é—´çš„å°±æ˜¯æ‰€è°“çš„æ³¨æ„åŠ›æ©ç çŸ©é˜µï¼Œä¸¤è€…åœ¨ç›¸åŠ ä¹‹åå†ä¹˜ä¸ŠçŸ©é˜µVä¾¿å¾—åˆ°äº†æ•´ä¸ªè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„è¾“å‡ºã€‚ï¼ˆå› ä¸ºattention maskçš„åŠ å…¥ï¼Œä½¿å¾—softmaxä¹‹åï¼Œåé¢æ—¶åˆ»çš„æƒé‡å˜ä¸º0ï¼Œæ­£å¥½å±è”½äº†å½“å‰æ—¶åˆ»ä¹‹åçš„è¾“å…¥ã€‚ï¼‰</p><h2 id="åŸºäºtransformerçš„åˆ†ç±»æ¨¡å‹"><a class="markdownIt-Anchor" href="#åŸºäºtransformerçš„åˆ†ç±»æ¨¡å‹"></a> åŸºäºtransformerçš„åˆ†ç±»æ¨¡å‹</h2><p><img src="https://moonhotel.oss-cn-shanghai.aliyuncs.com/images/2107052058585050890.jpg" alt="" /></p><p>ä¸Šå›¾ä¾¿æ˜¯ä¸€ä¸ªåŸºäºTransformerç»“æ„çš„æ–‡æœ¬åˆ†ç±»æ¨¡å‹ã€‚ä¸è¿‡å‡†ç¡®çš„è¯´åº”è¯¥åªæ˜¯ä¸€ä¸ªåŸºäºTransformerä¸­Encoderçš„æ–‡æœ¬åˆ†ç±»æ¨¡å‹ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­å¹¶æ²¡æœ‰è§£ç è¿™ä¸€è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†Encoderç¼–ç å¾—åˆ°çš„å‘é‡è¾“å…¥åˆ°åˆ†ç±»å™¨ä¸­è¿›è¡Œåˆ†ç±»å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>èµ„æ–™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å•è°ƒåŒç«¯é˜Ÿåˆ—</title>
    <link href="/2022/10/26/%E5%8D%95%E8%B0%83%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97/"/>
    <url>/2022/10/26/%E5%8D%95%E8%B0%83%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%92%8C%E8%87%B3%E5%B0%91%E4%B8%BA-k-%E7%9A%84%E6%9C%80%E7%9F%AD%E5%AD%90%E6%95%B0%E7%BB%84">å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="å’Œè‡³å°‘ä¸º-k-çš„æœ€çŸ­å­æ•°ç»„"><a class="markdownIt-Anchor" href="#å’Œè‡³å°‘ä¸º-k-çš„æœ€çŸ­å­æ•°ç»„"></a> å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p><a href="https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/">é¢˜ç›®é“¾æ¥</a></p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œæ‰¾å‡º nums ä¸­å’Œè‡³å°‘ä¸º k çš„ æœ€çŸ­éç©ºå­æ•°ç»„ ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ å­æ•°ç»„ ï¼Œè¿”å› -1 ã€‚</p><p>å­æ•°ç»„ æ˜¯æ•°ç»„ä¸­ è¿ç»­ çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">è¾“å…¥ï¼šnums </span>=<span class="hljs-string"> [2,-1,2], k = 3</span><br><span class="hljs-string">è¾“å‡ºï¼š3</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜è‡ªå·±æƒ³çš„å°±æ˜¯å‰ç¼€å’Œç„¶åæš´åŠ›ï¼Œä½†TLEäº†ï¼Œçœ‹äº†é¢˜è§£å‘ç°éœ€è¦ç”¨å•è°ƒåŒç«¯é˜Ÿåˆ—å¯¹å‰ç¼€å’Œæ•°ç»„è¿›è¡Œä¼˜åŒ–</p><p>ä¸»è¦åšä¸¤å¤„ä¼˜åŒ–ï¼š</p><ol><li><p>å¼¹å‡ºé˜Ÿé¦–å¹¶æ›´æ–°ç­”æ¡ˆ</p></li><li><p>å¼¹å‡ºé˜Ÿå°¾ï¼Œä¿è¯é˜Ÿåˆ—å•è°ƒé€’å¢</p></li></ol><p><a href="https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/solution/liang-zhang-tu-miao-dong-dan-diao-dui-li-9fvh/">å‚è€ƒé“¾æ¥</a></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">shortestSubarray</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-type">int</span> len=nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(len+<span class="hljs-number">1</span>)</span></span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=len;++i)<br>            a[i]=nums[i<span class="hljs-number">-1</span>]+a[i<span class="hljs-number">-1</span>];<br>        <span class="hljs-type">int</span> ans=INT_MAX;<br>        deque&lt;<span class="hljs-type">int</span>&gt; q;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=len;++i)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>()&amp;&amp;a[i]-a[q.<span class="hljs-built_in">front</span>()]&gt;=k)<br>            &#123;<br>                ans=<span class="hljs-built_in">min</span>(ans,i-q.<span class="hljs-built_in">front</span>());<br>                q.<span class="hljs-built_in">pop_front</span>();<br>            &#125;<br>            <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>()&amp;&amp;a[i]&lt;=a[q.<span class="hljs-built_in">back</span>()])<br>               q.<span class="hljs-built_in">pop_back</span>();<br>            q.<span class="hljs-built_in">push_back</span>(i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans==INT_MAX ? <span class="hljs-number">-1</span> : ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§äººå·¥å²›</title>
    <link href="/2022/10/25/%E6%9C%80%E5%A4%A7%E4%BA%BA%E5%B7%A5%E5%B2%9B/"/>
    <url>/2022/10/25/%E6%9C%80%E5%A4%A7%E4%BA%BA%E5%B7%A5%E5%B2%9B/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E5%A4%A7%E4%BA%BA%E5%B7%A5%E5%B2%9B">æœ€å¤§äººå·¥å²›</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E6%9C%80%E7%9F%AD%E7%9A%84%E6%A1%A5">æœ€çŸ­çš„æ¡¥</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æœ€å¤§äººå·¥å²›"><a class="markdownIt-Anchor" href="#æœ€å¤§äººå·¥å²›"></a> æœ€å¤§äººå·¥å²›</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p><a href="https://leetcode.cn/problems/making-a-large-island/">åŸé¢˜é“¾æ¥</a></p><p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º n x n äºŒè¿›åˆ¶çŸ©é˜µ grid ã€‚æœ€å¤š åªèƒ½å°†ä¸€æ ¼Â 0 å˜æˆÂ 1 ã€‚</p><p>è¿”å›æ‰§è¡Œæ­¤æ“ä½œåï¼Œgrid ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ</p><p>å²›å±¿ ç”±ä¸€ç»„ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç›¸è¿çš„Â 1 å½¢æˆã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥: grid = <span class="hljs-string">[[1, 1], [1, 0]]</span><br>è¾“å‡º: <span class="hljs-number">4</span><br>è§£é‡Š: å°†ä¸€æ ¼<span class="hljs-number">0</span>å˜æˆ<span class="hljs-number">1</span>ï¼Œå²›å±¿çš„é¢ç§¯æ‰©å¤§ä¸º <span class="hljs-number">4</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ä¸»è¦æ€è·¯æ˜¯dfsï¼Œç”¨dfsç»™ä¸åŒçš„å²›ç¼–å·ï¼Œç”¨å“ˆç³»è¡¨è®°å½•æ¯ä¸ªç¼–å·çš„å²›çš„é¢ç§¯ï¼Œç„¶åéå†æ‰€æœ‰éå²›å±¿éƒ¨åˆ†ï¼Œæ›´æ–°æœ€å¤§é¢ç§¯å³å¯</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Solution</span> &#123;</span><br><span class="hljs-class">public:</span><br><span class="hljs-class">    void dfs(<span class="hljs-title">int</span> <span class="hljs-title">x</span>,<span class="hljs-title">int</span> <span class="hljs-title">y</span>,<span class="hljs-title">int</span> <span class="hljs-title">bh</span>,<span class="hljs-title">vector</span>&lt;<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;&gt;&amp; <span class="hljs-title">grid</span>,<span class="hljs-title">int</span> <span class="hljs-title">m</span>,<span class="hljs-title">int</span> <span class="hljs-title">n</span>)</span><br><span class="hljs-class">    &#123;</span><br><span class="hljs-class">        if(<span class="hljs-title">grid</span>[<span class="hljs-title">x</span>][<span class="hljs-title">y</span>]!=1)</span><br><span class="hljs-class">            return;</span><br><span class="hljs-class">        grid[x][y]=bh;</span><br><span class="hljs-class">        if(<span class="hljs-title">x</span>+1&lt;<span class="hljs-title">m</span>)</span><br><span class="hljs-class">            dfs(<span class="hljs-title">x</span>+1,<span class="hljs-title">y</span>,<span class="hljs-title">bh</span>,<span class="hljs-title">grid</span>,<span class="hljs-title">m</span>,<span class="hljs-title">n</span>);</span><br><span class="hljs-class">        if(<span class="hljs-title">y</span>+1&lt;<span class="hljs-title">n</span>)</span><br><span class="hljs-class">            dfs(<span class="hljs-title">x</span>,<span class="hljs-title">y</span>+1,<span class="hljs-title">bh</span>,<span class="hljs-title">grid</span>,<span class="hljs-title">m</span>,<span class="hljs-title">n</span>);</span><br><span class="hljs-class">        if(<span class="hljs-title">x</span>-1&gt;=0)</span><br><span class="hljs-class">            dfs(<span class="hljs-title">x</span>-1,<span class="hljs-title">y</span>,<span class="hljs-title">bh</span>,<span class="hljs-title">grid</span>,<span class="hljs-title">m</span>,<span class="hljs-title">n</span>);</span><br><span class="hljs-class">        if(<span class="hljs-title">y</span>-1&gt;=0)</span><br><span class="hljs-class">            dfs(<span class="hljs-title">x</span>,<span class="hljs-title">y</span>-1,<span class="hljs-title">bh</span>,<span class="hljs-title">grid</span>,<span class="hljs-title">m</span>,<span class="hljs-title">n</span>);</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">    int largestIsland(<span class="hljs-title">vector</span>&lt;<span class="hljs-title">vector</span>&lt;<span class="hljs-title">int</span>&gt;&gt;&amp; <span class="hljs-title">grid</span>) &#123;</span><br><span class="hljs-class">        int m=grid.size();</span><br><span class="hljs-class">        int n=grid[0].size();</span><br><span class="hljs-class">        unordered_map&lt;int,int&gt; mp;</span><br><span class="hljs-class">        mp[0]=0;</span><br><span class="hljs-class">        int ans=0;</span><br><span class="hljs-class">        int bh=2;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>]==1)</span><br><span class="hljs-class">                &#123;</span><br><span class="hljs-class">                    dfs(<span class="hljs-title">i</span>,<span class="hljs-title">j</span>,<span class="hljs-title">bh</span>,<span class="hljs-title">grid</span>,<span class="hljs-title">m</span>,<span class="hljs-title">n</span>);</span><br><span class="hljs-class">                    ++bh;</span><br><span class="hljs-class">                &#125;</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>]!=0)</span><br><span class="hljs-class">                    ++mp[grid[i][j]];</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        int flag=0;</span><br><span class="hljs-class">        for(<span class="hljs-title">int</span> <span class="hljs-title">i</span>=0;<span class="hljs-title">i</span>&lt;<span class="hljs-title">m</span>;++<span class="hljs-title">i</span>)</span><br><span class="hljs-class">        &#123;</span><br><span class="hljs-class">            for(<span class="hljs-title">int</span> <span class="hljs-title">j</span>=0;<span class="hljs-title">j</span>&lt;<span class="hljs-title">n</span>;++<span class="hljs-title">j</span>)</span><br><span class="hljs-class">            &#123;</span><br><span class="hljs-class">                if(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>]==0)</span><br><span class="hljs-class">                &#123;</span><br><span class="hljs-class">                    flag=1;</span><br><span class="hljs-class">                    int t=0;</span><br><span class="hljs-class">                    unordered_set&lt;int&gt; s;</span><br><span class="hljs-class">                    if(<span class="hljs-title">i</span>-1&gt;=0)</span><br><span class="hljs-class">                        s.insert(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>-1][<span class="hljs-title">j</span>]);</span><br><span class="hljs-class">                    if(<span class="hljs-title">j</span>-1&gt;=0)</span><br><span class="hljs-class">                        s.insert(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>-1]);</span><br><span class="hljs-class">                    if(<span class="hljs-title">i</span>+1&lt;<span class="hljs-title">m</span>)</span><br><span class="hljs-class">                        s.insert(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>+1][<span class="hljs-title">j</span>]);</span><br><span class="hljs-class">                    if(<span class="hljs-title">j</span>+1&lt;<span class="hljs-title">n</span>)</span><br><span class="hljs-class">                        s.insert(<span class="hljs-title">grid</span>[<span class="hljs-title">i</span>][<span class="hljs-title">j</span>+1]);</span><br><span class="hljs-class">                    for(<span class="hljs-title">auto</span> <span class="hljs-title">it</span>=<span class="hljs-title">s</span>.<span class="hljs-title">begin</span>();it!=s.end();++it)</span><br><span class="hljs-class">                        t+=mp[*it];</span><br><span class="hljs-class">                    ans=max(<span class="hljs-title">ans</span>,<span class="hljs-title">t</span>+1);</span><br><span class="hljs-class">                &#125;</span><br><span class="hljs-class">            &#125;</span><br><span class="hljs-class">        &#125;</span><br><span class="hljs-class">        if(<span class="hljs-title">flag</span>)</span><br><span class="hljs-class">            return ans;</span><br><span class="hljs-class">        else</span><br><span class="hljs-class">            return m*n;</span><br><span class="hljs-class">    &#125;</span><br><span class="hljs-class">&#125;;</span><br></code></pre></td></tr></table></figure><h2 id="æœ€çŸ­çš„æ¡¥"><a class="markdownIt-Anchor" href="#æœ€çŸ­çš„æ¡¥"></a> æœ€çŸ­çš„æ¡¥</h2><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p><a href="https://leetcode.cn/problems/shortest-bridge/">åŸé¢˜é“¾æ¥</a></p><p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º n x n çš„äºŒå…ƒçŸ©é˜µ grid ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé™†åœ°ï¼Œ0 è¡¨ç¤ºæ°´åŸŸã€‚</p><p>å²› æ˜¯ç”±å››é¢ç›¸è¿çš„ 1 å½¢æˆçš„ä¸€ä¸ªæœ€å¤§ç»„ï¼Œå³ä¸ä¼šä¸éç»„å†…çš„ä»»ä½•å…¶ä»– 1 ç›¸è¿ã€‚grid ä¸­ æ°å¥½å­˜åœ¨ä¸¤åº§å²› ã€‚</p><p>ä½ å¯ä»¥å°†ä»»æ„æ•°é‡çš„ 0 å˜ä¸º 1 ï¼Œä»¥ä½¿ä¸¤åº§å²›è¿æ¥èµ·æ¥ï¼Œå˜æˆ ä¸€åº§å²› ã€‚</p><p>è¿”å›å¿…é¡»ç¿»è½¬çš„ 0 çš„æœ€å°æ•°ç›®ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šgrid = <span class="hljs-string">[[0,1,0],[0,0,0],[0,0,1]]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯æ±‚ä¸¤ä¸ªå²›ä¹‹é—´çš„æœ€çŸ­è·ç¦»ï¼Œä¸»è¦æ€è·¯æ˜¯dfsæ ‡è®°å…¶ä¸­ä¸€ä¸ªå²›ï¼Œç„¶åç”¨bfsè¿›è¡Œå²›å±¿ä¹‹é—´æœ€çŸ­è·ç¦»çš„æ±‚è§£</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    queue&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; q;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid)</span></span><br><span class="hljs-function">    </span>&#123;<br>        grid[x][y]=<span class="hljs-number">2</span>;<br>        q.<span class="hljs-built_in">emplace</span>(x,y);<br>        <span class="hljs-keyword">if</span>(x<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;grid[x<span class="hljs-number">-1</span>][y]==<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">dfs</span>(x<span class="hljs-number">-1</span>,y,grid);<br>        <span class="hljs-keyword">if</span>(x+<span class="hljs-number">1</span>&lt;n&amp;&amp;grid[x+<span class="hljs-number">1</span>][y]==<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">dfs</span>(x+<span class="hljs-number">1</span>,y,grid);<br>        <span class="hljs-keyword">if</span>(y<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;grid[x][y<span class="hljs-number">-1</span>]==<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">dfs</span>(x,y<span class="hljs-number">-1</span>,grid);<br>        <span class="hljs-keyword">if</span>(y+<span class="hljs-number">1</span>&lt;n&amp;&amp;grid[x][y+<span class="hljs-number">1</span>]==<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">dfs</span>(x,y+<span class="hljs-number">1</span>,grid);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid,<span class="hljs-type">int</span>&amp; step)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>        &#123;<br>            <span class="hljs-type">int</span> len=q.<span class="hljs-built_in">size</span>();<br>            <span class="hljs-keyword">while</span>(len--)<br>            &#123;<br>                <span class="hljs-type">int</span> x=q.<span class="hljs-built_in">front</span>().first;<br>                <span class="hljs-type">int</span> y=q.<span class="hljs-built_in">front</span>().second;<br>                q.<span class="hljs-built_in">pop</span>();<br>                <span class="hljs-keyword">if</span>(x<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;grid[x<span class="hljs-number">-1</span>][y]!=<span class="hljs-number">2</span>)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(grid[x<span class="hljs-number">-1</span>][y]==<span class="hljs-number">1</span>)<br>                        <span class="hljs-keyword">return</span>;<br>                    q.<span class="hljs-built_in">emplace</span>(x<span class="hljs-number">-1</span>,y);<br>                    grid[x<span class="hljs-number">-1</span>][y]=<span class="hljs-number">2</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span>(y<span class="hljs-number">-1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;grid[x][y<span class="hljs-number">-1</span>]!=<span class="hljs-number">2</span>)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(grid[x][y<span class="hljs-number">-1</span>]==<span class="hljs-number">1</span>)<br>                        <span class="hljs-keyword">return</span>;<br>                    q.<span class="hljs-built_in">emplace</span>(x,y<span class="hljs-number">-1</span>);<br>                    grid[x][y<span class="hljs-number">-1</span>]=<span class="hljs-number">2</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span>(x+<span class="hljs-number">1</span>&lt;n&amp;&amp;grid[x+<span class="hljs-number">1</span>][y]!=<span class="hljs-number">2</span>)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(grid[x+<span class="hljs-number">1</span>][y]==<span class="hljs-number">1</span>)<br>                        <span class="hljs-keyword">return</span>;<br>                    q.<span class="hljs-built_in">emplace</span>(x+<span class="hljs-number">1</span>,y);<br>                    grid[x+<span class="hljs-number">1</span>][y]=<span class="hljs-number">2</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span>(y+<span class="hljs-number">1</span>&lt;n&amp;&amp;grid[x][y+<span class="hljs-number">1</span>]!=<span class="hljs-number">2</span>)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(grid[x][y+<span class="hljs-number">1</span>]==<span class="hljs-number">1</span>)<br>                        <span class="hljs-keyword">return</span>;<br>                    q.<span class="hljs-built_in">emplace</span>(x,y+<span class="hljs-number">1</span>);<br>                    grid[x][y+<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>                &#125;<br>            &#125;<br>            ++step;<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">shortestBridge</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;<br>        n=grid.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> step=<span class="hljs-number">0</span>;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; dirs = &#123;&#123;<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>&#125;&#125;;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(grid[i][j]==<span class="hljs-number">1</span>)<br>                &#123;<br>                    <span class="hljs-built_in">dfs</span>(i,j,grid);<br>                    <span class="hljs-built_in">bfs</span>(grid,step);<br>                    <span class="hljs-keyword">return</span> step;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°ä½dp</title>
    <link href="/2022/10/23/%E6%95%B0%E4%BD%8Ddp/"/>
    <url>/2022/10/23/%E6%95%B0%E4%BD%8Ddp/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%95%B0%E4%BD%8Ddp">æ•°ä½DP</a><ul><li><a href="#%E4%BE%8B%E9%A2%98">ä¾‹é¢˜</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#ac%E4%BB%A3%E7%A0%81">ACä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="æ•°ä½dp"><a class="markdownIt-Anchor" href="#æ•°ä½dp"></a> æ•°ä½DP</h2><blockquote><p>ä¸€èˆ¬æŒ‡åœ¨é™å®šæ¡ä»¶ä¸‹ï¼Œå…³äºæ¯ä½æ•°å­—å‡ºç°æ¬¡æ•°çš„ç›¸å…³é¢˜ç›®ï¼Œå…ˆä»å…¥é—¨å¼€å§‹å§(ğŸ˜¢è‡ªå·±tcl)</p></blockquote><h3 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h3><p><a href="https://www.luogu.com.cn/problem/P2602">P2602 [ZJOI2010] æ•°å­—è®¡æ•°</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸¤ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>ï¼Œæ±‚åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span> ä¸­çš„æ‰€æœ‰æ•´æ•°ä¸­ï¼Œæ¯ä¸ªæ•°ç (digit)å„å‡ºç°äº†å¤šå°‘æ¬¡ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ä»…åŒ…å«ä¸€è¡Œä¸¤ä¸ªæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span>ï¼Œå«ä¹‰å¦‚ä¸Šæ‰€è¿°ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>åŒ…å«ä¸€è¡Œåä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">0\sim 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span> åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span> ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ã€‚</p><p>æ ·ä¾‹è¾“å…¥</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">99</span><br></code></pre></td></tr></table></figure><p>æ ·ä¾‹è¾“å‡º</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">9 </span><span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p><strong>æ•°æ®è§„æ¨¡ä¸çº¦å®š</strong></p><ul><li>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œä¿è¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>â‰¤</mo><mi>b</mi><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">a\le b\le10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>ï¼›</li><li>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œä¿è¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>a</mi><mo>â‰¤</mo><mi>b</mi><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">1\le a\le b\le 10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</li></ul><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜ä¸»è¦å°±æ˜¯æ‰¾åˆ°å„ç§è§„å¾‹</p><p>é¦–å…ˆæ‰¾åˆ°é€’æ¨å…¬å¼ï¼Œå¦‚æœæœ‰<code>i</code>ä½æ•°å­—ï¼Œé‚£ä¹ˆå¯¹äº<code>0ï½9</code>çš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œå‡ºç°çš„æ¬¡æ•°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸è€ƒè™‘å‰å¯¼0æ—¶æœ‰<br /><code>dp[i]=10*dp[i-1]+10^(i-1)</code><br />dp[i]è¡¨ç¤ºiä½çš„æ•°æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°</p><p>å¯¹äºABCD</p><p>çœ‹A000ï¼ŒæŠŠè¿™ä¸ªA000çœ‹æˆ0000ï½1000ï½2000â€¦A000å¯¹äºä¸è€ƒè™‘é¦–ä½æ¯ä¸€ä¸ªå¼å­çš„æ•°å­—çš„å‡ºç°ä¸ªæ•°ä¸º <code>A*dp[3]</code>ã€‚åŠ ä¸Šé¦–ä½å‡ºç°ä¹Ÿå°±æ˜¯å°äºAæ¯ä¸€ä¸ªæ•°éƒ½å‡ºç°äº†<code>10^3</code>æ¬¡ï¼Œå†åŠ ä¸Šï¼Œæˆ‘ä»¬å°±æŠŠA000å¤„ç†å®Œäº†ã€‚</p><p>å¦å¤–ï¼Œé¦–ä½Aè¿˜å‡ºç°äº†BCD+1æ¬¡å‘¢ï¼Œä¹Ÿå°±æ˜¯ä»A000~ABCDï¼Œè¿™ä¸ªAè¿˜å‡ºç°äº†BCD+1æ¬¡ï¼Œæœ€åå‡å»å‰å¯¼0çš„ä¸ªæ•°ï¼Œå°±æ˜¯<code>10^(i-1)</code></p><h3 id="acä»£ç "><a class="markdownIt-Anchor" href="#acä»£ç "></a> ACä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br>ll a,b;<br>ll cnta[<span class="hljs-number">10</span>],cntb[<span class="hljs-number">10</span>];<br>ll dp[<span class="hljs-number">13</span>],ten[<span class="hljs-number">13</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dig</span><span class="hljs-params">(ll x,ll* cnt)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">13</span>,<span class="hljs-number">0</span>)</span></span>;<br><span class="hljs-keyword">while</span>(x)<br>&#123;<br>v[++len]=x%<span class="hljs-number">10</span>;<br>x/=<span class="hljs-number">10</span>;<br>&#125;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=len;i&gt;=<span class="hljs-number">1</span>;--i)<br>&#123;<br><span class="hljs-comment">//ä¸ç®—é¦–ä½ï¼Œæ¯ä¸ªæ•°å­—å‡ºç°äº†x*dp[i-1]æ¬¡,xæ˜¯å½“å‰æœ€é«˜ä½ </span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">10</span>;++j)<br>cnt[j]+=v[i]*dp[i<span class="hljs-number">-1</span>];<br><span class="hljs-comment">//ç®—é¦–ä½ï¼Œå³å°äºxçš„æ•°å¢åŠ 10^(i-1)ä¸ª </span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;v[i];++j)<br>cnt[j]+=ten[i<span class="hljs-number">-1</span>];<br><span class="hljs-comment">//é¦–ä½è¿˜å¤šå‡ºç°äº†ä½ä½+1æ¬¡</span><br>ll tmp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i<span class="hljs-number">-1</span>;j&gt;=<span class="hljs-number">1</span>;--j)<br>&#123;<br>tmp=tmp*<span class="hljs-number">10</span>+v[j];<br>&#125;<br>cnt[v[i]]+=tmp+<span class="hljs-number">1</span>;<br><span class="hljs-comment">//å‡å»å‰å¯¼0</span><br>cnt[<span class="hljs-number">0</span>]-=ten[i<span class="hljs-number">-1</span>]; <br>&#125;<br>&#125;<br><span class="hljs-comment">//dp[i]=10*dp[i-1]+10^(i-1)</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>ll a,b;<br>cin&gt;&gt;a&gt;&gt;b;<br>ten[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-comment">//åˆå§‹åŒ–dp </span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">13</span>;++i)<br>&#123;<br>dp[i]=<span class="hljs-number">10</span>*dp[i<span class="hljs-number">-1</span>]+ten[i<span class="hljs-number">-1</span>];<br>ten[i]=<span class="hljs-number">10</span>*ten[i<span class="hljs-number">-1</span>];<br>&#125;<br><span class="hljs-built_in">dig</span>(a<span class="hljs-number">-1</span>,cnta);<br><span class="hljs-built_in">dig</span>(b,cntb);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;++i)<br>&#123;<br>cout&lt;&lt;cntb[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è§„åˆ’å…¼èŒå·¥ä½œ</title>
    <link href="/2022/10/22/%E8%A7%84%E5%88%92%E5%85%BC%E8%81%8C%E5%B7%A5%E4%BD%9C/"/>
    <url>/2022/10/22/%E8%A7%84%E5%88%92%E5%85%BC%E8%81%8C%E5%B7%A5%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%A7%84%E5%88%92%E5%85%BC%E8%81%8C%E5%B7%A5%E4%BD%9C">è§„åˆ’å…¼èŒå·¥ä½œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="è§„åˆ’å…¼èŒå·¥ä½œ"><a class="markdownIt-Anchor" href="#è§„åˆ’å…¼èŒå·¥ä½œ"></a> è§„åˆ’å…¼èŒå·¥ä½œ</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ä½ æ‰“ç®—åˆ©ç”¨ç©ºé—²æ—¶é—´å…¼èŒæ¥èµšäº›é›¶èŠ±é’±</p><p>ç°åœ¨æœ‰è‹¥<code>n</code>æ¡å…¼èŒä¿¡æ¯ï¼Œä¸€æ¡å…¼èŒä¿¡æ¯åŒ…å«<code>a,b,c</code>3ä¸ªæ•°æ®</p><p><code>a</code>è¡¨ç¤ºè¯¥å…¼èŒçš„å¼€å§‹æ—¶é—´<br /><code>b</code>è¡¨ç¤ºè¯¥å…¼èŒçš„ç»ˆæ­¢æ—¶é—´<br /><code>c</code>è¡¨ç¤ºè¯¥å…¼èŒçš„æ”¶å…¥</p><p>ä½ åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…åªèƒ½æœ‰1ä»½å…¼èŒï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šä¸€ä»½å…¼èŒçš„ç»ˆæ­¢æ—¶é—´è¦æ»¡è¶³å°äºç­‰äºä¸‹ä¸€ä»½å…¼èŒçš„å¼€å§‹æ—¶é—´</p><p>è¯·ä½ ç®—å‡ºä½ èƒ½è·å¾—çš„æœ€å¤§æ”¶å…¥</p><p>è¾“å…¥ç¬¬ä¸€è¡Œ<code>n</code>ï¼Œè¡¨ç¤ºå…¼èŒä¸ªæ•°<br />ä¸‹é¢<code>n</code>è¡Œï¼Œæ¯è¡Œ3ä¸ªæ•°ï¼Œè¡¨ç¤º<code>a,b,c</code></p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">5</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">10</span> <span class="hljs-number">100</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">6</span> <span class="hljs-number">70</span><br><span class="hljs-symbol">6 </span><span class="hljs-number">9</span> <span class="hljs-number">60</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">150<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’è§£å†³ï¼Œå…ˆå°†æ‰€æœ‰å…¼èŒæŒ‰ç…§ç»ˆæ­¢æ—¶é—´å‡åºæ’åºï¼Œ<code>dp[i]</code>è¡¨ç¤ºåˆ°ç¬¬<code>i</code>ä»½èƒ½è·å¾—çš„æœ€å¤§æ”¶ç›Š</p><ul><li>å½“ä¸é€‰æ‹©ç¬¬<code>i</code>ä»½å…¼èŒï¼Œ<code>dp[i]=dp[i-1]</code></li><li>å½“é€‰æ‹©ç¬¬<code>i</code>ä»½å…¼èŒï¼Œ<code>dp[i]=dp[k]+profit[i]</code>ï¼Œ<code>k</code>æ˜¯æ»¡è¶³ç»ˆæ­¢æ—¶é—´å°äºç­‰äºç¬¬<code>i</code>ä»½å…¼èŒå¼€å§‹æ—¶é—´çš„ç¬¬<code>k</code>ä»½å…¼èŒ</li></ul><p>çŠ¶æ€æ–¹ç¨‹ï¼š<code>dp[i]=max(dp[i-1],dp[k]+profit[i])</code>;</p><p>å…³äº<code>k</code>çš„ç¡®å®šï¼Œå¾ˆå¤šäººæ˜¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ¥ç¡®å®š<code>k</code>çš„ï¼Œä½†æˆ‘è‡ªå·±å†™çš„äºŒåˆ†æŸ¥æ‰¾æ€»æ˜¯æ²¡æ³•acï¼Œæ‰€ä»¥å°±æ²¡ç”¨(tclğŸ˜¢ğŸ˜¢ğŸ˜¢)</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e4</span>+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">e</span><br>&#123;<br>    <span class="hljs-type">int</span> a,b,c;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> e&amp; t) <span class="hljs-type">const</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> b&lt;t.b;<br>    &#125; <br>&#125;e[N];<br><span class="hljs-type">int</span> dp[N]; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-type">int</span> k;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>cin&gt;&gt;e[i].a&gt;&gt;e[i].b&gt;&gt;e[i].c;<br>&#125;<br><span class="hljs-built_in">sort</span>(e+<span class="hljs-number">1</span>,e+n);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>k=i;<br><span class="hljs-keyword">while</span>(e[k].b&gt;e[i].a)<br>--k;<br>dp[i]=<span class="hljs-built_in">max</span>(dp[i<span class="hljs-number">-1</span>],dp[k]+e[i].c);<br>&#125;<br>cout&lt;&lt;dp[n]&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬kä¸ªè¯­æ³•ç¬¦å·</title>
    <link href="/2022/10/20/%E7%AC%ACk%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%AC%A6%E5%8F%B7/"/>
    <url>/2022/10/20/%E7%AC%ACk%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%AC%A6%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%AC%ACk%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%AC%A6%E5%8F%B7">ç¬¬kä¸ªè¯­æ³•ç¬¦å·</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li><li><a href="#%E4%BD%8D%E6%93%8D%E4%BD%9C%E6%89%A9%E5%B1%95">ä½æ“ä½œæ‰©å±•</a></li></ul></li><li><a href="#%E6%89%A9%E5%B1%95%E6%B1%82%E6%9F%90%E4%B8%AA%E6%95%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0">æ‰©å±•ï¼šæ±‚æŸä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°</a><ul><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç¬¬kä¸ªè¯­æ³•ç¬¦å·"><a class="markdownIt-Anchor" href="#ç¬¬kä¸ªè¯­æ³•ç¬¦å·"></a> ç¬¬kä¸ªè¯­æ³•ç¬¦å·</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p><a href="https://leetcode.cn/problems/k-th-symbol-in-grammar/">åŸé¢˜é“¾æ¥</a><br />æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŒ…å« n è¡Œ(Â ç´¢å¼•ä» 1Â  å¼€å§‹Â )çš„è¡¨ã€‚é¦–å…ˆåœ¨ç¬¬ä¸€è¡Œæˆ‘ä»¬å†™ä¸Šä¸€ä¸ª 0ã€‚æ¥ä¸‹æ¥çš„æ¯ä¸€è¡Œï¼Œå°†å‰ä¸€è¡Œä¸­çš„0æ›¿æ¢ä¸º01ï¼Œ1æ›¿æ¢ä¸º10ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äº n = 3 ï¼Œç¬¬ 1 è¡Œæ˜¯ 0 ï¼Œç¬¬ 2 è¡Œæ˜¯ 01 ï¼Œç¬¬3è¡Œæ˜¯ 0110 ã€‚<br />ç»™å®šè¡Œæ•°Â nÂ å’Œåºæ•° kï¼Œè¿”å›ç¬¬ n è¡Œä¸­ç¬¬ kÂ ä¸ªå­—ç¬¦ã€‚ï¼ˆÂ kÂ ä»ç´¢å¼• 1 å¼€å§‹ï¼‰</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: n = 2, k = 1</span><br><span class="hljs-section">è¾“å‡º: 0</span><br><span class="hljs-section">è§£é‡Š: </span><br><span class="hljs-section">ç¬¬ä¸€è¡Œ: 0 </span><br><span class="hljs-section">ç¬¬äºŒè¡Œ: 01</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å¤§è‡´çœ‹ä¸Šå»ä¸æ˜¯å¾ˆéš¾ï¼Œè‡ªå·±çš„æ€è·¯å°±æ˜¯ä¸­è§„ä¸­çŸ©çš„ç®—ï¼Œæ²¡ä»€ä¹ˆäº®ç‚¹(ğŸ˜¢tcl)</p><p>çœ‹äº†è¯„è®ºåŒºçš„ä¸€ä½å¤§ä½¬ï¼Œç¬é—´çš„æŠ˜æœäº†ï¼Œæ—¶é—´å¤æ‚åº¦ç›´æ¥<code>O(1)</code></p><p>å¤§ä½¬è§£è¿™é“é¢˜å°±æ˜¯ä¸€å¥è¯ï¼š<strong>å¯¹K-1åšå¥‡å¶æ ¡éªŒ</strong></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><p>ä¸‹é¢æ”¾ä¸Šå¤§ä½¬çš„ä»£ç ï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">class</span> <span class="hljs-variable">Solution</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-variable">public</span><span class="hljs-operator">:</span><br>    <span class="hljs-variable">int</span> <span class="hljs-variable">kthGrammar</span><span class="hljs-punctuation">(</span><span class="hljs-variable">int</span> <span class="hljs-built_in">N</span><span class="hljs-operator">,</span> <span class="hljs-variable">unsigned</span> <span class="hljs-variable">int</span> <span class="hljs-built_in">K</span><span class="hljs-punctuation">)</span> <br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-built_in">K</span> <span class="hljs-operator">-=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span><br>        <span class="hljs-built_in">K</span> <span class="hljs-operator">^=</span> <span class="hljs-built_in">K</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span><br>        <span class="hljs-built_in">K</span> <span class="hljs-operator">^=</span> <span class="hljs-built_in">K</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">2</span><span class="hljs-operator">;</span><br>        <span class="hljs-built_in">K</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-built_in">K</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">0</span><span class="hljs-variable">x11111111</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">*</span> <span class="hljs-number">0</span><span class="hljs-variable">x11111111</span><span class="hljs-operator">;</span><br>        <span class="hljs-variable">return</span> <span class="hljs-punctuation">(</span><span class="hljs-built_in">K</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">28</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">;</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€çœ¼çœ‹è¿‡å»ï¼Œæˆ‘è¿˜æ˜¯ä¸ä¼šğŸ˜¢</p><p>äºæ˜¯ä»”ç»†çœ‹äº†ä¸€ç•ªï¼Œä¸‹é¢æˆ‘æ¥è§£é‡Šä¸€ä¸‹</p><h3 id="ä½æ“ä½œæ‰©å±•"><a class="markdownIt-Anchor" href="#ä½æ“ä½œæ‰©å±•"></a> ä½æ“ä½œæ‰©å±•</h3><p>å¤§ä½¬çš„è¯ï¼Œç¿»è¯‘ä¸€ä¸‹ï¼Œå°±æ˜¯æ±‚<code>K-1</code>å¯¹åº”çš„äºŒè¿›åˆ¶æ•°ä¸­ï¼Œ1çš„ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ï¼Œå¥‡æ•°è¿”å›1,å¶æ•°è¿”å›0</p><p>å› ä¸ºåœ¨å¥‡å¶æ ¡éªŒä¸­ï¼Œå¸¸å¸¸éœ€è¦éœ€è¦åˆ¤æ–­ä¸€ä¸ªæ•°ä¸­1çš„ä¸ªæ•°ï¼Œä»¥ç¡®å®šå¥‡å¶æ ¡éªŒä½</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é“é¢˜çš„æœ¬è´¨ï¼Œå°±æ˜¯åˆ¤æ–­<code>K-1</code>å¯¹åº”çš„äºŒè¿›åˆ¶æ•°ä¸­ï¼Œ1çš„ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ã€‚(å¤§ä½¬å¤ªå¼ºäº†%%%)</p><p>å…³äºä»£ç å‘¢ï¼Œæˆ‘ä¸»è¦å‚è€ƒäº†è¿™ç¯‡åšå®¢  <a href="https://blog.csdn.net/u012028275/article/details/112596947"><em>åšå®¢é“¾æ¥</em></a>ï¼Œè¯´çš„éå¸¸è¯¦ç»†ï¼Œè¿˜å¸¦å›¾ç¤ºã€‚</p><p><code>K ^= K &gt;&gt; 1;</code>ï¼Œä½œç”¨å°±æ˜¯ç›¸é‚»ä¸¤ä½å¼‚æˆ–ï¼Œåˆ¤æ–­æ¯ä¸¤ä½1çš„ä¸ªæ•°ï¼Œå¥‡æ•°ä¸ª1åˆ™ä¸ºï¼Œå¦åˆ™ä¸º0ï¼Œç»“æœå­˜åœ¨ç›¸é‚»2ä½çš„ä½ä½</p><p><code>K ^= K &gt;&gt; 2;</code>ï¼Œå’Œä¸Šä¸€æ­¥å·®ä¸å¤šï¼Œä¸è¿‡åˆ¤æ–­çš„æ˜¯æ¯4ä½çš„1çš„ä¸ªæ•°</p><p><code>K &amp; 0x11111111</code>ï¼Œä½œç”¨æ˜¯æ¯4ä½åªå–æœ€ä½ä½ï¼Œå…¶ä»–ç½®0</p><p><code>K * 0x11111111;</code>ï¼Œä½œç”¨æ˜¯å°†æ•´ä¸ª32ä½çš„1çš„ä¸ªæ•°å¥‡å¶æ€§å‹ç¼©åˆ°æœ€é«˜4ä½ï¼Œä¹Ÿå°±æ˜¯28ï½31ä½</p><p><code>(K &gt;&gt; 28) &amp; 1;</code>ï¼Œç§»åˆ°æœ€ä½4ä½ï¼Œè§£å‡º1çš„ä¸ªæ•°çš„å¥‡å¶æ€§</p><h2 id="æ‰©å±•æ±‚æŸä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°"><a class="markdownIt-Anchor" href="#æ‰©å±•æ±‚æŸä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°"></a> æ‰©å±•ï¼šæ±‚æŸä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°</h2><p>ä½æ“ä½œè¿˜å¯ä»¥æ±‚æŸä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°</p><p>æ¯”å¦‚ç°åœ¨éœ€è¦æ±‚ä¸€ä¸ªæ— ç¬¦å·æ•´å½¢æ•°çš„äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°</p><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>å…¶å®å’Œå¥‡å¶æ ¡éªŒæœ‰ç‚¹å…³ç³»ï¼Œæ±‚æ¯2ä¸ªæ•°ã€æ¯4ä¸ªæ•°ã€æ¯8ä¸ªæ•°ã€æ¯16ä¸ªæ•°çš„1çš„ä¸ªæ•°ç›¸åŠ å°±å¥½äº†</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-attr">std</span><span class="hljs-punctuation">;</span><br>int main()<br><span class="hljs-punctuation">&#123;</span><br>int n<span class="hljs-punctuation">;</span><br>cin&gt;&gt;n<span class="hljs-punctuation">;</span><br><span class="hljs-comment">//int n=0b0111100110011000000000000000001; </span><br>n=((n<span class="hljs-variable">&amp;0xaaaaaaaa</span>)&gt;&gt;<span class="hljs-number">1</span>)+(n<span class="hljs-variable">&amp;0x55555555</span>)<span class="hljs-punctuation">;</span> <br>n=((n<span class="hljs-variable">&amp;0xcccccccc</span>)&gt;&gt;<span class="hljs-number">2</span>)+(n<span class="hljs-variable">&amp;0x33333333</span>)<span class="hljs-punctuation">;</span><br>n=((n<span class="hljs-variable">&amp;0xf0f0f0f0</span>)&gt;&gt;<span class="hljs-number">4</span>)+(n<span class="hljs-variable">&amp;0x0f0f0f0f</span>)<span class="hljs-punctuation">;</span><br>n=((n<span class="hljs-variable">&amp;0xff00ff00</span>)&gt;&gt;<span class="hljs-number">8</span>)+(n<span class="hljs-variable">&amp;0x00ff00ff</span>)<span class="hljs-punctuation">;</span><br>n=((n<span class="hljs-variable">&amp;0xffff0000</span>)&gt;&gt;<span class="hljs-number">16</span>)+(n<span class="hljs-variable">&amp;0x0000ffff</span>)<span class="hljs-punctuation">;</span><br>cout<span class="hljs-params">&lt;&lt;n&lt;&lt;endl;</span><br><span class="hljs-params">return <span class="hljs-number">0</span>;</span><br><span class="hljs-params">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°</title>
    <link href="/2022/10/18/%E4%BD%BF%E5%BA%8F%E5%88%97%E9%80%92%E5%A2%9E%E7%9A%84%E6%9C%80%E5%B0%8F%E4%BA%A4%E6%8D%A2%E6%AC%A1%E6%95%B0/"/>
    <url>/2022/10/18/%E4%BD%BF%E5%BA%8F%E5%88%97%E9%80%92%E5%A2%9E%E7%9A%84%E6%9C%80%E5%B0%8F%E4%BA%A4%E6%8D%A2%E6%AC%A1%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BD%BF%E5%BA%8F%E5%88%97%E9%80%92%E5%A2%9E%E7%9A%84%E6%9C%80%E5%B0%8F%E4%BA%A4%E6%8D%A2%E6%AC%A1%E6%95%B0">ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°"><a class="markdownIt-Anchor" href="#ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°"></a> ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°</h2><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p><a href="https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/">åŸé¢˜</a></p><p>æˆ‘ä»¬æœ‰ä¸¤ä¸ªé•¿åº¦ç›¸ç­‰ä¸”ä¸ä¸ºç©ºçš„æ•´å‹æ•°ç»„Â nums1Â å’ŒÂ nums2Â ã€‚åœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº¤æ¢Â nums1[i]Â å’ŒÂ nums2[i]çš„å…ƒç´ ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœ nums1 = [1,2,3,8] ï¼Œ nums2 =[5,6,7,4] ï¼Œä½ å¯ä»¥äº¤æ¢ i = 3 å¤„çš„å…ƒç´ ï¼Œå¾—åˆ° nums1 =[1,2,3,4] å’Œ nums2 =[5,6,7,8] ã€‚<br />è¿”å› ä½¿ nums1 å’Œ nums2 ä¸¥æ ¼é€’å¢Â æ‰€éœ€æ“ä½œçš„æœ€å°æ¬¡æ•° ã€‚</p><p>æ•°ç»„Â arrÂ ä¸¥æ ¼é€’å¢ ä¸”Â Â arr[0] &lt; arr[1] &lt; arr[2] &lt; â€¦ &lt; arr[arr.length - 1]Â ã€‚<br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">1<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p><code>dp[i][0]</code>è¡¨ç¤ºä¸äº¤æ¢ <code>i</code> å¤„å…ƒç´ æ—¶æ»¡è¶³æ¡ä»¶çš„æœ€å°æ“ä½œæ¬¡æ•°ï¼Œ<code>dp[i][1]</code>è¡¨ç¤ºäº¤æ¢ <code>i</code> å¤„å…ƒç´ æ—¶æ»¡è¶³æ¡ä»¶çš„æœ€å°æ“ä½œæ¬¡æ•°</p><p>ä¸‹é¢è¦åˆ†ç±»è®¨è®ºï¼š</p><ul><li>å½“nums1å’Œnumséƒ½é€’å¢ï¼Œä¸”åœ¨<code>i</code>å¤„äº¤æ¢åä¹Ÿéƒ½é€’å¢ï¼Œé‚£ä¹ˆåœ¨<code>i</code>å¤„å¯æ¢å¯ä¸æ¢</li><li>å½“nums1å’Œnumséƒ½é€’å¢ï¼Œä½†åœ¨<code>i</code>å¤„äº¤æ¢åä¸é€’å¢ï¼Œé‚£ä¹ˆå¦‚æœåœ¨<code>i</code>å¤„äº¤æ¢ï¼Œåœ¨<code>i-1</code>å¤„ä¹Ÿè¦äº¤æ¢</li><li>å½“nums1æˆ–nums2ä¸é€’å¢ï¼Œå¦‚æœåœ¨<code>i</code>å¤„äº¤æ¢ï¼Œé‚£ä¹ˆ<code>i-1</code>å¤„ä¸äº¤æ¢ï¼Œå¦‚æœ<code>i-1</code>å¤„äº¤æ¢ï¼Œ<code>i</code>å¤„ä¸äº¤æ¢</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs inform7">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>const int N=1e5;<br>int a<span class="hljs-comment">[N]</span>;<br>int b<span class="hljs-comment">[N]</span>;<br>int dp<span class="hljs-comment">[N]</span><span class="hljs-comment">[2]</span>;<br>int main()<br>&#123;<br>int n;<br>cin&gt;&gt;n;<br>for(int i=0;i&lt;n;++i)<br>cin&gt;&gt;a<span class="hljs-comment">[i]</span>;<br>for(int i=0;i&lt;n;++i)<br>cin&gt;&gt;b<span class="hljs-comment">[i]</span>;<br>dp<span class="hljs-comment">[0]</span><span class="hljs-comment">[1]</span>=1;<br>for(int i=1;i&lt;n;++i)<br>&#123;<br>if((a<span class="hljs-comment">[i-1]</span>&lt;a<span class="hljs-comment">[i]</span>&amp;&amp;b<span class="hljs-comment">[i-1]</span>&lt;b<span class="hljs-comment">[i]</span>)&amp;&amp;(a<span class="hljs-comment">[i-1]</span>&lt;b<span class="hljs-comment">[i]</span>&amp;&amp;b<span class="hljs-comment">[i-1]</span>&lt;a<span class="hljs-comment">[i]</span>))<br>&#123;<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>=min(dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[0]</span>,dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[1]</span>);<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[1]</span>=dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>+1;<br>&#125;<br>else if(a<span class="hljs-comment">[i-1]</span>&lt;a<span class="hljs-comment">[i]</span>&amp;&amp;b<span class="hljs-comment">[i-1]</span>&lt;b<span class="hljs-comment">[i]</span>)<br>&#123;<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>=dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[0]</span>;<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[1]</span>=dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[1]</span>+1;<br>&#125;<br>else<br>&#123;<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[0]</span>=dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[1]</span>;<br>dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[1]</span>=dp<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[0]</span>+1;<br>&#125;<br>&#125;<br>cout&lt;&lt;min(dp<span class="hljs-comment">[n-1]</span><span class="hljs-comment">[0]</span>,dp<span class="hljs-comment">[n-1]</span><span class="hljs-comment">[1]</span>);<br>return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¸åŒçš„å­åºåˆ—</title>
    <link href="/2022/10/14/%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97/"/>
    <url>/2022/10/14/%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97">ä¸åŒçš„å­åºåˆ—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä¸åŒçš„å­åºåˆ—"><a class="markdownIt-Anchor" href="#ä¸åŒçš„å­åºåˆ—"></a> ä¸åŒçš„å­åºåˆ—</h2><p><a href="https://leetcode.cn/problems/distinct-subsequences-ii/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè®¡ç®— s çš„ ä¸åŒéç©ºå­åºåˆ— çš„ä¸ªæ•°ã€‚å› ä¸ºç»“æœå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¿”å›ç­”æ¡ˆéœ€è¦å¯¹ 10^9 + 7 å–ä½™ ã€‚</p><p>å­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯ç»ç”±åŸå­—ç¬¦ä¸²åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯èƒ½ä¸åˆ é™¤ï¼‰å­—ç¬¦ä½†ä¸æ”¹å˜å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®çš„ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å¦‚ï¼Œâ€œaceâ€ æ˜¯ â€œabcdeâ€ çš„ä¸€ä¸ªå­åºåˆ—ï¼Œä½† â€œaecâ€ ä¸æ˜¯ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;aba&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">6</span><br>è§£é‡Šï¼š<span class="hljs-number">6</span> ä¸ªä¸åŒçš„å­åºåˆ—åˆ†åˆ«æ˜¯ <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;ab&quot;</span>, <span class="hljs-string">&quot;ba&quot;</span>, <span class="hljs-string">&quot;aa&quot;</span> ä»¥åŠ <span class="hljs-string">&quot;aba&quot;</span>ã€‚<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™æ˜¯ä¸€é“åŠ¨æ€è§„åˆ’çš„é¢˜ç›®ï¼Œè‡ªå·±æ²¡æƒ³å‡ºæ¥ï¼Œçœ‹äº†é¢˜è§£æ‰ç†è§£<br />æ ¸å¿ƒçš„æ€æƒ³å°±æ˜¯ï¼Œ<em>ä»¥å½“å‰å­—ç¬¦ç»“å°¾çš„ä¸åŒå­åºåˆ—çš„ä¸ªæ•°=ä¹‹å‰éƒ¨åˆ†çš„ä¸ªæ•°+æ–°å¢åŠ çš„ä¸ªæ•°-é‡å¤åºåˆ—ä¸ªæ•°</em><br />å…¶ä¸­ï¼Œéœ€è¦ä¸€ä¸ªæ•°ç»„<code>recount[]</code>æ¥è®°å½•æ¯ä¸ªå­—ç¬¦å¸¦æ¥çš„å¢åŠ é‡ï¼Œå½“æŸå­—ç¬¦å¤šæ¬¡å‡ºç°æ—¶ï¼Œå®ƒå¸¦æ¥çš„é‡å¤é‡å°±ç­‰äº<code>recount[i]</code></p><p>æ¯”å¦‚ï¼šå¯¹äºåºåˆ— abcb</p><p>a : â€œâ€, a<br /><strong>newcnt=1</strong></p><p>ab : â€œâ€, a, b, ab<br /><strong>newcnt=2</strong></p><p>abc : â€œâ€,a, b, ab, c, ac, bc, cc<br /><strong>newcnt=4</strong></p><p>abcb: â€œâ€,a, b, ab, c, ac, bc, cc, <s>b</s>, <s>ab</s>, bb, abb, cb, acb, bcb, ccb<br /><strong>newcnt=8, recount[â€˜bâ€™]=2</strong></p><p>æ ¹æ®ä»¥ä¸Šä¾‹å­ï¼Œå¯å¾—åˆ°ä¸‹é¢çš„ç»“è®ºï¼š</p><ul><li>newcnt=pre_cnt(ä¸Šä¸€ä¸ªå­—ç¬¦çš„ä¸ªæ•°)</li><li>recount[x]=newcnt_x(å­—ç¬¦xä¸Šä¸€æ¬¡å‡ºç°å¸¦æ¥çš„æ–°å¢ä¸ªæ•°)</li></ul><p>ä¸ºäº†è®¡ç®—ï¼Œåœ¨å­é›†å‰é¢åŠ äº†ç©ºä¸² <code>â€œâ€</code>ï¼Œæ‰€ä»¥åˆå§‹ä¸ªæ•°ä¸º1</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> distinctSubseqII(string s) &#123;<br>        <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">mod</span>=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br>        <span class="hljs-built_in">int</span> len=s.size();<br>        vector&lt;<span class="hljs-built_in">int</span>&gt; recount(<span class="hljs-number">26</span>,<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> newcnt;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>        &#123;<br>            newcnt=ans;<br>            ans=((ans+newcnt)%<span class="hljs-keyword">mod</span>-recount[s[i]-<span class="hljs-string">&#x27;a&#x27;</span>]+<span class="hljs-keyword">mod</span>)%<span class="hljs-keyword">mod</span>;<br>            recount[s[i]-<span class="hljs-string">&#x27;a&#x27;</span>]=newcnt;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans<span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä¼˜åŠ¿æ´—ç‰Œ</title>
    <link href="/2022/10/09/%E4%BC%98%E5%8A%BF%E6%B4%97%E7%89%8C/"/>
    <url>/2022/10/09/%E4%BC%98%E5%8A%BF%E6%B4%97%E7%89%8C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BC%98%E5%8A%BF%E6%B4%97%E7%89%8C">ä¼˜åŠ¿æ´—ç‰Œ</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ä¼˜åŠ¿æ´—ç‰Œ"><a class="markdownIt-Anchor" href="#ä¼˜åŠ¿æ´—ç‰Œ"></a> ä¼˜åŠ¿æ´—ç‰Œ</h2><p><a href="https://leetcode.cn/problems/advantage-shuffle/">é¢˜ç›®é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„æ•°ç»„Â nums1Â å’ŒÂ nums2ï¼Œnums1Â ç›¸å¯¹äº nums2 çš„ä¼˜åŠ¿å¯ä»¥ç”¨æ»¡è¶³Â nums1[i] &gt; nums2[i]Â çš„ç´¢å¼• iÂ çš„æ•°ç›®æ¥æè¿°ã€‚</p><p>è¿”å› nums1Â çš„ä»»æ„æ’åˆ—ï¼Œä½¿å…¶ç›¸å¯¹äº nums2Â çš„ä¼˜åŠ¿æœ€å¤§åŒ–ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums1 = <span class="hljs-string">[12,24,8,32]</span>, nums2 = <span class="hljs-string">[13,25,32,11]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[24,32,8,12]</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><blockquote><p>é¢˜ç›®æœ‰ä¸€ä¸ªéšå«æ¡ä»¶æ˜¯ï¼Œå½“nums1ä¸­çš„æŸä¸ªæ•°ä¸å¤§äºäºnums2çš„ä»»æ„æ•°æ—¶ï¼Œè¯¥æ•°å¯¹åº”nums2çš„è¾ƒå¤§çš„æ•°ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼Œå…ˆå°†ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡æ ¹æ®æ•°å­—çš„å¤§å°å‡åºæ’åºï¼Œç„¶åå½“nums1ä¸­çš„æ•°å¤§äºnums2çš„æ•°ï¼ŒåŠ å…¥ç­”æ¡ˆæ•°ç»„ä¸­ï¼Œå¦åˆ™æ‰¾åˆ°å¯¹åº”nums2ä¸­çš„è¾ƒå¤§æ•°çš„å¯¹åº”ä½ç½®ï¼Œæ ¹æ®è¯¥ä½ç½®åŠ å…¥ç­”æ¡ˆæ•°ç»„ä¸­</p></blockquote><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">advantageCount</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums1, vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums2)</span> </span>&#123;<br>        <span class="hljs-type">int</span> len = nums1.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ans</span><span class="hljs-params">(len)</span>,<span class="hljs-title">a</span><span class="hljs-params">(len)</span>,<span class="hljs-title">b</span><span class="hljs-params">(len)</span></span>;<br>        <span class="hljs-built_in">iota</span>(a.<span class="hljs-built_in">begin</span>(),a.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">iota</span>(b.<span class="hljs-built_in">begin</span>(),b.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">sort</span>(a.<span class="hljs-built_in">begin</span>(),a.<span class="hljs-built_in">end</span>(),[&amp;](<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> j)&#123;<br>            <span class="hljs-keyword">return</span> nums1[i]&lt;nums1[j];<br>        &#125;);<br>        <span class="hljs-built_in">sort</span>(b.<span class="hljs-built_in">begin</span>(),b.<span class="hljs-built_in">end</span>(),[&amp;](<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> j)&#123;<br>            <span class="hljs-keyword">return</span> nums2[i]&lt;nums2[j];<br>        &#125;);<br>        <span class="hljs-type">int</span> l=<span class="hljs-number">0</span>,r=len<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(nums1[a[i]]&gt;nums2[b[l]])<br>            &#123;<br>                ans[b[l]]=nums1[a[i]];<br>                ++l;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                ans[b[r]]=nums1[a[i]];<br>                --r;<br>            &#125;<br><br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ‹¬å·é—®é¢˜</title>
    <link href="/2022/10/07/%E6%8B%AC%E5%8F%B7%E9%97%AE%E9%A2%98/"/>
    <url>/2022/10/07/%E6%8B%AC%E5%8F%B7%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D">æ‹¬å·åŒ¹é…</a></li><li><a href="#%E4%BD%BF%E6%8B%AC%E5%8F%B7%E6%9C%89%E6%95%88%E7%9A%84%E6%9C%80%E5%B0%91%E6%B7%BB%E5%8A%A0">ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ </a></li><li><a href="#%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90">æ‹¬å·ç”Ÿæˆ</a></li><li><a href="#%E6%8B%AC%E5%8F%B7%E7%9A%84%E5%88%86%E6%95%B0">æ‹¬å·çš„åˆ†æ•°</a></li></ul><!-- /TOC --><blockquote><p>å…³äºæ‹¬å·å¤šå¤šå°‘å°‘ä¼šç”¨åˆ°æ ˆï¼Œä¸‹é¢ä¸¾å‡ ä¸ªç®€å•ä¾‹å­</p></blockquote><h3 id="æ‹¬å·åŒ¹é…"><a class="markdownIt-Anchor" href="#æ‹¬å·åŒ¹é…"></a> æ‹¬å·åŒ¹é…</h3><p><a href="https://leetcode.cn/problems/valid-parentheses/">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€™ï¼Œâ€˜)â€™ï¼Œâ€˜{â€™ï¼Œâ€˜}â€™ï¼Œâ€˜[â€™ï¼Œâ€˜]â€™Â çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><ul><li>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚</li><li>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</li><li>æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚</li></ul><p>exampleï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;()&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">bool</span> isValid(<span class="hljs-keyword">string</span> s) &#123;<br>        <span class="hljs-keyword">int</span> len=s.size();<br>        stack&lt;<span class="hljs-keyword">char</span>&gt; st;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(st.<span class="hljs-keyword">empty</span>()&amp;&amp;(s[i]==<span class="hljs-string">&#x27;)&#x27;</span>||s[i]==<span class="hljs-string">&#x27;]&#x27;</span>||s[i]==<span class="hljs-string">&#x27;&#125;&#x27;</span>))<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(st.<span class="hljs-keyword">empty</span>())<br>                st.push(s[i]);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;(&#x27;</span>||s[i]==<span class="hljs-string">&#x27;[&#x27;</span>||s[i]==<span class="hljs-string">&#x27;&#123;&#x27;</span>)<br>            &#123;<br>                <span class="hljs-comment">// if(s[i]&lt;=st.top())</span><br>                    st.push(s[i]);<br>                <span class="hljs-comment">// else</span><br>                <span class="hljs-comment">//     return false;</span><br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;)&#x27;</span>||s[i]==<span class="hljs-string">&#x27;]&#x27;</span>||s[i]==<span class="hljs-string">&#x27;&#125;&#x27;</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(st.top()==s[i]<span class="hljs-number">-1</span>||st.top()==s[i]<span class="hljs-number">-2</span>)<br>                    st.pop();<br>                <span class="hljs-keyword">else</span> <br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(!st.<span class="hljs-keyword">empty</span>())<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ "><a class="markdownIt-Anchor" href="#ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ "></a> ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ </h3><p><a href="https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>åªæœ‰æ»¡è¶³ä¸‹é¢å‡ ç‚¹ä¹‹ä¸€ï¼Œæ‹¬å·å­—ç¬¦ä¸²æ‰æ˜¯æœ‰æ•ˆçš„ï¼š</p><p>å®ƒæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…<br />å®ƒå¯ä»¥è¢«å†™æˆÂ ABÂ ï¼ˆAÂ ä¸Â BÂ è¿æ¥ï¼‰, å…¶ä¸­Â A å’ŒÂ BÂ éƒ½æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…<br />å®ƒå¯ä»¥è¢«å†™ä½œÂ (A)ï¼Œå…¶ä¸­Â AÂ æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚<br />ç»™å®šä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸² s ï¼Œç§»åŠ¨Næ¬¡ï¼Œä½ å°±å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®æ’å…¥ä¸€ä¸ªæ‹¬å·ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœ s = â€œ()))â€ ï¼Œä½ å¯ä»¥æ’å…¥ä¸€ä¸ªå¼€å§‹æ‹¬å·ä¸º â€œ(()))â€ æˆ–ç»“æŸæ‹¬å·ä¸º â€œ())))â€ ã€‚<br />è¿”å› ä¸ºä½¿ç»“æœå­—ç¬¦ä¸² s æœ‰æ•ˆè€Œå¿…é¡»æ·»åŠ çš„æœ€å°‘æ‹¬å·æ•°ã€‚</p><p>exampleï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;())&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">class</span> Solution &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">int</span> minAddToMakeValid(string s) &#123;<br>        <span class="hljs-keyword">int</span> len=s.<span class="hljs-keyword">size</span>();<br>        stack&lt;<span class="hljs-keyword">char</span>&gt; st;<br>        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">char</span>&amp; c:s)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;(&#x27;</span>)<br>                st.<span class="hljs-keyword">push</span>(c);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&#x27;)&#x27;</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(st.empty())<br>                    ++ans;<br>                <span class="hljs-keyword">else</span><br>                    st.<span class="hljs-keyword">pop</span>();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans+st.<span class="hljs-keyword">size</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="æ‹¬å·ç”Ÿæˆ"><a class="markdownIt-Anchor" href="#æ‹¬å·ç”Ÿæˆ"></a> æ‹¬å·ç”Ÿæˆ</h3><p><a href="https://leetcode.cn/problems/generate-parentheses/">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong><br />æ•°å­— n ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸”æœ‰æ•ˆçš„æ‹¬å·ç»„åˆã€‚</p><p>exampleï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">è¾“å…¥ï¼š<span class="hljs-built_in">n</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;((()))&quot;</span>,<span class="hljs-string">&quot;(()())&quot;</span>,<span class="hljs-string">&quot;(())()&quot;</span>,<span class="hljs-string">&quot;()(())&quot;</span>,<span class="hljs-string">&quot;()()()&quot;</span>]<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bk</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> &amp;tmp,vector&lt;<span class="hljs-built_in">string</span>&gt;&amp; ans,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> n</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(tmp.size()==<span class="hljs-number">2</span>*n)<br>        &#123;<br>            ans.push_back(tmp);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(l&lt;n)<br>        &#123;<br>            tmp.push_back(<span class="hljs-string">&#x27;(&#x27;</span>);<br>            bk(tmp,ans,l+<span class="hljs-number">1</span>,r,n);<br>            tmp.pop_back();<br>        &#125;<br>        <span class="hljs-keyword">if</span>(r&lt;l)<br>        &#123;<br>            tmp.push_back(<span class="hljs-string">&#x27;)&#x27;</span>);<br>            bk(tmp,ans,l,r+<span class="hljs-number">1</span>,n);<br>            tmp.pop_back();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">vector&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">generateParenthesis</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n</span>)</span> &#123;<br>        <span class="hljs-built_in">string</span> tmp;<br>        vector&lt;<span class="hljs-built_in">string</span>&gt; ans;<br>        bk(tmp,ans,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,n);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="æ‹¬å·çš„åˆ†æ•°"><a class="markdownIt-Anchor" href="#æ‹¬å·çš„åˆ†æ•°"></a> æ‹¬å·çš„åˆ†æ•°</h3><p><a href="https://leetcode.cn/problems/score-of-parentheses/">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªå¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²Â Sï¼ŒæŒ‰ä¸‹è¿°è§„åˆ™è®¡ç®—è¯¥å­—ç¬¦ä¸²çš„åˆ†æ•°ï¼š</p><ul><li>() å¾— 1 åˆ†ã€‚```A æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚</li></ul><p>æ ·ä¾‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">è¾“å…¥ï¼š &quot;(()(()))&quot;<br>è¾“å‡ºï¼š <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><p>å› ä¸º(()(())) = (()) + ((()))ï¼Œæ‰€ä»¥è®°å½•å±‚æ•°å°±å¥½<br />å‡ºç° â€˜(â€™ ä»£è¡¨å±‚æ•°+1 ï¼Œ å‡ºç° â€˜)â€™ ä»£è¡¨å±‚æ•°-1<br />å½“<code>s[i]==')'&amp;&amp;s[i-1]=='('</code>,è¯¥éƒ¨åˆ†å¾—åˆ†ä¸º 2^(å±‚æ•°-1) ,æ›´æ–°ä¸€ä¸‹æ€»åˆ†æ•°</p><p>ä»£ç ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">scoreOfParentheses</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> d=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">int</span> len=s.size();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;(&#x27;</span>)<br>                ++d;<br>            <span class="hljs-keyword">else</span><br>                --d;<br>            <span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27;)&#x27;</span>&amp;&amp;s[i<span class="hljs-number">-1</span>]==<span class="hljs-string">&#x27;(&#x27;</span>)<br>                ans+=<span class="hljs-number">1</span>&lt;&lt;d;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LRå­—ç¬¦ä¸²</title>
    <link href="/2022/10/02/LR%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2022/10/02/LR%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%9C%A8lr%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E4%BA%A4%E6%8D%A2%E7%9B%B8%E9%82%BB%E5%AD%97%E7%AC%A6">åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="åœ¨lrå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦"><a class="markdownIt-Anchor" href="#åœ¨lrå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦"></a> åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦</h2><p><a href="https://leetcode.cn/problems/swap-adjacent-in-lr-string/">åŸé¢˜é“¾æ¥</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ªç”± â€˜Lâ€™ , â€˜Râ€™ å’Œ â€˜Xâ€™ ä¸‰ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚&quot;RXXLRXRXL&quot;ï¼‰ä¸­è¿›è¡Œç§»åŠ¨æ“ä½œã€‚ä¸€æ¬¡ç§»åŠ¨æ“ä½œæŒ‡ç”¨ä¸€ä¸ª&quot;LX&quot;æ›¿æ¢ä¸€ä¸ª&quot;XL&quot;ï¼Œæˆ–è€…ç”¨ä¸€ä¸ª&quot;XR&quot;æ›¿æ¢ä¸€ä¸ª&quot;RX&quot;ã€‚ç°ç»™å®šèµ·å§‹å­—ç¬¦ä¸²startå’Œç»“æŸå­—ç¬¦ä¸²endï¼Œè¯·ç¼–å†™ä»£ç ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€ç³»åˆ—ç§»åŠ¨æ“ä½œä½¿å¾—startå¯ä»¥è½¬æ¢æˆendæ—¶ï¼Œ è¿”å›Trueã€‚</p><p>input:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">start</span> = <span class="hljs-string">&quot;RXXLRXRXL&quot;</span>, end = <span class="hljs-string">&quot;XRLXXRRLX&quot;</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>ç”¨ i å’Œ j åˆ†åˆ«è¡¨ç¤º start å’Œ end ä¸­çš„ä¸‹æ ‡ï¼Œè·³è¿‡æ‰€æœ‰çš„<code>X</code>ï¼Œå½“<code>start[i]!=start[j]</code>,ç›´æ¥è¿”å›false,å½“<code>start[i]==start[j]</code>ï¼Œå¦‚æœå­—ç¬¦æ˜¯<code>L</code>,åº”æ»¡è¶³<code>j&lt;=i</code>,å¦‚æœå­—ç¬¦æ˜¯<code>R</code>,åº”æ»¡è¶³<code>i&lt;=j</code>ï¼Œå¦åˆ™è¿”å›<code>false</code></p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">canTransform</span><span class="hljs-params">(string start, string end)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n=start.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i&lt;n&amp;&amp;j&lt;n)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(i&lt;n&amp;&amp;start[i]==<span class="hljs-string">&#x27;X&#x27;</span>)<br>                ++i;<br>            <span class="hljs-keyword">while</span>(j&lt;n&amp;&amp;end[j]==<span class="hljs-string">&#x27;X&#x27;</span>)<br>                ++j;<br>            <span class="hljs-keyword">if</span>(i&lt;n&amp;&amp;j&lt;n)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(start[i]!=end[j])<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    <span class="hljs-keyword">if</span>(start[i]==<span class="hljs-string">&#x27;L&#x27;</span>&amp;&amp;i&lt;j)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                    <span class="hljs-keyword">if</span>(start[i]==<span class="hljs-string">&#x27;R&#x27;</span>&amp;&amp;i&gt;j)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                ++i;<br>                ++j;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(i&lt;n)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(start[i]!=<span class="hljs-string">&#x27;X&#x27;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            ++i;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(j&lt;n)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(end[j]!=<span class="hljs-string">&#x27;X&#x27;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            ++j;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>éé›¶æ®µåˆ’åˆ†</title>
    <link href="/2022/09/29/%E9%9D%9E%E9%9B%B6%E6%AE%B5%E5%88%92%E5%88%86/"/>
    <url>/2022/09/29/%E9%9D%9E%E9%9B%B6%E6%AE%B5%E5%88%92%E5%88%86/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%9D%9E%E9%9B%B6%E6%AE%B5%E5%88%92%E5%88%86">éé›¶æ®µåˆ’åˆ†</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="éé›¶æ®µåˆ’åˆ†"><a class="markdownIt-Anchor" href="#éé›¶æ®µåˆ’åˆ†"></a> éé›¶æ®µåˆ’åˆ†</h2><p>é¢˜ç›®æ¥è‡ªCCF 201909-2</p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>A1,A2,â‹¯,An æ˜¯ä¸€ä¸ªç”± n ä¸ªè‡ªç„¶æ•°ç»„æˆçš„æ•°ç»„ã€‚æˆ‘ä»¬ç§°å…¶ä¸­ Ai,â‹¯,Aj æ˜¯ä¸€ä¸ªéé›¶æ®µï¼Œå½“ä¸”ä»…å½“ä»¥ä¸‹æ¡ä»¶åŒæ—¶æ»¡è¶³ï¼š</p><ul><li>1â‰¤iâ‰¤jâ‰¤nï¼›</li><li>å¯¹äºä»»æ„çš„æ•´æ•° kï¼Œè‹¥ iâ‰¤kâ‰¤jï¼Œåˆ™ Ak&gt;0ï¼›</li><li>i=1 æˆ– Aiâˆ’1=0ï¼›</li><li>j=n æˆ– Aj+1=0ã€‚</li></ul><p>ä¸‹é¢å±•ç¤ºäº†å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><p>A=[3,1,2,0,0,2,0,4,5,0,2] ä¸­çš„ 4 ä¸ªéé›¶æ®µä¾æ¬¡ä¸º [3,1,2]ã€[2]ã€[4,5] å’Œ [2]ï¼›<br />A=[2,3,1,4,5] ä»…æœ‰ 1 ä¸ªéé›¶æ®µï¼›<br />A=[0,0,0] åˆ™ä¸å«éé›¶æ®µï¼ˆå³éé›¶æ®µä¸ªæ•°ä¸º 0ï¼‰ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„ A è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼šä»»é€‰ä¸€ä¸ªæ­£æ•´æ•° pï¼Œç„¶åå°† A ä¸­æ‰€æœ‰å°äº p çš„æ•°éƒ½å˜ä¸º 0ã€‚è¯•é€‰å–ä¸€ä¸ªåˆé€‚çš„ pï¼Œä½¿å¾—æ•°ç»„ A ä¸­çš„éé›¶æ®µä¸ªæ•°è¾¾åˆ°æœ€å¤§ã€‚è‹¥è¾“å…¥çš„ A æ‰€å«éé›¶æ®µæ•°å·²è¾¾æœ€å¤§å€¼ï¼Œå¯å– p=1ï¼Œå³ä¸å¯¹ A åšä»»ä½•ä¿®æ”¹ã€‚</p><p>è¾“å…¥ï¼š<br />ä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ã€‚</p><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° nã€‚</p><p>è¾“å…¥çš„ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„è‡ªç„¶æ•° A1,A2,â‹¯,Anã€‚</p><p>è¾“å‡ºï¼š</p><p>è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚</p><p>ä»…è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯¹æ•°ç»„ A è¿›è¡Œæ“ä½œåï¼Œå…¶éé›¶æ®µä¸ªæ•°èƒ½è¾¾åˆ°çš„æœ€å¤§å€¼ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å·®åˆ†ä¸å‰ç¼€å’Œ<br />å¦‚æœ <code>a[i]&gt;a[iâˆ’1]</code>ï¼Œæ„å‘³ç€å½“på–åˆ° <code>a[iâˆ’1]+1 </code>åˆ° <code>a[i]</code>ä¹‹é—´çš„å€¼æ—¶ï¼Œéé›¶æ®µ+1<br />æ•°ç»„<code>b[i]</code>è¡¨ç¤º<code>p</code>ä»<code>a[i-1]</code>åˆ°<code>a[i]</code>ï¼Œéé›¶æ®µæ•°é‡çš„å˜åŒ–<br />ä»æ­£å‘å‰ç¼€å’Œä¸­æ‰¾å‡ºæœ€å¤§å€¼å°±æ˜¯æ‰€è¦çš„ç»“æœ</p><p>å·®åˆ†å‰ç¼€å’Œä¹‹å‰ç»ƒä¹ è¿‡ï¼Œä½†è¿™é“é¢˜çœŸæ²¡æƒ³åˆ°è¿˜èƒ½è¿™æ ·ï¼ŒtclğŸ˜¢ï¼Œçœ‹äº†åˆ«äººçš„æ€è·¯ï¼Œå®åœ¨æ˜¯å¤ªå¦™äº†å•ŠğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M=<span class="hljs-number">1e4</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> b[M];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>cin&gt;&gt;a[i];<br><span class="hljs-keyword">if</span>(a[i]&gt;a[i<span class="hljs-number">-1</span>])<br>&#123;<br><span class="hljs-comment">//a[i-1]~a[i]çš„éé›¶æ®µæ•°åŠ 1 </span><br>++b[a[i<span class="hljs-number">-1</span>]+<span class="hljs-number">1</span>];<br>--b[a[i]+<span class="hljs-number">1</span>];<br>&#125; <br>&#125;<br><span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>,sum=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=M;++i)<br>&#123;<br>sum+=b[i];<br>ans=<span class="hljs-built_in">max</span>(ans,sum);<br>&#125;<br>cout&lt;&lt;ans&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬kä¸ªæ•°</title>
    <link href="/2022/09/29/%E7%AC%ACk%E4%B8%AA%E6%95%B0/"/>
    <url>/2022/09/29/%E7%AC%ACk%E4%B8%AA%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%AC%ACk%E4%B8%AA%E6%95%B0">ç¬¬kä¸ªæ•°</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E7%AC%AC-n-%E4%B8%AA%E7%A5%9E%E5%A5%87%E6%95%B0%E5%AD%97">ç¬¬ N ä¸ªç¥å¥‡æ•°å­—</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF-1">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81-1">ä»£ç </a></li></ul></li></ul><!-- /TOC --><h2 id="ç¬¬kä¸ªæ•°"><a class="markdownIt-Anchor" href="#ç¬¬kä¸ªæ•°"></a> ç¬¬kä¸ªæ•°</h2><blockquote><p>æ­¤é¢˜ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œä½†æ˜¯ç¬¬ä¸€çœ¼çœ‹è¿‡å»æ²¡æœ‰ä»€ä¹ˆå¤ªå¥½çš„æƒ³æ³•ï¼Œçœ‹äº†çœ¼é¢˜è§£è§‰å¾—æ€è·¯å¾ˆå¥½ï¼Œå°±è®°å½•ä¸‹æ¥<br /><s>é¡ºä¾¿æ°´ä¸€ä¸ªåšå®¢ğŸ˜„</s></p></blockquote><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>æœ‰äº›æ•°çš„ç´ å› å­åªæœ‰ 3ï¼Œ5ï¼Œ7ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ‰¾å‡ºç¬¬ k ä¸ªæ•°ã€‚æ³¨æ„ï¼Œä¸æ˜¯å¿…é¡»æœ‰è¿™äº›ç´ å› å­ï¼Œè€Œæ˜¯å¿…é¡»ä¸åŒ…å«å…¶ä»–çš„ç´ å› å­ã€‚ä¾‹å¦‚ï¼Œå‰å‡ ä¸ªæ•°æŒ‰é¡ºåºåº”è¯¥æ˜¯ 1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ9ï¼Œ15ï¼Œ21ã€‚</p><p>è¾“å…¥kï¼Œè¾“å‡ºç¬¦åˆæ¡ä»¶çš„ç¬¬kä¸ªæ•°</p><p>input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">9<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å»ºç«‹ä¸€ä¸ªæ•°ç»„<code>dp[]</code>ï¼Œ<code>dp[i]</code>è¡¨ç¤ºç¬¬<code>i</code>ä¸ªæ•°ä»€ä¹ˆï¼Œç„¶åä¸‰ä¸ªå˜é‡a,b,cè¡¨ç¤º3ã€5ã€7çš„æŒ‡é’ˆ</p><p>çŠ¶æ€æ–¹ç¨‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">int <span class="hljs-attribute">numa</span>=dp[a]<span class="hljs-number">*3</span>,<span class="hljs-attribute">numb</span>=dp[b]<span class="hljs-number">*5</span>,<span class="hljs-attribute">numc</span>=dp[c]<span class="hljs-number">*7</span>;<br>dp[i]=min(min(numa,numb),numc);<br></code></pre></td></tr></table></figure><p>ç„¶åå¦‚æœ<code>dp[i]</code>ä¸ä»»ä½•ä¸€ä¸ªnumç›¸ç­‰ï¼Œå¯¹åº”çš„æŒ‡é’ˆåŠ 1</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>const int <span class="hljs-attribute">N</span>=1e3;<br>int dp[N];<br>int main()<br>&#123;<br>int n;<br>cin&gt;&gt;n;<br>int <span class="hljs-attribute">a</span>=1,b=1,c=1;<br>dp[1]=1;<br><span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=2;i&lt;=n;++i)<br>&#123;<br>int <span class="hljs-attribute">numa</span>=dp[a]<span class="hljs-number">*3</span>,<span class="hljs-attribute">numb</span>=dp[b]<span class="hljs-number">*5</span>,<span class="hljs-attribute">numc</span>=dp[c]<span class="hljs-number">*7</span>;<br>dp[i]=min(min(numa,numb),numc);<br><span class="hljs-keyword">if</span>(dp[i]==numa)<br>++a;<br><span class="hljs-keyword">if</span>(dp[i]==numb)<br>++b;<br><span class="hljs-keyword">if</span>(dp[i]==numc)<br>++c;<br>&#125;<br>cout&lt;&lt;dp[n]&lt;&lt;endl;<br>return 0;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¬¬-n-ä¸ªç¥å¥‡æ•°å­—"><a class="markdownIt-Anchor" href="#ç¬¬-n-ä¸ªç¥å¥‡æ•°å­—"></a> ç¬¬ N ä¸ªç¥å¥‡æ•°å­—</h2><p><a href="https://leetcode.cn/problems/nth-magical-number/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> é¢˜ç›®æè¿°</h3><p>ä¸€ä¸ªæ­£æ•´æ•°å¦‚æœèƒ½è¢« a æˆ– b æ•´é™¤ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç¥å¥‡çš„ã€‚</p><p>ç»™å®šä¸‰ä¸ªæ•´æ•° n , a , b ï¼Œè¿”å›ç¬¬ n ä¸ªç¥å¥‡çš„æ•°å­—ã€‚å› ä¸ºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¿”å›ç­”æ¡ˆ å¯¹ 109 + 7 å–æ¨¡ åçš„å€¼ã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šn = <span class="hljs-number">4</span>, <span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>ç”¨åˆ°äº†å®¹æ–¥åŸç†ï¼Œå¯¹äºä¸€ä¸ªæ•°xï¼Œä»–åŒ…å«<code>x/a</code>ä¸ªæ•°èƒ½è¢«aæ•´é™¤ï¼ŒåŒ…å«<code>x/b</code>ä¸ªæ•°èƒ½è¢«bæ•´é™¤,è‹¥aå’Œbæœ€å°å…¬å€æ•°ä¸ºcï¼Œé‚£ä¹ˆxåŒ…å«<code>x/c</code>ä¸ªæ•°èƒ½è¢«aå’ŒbåŒæ—¶æ•´é™¤ï¼Œå› æ­¤ï¼Œèƒ½è¢«aæˆ–bæ•´é™¤çš„æ•°çš„ä¸ªæ•°ä¸ºï¼š<code>x/a+x/b-x/c</code></p><p>æ ¹æ®ä»¥ä¸Šè§„å¾‹ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å³å¯å¾—å‡ºç­”æ¡ˆã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">mod</span>=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">mod</span>=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br>    <span class="hljs-built_in">int</span> gcd(<span class="hljs-built_in">int</span> a,<span class="hljs-built_in">int</span> b)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(b)<br>            <span class="hljs-keyword">return</span> gcd(b,a%b);<br>        <span class="hljs-keyword">return</span> a;<br>    &#125;<br>    <span class="hljs-built_in">int</span> nthMagicalNumber(<span class="hljs-built_in">int</span> n, <span class="hljs-built_in">int</span> a, <span class="hljs-built_in">int</span> b) &#123;<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> l=min(a,b);<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> r=(<span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span>)n*l;<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> c=a*b/gcd(a,b);<br>        <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> mid,t;<br>        <span class="hljs-keyword">while</span>(l&lt;=r)<br>        &#123;<br>            mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>            t=mid/a+mid/b-mid/c;<br>            <span class="hljs-keyword">if</span>(t&lt;n)<br>                l=mid+<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                r=mid<span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> (r+<span class="hljs-number">1</span>)%<span class="hljs-keyword">mod</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç´ æ•°ç­›</title>
    <link href="/2022/09/25/%E7%B4%A0%E6%95%B0%E7%AD%9B/"/>
    <url>/2022/09/25/%E7%B4%A0%E6%95%B0%E7%AD%9B/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9A%B4%E5%8A%9B">æš´åŠ›</a></li><li><a href="#%E5%9F%83%E6%B0%8F%E7%AD%9B">åŸƒæ°ç­›</a></li><li><a href="#%E6%AC%A7%E6%8B%89%E7%AD%9B">æ¬§æ‹‰ç­›</a></li><li><a href="#%E4%BE%8B%E9%A2%98">ä¾‹é¢˜</a></li></ul><!-- /TOC --><p><strong>ç´ æ•°ç­›</strong></p><blockquote><p>æ‰¾åˆ°1åˆ°nåŒºé—´é‡Œçš„æ‰€æœ‰ç´ æ•°,é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•</p></blockquote><h3 id="æš´åŠ›"><a class="markdownIt-Anchor" href="#æš´åŠ›"></a> æš´åŠ›</h3><p>æœ€åŸºæœ¬çš„æ–¹æ³•ï¼Œæ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><h3 id="åŸƒæ°ç­›"><a class="markdownIt-Anchor" href="#åŸƒæ°ç­›"></a> åŸƒæ°ç­›</h3><p>ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡ä¸€ä¸ª<code>bool</code>ç±»å‹çš„æ•°ç»„è®°å½•æŸæ•°æ˜¯å¦ä¸ºç´ æ•°ï¼Œæ€è·¯ä¸éš¾ï¼Œç›´æ¥çœ‹ä»£ç å°±è¡Œ</p><p><strong>ä»£ç </strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getPrime</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;++i)<br>        isPrime[i] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">//å‡è®¾2-néƒ½æ˜¯ç´ æ•°</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;++i)   <span class="hljs-comment">//éå†2-né‡Œé¢æ‰€æœ‰æ•°</span><br>        <span class="hljs-keyword">if</span>(isPrime[i])      <span class="hljs-comment">//å¦‚æœiæ˜¯ç´ æ•°</span><br>            <span class="hljs-comment">//iæ˜¯ç´ æ•°çš„è¯ï¼Œé‚£ä¹ˆiçš„å€æ•°è‚¯å®šå°±ä¸æ˜¯åˆé€‚</span><br>            <span class="hljs-comment">//å³ i*2ï¼Œi*3 .....i*jè‚¯å®šä¸æ˜¯ç´ æ•°ï¼Œæ³¨æ„è¾¹ç•Œi*j&lt;=n</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i;i*j&lt;=n;++j)<br>                <span class="hljs-comment">//nä»¥å†…ï¼Œä¸”æ˜¯içš„å€æ•°çš„æ•°è‚¯å®šä¸æ˜¯ç´ æ•°ï¼Œè®¾ä¸ºfalse</span><br>                isPrime[i*j] = <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p><h3 id="æ¬§æ‹‰ç­›"><a class="markdownIt-Anchor" href="#æ¬§æ‹‰ç­›"></a> æ¬§æ‹‰ç­›</h3><p>åœ¨åŸƒå°¼ç­›çš„åŸºç¡€ä¸ŠåŠ ä»¥æ”¹è¿›ï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ª<code>vis[]</code>æ•°ç»„åˆ¤æ–­æ˜¯å¦è¢«æ ‡è®°è¿‡ï¼Œç„¶å<code>prime[]</code>æ•°ç»„è®°å½•ç¬¬å‡ ä¸ªç´ æ•°æ˜¯ä»€ä¹ˆï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼Œçœ‹ä¸€é“ä¾‹é¢˜å°±è¡Œ</p><h3 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>Output the k-th prime number.</p><p>input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">7<br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">17<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>;<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-type">bool</span> vis[N];<br><span class="hljs-type">int</span> prime[<span class="hljs-number">10000</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> k;<br>    cin&gt;&gt;k;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=N;++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(cnt==k)<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">if</span>(vis[i]==<span class="hljs-literal">false</span>)<br>            prime[++cnt]=i;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=cnt&amp;&amp;i*prime[j]&lt;=N;++j)<br>        &#123;<br>            vis[i*prime[j]]=<span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span>(i%prime[j]==<span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;prime[k]&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç›¸ä¼¼åº¦ä¸ºkçš„å­—ç¬¦ä¸²</title>
    <link href="/2022/09/23/%E7%9B%B8%E4%BC%BC%E5%BA%A6%E4%B8%BAk%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2022/09/23/%E7%9B%B8%E4%BC%BC%E5%BA%A6%E4%B8%BAk%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E4%B8%BAk%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2">ç›¸ä¼¼åº¦ä¸ºkçš„å­—ç¬¦ä¸²</a></li></ul><!-- /TOC --><h3 id="ç›¸ä¼¼åº¦ä¸ºkçš„å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#ç›¸ä¼¼åº¦ä¸ºkçš„å­—ç¬¦ä¸²"></a> ç›¸ä¼¼åº¦ä¸ºkçš„å­—ç¬¦ä¸²</h3><p><a href="https://leetcode.cn/problems/k-similar-strings/">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>å¯¹äºæŸäº›éè´Ÿæ•´æ•° <code>k</code> ï¼Œå¦‚æœäº¤æ¢ <code>s1</code> ä¸­ä¸¤ä¸ªå­—æ¯çš„ä½ç½®æ°å¥½ <code>k</code> æ¬¡ï¼Œèƒ½å¤Ÿä½¿ç»“æœå­—ç¬¦ä¸²ç­‰äº <code>s2</code> ï¼Œåˆ™è®¤ä¸ºå­—ç¬¦ä¸² <code>s1</code> å’Œ <code>s2</code> çš„ ç›¸ä¼¼åº¦ä¸º<code> k</code> ã€‚</p><p>ç»™ä½ ä¸¤ä¸ªå­—æ¯å¼‚ä½è¯ <code>s1 </code>å’Œ <code>s2</code> ï¼Œè¿”å› <code>s1 </code>å’Œ<code>s2</code>çš„ç›¸ä¼¼åº¦<code>k</code>çš„æœ€å°å€¼ã€‚</p><p><strong>æ€è·¯</strong></p><blockquote><p>ä¸»è¦æ˜¯BFS+å‰ªæï¼Œå½“s1å’Œs2åœ¨æŸä¸ªä½ç½®å‡ºç°s1[i] != s2[i]æ—¶ï¼Œå°†s1çš„æŒ‡é’ˆåç§»ï¼Œæ‰¾åˆ°jä½¿å¾—s1[j] == s2[i],ç„¶åäº¤æ¢s1[i]å’Œs1[j]ï¼Œå°†å­—ç¬¦ä¸²å’Œä½ç½®åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚åŒæ—¶è¦æ³¨æ„å‰ªæï¼Œå½“s1[j]==s2[j]æ—¶è¯´æ˜æœ¬æ¥å°±èƒ½åŒ¹é…ï¼Œæ‰€ä»¥æ— éœ€äº¤æ¢ï¼Œå½“äº¤æ¢åçš„å­—ç¬¦ä¸²åœ¨ä¹‹å‰å·²ç»å‡ºç°æ—¶ï¼Œæ— éœ€å†æ¬¡åŠ å…¥é˜Ÿåˆ—ã€‚</p></blockquote><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> queue&lt;pair&lt;string,<span class="hljs-type">int</span>&gt;&gt; qpi;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    unordered_set&lt;string&gt; vis;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kSimilarity</span><span class="hljs-params">(string s1, string s2)</span> </span>&#123;<br>        qpi q;<br>        <span class="hljs-type">int</span> len=s1.<span class="hljs-built_in">size</span>();<br>        q.<span class="hljs-built_in">push</span>(&#123;s1,<span class="hljs-number">0</span>&#125;);<br>        vis.<span class="hljs-built_in">insert</span>(s1);<br>        string ts;<br>        <span class="hljs-type">int</span> idx;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;;++ans)<br>        &#123;<br>            <span class="hljs-type">int</span> sz=q.<span class="hljs-built_in">size</span>();<br>            <span class="hljs-keyword">while</span>(sz--)<br>            &#123;<br>                pair&lt;string,<span class="hljs-type">int</span>&gt; t=q.<span class="hljs-built_in">front</span>();<br>                q.<span class="hljs-built_in">pop</span>();<br>                ts=t.first;<br>                idx=t.second;<br>                <span class="hljs-keyword">if</span>(ts==s2)<br>                    <span class="hljs-keyword">return</span> ans;<br>                <span class="hljs-keyword">while</span>(idx&lt;len&amp;&amp;ts[idx]==s2[idx])<br>                    ++idx;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=idx+<span class="hljs-number">1</span>;i&lt;len;++i)<br>                &#123;<br>                    <span class="hljs-keyword">if</span>(ts[i]!=s2[i]&amp;&amp;ts[i]==s2[idx])<br>                    &#123;<br>                        <span class="hljs-built_in">swap</span>(ts[idx],ts[i]);<br>                        <span class="hljs-keyword">if</span>(!vis.<span class="hljs-built_in">count</span>(ts))<br>                        &#123;<br>                            q.<span class="hljs-built_in">push</span>(&#123;ts,idx+<span class="hljs-number">1</span>&#125;);<br>                            vis.<span class="hljs-built_in">insert</span>(ts);<br>                        &#125;<br>                        <span class="hljs-built_in">swap</span>(ts[idx],ts[i]);<br>                    &#125;<br>                &#125;<br><br>            &#125;<br>            <br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°ç»„ä¸­çš„é€†åºå¯¹</title>
    <link href="/2022/09/20/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%80%86%E5%BA%8F%E5%AF%B9/"/>
    <url>/2022/09/20/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%80%86%E5%BA%8F%E5%AF%B9/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%80%86%E5%BA%8F%E5%AF%B9">æ•°ç»„ä¸­çš„é€†åºå¯¹</a></li></ul><!-- /TOC --><h3 id="æ•°ç»„ä¸­çš„é€†åºå¯¹"><a class="markdownIt-Anchor" href="#æ•°ç»„ä¸­çš„é€†åºå¯¹"></a> æ•°ç»„ä¸­çš„é€†åºå¯¹</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>åœ¨æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªæ•°å­—å¤§äºåé¢çš„æ•°å­—ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªé€†åºå¯¹ã€‚è¾“å…¥ä¸€ä¸ªæ•°ç»„,æ±‚å‡ºè¿™ä¸ªæ•°ç»„ä¸­çš„é€†åºå¯¹çš„æ€»æ•°Pã€‚å¹¶å°†På¯¹1000000007å–æ¨¡çš„ç»“æœè¾“å‡ºã€‚ å³è¾“å‡ºP mod 1000000007</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">7<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><p>è¿™é“é¢˜å¯ä»¥ç”¨å½’å¹¶æ’åºçš„æ€è·¯æ¥è§£å†³</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå·²æ’åºçš„åºåˆ—ç­‰å¾…åˆå¹¶ï¼Œåˆ†åˆ«æ˜¯L={8,12,16,22,100} å’Œ R={9,26,55,64,91}ã€‚ä¸€å¼€å§‹æˆ‘ä»¬ç”¨æŒ‡é’ˆ lPtr = 0 æŒ‡å‘ L çš„é¦–éƒ¨ï¼ŒrPtr = 0 æŒ‡å‘ R çš„å¤´éƒ¨ã€‚è®°å·²ç»åˆå¹¶å¥½çš„éƒ¨åˆ†ä¸º Mã€‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">L = <span class="hljs-comment">[8, 12, 16, 22, 100]</span>   R = <span class="hljs-comment">[9, 26, 55, 64, 91]</span>  M = <span class="hljs-comment">[]</span><br>     |                          |<br>   lPtr                       rPtr<br></code></pre></td></tr></table></figure><p>å‘ç° lPtr æŒ‡å‘çš„å…ƒç´ å°äº rPtr æŒ‡å‘çš„å…ƒç´ ï¼Œäºæ˜¯æŠŠ lPtr æŒ‡å‘çš„å…ƒç´ æ”¾å…¥ç­”æ¡ˆï¼Œå¹¶æŠŠ lPtr åç§»ä¸€ä½ã€‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs inform7">L = <span class="hljs-comment">[8, 12, 16, 22, 100]</span>   R = <span class="hljs-comment">[9, 26, 55, 64, 91]</span>  M = <span class="hljs-comment">[8]</span><br>        |                       |<br>      lPtr                     rPtr<br><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æŠŠå·¦è¾¹çš„ 8 åŠ å…¥äº†ç­”æ¡ˆï¼Œæˆ‘ä»¬å‘ç°å³è¾¹æ²¡æœ‰æ•°æ¯” 8 å°ï¼Œæ‰€ä»¥ 8 å¯¹é€†åºå¯¹æ€»æ•°çš„ã€Œè´¡çŒ®ã€ä¸º 0ã€‚</p><p>æ¥ç€æˆ‘ä»¬ç»§ç»­åˆå¹¶ï¼ŒæŠŠ 9 åŠ å…¥äº†ç­”æ¡ˆï¼Œæ­¤æ—¶ lPtr æŒ‡å‘ 12ï¼ŒrPtr æŒ‡å‘ 26ã€‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs inform7">L = <span class="hljs-comment">[8, 12, 16, 22, 100]</span>   R = <span class="hljs-comment">[9, 26, 55, 64, 91]</span>  M = <span class="hljs-comment">[8, 9]</span><br>        |                          |<br>       lPtr                       rPtr<br><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶12å¯¹é€†åºæ•°è´¡çŒ®ä¸º1ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>int nums[100005];<br>int cnt;<br>int <span class="hljs-attribute">mod</span>=1e9+7;<br>void merge(int l,int m,int r)<br>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-attribute">l</span>==r)<br>        return ;<br>    int i,j;<br>    int <span class="hljs-attribute">n1</span>=m-l+1;<br>    int <span class="hljs-attribute">n2</span>=r-m;<br>    vector&lt;int&gt; al(n1);<br>    vector&lt;int&gt; ar(n2);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-attribute">i</span>=0;i&lt;n1;++i)<br>        al[i]=nums[l+i];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-attribute">i</span>=0;i&lt;n2;++i)<br>        ar[i]=nums[m+1+i];<br>    <span class="hljs-attribute">i</span>=0;<br>    <span class="hljs-attribute">j</span>=0;<br>    int <span class="hljs-attribute">k</span>=l;<br>    <span class="hljs-keyword">while</span>(i&lt;n1&amp;&amp;j&lt;n2)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(al[i]&lt;=ar[j])<br>        &#123;<br>            nums[k]=al[i];<br>            ++k;<br>            ++i;<br>            cnt+=j;<br>            <span class="hljs-attribute">cnt</span>=cnt%mod;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            nums[k]=ar[j];<br>            ++k;<br>            ++j;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(i&lt;n1)<br>    &#123;<br>        nums[k++]=al[i];<br>        cnt+=j;<br>        <span class="hljs-attribute">cnt</span>=cnt%mod;<br>        ++i;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(j&lt;n2)<br>    &#123;<br>        nums[k++]=ar[j];<br>        ++j;<br>    &#125;    <br>&#125;<br>void mergesort(int l,int r)<br>&#123;<br>    <span class="hljs-keyword">if</span>(l&lt;r)<br>    &#123;<br>        int <span class="hljs-attribute">m</span>=l+r&gt;&gt;1;<br>        mergesort(l,m);<br>        mergesort(m+1,r);<br>        merge(l,m,r);<br>    &#125;<br>&#125;<br>int main() <br>&#123;<br>int n;<br>cin&gt;&gt;n;<br><span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0;i&lt;n;++i)<br>cin&gt;&gt;nums[i];<br>    mergesort(0,n-1);<br>    cout&lt;&lt;cnt&lt;&lt;endl;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€é•¿è¾¾æ ‡å­ä¸²</title>
    <link href="/2022/09/17/%E6%9C%80%E9%95%BF%E8%BE%BE%E6%A0%87%E5%AD%90%E4%B8%B2/"/>
    <url>/2022/09/17/%E6%9C%80%E9%95%BF%E8%BE%BE%E6%A0%87%E5%AD%90%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%9C%80%E9%95%BF%E8%BE%BE%E6%A0%87%E5%AD%90%E4%B8%B2">æœ€é•¿è¾¾æ ‡å­ä¸²</a></li><li><a href="#%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%BB%83%E4%B9%A0">ä½æ“ä½œç»ƒä¹ </a></li></ul><!-- /TOC --><h3 id="æœ€é•¿è¾¾æ ‡å­ä¸²"><a class="markdownIt-Anchor" href="#æœ€é•¿è¾¾æ ‡å­ä¸²"></a> æœ€é•¿è¾¾æ ‡å­ä¸²</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>ï¼Œå…¶ä¸­éƒ½æ˜¯è‹±æ–‡å°å†™å­—æ¯ï¼Œå¦‚æœ<code>s</code>çš„å­ä¸²ä¸­å«æœ‰çš„æ¯ç§å­—ç¬¦éƒ½æ˜¯å¶æ•°ä¸ªï¼Œé‚£ä¹ˆè¿™æ ·çš„å­ä¸²å°±æ˜¯è¾¾æ ‡å­ä¸²ï¼Œè¾“å‡ºè¾¾æ ‡å­ä¸²çš„æœ€å¤§é•¿åº¦ã€‚</p><p>input:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">aababcdcdc</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">8<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><p>ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•å½“å‰çš„çŠ¶æ€ï¼Œ<code>1</code>è¡¨ç¤ºå½“å‰å­—æ¯å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œ<code>0</code>è¡¨ç¤ºå½“å‰å­—æ¯å‡ºç°äº†å¶æ•°æ¬¡</p><p>ä¾‹å¦‚ï¼šå¦‚æœ<code>s</code>ä¸€å…±æœ‰å››ä¸ªå­—æ¯<code>abcd</code>ï¼Œå­ä¸²<code>a</code>çš„çŠ¶æ€å¯è®°ä¸º<code>1000</code>ï¼Œå­ä¸²<code>aab</code>è®°ä¸º<code>0100</code><br />,å­ä¸²<code>abacd</code>è®°ä¸º<code>0111</code></p><p>å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šå¦‚æœ<code>i</code>å¤„çš„çŠ¶æ€ä¸<code>i+k</code>å¤„çš„çŠ¶æ€ç›¸åŒï¼Œåˆ™<code>i~i+k</code>ä¹‹é—´çš„å­ä¸²ä¸­çš„æ¯ä¸ªå­—æ¯éƒ½å‡ºç°äº†å¶æ•°æ¬¡</p><p>åŸç†å°±æ˜¯å‡ºç°å¶æ•°æ¬¡ï¼Œä¸ä¼šæ”¹å˜æŸä¸ªå­—æ¯çš„çŠ¶æ€</p><p>æ‰€ä»¥ï¼Œåªéœ€è¦è®°å½•æ¯ä¸ªçŠ¶æ€åºåˆ—æœ€æ—©å‡ºç°çš„ä½ç½®ï¼Œç„¶åå½“ä»–å†æ¬¡å‡ºç°æ—¶ï¼Œæœ€æ™šå‡ºç°çš„ä½ç½®å‡å»æœ€æ—©å‡ºç°çš„ä½ç½®å°±æ˜¯æœ€é•¿çš„è¾¾æ ‡å­ä¸²ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string s;<br>cin&gt;&gt;s;<br><span class="hljs-type">int</span> len=s.<span class="hljs-built_in">size</span>();<br>unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; mp;<br><span class="hljs-type">int</span> status=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>mp[<span class="hljs-number">0</span>]=<span class="hljs-number">-1</span>;<span class="hljs-comment">//åˆå§‹åŒ–-1ä½ç½®ä¸º0...00 32ä¸ª0</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i)<br>&#123;<br><span class="hljs-comment">//å‡è®¾å½“å‰s[i]æ˜¯&#x27;c&#x27;,é‚£ä¹ˆå°†1å·¦ç§»2ä½ï¼Œç„¶åå’Œstatuså¼‚æˆ–</span><br><span class="hljs-comment">//å³å¯æ”¹å˜&#x27;c&#x27;å¤„çš„çŠ¶æ€ </span><br>status=status^<span class="hljs-number">1</span>&lt;&lt;s[i]-<span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-keyword">if</span>(mp.<span class="hljs-built_in">count</span>(status))<br>ans=<span class="hljs-built_in">max</span>(ans,i-mp[status]);<br><span class="hljs-keyword">else</span><br>mp[status]=i; <br>&#125;<br>cout&lt;&lt;ans&lt;&lt;endl; <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½æ“ä½œç»ƒä¹ "><a class="markdownIt-Anchor" href="#ä½æ“ä½œç»ƒä¹ "></a> ä½æ“ä½œç»ƒä¹ </h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å‡ºä¸¤ä¸ªä¸å¤§äº65535çš„éè´Ÿæ•´æ•°ï¼Œåˆ¤æ–­å…¶ä¸­ä¸€ä¸ªçš„16ä½äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œæ˜¯å¦èƒ½ç”±å¦ä¸€ä¸ªçš„16ä½äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ç»è¿‡å¾ªç¯å·¦ç§»è‹¥å¹²ä½è€Œå¾—åˆ°ã€‚ å¾ªç¯å·¦ç§»å’Œæ™®é€šå·¦ç§»çš„åŒºåˆ«åœ¨äºï¼šæœ€å·¦è¾¹çš„é‚£ä¸€ä½ç»è¿‡å¾ªç¯å·¦ç§»ä¸€ä½åå°±ä¼šè¢«ç§»åˆ°æœ€å³è¾¹å»ã€‚æ¯”å¦‚ï¼š 1011 0000 0000 0001 ç»è¿‡å¾ªç¯å·¦ç§»ä¸€ä½åï¼Œå˜æˆ 0110 0000 0000 0011, è‹¥æ˜¯å¾ªç¯å·¦ç§»2ä½ï¼Œåˆ™å˜æˆ 1100 0000 0000 0110</p><p>è¾“å…¥ä¸¤ä¸ªä¸å¤§äº65535çš„éè´Ÿæ•´æ•°</p><p>å¦‚æœèƒ½é€šè¿‡å¾ªç¯å·¦ç§»ç›¸ç­‰ï¼Œè¾“å‡º<code>YES</code>,å¦åˆ™è¾“å‡º<code>NO</code></p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">45057 </span><span class="hljs-number">49158</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">YES</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå°±ä¸è¯´äº†ï¼Œç›´æ¥çœ‹ä»£ç å°±è¡Œäº†</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> a,b;<br>cin&gt;&gt;a&gt;&gt;b;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;++i)<br>&#123;<br><span class="hljs-keyword">if</span>(a==b)<br>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;YES&quot;</span>&lt;&lt;endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">if</span>(i==<span class="hljs-number">15</span>)<br>cout&lt;&lt;<span class="hljs-string">&quot;NO&quot;</span>&lt;&lt;endl;<br>a=a&lt;&lt;<span class="hljs-number">1</span> | a&gt;&gt;<span class="hljs-number">15</span>&amp;<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¾™ä¸åœ°ä¸‹åŸæ¸¸æˆé—®é¢˜</title>
    <link href="/2022/09/16/%E9%BE%99%E4%B8%8E%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F%E9%97%AE%E9%A2%98/"/>
    <url>/2022/09/16/%E9%BE%99%E4%B8%8E%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%BE%99%E4%B8%8E%E5%9C%B0%E4%B8%8B%E5%9F%8E%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98">é¾™ä¸åœ°ä¸‹åŸè¿·å®«é—®é¢˜</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li></ul><!-- /TOC --><h2 id="é¾™ä¸åœ°ä¸‹åŸè¿·å®«é—®é¢˜"><a class="markdownIt-Anchor" href="#é¾™ä¸åœ°ä¸‹åŸè¿·å®«é—®é¢˜"></a> é¾™ä¸åœ°ä¸‹åŸè¿·å®«é—®é¢˜</h2><p><a href="https://www.nowcoder.com/practice/c0ca4c9e65144af69ada03febaa0e33a?tpId=230&amp;tqId=537494&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D230">é¢˜ç›®é“¾æ¥</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„mapï¼Œå«ä¹‰æ˜¯ä¸€å¼ åœ°å›¾</p><p>æ¸¸æˆçš„è§„åˆ™å¦‚ä¸‹:<br />1ï¼‰éª‘å£«ä»å·¦ä¸Šè§’å‡ºå‘ï¼Œæ¯æ¬¡åªèƒ½å‘å³æˆ–å‘ä¸‹èµ°ï¼Œæœ€ååˆ°è¾¾å³ä¸‹è§’è§åˆ°å…¬ä¸»ã€‚<br />2ï¼‰åœ°å›¾ä¸­æ¯ä¸ªä½ç½®çš„å€¼ä»£è¡¨éª‘å£«è¦é­é‡çš„äº‹æƒ…ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œè¯´æ˜æ­¤å¤„æœ‰æ€ªå…½ï¼Œè¦è®©éª‘å£«æŸå¤±è¡€é‡ã€‚å¦‚æœæ˜¯éè´Ÿæ•°ï¼Œä»£è¡¨æ­¤å¤„æœ‰è¡€ç“¶ï¼Œèƒ½è®©éª‘å£«å›è¡€ã€‚<br />3ï¼‰éª‘å£«ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è¿‡ç¨‹ä¸­ï¼Œèµ°åˆ°ä»»ä½•ä¸€ä¸ªä½ç½®æ—¶ï¼Œè¡€é‡éƒ½ä¸èƒ½å°‘äº1ã€‚ä¸ºäº†ä¿è¯éª‘åœŸèƒ½è§åˆ°å…¬ä¸»ï¼Œåˆå§‹è¡€é‡è‡³å°‘æ˜¯å¤šå°‘?</p><p>æ ¹æ®map,è¾“å‡ºåˆå§‹è¡€é‡ã€‚</p><p>è¾“å…¥ç¬¬ä¸€è¡Œ<code>n,m</code>ï¼Œè¡¨ç¤ºçŸ©é˜µå¤§å°<br />ç„¶åè¾“å…¥çŸ©é˜µ</p><p>è¾“å‡ºåˆå§‹è¡€é‡</p><p>input:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit">3 3<br><span class="hljs-string">-2</span> <span class="hljs-string">-3</span> 3<br><span class="hljs-string">-5</span> <span class="hljs-string">-10</span> 1<br>0 30 <span class="hljs-string">-5</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">7<br></code></pre></td></tr></table></figure><h2 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h2><p>è¿™é“é¢˜ä¹Ÿå±äºdpï¼Œä½†æ˜¯æœ‰æ„æ€çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹© <code>è‡ªé¡¶å‘ä¸‹</code> çš„æ–¹å¼ï¼Œå³ä»å·¦ä¸Šè§’å‡ºå‘ï¼Œåœ¨å‰è¿›è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªä½ç½®çš„æœ€å°è¡€é‡æ˜¯ç”±åé¢çš„è·¯å¾„å†³å®šçš„ï¼Œå› æ­¤<code>è‡ªé¡¶å‘ä¸‹</code> æ–¹æ³•æ˜¯ä¸è¡Œçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€‰æ‹©<code> è‡ªåº•å‘ä¸Š</code> çš„æ–¹å¼ï¼Œä»å³ä¸‹è§’å‡ºå‘ã€‚</p><p><code>dp[i][j]</code>å¯ç†è§£ä¸ºï¼Œèµ°<code>a[i][j]</code>ä¹‹å‰ï¼Œè‡³å°‘è¦æ‹¥æœ‰çš„è¡€é‡ï¼Œä¸”è¿™ä¸ªè¡€é‡å§‹ç»ˆä¸èƒ½å°äº1</p><p>æ‰€ä»¥<code>dp[n][m]</code>åˆå§‹åŒ–ä¸º<code>max(1-a[n][m],1)</code></p><p>ç„¶åä»å³ä¸‹è§’åˆ°å·¦ä¸Šè§’æ›´æ–°dpæ•°ç»„å³å¯</p><p><strong>ä»£ç </strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs inform7">#include &lt;bits/stdc++.h&gt;<br>using namespace std;<br><br>const int N=1e3+5;<br>int a<span class="hljs-comment">[N]</span><span class="hljs-comment">[N]</span>,dp<span class="hljs-comment">[N]</span><span class="hljs-comment">[N]</span>;<br>int main()<br>&#123;<br>    int n,m;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        for(int j=1;j&lt;=m;++j)<br>            cin&gt;&gt;a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>;<br>    &#125;<br>    dp<span class="hljs-comment">[n]</span><span class="hljs-comment">[m]</span>=max(1-a<span class="hljs-comment">[n]</span><span class="hljs-comment">[m]</span>,1);<br>    for(int i=n-1;i&gt;=1;--i)<br>        dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[m]</span>=max(dp<span class="hljs-comment">[i+1]</span><span class="hljs-comment">[m]</span>-a<span class="hljs-comment">[i]</span><span class="hljs-comment">[m]</span>,1);<br>    for(int i=m-1;i&gt;=1;--i)<br>        dp<span class="hljs-comment">[n]</span><span class="hljs-comment">[i]</span>=max(dp<span class="hljs-comment">[n]</span><span class="hljs-comment">[i+1]</span>-a<span class="hljs-comment">[n]</span><span class="hljs-comment">[i]</span>,1);<br>    for(int i=n-1;i&gt;=1;--i)<br>    &#123;<br>        for(int j=m-1;j&gt;=1;--j)<br>        &#123;<br>            int t=min(dp<span class="hljs-comment">[i+1]</span><span class="hljs-comment">[j]</span>-a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j+1]</span>-a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>);<br>            dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>=max(t,1);<br>        &#125;<br>    &#125;<br>    <br>    cout&lt;&lt;dp<span class="hljs-comment">[1]</span><span class="hljs-comment">[1]</span>&lt;&lt;endl;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>dpç»ƒä¹ </title>
    <link href="/2022/09/15/dp%E7%BB%83%E4%B9%A0/"/>
    <url>/2022/09/15/dp%E7%BB%83%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%B8%8D%E5%90%8C%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E4%B8%AA%E6%95%B0">ä¸åŒäºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°</a></li><li><a href="#%E6%9C%80%E5%B0%8F%E8%8A%B1%E8%B4%B9%E7%88%AC%E6%A5%BC%E6%A2%AF">æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯</a></li><li><a href="#%E6%9C%80%E5%B0%8F%E8%8A%B1%E8%B4%B9">æœ€å°èŠ±è´¹</a></li><li><a href="#%E5%88%86%E9%85%8D%E5%AE%9D%E8%97%8F">åˆ†é…å®è—</a></li></ul><!-- /TOC --><h2 id="ä¸åŒäºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°"><a class="markdownIt-Anchor" href="#ä¸åŒäºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°"></a> ä¸åŒäºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªç”±èŠ‚ç‚¹å€¼ä» 1 åˆ° n çš„ n ä¸ªèŠ‚ç‚¹ã€‚è¯·é—®ç”±å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•ç”¨è¿™ n ä¸ªèŠ‚ç‚¹æ„æˆäº’ä¸ç›¸åŒçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p>ä»…ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° n ï¼Œè¡¨ç¤ºèŠ‚ç‚¹çš„æ•°é‡ã€‚</p><p>è¾“å‡ºç»„æˆä¸åŒäºŒå‰æœç´¢æ ‘çš„æ–¹æ³•æ•°ã€‚</p><p>input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">5<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><p><code>dp[k]</code>è¡¨ç¤º<code>k</code>ä¸ªèŠ‚ç‚¹æ—¶ä¸åŒäºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°ï¼Œå½“æœ‰<code>n</code>ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä»¥<code>i</code>ä¸ºæ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘æœ‰<code>i-1</code>ä¸ªèŠ‚ç‚¹ï¼Œè€Œå³å­æ ‘æœ‰<code>i-j</code>ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥ä»¥<code>i</code>ä¸ºæ ¹èŠ‚ç‚¹çš„äºŒå‰æœç´¢æ ‘ä¸€å…±æœ‰<code>dp[i-1]*d[i-j]</code>ä¸ª</p><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">20</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    dp[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>    dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;++i)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)<br>        &#123;<br>            dp[i]+=dp[j<span class="hljs-number">-1</span>]*dp[i-j];<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;dp[n]&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯"><a class="markdownIt-Anchor" href="#æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯"></a> æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>cost[]</code> ï¼Œå…¶ä¸­ <code>cost[i]</code>æ˜¯ä»æ¥¼æ¢¯ç¬¬<code>i</code>ä¸ªå°é˜¶å‘ä¸Šçˆ¬éœ€è¦æ”¯ä»˜çš„è´¹ç”¨ï¼Œä¸‹æ ‡ä»0å¼€å§‹ã€‚ä¸€æ—¦ä½ æ”¯ä»˜æ­¤è´¹ç”¨ï¼Œå³å¯é€‰æ‹©å‘ä¸Šçˆ¬ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå°é˜¶ã€‚</p><p>ä½ å¯ä»¥é€‰æ‹©ä»ä¸‹æ ‡ä¸º 0 æˆ–ä¸‹æ ‡ä¸º 1 çš„å°é˜¶å¼€å§‹çˆ¬æ¥¼æ¢¯ã€‚</p><p>è¯·ä½ è®¡ç®—å¹¶è¿”å›è¾¾åˆ°æ¥¼æ¢¯é¡¶éƒ¨çš„æœ€ä½èŠ±è´¹ã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">10</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">100</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">90</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">80</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">6<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><p><code>dp[i]</code>è¡¨ç¤ºç¬¬<code>i</code>ä¸ªå°é˜¶ä¹‹å‰çš„æœ€å°èŠ±è´¹<br />å› ä¸ºä¸€æ¬¡èƒ½èµ°ä¸€çº§æˆ–è€…ä¸¤çº§å°é˜¶ï¼Œæ‰€ä»¥<code>dp[i]=min(dp[i-1]+cost[i-1],dp[i-2]+cost[i-2])</code></p><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> cost[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>        cin&gt;&gt;cost[i];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">3</span>;i&lt;=n+<span class="hljs-number">1</span>;++i)<br>    &#123;<br>        dp[i]=<span class="hljs-built_in">min</span>(dp[i<span class="hljs-number">-1</span>]+cost[i<span class="hljs-number">-1</span>],dp[i<span class="hljs-number">-2</span>]+cost[i<span class="hljs-number">-2</span>]);<br>    &#125;<br>    cout&lt;&lt;dp[n+<span class="hljs-number">1</span>]&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æœ€å°èŠ±è´¹"><a class="markdownIt-Anchor" href="#æœ€å°èŠ±è´¹"></a> æœ€å°èŠ±è´¹</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>åœ¨æŸæ¡çº¿è·¯ä¸Šæœ‰Nä¸ªç«è½¦ç«™ï¼Œæœ‰ä¸‰ç§è·ç¦»çš„è·¯ç¨‹ï¼ŒL1ï¼ŒL2ï¼ŒL3,å¯¹åº”çš„ä»·æ ¼ä¸ºC1,C2,C3.<br />æ¯ä¸¤ä¸ªç«™ä¹‹é—´çš„è·ç¦»ä¸è¶…è¿‡L3ã€‚ å½“ä¹˜å®¢è¦ç§»åŠ¨çš„ä¸¤ä¸ªç«™çš„è·ç¦»å¤§äºL3çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©ä»ä¸­é—´ä¸€ä¸ªç«™ä¸‹è½¦ï¼Œç„¶åä¹°ç¥¨å†ä¸Šè½¦ï¼Œæ‰€ä»¥ä¹˜å®¢æ•´ä¸ªè¿‡ç¨‹ä¸­è‡³å°‘ä¼šä¹°ä¸¤å¼ ç¥¨ã€‚ ç°åœ¨ç»™ä½ ä¸€ä¸ª L1ï¼ŒL2ï¼ŒL3ï¼ŒC1ï¼ŒC2ï¼ŒC3ã€‚ç„¶åæ˜¯Aï¼ŒBçš„å€¼ï¼Œå…¶åˆ†åˆ«ä¸ºä¹˜å®¢æ—…ç¨‹çš„èµ·å§‹ç«™å’Œç»ˆç‚¹ç«™ã€‚ ç„¶åè¾“å…¥Nï¼ŒNä¸ºè¯¥çº¿è·¯ä¸Šçš„æ€»çš„ç«è½¦ç«™æ•°ç›®ï¼Œç„¶åè¾“å…¥N-1ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨ä»è¯¥çº¿è·¯ä¸Šçš„ç¬¬ä¸€ä¸ªç«™ï¼Œåˆ°ç¬¬2ä¸ªç«™ï¼Œç¬¬3ä¸ªç«™ï¼Œâ€¦â€¦ï¼Œç¬¬Nä¸ªç«™çš„è·ç¦»ã€‚ æ ¹æ®è¾“å…¥ï¼Œè¾“å‡ºä¹˜å®¢ä»Aåˆ°Bç«™çš„æœ€å°èŠ±è´¹ã€‚</p><p><strong>è¾“å…¥æè¿°</strong></p><p>ç¬¬ä¸€è¡Œè¾“å…¥l1,l2,l3,c1,c2,c3<br />ç¬¬äºŒè¡Œè¾“å…¥a,b<br />ç¬¬ä¸‰è¡Œè¾“å…¥n<br />ç¬¬å››è¡Œè¾“å…¥n-1ä¸ªæ•°ï¼Œè¡¨ç¤ºç¬¬ä¸€ç«™åˆ°åé¢ç«™çš„è·ç¦»</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-number">2</span><br><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>output:</p> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>;<br><span class="hljs-type">int</span> l1,l2,l3,c1,c2,c3;<br><span class="hljs-type">int</span> a,b;<br><span class="hljs-type">int</span> dis[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getprice</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(dis[b]-dis[a]&lt;=l1)<br>        <span class="hljs-keyword">return</span> c1;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(dis[b]-dis[a]&lt;=l2)<br>        <span class="hljs-keyword">return</span> c2;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> c3;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">while</span>(cin&gt;&gt;l1&gt;&gt;l2&gt;&gt;l3&gt;&gt;c1&gt;&gt;c2&gt;&gt;c3)<br>    &#123;<br>        cin&gt;&gt;a&gt;&gt;b;<br>        cin&gt;&gt;n;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;++i)<br>            cin&gt;&gt;dis[i];<br>        <span class="hljs-built_in">memset</span>(dp,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dp));<br>        dp[a]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a+<span class="hljs-number">1</span>;i&lt;=b;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=a;j&lt;i;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(dis[i]-dis[j]&lt;=l3)<br>                    dp[i]=<span class="hljs-built_in">min</span>(dp[i],dp[j]+<span class="hljs-built_in">getprice</span>(j,i));<br>            &#125;<br>        &#125;<br>        cout&lt;&lt;dp[b]&lt;&lt;endl;<br>        <br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åˆ†é…å®è—"><a class="markdownIt-Anchor" href="#åˆ†é…å®è—"></a> åˆ†é…å®è—</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ä¸¤ä¸ªå¯»å®è€…æ‰¾åˆ°ä¸€ä¸ªå®è—ï¼Œé‡Œé¢åŒ…å«nä»¶ç‰©å“ï¼Œæ¯ä»¶ç‰©å“çš„ä»·å€¼åˆ†åˆ«æ˜¯W[0]ï¼ŒW[1]ï¼Œâ€¦W[n-1]ã€‚<br />SumAä»£è¡¨å¯»å®è€…Aæ‰€è·ç‰©å“ä»·å€¼æ€»å’Œï¼ŒSumBä»£è¡¨å¯»å®è€…Bæ‰€è·ç‰©å“ä»·å€¼æ€»å’Œï¼Œè¯·é—®æ€ä¹ˆåˆ†é…æ‰èƒ½ä½¿å¾—ä¸¤äººæ‰€è·ç‰©å“ä»·å€¼æ€»å’Œå·®è·æœ€å°ï¼Œå³ä¸¤äººæ‰€è·ç‰©å“ä»·å€¼æ€»å’Œä¹‹å·®çš„ç»å¯¹å€¼|SumA - SumB|æœ€å°ã€‚</p><p>è¾“å…¥è¯´æ˜<br />è¾“å…¥æ•°æ®ç”±ä¸¤è¡Œæ„æˆï¼š<br />ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¡¨ç¤ºç‰©å“ä¸ªæ•°ï¼Œå…¶ä¸­<code>0&lt;n&lt;=200</code>ã€‚<br />ç¬¬äºŒè¡Œæœ‰nä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨æ¯ä»¶ç‰©å“çš„ä»·å€¼<code>W[i]</code>ï¼Œå…¶ä¸­<code>0&lt;W[i]&lt;=200</code>ã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">0<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong><br />å…¶å®æ˜¯ä¸€é“<strong>01èƒŒåŒ…é—®é¢˜</strong>ï¼Œåªéœ€è¦å°†èƒŒåŒ…å®¹é‡è®¾ç½®ä¸ºæ€»ä»·å€¼çš„ä¸€åŠå³å¯</p><p>ä»£ç </p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs excel">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>const <span class="hljs-built_in">int</span> <span class="hljs-built_in">N</span>=<span class="hljs-number">1</span>e6+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">int</span> a[<span class="hljs-built_in">N</span>];<br><span class="hljs-built_in">int</span> dp[<span class="hljs-built_in">N</span>]; <br><span class="hljs-built_in">int</span> main()<br>&#123;<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>;<br>cin&gt;&gt;<span class="hljs-built_in">n</span>;<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-built_in">n</span>;++i)<br>&#123;<br>cin&gt;&gt;a[i];<br><span class="hljs-built_in">sum</span>+=a[i];<br>&#125;<br><span class="hljs-built_in">int</span> v=<span class="hljs-built_in">sum</span>/<span class="hljs-number">2</span>;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-built_in">n</span>;++i)<br>&#123;<br>for(<span class="hljs-built_in">int</span> j=v;j&gt;=a[i];--j)<br>&#123;<br>dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-a[i]]+a[i]);<br>&#125;<br>&#125;<br>    cout&lt;&lt;<span class="hljs-built_in">abs</span>(<span class="hljs-number">2</span>*dp[v]-<span class="hljs-built_in">sum</span>)&lt;&lt;endl;<br>return <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å•è°ƒæ ˆ</title>
    <link href="/2022/09/13/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
    <url>/2022/09/13/%E5%8D%95%E8%B0%83%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BE%8B1">ä¾‹1</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0"><strong>é¢˜ç›®æè¿°</strong></a></li><li><a href="#%E6%80%9D%E8%B7%AF"><strong>æ€è·¯</strong></a></li><li><a href="#%E4%BB%A3%E7%A0%81"><strong>ä»£ç ï¼š</strong></a></li></ul></li><li><a href="#%E6%9F%B1%E7%8A%B6%E5%9B%BE%E4%B8%AD%E6%9C%80%E5%A4%A7%E7%9A%84%E7%9F%A9%E5%BD%A2">æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E6%8E%A5%E9%9B%A8%E6%B0%B4">æ¥é›¨æ°´</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1"><strong>é¢˜ç›®æè¿°</strong></a></li><li><a href="#%E4%BB%A3%E7%A0%81"><strong>ä»£ç </strong></a></li></ul></li></ul><!-- /TOC --><h2 id="ä¾‹1"><a class="markdownIt-Anchor" href="#ä¾‹1"></a> ä¾‹1</h2><p>###<strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å‡ºé¡¹æ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> çš„æ•´æ•°æ•°åˆ— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mn>1</mn><mo>â€¦</mo><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">a_{1 \dots n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="minner mtight">â€¦</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>å®šä¹‰å‡½æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> ä»£è¡¨æ•°åˆ—ä¸­ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ä¸ªå…ƒç´ ä¹‹åç¬¬ä¸€ä¸ªå¤§äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„å…ƒç´ çš„<strong>ä¸‹æ ‡</strong>ï¼Œå³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo><mi>min</mi><mo>â¡</mo></mo><mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo>â‰¤</mo><mi>n</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>j</mi></msub><mo>&gt;</mo><msub><mi>a</mi><mi>i</mi></msub></mrow></msub><mo stretchy="false">{</mo><mi>j</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">f(i)=\min_{i&lt;j\leq n, a_j &gt; a_i} \{j\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0973199999999999em;vertical-align:-0.34731999999999996em;"></span><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166400000000005em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">&lt;</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">â‰¤</span><span class="mord mathnormal mtight">n</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&gt;</span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.34731999999999996em;"><span></span></span></span></span></span></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">}</span></span></span></span>ã€‚è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(i)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ã€‚</p><p>è¯•æ±‚å‡º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo>â€¦</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(1\dots n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ã€‚</p><p>ç¬¬äºŒè¡Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mn>1</mn><mo>â€¦</mo><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">a_{1\dots n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="minner mtight">â€¦</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ä¸€è¡Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo>â€¦</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(1\dots n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> çš„å€¼ã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p><strong>æ•°æ®è§„æ¨¡</strong></p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¤</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">n\leq 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ï¼›</p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>60</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">60\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¤</mo><mn>5</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">n\leq 5 \times 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> ï¼›</p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo>â‰¤</mo><mn>3</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n\leq 3\times 10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">1\leq a_i\leq 10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> <strong>æ€è·¯</strong></h3><p>æ‰¾åˆ°a[i]å³è¾¹ç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„æ•°çš„ä¸‹æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºæ ˆä¸­çš„å…ƒç´ æ¥è¯´ï¼Œæ ˆé¡¶å…ƒç´ å°äºç­‰äºa[i]çš„æ•°è¦ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°é‡åˆ°æ ˆé¡¶å…ƒç´ å¤§äºa[i]ï¼Œæ­¤æ—¶æ ˆé¡¶çš„å…ƒç´ å°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”a[i]å¤§çš„æ•°ã€‚</p><ul><li>ä¸€èˆ¬æ‰¾a[i]å³è¾¹æ¯”ä»–å¤§çš„æ•°ï¼Œè¦ä»å³å‘å·¦éå†</li><li>a[i]å·¦è¾¹æ¯”ä»–å¤§çš„æ•°ï¼Œè¦ä»å·¦å‘å³éå†</li></ul><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> <strong>ä»£ç ï¼š</strong></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">3</span>*<span class="hljs-number">1e6</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> a[N];<br>stack&lt;<span class="hljs-type">int</span>&gt; st;<br><span class="hljs-type">int</span> f[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;a[i];<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n;i&gt;=<span class="hljs-number">1</span>;--i)<br>&#123;<br><span class="hljs-keyword">while</span>(!st.<span class="hljs-built_in">empty</span>()&amp;&amp;a[i]&gt;a[st.<span class="hljs-built_in">top</span>()])<br>st.<span class="hljs-built_in">pop</span>();<br><span class="hljs-keyword">if</span>(st.<span class="hljs-built_in">empty</span>())<br>f[i]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">else</span><br>f[i]=st.<span class="hljs-built_in">top</span>();<br>st.<span class="hljs-built_in">push</span>(i);<br>&#125;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cout&lt;&lt;f[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><h2 id="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"><a class="markdownIt-Anchor" href="#æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"></a> æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</h2><p><a href="https://leetcode.cn/problems/largest-rectangle-in-histogram/description/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚</p><p>æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p><p>e.g.</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šheights = <span class="hljs-string">[2,1,5,6,2,3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">10</span><br>è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a class="markdownIt-Anchor" href="#æ€è·¯-2"></a> æ€è·¯</h3><p>è¿™é“é¢˜å®é™…ä¸Šéœ€è¦æ‰¾å‡º<code>heights[i]</code>å·¦ä¾§å’Œå³ä¾§ç¬¬ä¸€ä¸ªå°äºä»–çš„æ•°ï¼Œå› æ­¤è¦åˆ†åˆ«è®°å½•å·¦å³ä¸¤ä¾§ç¬¬ä¸€ä¸ªå°äºheights[i]çš„æ•°çš„ä¸‹æ ‡ã€‚ç„¶åä»¥<code>heights[i]</code>ä¸ºé«˜çš„çŸ©å½¢é¢ç§¯å°±ä¸º<code>(right[i]-left[i]-1)*heights[i]</code><br /><code>left[i]å’Œright[i]</code>ä¸ä¸Šä¸€é“ä¾‹é¢˜ç±»ä¼¼ï¼Œå½“æ ˆé¡¶å…ƒç´ å¤§äºheights[i]è¦ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°æ ˆé¡¶å…ƒç´ å°äºheights[i]ï¼Œåˆ†åˆ«å‘å·¦å‘å³éå†å¹¶æ›´æ–°ä¸¤ä¸ªå•è°ƒæ ˆå³å¯ã€‚</p><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> ä»£ç </h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mel">class Solution &#123;<br>public:<br>    <span class="hljs-keyword">int</span> largestRectangleArea(<span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; heights) &#123;<br>        <span class="hljs-keyword">int</span> n=heights.<span class="hljs-keyword">size</span>();<br>        <span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; left(n),right(n);<span class="hljs-comment">//è®°å½•å·¦ä¾§å’Œå³ä¾§ç¬¬ä¸€ä¸ªæ¯”ä»–å°çš„æ•°</span><br>        stack&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-keyword">ls</span>,rs;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(!<span class="hljs-keyword">ls</span>.empty()&amp;&amp;heights[<span class="hljs-keyword">ls</span>.top()]&gt;=heights[i])<br>                <span class="hljs-keyword">ls</span>.pop();<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">ls</span>.empty())<br>                left[i]=<span class="hljs-number">-1</span>;<br>            <span class="hljs-keyword">else</span><br>                left[i]=<span class="hljs-keyword">ls</span>.top();<br>            <span class="hljs-keyword">ls</span>.push(i);<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        &#123;<br>            <span class="hljs-keyword">while</span>(!rs.empty()&amp;&amp;heights[rs.top()]&gt;=heights[i])<br>                rs.pop();<br>            <span class="hljs-keyword">if</span>(rs.empty())<br>                right[i]=n;<br>            <span class="hljs-keyword">else</span><br>                right[i]=rs.top();<br>            rs.push(i);<br>        &#125;<br>        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>        &#123;<br>            ans=<span class="hljs-keyword">max</span>(ans,(right[i]-left[i]<span class="hljs-number">-1</span>)*heights[i]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æ¥é›¨æ°´"><a class="markdownIt-Anchor" href="#æ¥é›¨æ°´"></a> æ¥é›¨æ°´</h2><p><a href="https://leetcode.cn/problems/trapping-rain-water/">åŸé¢˜</a></p><h3 id="é¢˜ç›®æè¿°-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°-2"></a> <strong>é¢˜ç›®æè¿°</strong></h3><p>ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p><p><strong>è¾“å…¥è¾“å‡º</strong><br />ç¬¬ä¸€è¡Œè¾“å…¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>è¡¨ç¤ºæŸ±å­æ•°é‡<br />ç¬¬äºŒè¡Œè¾“å…¥nä¸ªæ•°<br />è¾“å‡ºæœ€å¤šèƒ½æ¥å¤šå°‘é›¨æ°´</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">6</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">2</span> <span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">9<br></code></pre></td></tr></table></figure><h3 id="ä»£ç -3"><a class="markdownIt-Anchor" href="#ä»£ç -3"></a> <strong>ä»£ç </strong></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> a[N];<br>stack&lt;<span class="hljs-type">int</span>&gt; st;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;a[i];<br><span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>    &#123;<br>        <span class="hljs-keyword">while</span>(!st.<span class="hljs-built_in">empty</span>()&amp;&amp;a[i]&gt;a[st.<span class="hljs-built_in">top</span>()])<br>        &#123;<br>            <span class="hljs-type">int</span> idx=st.<span class="hljs-built_in">top</span>();<br>            st.<span class="hljs-built_in">pop</span>();<br>            <span class="hljs-keyword">if</span>(st.<span class="hljs-built_in">empty</span>())<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-type">int</span> l=st.<span class="hljs-built_in">top</span>();<br>            <span class="hljs-type">int</span> h=<span class="hljs-built_in">min</span>(a[i],a[l])-a[idx];<br>            <span class="hljs-type">int</span> w=i-l<span class="hljs-number">-1</span>;<br>            ans+=w*h;<br>        &#125;<br>        st.<span class="hljs-built_in">push</span>(i);<br>    &#125;<br>    cout&lt;&lt;ans&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é€’å½’</title>
    <link href="/2022/09/11/%E9%80%92%E5%BD%92/"/>
    <url>/2022/09/11/%E9%80%92%E5%BD%92/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98">æ±‰è¯ºå¡”é—®é¢˜</a></li><li><a href="#2%E7%9A%84%E5%B9%82%E6%AC%A1%E6%96%B9">2çš„å¹‚æ¬¡æ–¹</a></li></ul><!-- /TOC --><h3 id="æ±‰è¯ºå¡”é—®é¢˜"><a class="markdownIt-Anchor" href="#æ±‰è¯ºå¡”é—®é¢˜"></a> æ±‰è¯ºå¡”é—®é¢˜</h3><blockquote><p>æ±‰è¯ºå¡”é—®é¢˜çš„ç§ç±»éå¸¸å¤šï¼Œè¿™é‡Œå°±å†™ä¸€ä¸‹æœ€æœ€åŸºç¡€çš„é‚£ä¸ªå§</p></blockquote><p>é—®é¢˜æè¿°</p><p>æœ‰<code>n</code>ä¸ªå¤§å°ä¸ä¸€çš„åœ†ç›˜å’Œ a,b,c ä¸‰æ ¹æŸ±å­ï¼Œåˆå§‹æ—¶nä¸ªç›˜å­å…¨åœ¨aä¸Šï¼Œç°åœ¨è¦å°†ä»–ä»¬ç§»åŠ¨åˆ°cä¸Š</p><ul><li>ä¸€æ¬¡åªèƒ½ç§»åŠ¨1ä¸ªæŸ±å­</li><li>å¤§ç›˜å­ä¸èƒ½åœ¨å°ç›˜å­ä¸Šé¢</li></ul><p>input:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">to</span> c<br>move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">b</span><br>move <span class="hljs-selector-tag">from</span> c <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">b</span><br>move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">to</span> c<br>move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">a</span><br>move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">to</span> c<br>move <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">to</span> c<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">char</span> a,<span class="hljs-type">char</span> b,<span class="hljs-type">char</span> c)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(x==<span class="hljs-number">1</span>)<br>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;move from &quot;</span>&lt;&lt;a&lt;&lt;<span class="hljs-string">&quot; to &quot;</span>&lt;&lt;c&lt;&lt;endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">move</span>(x<span class="hljs-number">-1</span>,a,c,b);<br>cout&lt;&lt;<span class="hljs-string">&quot;move from &quot;</span>&lt;&lt;a&lt;&lt;<span class="hljs-string">&quot; to &quot;</span>&lt;&lt;c&lt;&lt;endl;<br><span class="hljs-built_in">move</span>(x<span class="hljs-number">-1</span>,b,a,c);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-type">char</span> a=<span class="hljs-string">&#x27;a&#x27;</span>,b=<span class="hljs-string">&#x27;b&#x27;</span>,c=<span class="hljs-string">&#x27;c&#x27;</span>;<br><span class="hljs-built_in">move</span>(n,a,b,c);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#2çš„å¹‚æ¬¡æ–¹"></a> 2çš„å¹‚æ¬¡æ–¹</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>ä»»ä½•ä¸€ä¸ªæ­£æ•´æ•°éƒ½å¯ä»¥ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> çš„å¹‚æ¬¡æ–¹è¡¨ç¤ºã€‚</p><p>ä¾‹å¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>137</mn><mo>=</mo><msup><mn>2</mn><mn>7</mn></msup><mo>+</mo><msup><mn>2</mn><mn>3</mn></msup><mo>+</mo><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">137= 2^7 + 2^3 + 2^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>åŒæ—¶çº¦å®šæ–¹æ¬¡ç”¨æ‹¬å·æ¥è¡¨ç¤ºï¼Œå³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">a^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span> å¯è¡¨ç¤ºä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a(b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>ç”±æ­¤å¯çŸ¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>137</mn></mrow><annotation encoding="application/x-tex">137</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">7</span></span></span></span> å¯è¡¨ç¤ºä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo stretchy="false">(</mo><mn>7</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2(7)+2(3)+2(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">7</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span></p><p>è¿›ä¸€æ­¥ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>=</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>2</mn><mo>+</mo><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">7= 2^2+2+2^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span>  ( <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">2^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span> ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> è¡¨ç¤º)ï¼Œå¹¶ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>=</mo><mn>2</mn><mo>+</mo><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">3=2+2^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>æ‰€ä»¥æœ€å <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>137</mn></mrow><annotation encoding="application/x-tex">137</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">7</span></span></span></span> å¯è¡¨ç¤ºä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2(2(2)+2+2(0))+2(2+2(0))+2(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>åˆå¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1315</mn><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mo>+</mo><msup><mn>2</mn><mn>8</mn></msup><mo>+</mo><msup><mn>2</mn><mn>5</mn></msup><mo>+</mo><mn>2</mn><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1315=2^{10} +2^8 +2^5 +2+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">1</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>æ‰€ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1315</mn></mrow><annotation encoding="application/x-tex">1315</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">1</span><span class="mord">5</span></span></span></span> æœ€åå¯è¡¨ç¤ºä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2(2(2+2(0))+2)+2(2(2+2(0)))+2(2(2)+2(0))+2+2(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ç¬¦åˆçº¦å®šçš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0, 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span></span></span></span> è¡¨ç¤ºï¼ˆåœ¨è¡¨ç¤ºä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰ã€‚</p><p>inputï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">1315</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2</span>(<span class="hljs-number">2</span>(<span class="hljs-number">2</span>+<span class="hljs-number">2</span>(<span class="hljs-number">0</span>))+<span class="hljs-number">2</span>)+<span class="hljs-number">2</span>(<span class="hljs-number">2</span>(<span class="hljs-number">2</span>+<span class="hljs-number">2</span>(<span class="hljs-number">0</span>)))+<span class="hljs-number">2</span>(<span class="hljs-number">2</span>(<span class="hljs-number">2</span>)+<span class="hljs-number">2</span>(<span class="hljs-number">0</span>))+<span class="hljs-number">2</span>+<span class="hljs-number">2</span>(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>æ€è·¯</p><blockquote><p>å…ˆæ‰¾å‡ºå½“å‰æ•°æœ€å¤§çš„æ¬¡æ–¹ï¼Œç„¶åé€’å½’çš„å¯¹è¿™ä¸ªæ•°åˆ†è§£ï¼Œç»§ç»­é€’å½’åˆ†è§£å‰©ä¸‹çš„æ•°</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxm</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(n)<br>&#123;<br>++k;<br>n/=<span class="hljs-number">2</span>;<br>&#125;<br>--k;<br><span class="hljs-keyword">return</span> k;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dg</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> mm=<span class="hljs-built_in">maxm</span>(n);<br><span class="hljs-keyword">if</span>(mm==<span class="hljs-number">1</span>)<br>cout&lt;&lt;<span class="hljs-number">2</span>;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;2(&quot;</span>;<br><span class="hljs-keyword">if</span>(mm==<span class="hljs-number">0</span>)<br>cout&lt;&lt;<span class="hljs-number">0</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">dg</span>(mm);<br>cout&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>&#125;<br>n=n-<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>,mm);<br><span class="hljs-keyword">if</span>(n) <br>&#123;<br>cout&lt;&lt;<span class="hljs-string">&#x27;+&#x27;</span>;<br><span class="hljs-built_in">dg</span>(n);<br>&#125;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n;<br>cin&gt;&gt;n;<br><span class="hljs-built_in">dg</span>(n);<br>cout&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è´ªå¿ƒ</title>
    <link href="/2022/09/08/%E8%B4%AA%E5%BF%83/"/>
    <url>/2022/09/08/%E8%B4%AA%E5%BF%83/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BE%8B%E9%A2%98to-fill-or-not-to-fill">ä¾‹é¢˜ï¼šTo Fill or Not to Fill</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li></ul><!-- /TOC --><blockquote><p>è´ªå¿ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œæ¯ä¸€æ­¥éƒ½æ±‚å‡ºå±€éƒ¨æœ€æœ‰è§£ï¼Œä»è€Œæ¥æ±‚å¾—å¯èƒ½çš„å…¨å±€æœ€ä¼˜è§£ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ±‚å¾—çš„å…¨å±€çš„è§£å¹¶ä¸ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜çš„</p></blockquote><h3 id="ä¾‹é¢˜to-fill-or-not-to-fill"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜to-fill-or-not-to-fill"></a> ä¾‹é¢˜ï¼šTo Fill or Not to Fill</h3><p><strong>é¢˜ç›®æè¿°</strong></p><p>With highways available, driving a car from Hangzhou to any other city is easy. But since the tank capacity of a car is limited, we have to find gas stations on the way from time to time. Different gas station may give different price. You are asked to carefully design the cheapest route to go.</p><p><strong>è¾“å…¥æè¿°</strong></p><p>For each case, the first line contains 4 positive numbers: Cmax (&lt;= 100), the maximum capacity of the tank; D (&lt;=30000), the distance between Hangzhou and the destination city; Davg (&lt;=20), the average distance per unit gas that the car can run; and N (&lt;= 500), the total number of gas stations. Then N lines follow, each contains a pair of non-negative numbers: Pi, the unit gas price, and Di (&lt;=D), the distance between this station and Hangzhou, for i=1,â€¦N. All the numbers in a line are separated by a space.</p><p><strong>è¾“å‡ºæè¿°</strong></p><p>For each test case, print the cheapest price in a line, accurate up to 2 decimal places. It is assumed that the tank is empty at the beginning. If it is impossible to reach the destination, print â€œThe maximum travel distance = Xâ€ where X is the maximum possible distance the car can run, accurate up to 2 decimal places.</p><p>inputï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">50</span> <span class="hljs-number">1300</span> <span class="hljs-number">12</span> <span class="hljs-number">8</span><br><span class="hljs-attribute">6</span>.<span class="hljs-number">00</span> <span class="hljs-number">1250</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">00</span> <span class="hljs-number">600</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">00</span> <span class="hljs-number">150</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">10</span> <span class="hljs-number">0</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">20</span> <span class="hljs-number">200</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">50</span> <span class="hljs-number">400</span><br><span class="hljs-attribute">7</span>.<span class="hljs-number">30</span> <span class="hljs-number">1000</span><br><span class="hljs-attribute">6</span>.<span class="hljs-number">85</span> <span class="hljs-number">300</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br><span class="hljs-attribute">749</span>.<span class="hljs-number">17</span><br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>å°†æ‰€æœ‰åŠ æ²¹ç«™æ²¹ä»·æŒ‰å‡åºæ’åºï¼Œè®©æ²¹ä»·æœ€ä¾¿å®œçš„åŠ æ²¹ç«™å°½å¯èƒ½åŠ æ›´å¤šçš„æ²¹ï¼Œç»´æŠ¤ä¸€ä¸ªæ•°ç»„<code>dis[]</code>æ¥è®°å½•è·ç¦»ï¼ŒåŒæ—¶éœ€è¦æ³¨æ„ä½æ²¹ä»·è¦†ç›–è¿‡çš„è·ç¦»ä¸å¯å†æ¬¡è¢«è¦†ç›–</p><h3 id="é¢˜è§£"><a class="markdownIt-Anchor" href="#é¢˜è§£"></a> é¢˜è§£</h3><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">st</span><br>&#123;<br>    <span class="hljs-type">double</span> a;<br>    <span class="hljs-type">int</span> b;<br>    <span class="hljs-built_in">st</span>():<span class="hljs-built_in">a</span>(<span class="hljs-number">0</span>),<span class="hljs-built_in">b</span>(<span class="hljs-number">0</span>)&#123;&#125;<br>    <span class="hljs-built_in">st</span>(<span class="hljs-type">double</span> aa,<span class="hljs-type">int</span> bb):<span class="hljs-built_in">a</span>(aa),<span class="hljs-built_in">b</span>(bb)&#123;&#125;<br>&#125;sta[<span class="hljs-number">501</span>];<br><span class="hljs-type">int</span> dis[<span class="hljs-number">30001</span>];<br><span class="hljs-type">int</span> cmax,d,davg,n,di;<br><span class="hljs-type">double</span> pi;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">auto</span> func=[](st&amp; a,st&amp; b)&#123;<br>        <span class="hljs-keyword">if</span>(a.a!=b.a)<br>            <span class="hljs-keyword">return</span> a.a&lt;b.a;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> a.b&lt;b.b;<br>    &#125;;<br>    cin&gt;&gt;cmax&gt;&gt;d&gt;&gt;davg&gt;&gt;n; <br><span class="hljs-built_in">memset</span>(sta,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(sta));<br>    <span class="hljs-built_in">memset</span>(dis,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(dis));<br>  <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>    &#123;<br>           cin&gt;&gt;pi&gt;&gt;di;<br>           sta[i]=<span class="hljs-built_in">st</span>(pi,di);<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(sta,sta+n,func);<br>    <span class="hljs-type">int</span> maxlen=cmax*davg;<br>    <span class="hljs-type">double</span> cost=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>    &#123;<br>    <span class="hljs-type">int</span> len=<span class="hljs-number">0</span>,cnt=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(sta[i].b+maxlen&lt;d)<br>        len=maxlen;<br>        <span class="hljs-keyword">else</span><br>            len=d-sta[i].b;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=sta[i].b;j&lt;sta[i].b+len;++j)<br>&#123;<br>        <span class="hljs-keyword">if</span>(dis[j]==<span class="hljs-number">0</span>)<br>&#123;<br>                dis[j]=<span class="hljs-number">1</span>;<br>                ++cnt;<br>            &#125;<br>        &#125;<br>        cost+=(<span class="hljs-type">double</span>)cnt/davg*sta[i].a;<br>    &#125;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;d;++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(dis[i]==<span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The maximum travel distance = %d.00\n&quot;</span>,i);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(i==d)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.2f\n&quot;</span>,cost);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€å¤§å­çŸ©é˜µ</title>
    <link href="/2022/09/01/%E6%9C%80%E5%A4%A7%E5%AD%90%E7%9F%A9%E9%98%B5/"/>
    <url>/2022/09/01/%E6%9C%80%E5%A4%A7%E5%AD%90%E7%9F%A9%E9%98%B5/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul><!-- /TOC --><h3 id="é¢˜ç›®æè¿°"><a class="markdownIt-Anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><p>çŸ©é˜µçš„å¤§å°å®šä¹‰ä¸ºçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œç°åœ¨ç»™å®šä¸€ä¸ªnç»´çŸ©é˜µï¼Œè¾“å‡ºä»–çš„æœ€å¤§å­çŸ©é˜µ</p><p>è¾“å…¥ï¼šç¬¬ä¸€è¡Œè¾“å…¥nï¼Œè¡¨ç¤ºçŸ©é˜µçš„ç»´æ•°ï¼Œéšåè¾“å…¥nÃ—nçš„çŸ©é˜µ</p><p>input:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs subunit">4<br>0 <span class="hljs-string">-2</span> <span class="hljs-string">-7</span> 0<br>9 2 <span class="hljs-string">-6</span> 2<br><span class="hljs-string">-4</span> 1 <span class="hljs-string">-4</span>  1<br><span class="hljs-string">-1</span> 8  0 <span class="hljs-string">-2</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">15<br></code></pre></td></tr></table></figure><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><p>è¿™é“é¢˜å¯ä»¥è¯´æ˜¯çŸ©é˜µç‰ˆçš„<em>æœ€å¤§è¿ç»­å­åºåˆ—çš„å’Œ</em>ï¼Œä¸ºäº†å‡å°‘æ—¶é—´å¤æ‚åº¦ï¼Œå°†çŸ©é˜µæ¯ä¸ªå…ƒç´ å˜æˆæ‰€åœ¨åˆ—çš„å‰ç¼€å’Œï¼Œå¦‚<code>s[i][j]</code>è¡¨ç¤ºç¬¬<code>j</code>åˆ—å‰<code>i</code>ä¸ªå…ƒç´ çš„å’Œï¼Œç„¶åæŒ‰ç…§ä¸€ç»´çš„æ–¹å¼æ±‚æœ€å¤§å’Œå°±å¥½äº†</p><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>const int <span class="hljs-attribute">N</span>=105;<br>int <span class="hljs-attribute">inf</span>=-1e6;<br>int s[N][N];<br>int main()<br>&#123;<br>    int n;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=1;i&lt;=n;++i)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=1;j&lt;=n;++j)<br>        &#123;<br>            cin&gt;&gt;s[i][j];<br>            s[i][j]+=s[i-1][j];<br>        &#125;<br>    &#125;<br>    int <span class="hljs-attribute">ans</span>=inf;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=1;i&lt;=n;++i)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=i;j&lt;=n;++j)<br>        &#123;<br>            int <span class="hljs-attribute">pre</span>=inf;<br>            <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">col</span>=1;col&lt;=n;++col)<br>            &#123;<br>                int <span class="hljs-attribute">t</span>=s[j][col]-s[i-1][col];<br>                <span class="hljs-attribute">pre</span>=max(pre+t,t);<br>                <span class="hljs-attribute">ans</span>=max(ans,pre);<br>            &#125;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;ans&lt;&lt;endl;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸è§æ’åºç®—æ³•</title>
    <link href="/2022/08/31/%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <url>/2022/08/31/%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F">æ’å…¥æ’åº</a></li><li><a href="#%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F">å¸Œå°”æ’åº</a></li><li><a href="#%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8Fradix-sort">åŸºæ•°æ’åºï¼ˆRadix Sort)</a></li><li><a href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F">å†’æ³¡æ’åº</a></li><li><a href="#%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8Fmerge-sort">å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</a></li><li><a href="#%E5%A0%86%E6%8E%92%E5%BA%8F">å †æ’åº</a></li><li><a href="#%E6%A1%B6%E6%8E%92%E5%BA%8Fbucket-sort">æ¡¶æ’åºï¼ˆBucket Sortï¼‰</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">å¿«é€Ÿæ’åº</a></li></ul><!-- /TOC --><blockquote><p>è¿™ç¯‡åšå®¢ä¸»è¦æ€»ç»“ä¸€ä¸‹å¸¸è§æ’åºç®—æ³•åŠå…¶æ—¶é—´å¤æ‚åº¦</p></blockquote><table><thead><tr><th style="text-align:center">åç§°</th><th style="text-align:center">å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th style="text-align:center">æœ€å¥½</th><th style="text-align:center">æœ€å·®</th><th style="text-align:center">ç©ºé—´å¤æ‚åº¦</th><th style="text-align:center">ç¨³å®šæ€§</th></tr></thead><tbody><tr><td style="text-align:center">æ’å…¥æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ç¨³å®š</td></tr><tr><td style="text-align:center">å¸Œå°”æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>1.3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^{1.3})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">.</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ä¸ç¨³å®š</td></tr><tr><td style="text-align:center">åŸºæ•°æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ—</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n*k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ—</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n*k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ—</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n*k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ç¨³å®š</td></tr><tr><td style="text-align:center">å†’æ³¡æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ç¨³å®š</td></tr><tr><td style="text-align:center">å½’å¹¶æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ç¨³å®š</td></tr><tr><td style="text-align:center">å †æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ä¸ç¨³å®š</td></tr><tr><td style="text-align:center">æ¡¶æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n+k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n+k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ç¨³å®š</td></tr><tr><td style="text-align:center">å¿«é€Ÿæ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ä¸ç¨³å®š</td></tr><tr><td style="text-align:center">é€‰æ‹©æ’åº</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">ä¸ç¨³å®š</td></tr></tbody></table><h3 id="æ’å…¥æ’åº"><a class="markdownIt-Anchor" href="#æ’å…¥æ’åº"></a> æ’å…¥æ’åº</h3><blockquote><p>æ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å°†è¿™ä¸ªå…ƒç´ å’Œå‰é¢å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ’å…¥åˆ°åˆé€‚çš„ä½ç½®</p></blockquote><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">void <span class="hljs-keyword">insert_sort(int </span>arr[], int length)<br>&#123;<br>    int i,<span class="hljs-keyword">j;</span><br><span class="hljs-keyword"></span>    for (i = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt; length; i++) &#123;</span><br>        int tmp = arr[i];<br>        for (<span class="hljs-keyword">j </span>= i<span class="hljs-comment">; j &gt; 0 &amp;&amp; arr[j - 1] &gt; tmp; j--) &#123;</span><br>            arr[<span class="hljs-keyword">j] </span>= arr[<span class="hljs-keyword">j </span>- <span class="hljs-number">1</span>];<br>        &#125;<br>        arr[<span class="hljs-keyword">j] </span>= tmp;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¸Œå°”æ’åº"><a class="markdownIt-Anchor" href="#å¸Œå°”æ’åº"></a> å¸Œå°”æ’åº</h3><blockquote><p>æ’å…¥æ’åºçš„å‡çº§ç‰ˆï¼Œåˆå§‹é—´éš”<em>gap</em>ä¸ºå…ƒç´ æ•°ç›®çš„ä¸€èˆ¬ï¼Œæ¯æ¬¡é—´éš”<em>gap</em>ä¸ªå…ƒç´ è¿›è¡Œæ’å…¥æ’åºï¼Œç›´åˆ°gapä¸º1</p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">void</span> shellSort(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> n) <br>&#123; <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> gap = n/<span class="hljs-number">2</span>; gap &gt; <span class="hljs-number">0</span>; gap /= <span class="hljs-number">2</span>) <br>    &#123; <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = gap; i &lt; n; i += <span class="hljs-number">1</span>) <br>        &#123; <br>            <span class="hljs-type">int</span> <span class="hljs-keyword">temp</span> = arr[i]; <br>            <span class="hljs-type">int</span> j;             <br>            <span class="hljs-keyword">for</span> (j = i; j &gt;= gap &amp;&amp; arr[j - gap] &gt; <span class="hljs-keyword">temp</span>; j -= gap) <br>                arr[j] = arr[j - gap]; <br>            arr[j] = <span class="hljs-keyword">temp</span>; <br>        &#125; <br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŸºæ•°æ’åºradix-sort"><a class="markdownIt-Anchor" href="#åŸºæ•°æ’åºradix-sort"></a> åŸºæ•°æ’åºï¼ˆRadix Sort)</h3><blockquote><p>å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚æ’åºè¿‡ç¨‹æ˜¯å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ï¼Œç„¶åä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p></blockquote><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">int</span> getMax(<span class="hljs-built_in">int</span> arr[], <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>) <br>&#123; <br>    <span class="hljs-built_in">int</span> mx = arr[<span class="hljs-number">0</span>]; <br>    for (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">n</span>; i++) <br>        <span class="hljs-built_in">if</span> (arr[i] &gt; mx) <br>            mx = arr[i]; <br>    return mx; <br>&#125; <br><br>void countSort(<span class="hljs-built_in">int</span> arr[], <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>, <span class="hljs-built_in">int</span> <span class="hljs-built_in">exp</span>) <br>&#123; <br>    <span class="hljs-built_in">int</span> output[<span class="hljs-built_in">n</span>]; <br>    <span class="hljs-built_in">int</span> i, <span class="hljs-built_in">count</span>[<span class="hljs-number">10</span>] = &#123;<span class="hljs-number">0</span>&#125;; <br>  <br>    for (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">n</span>; i++) <br>        <span class="hljs-built_in">count</span>[ (arr[i]/<span class="hljs-built_in">exp</span>)%<span class="hljs-number">10</span> ]++; <br>  <br>    for (i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) <br>        <span class="hljs-built_in">count</span>[i] += <span class="hljs-built_in">count</span>[i - <span class="hljs-number">1</span>]; //æ­¤æ—¶<span class="hljs-built_in">count</span>[i]æ¯ä½æ•°å­—å­˜æ”¾çš„ä½ç½®ï¼Œå®é™…ä¸‹æ ‡è¿˜è¦-<span class="hljs-number">1</span><br>  <br>    for (i = <span class="hljs-built_in">n</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) //ä»åå¾€å‰ä¿è¯ç¨³å®šæ€§<br>    &#123; <br>        output[<span class="hljs-built_in">count</span>[ (arr[i]/<span class="hljs-built_in">exp</span>)%<span class="hljs-number">10</span> ] - <span class="hljs-number">1</span>] = arr[i]; <br>        <span class="hljs-built_in">count</span>[ (arr[i]/<span class="hljs-built_in">exp</span>)%<span class="hljs-number">10</span> ]--; <br>    &#125; <br>  <br>    for (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">n</span>; i++) <br>        arr[i] = output[i]; <br>&#125; <br>  <br>void radixsort(<span class="hljs-built_in">int</span> arr[], <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>) <br>&#123; <br>    <span class="hljs-built_in">int</span> m = getMax(arr, <span class="hljs-built_in">n</span>); <br>    for (<span class="hljs-built_in">int</span> <span class="hljs-built_in">exp</span> = <span class="hljs-number">1</span>; m/<span class="hljs-built_in">exp</span> &gt; <span class="hljs-number">0</span>; <span class="hljs-built_in">exp</span> *= <span class="hljs-number">10</span>) <br>        countSort(arr, <span class="hljs-built_in">n</span>, <span class="hljs-built_in">exp</span>); <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å†’æ³¡æ’åº"><a class="markdownIt-Anchor" href="#å†’æ³¡æ’åº"></a> å†’æ³¡æ’åº</h3><blockquote><p>æ¯æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ å¤§å°ï¼Œç„¶åäº¤æ¢ä½ç½®ï¼Œæ¯æ¬¡å°†æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ æ”¾åˆ°æœ€å</p></blockquote><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs excel">void bubblesort(<span class="hljs-built_in">int</span> arr[],<span class="hljs-built_in">int</span> <span class="hljs-built_in">len</span>)<br>&#123;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">len</span>-<span class="hljs-number">1</span>;++i)<br>&#123;<br>for( <span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-built_in">len</span>-i-<span class="hljs-number">1</span>;++j)<br>&#123;<br><span class="hljs-built_in">if</span>(arr[j]&gt;arr[j+<span class="hljs-number">1</span>])<br>&#123;<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">t</span>=arr[j];<br>arr[j]=arr[j+<span class="hljs-number">1</span>];<br>arr[j+<span class="hljs-number">1</span>]=<span class="hljs-built_in">t</span>;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å½’å¹¶æ’åºmerge-sort"><a class="markdownIt-Anchor" href="#å½’å¹¶æ’åºmerge-sort"></a> å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h3><blockquote><p>ä¸»è¦æ€æƒ³æ˜¯åˆ†æ²»ï¼ˆDivide and Conquerï¼‰ï¼Œå°†æ•°ç»„ä¸æ–­åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¯¹åˆ†å¼€çš„éƒ¨åˆ†æ¯”è¾ƒç„¶åæ‹¼æ¥</p></blockquote><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">void</span> merge(<span class="hljs-built_in">int</span> arr[], <span class="hljs-built_in">int</span> l, <span class="hljs-built_in">int</span> m, <span class="hljs-built_in">int</span> r) <br>&#123; <br>    <span class="hljs-built_in">int</span> i, j, k; <br>    <span class="hljs-built_in">int</span> n1 = m - l + <span class="hljs-number">1</span>; <br>    <span class="hljs-built_in">int</span> n2 =  r - m; <br><br>    <span class="hljs-built_in">int</span> L[n1], R[n2]; <br><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n1; i++) <br>        L[i] = arr[l + i]; <br>    <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; n2; j++) <br>        R[j] = arr[m + <span class="hljs-number">1</span>+ j]; <br><br>    i = <span class="hljs-number">0</span>; <br>    j = <span class="hljs-number">0</span>; <br>    k = l; <br>    <span class="hljs-keyword">while</span> (i &lt; n1 &amp;&amp; j &lt; n2) <br>    &#123; <br>        <span class="hljs-keyword">if</span> (L[i] &lt;= R[j]) <br>        &#123; <br>            arr[k] = L[i]; <br>            i++; <br>        &#125; <br>        <span class="hljs-keyword">else</span><br>        &#123; <br>            arr[k] = R[j]; <br>            j++; <br>        &#125; <br>        k++; <br>    &#125; <br>  <br>    <span class="hljs-keyword">while</span> (i &lt; n1) <br>    &#123; <br>        arr[k] = L[i]; <br>        i++; <br>        k++; <br>    &#125; <br>  <br>    <span class="hljs-keyword">while</span> (j &lt; n2) <br>    &#123; <br>        arr[k] = R[j]; <br>        j++; <br>        k++; <br>    &#125; <br>&#125; <br>  <br><span class="hljs-built_in">void</span> mergeSort(<span class="hljs-built_in">int</span> arr[], <span class="hljs-built_in">int</span> l, <span class="hljs-built_in">int</span> r) <br>&#123; <br>    <span class="hljs-keyword">if</span> (l &lt; r) <br>    &#123; <br>        <span class="hljs-built_in">int</span> m = l+r&gt;&gt;<span class="hljs-number">1</span>; <br>        mergeSort(arr, l, m); <br>        mergeSort(arr, m+<span class="hljs-number">1</span>, r); <br>        merge(arr, l, m, r); <br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å †æ’åº"><a class="markdownIt-Anchor" href="#å †æ’åº"></a> å †æ’åº</h3><blockquote><p>ä¸»è¦æ˜¯å»ºç«‹å°é¡¶å †æˆ–è€…å¤§é¡¶å †ï¼Œæ’åºçš„æ—¶å€™ï¼Œæ¯æ¬¡å–å‡ºå †é¡¶å…ƒç´ ï¼Œç„¶åå‰©ä¸‹å…ƒç´ é‡æ–°å»ºå †ï¼Œ<s>å»ºå †å¯ä»¥ç›´æ¥ç”¨STLçš„make_heap()ğŸ˜„</s></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">heapify</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> n, <span class="hljs-type">int</span> i)</span> <br>&#123; <br>    <span class="hljs-type">int</span> <span class="hljs-variable">maxv</span> <span class="hljs-operator">=</span> i; <br>    <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*i + <span class="hljs-number">1</span>;  <br>    <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*i + <span class="hljs-number">2</span>; <br>    <span class="hljs-keyword">if</span> (l &lt; n &amp;&amp; arr[l] &gt; arr[maxv]) <br>        maxv = l; <br>    <span class="hljs-keyword">if</span> (r &lt; n &amp;&amp; arr[r] &gt; arr[maxv]) <br>        maxv = r; <br>    <span class="hljs-keyword">if</span> (maxv != i) <br>    &#123; <br>        swap(arr[i], arr[maxv]); <br>        heapify(arr, n, maxv); <br>    &#125; <br>&#125;<br><span class="hljs-keyword">void</span> <span class="hljs-title function_">heapsort</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[],<span class="hljs-type">int</span> len)</span><br>&#123;<br>    <span class="hljs-comment">//å»ºå †</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=len/<span class="hljs-number">2</span>-<span class="hljs-number">1</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>        heapify(arr,len;i);<br>    <span class="hljs-comment">//æ’åº</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=len-<span class="hljs-number">1</span>;i&gt;=<span class="hljs-number">0</span>;--i)<br>    &#123;<br>        swap(arr[i],a[<span class="hljs-number">0</span>]);<span class="hljs-comment">//å †é¡¶æ”¾åˆ°æœ€å</span><br>        heapify(arr,i,<span class="hljs-number">0</span>);<span class="hljs-comment">//é‡æ–°è°ƒæ•´</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¡¶æ’åºbucket-sort"><a class="markdownIt-Anchor" href="#æ¡¶æ’åºbucket-sort"></a> æ¡¶æ’åºï¼ˆBucket Sortï¼‰</h3><blockquote><p>å°†æ•°ç»„åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶ä¸­ï¼Œå†å¯¹æ¯ä¸ªæ¡¶å­å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ï¼Œæœ€åå°†å„ä¸ªæ¡¶ä¸­çš„æ•°æ®æœ‰åºçš„åˆå¹¶èµ·æ¥ã€‚</p></blockquote><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs excel">\\è¯¥ä»£ç åªé€‚åˆæ­£æ•°æ•°ç»„çš„æ’åº<br>void bucketSort(float arr[], <span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>) <br>&#123; <br>    vector&lt;float&gt; b[<span class="hljs-built_in">n</span>]; <br><br>    for (<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-built_in">n</span>; i++) <br>    &#123; <br>       <span class="hljs-built_in">int</span> bi = <span class="hljs-built_in">n</span>*arr[i]; <br>       b[bi].push_back(arr[i]); <br>    &#125; <br>    for (<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-built_in">n</span>; i++) <br>       sort(b[i].begin(), b[i].end()); <br>    <span class="hljs-built_in">int</span> <span class="hljs-built_in">index</span> = <span class="hljs-number">0</span>; <br>    for (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">n</span>; i++) <br>        for (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; b[i].size(); j++) <br>          arr[<span class="hljs-built_in">index</span>++] = b[i][j]; <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¿«é€Ÿæ’åº"><a class="markdownIt-Anchor" href="#å¿«é€Ÿæ’åº"></a> å¿«é€Ÿæ’åº</h3><blockquote><p>æ ¸å¿ƒæ€æƒ³ä¹Ÿæ˜¯åˆ†æ²»ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªpivot(ä¸€èˆ¬é€‰ç¬¬ä¸€ä¸ª)ï¼Œè®¾ç½®å·¦å³ç«¯ç‚¹ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸€è¶Ÿè°ƒæ•´å°†æ¯”pivotå…ƒç´ å°çš„å€¼æ”¾åˆ°å·¦æŒ‡é’ˆä½ç½®ï¼Œæ¯”pivotå…ƒç´ å¤§çš„å€¼æ”¾åˆ°ä½ç½®ï¼Œè¿™æ ·å·¦åŠéƒ¨åˆ†å°±å°äºå³åŠéƒ¨åˆ†ï¼Œç„¶åé€’å½’ï¼Œåˆ†åˆ«å¯¹å·¦å³ä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œå¿«æ’</p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">int</span> adjust(<span class="hljs-type">int</span> arr[],<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)<br>&#123;<br><span class="hljs-type">int</span> t=arr[l];<br><span class="hljs-keyword">while</span>(l&lt;r)<br>&#123;<br><span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;arr[r]&gt;=t)<br><span class="hljs-comment">--r;</span><br>arr[l]=arr[r];<br><span class="hljs-keyword">while</span>(l&lt;r&amp;&amp;arr[l]&lt;=t)<br>++l;<br>arr[r]=arr[l];<br>&#125;<br>arr[l]=t;<br><span class="hljs-keyword">return</span> l;<br>&#125;<br><span class="hljs-type">void</span> quicksort(<span class="hljs-type">int</span> arr[],<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)<br>&#123;<br><span class="hljs-keyword">if</span>(l&lt;r)<br>&#123;<br><span class="hljs-type">int</span> pos=adjust(arr,l,r);<br>quicksort(arr,l,pos);<br>quicksort(arr,pos+<span class="hljs-number">1</span>,r);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ—¥æœŸè®¡ç®—</title>
    <link href="/2022/08/29/%E6%97%A5%E6%9C%9F%E8%AE%A1%E7%AE%97/"/>
    <url>/2022/08/29/%E6%97%A5%E6%9C%9F%E8%AE%A1%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹ä¸€é“é¢˜</p><p>è¾“å…¥ä¸€å¹´ä¸­çš„ä¸€å¤©ï¼Œè¾“å‡ºè¿™ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ </p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">14 </span>October <span class="hljs-number">2001</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Sunday</span><br></code></pre></td></tr></table></figure><p>ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—å¤©æ•°ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mi>X</mi><mo>âˆ’</mo><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mi>X</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>4</mn><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>X</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>100</mn><mo>+</mo><mo stretchy="false">(</mo><mi>X</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>400</mn><mo>+</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">S=X-1+(X-1)/4-(X-1)/100+(X-1)/400+C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">4</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p><p>å…¶ä¸­ï¼Œ<code>X</code>æ˜¯å¹´ä»½ï¼Œ<code>C</code>è¡¨ç¤ºè¿™ä¸€å¤©æ˜¯è¿™ä¸€å¹´çš„ç¬¬<code>C</code>å¤©</p><p>è®¡ç®—å‡º<code>S</code>åç”¨<code>S%7</code>åˆ¤æ–­æ˜ŸæœŸå‡ å³å¯</p><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">// S=X-1+(X-1)/4-(X-1)/100+(X-1)/400+C</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isrun</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(n%<span class="hljs-number">4</span>==<span class="hljs-number">0</span>&amp;&amp;n%<span class="hljs-number">100</span>||n%<span class="hljs-number">400</span>==<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> d,y;<br>    string m;<br>    vector&lt;pair&lt;string,<span class="hljs-type">int</span>&gt;&gt; mon=&#123;&#123;<span class="hljs-string">&quot;January&quot;</span>,<span class="hljs-number">31</span>&#125;,&#123;<span class="hljs-string">&quot;February&quot;</span>,<span class="hljs-number">28</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;March&quot;</span>,<span class="hljs-number">31</span>&#125;,&#123;<span class="hljs-string">&quot;April&quot;</span>,<span class="hljs-number">30</span>&#125;,&#123;<span class="hljs-string">&quot;May&quot;</span>,<span class="hljs-number">31</span>&#125;,&#123;<span class="hljs-string">&quot;June&quot;</span>,<span class="hljs-number">30</span>&#125;,&#123;<span class="hljs-string">&quot;July&quot;</span>,<span class="hljs-number">31</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;August&quot;</span>,<span class="hljs-number">31</span>&#125;,&#123;<span class="hljs-string">&quot;September&quot;</span>,<span class="hljs-number">30</span>&#125;,&#123;<span class="hljs-string">&quot;October&quot;</span>,<span class="hljs-number">31</span>&#125;,&#123;<span class="hljs-string">&quot;November&quot;</span>,<span class="hljs-number">30</span>&#125;,<br>                                  &#123;<span class="hljs-string">&quot;December&quot;</span>,<span class="hljs-number">31</span>&#125;&#125;;<br>    <span class="hljs-keyword">while</span>(cin&gt;&gt;d&gt;&gt;m&gt;&gt;y)<br>    &#123;<br>        <span class="hljs-type">int</span> flag=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">isrun</span>(y))<br>            flag=<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it=mon.<span class="hljs-built_in">begin</span>();it!=mon.<span class="hljs-built_in">end</span>();++it)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(it-&gt;first!=m)   <br>                sum+=it-&gt;second;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        sum=sum+d+flag;<br>        <span class="hljs-type">int</span> s=y<span class="hljs-number">-1</span>+(y<span class="hljs-number">-1</span>)/<span class="hljs-number">4</span>-(y<span class="hljs-number">-1</span>)/<span class="hljs-number">100</span>+(y<span class="hljs-number">-1</span>)/<span class="hljs-number">400</span>+sum;<br>        <span class="hljs-keyword">switch</span>(s%<span class="hljs-number">7</span>)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Sunday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Monday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Tuesday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Wednesday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Thursday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Friday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>: <br>                cout&lt;&lt;<span class="hljs-string">&quot;Saturday&quot;</span>&lt;&lt;endl;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>çº¿æ®µæ ‘</title>
    <link href="/2022/08/27/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    <url>/2022/08/27/%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E7%BA%BF%E6%AE%B5%E6%A0%91">çº¿æ®µæ ‘</a><ul><li><a href="#%E9%80%92%E5%BD%92%E5%BB%BA%E6%A0%91">é€’å½’å»ºæ ‘</a></li></ul></li><li><a href="#%E7%B1%BB%E5%9E%8B%E4%B8%80%E5%8D%95%E7%82%B9%E4%BF%AE%E6%94%B9%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2">ç±»å‹ä¸€ï¼šå•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</a><ul><li><a href="#%E5%8D%95%E7%82%B9%E4%BF%AE%E6%94%B9">å•ç‚¹ä¿®æ”¹</a></li><li><a href="#%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2">åŒºé—´æŸ¥è¯¢</a></li><li><a href="#%E4%BE%8B%E9%A2%98">ä¾‹é¢˜</a></li></ul></li><li><a href="#%E7%B1%BB%E5%9E%8B%E4%BA%8C%E5%8C%BA%E9%97%B4%E4%BF%AE%E6%94%B9%E5%8D%95%E7%82%B9%E6%9F%A5%E8%AF%A2">ç±»å‹äºŒï¼šåŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢</a><ul><li><a href="#%E5%8C%BA%E9%97%B4%E4%BF%AE%E6%94%B9">åŒºé—´ä¿®æ”¹</a></li><li><a href="#%E5%8D%95%E7%82%B9%E6%9F%A5%E8%AF%A2">å•ç‚¹æŸ¥è¯¢</a></li><li><a href="#%E4%BE%8B%E9%A2%98-1">ä¾‹é¢˜</a></li></ul></li><li><a href="#%E7%B1%BB%E5%9E%8B%E4%B8%89-%E5%8C%BA%E9%97%B4%E4%BF%AE%E6%94%B9%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2">ç±»å‹ä¸‰ï¼š åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</a><ul><li><a href="#%E5%8C%BA%E9%97%B4%E4%BF%AE%E6%94%B9-1">åŒºé—´ä¿®æ”¹</a></li><li><a href="#%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2-1">åŒºé—´æŸ¥è¯¢</a></li><li><a href="#%E4%BE%8B%E9%A2%98-2">ä¾‹é¢˜</a></li></ul></li></ul><!-- /TOC --><h3 id="çº¿æ®µæ ‘"><a class="markdownIt-Anchor" href="#çº¿æ®µæ ‘"></a> çº¿æ®µæ ‘</h3><blockquote><p>èƒ½æŠŠå¯¹åŒºé—´çš„ä¿®æ”¹ã€æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ç”± O(n) å˜ä¸º O(logn)</p></blockquote><p>çº¿æ®µæ ‘å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ªç»“æ„ä½“<code>node</code>ä¿å­˜</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">struct <span class="hljs-keyword">node</span><br><span class="hljs-title">&#123;</span><br><span class="hljs-title">int</span> l,r,sum;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>l</code>å’Œ<code>r</code>è¡¨ç¤ºçº¿æ®µçš„å·¦å³ç«¯ç‚¹ï¼Œ<code>sum</code>è¡¨ç¤ºçº¿æ®µçš„å’Œ</p><p>å¦‚æœç”¨æ•°ç»„å­˜å‚¨ï¼Œä¸€æ£µäºŒå‰æ ‘ï¼Œå·¦å­©å­ä¸‹æ ‡ä¸º<code>2*i</code>ï¼Œå³å­©å­ä¸‹æ ‡ä¸º<code>2*i+1</code><br />å› æ­¤ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„<code>sum</code>å€¼ä¸ºï¼š<code>tree[i].sum=tree[2*i].sum+tree[2*i+1].sum</code></p><h4 id="é€’å½’å»ºæ ‘"><a class="markdownIt-Anchor" href="#é€’å½’å»ºæ ‘"></a> é€’å½’å»ºæ ‘</h4><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stan"><span class="hljs-type">void</span> build(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)<br>&#123;<br><span class="hljs-comment">//i:å½“å‰èŠ‚ç‚¹ç¼–å· l:å·¦ç«¯ç‚¹ r:å³ç«¯ç‚¹ </span><br>tree[i].l=l;<br>tree[i].r=r;<br><span class="hljs-comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œèµ‹å€¼å¹¶è¿”å› </span><br><span class="hljs-keyword">if</span>(l==r)<br>&#123;<br>tree[i].<span class="hljs-built_in">sum</span>=<span class="hljs-type">array</span>[l];<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-type">int</span> mid=(l+r)/<span class="hljs-number">2</span>;<br>build(<span class="hljs-number">2</span>*i,l,mid);<span class="hljs-comment">//å»ºå·¦å­æ ‘ </span><br>build(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<span class="hljs-comment">//å»ºå³å­æ ‘ </span><br><span class="hljs-comment">//æ›´æ–°çº¿æ®µå’Œ </span><br>tree[i].<span class="hljs-built_in">sum</span>=tree[<span class="hljs-number">2</span>*i].<span class="hljs-built_in">sum</span>+tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-built_in">sum</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç±»å‹ä¸€å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#ç±»å‹ä¸€å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"></a> ç±»å‹ä¸€ï¼šå•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</h3><p>å•ç‚¹ä¿®æ”¹ï¼šç»™ç¬¬<code>idx</code>ä¸ªæ•°åŠ <code>k</code><br />åŒºé—´æŸ¥è¯¢ï¼šè¾“å‡ºåŒºé—´[x,y]å†…æ‰€æœ‰æ•°çš„å’Œ</p><h4 id="å•ç‚¹ä¿®æ”¹"><a class="markdownIt-Anchor" href="#å•ç‚¹ä¿®æ”¹"></a> å•ç‚¹ä¿®æ”¹</h4><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">void</span> mod1(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> idx,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-keyword">if</span>(tree[i].l==tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(idx&lt;=mid)<br>mod1(<span class="hljs-number">2</span>*i,idx,k);<br><span class="hljs-keyword">else</span><br>mod1(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,idx,k);<br><span class="hljs-comment">//æ›´æ–°çº¿æ®µå’Œ</span><br>tree[i].<span class="hljs-keyword">sum</span>=tree[<span class="hljs-number">2</span>*i].<span class="hljs-keyword">sum</span>+tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-keyword">sum</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŒºé—´æŸ¥è¯¢"></a> åŒºé—´æŸ¥è¯¢</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//åŒºé—´æŸ¥è¯¢</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query1</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å¦‚æœå½“å‰åŒºé—´å®Œå…¨è¢«æŸ¥è¯¢åŒºé—´åŒ…æ‹¬ï¼Œè¿”å›å½“å‰åŒºé—´çš„å’Œ </span><br><span class="hljs-keyword">if</span>(tree[i].l&gt;=l&amp;&amp;tree[i].r&lt;=r)<br><span class="hljs-keyword">return</span> tree[i].sum;<br><span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-comment">//å¦‚æœå·¦å­©å­åŒºé—´ä¸æŸ¥è¯¢åŒºé—´ç›¸äº¤ï¼Œè¿›å…¥å·¦å­æ ‘ </span><br><span class="hljs-keyword">if</span>(l&lt;=mid)<br>res+=<span class="hljs-built_in">query1</span>(<span class="hljs-number">2</span>*i,l,r);<br><span class="hljs-comment">//å¦‚æœå³å­©å­åŒºé—´ä¸æŸ¥è¯¢åŒºé—´ç›¸äº¤ï¼Œè¿›å…¥å³å­æ ‘</span><br><span class="hljs-keyword">if</span>(r&gt;mid)<br>res+=<span class="hljs-built_in">query1</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r);<br> <span class="hljs-keyword">return</span> res;<br>&#125; <br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h4><p><a href="https://www.luogu.com.cn/problem/P3374">P3374 ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 1</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>å¦‚é¢˜ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ï¼Œä½ éœ€è¦è¿›è¡Œä¸‹é¢ä¸¤ç§æ“ä½œï¼š</p><ul><li><p>å°†æŸä¸€ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span></p></li><li><p>æ±‚å‡ºæŸåŒºé—´æ¯ä¸€ä¸ªæ•°çš„å’Œ</p></li></ul><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n,m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span></span></span></span>ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥æ•°åˆ—æ•°å­—çš„ä¸ªæ•°å’Œæ“ä½œçš„æ€»ä¸ªæ•°ã€‚</p><p>ç¬¬äºŒè¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ä¸ªæ•°å­—è¡¨ç¤ºæ•°åˆ—ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> é¡¹çš„åˆå§‹å€¼ã€‚</p><p>æ¥ä¸‹æ¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> è¡Œæ¯è¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><p><code>1 x k</code>  å«ä¹‰ï¼šå°†ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></p></li><li><p><code>2 x y</code>  å«ä¹‰ï¼šè¾“å‡ºåŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x,y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span> å†…æ¯ä¸ªæ•°çš„å’Œ</p></li></ul><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œæ•´æ•°ï¼Œå³ä¸ºæ‰€æœ‰æ“ä½œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> çš„ç»“æœã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> -<span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">14<br>16<br></code></pre></td></tr></table></figure><p><strong>ã€æ•°æ®èŒƒå›´ã€‘</strong></p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo>â‰¤</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">1 \le n \le 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>m</mi><mo>â‰¤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">1\le m \le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>ï¼›<br />å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>70</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">70\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">7</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">1\le n,m \le 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>ï¼›<br />å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>â‰¤</mo><mn>5</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1\le n,m \le 5\times 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>acä»£ç </p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-type">int</span> nums[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br><span class="hljs-type">int</span> l,r,sum;<br>&#125;tree[<span class="hljs-number">4</span>*N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//i:å½“å‰èŠ‚ç‚¹ç¼–å· l:å·¦ç«¯ç‚¹ r:å³ç«¯ç‚¹ </span><br>tree[i].l=l;<br>tree[i].r=r;<br><span class="hljs-comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œèµ‹å€¼å¹¶è¿”å› </span><br><span class="hljs-keyword">if</span>(l==r)<br>&#123;<br>tree[i].sum=nums[l];<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-type">int</span> mid=(l+r)/<span class="hljs-number">2</span>;<br><span class="hljs-built_in">build</span>(<span class="hljs-number">2</span>*i,l,mid);<span class="hljs-comment">//å»ºå·¦å­æ ‘ </span><br><span class="hljs-built_in">build</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<span class="hljs-comment">//å»ºå³å­æ ‘ </span><br><span class="hljs-comment">//æ›´æ–°çº¿æ®µå’Œ </span><br>tree[i].sum=tree[<span class="hljs-number">2</span>*i].sum+tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-comment">//å•ç‚¹ä¿®æ”¹ </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mod1</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> idx,<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(tree[i].l==tree[i].r)<br>&#123;<br>tree[i].sum+=k;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-type">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(idx&lt;=mid)<br><span class="hljs-built_in">mod1</span>(<span class="hljs-number">2</span>*i,idx,k);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">mod1</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,idx,k);<br><span class="hljs-comment">//æ›´æ–°çº¿æ®µå’Œ</span><br>tree[i].sum=tree[<span class="hljs-number">2</span>*i].sum+tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-comment">//åŒºé—´æŸ¥è¯¢</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query1</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å¦‚æœå½“å‰åŒºé—´å®Œå…¨è¢«æŸ¥è¯¢åŒºé—´åŒ…æ‹¬ï¼Œè¿”å›å½“å‰åŒºé—´çš„å’Œ </span><br><span class="hljs-keyword">if</span>(tree[i].l&gt;=l&amp;&amp;tree[i].r&lt;=r)<br><span class="hljs-keyword">return</span> tree[i].sum;<br><span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-comment">//å¦‚æœå·¦å­©å­åŒºé—´ä¸æŸ¥è¯¢åŒºé—´ç›¸äº¤ï¼Œè¿›å…¥å·¦å­æ ‘ </span><br><span class="hljs-keyword">if</span>(l&lt;=mid)<br>res+=<span class="hljs-built_in">query1</span>(<span class="hljs-number">2</span>*i,l,r);<br><span class="hljs-comment">//å¦‚æœå³å­©å­åŒºé—´ä¸æŸ¥è¯¢åŒºé—´ç›¸äº¤ï¼Œè¿›å…¥å³å­æ ‘</span><br><span class="hljs-keyword">if</span>(r&gt;mid)<br>res+=<span class="hljs-built_in">query1</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r);<br> <span class="hljs-keyword">return</span> res;<br>&#125; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n,m;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;nums[i];<br><span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-type">int</span> op,a,b;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;op&gt;&gt;a&gt;&gt;b;<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)<br><span class="hljs-built_in">mod1</span>(<span class="hljs-number">1</span>,a,b);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(op==<span class="hljs-number">2</span>)<br>cout&lt;&lt;<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,a,b)&lt;&lt;endl;<br>&#125; <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><h3 id="ç±»å‹äºŒåŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#ç±»å‹äºŒåŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"></a> ç±»å‹äºŒï¼šåŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢</h3><p>åŒºé—´ä¿®æ”¹ï¼šç»™åŒºé—´<code>[a,b]</code>æ¯ä¸ªæ•°åŠ k<br />å•ç‚¹æŸ¥è¯¢ï¼šæŸ¥è¯¢ç¬¬<code>x</code>ä¸ªæ•°çš„å€¼</p><p>æ€è·¯ï¼šæŠŠä¿®æ”¹åŒºé—´æ‰€è¦†ç›–çš„åŒºé—´åŠ kï¼Œç„¶åå•ç‚¹æŸ¥è¯¢æ—¶ä»ä¸Šåˆ°ä¸‹å°†æ‰€æœ‰kç›¸åŠ </p><h4 id="åŒºé—´ä¿®æ”¹"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹"></a> åŒºé—´ä¿®æ”¹</h4><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">void</span> <span class="hljs-keyword">mod</span>(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-comment">//å®Œå…¨åœ¨åŒºé—´å†…ï¼Œ+k </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-comment">//è½åœ¨å·¦åŒºé—´ </span><br><span class="hljs-keyword">if</span>(l&lt;=mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i,l,r,k);<br><span class="hljs-comment">//è½åœ¨å³åŒºé—´ </span><br><span class="hljs-keyword">if</span>(r&gt;mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r,k);<br>&#125; <br></code></pre></td></tr></table></figure><h4 id="å•ç‚¹æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å•ç‚¹æŸ¥è¯¢"></a> å•ç‚¹æŸ¥è¯¢</h4><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-built_in">int</span> query(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> x)<br>&#123;<br><span class="hljs-comment">//ä»ä¸Šåˆ°ä¸‹è®¡ç®—æ‰€æœ‰kçš„å’Œ </span><br><span class="hljs-keyword">if</span>(tree[i].l==tree[i].r)<br><span class="hljs-keyword">return</span> tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> res=tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(x&lt;=mid)<br>res+=query(<span class="hljs-number">2</span>*i,x);<br><span class="hljs-keyword">else</span><br>res+=query(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,x);<br><span class="hljs-keyword">return</span> res;<br>&#125; <br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜-2"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜-2"></a> ä¾‹é¢˜</h4><p><a href="https://www.luogu.com.cn/problem/P3368">P3368 æ ‘çŠ¶æ•°ç»„ 2</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>å¦‚é¢˜ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ï¼Œä½ éœ€è¦è¿›è¡Œä¸‹é¢ä¸¤ç§æ“ä½œï¼š</p><ol><li><p>å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>ï¼›</p></li><li><p>æ±‚å‡ºæŸä¸€ä¸ªæ•°çš„å€¼ã€‚</p></li></ol><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥æ•°åˆ—æ•°å­—çš„ä¸ªæ•°å’Œæ“ä½œçš„æ€»ä¸ªæ•°ã€‚</p><p>ç¬¬äºŒè¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ä¸ªæ•°å­—è¡¨ç¤ºæ•°åˆ—ç¬¬ $i $ é¡¹çš„åˆå§‹å€¼ã€‚</p><p>æ¥ä¸‹æ¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> è¡Œæ¯è¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p>æ“ä½œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼š æ ¼å¼ï¼š<code>1 x y k</code> å«ä¹‰ï¼šå°†åŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x,y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span> å†…æ¯ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>ï¼›</p><p>æ“ä½œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>ï¼š æ ¼å¼ï¼š<code>2 x</code> å«ä¹‰ï¼šè¾“å‡ºç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ªæ•°çš„å€¼ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œæ•´æ•°ï¼Œå³ä¸ºæ‰€æœ‰æ“ä½œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> çš„ç»“æœã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">5</span> -<span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">6<br>10<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-built_in">int</span> nums[N];<br>struct node<br>&#123;<br><span class="hljs-built_in">int</span> l,r,<span class="hljs-keyword">sum</span>;<br>&#125;tree[<span class="hljs-number">4</span>*N];<br><span class="hljs-keyword">void</span> build(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r)<br>&#123;<br>tree[i].l=l;<br>tree[i].r=r;<br>tree[i].<span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>; <br><span class="hljs-comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œèµ‹å€¼å¹¶è¿”å› </span><br><span class="hljs-keyword">if</span>(l==r)<br><span class="hljs-keyword">return</span>; <br><span class="hljs-built_in">int</span> mid=(l+r)/<span class="hljs-number">2</span>;<br>build(<span class="hljs-number">2</span>*i,l,mid);<span class="hljs-comment">//å»ºå·¦å­æ ‘ </span><br>build(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<span class="hljs-comment">//å»ºå³å­æ ‘ </span><br>&#125;<br><br><span class="hljs-comment">//åŒºé—´ä¿®æ”¹</span><br><span class="hljs-keyword">void</span> <span class="hljs-keyword">mod</span>(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-comment">//å®Œå…¨åœ¨åŒºé—´å†…ï¼Œ+k </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-comment">//è½åœ¨å·¦åŒºé—´ </span><br><span class="hljs-keyword">if</span>(l&lt;=mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i,l,r,k);<br><span class="hljs-comment">//è½åœ¨å³åŒºé—´ </span><br><span class="hljs-keyword">if</span>(r&gt;mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r,k);<br>&#125; <br><span class="hljs-comment">//å•ç‚¹æŸ¥è¯¢</span><br><span class="hljs-built_in">int</span> query(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> x)<br>&#123;<br><span class="hljs-comment">//ä»ä¸Šåˆ°ä¸‹è®¡ç®—æ‰€æœ‰kçš„å’Œ </span><br><span class="hljs-keyword">if</span>(tree[i].l==tree[i].r)<br><span class="hljs-keyword">return</span> tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> res=tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(x&lt;=mid)<br>res+=query(<span class="hljs-number">2</span>*i,x);<br><span class="hljs-keyword">else</span><br>res+=query(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,x);<br><span class="hljs-keyword">return</span> res;<br>&#125; <br><span class="hljs-built_in">int</span> main()<br>&#123;<br><span class="hljs-built_in">int</span> n,m;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;nums[i];<br>build(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-built_in">int</span> op,a,b,c;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;op;<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)<br>&#123;<br>cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">1</span>,a,b,c);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(op==<span class="hljs-number">2</span>)<br>&#123;<br>cin&gt;&gt;a;<br>cout&lt;&lt;query(<span class="hljs-number">1</span>,a)+nums[a]&lt;&lt;endl; <br>&#125;<br>&#125; <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><p><strong>æ•°æ®è§„æ¨¡ä¸çº¦å®š</strong></p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¤</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">N\le8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>â‰¤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">M\le10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>ï¼›</p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>70</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">70\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">7</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>â‰¤</mo><mn>10000</mn></mrow><annotation encoding="application/x-tex">N\le 10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>â‰¤</mo><mn>10000</mn></mrow><annotation encoding="application/x-tex">M\le10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ï¼›</p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>N</mi><mo separator="true">,</mo><mi>M</mi><mo>â‰¤</mo><mn>500000</mn></mrow><annotation encoding="application/x-tex">1 \leq N, M\le 500000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \leq x, y \leq n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ï¼Œä¿è¯ä»»æ„æ—¶åˆ»åºåˆ—ä¸­ä»»æ„å…ƒç´ çš„ç»å¯¹å€¼éƒ½ä¸å¤§äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>30</mn></msup></mrow><annotation encoding="application/x-tex">2^{30}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>acä»£ç ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-built_in">int</span> nums[N];<br>struct node<br>&#123;<br><span class="hljs-built_in">int</span> l,r,<span class="hljs-keyword">sum</span>;<br>&#125;tree[<span class="hljs-number">4</span>*N];<br><span class="hljs-keyword">void</span> build(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r)<br>&#123;<br>tree[i].l=l;<br>tree[i].r=r;<br>tree[i].<span class="hljs-keyword">sum</span>=<span class="hljs-number">0</span>; <br><span class="hljs-comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œèµ‹å€¼å¹¶è¿”å› </span><br><span class="hljs-keyword">if</span>(l==r)<br><span class="hljs-keyword">return</span>; <br><span class="hljs-built_in">int</span> mid=(l+r)/<span class="hljs-number">2</span>;<br>build(<span class="hljs-number">2</span>*i,l,mid);<span class="hljs-comment">//å»ºå·¦å­æ ‘ </span><br>build(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<span class="hljs-comment">//å»ºå³å­æ ‘ </span><br>&#125;<br><br><span class="hljs-comment">//åŒºé—´ä¿®æ”¹</span><br><span class="hljs-keyword">void</span> <span class="hljs-keyword">mod</span>(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-comment">//å®Œå…¨åœ¨åŒºé—´å†…ï¼Œ+k </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-comment">//è½åœ¨å·¦åŒºé—´ </span><br><span class="hljs-keyword">if</span>(l&lt;=mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i,l,r,k);<br><span class="hljs-comment">//è½åœ¨å³åŒºé—´ </span><br><span class="hljs-keyword">if</span>(r&gt;mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r,k);<br>&#125; <br><span class="hljs-comment">//å•ç‚¹æŸ¥è¯¢</span><br><span class="hljs-built_in">int</span> query(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> x)<br>&#123;<br><span class="hljs-comment">//ä»ä¸Šåˆ°ä¸‹è®¡ç®—æ‰€æœ‰kçš„å’Œ </span><br><span class="hljs-keyword">if</span>(tree[i].l==tree[i].r)<br><span class="hljs-keyword">return</span> tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> res=tree[i].<span class="hljs-keyword">sum</span>;<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(x&lt;=mid)<br>res+=query(<span class="hljs-number">2</span>*i,x);<br><span class="hljs-keyword">else</span><br>res+=query(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,x);<br><span class="hljs-keyword">return</span> res;<br>&#125; <br><span class="hljs-built_in">int</span> main()<br>&#123;<br><span class="hljs-built_in">int</span> n,m;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;nums[i];<br>build(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-built_in">int</span> op,a,b,c;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;op;<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)<br>&#123;<br>cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">1</span>,a,b,c);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(op==<span class="hljs-number">2</span>)<br>&#123;<br>cin&gt;&gt;a;<br>cout&lt;&lt;query(<span class="hljs-number">1</span>,a)+nums[a]&lt;&lt;endl; <br>&#125;<br>&#125; <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><h3 id="ç±»å‹ä¸‰-åŒºé—´ä¿®æ”¹åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#ç±»å‹ä¸‰-åŒºé—´ä¿®æ”¹åŒºé—´æŸ¥è¯¢"></a> ç±»å‹ä¸‰ï¼š åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</h3><p>éœ€è¦å®šä¹‰ä¸€ä¸ªæ‡’æ ‡è®°ï¼Œç„¶åæ¯æ¬¡ä¿®æ”¹æˆ–æŸ¥è¯¢éœ€è¦è¿›è¡Œ<code>pushdown</code></p><p>pushdownæ­¥éª¤ï¼š</p><ul><li>å½“å‰èŠ‚ç‚¹æ‡’æ ‡è®°ä¸ä¸º0æ—¶ï¼Œç»™å·¦å³å­èŠ‚ç‚¹çš„æ‡’æ ‡è®°åŠ ä¸Šçˆ¶äº²çš„æ‡’æ ‡è®°</li><li>æ›´æ–°å·¦å³å­èŠ‚ç‚¹çš„sum</li><li>çˆ¶èŠ‚ç‚¹çš„æ‡’æ ‡è®°ç½®0</li></ul><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">void pushdown(int i)<br>&#123;<br>if(tree<span class="hljs-comment">[i]</span>.lz)<br>&#123;<br>tree<span class="hljs-comment">[2*i]</span>.lz+=tree<span class="hljs-comment">[i]</span>.lz;<br>tree<span class="hljs-comment">[2*i+1]</span>.lz+=tree<span class="hljs-comment">[i]</span>.lz;<br>int mid=tree<span class="hljs-comment">[i]</span>.l+tree<span class="hljs-comment">[i]</span>.r&gt;&gt;1;<br>tree<span class="hljs-comment">[2*i]</span>.sum+=tree<span class="hljs-comment">[i]</span>.lz*(mid-tree<span class="hljs-comment">[i]</span>.l+1);<br>tree<span class="hljs-comment">[2*i+1]</span>.sum+=tree<span class="hljs-comment">[i]</span>.lz*(tree<span class="hljs-comment">[i]</span>.r-mid);<br>tree<span class="hljs-comment">[i]</span>.lz=0;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŒºé—´ä¿®æ”¹-2"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹-2"></a> åŒºé—´ä¿®æ”¹</h4><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">void</span> <span class="hljs-keyword">mod</span>(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-comment">//åŒºé—´è¢«å®Œå…¨åŒ…æ‹¬ï¼Œæ›´æ–°sumï¼Œlz </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k*(tree[i].r-tree[i].l+<span class="hljs-number">1</span>);<br>tree[i].lz+=k;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>pushdown(i);<br><span class="hljs-built_in">int</span> mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(l&lt;=mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i,l,r,k);<br><span class="hljs-keyword">if</span>(r&gt;mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r,k);<br><span class="hljs-comment">//æ›´æ–°å’Œ</span><br>tree[i].<span class="hljs-keyword">sum</span>=tree[<span class="hljs-number">2</span>*i].<span class="hljs-keyword">sum</span> +tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-keyword">sum</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŒºé—´æŸ¥è¯¢-2"><a class="markdownIt-Anchor" href="#åŒºé—´æŸ¥è¯¢-2"></a> åŒºé—´æŸ¥è¯¢</h4><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">int</span> query(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r)<br>&#123;<br>//åŒºé—´è¢«å®Œå…¨åŒ…æ‹¬ï¼Œè¿”å›<span class="hljs-built_in">sum</span> <br><span class="hljs-built_in">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>return tree[i].<span class="hljs-built_in">sum</span>;<br>pushdown(i);<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">mid</span>=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">int</span> res=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">if</span>(l&lt;=<span class="hljs-built_in">mid</span>)<br>res+=query(<span class="hljs-number">2</span>*i,l,r);<br><span class="hljs-built_in">if</span>(r&gt;<span class="hljs-built_in">mid</span>)<br>res+=query(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r);<br>return res;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜-3"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜-3"></a> ä¾‹é¢˜</h4><p><a href="https://www.luogu.com.cn/problem/P3372">P3372ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 1</a></p><p><strong>é¢˜ç›®æè¿°</strong></p><p>å¦‚é¢˜ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ï¼Œä½ éœ€è¦è¿›è¡Œä¸‹é¢ä¸¤ç§æ“ä½œï¼š</p><ol><li>å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>ã€‚</li><li>æ±‚å‡ºæŸåŒºé—´æ¯ä¸€ä¸ªæ•°çš„å’Œã€‚</li></ol><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n, m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span></span></span></span>ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥æ•°åˆ—æ•°å­—çš„ä¸ªæ•°å’Œæ“ä½œçš„æ€»ä¸ªæ•°ã€‚</p><p>ç¬¬äºŒè¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> ä¸ªæ•°å­—è¡¨ç¤ºæ•°åˆ—ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> é¡¹çš„åˆå§‹å€¼ã€‚</p><p>æ¥ä¸‹æ¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> è¡Œæ¯è¡ŒåŒ…å« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span> ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ol><li><code>1 x y k</code>ï¼šå°†åŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x, y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span> å†…æ¯ä¸ªæ•°åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>ã€‚</li><li><code>2 x y</code>ï¼šè¾“å‡ºåŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x, y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span> å†…æ¯ä¸ªæ•°çš„å’Œã€‚</li></ol><p><strong>è¾“å‡ºæ ¼å¼</strong><br />è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œæ•´æ•°ï¼Œå³ä¸ºæ‰€æœ‰æ“ä½œ 2 çš„ç»“æœã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">5</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">11<br>8<br>20<br></code></pre></td></tr></table></figure><p><strong>æç¤º</strong></p><p>å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¤</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">n \le 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>â‰¤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">m \le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>ã€‚<br />å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>70</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">70\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">7</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¤</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">n \le {10}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>â‰¤</mo><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">m \le {10}^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>ã€‚<br />å¯¹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> çš„æ•°æ®ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>â‰¤</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n, m \le {10}^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>ä¿è¯ä»»æ„æ—¶åˆ»æ•°åˆ—ä¸­æ‰€æœ‰å…ƒç´ çš„ç»å¯¹å€¼ä¹‹å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¤</mo><msup><mn>10</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">\le {10}^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.848448em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.848448em;"><span style="top:-3.09734em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>acä»£ç ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br>typedef <span class="hljs-built_in">long</span> <span class="hljs-built_in">long</span> ll;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">2</span>;<br><span class="hljs-built_in">int</span> nums[N];<br>struct node<br>&#123;<br>ll l,r,<span class="hljs-keyword">sum</span>,lz;<br>&#125;tree[<span class="hljs-number">4</span>*N];<br><span class="hljs-keyword">void</span> build(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r)<br>&#123; <br>tree[i].l=l;<br>tree[i].r=r;<br>tree[i].lz=<span class="hljs-number">0</span>;<br><span class="hljs-comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œèµ‹å€¼å¹¶è¿”å› </span><br><span class="hljs-keyword">if</span>(l==r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>=nums[l];<br><span class="hljs-keyword">return</span>;<br>&#125;<br>ll mid=(l+r)/<span class="hljs-number">2</span>;<br>build(<span class="hljs-number">2</span>*i,l,mid);<span class="hljs-comment">//å»ºå·¦å­æ ‘ </span><br>build(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<span class="hljs-comment">//å»ºå³å­æ ‘ </span><br><span class="hljs-comment">//æ›´æ–°çº¿æ®µå’Œ </span><br>tree[i].<span class="hljs-keyword">sum</span>=tree[<span class="hljs-number">2</span>*i].<span class="hljs-keyword">sum</span>+tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-keyword">sum</span>;<br>&#125;<br><span class="hljs-keyword">void</span> pushdown(<span class="hljs-built_in">int</span> i)<br>&#123;<br><span class="hljs-keyword">if</span>(tree[i].lz)<br>&#123;<br>tree[<span class="hljs-number">2</span>*i].lz+=tree[i].lz;<br>tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].lz+=tree[i].lz;<br>ll mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br>tree[<span class="hljs-number">2</span>*i].<span class="hljs-keyword">sum</span>+=tree[i].lz*(mid-tree[i].l+<span class="hljs-number">1</span>);<br>tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-keyword">sum</span>+=tree[i].lz*(tree[i].r-mid);<br>tree[i].lz=<span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">void</span> <span class="hljs-keyword">mod</span>(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> k)<br>&#123;<br><span class="hljs-comment">//åŒºé—´è¢«å®Œå…¨åŒ…æ‹¬ï¼Œæ›´æ–°sumï¼Œlz </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br>&#123;<br>tree[i].<span class="hljs-keyword">sum</span>+=k*(tree[i].r-tree[i].l+<span class="hljs-number">1</span>);<br>tree[i].lz+=k;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>pushdown(i);<br>ll mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(l&lt;=mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i,l,r,k);<br><span class="hljs-keyword">if</span>(r&gt;mid)<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r,k);<br><span class="hljs-comment">//æ›´æ–°å’Œ</span><br>tree[i].<span class="hljs-keyword">sum</span>=tree[<span class="hljs-number">2</span>*i].<span class="hljs-keyword">sum</span> +tree[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>].<span class="hljs-keyword">sum</span>;<br>&#125;<br>ll query(<span class="hljs-built_in">int</span> i,<span class="hljs-built_in">int</span> l,<span class="hljs-built_in">int</span> r)<br>&#123;<br><span class="hljs-comment">//åŒºé—´è¢«å®Œå…¨åŒ…æ‹¬ï¼Œè¿”å›sum </span><br><span class="hljs-keyword">if</span>(l&lt;=tree[i].l&amp;&amp;r&gt;=tree[i].r)<br><span class="hljs-keyword">return</span> tree[i].<span class="hljs-keyword">sum</span>;<br>pushdown(i);<br>ll mid=tree[i].l+tree[i].r&gt;&gt;<span class="hljs-number">1</span>;<br>ll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(l&lt;=mid)<br>res+=query(<span class="hljs-number">2</span>*i,l,r);<br><span class="hljs-keyword">if</span>(r&gt;mid)<br>res+=query(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>,l,r);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-built_in">int</span> main()<br>&#123;<br><span class="hljs-built_in">int</span> n,m;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cin&gt;&gt;nums[i];<br>build(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-built_in">int</span> op,a,b,c;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;op;<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)<br>&#123;<br>cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br><span class="hljs-keyword">mod</span>(<span class="hljs-number">1</span>,a,b,c);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(op==<span class="hljs-number">2</span>)<br>&#123;<br>cin&gt;&gt;a&gt;&gt;b;<br>cout&lt;&lt;query(<span class="hljs-number">1</span>,a,b)&lt;&lt;endl;<br>&#125;<br>&#125; <br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿›åˆ¶è½¬æ¢ä¸å¤§é˜¶ä¹˜</title>
    <link href="/2022/08/27/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E5%A4%A7%E9%98%B6%E4%B9%98/"/>
    <url>/2022/08/27/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E5%A4%A7%E9%98%B6%E4%B9%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2">è¿›åˆ¶è½¬æ¢</a><ul><li><a href="#%E9%A2%98%E7%9B%AE">é¢˜ç›®</a></li></ul></li><li><a href="#%E5%A4%A7%E9%98%B6%E4%B9%98">å¤§é˜¶ä¹˜</a><ul><li><a href="#%E9%A2%98%E7%9B%AE-1">é¢˜ç›®</a></li></ul></li></ul><!-- /TOC --><h3 id="è¿›åˆ¶è½¬æ¢"><a class="markdownIt-Anchor" href="#è¿›åˆ¶è½¬æ¢"></a> è¿›åˆ¶è½¬æ¢</h3><blockquote><p>ä¸‹é¢çš„æ¨¡æ¿å¯ç”¨äº36ä»¥å†…è¿›åˆ¶ä»»æ„è½¬æ¢</p></blockquote><h4 id="é¢˜ç›®"><a class="markdownIt-Anchor" href="#é¢˜ç›®"></a> é¢˜ç›®</h4><p>å°†Mè¿›åˆ¶çš„æ•°Xè½¬æ¢ä¸ºNè¿›åˆ¶çš„æ•°è¾“å‡ºã€‚<br />è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…æ‹¬ä¸¤ä¸ªæ•´æ•°ï¼šMå’ŒN(2&lt;=M,N&lt;=36)ã€‚<br />ä¸‹é¢çš„ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°Xï¼ŒXæ˜¯Mè¿›åˆ¶çš„æ•°ï¼Œç°åœ¨è¦æ±‚ä½ å°†Mè¿›åˆ¶çš„æ•°Xè½¬æ¢æˆNè¿›åˆ¶çš„æ•°è¾“å‡ºã€‚</p><p>input:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">36</span> <span class="hljs-number">9</span><br><span class="hljs-attribute">XYZZA765</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">10374545654665<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">std</span>;<br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">convert</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s,<span class="hljs-built_in">int</span> a,<span class="hljs-built_in">int</span> b</span>)</span><br>&#123;<br>    <span class="hljs-built_in">int</span> len=s.size();<br>    <span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">string</span> res;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        <span class="hljs-built_in">int</span> k=<span class="hljs-number">0</span>,t=<span class="hljs-number">0</span>,tmp1=<span class="hljs-number">0</span>,tmp2=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=i;j&lt;len;++j)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(s[j]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;s[j]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>)<br>                tmp1=s[j]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>            <span class="hljs-keyword">else</span><br>                tmp1=s[j]-<span class="hljs-string">&#x27;A&#x27;</span>+<span class="hljs-number">10</span>;<br>            <span class="hljs-built_in">int</span> t=k*a+tmp1;<br>            k=t%b;<br>            tmp2=t/b;<br>            <span class="hljs-keyword">if</span>(tmp2&lt;=<span class="hljs-number">9</span>)<br>                s[j]=tmp2+<span class="hljs-string">&#x27;0&#x27;</span>;<br>            <span class="hljs-keyword">else</span><br>                s[j]=tmp2<span class="hljs-number">-10</span>+<span class="hljs-string">&#x27;A&#x27;</span>;<br>            <br>        &#125;<br>        <span class="hljs-keyword">if</span>(k&lt;=<span class="hljs-number">9</span>)<br>            res+=k+<span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-keyword">else</span><br>            res+=k<span class="hljs-number">-10</span>+<span class="hljs-string">&#x27;A&#x27;</span>;<br>        <span class="hljs-keyword">while</span>(s[i]==<span class="hljs-string">&#x27;0&#x27;</span>)<br>            ++i;<br>    &#125;<br>    reverse(res.begin(),res.end());<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">main</span>()</span><br>&#123;<br>    <span class="hljs-built_in">int</span> m,n;<br>    <span class="hljs-built_in">string</span> s;<br>    cin&gt;&gt;m&gt;&gt;n;<br>    cin&gt;&gt;s;<br>    cout&lt;&lt;convert(s,m,n)&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="å¤§é˜¶ä¹˜"><a class="markdownIt-Anchor" href="#å¤§é˜¶ä¹˜"></a> å¤§é˜¶ä¹˜</h3><h4 id="é¢˜ç›®-2"><a class="markdownIt-Anchor" href="#é¢˜ç›®-2"></a> é¢˜ç›®</h4><p>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°Nï¼Œè¾“å‡ºNçš„é˜¶ä¹˜<br />N&lt;=1000</p><p>input:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">1000</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">402387260077093773543702433923003985719374864210714632543799910429938512398629020592044208486969404800479988610197196058631666872994808558901323829669944590997424504087073759918823627727188732519779505950995276120874975462497043601418278094646496291056393887437886487337119181045825783647849977012476632889835955735432513185323958463075557409114262417474349347553428646576611667797396668820291207379143853719588249808126867838374559731746136085379534524221586593201928090878297308431392844403281231558611036976801357304216168747609675871348312025478589320767169132448426236131412508780208000261683151027341827977704784635868170164365024153691398281264810213092761244896359928705114964975419909342221566832572080821333186116811553615836546984046708975602900950537616475847728421889679646244945160765353408198901385442487984959953319101723355556602139450399736280750137837615307127761926849034352625200015888535147331611702103968175921510907788019393178114194545257223865541461062892187960223838971476088506276862967146674697562911234082439208160153780889893964518263243671616762179168909779911903754031274622289988005195444414282012187361745992642956581746628302955570299024324153181617210465832036786906117260158783520751516284225540265170483304226143974286933061690897968482590125458327168226458066526769958652682272807075781391858178889652208164348344825993266043367660176999612831860788386150279465955131156552036093988180612138558600301435694527224206344631797460594682573103790084024432438465657245014402821885252470935190620929023136493273497565513958720559654228749774011413346962715422845862377387538230483865688976461927383814900140767310446640259899490222221765904339901886018566526485061799702356193897017860040811889729918311021171229845901641921068884387121855646124960798722908519296819372388642614839657382291123125024186649353143970137428531926649875337218940694281434118520158014123344828015051399694290153483077644569099073152433278288269864602789864321139083506217095002597389863554277196742822248757586765752344220207573630569498825087968928162753848863396909959826280956121450994871701244516461260379029309120889086942028510640182154399457156805941872748998094254742173582401063677404595741785160829230135358081840096996372524230560855903700624271243416909004153690105933983835777939410970027753472000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<br></code></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>int a[100000];<br>int main()<br>&#123;<br>    int n;<br>    cin&gt;&gt;n; <br>    int <span class="hljs-attribute">ws</span>=1;<br>    a[0]=1;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=2;i&lt;=n;++i)<br>    &#123;<br>        int <span class="hljs-attribute">k</span>=0;<br>        <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">j</span>=0;j&lt;ws;++j)<br>        &#123;<br>            int <span class="hljs-attribute">t</span>=i*a[j]+k;<br>            <span class="hljs-attribute">k</span>=t/10;<br>            a[j]=t%10;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(k)<br>        &#123;<br>            a[ws]=k%10;<br>            k/=10;<br>            ++ws;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=ws-1;i&gt;=0;--i)<br>        cout&lt;&lt;a[i];<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸è§é—®é¢˜</title>
    <link href="/2022/08/26/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/26/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#java">Java</a><ul><li><a href="#jdkjre%E5%92%8Cjvm%E6%98%AF%E4%BB%80%E4%B9%88">JDKã€JREå’ŒJVMæ˜¯ä»€ä¹ˆï¼Ÿ</a><ul><li><a href="#jdk">JDK</a></li><li><a href="#jre">JRE</a></li><li><a href="#jvm">JVM</a></li></ul></li><li><a href="#%E5%AD%97%E8%8A%82%E7%A0%81">å­—èŠ‚ç </a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4java%E7%BC%96%E8%AF%91%E4%B8%8E%E8%A7%A3%E9%87%8A%E5%85%B1%E5%AD%98">ä¸ºä»€ä¹ˆè¯´Javaâ€œç¼–è¯‘ä¸è§£é‡Šå…±å­˜â€ï¼Ÿ</a></li><li><a href="#aot%E5%92%8Cjit">AOTå’ŒJIT</a></li><li><a href="#jvm%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F">JVMå†…å­˜åŒºåŸŸ</a><ul><li><a href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8">ç¨‹åºè®¡æ•°å™¨</a></li><li><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88">è™šæ‹Ÿæœºæ ˆ</a></li><li><a href="#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88">æœ¬åœ°æ–¹æ³•æ ˆ</a></li><li><a href="#%E5%A0%86">å †</a></li><li><a href="#%E6%96%B9%E6%B3%95%E5%8C%BA">æ–¹æ³•åŒº</a></li><li><a href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0">è¿è¡Œæ—¶å¸¸é‡æ± å’Œå­—ç¬¦ä¸²å¸¸é‡æ± </a></li><li><a href="#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98">ç›´æ¥å†…å­˜</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%B0%86%E6%B0%B8%E4%B9%85%E4%BB%A3%E6%9B%BF%E6%8D%A2%E4%B8%BA%E5%85%83%E7%A9%BA%E9%97%B4">ä¸ºä»€ä¹ˆè¦å°†æ°¸ä¹…ä»£æ›¿æ¢ä¸ºå…ƒç©ºé—´ï¼Ÿ</a></li></ul></li><li><a href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD">ç±»åŠ è½½</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B">ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6">ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6">å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</a></li><li><a href="#jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%BF%87%E7%A8%8B">JVMç±»åŠ è½½çš„è¿‡ç¨‹</a></li></ul></li><li><a href="#jvm%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">JVMåƒåœ¾å›æ”¶</a><ul><li><a href="#%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%92%8C%E5%9B%9E%E6%94%B6%E5%8E%9F%E5%88%99">å†…å­˜åˆ†é…å’Œå›æ”¶åŸåˆ™</a></li><li><a href="#minorgcmixedgcfullgc%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88">MinorGCã€MixedGCã€FullGCçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#fullgc%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%A7%A6%E5%8F%91">FullGCä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿ</a></li><li><a href="#%E6%AD%BB%E4%BA%A1%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95">æ­»äº¡å¯¹è±¡çš„åˆ¤æ–­æ–¹æ³•</a></li><li><a href="#gc-roots%E5%8C%85%E6%8B%AC%E5%93%AA%E4%BA%9B">GC RootsåŒ…æ‹¬å“ªäº›ï¼Ÿ</a></li><li><a href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95">åƒåœ¾å›æ”¶ç®—æ³•</a></li><li><a href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B">åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bg1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8">è¯¦ç»†ä»‹ç»ä¸€ä¸‹G1åƒåœ¾å›æ”¶å™¨</a></li><li><a href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8cms%E5%92%8Cg1%E7%9A%84%E5%8C%BA%E5%88%AB">åƒåœ¾å›æ”¶å™¨CMSå’ŒG1çš„åŒºåˆ«?</a></li><li><a href="#%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8">å¦‚ä½•é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨ï¼Ÿ</a></li></ul></li><li><a href="#jvm%E8%B0%83%E4%BC%98%E7%9A%84%E5%8F%82%E6%95%B0%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7">JVMè°ƒä¼˜çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ</a></li><li><a href="#java%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E7%9A%84%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF">Javaå†…å­˜æ³„æ¼çš„æ’æŸ¥æ€è·¯ï¼Ÿ</a></li><li><a href="#cpu%E9%A3%99%E5%8D%87%E7%9A%84%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF">CPUé£™å‡çš„æ’æŸ¥æ€è·¯ï¼Ÿ</a></li><li><a href="#jmm">JMM</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFjmm">ä»€ä¹ˆæ˜¯JMM?</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4jmm%E6%8A%BD%E8%B1%A1%E4%BA%86%E7%BA%BF%E7%A8%8B%E5%92%8C%E4%B8%BB%E5%86%85%E5%AD%98%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB">ä¸ºä»€ä¹ˆè¯´JMMæŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Ÿ</a></li><li><a href="#happens-before%E5%8E%9F%E5%88%99%E6%98%AF%E4%BB%80%E4%B9%88">happens-beforeåŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul></li><li><a href="#%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">åŸºç¡€æ•°æ®ç±»å‹</a></li><li><a href="#%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AD%A6%E7%94%9F%E7%B1%BB%E6%83%B3%E6%8C%89%E7%85%A7%E5%88%86%E6%95%B0%E6%8E%92%E5%BA%8F%E5%86%8D%E6%8C%89%E5%AD%A6%E5%8F%B7%E6%8E%92%E5%BA%8F%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%81%9A">æœ‰ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œæƒ³æŒ‰ç…§åˆ†æ•°æ’åºï¼Œå†æŒ‰å­¦å·æ’åºï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</a></li><li><a href="#java%E9%9B%86%E5%90%88">Javaé›†åˆ</a><ul><li><a href="#%E6%95%B0%E7%BB%84%E5%92%8C%E9%9B%86%E5%90%88%E7%9A%84%E5%8C%BA%E5%88%AB">æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#arraylist%E5%92%8Clinkedlist%E7%9A%84%E5%8C%BA%E5%88%AB">ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#list%E4%B8%AD%E9%81%8D%E5%8E%86%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E4%BC%9A%E6%9C%89%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98">Listä¸­éå†åˆ é™¤å…ƒç´ ä¼šæœ‰å“ªäº›é—®é¢˜ï¼Ÿ</a></li><li><a href="#arraylist%E7%9A%84%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88">ArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#copyonwritearraylist%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84">CopyonWriteArraylistæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</a></li><li><a href="#hashmap%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B">HashMapå®ç°åŸç†ä»‹ç»ä¸€ä¸‹ï¼Ÿ</a></li><li><a href="#hashmap%E4%B8%BA%E4%BB%80%E4%B9%88%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8">HashMapä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%E7%9A%84%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B">è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#hashmap%E7%9A%84put%E8%BF%87%E7%A8%8B">HashMapçš„putè¿‡ç¨‹ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88hashmap%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91%E4%B8%8D%E7%94%A8%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91">ä¸ºä»€ä¹ˆHashMapç”¨çº¢é»‘æ ‘ä¸ç”¨å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ</a></li><li><a href="#hashmap-key%E5%8F%AF%E4%BB%A5%E4%B8%BAnull%E5%90%97">HashMap keyå¯ä»¥ä¸ºnullå—ï¼Ÿ</a></li><li><a href="#%E9%87%8D%E5%86%99hashmap%E7%9A%84equals%E5%92%8Chashcode%E6%96%B9%E6%B3%95%E6%97%B6%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88">é‡å†™HashMapçš„equalså’ŒhashCodeæ–¹æ³•æ—¶ï¼Œè¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88hashmap%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%98%AF2%E7%9A%84%E5%B9%82%E6%AC%A1%E6%96%B9">ä¸ºä»€ä¹ˆHashMapçš„å¤§å°æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Ÿ</a></li><li><a href="#concurrenthashmap%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84">ConcurrentHashMapæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</a></li><li><a href="#%E5%88%86%E6%AE%B5%E9%94%81%E6%98%AF%E6%80%8E%E4%B9%88%E5%8A%A0%E9%94%81%E7%9A%84">åˆ†æ®µé”æ˜¯æ€ä¹ˆåŠ é”çš„ï¼Ÿ</a></li><li><a href="#concurrenthashmap%E7%94%A8%E7%9A%84%E6%98%AF%E4%B9%90%E8%A7%82%E9%94%81%E8%BF%98%E6%98%AF%E6%82%B2%E8%A7%82%E9%94%81">ConcurrentHashMapç”¨çš„æ˜¯ä¹è§‚é”è¿˜æ˜¯æ‚²è§‚é”ï¼Ÿ</a></li><li><a href="#hashtable%E5%92%8Cconcurrenthashmap%E7%9A%84%E5%8C%BA%E5%88%AB">hashtableå’ŒConcurrentHashMapçš„åŒºåˆ«ï¼Ÿ</a></li></ul></li><li><a href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1">é¢å‘å¯¹è±¡</a><ul><li><a href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E6%9C%89%E5%93%AA%E4%BA%9B">é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB">æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</a></li><li><a href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%8F%AF%E4%BB%A5%E8%A2%AB%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%90%97">æŠ½è±¡ç±»å¯ä»¥è¢«å®ä¾‹åŒ–å—ï¼Ÿ</a></li><li><a href="#java%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B">Javaæ·±æ‹·è´çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li></ul></li><li><a href="#java%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1">Javaä¸­çš„å¯¹è±¡</a><ul><li><a href="#java%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E5%BC%8F">Javaä¸­åˆ›å»ºå¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</a></li><li><a href="#new%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%9B%9E%E6%94%B6">newçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ</a></li></ul></li><li><a href="#%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6">åå°„æœºåˆ¶</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6">ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ</a></li><li><a href="#%E5%8F%8D%E5%B0%84%E5%9C%A8%E4%BD%A0%E5%B9%B3%E6%97%B6%E5%86%99%E4%BB%A3%E7%A0%81%E6%88%96%E8%80%85%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B">åå°„åœ¨ä½ å¹³æ—¶å†™ä»£ç æˆ–è€…æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›?</a></li></ul></li><li><a href="#java%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%8E%9F%E7%90%86">Javaæ³¨è§£çš„åŸç†</a></li><li><a href="#-%E4%B8%8E-equals-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">== ä¸ equals æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="#stringbuffer%E5%92%8Cstringbuilder%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88">StringBufferå’ŒStringBuilderåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E5%B9%B6%E5%8F%91">å¹¶å‘</a><ul><li><a href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E4%BD%93%E7%8E%B0%E5%9C%A8%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2">çº¿ç¨‹å®‰å…¨ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFcas%E6%93%8D%E4%BD%9C">ä»€ä¹ˆæ˜¯CASæ“ä½œï¼Ÿ</a></li><li><a href="#cas%E7%9A%84%E7%BC%BA%E7%82%B9">CASçš„ç¼ºç‚¹ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%81%9C%E6%AD%A2%E7%BA%BF%E7%A8%8B">å¦‚ä½•åœæ­¢çº¿ç¨‹ï¼Ÿ</a></li><li><a href="#sleep%E5%92%8Cwait%E7%9A%84%E5%8C%BA%E5%88%AB">sleepå’Œwaitçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#blocked%E5%92%8Cwaiting%E7%9A%84%E5%8C%BA%E5%88%AB">blockedå’Œwaitingçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#notify%E5%92%8Cnotifyall%E7%9A%84%E5%8C%BA%E5%88%AB">notifyå’ŒnotifyAllçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E5%86%99%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E4%BA%A4%E6%9B%BF%E6%89%93%E5%8D%B0%E5%A5%87%E5%81%B6%E6%95%B0">å†™ä¸€æ®µä»£ç ï¼Œå®ç°çº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡å¶æ•°</a></li><li><a href="#%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹å®‰å…¨ï¼Ÿ</a></li><li><a href="#java%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E9%94%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%98%AF%E4%BB%80%E4%B9%88">javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„é”ï¼Ÿä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%AC%E5%B9%B3%E9%94%81%E5%92%8C%E9%9D%9E%E5%85%AC%E5%B9%B3%E9%94%81">ä»€ä¹ˆæ˜¯å…¬å¹³é”å’Œéå…¬å¹³é”ï¼Ÿ</a></li><li><a href="#%E8%AE%B2%E8%AE%B2reentrantlock">è®²è®²ReentrantLockï¼Ÿ</a></li><li><a href="#synchronized%E5%92%8Creentrantlock%E7%9A%84%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C">synchronizedå’ŒReentrantLockçš„çš„åº”ç”¨åœºæ™¯æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</a></li><li><a href="#synchronized%E5%92%8Creentrantlock%E7%9A%84%E5%8C%BA%E5%88%AB">synchronizedå’ŒReentrantLockçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Baqs">ä»‹ç»ä¸€ä¸‹AQS?</a></li><li><a href="#volatile%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%9C%E7%94%A8">volatileå…³é”®å­—çš„ä½œç”¨ï¼Ÿ</a></li><li><a href="#%E6%AD%BB%E9%94%81%E4%BA%A7%E7%94%9F%E7%9A%84%E6%9D%A1%E4%BB%B6">æ­»é”äº§ç”Ÿçš„æ¡ä»¶ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E6%8F%90%E4%BA%A4%E4%BB%BB%E5%8A%A1%E6%B5%81%E7%A8%8B">çº¿ç¨‹æ± çš„æäº¤ä»»åŠ¡æµç¨‹ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E5%8F%82%E6%95%B0%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹æ± çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E6%8B%92%E7%BB%9D%E7%AD%96%E7%95%A5%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E6%A0%B8%E5%BF%83%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE">æ ¸å¿ƒçº¿ç¨‹æ•°å¦‚ä½•è®¾ç½®ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%A7%8D%E7%B1%BB%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹æ± ç§ç±»æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E6%9C%89%E5%93%AA%E4%BA%9B">çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E7%9A%84%E5%87%A0%E7%A7%8D%E5%86%99%E6%B3%95">å¤šçº¿ç¨‹é¡ºåºæ‰§è¡Œçš„å‡ ç§å†™æ³•?</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%ADshutdown%E5%92%8Cshutdownnow%E7%9A%84%E5%8C%BA%E5%88%AB">çº¿ç¨‹æ± ä¸­shutdownå’ŒshutdownNowçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E6%8F%90%E4%BA%A4%E7%BB%99%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%BB%BB%E5%8A%A1%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%92%A4%E5%9B%9E%E5%90%97">æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡å¯ä»¥è¢«æ’¤å›å—ï¼Ÿ</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%94%A8%E5%88%B0%E4%BA%86%E5%93%AA%E4%BA%9B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">çº¿ç¨‹æ± ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li><li><a href="#threadlocal%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%8F%91%E7%94%9F%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F">ThreadLocalä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Ÿ</a></li><li><a href="#threadlocal%E7%9A%84%E7%BB%A7%E6%89%BF%E6%80%A7%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">ThreadLocalçš„ç»§æ‰¿æ€§é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ï¼Ÿ</a></li><li><a href="#completablefuture%E6%80%8E%E4%B9%88%E7%94%A8">CompletableFutureæ€ä¹ˆç”¨ï¼Ÿ</a></li></ul></li><li><a href="#mybatis">MyBatis</a><ul><li><a href="#mybatis%E4%B8%AD%E5%92%8C%E7%9A%84%E5%8C%BA%E5%88%AB">MyBatisä¸­#{}å’Œ${}çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#mybatis%E7%9A%84%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86">MyBatisçš„å»¶è¿ŸåŠ è½½åŠå…¶åŸç†ï¼Ÿ</a></li><li><a href="#mybatis%E7%9A%84%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%E5%92%8C%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E5%8C%BA%E5%88%AB">MyBatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</a></li></ul></li><li><a href="#mysql">MYSQL</a><ul><li><a href="#sql%E6%B3%A8%E5%85%A5%E6%98%AF%E4%BB%80%E4%B9%88%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90">SQLæ³¨å…¥æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Ÿ</a></li><li><a href="#mysql%E7%9A%84%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB">mysqlçš„äº‹åŠ¡éš”ç¦»çº§åˆ«</a><ul><li><a href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7">äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§</a></li><li><a href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98">äº‹åŠ¡éš”ç¦»è§£å†³çš„é—®é¢˜</a></li><li><a href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB">äº‹åŠ¡éš”ç¦»çº§åˆ«</a></li></ul></li><li><a href="#mysql%E5%85%B7%E4%BD%93%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E8%84%8F%E8%AF%BB%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%B9%BB%E8%AF%BB%E7%9A%84">MYSQLå…·ä½“æ€ä¹ˆè§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„ï¼Ÿ</a></li><li><a href="#mysql%E7%9A%84%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E5%BC%95%E6%93%8E">MYSQLçš„æœ‰å“ªå‡ ç§å¼•æ“ï¼Ÿ</a></li><li><a href="#mysql%E4%BA%86%E8%A7%A3%E5%93%AA%E4%BA%9B%E6%97%A5%E5%BF%97">MYSQLäº†è§£å“ªäº›æ—¥å¿—ï¼Ÿ</a></li><li><a href="#undolog%E5%92%8Credolog%E7%9A%84%E5%8C%BA%E5%88%AB">undologå’Œredologçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bredo-log">ä»‹ç»ä¸€ä¸‹redo log?</a></li><li><a href="#redo-log%E5%88%B7%E7%9B%98%E7%9A%84%E6%97%B6%E6%9C%BA">redo logåˆ·ç›˜çš„æ—¶æœº</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bbin-log">ä»‹ç»ä¸€ä¸‹bin logï¼Ÿ</a></li><li><a href="#mysql%E6%80%8E%E4%B9%88%E8%BF%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2">MYSQLæ€ä¹ˆè¿è¡¨æŸ¥è¯¢ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">å¦‚ä½•é¿å…é‡å¤æ’å…¥æ•°æ®ï¼Ÿ</a></li><li><a href="#in%E5%92%8Cexists%E7%9A%84%E5%8C%BA%E5%88%AB">inå’Œexistsçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#mysql%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B">mysqlçš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</a></li><li><a href="#sql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F">SQLæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88innodb%E6%98%AF%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E">ä¸ºä»€ä¹ˆInnoDBæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“ï¼Ÿ</a></li><li><a href="#innodb%E5%92%8Cmyisam%E7%9A%84%E5%8C%BA%E5%88%AB">InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB">ç´¢å¼•çš„åˆ†ç±»ï¼Ÿ</a></li><li><a href="#%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E9%80%89%E5%8F%96%E7%9A%84%E4%BE%9D%E6%8D%AE%E6%98%AF%E4%BB%80%E4%B9%88">èšç°‡ç´¢å¼•é€‰å–çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E5%92%8C%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB">èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#b%E6%A0%91%E7%9A%84%E7%89%B9%E6%80%A7">B+æ ‘çš„ç‰¹æ€§ï¼Ÿ</a></li><li><a href="#b%E6%A0%91%E5%92%8Cb%E6%A0%91%E7%9A%84%E5%8C%BA%E5%88%AB">B+æ ‘å’ŒBæ ‘çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88mysql%E4%B8%8D%E7%94%A8%E8%B7%B3%E8%A1%A8">ä¸ºä»€ä¹ˆMYSQLä¸ç”¨è·³è¡¨ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%87%AA%E5%A2%9Eid%E5%BF%AB%E4%B8%80%E4%BA%9B%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8uuid">ä¸ºä»€ä¹ˆè‡ªå¢IDå¿«ä¸€äº›ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨UUIDï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95">ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</a></li><li><a href="#%E6%B7%B1%E5%BA%A6%E5%88%86%E9%A1%B5%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95">æ·±åº¦åˆ†é¡µæœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•ï¼Ÿ</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88">åˆ›å»ºè”åˆç´¢å¼•è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E6%9C%89%E9%82%A3%E4%BA%9B%E6%83%85%E5%86%B5">ç´¢å¼•å¤±æ•ˆæœ‰é‚£äº›æƒ…å†µï¼Ÿ</a></li><li><a href="#mysql%E5%A6%82%E4%BD%95%E5%AE%9A%E4%BD%8D%E6%85%A2%E6%9F%A5%E8%AF%A2">mysqlå¦‚ä½•å®šä½æ…¢æŸ¥è¯¢ï¼Ÿ</a></li><li><a href="#%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3">æ…¢æŸ¥è¯¢å¦‚ä½•è§£å†³ï¼Ÿ</a></li><li><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E7%BC%BA%E7%82%B9">ç´¢å¼•çš„ç¼ºç‚¹</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%80%82%E5%90%88%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95">ä»€ä¹ˆæ—¶å€™é€‚åˆå»ºç«‹ç´¢å¼•ï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%B8%8D%E9%9C%80%E8%A6%81%E7%B4%A2%E5%BC%95">ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%AF%B9%E7%B4%A2%E5%BC%95%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96">å¦‚ä½•å¯¹ç´¢å¼•è¿›è¡Œä¼˜åŒ–ï¼Ÿ</a></li><li><a href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84">äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li><li><a href="#%E8%AE%B2%E8%AE%B2mvcc">è®²è®²MVCC?</a></li><li><a href="#%E5%BD%93%E5%89%8D%E8%AF%BB%E5%92%8C%E5%BF%AB%E7%85%A7%E8%AF%BB%E7%9A%84%E5%8C%BA%E5%88%AB">å½“å‰è¯»å’Œå¿«ç…§è¯»çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#mvcc%E7%9A%84readview%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B">MVCCçš„ReadViewä»‹ç»ä¸€ä¸‹ï¼Ÿ</a></li><li><a href="#%E4%BA%8B%E5%8A%A1%E7%89%B9%E5%88%AB%E5%A4%9A%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BC%8A%E7%AB%AF">äº‹åŠ¡ç‰¹åˆ«å¤šæœ‰å“ªäº›å¼Šç«¯ï¼Ÿ</a></li><li><a href="#mysql%E9%87%8C%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81">MYSQLé‡Œæœ‰å“ªäº›é”ï¼Ÿ</a></li><li><a href="#mysql%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E8%BF%87%E7%A8%8B">MYSQLä¸»ä»å¤åˆ¶è¿‡ç¨‹ï¼Ÿ</a></li><li><a href="#%E4%B8%BB%E4%BB%8E%E5%BB%B6%E8%BF%9F%E6%9C%89%E5%93%AA%E4%BA%9B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">ä¸»ä»å»¶è¿Ÿæœ‰å“ªäº›è§£å†³æ–¹æ³•ï¼Ÿ</a></li><li><a href="#%E5%88%86%E5%BA%93%E5%92%8C%E5%88%86%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB">åˆ†åº“å’Œåˆ†è¡¨çš„åŒºåˆ«ï¼Ÿ</a></li></ul></li><li><a href="#redis">Redis</a><ul><li><a href="#redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%A5%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">Redisçš„æ•°æ®ç»“æ„ä»¥åŠåº”ç”¨åœºæ™¯ï¼Ÿ</a><ul><li><a href="#string">String</a></li><li><a href="#list">List:</a></li><li><a href="#hash">Hash</a></li><li><a href="#set">Set</a></li><li><a href="#zset">zset</a></li><li><a href="#bitmap">Bitmap</a></li><li><a href="#hyperloglog">hyperloglog</a></li><li><a href="#geo">GEO</a></li><li><a href="#stream">Stream</a></li></ul></li><li><a href="#redis%E7%9A%84string%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">redisçš„stringå®ç°åŸç†</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88redis%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AFb%E6%A0%91">ä¸ºä»€ä¹ˆRedisç”¨è·³è¡¨è€Œä¸æ˜¯B+æ ‘ï¼Ÿ</a></li><li><a href="#%E8%B7%B3%E8%A1%A8%E7%9A%84%E5%B1%82%E6%95%B0%E6%98%AF%E6%80%8E%E4%B9%88%E8%AE%BE%E7%BD%AE%E7%9A%84">è·³è¡¨çš„å±‚æ•°æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ</a></li><li><a href="#redis%E7%9A%84%E5%93%88%E5%B8%8C%E8%A1%A8%E6%98%AF%E6%80%8E%E4%B9%88%E6%89%A9%E5%AE%B9%E7%9A%84">Redisçš„å“ˆå¸Œè¡¨æ˜¯æ€ä¹ˆæ‰©å®¹çš„ï¼Ÿ</a></li><li><a href="#redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB">Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</a></li><li><a href="#redis%E5%93%AA%E9%87%8C%E7%94%A8%E5%88%B0%E4%BA%86%E5%A4%9A%E7%BA%BF%E7%A8%8B">Rediså“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹ï¼Ÿ</a></li><li><a href="#io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0">IOå¤šè·¯å¤ç”¨æ€ä¹ˆå®ç°ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0redis%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7">å¦‚ä½•å®ç°Redisçš„åŸå­æ€§ï¼Ÿ</a></li><li><a href="#redis%E6%8C%81%E4%B9%85%E5%8C%96%E4%B9%8Baof">RedisæŒä¹…åŒ–ä¹‹AOFï¼Ÿ</a></li><li><a href="#aof%E9%87%8D%E5%86%99%E6%9C%BA%E5%88%B6">AOFé‡å†™æœºåˆ¶ï¼Ÿ</a></li><li><a href="#redis%E6%8C%81%E4%B9%85%E5%8C%96%E4%B9%8Brdb">RedisæŒä¹…åŒ–ä¹‹RDB?</a></li><li><a href="#bgsave%E6%97%B6%E6%95%B0%E6%8D%AE%E8%83%BD%E8%A2%AB%E4%BF%AE%E6%94%B9%E5%90%97">bgsaveæ—¶ï¼Œæ•°æ®èƒ½è¢«ä¿®æ”¹å—ï¼Ÿ</a></li><li><a href="#aof%E5%92%8Crdb%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">AOFå’ŒRDBçš„ä¼˜ç¼ºç‚¹ï¼Ÿ</a></li><li><a href="#%E8%AE%B2%E8%AE%B2redis%E7%9A%84%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5">è®²è®²Redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</a></li><li><a href="#lru%E5%92%8Clfu%E7%9A%84%E7%BC%BA%E7%82%B9">LRUå’ŒLFUçš„ç¼ºç‚¹ï¼Ÿ</a></li><li><a href="#redis%E7%9A%84%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5">Redisçš„è¿‡æœŸåˆ é™¤ç­–ç•¥ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%AB%8B%E5%88%BB%E5%88%A0%E9%99%A4%E8%BF%87%E6%9C%9Fkey">ä¸ºä»€ä¹ˆä¸ç«‹åˆ»åˆ é™¤è¿‡æœŸkeyï¼Ÿ</a></li><li><a href="#redis%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5">Rediså…¨é‡åŒæ­¥ï¼Ÿ</a></li><li><a href="#redis%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5">Rediså¢é‡åŒæ­¥ï¼Ÿ</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bredis%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6">ä»‹ç»ä¸€ä¸‹Rediså“¨å…µæœºåˆ¶ï¼Ÿ</a></li><li><a href="#%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6%E5%A6%82%E4%BD%95%E7%9B%91%E6%8E%A7">å“¨å…µæœºåˆ¶å¦‚ä½•ç›‘æ§ï¼Ÿ</a></li><li><a href="#%E5%93%A8%E5%85%B5%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E6%96%B0%E7%9A%84%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8">å“¨å…µå¦‚ä½•é€‰æ‹©æ–°çš„ä¸»æœåŠ¡å™¨ï¼Ÿ</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4">ä»‹ç»ä¸€ä¸‹åˆ†ç‰‡é›†ç¾¤ï¼Ÿ</a></li><li><a href="#redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%8E%9F%E7%90%86">Redisåˆ†å¸ƒå¼é”çš„åŸç†ï¼Ÿ</a><ul><li><a href="#%E5%8A%A0%E9%94%81">åŠ é”</a></li><li><a href="#%E8%A7%A3%E9%94%81">è§£é”</a></li></ul></li><li><a href="#redis%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98">rediså®ç°çš„åˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</a></li><li><a href="#redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E4%BA%92%E6%96%A5%E6%80%A7%E9%97%AE%E9%A2%98%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3">redisåˆ†å¸ƒå¼é”çš„äº’æ–¥æ€§é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ</a></li><li><a href="#%E5%9F%BA%E4%BA%8Eredis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%A6%82%E4%BD%95%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F">åŸºäºrediså®ç°åˆ†å¸ƒå¼é”å¦‚ä½•è‡ªåŠ¨ç»­æœŸï¼Ÿ</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%A7key%E9%97%AE%E9%A2%98">ä»€ä¹ˆæ˜¯å¤§Keyé—®é¢˜ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%A4%A7key%E9%97%AE%E9%A2%98">å¦‚ä½•è§£å†³å¤§Keyé—®é¢˜ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E7%83%ADkey%E9%97%AE%E9%A2%98">å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜ï¼Ÿ</a></li><li><a href="#%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3">ç¼“å­˜é›ªå´©å¦‚ä½•è§£å†³ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%A7%92%E6%9D%80%E5%9C%BA%E6%99%AF%E5%A4%84%E7%90%86%E9%AB%98%E5%B9%B6%E5%8F%91%E5%92%8C%E8%B6%85%E5%8D%96%E9%97%AE%E9%A2%98">å¦‚ä½•è®¾è®¡ç§’æ€åœºæ™¯å¤„ç†é«˜å¹¶å‘å’Œè¶…å–é—®é¢˜ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E9%87%8D%E5%A4%8D%E4%B8%8B%E5%8D%95%E9%97%AE%E9%A2%98">å¦‚ä½•å¤„ç†é‡å¤ä¸‹å•é—®é¢˜ï¼Ÿ</a><ul><li><a href="#%E5%9F%BA%E7%A1%80%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">åŸºç¡€æ€§è§£å†³æ–¹æ¡ˆ</a></li><li><a href="#%E7%BB%BC%E5%90%88%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">ç»¼åˆæ€§è§£å†³æ–¹æ¡ˆ</a></li></ul></li><li><a href="#%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7">å¦‚ä½•ä¿è¯åŒå†™ä¸€è‡´æ€§ï¼Ÿ</a></li></ul></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95">ä»‹ç»ä¸€ä¸‹é›ªèŠ±ç®—æ³•ï¼Ÿ</a></li><li><a href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">åŠ¨æ€ä»£ç†</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</a></li><li><a href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4">JDKåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤ï¼Ÿ</a></li><li><a href="#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4">CGLIBåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤ï¼Ÿ</a></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%B8%89%E4%B8%AA%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%90%AB%E4%B9%89">è‡ªå®šä¹‰æ³¨è§£çš„ä¸‰ä¸ªæ³¨è§£çš„å«ä¹‰ï¼Ÿ</a></li><li><a href="#aop">AOP</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFaop">ä»€ä¹ˆæ˜¯AOPï¼Ÿ</a></li><li><a href="#aop%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9C%AF%E8%AF%AD%E6%9C%89%E5%93%AA%E4%BA%9B">AOPçš„ä¸€äº›æœ¯è¯­æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#aop%E7%9A%84%E9%80%9A%E7%9F%A5%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B">AOPçš„é€šçŸ¥éƒ½æœ‰å“ªäº›ç±»å‹ï¼Ÿ</a></li><li><a href="#aop%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">AOPçš„åº”ç”¨åœºæ™¯ï¼Ÿ</a></li><li><a href="#aop%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E6%80%8E%E4%B9%88%E5%81%9A">AOPå®ç°æ—¥å¿—è®°å½•æ€ä¹ˆåšï¼Ÿ</a></li></ul></li><li><a href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a><ul><li><a href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F">åˆ›å»ºå‹æ¨¡å¼</a></li><li><a href="#%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F">ç»“æ„å‹æ¨¡å¼</a></li><li><a href="#%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F">è¡Œä¸ºå‹æ¨¡å¼</a></li><li><a href="#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F">å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼</a></li></ul></li><li><a href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97">æ¶ˆæ¯é˜Ÿåˆ—</a><ul><li><a href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%80%8E%E4%B9%88%E9%80%89%E5%9E%8B">æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆé€‰å‹ï¼Ÿ</a></li><li><a href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B">æ¶ˆæ¯é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3">æ¶ˆæ¯ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ</a></li><li><a href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%E9%A1%BA%E5%BA%8F%E6%80%A7%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81">æ¶ˆæ¯é˜Ÿåˆ—çš„å¯é æ€§ã€é¡ºåºæ€§æ€ä¹ˆä¿è¯ï¼Ÿ</a></li></ul></li><li><a href="#spring">Spring</a><ul><li><a href="#spring%E7%9A%84%E5%8D%95%E4%BE%8Bbean%E6%98%AF%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%90%97">Springçš„å•ä¾‹Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</a></li><li><a href="#spring%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84">Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li><li><a href="#spring%E4%B8%AD%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%E6%9C%89%E5%93%AA%E4%BA%9B">Springä¸­äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E4%BA%8B%E5%8A%A1%E5%A4%B1%E6%95%88%E7%9A%84%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B">äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8transactional%E6%B3%A8%E8%A7%A3%E4%BC%9A%E5%A4%B1%E6%95%88">ä¸ºä»€ä¹ˆæ–¹æ³•å†…éƒ¨è°ƒç”¨@Transactionalæ³¨è§£ä¼šå¤±æ•ˆï¼Ÿ</a></li><li><a href="#bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</a></li><li><a href="#bean%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3">Beançš„å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ</a></li></ul></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bcap%E5%92%8Cbase%E7%90%86%E8%AE%BA">ä»‹ç»ä¸€ä¸‹CAPå’ŒBASEç†è®º</a></li><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Btcc%E6%A8%A1%E5%BC%8F">ä»‹ç»ä¸€ä¸‹TCCæ¨¡å¼</a></li><li><a href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%9C%89%E5%93%AA%E4%BA%9B%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">å®šæ—¶ä»»åŠ¡æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</a></li><li><a href="#%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83">è®¤è¯æˆæƒ</a><ul><li><a href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Brbac%E6%A8%A1%E5%9E%8B">ä»‹ç»ä¸€ä¸‹RBACæ¨¡å‹ï¼Ÿ</a></li></ul></li><li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">è´Ÿè½½å‡è¡¡</a><ul><li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%80%8E%E4%B9%88%E5%88%86%E7%B1%BB">è´Ÿè½½å‡è¡¡æ€ä¹ˆåˆ†ç±»ï¼Ÿ</a></li><li><a href="#%E5%9B%9B%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%92%8C%E4%B8%83%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E5%8C%BA%E5%88%AB">å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%97%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B">è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#%E4%B8%83%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%8F%AF%E4%BB%A5%E6%80%8E%E4%B9%88%E5%81%9A">ä¸ƒå±‚è´Ÿè½½å‡è¡¡å¯ä»¥æ€ä¹ˆåšï¼Ÿ</a></li></ul></li></ul></li><li><a href="#cs%E5%9F%BA%E7%A1%80">CSåŸºç¡€</a><ul><li><a href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB">è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li><li><a href="#%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%9A%84%E5%8C%BA%E5%88%AB">ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«</a><ul><li><a href="#%E7%A1%AC%E9%93%BE%E6%8E%A5">ç¡¬é“¾æ¥</a></li><li><a href="#%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5">è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A1%AC%E8%BF%9E%E6%8E%A5%E4%B8%8D%E8%83%BD%E8%B7%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">ä¸ºä»€ä¹ˆç¡¬è¿æ¥ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿï¼Ÿ</a></li></ul></li><li><a href="#%E5%8A%A8%E6%80%81%E7%BC%96%E8%AF%91%E5%92%8C%E9%9D%99%E6%80%81%E7%BC%96%E8%AF%91">åŠ¨æ€ç¼–è¯‘å’Œé™æ€ç¼–è¯‘</a><ul><li><a href="#%E9%9D%99%E6%80%81%E7%BC%96%E8%AF%91">é™æ€ç¼–è¯‘</a></li><li><a href="#%E5%8A%A8%E6%80%81%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E6%97%B6%E7%BC%96%E8%AF%91">åŠ¨æ€ç¼–è¯‘(è¿è¡Œæ—¶ç¼–è¯‘)</a></li></ul></li><li><a href="#tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">TCPä¸‰æ¬¡æ¡æ‰‹</a><ul><li><a href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">ä¸‰æ¬¡æ¡æ‰‹</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%8F%91%E9%80%81%E4%BA%86ack%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E5%8F%91%E9%80%81syn">ç¬¬äºŒæ¬¡å‘é€äº†ACKï¼Œä¸ºä»€ä¹ˆè¿˜è¦å‘é€SYNï¼Ÿ</a></li><li><a href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E5%8F%AF%E4%BB%A5%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE%E5%90%97">ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</a></li></ul></li><li><a href="#tcp%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">TCPå››æ¬¡æŒ¥æ‰‹</a><ul><li><a href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">å››æ¬¡æŒ¥æ‰‹</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8D%E6%8A%8A-ack-%E5%92%8C-fin-%E4%B8%80%E8%B5%B7%E5%8F%91%E9%80%81%E5%8F%98%E6%88%90%E4%B8%89%E6%AC%A1%E6%8C%A5%E6%89%8B">ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸æŠŠ ACK å’Œ FIN ä¸€èµ·å‘é€ï¼Œå˜æˆä¸‰æ¬¡æŒ¥æ‰‹ï¼Ÿ</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E6%AC%A1%E6%8C%A5%E6%89%8B%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%91%E9%80%81ack%E6%B2%A1%E6%9C%89%E5%88%B0%E8%BE%BE%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7">ç¬¬äºŒæ¬¡æŒ¥æ‰‹æœåŠ¡ç«¯å‘é€ACKæ²¡æœ‰åˆ°è¾¾ä¼šæ€ä¹ˆæ ·ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%AC%AC%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%A6%81%E7%AD%89%E5%BE%85-2msl%E6%8A%A5%E6%96%87%E6%9C%80%E9%95%BF%E5%AD%98%E6%B4%BB%E6%97%B6%E9%97%B4%E6%89%8D%E8%BF%9B%E5%85%A5closed%E7%8A%B6%E6%80%81">ä¸ºä»€ä¹ˆç¬¬å››æ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯è¦ç­‰å¾… 2MSLï¼ˆæŠ¥æ–‡æœ€é•¿å­˜æ´»æ—¶é—´ï¼‰æ‰è¿›å…¥CLOSEDçŠ¶æ€ï¼Ÿ</a></li></ul></li></ul></li><li><a href="#c">C++</a><ul><li><a href="#c%E4%B8%AD%E7%9A%84static%E5%85%B3%E9%94%AE%E5%AD%97">c++ä¸­çš„staticå…³é”®å­—</a></li><li><a href="#c%E6%A8%A1%E6%9D%BF">c++æ¨¡æ¿</a></li><li><a href="#c%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%8C%BA%E5%88%AB">c++æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«</a></li><li><a href="#c%E5%A4%9A%E6%80%81">c++å¤šæ€</a></li><li><a href="#%E8%99%9A%E5%87%BD%E6%95%B0%E4%B8%8E%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0">è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°</a></li><li><a href="#c%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">c++æ™ºèƒ½æŒ‡é’ˆ</a></li><li><a href="#const-%E5%92%8C-volatile%E8%BE%A8%E6%9E%90">const å’Œ volatileè¾¨æ</a></li><li><a href="#null-%E5%92%8C-nullptr%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%95%E5%85%A5nulllptr">NULL å’Œ nullptrçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå¼•å…¥nulllptrï¼Ÿ</a></li><li><a href="#git-fetch%E5%92%8Cgit-pull%E7%9A%84%E5%8C%BA%E5%88%AB">git fetchå’Œgit pullçš„åŒºåˆ«</a></li><li><a href="#delete%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9F%A5%E9%81%93%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6%E7%9A%84">delete[]æ˜¯æ€æ ·çŸ¥é“æ•°ç»„é•¿åº¦çš„ï¼Ÿ</a></li><li><a href="#%E7%A8%8B%E5%BA%8F%E6%98%AF%E4%BB%8Emain-%E5%87%BD%E6%95%B0%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E7%9A%84%E5%90%97">ç¨‹åºæ˜¯ä»main å‡½æ•°å¼€å§‹æ‰§è¡Œçš„å—ï¼Ÿ</a></li></ul></li><li><a href="#python">python</a><ul><li><a href="#python%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6">pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶</a></li></ul></li><li><a href="#deep-learning">deep learning</a><ul><li><a href="#%E5%88%A4%E5%88%AB%E6%A8%A1%E5%9E%8B%E5%92%8C%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B">åˆ¤åˆ«æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹</a></li><li><a href="#%E8%BD%AC%E7%BD%AE%E5%8D%B7%E7%A7%AF%E5%92%8C%E7%A9%BA%E6%B4%9E%E5%8D%B7%E7%A7%AF">è½¬ç½®å·ç§¯å’Œç©ºæ´å·ç§¯</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8D%E5%B9%B3%E8%A1%A1%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F">æ•°æ®é›†ä¸å¹³è¡¡çš„å¤„ç†æ–¹å¼</a></li><li><a href="#tensorflow%E5%92%8Cpytorch%E7%9A%84%E5%8C%BA%E5%88%AB">tensorflowå’Œpytorchçš„åŒºåˆ«</a></li><li><a href="#transformer%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81">transformerä¸­çš„ä½ç½®ç¼–ç </a></li><li><a href="#%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E5%92%8C%E6%B3%A8%E6%84%8F%E5%8A%9B%E7%9A%84%E5%8C%BA%E5%88%AB">è‡ªæ³¨æ„åŠ›å’Œæ³¨æ„åŠ›çš„åŒºåˆ«</a></li></ul></li></ul><!-- /TOC --><h1 id="java"><a class="markdownIt-Anchor" href="#java"></a> Java</h1><h2 id="jdk-jreå’Œjvmæ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#jdk-jreå’Œjvmæ˜¯ä»€ä¹ˆ"></a> JDKã€JREå’ŒJVMæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="jdk"><a class="markdownIt-Anchor" href="#jdk"></a> JDK</h3><p>JDKï¼ˆJava Development Kitï¼‰æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ Java å¼€å‘å·¥å…·åŒ…ï¼Œä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œç”¨äºåˆ›å»ºå’Œç¼–è¯‘ Java ç¨‹åºã€‚<br />å®ƒåŒ…å«äº† JREï¼ˆJava Runtime Environmentï¼‰ï¼Œä»¥åŠç¼–è¯‘å™¨ javac å’Œå…¶ä»–å·¥å…·ï¼Œå¦‚ javadocï¼ˆæ–‡æ¡£ç”Ÿæˆå™¨ï¼‰ã€jdbï¼ˆè°ƒè¯•å™¨ï¼‰ã€jconsoleï¼ˆç›‘æ§å·¥å…·ï¼‰ã€javapï¼ˆåç¼–è¯‘å·¥å…·ï¼‰ç­‰ã€‚</p><h3 id="jre"><a class="markdownIt-Anchor" href="#jre"></a> JRE</h3><p>JRE æ˜¯è¿è¡Œå·²ç¼–è¯‘ Java ç¨‹åºæ‰€éœ€çš„ç¯å¢ƒï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>JVM : ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ Java è™šæ‹Ÿæœºã€‚</li><li>Java åŸºç¡€ç±»åº“ï¼ˆClass Libraryï¼‰ï¼šä¸€ç»„æ ‡å‡†çš„ç±»åº“ï¼Œæä¾›å¸¸ç”¨çš„åŠŸèƒ½å’Œ APIï¼ˆå¦‚ I/O æ“ä½œã€ç½‘ç»œé€šä¿¡ã€æ•°æ®ç»“æ„ç­‰ï¼‰ã€‚</li></ul><h3 id="jvm"><a class="markdownIt-Anchor" href="#jvm"></a> JVM</h3><p>Java è™šæ‹Ÿæœºï¼ˆJava Virtual Machine, JVMï¼‰æ˜¯è¿è¡Œ Java å­—èŠ‚ç çš„è™šæ‹Ÿæœºã€‚<br />JVM æœ‰é’ˆå¯¹ä¸åŒç³»ç»Ÿçš„ç‰¹å®šå®ç°ï¼ˆWindowsï¼ŒLinuxï¼ŒmacOSï¼‰ï¼Œç›®çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„å­—èŠ‚ç ï¼Œå®ƒä»¬éƒ½ä¼šç»™å‡ºç›¸åŒçš„ç»“æœã€‚<br />å­—èŠ‚ç å’Œä¸åŒç³»ç»Ÿçš„ JVM å®ç°æ˜¯ Java è¯­è¨€â€œä¸€æ¬¡ç¼–è¯‘ï¼Œéšå¤„å¯ä»¥è¿è¡Œâ€çš„å…³é”®æ‰€åœ¨ã€‚<br />ä¸åŒç¼–ç¨‹è¯­è¨€ï¼ˆJavaã€Groovyã€Kotlinã€JRubyã€Clojure â€¦ï¼‰é€šè¿‡å„è‡ªçš„ç¼–è¯‘å™¨ç¼–è¯‘æˆ .class æ–‡ä»¶ï¼Œå¹¶æœ€ç»ˆé€šè¿‡ JVM åœ¨ä¸åŒå¹³å°ï¼ˆWindowsã€Macã€Linuxï¼‰ä¸Šè¿è¡Œã€‚</p><h2 id="å­—èŠ‚ç "><a class="markdownIt-Anchor" href="#å­—èŠ‚ç "></a> å­—èŠ‚ç </h2><p>åœ¨ Java ä¸­ï¼ŒJVM å¯ä»¥ç†è§£çš„ä»£ç å°±å«åšå­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º .class çš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚<br />Java è¯­è¨€é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ä¼ ç»Ÿè§£é‡Šå‹è¯­è¨€æ‰§è¡Œæ•ˆç‡ä½çš„é—®é¢˜ï¼ŒåŒæ—¶åˆä¿ç•™äº†è§£é‡Šå‹è¯­è¨€å¯ç§»æ¤çš„ç‰¹ç‚¹ã€‚</p><p>Javaç¨‹åºè¿è¡Œæµç¨‹å¦‚ä¸‹å›¾:<br /><img src="https://oss.javaguide.cn/github/javaguide/java/basis/java-code-to-machine-code.png" alt="Javaç¨‹åºè¿è¡Œæµç¨‹" /></p><p>éœ€è¦æ ¼å¤–æ³¨æ„çš„æ˜¯ .class-&gt;æœºå™¨ç  è¿™ä¸€æ­¥ã€‚</p><ul><li>åœ¨è¿™ä¸€æ­¥ JVM ç±»åŠ è½½å™¨é¦–å…ˆåŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åé€šè¿‡è§£é‡Šå™¨é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œè¿™ç§æ–¹å¼çš„æ‰§è¡Œé€Ÿåº¦ä¼šç›¸å¯¹æ¯”è¾ƒæ…¢ã€‚</li><li>è€Œä¸”ï¼Œæœ‰äº›æ–¹æ³•å’Œä»£ç å—æ˜¯ç»å¸¸éœ€è¦è¢«è°ƒç”¨çš„(ä¹Ÿå°±æ˜¯æ‰€è°“çš„çƒ­ç‚¹ä»£ç )ï¼Œæ‰€ä»¥åé¢å¼•è¿›äº† JITï¼ˆJust in Time Compilationï¼‰ ç¼–è¯‘å™¨ï¼Œè€Œ JIT å±äºè¿è¡Œæ—¶ç¼–è¯‘ã€‚</li><li>å½“ JIT ç¼–è¯‘å™¨å®Œæˆç¬¬ä¸€æ¬¡ç¼–è¯‘åï¼Œå…¶ä¼šå°†å­—èŠ‚ç å¯¹åº”çš„æœºå™¨ç ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>æœºå™¨ç çš„è¿è¡Œæ•ˆç‡è‚¯å®šæ˜¯é«˜äº Java è§£é‡Šå™¨çš„ã€‚è¿™ä¹Ÿè§£é‡Šäº†æˆ‘ä»¬ä¸ºä»€ä¹ˆç»å¸¸ä¼šè¯´ Java æ˜¯ç¼–è¯‘ä¸è§£é‡Šå…±å­˜çš„è¯­è¨€ ã€‚</li></ul><h2 id="ä¸ºä»€ä¹ˆè¯´javaç¼–è¯‘ä¸è§£é‡Šå…±å­˜"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¯´javaç¼–è¯‘ä¸è§£é‡Šå…±å­˜"></a> ä¸ºä»€ä¹ˆè¯´Javaâ€œç¼–è¯‘ä¸è§£é‡Šå…±å­˜â€ï¼Ÿ</h2><ul><li>ç¼–è¯‘å‹è¯­è¨€ï¼šç¼–è¯‘å‹è¯­è¨€ä¼šé€šè¿‡ç¼–è¯‘å™¨å°†æºä»£ç ä¸€æ¬¡æ€§ç¿»è¯‘æˆå¯è¢«è¯¥å¹³å°æ‰§è¡Œçš„æœºå™¨ç ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¼–è¯‘è¯­è¨€çš„æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œå¼€å‘æ•ˆç‡æ¯”è¾ƒä½ã€‚å¸¸è§çš„ç¼–è¯‘æ€§è¯­è¨€æœ‰ Cã€C++ã€Goã€Rust ç­‰ç­‰ã€‚</li><li>è§£é‡Šå‹è¯­è¨€ï¼šè§£é‡Šå‹è¯­è¨€ä¼šé€šè¿‡è§£é‡Šå™¨ä¸€å¥ä¸€å¥çš„å°†ä»£ç è§£é‡Šï¼ˆinterpretï¼‰ä¸ºæœºå™¨ä»£ç åå†æ‰§è¡Œã€‚è§£é‡Šå‹è¯­è¨€å¼€å‘æ•ˆç‡æ¯”è¾ƒå¿«ï¼Œæ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚å¸¸è§çš„è§£é‡Šæ€§è¯­è¨€æœ‰ Pythonã€JavaScriptã€PHP ç­‰ç­‰ã€‚</li></ul><p>Java ç¨‹åºè¦ç»è¿‡å…ˆç¼–è¯‘ï¼Œåè§£é‡Šä¸¤ä¸ªæ­¥éª¤ï¼Œç”± Java ç¼–å†™çš„ç¨‹åºéœ€è¦å…ˆç»è¿‡ç¼–è¯‘æ­¥éª¤ï¼Œç”Ÿæˆå­—èŠ‚ç ï¼ˆ.class æ–‡ä»¶ï¼‰ï¼Œè¿™ç§å­—èŠ‚ç å¿…é¡»ç”± Java è§£é‡Šå™¨æ¥è§£é‡Šæ‰§è¡Œã€‚</p><h2 id="aotå’Œjit"><a class="markdownIt-Anchor" href="#aotå’Œjit"></a> AOTå’ŒJIT</h2><ul><li><p>AOTï¼ˆAhead of Timeï¼‰ï¼šæå‰ç¼–è¯‘ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œå°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œç„¶åç›´æ¥è¿è¡Œæœºå™¨ç ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥æé«˜ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚</p></li><li><p>JIT(Just in Time)ï¼šå³æ—¶ç¼–è¯‘ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå°†çƒ­ç‚¹ä»£ç ï¼ˆè¢«é¢‘ç¹è°ƒç”¨çš„ä»£ç ï¼‰ç¼–è¯‘æˆæœºå™¨ç ï¼Œç„¶åå†æ‰§è¡Œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p></li></ul><p>ä¸ºä»€ä¹ˆAOTæ²¡æœ‰å®Œå…¨ä»£æ›¿JIT?</p><ul><li>AOT æ›´é€‚åˆå½“ä¸‹çš„äº‘åŸç”Ÿåœºæ™¯ï¼Œå¯¹å¾®æœåŠ¡æ¶æ„çš„æ”¯æŒä¹Ÿæ¯”è¾ƒå‹å¥½ã€‚ä½†æ˜¯ï¼ŒAOT ç¼–è¯‘æ— æ³•æ”¯æŒ Java çš„ä¸€äº›åŠ¨æ€ç‰¹æ€§ï¼Œå¦‚åå°„ã€åŠ¨æ€ä»£ç†ã€åŠ¨æ€åŠ è½½ç­‰ï¼Œå¾ˆå¤šæ¡†æ¶å’Œåº“éƒ½ç”¨åˆ°äº†è¿™äº›ç‰¹æ€§ã€‚åªä½¿ç”¨ AOT ç¼–è¯‘ï¼Œé‚£å°±æ²¡åŠæ³•ä½¿ç”¨è¿™äº›æ¡†æ¶å’Œåº“äº†ï¼Œæˆ–è€…è¯´éœ€è¦é’ˆå¯¹æ€§åœ°å»åšé€‚é…å’Œä¼˜åŒ–ã€‚</li></ul><h2 id="jvmå†…å­˜åŒºåŸŸ"><a class="markdownIt-Anchor" href="#jvmå†…å­˜åŒºåŸŸ"></a> JVMå†…å­˜åŒºåŸŸ</h2><p>JVM åœ¨æ‰§è¡Œ Java ç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒç®¡ç†çš„å†…å­˜åˆ’åˆ†æˆè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªåŒºåŸŸï¼š</p><ul><li>çº¿ç¨‹ç§æœ‰çš„ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li><li>çº¿ç¨‹å…±äº«çš„ï¼šå †ã€æ–¹æ³•åŒºã€ç›´æ¥å†…å­˜</li></ul><h3 id="ç¨‹åºè®¡æ•°å™¨"><a class="markdownIt-Anchor" href="#ç¨‹åºè®¡æ•°å™¨"></a> ç¨‹åºè®¡æ•°å™¨</h3><ul><li>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨æ¥ä¾æ¬¡è¯»å–æŒ‡ä»¤ï¼Œä»è€Œå®ç°ä»£ç çš„æµç¨‹æ§åˆ¶ï¼Œå¦‚ï¼šé¡ºåºæ‰§è¡Œã€é€‰æ‹©ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ã€‚</li><li>å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç¨‹åºè®¡æ•°å™¨ç”¨äºè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼Œä»è€Œå½“çº¿ç¨‹è¢«åˆ‡æ¢å›æ¥çš„æ—¶å€™èƒ½å¤ŸçŸ¥é“è¯¥çº¿ç¨‹ä¸Šæ¬¡è¿è¡Œåˆ°å“ªå„¿äº†ã€‚</li></ul><blockquote><p>ç¨‹åºè®¡æ•°å™¨æ˜¯å”¯ä¸€ä¸€ä¸ªä¸ä¼šå‡ºç° OutOfMemoryError çš„å†…å­˜åŒºåŸŸï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„ç»“æŸè€Œæ­»äº¡ã€‚</p></blockquote><h3 id="è™šæ‹Ÿæœºæ ˆ"><a class="markdownIt-Anchor" href="#è™šæ‹Ÿæœºæ ˆ"></a> è™šæ‹Ÿæœºæ ˆ</h3><ul><li>è™šæ‹Ÿæœºæ ˆç”±ä¸€ä¸ªä¸ªæ ˆå¸§ç»„æˆï¼Œæ¯ä¸€æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„æ ˆå¸§è¢«å‹å…¥æ ˆä¸­ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ç»“æŸåï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ ˆå¸§è¢«å¼¹å‡ºã€‚è€Œæ¯ä¸ªæ ˆå¸§ä¸­éƒ½æ‹¥æœ‰ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•è¿”å›åœ°å€ã€‚</li></ul><h3 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a class="markdownIt-Anchor" href="#æœ¬åœ°æ–¹æ³•æ ˆ"></a> æœ¬åœ°æ–¹æ³•æ ˆ</h3><ul><li>æœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼šè™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³• ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Native æ–¹æ³•(éJavaè¯­è¨€ç¼–å†™çš„æ–¹æ³•)æœåŠ¡ã€‚</li></ul><h3 id="å †"><a class="markdownIt-Anchor" href="#å †"></a> å †</h3><ul><li>å †æ˜¯ Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œæ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</li><li>å †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™ä¹Ÿè¢«ç§°åšâ€œGC å †â€ã€‚</li><li>åœ¨jdk7åŠä»¥å‰ï¼Œå †ä¸­å†…å­˜è¢«åˆ†ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£å’Œæ°¸ä¹…ä»£ï¼Œå®é™…ä¸Šæ°¸ä¹…ä»£å¤„äºæ–¹æ³•åŒºï¼Œä¸å †æ˜¯éš”ç¦»çš„ï¼Œä½†æ˜¯å†…å­˜ä¸Šæ˜¯è¿ç»­çš„ã€‚åœ¨jdk8ä¸­ï¼Œ<strong>æ°¸ä¹…ä»£è¢«å…ƒç©ºé—´å–ä»£</strong>ï¼Œå…ƒç©ºé—´ä½äºæœ¬åœ°å†…å­˜ï¼Œå› æ­¤å †ä¸­ä¸»è¦åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚</li></ul><h3 id="æ–¹æ³•åŒº"><a class="markdownIt-Anchor" href="#æ–¹æ³•åŒº"></a> æ–¹æ³•åŒº</h3><ul><li>æ–¹æ³•åŒºå±äºæ˜¯ JVM è¿è¡Œæ—¶æ•°æ®åŒºåŸŸçš„ä¸€å—é€»è¾‘åŒºåŸŸï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸ</li><li>å½“JVMè¦ä½¿ç”¨ä¸€ä¸ªç±»æ—¶ï¼Œä¼šæ£€æŸ¥å¹¶è§£æå­—èŠ‚ç æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¹¶å°†ä¿¡æ¯å­˜å‚¨åœ¨æ–¹æ³•åŒºä¸­</li></ul><h3 id="è¿è¡Œæ—¶å¸¸é‡æ± å’Œå­—ç¬¦ä¸²å¸¸é‡æ± "><a class="markdownIt-Anchor" href="#è¿è¡Œæ—¶å¸¸é‡æ± å’Œå­—ç¬¦ä¸²å¸¸é‡æ± "></a> è¿è¡Œæ—¶å¸¸é‡æ± å’Œå­—ç¬¦ä¸²å¸¸é‡æ± </h3><ul><li>å¸¸é‡æ± è¡¨ä¸»è¦å­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</li><li>å­—ç¬¦ä¸²å¸¸é‡æ±  æ˜¯ JVM ä¸ºäº†æå‡æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—é’ˆå¯¹å­—ç¬¦ä¸²ï¼ˆString ç±»ï¼‰ä¸“é—¨å¼€è¾Ÿçš„ä¸€å—åŒºåŸŸï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é¿å…å­—ç¬¦ä¸²çš„é‡å¤åˆ›å»ºã€‚</li></ul><p>jdk7ä¸­ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼Œè€Œå­—ç¬¦ä¸²å¸¸é‡æ± å­˜æ”¾åœ¨å †ä¸­ã€‚åœ¨jdk8ä¸­ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± å­˜æ”¾åœ¨å…ƒç©ºé—´ä¸­ã€‚</p><h3 id="ç›´æ¥å†…å­˜"><a class="markdownIt-Anchor" href="#ç›´æ¥å†…å­˜"></a> ç›´æ¥å†…å­˜</h3><ul><li>ç›´æ¥å†…å­˜å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯JVMä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚</li><li>ç›´æ¥å†…å­˜æ˜¯æœ¬åœ°å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼Œæœ¬åœ°å†…å­˜åŒ…æ‹¬ç›´æ¥å†…å­˜å’Œå…ƒç©ºé—´</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦å°†æ°¸ä¹…ä»£æ›¿æ¢ä¸ºå…ƒç©ºé—´"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¦å°†æ°¸ä¹…ä»£æ›¿æ¢ä¸ºå…ƒç©ºé—´"></a> ä¸ºä»€ä¹ˆè¦å°†æ°¸ä¹…ä»£æ›¿æ¢ä¸ºå…ƒç©ºé—´ï¼Ÿ</h3><ul><li>æ°¸ä¹…ä»£æœ‰ä¸€ä¸ª JVM æœ¬èº«è®¾ç½®çš„å›ºå®šä¸Šé™ï¼Œæ— æ³•è¿›è¡Œè°ƒæ•´ï¼Œè€Œå…ƒç©ºé—´ä½¿ç”¨çš„æ˜¯æœ¬åœ°å†…å­˜ï¼Œå—æœ¬æœºå¯ç”¨å†…å­˜çš„é™åˆ¶ï¼Œè™½ç„¶å…ƒç©ºé—´ä»æ—§å¯èƒ½æº¢å‡ºï¼Œä½†æ˜¯æ¯”åŸæ¥å‡ºç°çš„å‡ ç‡ä¼šæ›´å°ã€‚</li><li>æ°¸ä¹…ä»£ä¼šä¸º GC å¸¦æ¥ä¸å¿…è¦çš„å¤æ‚åº¦ï¼Œä¾‹å¦‚æ°¸ä¹…ä»£çš„ GC ä¼šå› ä¸ºé¢‘ç¹çš„ç±»åŠ è½½è€Œå¯¼è‡´ Full GCï¼Œè€Œå…ƒç©ºé—´çš„ GC å°†ä¼šæ›´ç®€å•é«˜æ•ˆã€‚</li></ul><h2 id="ç±»åŠ è½½"><a class="markdownIt-Anchor" href="#ç±»åŠ è½½"></a> ç±»åŠ è½½</h2><h3 id="ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ç±»åŠ è½½å™¨æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ç±»åŠ è½½å™¨æœ‰å“ªäº›"></a> ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</h3><p>ç±»åŠ è½½å™¨çš„ä½œç”¨æ˜¯å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°JVMä¸­ï¼Œä»è€Œè®©Javaç¨‹åºå¯åŠ¨èµ·æ¥<br />ç±»åŠ è½½å™¨ä¸€å…±æœ‰å››ç§ï¼š</p><ul><li>å¯åŠ¨ç±»åŠ è½½ç±»BootStrap ClassLoaderï¼šè´Ÿè´£åŠ è½½Javaçš„æ ¸å¿ƒç±»åº“ï¼Œé€šå¸¸æ˜¯<code>JAVA_HOME/jre/lib/</code>ä¸‹çš„åº“</li><li>æ‰©å±•ç±»åŠ è½½å™¨Extension ClassLoaderï¼šè´Ÿè´£åŠ è½½Javaçš„æ‰©å±•ç±»åº“ï¼Œé€šå¸¸æ˜¯<code>JAVA_HOME/jre/lib/ext/</code>ä¸‹çš„åº“</li><li>åº”ç”¨ç±»åŠ è½½å™¨Application ClassLoaderï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸‹çš„ç±»ï¼Œé€šå¸¸æ˜¯<code>CLASSPATH</code>ä¸‹çš„åº“</li><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼šç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨</li></ul><h3 id="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ä¸ºä»€ä¹ˆè¦ç”¨åŒäº²å§”æ´¾æœºåˆ¶"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ä¸ºä»€ä¹ˆè¦ç”¨åŒäº²å§”æ´¾æœºåˆ¶"></a> ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</h3><p>åŠ è½½æŸä¸€ä¸ªç±»æ—¶ï¼Œä¼šå§”æ‰˜ä¸Šä¸€çº§çš„ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œå¦‚æœä¸Šçº§ä¹Ÿæœ‰ä¸Šçº§ï¼Œåˆ™ä¸€ç›´åˆ°ä¸Šçº§å»å°è¯•åŠ è½½ï¼Œå¦‚æœä¸Šçº§ç±»åŠ è½½å™¨æ— æ³•åŠ è½½ï¼Œæ‰ç”±å½“å‰ç±»åŠ è½½å™¨å»åŠ è½½ã€‚</p><p>JVMä½¿ç”¨åŒäº²å§”æ´¾çš„åŸå› ï¼š</p><ul><li>é¿å…ç±»çš„é‡å¤åŠ è½½ï¼Œå½“çˆ¶ç±»å·²ç»åŠ è½½åï¼Œå­ç±»å°±æ— éœ€åŠ è½½äº†</li><li>ä¸ºäº†å®‰å…¨ï¼Œä¿è¯æ ¸å¿ƒç±»åº“çš„APIä¸ä¼šè¢«ä¿®æ”¹</li></ul><h3 id="å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"><a class="markdownIt-Anchor" href="#å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"></a> å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</h3><ul><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œç»§æ‰¿ ClassLoaderï¼Œé‡å†™ findClass æ–¹æ³•</li><li>ä½¿ç”¨çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ¥åŠ è½½ç‰¹å®šçš„ç±»</li><li>ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼Œå¹¶åœ¨ä»£ç†ç±»ä¸­å®ç°è‡ªå®šä¹‰ç±»åŠ è½½é€»è¾‘</li></ul><h3 id="jvmç±»åŠ è½½çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#jvmç±»åŠ è½½çš„è¿‡ç¨‹"></a> JVMç±»åŠ è½½çš„è¿‡ç¨‹</h3><ul><li>åŠ è½½ï¼Œå³åŠ è½½å­—èŠ‚ç æ–‡ä»¶</li><li>éªŒè¯ï¼Œç¡®ä¿å­—èŠ‚ç æ–‡ä»¶ç¬¦åˆ JVM è§„èŒƒ</li><li>å‡†å¤‡ï¼Œä¸ºå˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼</li><li>è§£æï¼ŒæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨å˜ä¸ºç›´æ¥å¼•ç”¨</li><li>åˆå§‹åŒ–ï¼Œä¸ºé™æ€å˜é‡å’Œé™æ€ä»£ç å—è¿›è¡Œåˆå§‹åŒ–</li><li>ä½¿ç”¨</li><li>å¸è½½</li></ul><h2 id="jvmåƒåœ¾å›æ”¶"><a class="markdownIt-Anchor" href="#jvmåƒåœ¾å›æ”¶"></a> JVMåƒåœ¾å›æ”¶</h2><p>åœ¨å †çš„æ–°ç”Ÿä»£ä¸­ï¼Œç”±Eden åŒºã€ä¸¤ä¸ª Survivor åŒºç»„æˆï¼Œ ä¸¤ä¸ª Survivor åŒºä¸­åŒ…æ‹¬S0 å’Œ S1ã€‚</p><h3 id="å†…å­˜åˆ†é…å’Œå›æ”¶åŸåˆ™"><a class="markdownIt-Anchor" href="#å†…å­˜åˆ†é…å’Œå›æ”¶åŸåˆ™"></a> å†…å­˜åˆ†é…å’Œå›æ”¶åŸåˆ™</h3><ul><li>å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åŒºåˆ†é…ï¼Œå½“ Eden åŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡ Minor GCï¼ŒMinor GC åï¼Œåé¢åˆ†é…çš„å¯¹è±¡å¦‚æœèƒ½å¤Ÿå­˜åœ¨ Eden åŒºçš„è¯ï¼Œè¿˜æ˜¯ä¼šåœ¨ Eden åŒºåˆ†é…å†…å­˜ã€‚</li><li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œå¤§å¯¹è±¡æ˜¯æŒ‡éœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²æˆ–æ•°ç»„ã€‚</li><li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£ï¼Œè™šæ‹Ÿæœºç»™æ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¹´é¾„è®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨ Eden åŒºå‡ºç”Ÿåï¼Œç»è¿‡ä¸€æ¬¡ Minor GC ä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢« Survivor å®¹çº³çš„è¯ï¼Œå°†è¢«ç§»åŠ¨åˆ° Survivor åŒºï¼Œå¹¶ä¸”å¹´é¾„è®¾ä¸º 1ï¼Œå¯¹è±¡åœ¨ Survivor åŒºæ¯ç†¬è¿‡ä¸€æ¬¡ Minor GCï¼Œå¹´é¾„å°±å¢åŠ  1 å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼ˆé»˜è®¤ä¸º 15 å²ï¼‰ï¼Œå°±ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ã€‚</li></ul><h3 id="minorgc-mixedgc-fullgcçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#minorgc-mixedgc-fullgcçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a> MinorGCã€MixedGCã€FullGCçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>MinorGCï¼šå‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ï¼Œå›æ”¶åœé¡¿æ—¶é—´çŸ­ã€‚</li><li>MixedGCï¼šæ–°ç”Ÿä»£+è€å¹´ä»£éƒ¨åˆ†åŒºåŸŸçš„åƒåœ¾å›æ”¶ï¼ŒG1å›æ”¶å™¨ç‰¹æœ‰</li><li>FullGCï¼šæ–°ç”Ÿä»£+è€å¹´ä»£å®Œæ•´åŒºåŸŸçš„åƒåœ¾å›æ”¶ï¼Œå›æ”¶åœé¡¿æ—¶é—´é•¿</li></ul><h3 id="fullgcä»€ä¹ˆæ—¶å€™è§¦å‘"><a class="markdownIt-Anchor" href="#fullgcä»€ä¹ˆæ—¶å€™è§¦å‘"></a> FullGCä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿ</h3><ul><li>æ˜¾å¼è°ƒç”¨ System.gc()ï¼Œå»ºè®®JVMè¿›è¡ŒFullGCï¼Œä½†æ˜¯ä¸ä¸€å®šä¼šæ‰§è¡Œ</li><li>æœªè®¾ç½®å †çš„åˆå§‹åŒ–å¤§å°</li><li>è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼Œæ— æ³•åˆ†é…å¯¹è±¡</li></ul><h3 id="æ­»äº¡å¯¹è±¡çš„åˆ¤æ–­æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ­»äº¡å¯¹è±¡çš„åˆ¤æ–­æ–¹æ³•"></a> æ­»äº¡å¯¹è±¡çš„åˆ¤æ–­æ–¹æ³•</h3><ul><li>å¼•ç”¨è®¡æ•°æ³•ï¼šå½“å¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œè®¡æ•°å™¨åŠ  1ï¼Œå½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å‡ 1ï¼Œå½“è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œè¯´æ˜å¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚ä½†è¿™ç§æ–¹æ³•æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</li><li>å¯è¾¾æ€§åˆ†ææ³•ï¼šé€šè¿‡ä¸€ç³»åˆ—çš„ç§°ä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚å³GC rootsåˆ°æŸä¸ªå¯¹è±¡ä¸å¯è¾¾ï¼Œåˆ™è¯´æ˜æ­¤å¯¹è±¡æ˜¯å¯ä»¥è¢«å›æ”¶çš„ã€‚</li><li>å³ä½¿åœ¨å¯è¾¾æ€§åˆ†ææ³•ä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶éæ˜¯â€œéæ­»ä¸å¯â€çš„ï¼Œè¿™æ—¶å€™å®ƒä»¬æš‚æ—¶å¤„äºâ€œç¼“åˆ‘é˜¶æ®µâ€ï¼Œè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼›</li></ul><h3 id="gc-rootsåŒ…æ‹¬å“ªäº›"><a class="markdownIt-Anchor" href="#gc-rootsåŒ…æ‹¬å“ªäº›"></a> GC RootsåŒ…æ‹¬å“ªäº›ï¼Ÿ</h3><ul><li>å…¨å±€æ€§å¼•ç”¨ï¼Œå¦‚å¯¹æ–¹æ³•åŒºçš„é™æ€å±æ€§ã€å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¦‚æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„å¼•ç”¨çš„å¯¹è±¡</li><li>å·²ç»å¯åŠ¨ä¸”æœªåœæ­¢çš„çº¿ç¨‹</li></ul><h3 id="åƒåœ¾å›æ”¶ç®—æ³•"><a class="markdownIt-Anchor" href="#åƒåœ¾å›æ”¶ç®—æ³•"></a> åƒåœ¾å›æ”¶ç®—æ³•</h3><ul><li>æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼šæ ‡è®°å‡ºæ‰€æœ‰æ´»åŠ¨å¯¹è±¡ï¼Œç„¶åç»Ÿä¸€å›æ”¶æœªæ ‡è®°å¯¹è±¡ã€‚è¿™ç§ç®—æ³•ä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´ä»¥ååœ¨åˆ†é…å¤§å¯¹è±¡æ—¶å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³çš„æƒ…å†µã€‚</li><li>å¤åˆ¶ç®—æ³•ï¼šå°†å†…å­˜åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œå½“è¿™ä¸€å—å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šé¢ï¼Œç„¶åæŠŠå·²ä½¿ç”¨çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚è¿™ç§ç®—æ³•æ²¡æœ‰å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œä½†æ˜¯ä¼šæµªè´¹ä¸€åŠçš„å†…å­˜ç©ºé—´ã€‚</li><li>æ ‡è®°-æ•´ç†ç®—æ³•ï¼šæ ‡è®°å‡ºæ‰€æœ‰æ´»åŠ¨å¯¹è±¡ï¼Œç„¶åå°†å­˜æ´»çš„å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚è¿™ç§ç®—æ³•æ²¡æœ‰å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œä¹Ÿä¸ä¼šæµªè´¹å†…å­˜ï¼Œä½†æ˜¯éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥æ¯”è¾ƒè€—æ—¶ã€‚</li><li>åˆ†ä»£æ”¶é›†ç®—æ³•ï¼šæ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ï¼Œä¸€èˆ¬æ˜¯æŠŠ Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£ç”±äºæ¯æ¬¡æ”¶é›†ä¼šæœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œæ‰€ä»¥å¯é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œè€Œè€å¹´ä»£å› ä¸ºå¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œæ‰€ä»¥å¯é€‰ç”¨æ ‡è®°æ¸…é™¤æˆ–æ ‡è®°æ•´ç†ç®—æ³•ã€‚</li></ul><h3 id="åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›"></a> åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>Serialæ”¶é›†å™¨ (å¤åˆ¶ç®—æ³•): æ–°ç”Ÿä»£å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œæ ‡è®°å’Œæ¸…ç†éƒ½æ˜¯å•çº¿ç¨‹ï¼Œä¼˜ç‚¹æ˜¯ç®€å•é«˜æ•ˆï¼›</li><li>ParNewæ”¶é›†å™¨ (å¤åˆ¶ç®—æ³•): æ–°ç”Ÿä»£æ”¶å¹¶è¡Œé›†å™¨ï¼Œå®é™…ä¸Šæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œåœ¨å¤šæ ¸CPUç¯å¢ƒä¸‹æœ‰ç€æ¯”Serialæ›´å¥½çš„è¡¨ç°ï¼›</li><li>Parallel Scavengeæ”¶é›†å™¨ (å¤åˆ¶ç®—æ³•): æ–°ç”Ÿä»£å¹¶è¡Œæ”¶é›†å™¨ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œé«˜æ•ˆåˆ©ç”¨ CPUã€‚ååé‡ = ç”¨æˆ·çº¿ç¨‹æ—¶é—´/(ç”¨æˆ·çº¿ç¨‹æ—¶é—´+GCçº¿ç¨‹æ—¶é—´)ï¼Œé«˜ååé‡å¯ä»¥é«˜æ•ˆç‡çš„åˆ©ç”¨CPUæ—¶é—´ï¼Œå°½å¿«å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡ï¼Œé€‚åˆåå°åº”ç”¨ç­‰å¯¹äº¤äº’ç›¸åº”è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼›</li><li>Serial Oldæ”¶é›†å™¨ (æ ‡è®°-æ•´ç†ç®—æ³•): è€å¹´ä»£å•çº¿ç¨‹æ”¶é›†å™¨ï¼ŒSerialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼›</li><li>Parallel Oldæ”¶é›†å™¨ (æ ‡è®°-æ•´ç†ç®—æ³•): è€å¹´ä»£å¹¶è¡Œæ”¶é›†å™¨ï¼Œååé‡ä¼˜å…ˆï¼ŒParallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼›</li><li>CMS(Concurrent Mark Sweep)æ”¶é›†å™¨ (æ ‡è®°-æ¸…é™¤ç®—æ³•): è€å¹´ä»£å¹¶è¡Œæ”¶é›†å™¨ï¼Œä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼Œå…·æœ‰é«˜å¹¶å‘ã€ä½åœé¡¿çš„ç‰¹ç‚¹ï¼Œè¿½æ±‚æœ€çŸ­GCå›æ”¶åœé¡¿æ—¶é—´ã€‚</li><li>G1(Garbage First)æ”¶é›†å™¨ (æ ‡è®°-æ•´ç†ç®—æ³•): Javaå †å¹¶è¡Œæ”¶é›†å™¨ï¼ŒG1æ”¶é›†å™¨æ˜¯JDK1.7æä¾›çš„ä¸€ä¸ªæ–°æ”¶é›†å™¨ï¼ŒG1æ”¶é›†å™¨åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚æ­¤å¤–ï¼ŒG1æ”¶é›†å™¨ä¸åŒäºä¹‹å‰çš„æ”¶é›†å™¨çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ï¼šG1å›æ”¶çš„èŒƒå›´æ˜¯æ•´ä¸ªJavaå †(åŒ…æ‹¬æ–°ç”Ÿä»£ï¼Œè€å¹´ä»£)ï¼Œè€Œå‰å…­ç§æ”¶é›†å™¨å›æ”¶çš„èŒƒå›´ä»…é™äºæ–°ç”Ÿä»£æˆ–è€å¹´ä»£ã€‚</li><li>ZGC: ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œå›æ”¶åœé¡¿æ—¶é—´å°äº1msï¼Œæ”¯æŒè¶…å¤§å †å†…å­˜ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æœåŠ¡</li></ul><h3 id="è¯¦ç»†ä»‹ç»ä¸€ä¸‹g1åƒåœ¾å›æ”¶å™¨"><a class="markdownIt-Anchor" href="#è¯¦ç»†ä»‹ç»ä¸€ä¸‹g1åƒåœ¾å›æ”¶å™¨"></a> è¯¦ç»†ä»‹ç»ä¸€ä¸‹G1åƒåœ¾å›æ”¶å™¨</h3><p>G1åƒåœ¾å›æ”¶å™¨ä¸­ï¼Œåˆ’åˆ†äº†å¤šä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸéƒ½å¯ä»¥å……å½“edenåŒºã€survivoråŒºå’Œè€å¹´ä»£</p><p>ä¸»è¦åˆ†3ä¸ªé˜¶æ®µï¼š</p><ul><li>å¹´è½»ä»£åƒåœ¾å›æ”¶<br />å½“äº§ç”Ÿäº†ä¸€äº›å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å…ˆè¢«åˆ†é…åˆ°edenåŒºï¼Œå½“éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šè¿›è¡ŒminorGCï¼Œå°†å­˜æ´»çš„å¯¹è±¡æ ‡è®°å‡ºæ¥ï¼Œå¤åˆ¶åˆ°survivoråŒºï¼Œæ ‡è®°å’Œå¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šè§¦å‘STW(stop the world)ï¼Œä½†æ—¶é—´ä¼šå¾ˆçŸ­ï¼Œå¤šæ¬¡minorGCä¸­è¿˜å­˜æ´»çš„å¯¹è±¡ä¼šè¢«æ”¾å…¥è€å¹´ä»£</li><li>å¹¶å‘æ ‡è®°é˜¶æ®µ<br />å½“è€å¹´ä»£å†…å­˜è¶…è¿‡é˜ˆå€¼åï¼Œä¼šè¿›è¡Œå¹¶å‘æ ‡è®°ï¼Œæ ‡è®°å­˜æ´»çš„å¯¹è±¡ï¼Œå¹¶å‘æ ‡è®°ä¸ä¼šè§¦å‘STW</li><li>æ··åˆæ”¶é›†é˜¶æ®µ<br />æ··åˆæ”¶é›†é˜¶æ®µæ—¢è¿›è¡Œå¹´è½»ä»£çš„æ”¶é›†ï¼Œåˆè¿›è¡Œè€å¹´ä»£çš„æ”¶é›†ã€‚å› ä¸ºG1å›æ”¶å™¨æœ‰ä¸€ä¸ª<strong>é¢„è®¾çš„å›æ”¶åœé¡¿æ—¶é—´</strong>ï¼Œä¸ºäº†ä¿è¯ä¸è¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œåœ¨è¿›è¡Œè€å¹´ä»£æ”¶é›†æ—¶ï¼Œä¼šä¼˜å…ˆæ”¶é›†å›æ”¶ä»·é«˜çš„åŒºåŸŸ(å­˜æ´»å¯¹è±¡å°‘)ã€‚</li><li>å¦‚æœå›æ”¶é€Ÿåº¦èµ¶ä¸ä¸Šåˆ›å»ºå¯¹è±¡çš„é€Ÿåº¦ï¼Œä¼šè§¦å‘Full GCï¼Œå›æ”¶æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚</li></ul><h3 id="åƒåœ¾å›æ”¶å™¨cmså’Œg1çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#åƒåœ¾å›æ”¶å™¨cmså’Œg1çš„åŒºåˆ«"></a> åƒåœ¾å›æ”¶å™¨CMSå’ŒG1çš„åŒºåˆ«?</h3><ol><li>ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒCMSä¸»è¦ç”¨äºè€å¹´ä»£æ”¶é›†ï¼ŒG1å¯ä»¥æ”¶é›†è€å¹´ä»£å’Œæ–°ç”Ÿä»£</li><li>CMSåŸºäºâ€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•å®ç°ï¼ŒG1åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°</li><li>CMSä»¥æœ€å°åœé¡¿æ—¶é—´ä¸ºç›®æ ‡ï¼ŒG1å¯è®¾ç½®åƒåœ¾å›æ”¶çš„åœé¡¿æ—¶é—´<br />ä½¿ç”¨åœºæ™¯ä¸åŒï¼š</li></ol><ul><li>CMSé€‚åˆä½å»¶è¿Ÿã€è€å¹´ä»£æ”¶é›†ã€å¯¹å†…å­˜ç¢ç‰‡ä¸æ•æ„Ÿçš„åœºæ™¯</li><li>G1é€‚åˆå¤§å †å†…å­˜ï¼Œå¯¹å†…å­˜ç¢ç‰‡æ•æ„Ÿï¼Œéœ€è¦å¹³è¡¡æ€§èƒ½çš„åœºæ™¯</li></ul><h3 id="å¦‚ä½•é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨"><a class="markdownIt-Anchor" href="#å¦‚ä½•é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨"></a> å¦‚ä½•é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨ï¼Ÿ</h3><ul><li>å°å †+å•æ ¸å¿ƒCPUä½¿ç”¨Serial</li><li>é«˜ååé‡ï¼ˆæ‰¹å¤„ç†ä»»åŠ¡ï¼‰ä½¿ç”¨Parallel</li><li>ä½å»¶è¿Ÿåº”ç”¨ä½¿ç”¨CMS</li><li>å¤§å †ï¼ˆå¤§äº10Gï¼‰å†…å­˜+ç»¼åˆåœºæ™¯ä½¿ç”¨G1</li><li>è¶…å¤§å †ï¼ˆå¤§äº100Gï¼‰+ä½å»¶è¿Ÿä½¿ç”¨ZGC</li></ul><h2 id="jvmè°ƒä¼˜çš„å‚æ•°æœ‰å“ªäº›æœ‰å“ªäº›å·¥å…·"><a class="markdownIt-Anchor" href="#jvmè°ƒä¼˜çš„å‚æ•°æœ‰å“ªäº›æœ‰å“ªäº›å·¥å…·"></a> JVMè°ƒä¼˜çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿæœ‰å“ªäº›å·¥å…·ï¼Ÿ</h2><p>å‚æ•°ä¸»è¦æœ‰ï¼š</p><ul><li>å †çš„å¤§å°Xmså’ŒXmx,åˆ†åˆ«è¡¨ç¤ºåˆå§‹å †å¤§å°å’Œæœ€å¤§å †å¤§å°</li><li>è™šæ‹Ÿæœºæ ˆå¤§å°-Xssï¼Œä¸€èˆ¬256kæˆ–512k</li><li>EdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºçš„æ¯”ä¾‹ï¼Œé»˜è®¤æ˜¯8:1:1</li><li>æ–°ç”Ÿä»£æ™‹å‡è€å¹´ä»£çš„é˜ˆå€¼ï¼Œä¸è¶…è¿‡15</li><li>åƒåœ¾å›æ”¶å™¨çš„é€‰æ‹©</li></ul><p>å·¥å…·ä¸»è¦æœ‰ï¼š</p><ul><li>jpsï¼šç±»ä¼¼ps</li><li>jstatï¼šæŸ¥çœ‹JVMçš„è¿è¡ŒçŠ¶æ€</li><li>jmapï¼šæŸ¥çœ‹å †çš„å†…å­˜å¿«ç…§</li><li>jstackï¼šæŸ¥çœ‹çº¿ç¨‹çš„å †æ ˆä¿¡æ¯</li><li>VisualVMï¼šå¯è§†åŒ–å·¥å…·ï¼ŒæŸ¥çœ‹JVMçš„è¿è¡ŒçŠ¶æ€å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ</li></ul><h2 id="javaå†…å­˜æ³„æ¼çš„æ’æŸ¥æ€è·¯"><a class="markdownIt-Anchor" href="#javaå†…å­˜æ³„æ¼çš„æ’æŸ¥æ€è·¯"></a> Javaå†…å­˜æ³„æ¼çš„æ’æŸ¥æ€è·¯ï¼Ÿ</h2><p>å†…å­˜æ³„æ¼é€šå¸¸æŒ‡çš„æ˜¯å †ä¸Šçš„ä¸€äº›å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶<br />æ’æŸ¥æ€è·¯å¦‚ä¸‹ï¼š</p><ul><li>é€šè¿‡jmapè·å–å †çš„å†…å­˜å¿«ç…§dump</li><li>é€šè¿‡VisualVMåˆ†ædumpæ–‡ä»¶</li><li>æŸ¥çœ‹å †ä¸­ä¿¡æ¯ï¼Œå®šä½å‡ºé—®é¢˜çš„ä»£ç </li></ul><h2 id="cpué£™å‡çš„æ’æŸ¥æ€è·¯"><a class="markdownIt-Anchor" href="#cpué£™å‡çš„æ’æŸ¥æ€è·¯"></a> CPUé£™å‡çš„æ’æŸ¥æ€è·¯ï¼Ÿ</h2><ul><li>å…ˆé€šè¿‡topæŸ¥çœ‹é‚£ä¸ªè¿›ç¨‹å ç”¨cpuæœ€é«˜ï¼Œè·å–ä»–çš„è¿›ç¨‹id</li><li>é€šè¿‡pså’ŒgrepæŸ¥çœ‹è¿›ç¨‹ä¸­çš„çº¿ç¨‹ä¿¡æ¯ï¼Œæ‰¾åˆ°å ç”¨cpuæœ€é«˜çš„çº¿ç¨‹id</li><li>é€šè¿‡jstackæŸ¥çœ‹è¿›ç¨‹ï¼Œå®šä½å‡ºé—®é¢˜çš„ä»£ç </li></ul><h2 id="jmm"><a class="markdownIt-Anchor" href="#jmm"></a> JMM</h2><h3 id="ä»€ä¹ˆæ˜¯jmm"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯jmm"></a> ä»€ä¹ˆæ˜¯JMM?</h3><p>JMMæŒ‡çš„æ˜¯javaå†…å­˜æ¨¡å‹ï¼Œå®ƒå®šä¹‰äº†javaå¹¶å‘ç¼–ç¨‹ç›¸å…³çš„ä¸€äº›è§„èŒƒï¼ŒæŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§„èŒƒå’Œç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¯´jmmæŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¯´jmmæŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»"></a> ä¸ºä»€ä¹ˆè¯´JMMæŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Ÿ</h3><ul><li>çº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å¿…é¡»å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­</li><li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æœ¬åœ°å†…å­˜ï¼Œæœ¬åœ°å†…å­˜ä¸­ä¸»å†…å­˜ä¸­å…±äº«å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹åªèƒ½æ“ä½œæœ¬åœ°å†…å­˜ä¸­çš„å˜é‡ï¼Œä¸èƒ½ç›´æ¥æ“ä½œä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚</li><li>çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚</li></ul><h3 id="happens-beforeåŸåˆ™æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#happens-beforeåŸåˆ™æ˜¯ä»€ä¹ˆ"></a> happens-beforeåŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œä¸»è¦ç”¨äºè§£å†³å¤šçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ã€‚<br />ä»–çš„è®¾è®¡æ€æƒ³æ˜¯ï¼š</p><ul><li>åªè¦ä¸æ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨æ€ä¹ˆè¿›è¡Œé‡æ’åºä¼˜åŒ–éƒ½è¡Œã€‚</li><li>å¯¹äºä¼šæ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„é‡æ’åºï¼ŒJMM è¦æ±‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¿…é¡»ç¦æ­¢è¿™ç§é‡æ’åº</li></ul><h2 id="åŸºç¡€æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#åŸºç¡€æ•°æ®ç±»å‹"></a> åŸºç¡€æ•°æ®ç±»å‹</h2><p>javaä¸­å…«ç§åŸºç¡€æ•°æ®ç±»å‹å¦‚ä¸‹å›¾ï¼š<br /><img src="https://cdn.xiaolincoding.com//picgo/1715930589177-73932d2c-b0c0-4f58-a5c1-ab514b1a389c.png" alt="åŸºç¡€æ•°æ®ç±»å‹" /></p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>1ä¸ªå­—èŠ‚çš„æœ‰booleanå’Œbyte,2ä¸ªå­—èŠ‚çš„æœ‰shortå’Œchar,4ä¸ªå­—èŠ‚çš„æœ‰intå’Œfloat,8ä¸ªå­—èŠ‚çš„æœ‰longå’Œdoubleã€‚</li><li>æµ®ç‚¹æ•°çš„é»˜è®¤ç±»å‹ä¸ºdoubleï¼ˆå¦‚æœéœ€è¦å£°æ˜ä¸€ä¸ªå¸¸é‡ä¸ºfloatå‹ï¼Œåˆ™å¿…é¡»è¦åœ¨æœ«å°¾åŠ ä¸Šfæˆ–Fï¼‰ã€‚</li><li>æ•´æ•°çš„é»˜è®¤ç±»å‹ä¸ºintï¼ˆå£°æ˜Longå‹åœ¨æœ«å°¾åŠ ä¸Šlæˆ–è€…Lï¼‰</li><li>8ç§åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ï¼Œé™¤äº†charæ˜¯Characterï¼Œintæ˜¯Integerï¼Œå…¶ä½™çš„éƒ½æ˜¯é¦–å­—æ¯å¤§å†™ã€‚</li><li>charæ˜¯æ— ç¬¦å·çš„ï¼Œæœ€å°å€¼æ˜¯0</li></ul><p>longå’Œintå¯ä»¥äº’è½¬å—ï¼Ÿ<br />ç­”ï¼šå¯ä»¥ï¼Œlongçš„èŒƒå›´æ›´å¤§ï¼Œintå¯ä»¥ç›´æ¥èµ‹å€¼ç»™long,longè½¬intéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>å­—èŠ‚æ”¯ä»˜å®ä¹ ä¸€é¢ï¼šStringç±»å¯ä»¥è¢«ç»§æ‰¿å—ï¼Ÿ<br />ç­”ï¼šStringç±»æ˜¯finalç±»ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿ã€‚æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»éƒ½æ˜¯finalç±»ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿ã€‚</p><p>ä¸ºä»€ä¹ˆç”¨bigDecimal ä¸ç”¨double ï¼Ÿ<br />ç­”ï¼šdoubleç±»å‹æ˜¯ä¸ç²¾ç¡®çš„ï¼Œå› ä¸ºdoubleç±»å‹æ˜¯é‡‡ç”¨äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¿›è¡Œè®¡ç®—çš„ï¼Œè€ŒäºŒè¿›åˆ¶æµ®ç‚¹æ•°æ— æ³•ç²¾ç¡®è¡¨ç¤ºå¤§éƒ¨åˆ†çš„åè¿›åˆ¶å°æ•°ï¼Œæ‰€ä»¥åœ¨è®¡ç®—æ—¶ä¼šæœ‰ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ã€‚è€ŒBigDecimalæ˜¯é‡‡ç”¨åè¿›åˆ¶æµ®ç‚¹æ•°è¿›è¡Œè®¡ç®—çš„ï¼Œå¯ä»¥ç²¾ç¡®è¡¨ç¤ºå¤§éƒ¨åˆ†çš„åè¿›åˆ¶å°æ•°ã€‚</p><p>ä¸ºä»€ä¹ˆè¦æœ‰Integerï¼Ÿ<br />ç­”ï¼šIntegeræ˜¯intçš„åŒ…è£…ç±»ï¼Œå°è£…ä¹‹ååŒ…å«ä¸€äº›æ•°æ®å¤„ç†çš„æ–¹æ³•ï¼Œä¾¿äºå¤„ç†æ•°æ®;<br />Javaä¸­å¤§éƒ¨åˆ†æ–¹æ³•å’Œç±»ä»¥åŠé›†åˆåªèƒ½å¤„ç†ç±»å‹å¯¹è±¡ï¼Œæ¯”å¦‚ArrayListï¼›<br />åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¸èƒ½ç›´æ¥è½¬æ¢ï¼Œæ¯”å¦‚intè¦è½¬ä¸ºStringç±»éœ€è¦å…ˆä¸“ç¨‹Integerã€‚</p><h2 id="æœ‰ä¸€ä¸ªå­¦ç”Ÿç±»æƒ³æŒ‰ç…§åˆ†æ•°æ’åºå†æŒ‰å­¦å·æ’åºåº”è¯¥æ€ä¹ˆåš"><a class="markdownIt-Anchor" href="#æœ‰ä¸€ä¸ªå­¦ç”Ÿç±»æƒ³æŒ‰ç…§åˆ†æ•°æ’åºå†æŒ‰å­¦å·æ’åºåº”è¯¥æ€ä¹ˆåš"></a> æœ‰ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œæƒ³æŒ‰ç…§åˆ†æ•°æ’åºï¼Œå†æŒ‰å­¦å·æ’åºï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</h2><p>ç­”ï¼šå¯ä»¥è®©å­¦ç”Ÿç±»å®ç°Comparableæ¥å£ï¼Œé‡å†™compareToæ–¹æ³•ï¼Œç„¶ååœ¨compareToæ–¹æ³•ä¸­æŒ‰ç…§åˆ†æ•°æ’åºï¼Œå†æŒ‰ç…§å­¦å·æ’åºã€‚</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">Student</span>&gt;</span>&#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(Student t)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.score!=t.score)&#123;<br>            <span class="hljs-function"><span class="hljs-keyword">return</span> Integer.<span class="hljs-title">compare</span><span class="hljs-params">(t.score,<span class="hljs-keyword">this</span>.score)</span></span>; <span class="hljs-comment">//æŒ‰åˆ†æ•°é™åº</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-function"><span class="hljs-keyword">return</span> Integer.<span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-keyword">this</span>.id,t.id)</span></span>; <span class="hljs-comment">//åˆ†æ•°ç›¸åŒæŒ‰å­¦å·å‡åº</span><br>        &#125;<br>    &#125;<br>&#125;<br>List&lt;Student&gt; st = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>Collections.sort(st);<br></code></pre></td></tr></table></figure><h2 id="javaé›†åˆ"><a class="markdownIt-Anchor" href="#javaé›†åˆ"></a> Javaé›†åˆ</h2><h3 id="æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«"></a> æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„æ•°æ®ç»“æ„ï¼Œä¸€æ—¦åˆ›å»ºé•¿åº¦å°±æ— æ³•æ”¹å˜ï¼Œè€Œé›†åˆæ˜¯åŠ¨æ€é•¿åº¦çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€å¢åŠ æˆ–å‡å°‘å…ƒç´ ã€‚</li><li>æ•°ç»„å¯ä»¥åŒ…å«åŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡ï¼Œè€Œé›†åˆåªèƒ½åŒ…å«å¯¹è±¡ã€‚</li><li>æ•°ç»„å¯ä»¥ç›´æ¥è®¿é—®å…ƒç´ ï¼Œè€Œé›†åˆéœ€è¦é€šè¿‡è¿­ä»£å™¨æˆ–å…¶ä»–æ–¹æ³•è®¿é—®å…ƒç´ ã€‚</li></ul><h3 id="arraylistå’Œlinkedlistçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#arraylistå’Œlinkedlistçš„åŒºåˆ«"></a> ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>ArrayListåŸºäºæ•°ç»„ï¼Œè€ŒLinkedListåŸºäºé“¾è¡¨å®ç°ã€‚</li><li>æ’å…¥åˆ é™¤ã€éšæœºè®¿é—®æ•ˆç‡ä¸åŒ</li><li>ArrayListåˆ›å»ºæ—¶è¦åˆ†é…ä¸€æ®µè¿ç»­ç©ºé—´ï¼Œå ç”¨ç©ºé—´æ›´å¤§</li><li>å‰è€…é€‚åˆéœ€è¦é¢‘ç¹éšæœºè®¿é—®çš„åœºæ™¯ï¼Œåè€…é€‚åˆéœ€è¦é¢‘ç¹æ’å…¥åˆ é™¤çš„åœºæ™¯ã€‚</li></ul><h3 id="listä¸­éå†åˆ é™¤å…ƒç´ ä¼šæœ‰å“ªäº›é—®é¢˜"><a class="markdownIt-Anchor" href="#listä¸­éå†åˆ é™¤å…ƒç´ ä¼šæœ‰å“ªäº›é—®é¢˜"></a> Listä¸­éå†åˆ é™¤å…ƒç´ ä¼šæœ‰å“ªäº›é—®é¢˜ï¼Ÿ</h3><ul><li><p>ä½¿ç”¨forå¾ªç¯æŒ‰ç…§ä¸‹æ ‡åˆ é™¤å…ƒç´ æ—¶ï¼Œä¼šå¯¼è‡´åé¢çš„å…ƒç´ å‘å‰ç§»åŠ¨ï¼Œå¯¼è‡´å…ƒç´ æ¼åˆ ã€‚</p></li><li><p>å¦‚æœä½¿ç”¨iteratoréå†åˆ é™¤å…ƒç´ ï¼Œä½¿ç”¨listçš„removeæ–¹æ³•ï¼Œä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ã€‚<br />è¿™æ˜¯å› ä¸ºï¼ŒListè‡ªèº«ä¼šç»´æŠ¤ä¸€ä¸ªmodCountè®¡æ•°å™¨ï¼Œä½¿ç”¨<code>list.remove()</code>æ–¹æ³•æ—¶ï¼Œä¼šä¿®æ”¹modCountï¼Œè€Œiteratoråœ¨åˆ›å»ºæ—¶ä¼šè®°å½•æœ€å¼€å§‹çš„modCountï¼Œå¦‚æœéå†è¿‡ç¨‹ä¸­iteratoræ£€æŸ¥åˆ°modCountä¸ä¸€è‡´ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p></li><li><p>æ­£ç¡®çš„åˆ é™¤æ–¹æ³•æ˜¯ä½¿ç”¨iteratorçš„removeæ–¹æ³•ï¼Œè¿™æ ·ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p></li></ul><h3 id="arraylistçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#arraylistçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆ"></a> ArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å¦‚æœå½“å‰å…ƒç´ æ•°é‡è¾¾åˆ°å†…éƒ¨æ•°ç»„å®¹é‡ä¸Šé™ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚åˆ†ä»¥ä¸‹å‡ æ­¥éª¤ï¼š</p><ul><li>è®¡ç®—æ–°çš„å®¹é‡ï¼Œä¸€èˆ¬ä¼šæ‰©å¤§1.5å€</li><li>åˆ›å»ºæ–°çš„æ•°ç»„</li><li>å°†æ—§æ•°ç»„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„</li><li>æ›´æ–°å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„</li></ul><p>ä¹‹æ‰€ä»¥æ‰©å®¹æ˜¯ 1.5 å€ï¼Œæ˜¯å› ä¸º 1.5 å¯ä»¥å……åˆ†åˆ©ç”¨ç§»ä½æ“ä½œï¼Œå‡å°‘æµ®ç‚¹æ•°æˆ–è€…è¿ç®—æ—¶é—´å’Œè¿ç®—æ¬¡æ•°ã€‚</p><h3 id="copyonwritearraylistæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„"><a class="markdownIt-Anchor" href="#copyonwritearraylistæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„"></a> CopyonWriteArraylistæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</h3><ul><li>CopyonWriteArrayliståº•å±‚ä¹Ÿæ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„ä¿å­˜æ•°æ®ï¼Œä½¿ç”¨volatileä¿®é¥°ï¼Œä¿è¯å½“å‰çº¿ç¨‹å¯¹æ•°ç»„å¯¹è±¡é‡æ–°èµ‹å€¼åï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥åŠæ—¶æ„ŸçŸ¥åˆ°ã€‚</li><li>å¯¹è¯»æ“ä½œæ²¡æœ‰åŠ é”ï¼Œå¯¹å†™æ“ä½œåŠ äº†ä¸€ä¸ªReentrantLocké”ï¼Œä¿è¯å†™æ“ä½œçš„çº¿ç¨‹å®‰å…¨ã€‚</li></ul><h3 id="hashmapå®ç°åŸç†ä»‹ç»ä¸€ä¸‹"><a class="markdownIt-Anchor" href="#hashmapå®ç°åŸç†ä»‹ç»ä¸€ä¸‹"></a> HashMapå®ç°åŸç†ä»‹ç»ä¸€ä¸‹ï¼Ÿ</h3><ul><li>æ—©æœŸHashMapæ˜¯æ•°ç»„+é“¾è¡¨ï¼Œé€šè¿‡å“ˆå¸Œç®—æ³•å°†å…ƒç´ æ˜ å°„åˆ°æ•°ç»„ä¸­ï¼Œå¦‚æœå‘ç”Ÿå†²çªï¼Œå°±ä¼šåœ¨é“¾è¡¨ä¸­å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œå½“é“¾è¡¨å…ƒç´ è¿‡å¤šæŸ¥è¯¢æ•ˆç‡ä¼šé™ä½å¾ˆå¤šã€‚</li><li>JDK1.8ä¹‹åï¼ŒHashMapå¼•å…¥äº†çº¢é»‘æ ‘ï¼Œå½“é“¾è¡¨é•¿åº¦è¶…è¿‡8æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼ˆæŸ¥è¯¢å¤æ‚åº¦<code>log n</code>ï¼‰,æ•°é‡å°‘äº6ä¼šè½¬å›é“¾è¡¨ã€‚</li></ul><h3 id="hashmapä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"><a class="markdownIt-Anchor" href="#hashmapä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"></a> HashMapä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ</h3><p>HashMapçº¿ç¨‹ä¸å®‰å…¨ä¸»è¦æ˜¯ç”±äºå¤šä¸ªçº¿ç¨‹å¯¹HashMapçš„putæ“ä½œå¼•èµ·çš„ï¼Œæœ‰ä¸‹é¢ä¸¤ç§æƒ…å†µï¼š</p><ul><li>ä¸€ç§æ˜¯ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶putï¼Œå‡å¦‚çº¿ç¨‹1å…ˆå®Œæˆäº†å“ˆå¸Œå†²çªåˆ¤æ–­åï¼Œæ—¶é—´ç‰‡è€—å°½æŒ‚èµ·ï¼Œçº¿ç¨‹2è¿›è¡Œå“ˆå¸Œå†²çªåˆ¤æ–­ç„¶åputï¼Œå¦‚æœå‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼Œçº¿ç¨‹1æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œå®ƒè½®åˆ°æ—¶é—´ç‰‡åä¼šç»§ç»­put,è¿™æ ·å¯¼è‡´äº†æ•°æ®è¦†ç›–ã€‚</li><li>ä¸€ç§æ˜¯ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶put,åŒæ—¶è¯»åˆ°å½“å‰sizeä¸º10ï¼Œè¿™æ ·çº¿ç¨‹1è¯»å®Œsizeåæ—¶é—´ç‰‡è€—å°½æŒ‚èµ·ï¼Œçº¿ç¨‹2å®Œæˆput,sizeå˜ä¸º11ï¼Œçº¿ç¨‹1ç»§ç»­æ‰§è¡Œputï¼Œsizeè¿˜æ˜¯æ”¹æˆ11ï¼Œè¿™æ ·å¯¼è‡´å¢åŠ äº†ä¸¤ä¸ªå…ƒç´ ï¼Œä½†sizeåªå¢åŠ äº†1ã€‚</li></ul><h3 id="è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰å“ªäº›"></a> è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>é“¾åœ°å€æ³•ï¼šå°†å“ˆå¸Œå†²çªçš„å…ƒç´ å­˜å‚¨çš„åœ¨é“¾è¡¨æˆ–å…¶ä»–æ•°æ®ç»“æ„ä¸­</li><li>å¼€æ”¾å¯»å€æ³•ï¼šæ‰¾åˆ°å¦ä¸€ä¸ªå¯ç”¨çš„ä½ç½®æ¥å­˜å‚¨ï¼ŒåŒ…æ‹¬çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹ã€åŒé‡æ•£åˆ—ç­‰ã€‚</li><li>å†å“ˆå¸Œæ³•ï¼šä½¿ç”¨å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—æ–°çš„å“ˆå¸Œå€¼ã€‚</li><li>å“ˆå¸Œæ¡¶æ‰©å®¹ï¼šå½“å“ˆå¸Œå†²çªè¿‡å¤šæ—¶ï¼Œå¯ä»¥åŠ¨æ€åœ°æ‰©å¤§å“ˆå¸Œæ¡¶çš„æ•°é‡ï¼Œé‡æ–°åˆ†é…é”®å€¼å¯¹ã€‚</li></ul><h3 id="hashmapçš„putè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#hashmapçš„putè¿‡ç¨‹"></a> HashMapçš„putè¿‡ç¨‹ï¼Ÿ</h3><ol><li>è®¡ç®—è¦æ·»åŠ çš„keyçš„å“ˆå¸Œå€¼ï¼Œæ‰¾åˆ°åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•</li><li>å¦‚æœè¯¥ç´¢å¼•ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ·»åŠ </li><li>å¦‚æœè¯¥ç´¢å¼•ä½ç½®æœ‰å…ƒç´ ï¼Œæ£€æŸ¥keyæ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œç›´æ¥è¦†ç›–valueï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œå‘ç”Ÿå“ˆå¸Œå†²çªï¼Œé€šè¿‡é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾è¿™ä¸ªkeyï¼Œæ‰¾åˆ°åˆ™æ›´æ–°valueï¼Œä¸ºæ‰¾åˆ°åˆ™æ·»åŠ </li><li>æ£€æŸ¥é“¾è¡¨é•¿åº¦æ˜¯å¦è¶…è¿‡8ï¼Œè¶…è¿‡åˆ™è½¬æ¢ä¸ºçº¢é»‘æ ‘</li><li>æ£€æŸ¥è´Ÿè½½å› å­æ˜¯å¦è¶…è¿‡0.75ï¼Œè¶…è¿‡åˆ™æ‰©å®¹</li><li>æ‰©å®¹æ—¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¤§å°æ˜¯åŸæ•°ç»„çš„2å€ï¼Œç„¶åé‡æ–°è®¡ç®—æ—§æ•°ç»„çš„å“ˆå¸Œå€¼åˆ†é…åˆ°æ–°æ•°ç»„ä¸­ï¼Œæ›´æ–°å¼•ç”¨ã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆhashmapç”¨çº¢é»‘æ ‘ä¸ç”¨å¹³è¡¡äºŒå‰æ ‘"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆhashmapç”¨çº¢é»‘æ ‘ä¸ç”¨å¹³è¡¡äºŒå‰æ ‘"></a> ä¸ºä»€ä¹ˆHashMapç”¨çº¢é»‘æ ‘ä¸ç”¨å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ</h3><ul><li>å¹³è¡¡äºŒå‰æ ‘è¿½æ±‚å®Œå…¨å¹³è¡¡çš„çŠ¶æ€ï¼Œå·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1ï¼Œæ¯æ¬¡æ’å…¥åˆ é™¤éƒ½éœ€è¦å·¦æ—‹å³æ—‹è°ƒæ•´ï¼Œæ•ˆç‡å¾ˆä½</li><li>çº¢é»‘æ ‘è¿½æ±‚ä¸€ç§å¼±å¹³è¡¡çŠ¶æ€ï¼Œæ•´ä¸ªæ ‘çš„æœ€é•¿è·¯å¾„ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„2å€ï¼Œæ’å…¥åˆ é™¤æ•ˆç‡æ›´é«˜ã€‚</li></ul><h3 id="hashmap-keyå¯ä»¥ä¸ºnullå—"><a class="markdownIt-Anchor" href="#hashmap-keyå¯ä»¥ä¸ºnullå—"></a> HashMap keyå¯ä»¥ä¸ºnullå—ï¼Ÿ</h3><p>ç­”ï¼šHashMapçš„keyå¯ä»¥ä¸ºnullï¼ŒHashMapä½¿ç”¨hash()æ–¹æ³•è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œå¦‚æœkeyä¸ºnullï¼Œå“ˆå¸Œå€¼ä¸º0ã€‚ä¸ä¼šå»è°ƒç”¨hashCode()æ–¹æ³•ã€‚</p><h3 id="é‡å†™hashmapçš„equalså’Œhashcodeæ–¹æ³•æ—¶è¦æ³¨æ„ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#é‡å†™hashmapçš„equalså’Œhashcodeæ–¹æ³•æ—¶è¦æ³¨æ„ä»€ä¹ˆ"></a> é‡å†™HashMapçš„equalså’ŒhashCodeæ–¹æ³•æ—¶ï¼Œè¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</h3><ul><li>HashMapåœ¨æ¯”è¾ƒå…ƒç´ æ—¶ï¼Œä¸€èˆ¬å…ˆæ¯”è¾ƒhashCodeï¼Œå¦‚æœhashCodeç›¸ç­‰ï¼Œå†é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒã€‚</li><li>hashCodeç›¸ç­‰ï¼Œequalsä¸ä¸€å®šç›¸ç­‰ï¼Œä½†æ˜¯equalsç›¸ç­‰ï¼ŒhashCodeä¸€å®šç›¸ç­‰ã€‚</li><li>é‡å†™äº†equalsæ–¹æ³•ï¼Œå¦‚æœä¸é‡å†™hashCodeæ–¹æ³•ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡çš„hashCodeä¸ç›¸ç­‰ï¼Œä»è€Œå¯¼è‡´ç›¸åŒçš„keyè¢«é‡å¤æ·»åŠ ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆhashmapçš„å¤§å°æ˜¯2çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆhashmapçš„å¤§å°æ˜¯2çš„å¹‚æ¬¡æ–¹"></a> ä¸ºä»€ä¹ˆHashMapçš„å¤§å°æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h3><p>ç­”ï¼šä¸ºäº†åŠ é€Ÿè®¡ç®—ä»¥åŠå‡å°‘å“ˆå¸Œå†²çªï¼Œè®¡ç®—å“ˆå¸Œæ—¶ä¸€èˆ¬æŒ‰ç…§<code>hash(key)%n</code>è®¡ç®—ç´¢å¼•ï¼Œå¦‚æœnæ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Œç­‰ä»·äº<code>hash(key)&amp;(n-1)</code>ï¼Œè¿™æ ·å¯ä»¥åŠ å¿«è®¡ç®—é€Ÿåº¦;<br />æ­¤å¤–ï¼Œè¿™ç§ä¸è¿ç®—çš„æ–¹å¼å¯ä»¥è®©å…ƒç´ åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œå‡å°‘å“ˆå¸Œå†²çªã€‚</p><h3 id="concurrenthashmapæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„"><a class="markdownIt-Anchor" href="#concurrenthashmapæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„"></a> ConcurrentHashMapæ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</h3><p>ConcurrentHashMapä¸»è¦é€šè¿‡volatile+CASæˆ–è€…synchronizedæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚<br />æ·»åŠ å…ƒç´ æ—¶ï¼Œå…ˆåˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Ÿ</p><ul><li>ä¸ºç©ºåˆ™ç”¨volatileå’ŒCASæ¥åˆå§‹åŒ–</li><li>ä¸ä¸ºç©ºåˆ™è®¡ç®—è¯¥ä½ç½®æ˜¯å¦ä¸ºç©º<ul><li>ä¸ºç©ºåˆ™ç”¨CASæ·»åŠ å…ƒç´ </li><li>ä¸ä¸ºç©ºåˆ™ä½¿ç”¨synchronizedæ¥æ›´æ–°æˆ–æ·»åŠ å…ƒç´ </li></ul></li></ul><p>é”çš„ç²’åº¦ç›¸æ¯” Segment æ¥è¯´æ›´å°äº†ï¼Œå‘ç”Ÿå†²çªå’ŒåŠ é”çš„é¢‘ç‡é™ä½äº†ï¼Œå¹¶å‘æ“ä½œçš„æ€§èƒ½å°±æé«˜äº†ã€‚</p><h3 id="åˆ†æ®µé”æ˜¯æ€ä¹ˆåŠ é”çš„"><a class="markdownIt-Anchor" href="#åˆ†æ®µé”æ˜¯æ€ä¹ˆåŠ é”çš„"></a> åˆ†æ®µé”æ˜¯æ€ä¹ˆåŠ é”çš„ï¼Ÿ</h3><ul><li>ConcurrentHashMapåœ¨JDK1.7ä¹‹å‰ä½¿ç”¨åˆ†æ®µé”ï¼Œå°†æ•´ä¸ªæ•°æ®åˆ†ä¸ºè‹¥å¹²ä¸ªSegmentï¼Œæ¯ä¸ªSegmentéƒ½æ˜¯ä¸€ä¸ªå°çš„HashMapï¼Œæ¯ä¸ªSegmentéƒ½æœ‰è‡ªå·±çš„é”ï¼Œä¸åŒ Segment ä¹‹é—´çš„æ“ä½œäº’ä¸å½±å“ï¼Œä»è€Œæé«˜å¹¶å‘æ€§èƒ½ã€‚</li><li>å½“è¿›è¡Œå¢åˆ æ”¹æ“ä½œæ—¶ï¼Œé¦–å…ˆå®šä½åˆ°å…·ä½“çš„Segmentï¼Œç„¶åå¯¹è¿™ä¸ªSegmentåŠ é”ï¼Œå…¶ä»–Segmentä¸å—å½±å“ï¼Œå¯ä»¥å¹¶å‘æ“ä½œã€‚</li></ul><h3 id="concurrenthashmapç”¨çš„æ˜¯ä¹è§‚é”è¿˜æ˜¯æ‚²è§‚é”"><a class="markdownIt-Anchor" href="#concurrenthashmapç”¨çš„æ˜¯ä¹è§‚é”è¿˜æ˜¯æ‚²è§‚é”"></a> ConcurrentHashMapç”¨çš„æ˜¯ä¹è§‚é”è¿˜æ˜¯æ‚²è§‚é”ï¼Ÿ</h3><p>ç­”ï¼šéƒ½æœ‰ç”¨åˆ°ã€‚</p><ul><li>åˆå§‹åŒ–æ—¶å¦‚æœå®¹å™¨ä¸ºç©ºï¼Œé€šè¿‡volatile+CAS(ä¹è§‚é”)åˆå§‹åŒ–</li><li>å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™åˆ¤æ–­å…ƒç´ è¦æ·»åŠ çš„ä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™ç”¨CASæ·»åŠ ï¼Œä¸ä¸ºç©ºåˆ™ç”¨synchronized(æ‚²è§‚é”)æ·»åŠ æˆ–æ›´æ–°ã€‚</li></ul><h3 id="hashtableå’Œconcurrenthashmapçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#hashtableå’Œconcurrenthashmapçš„åŒºåˆ«"></a> hashtableå’ŒConcurrentHashMapçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>ä»ç»“æ„ä¸Šçœ‹ï¼Œhashtableæ˜¯æ•°ç»„+é“¾è¡¨ï¼ŒConcurrentHashMapæ˜¯æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘</li><li>éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†hashtableæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯synchronizedï¼Œæ•ˆç‡ä½ï¼ŒConcurrentHashMapä½¿ç”¨volatile+CASæˆ–synchronizedï¼Œæ•ˆç‡æ›´é«˜</li></ul><h2 id="é¢å‘å¯¹è±¡"><a class="markdownIt-Anchor" href="#é¢å‘å¯¹è±¡"></a> é¢å‘å¯¹è±¡</h2><h3 id="é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™æœ‰å“ªäº›"></a> é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸä¸­çš„ç›¸åº”èŒè´£ã€‚</li><li>å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ï¼šå­ç±»å¯¹è±¡åº”è¯¥èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚</li><li>ä¾èµ–éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ï¼šå®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–é‚£äº›å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œæ¥å£åº”è¯¥è€Œä¸“ã€‚</li><li>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</li><li>æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆè¿ªç±³ç‰¹æ³•åˆ™ï¼ŒLoDï¼‰ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ã€‚</li></ul><h3 id="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"></a> æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h3><p>æŠ½è±¡ç±»ï¼š</p><ul><li>æŠ½è±¡ç±»æ˜¯åŒ…å«è‡³å°‘ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»ï¼ŒæŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•ã€‚</li><li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«å…·ä½“çš„æ–¹æ³•ï¼ˆæœ‰æ–¹æ³•ä½“çš„ï¼‰ï¼Œä¹Ÿå¯ä»¥åŒ…å«æˆå‘˜å˜é‡ã€‚</li><li>æŠ½è±¡ç±»å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¸€ä¸ªå­ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œé™¤éè¯¥å­ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚</li></ul><p>æ¥å£ï¼š</p><ul><li>æ¥å£æ˜¯ä¸€ä¸ªå®Œå…¨æŠ½è±¡çš„ç±»ï¼Œæ‰€æœ‰çš„æ–¹æ³•é»˜è®¤æ˜¯æŠ½è±¡çš„ï¼ˆJava 8 åï¼Œå¯ä»¥åŒ…å«é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼‰ã€‚</li><li>æ¥å£åªèƒ½åŒ…å«å¸¸é‡å’ŒæŠ½è±¡æ–¹æ³•ï¼ˆé™¤éå®šä¹‰äº†é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼‰ã€‚</li></ul><p>ç‰¹ç‚¹ï¼š</p><ul><li>æŠ½è±¡ç±»ç”¨äºæè¿°ç±»çš„å…±åŒç‰¹æ€§å’Œè¡Œä¸ºï¼Œå¯ä»¥æœ‰æˆå‘˜å˜é‡ã€æ„é€ æ–¹æ³•å’Œå…·ä½“æ–¹æ³•ã€‚é€‚ç”¨äºæœ‰æ˜æ˜¾ç»§æ‰¿å…³ç³»çš„åœºæ™¯ã€‚</li><li>æ¥å£ç”¨äºå®šä¹‰è¡Œä¸ºè§„èŒƒï¼Œå¯ä»¥å¤šå®ç°ï¼Œåªèƒ½æœ‰å¸¸é‡å’ŒæŠ½è±¡æ–¹æ³•ï¼ˆJava 8 ä»¥åå¯ä»¥æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼‰ã€‚é€‚ç”¨äºå®šä¹‰ç±»çš„èƒ½åŠ›æˆ–åŠŸèƒ½</li></ul><p>åŒºåˆ«ï¼š</p><ul><li>å®ç°æ–¹å¼ï¼šå®ç°æ¥å£çš„å…³é”®å­—ä¸º implementsï¼Œç»§æ‰¿æŠ½è±¡ç±»çš„å…³é”®å­—ä¸º extendsã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨æ¥å£å¯ä»¥é—´æ¥åœ°å®ç°å¤šé‡ç»§æ‰¿ã€‚</li><li>æ–¹æ³•æ–¹å¼ï¼šæ¥å£åªæœ‰å®šä¹‰ï¼Œä¸èƒ½æœ‰æ–¹æ³•çš„å®ç°ï¼Œjava 1.8 ä¸­å¯ä»¥å®šä¹‰ default æ–¹æ³•ä½“ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥æœ‰å®šä¹‰ä¸å®ç°ï¼Œæ–¹æ³•å¯åœ¨æŠ½è±¡ç±»ä¸­å®ç°ã€‚</li><li>è®¿é—®ä¿®é¥°ç¬¦ï¼šæ¥å£æˆå‘˜å˜é‡é»˜è®¤ä¸º public static finalï¼Œå¿…é¡»èµ‹åˆå€¼ï¼Œä¸èƒ½è¢«ä¿®æ”¹ï¼›å…¶æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•éƒ½æ˜¯ publicã€abstract çš„ã€‚æŠ½è±¡ç±»ä¸­æˆå‘˜å˜é‡é»˜è®¤ defaultï¼Œå¯åœ¨å­ç±»ä¸­è¢«é‡æ–°å®šä¹‰ï¼Œä¹Ÿå¯è¢«é‡æ–°èµ‹å€¼ï¼›æŠ½è±¡æ–¹æ³•è¢« abstract ä¿®é¥°ï¼Œä¸èƒ½è¢« privateã€staticã€synchronized å’Œ native ç­‰ä¿®é¥°ï¼Œå¿…é¡»ä»¥åˆ†å·ç»“å°¾ï¼Œä¸å¸¦èŠ±æ‹¬å·ã€‚</li><li>å˜é‡ï¼šæŠ½è±¡ç±»å¯ä»¥åŒ…å«å®ä¾‹å˜é‡å’Œé™æ€å˜é‡ï¼Œè€Œæ¥å£åªèƒ½åŒ…å«å¸¸é‡ï¼ˆå³é™æ€å¸¸é‡ï¼‰ã€‚</li></ul><h3 id="æŠ½è±¡ç±»å¯ä»¥è¢«å®ä¾‹åŒ–å—"><a class="markdownIt-Anchor" href="#æŠ½è±¡ç±»å¯ä»¥è¢«å®ä¾‹åŒ–å—"></a> æŠ½è±¡ç±»å¯ä»¥è¢«å®ä¾‹åŒ–å—ï¼Ÿ</h3><p>ç­”ï¼šæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œé€šå¸¸ç”±å­ç±»ç»§æ‰¿å®ç°ã€‚<strong>æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰æ„é€ æ–¹æ³•</strong>ï¼Œä½†æ˜¯æ„é€ æ–¹æ³•å®ä¾‹åŒ–çš„æ˜¯å­ç±»å¯¹è±¡ã€‚æ¥å£æ²¡æœ‰æ„é€ æ–¹æ³•ã€‚</p><h3 id="javaæ·±æ‹·è´çš„æ–¹å¼æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#javaæ·±æ‹·è´çš„æ–¹å¼æœ‰å“ªäº›"></a> Javaæ·±æ‹·è´çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>å®ç°Cloneableæ¥å£ï¼Œé‡å†™clone()æ–¹æ³•</li><li>ä½¿ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li><li>æ‰‹åŠ¨é€’å½’å¤åˆ¶</li></ul><h2 id="javaä¸­çš„å¯¹è±¡"><a class="markdownIt-Anchor" href="#javaä¸­çš„å¯¹è±¡"></a> Javaä¸­çš„å¯¹è±¡</h2><h3 id="javaä¸­åˆ›å»ºå¯¹è±¡æœ‰å“ªäº›æ–¹å¼"><a class="markdownIt-Anchor" href="#javaä¸­åˆ›å»ºå¯¹è±¡æœ‰å“ªäº›æ–¹å¼"></a> Javaä¸­åˆ›å»ºå¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><ul><li>ä½¿ç”¨newå…³é”®å­—:é€šè¿‡newå…³é”®å­—ç›´æ¥è°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li></ul><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-keyword">MyClass</span> obj = <span class="hljs-built_in">new</span> <span class="hljs-keyword">MyClass</span>();<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨Classç±»çš„newInstance()æ–¹æ³•:é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨newInstance()æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li></ul><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-keyword">MyClass</span> obj = (<span class="hljs-keyword">MyClass</span>) <span class="hljs-keyword">Class</span>.forName(<span class="hljs-string">&quot;com.example.MyClass&quot;</span>).newInstance();<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨Constructorç±»çš„newInstance()æ–¹æ³•ï¼šåŒæ ·é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨Constructorç±»çš„newInstance()æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li></ul><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword">Constructor</span>&lt;<span class="hljs-title">MyClass</span>&gt; <span class="hljs-title">constructor</span> = <span class="hljs-title">MyClass</span>.<span class="hljs-title">class</span>.<span class="hljs-title">getConstructor</span><span class="hljs-params">()</span>;</span><br>MyClass obj = <span class="hljs-keyword">constructor</span>.newInstance();<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨clone()æ–¹æ³•ï¼šå¦‚æœç±»å®ç°äº†Cloneableæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨clone()æ–¹æ³•å¤åˆ¶å¯¹è±¡ã€‚</li></ul><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-keyword">MyClass</span> obj1 = <span class="hljs-built_in">new</span> <span class="hljs-keyword">MyClass</span>();<br><span class="hljs-keyword">MyClass</span> obj2 = (<span class="hljs-keyword">MyClass</span>) obj1.clone();<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ååºåˆ—åŒ–</li></ul><h3 id="newçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™å›æ”¶"><a class="markdownIt-Anchor" href="#newçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™å›æ”¶"></a> newçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ</h3><p>ä¸»è¦ç”±GCå›æ”¶ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol><li>å¼•ç”¨è®¡æ•°æ³•ï¼šæŸä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚</li><li>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼šä»æ ¹å¯¹è±¡ï¼ˆå¦‚æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§ã€æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ç­‰ï¼‰å‡ºå‘ï¼Œé€šè¿‡å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨é“¾è¿›è¡Œéå†ï¼Œå¦‚æœå­˜åœ¨ä¸€æ¡å¼•ç”¨é“¾åˆ°è¾¾æŸä¸ªå¯¹è±¡ï¼Œåˆ™è¯´æ˜è¯¥å¯¹è±¡æ˜¯å¯è¾¾çš„ï¼Œåä¹‹ä¸å¯è¾¾ï¼Œä¸å¯è¾¾çš„å¯¹è±¡å°†è¢«å›æ”¶ã€‚</li><li>ç»ˆç»“å™¨ï¼ˆFinalizerï¼‰ï¼šå¦‚æœå¯¹è±¡é‡å†™äº†finalize()æ–¹æ³•ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šåœ¨å›æ”¶è¯¥å¯¹è±¡ä¹‹å‰è°ƒç”¨finalize()æ–¹æ³•ï¼Œå¯¹è±¡å¯ä»¥åœ¨finalize()æ–¹æ³•ä¸­è¿›è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚ç„¶è€Œï¼Œç»ˆç»“å™¨æœºåˆ¶çš„ä½¿ç”¨ä¸è¢«æ¨èï¼Œå› ä¸ºå®ƒçš„æ‰§è¡Œæ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„æ€§èƒ½é—®é¢˜ã€‚</li></ol><h2 id="åå°„æœºåˆ¶"><a class="markdownIt-Anchor" href="#åå°„æœºåˆ¶"></a> åå°„æœºåˆ¶</h2><h3 id="ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶"></a> ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ</h3><p>Java åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›<br />å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›<br />è¿™ç§<strong>åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</strong>çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p><p>åå°„å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>è¿è¡Œæ—¶ç±»ä¿¡æ¯è®¿é—®ï¼šåå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è·å–ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»åã€åŒ…åã€çˆ¶ç±»ã€å®ç°çš„æ¥å£ã€æ„é€ å‡½æ•°ã€æ–¹æ³•å’Œå­—æ®µç­‰ã€‚</li><li>åŠ¨æ€å¯¹è±¡åˆ›å»ºï¼šå¯ä»¥ä½¿ç”¨åå°„ API åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œå³ä½¿åœ¨ç¼–è¯‘æ—¶ä¸çŸ¥é“å…·ä½“çš„ç±»åã€‚è¿™æ˜¯é€šè¿‡ Class ç±»çš„ newInstance() æ–¹æ³•æˆ– Constructor å¯¹è±¡çš„ newInstance() æ–¹æ³•å®ç°çš„ã€‚</li><li>åŠ¨æ€æ–¹æ³•è°ƒç”¨ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰æ–¹æ³•ã€‚è¿™é€šè¿‡ Method ç±»çš„ invoke() æ–¹æ³•å®ç°ï¼Œå…è®¸ä½ ä¼ å…¥å¯¹è±¡å®ä¾‹å’Œå‚æ•°å€¼æ¥æ‰§è¡Œæ–¹æ³•ã€‚</li><li>è®¿é—®å’Œä¿®æ”¹å­—æ®µå€¼ï¼šåå°„è¿˜å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è®¿é—®å’Œä¿®æ”¹å¯¹è±¡çš„å­—æ®µå€¼ï¼Œå³ä½¿æ˜¯ç§æœ‰çš„ã€‚è¿™æ˜¯é€šè¿‡ Field ç±»çš„ get() å’Œ set() æ–¹æ³•å®Œæˆçš„ã€‚</li></ul><h3 id="åå°„åœ¨ä½ å¹³æ—¶å†™ä»£ç æˆ–è€…æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#åå°„åœ¨ä½ å¹³æ—¶å†™ä»£ç æˆ–è€…æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"></a> åå°„åœ¨ä½ å¹³æ—¶å†™ä»£ç æˆ–è€…æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›?</h3><ol><li>åŠ è½½æ•°æ®åº“é©±åŠ¨</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>é…ç½®æ–‡ä»¶åŠ è½½<br />Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Bean çš„è¿‡ç¨‹ï¼š</li></ol><ul><li>å°†ç¨‹åºä¸­æ‰€æœ‰ XML æˆ– properties é…ç½®æ–‡ä»¶åŠ è½½å…¥å†…å­˜</li><li>Java ç±»é‡Œé¢è§£æ xml æˆ–è€… properties é‡Œé¢çš„å†…å®¹ï¼Œå¾—åˆ°å¯¹åº”å®ä½“ç±»çš„å­—èŠ‚ç å­—ç¬¦ä¸²ä»¥åŠç›¸å…³çš„å±æ€§ä¿¡æ¯</li><li>ä½¿ç”¨åå°„æœºåˆ¶ï¼Œæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²è·å¾—æŸä¸ªç±»çš„ Class å®ä¾‹</li><li>åŠ¨æ€é…ç½®å®ä¾‹çš„å±æ€§</li></ul><h2 id="javaæ³¨è§£çš„åŸç†"><a class="markdownIt-Anchor" href="#javaæ³¨è§£çš„åŸç†"></a> Javaæ³¨è§£çš„åŸç†</h2><p>æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚</p><p>æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚<br />é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šæœ€ç»ˆè°ƒç”¨AnnotationInvocationHandlerçš„invokeæ–¹æ³•ã€‚<br />è¯¥æ–¹æ³•ä¼šä»memberValuesè¿™ä¸ªMapä¸­ç´¢å¼•å‡ºå¯¹åº”çš„å€¼ã€‚è€ŒmemberValuesçš„æ¥æºæ˜¯Javaå¸¸é‡æ± ã€‚</p><h2 id="ä¸-equals-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="markdownIt-Anchor" href="#ä¸-equals-æœ‰ä»€ä¹ˆåŒºåˆ«"></a> == ä¸ equals æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>==å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹æœ‰ä¸åŒçš„ä½œç”¨ï¼š</p><ul><li>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œ==æ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ã€‚</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œ==æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€</li></ul><p>equalsä¸èƒ½æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªèƒ½ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰</p><ul><li>å½“ç±»æ²¡æœ‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œequalsæ–¹æ³•æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€</li><li>å½“ç±»é‡å†™äº†equalsæ–¹æ³•æ—¶ï¼Œequalsæ–¹æ³•ä¸€èˆ¬æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯å¦ç›¸ç­‰</li></ul><p>ä¸€èˆ¬Stringç±»ã€Integerç±»ç­‰éƒ½é‡å†™äº†equalsæ–¹æ³•ï¼Œæ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯å¦ç›¸ç­‰ã€‚</p><h2 id="stringbufferå’ŒstringbuilderåŒºåˆ«æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#stringbufferå’ŒstringbuilderåŒºåˆ«æ˜¯ä»€ä¹ˆ"></a> StringBufferå’ŒStringBuilderåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åŒºåˆ«ï¼š</p><ul><li>String æ˜¯ Java ä¸­åŸºç¡€ä¸”é‡è¦çš„ç±»ï¼Œè¢«å£°æ˜ä¸º final classï¼Œæ˜¯ä¸å¯å˜å­—ç¬¦ä¸²ã€‚å› ä¸ºå®ƒçš„ä¸å¯å˜æ€§ï¼Œæ‰€ä»¥<strong>æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ä¼šäº§ç”Ÿå¾ˆå¤šæ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œå¦‚æœé¢‘ç¹åœ°è¿›è¡Œè¿™æ ·çš„æ“ä½œå¯¹æ€§èƒ½æœ‰æ‰€å½±å“</strong>ã€‚</li><li>StringBuffer å°±æ˜¯ä¸ºäº†è§£å†³å¤§é‡æ‹¼æ¥å­—ç¬¦ä¸²æ—¶äº§ç”Ÿå¾ˆå¤šä¸­é—´å¯¹è±¡é—®é¢˜è€Œæä¾›çš„ä¸€ä¸ªç±»ã€‚å®ƒæä¾›äº† append å’Œ add æ–¹æ³•ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸²æ·»åŠ åˆ°å·²æœ‰åºåˆ—çš„æœ«å°¾æˆ–æŒ‡å®šä½ç½®ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨</strong>çš„å¯ä¿®æ”¹çš„å­—ç¬¦åºåˆ—ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬çš„å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œä¸éœ€è¦çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥ StringBuilder ç™»åœºäº†ã€‚</li><li>StringBuilder æ˜¯ JDK1.5 å‘å¸ƒçš„ï¼Œå®ƒå’Œ StringBuffer æœ¬è´¨ä¸Šæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå°±æ˜¯<strong>å»æ‰äº†ä¿è¯çº¿ç¨‹å®‰å…¨</strong>çš„é‚£éƒ¨åˆ†ï¼Œå‡å°‘äº†å¼€é”€ã€‚</li></ul><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€Ÿåº¦ä»å¿«åˆ°æ…¢ä¸º StringBuilder &gt; StringBuffer &gt; Stringï¼Œå½“ç„¶è¿™æ˜¯ç›¸å¯¹çš„ï¼Œä¸æ˜¯ç»å¯¹çš„ã€‚</p></blockquote><h2 id="å¹¶å‘"><a class="markdownIt-Anchor" href="#å¹¶å‘"></a> å¹¶å‘</h2><h3 id="çº¿ç¨‹å®‰å…¨ä½“ç°åœ¨å“ªäº›æ–¹é¢"><a class="markdownIt-Anchor" href="#çº¿ç¨‹å®‰å…¨ä½“ç°åœ¨å“ªäº›æ–¹é¢"></a> çº¿ç¨‹å®‰å…¨ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ</h3><ul><li>åŸå­æ€§ï¼šæä¾›äº’æ–¥è®¿é—®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼›</li><li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜çš„ä¿®æ”¹å¯ä»¥åŠæ—¶åœ°è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ï¼›</li><li>æœ‰åºæ€§ï¼šä¿è¯çº¿ç¨‹æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯casæ“ä½œ"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯casæ“ä½œ"></a> ä»€ä¹ˆæ˜¯CASæ“ä½œï¼Ÿ</h3><p>CASå«åšCompareAndSwapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œä¸»è¦æ˜¯é€šè¿‡å¤„ç†å™¨çš„æŒ‡ä»¤æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªæ“ä½œæ•°ï¼š</p><ul><li>Vï¼šè¦æ›´æ–°çš„å€¼</li><li>Aï¼šé¢„æœŸå€¼</li><li>Bï¼šæ–°å€¼<br />å½“æ‰§è¡ŒCASæŒ‡ä»¤æ—¶ï¼Œåªæœ‰å½“Vç­‰äºAæ—¶ï¼Œæ‰ä¼šç”¨Bå»æ›´æ–°Vçš„å€¼ï¼Œå¦åˆ™å°±ä¸ä¼šæ‰§è¡Œæ›´æ–°æ“ä½œã€‚</li></ul><h3 id="casçš„ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#casçš„ç¼ºç‚¹"></a> CASçš„ç¼ºç‚¹ï¼Ÿ</h3><ul><li>ABAé—®é¢˜ï¼šå¦‚æœä¸€ä¸ªå€¼åŸæ¥æ˜¯Aï¼Œå‡†å¤‡ä¿®æ”¹å‰çŸ­æš‚å˜æˆäº†Bï¼Œç„¶ååˆå˜æˆäº†Aï¼Œé‚£ä¹ˆCASæ“ä½œä¼šé”™è¯¯åœ°è®¤ä¸ºè¿™ä¸ªå€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼›è§£å†³æ–¹æ³•æ˜¯åŠ å…¥é¢„æœŸæ ‡å¿—å’Œæ›´æ–°åæ ‡å¿—ï¼Œæ›´æ–°æ—¶ä¸å…‰æ£€æŸ¥å€¼ï¼Œè¿˜è¦æ£€æŸ¥æ ‡å¿—æ˜¯å¦ç›¸ç­‰ã€‚</li><li>å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§ï¼šCASæ“ä½œå¦‚æœé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šä¸€ç›´è‡ªæ—‹ï¼Œå ç”¨CPUï¼Œé™ä½æ€§èƒ½ã€‚</li><li>åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œï¼šå¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œéœ€è¦åŠ é”ã€‚</li></ul><h3 id="çº¿ç¨‹åˆ›å»ºæ–¹å¼æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹åˆ›å»ºæ–¹å¼æœ‰å“ªäº›"></a> çº¿ç¨‹åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>ç»§æ‰¿ Thread ç±»</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span></span>&#123;<br>    public void run()&#123;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;MyThread run&quot;</span>);<br>    &#125;<br>&#125;<br><br>public static void main(<span class="hljs-type">String</span>[] args) &#123;<br>    <span class="hljs-type">MyThread</span> t=<span class="hljs-keyword">new</span> <span class="hljs-type">MyThread</span>();<br>    t.start();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å®ç° Runnable æ¥å£</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;MyRunnable run&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)&#123;<br>    <span class="hljs-title class_">Thread</span> t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>());<br>    t.<span class="hljs-title function_">start</span>();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å®ç°Callableæ¥å£ä¸FutureTask</li><li>ä½¿ç”¨çº¿ç¨‹æ± </li></ul><h3 id="å¦‚ä½•åœæ­¢çº¿ç¨‹"><a class="markdownIt-Anchor" href="#å¦‚ä½•åœæ­¢çº¿ç¨‹"></a> å¦‚ä½•åœæ­¢çº¿ç¨‹ï¼Ÿ</h3><ul><li>é€šè¿‡é€€å‡ºæ ‡å¿—ä½ï¼Œè®©çº¿ç¨‹æ­£å¸¸é€€å‡º</li><li>stop()æš´åŠ›åœæ­¢</li><li>ä½¿ç”¨interrupt()æ–¹æ³•ä¸­æ–­çº¿ç¨‹<ul><li>å¦‚æœæ‰“æ–­é˜»å¡çš„çº¿ç¨‹(sleep,wait,join)ï¼Œä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</li><li>å¦‚æœæ‰“æ–­æ­£å¸¸çº¿ç¨‹ï¼Œä¼šæ ¹æ®ä¸­æ–­æ ‡è®°ä¸ºåˆ¤æ–­æ˜¯å¦é€€å‡º</li></ul></li></ul><h3 id="sleepå’Œwaitçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#sleepå’Œwaitçš„åŒºåˆ«"></a> sleepå’Œwaitçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>sleepæ˜¯Threadç±»çš„é™æ€æ–¹æ³•ï¼Œwaitæ˜¯Objectç±»çš„æ–¹æ³•</li><li>sleepæ–¹æ³•ä¸ä¼šé‡Šæ”¾é”ï¼Œwaitæ–¹æ³•ä¼šé‡Šæ”¾é”</li><li>sleepæ–¹æ³•å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼Œwaitæ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—ä¸­è°ƒç”¨</li><li>sleepæ–¹æ³•åœ¨æŒ‡å®šæ—¶é—´åè‡ªåŠ¨å”¤é†’æˆ–é€šè¿‡interruptä¸­æ–­ï¼Œwaitæ–¹æ³•éœ€è¦å…¶ä»–çº¿ç¨‹è°ƒç”¨notifyæˆ–notifyAllæ–¹æ³•å”¤é†’</li></ul><h3 id="çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›"></a> çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>NEWï¼šæ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œè¿˜æœªæ‰§è¡Œ</li><li>RUNNABLEï¼šå°±ç»ªå’Œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹</li><li>BLOCKEDï¼šé˜»å¡çŠ¶æ€ï¼Œç­‰å¾…é”çš„é‡Šæ”¾</li><li>WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹çš„é€šçŸ¥</li><li>TIMED_WAITINGï¼šå…·æœ‰æŒ‡å®šç­‰å¾…æ—¶é—´çš„ç­‰å¾…çŠ¶æ€</li><li>TERMINATEDï¼šçº¿ç¨‹æ‰§è¡Œå®Œæ¯•</li></ul><h3 id="blockedå’Œwaitingçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#blockedå’Œwaitingçš„åŒºåˆ«"></a> blockedå’Œwaitingçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>blocked ä¸€èˆ¬æ˜¯å› ä¸ºè·å–é”å¤±è´¥ï¼Œåœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾é”åï¼Œä¼šé‡æ–°è¿›å…¥runnableçŠ¶æ€</li><li>waiting çŠ¶æ€ä¸å‚ä¸é”çš„ç«äº‰ï¼Œè€Œæ˜¯åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹çš„é€šçŸ¥ï¼Œæ¯”å¦‚è°ƒç”¨wait()æ–¹æ³•ï¼Œjoin()æ–¹æ³•ï¼Œæˆ–è€…LockSupport.park()æ–¹æ³•ï¼Œä¸ä¼šå ç”¨CPUèµ„æºï¼Œå½“å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æ–¹æ³•åï¼Œä¼šé‡æ–°è¿›å…¥runnableçŠ¶æ€</li></ul><h3 id="notifyå’Œnotifyallçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#notifyå’Œnotifyallçš„åŒºåˆ«"></a> notifyå’ŒnotifyAllçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>notify()æ–¹æ³•ä¼šéšæœºå”¤é†’ä¸€ä¸ªå¤„äºwaittingçš„çº¿ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶å¤„äºwaitingçŠ¶æ€ã€‚</li><li>notifyAll()æ–¹æ³•ä¼šå”¤é†’æ‰€æœ‰waittingçš„çº¿ç¨‹ï¼Œè®©ä»–ä»¬å¼€å§‹ç«äº‰é”</li></ul><h3 id="å†™ä¸€æ®µä»£ç å®ç°çº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡å¶æ•°"><a class="markdownIt-Anchor" href="#å†™ä¸€æ®µä»£ç å®ç°çº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡å¶æ•°"></a> å†™ä¸€æ®µä»£ç ï¼Œå®ç°çº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡å¶æ•°</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PrintEvenOdd</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> cnt=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final Object <span class="hljs-keyword">lock</span>=<span class="hljs-keyword">new</span> Object();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">int</span> MX=<span class="hljs-number">100</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span>&#123;<br>        Runnable printOdd=()-&gt;&#123;<br>            synchronized(<span class="hljs-keyword">lock</span>)&#123;<br>                    <span class="hljs-keyword">while</span>(cnt&lt;=MX)&#123;<br>                    <span class="hljs-keyword">if</span>(cnt%<span class="hljs-number">2</span>!=<span class="hljs-number">0</span>)&#123;<br>                        System.<span class="hljs-keyword">out</span>.println(Thread.currentThread().getName()+<span class="hljs-string">&quot;:&quot;</span>+cnt++);<br>                        <span class="hljs-keyword">lock</span>.notify();<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-keyword">try</span>&#123;<br>                            <span class="hljs-keyword">lock</span>.wait();<br>                        &#125;<span class="hljs-keyword">catch</span>(InterruptedException e)&#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;     <br>                &#125;<br>            &#125;<br>        &#125;;<br><br>        Runnable printEven=()-&gt;&#123;<br>            synchronized(<span class="hljs-keyword">lock</span>)&#123;<br>                <span class="hljs-keyword">while</span>(cnt&lt;=MX)&#123;<br>                    <span class="hljs-keyword">if</span>(cnt%<span class="hljs-number">2</span>==<span class="hljs-number">0</span>)&#123;<br>                        System.<span class="hljs-keyword">out</span>.println(Thread.currentThread().getName()+<span class="hljs-string">&quot;:&quot;</span>+cnt++);<br>                        <span class="hljs-keyword">lock</span>.notify();<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-keyword">try</span>&#123;<br>                            <span class="hljs-keyword">lock</span>.wait();<br>                        &#125;<span class="hljs-keyword">catch</span>(InterruptedException e)&#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        Thread t1=<span class="hljs-keyword">new</span> Thread(printOdd,<span class="hljs-string">&quot;å¥‡æ•°çº¿ç¨‹&quot;</span>);<br>        Thread t2=<span class="hljs-keyword">new</span> Thread(printEven,<span class="hljs-string">&quot;å¶æ•°çº¿ç¨‹&quot;</span>);<br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»»æ„çº¿ç¨‹æ•°é¡ºåºæ‰“å°ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">test</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> threadNum = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final Lock <span class="hljs-keyword">lock</span> = <span class="hljs-keyword">new</span> ReentrantLock();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final Condition condition = <span class="hljs-keyword">lock</span>.newCondition();<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyThread</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span> &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> id;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyThread</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span> &#123;<br>            <span class="hljs-keyword">this</span>.id = id;<br>        &#125;<br><br>        @Override<br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span> &#123;<br>            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>                <span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>();<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-keyword">while</span> (cnt &lt; <span class="hljs-number">100</span> &amp;&amp; cnt % threadNum != id) &#123;<br>                        condition.<span class="hljs-keyword">await</span>();<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (cnt &gt;= <span class="hljs-number">100</span>) &#123;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                    ++cnt;<br>                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;Thread &quot;</span> + id + <span class="hljs-string">&quot; : &quot;</span> + cnt);<br>                    condition.signalAll();<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);<br>                &#125; <span class="hljs-keyword">finally</span> &#123;<br>                    <span class="hljs-keyword">lock</span>.unlock();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = threadNum - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            Thread t = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> MyThread(i));<br>            t.start();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹å®‰å…¨"><a class="markdownIt-Anchor" href="#æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹å®‰å…¨"></a> æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹å®‰å…¨ï¼Ÿ</h3><ul><li>ä½¿ç”¨synchronizedå…³é”®å­—ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æº</li><li>ä½¿ç”¨volatileå…³é”®å­—ï¼Œä¿è¯å˜é‡çš„å¯è§æ€§</li><li>ä½¿ç”¨Lockæ¥å£ï¼Œæ¯”å¦‚ReentrantLockç±»å°±æ˜¯Lockæ¥å£çš„ä¸€ä¸ªå®ç°</li><li>ä½¿ç”¨åŸå­ç±»ï¼Œæ¯”å¦‚AtomicIntegerç±»</li><li>ä½¿ç”¨TreadLocal</li><li>ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œæ¯”å¦‚ConcurrentHashMapã€CopyOnWriteArrayListç­‰</li></ul><h3 id="javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„é”ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„é”ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ"></a> javaä¸­æœ‰å“ªäº›å¸¸ç”¨çš„é”ï¼Ÿä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>synchronizedï¼šç”¨äºä¿®é¥°ä»£ç å—æˆ–æ–¹æ³•ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºã€‚</li><li>ReentrantLockï¼šæ˜¯Lockæ¥å£çš„ä¸€ä¸ªå®ç°ï¼Œæä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ã€ä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹ã€å…¬å¹³é”ç­‰ã€‚</li><li>è¯»å†™é”ï¼šå…è®¸å¤šä¸ªçº¿ç¨‹è¯»ï¼Œä½†åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å†™ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</li><li>ä¹è§‚é”å’Œæ‚²è§‚é”ï¼šä¹è§‚é”ä¸é”å®šèµ„æºï¼Œ<strong>åªåœ¨å†™æ•°æ®æ—¶</strong>æ£€æŸ¥èµ„æºæ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼›æ‚²è§‚é”åœ¨è®¿é—®æ•°æ®æ—¶ä¼šé”å®šèµ„æºï¼Œæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µã€‚</li><li>è‡ªæ—‹é”ï¼šæœªè·å–åˆ°é”æ—¶çº¿ç¨‹ä¸ä¼šæ”¾å¼ƒCPUèµ„æºï¼Œè€Œæ˜¯ä¸€ç›´å¾ªç¯æ£€æŸ¥é”æ˜¯å¦å¯ç”¨ï¼Œç›´åˆ°è·å–åˆ°é”ï¼Œé€šå¸¸ç”¨CASå®ç°ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯å…¬å¹³é”å’Œéå…¬å¹³é”"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯å…¬å¹³é”å’Œéå…¬å¹³é”"></a> ä»€ä¹ˆæ˜¯å…¬å¹³é”å’Œéå…¬å¹³é”ï¼Ÿ</h3><ul><li>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹è¯·æ±‚çš„é¡ºåºæ¥è·å–é”ï¼Œå…ˆåˆ°å…ˆå¾—ï¼Œæ•´ä½“æ‰§è¡Œé€Ÿåº¦æ…¢ï¼Œååé‡å°ï¼Œå› ä¸ºæ¶‰åŠçº¿ç¨‹ä»ä¼‘çœ åˆ°è¿è¡ŒçŠ¶æ€çš„è½¬æ¢ã€‚</li><li>éå…¬å¹³é”ï¼šå¤šä¸ªçº¿ç¨‹äº‰æŠ¢é”ï¼Œæ•´ä½“æ‰§è¡Œé€Ÿåº¦å¿«ï¼Œååé‡å¤§ã€‚</li></ul><h3 id="è®²è®²reentrantlock"><a class="markdownIt-Anchor" href="#è®²è®²reentrantlock"></a> è®²è®²ReentrantLockï¼Ÿ</h3><p>ReentrantLockåº•å±‚ä¸»è¦ä¾èµ–AQSæŠ½è±¡ç±»ï¼ŒAQSæä¾›äº†ä¸€äº›åŸºæœ¬çš„åŒæ­¥æœºåˆ¶å¦‚é˜Ÿåˆ—ã€çŠ¶æ€ç­‰ã€‚ReentrantLockå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>å¯ä¸­æ–­ï¼šçº¿ç¨‹åœ¨ç­‰å¾…é”çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­è€Œæå‰ç»“æŸç­‰å¾…ã€‚</li><li>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼šå°è¯•è·å–é”æ—¶ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´åè‡ªåŠ¨æ”¾å¼ƒç­‰å¾…ã€‚</li><li>å…¬å¹³é”å’Œéå…¬å¹³é”ï¼šReentrantLocké»˜è®¤æ˜¯éå…¬å¹³é”ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥trueå‚æ•°åˆ›å»ºå…¬å¹³é”ã€‚å¦‚<code>ReentrantLock lock=new ReentrantLock(true);</code></li><li>æ”¯æŒå¤šä¸ªæ¡ä»¶å˜é‡ï¼Œå¯ä»¥æ›´çµæ´»çš„æ‰§è¡Œç­‰å¾…ä¸å”¤é†’æ“ä½œã€‚ä¸»è¦é€šè¿‡Conditionæ¥å£å®ç°ã€‚</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ReentrantLock lock<span class="hljs-operator">=</span>new ReentrantLock()<span class="hljs-comment">;</span><br>Condition condition<span class="hljs-operator">=</span>lock.newCondition()<span class="hljs-comment">;</span><br>//ç­‰å¾…ä¸å”¤é†’<br>condition.await()<span class="hljs-comment">;</span><br>condition.signal()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>æ”¯æŒå¯é‡å…¥æ€§ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œä¸ä¼šé€ æˆæ­»é”ã€‚æ¯æ¬¡è·å–é”æ—¶ï¼ŒholdCounté€’å¢ï¼Œé‡Šæ”¾é”æ—¶é€’å‡ï¼Œå½“holdCountä¸º0æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½è·å–é”ã€‚</li></ul><h3 id="synchronizedå’Œreentrantlockçš„çš„åº”ç”¨åœºæ™¯æœ‰ä»€ä¹ˆä¸åŒ"><a class="markdownIt-Anchor" href="#synchronizedå’Œreentrantlockçš„çš„åº”ç”¨åœºæ™¯æœ‰ä»€ä¹ˆä¸åŒ"></a> synchronizedå’ŒReentrantLockçš„çš„åº”ç”¨åœºæ™¯æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><ul><li>synchronizedé€‚åˆç®€å•çš„åŒæ­¥åœºæ™¯ï¼Œä»£ç å—æˆ–æ–¹æ³•çº§åˆ«çš„åŒæ­¥ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œä½†åŠŸèƒ½æœ‰é™ã€‚</li><li>ReentrantLocké€‚åˆå¤æ‚åŒæ­¥çš„åœºæ™¯ï¼Œæä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œå¦‚å¯ä¸­æ–­ã€è¶…æ—¶ã€å…¬å¹³é”ã€å¤šæ¡ä»¶å˜é‡ç­‰ã€‚</li></ul><h3 id="synchronizedå’Œreentrantlockçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#synchronizedå’Œreentrantlockçš„åŒºåˆ«"></a> synchronizedå’ŒReentrantLockçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>synchronizedå¯ä¿®é¥°ä»£ç å—å’Œæ–¹æ³•ï¼ŒReentrantLockåªèƒ½ä¿®é¥°ä»£ç å—</li><li>synchronizedå¯ä»¥è‡ªåŠ¨åŠ é”å’Œé‡Šæ”¾é”ï¼ŒReentrantLockéœ€è¦æ‰‹åŠ¨åŠ é”å’Œé‡Šæ”¾é”</li><li>å‰è€…åªèƒ½æ˜¯éå…¬å¹³é”ï¼Œåè€…å¯ä»¥æ˜¯å…¬å¹³é”æˆ–éå…¬å¹³é”</li><li>å‰è€…ä¸èƒ½å“åº”ä¸­æ–­ï¼Œåè€…å¯ä»¥å“åº”ä¸­æ–­</li><li>synchronizedæ˜¯JVMå±‚é¢é€šè¿‡ç›‘è§†å™¨å®ç°çš„é”ï¼ŒReentrantLockæ˜¯åŸºäºAQSå®ç°çš„é”</li></ul><h3 id="ä»‹ç»ä¸€ä¸‹aqs"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹aqs"></a> ä»‹ç»ä¸€ä¸‹AQS?</h3><p>ç­”ï¼šAQSæ˜¯Javaä¸­çš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæä¾›äº†ä¸€äº›åŸºæœ¬çš„é”æœºåˆ¶ï¼ŒAQSçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li>å¦‚æœè¢«è¯·æ±‚çš„èµ„æºç©ºé—²ï¼Œå°±å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ï¼›</li><li>å¦‚æœè¢«è¯·æ±‚çš„èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—çº¿ç¨‹é˜»å¡ç­‰å¾…ä»¥åŠè¢«å”¤é†’æ—¶é”åˆ†é…çš„æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶æ˜¯é€šè¿‡å†…éƒ¨çš„åŒå‘é˜Ÿåˆ—æ¥å®ç°çš„ã€‚</li></ul><p>å·¥ä½œæœºåˆ¶ï¼š<br />AQSå†…éƒ¨æœ‰ä¸€ä¸ªstateï¼Œè¢«volatileä¿®é¥°ï¼Œ0è¡¨ç¤ºæ— é”ï¼Œ1è¡¨ç¤ºæœ‰é”</p><ul><li>å½“ä¸€ä¸ªçº¿ç¨‹åˆ°æ¥æ—¶ï¼Œä»–ä¼šå°è¯•å°†stateæ”¹ä¸º1ï¼Œè¡¨ç¤ºè·å–åˆ°äº†èµ„æº</li><li>å¦‚æœstateå·²ç»ä¸º1äº†ï¼Œä»–ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ï¼Œæ’é˜Ÿç­‰å¾…é”çš„åˆ†é…</li><li>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æŠ¢å¤ºèµ„æºï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œä¿®æ”¹stateè¦ç”¨CASæ“ä½œ</li></ul><p>AQSæ˜¯å…¬å¹³é”è¿˜æ˜¯éå…¬å¹³é”ï¼Ÿ<br />éƒ½æœ‰</p><ul><li>å¦‚æœæ–°çš„çº¿ç¨‹ä¸é˜Ÿåˆ—å¤´éƒ¨çš„çº¿ç¨‹äº‰æŠ¢èµ„æºï¼Œé‚£ä¹ˆå±äºéå…¬å¹³é”</li><li>å¦‚æœç”±äºstateä¸º1,æ–°çº¿ç¨‹æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œé‚£ä¹ˆå±äºå…¬å¹³é”</li></ul><h3 id="volatileå…³é”®å­—çš„ä½œç”¨"><a class="markdownIt-Anchor" href="#volatileå…³é”®å­—çš„ä½œç”¨"></a> volatileå…³é”®å­—çš„ä½œç”¨ï¼Ÿ</h3><ul><li>ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§</li><li>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</li></ul><p>æŒ‡ä»¤é‡æ’åºæ˜¯ç¼–è¯‘å™¨ä¸ºäº†æå‡æŒ‡ä»¤æ‰§è¡Œæ•ˆç‡è€Œåšçš„ä¼˜åŒ–ï¼Œä¸€èˆ¬éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ul><li>å•çº¿ç¨‹ä¸‹ä¸ä¼šæ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœ</li><li>é‡æ’åºçš„æŒ‡ä»¤ä¸å­˜åœ¨æ•°æ®çš„ç›¸äº’ä¾èµ–</li></ul><h3 id="æ­»é”äº§ç”Ÿçš„æ¡ä»¶"><a class="markdownIt-Anchor" href="#æ­»é”äº§ç”Ÿçš„æ¡ä»¶"></a> æ­»é”äº§ç”Ÿçš„æ¡ä»¶ï¼Ÿ</h3><ul><li>äº’æ–¥æ¡ä»¶ï¼šå¤šä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶ä½¿ç”¨åŒä¸€èµ„æº</li><li>æŒæœ‰å’Œç­‰å¾…æ¡ä»¶ï¼šçº¿ç¨‹æŒæœ‰èµ„æºï¼ŒåŒæ—¶ç­‰å¾…å…¶ä»–çº¿ç¨‹æŒæœ‰çš„èµ„æº</li><li>ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹æŒæœ‰çš„èµ„æºåœ¨ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹æŠ¢å </li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå¤šä¸ªçº¿ç¨‹å½¢æˆå¾ªç¯ç­‰å¾…èµ„æºçš„å…³ç³»</li></ul><h3 id="çº¿ç¨‹æ± çš„æäº¤ä»»åŠ¡æµç¨‹"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± çš„æäº¤ä»»åŠ¡æµç¨‹"></a> çº¿ç¨‹æ± çš„æäº¤ä»»åŠ¡æµç¨‹ï¼Ÿ</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs clean">æäº¤ä»»åŠ¡ -&gt; æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦å·²æ»¡ï¼Ÿ<br><br>â”œâ”€â”€ æœªæ»¡ -&gt; åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œ<br><br>â””â”€â”€ å·²æ»¡ -&gt; ä»»åŠ¡å…¥é˜Ÿ<br><br>    â”œâ”€â”€ é˜Ÿåˆ—æœªæ»¡ -&gt; ç­‰å¾…æ‰§è¡Œ<br><br>    â””â”€â”€ é˜Ÿåˆ—å·²æ»¡ -&gt; åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹<br><br>        â”œâ”€â”€ æœªè¾¾æœ€å¤§çº¿ç¨‹æ•° -&gt; æ‰§è¡Œä»»åŠ¡<br><br>        â””â”€â”€ å·²è¾¾æœ€å¤§çº¿ç¨‹æ•° -&gt; æ‰§è¡Œæ‹’ç»ç­–ç•¥<br><br></code></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± çš„å‚æ•°æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± çš„å‚æ•°æœ‰å“ªäº›"></a> çº¿ç¨‹æ± çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¸­ä¸€ç›´å­˜æ´»çš„çº¿ç¨‹æ•°é‡</li><li>maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¸­æœ€å¤§çš„çº¿ç¨‹æ•°é‡</li><li>keepAliveTimeï¼šçº¿ç¨‹ç©ºé—²æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œå¤šä½™çš„çº¿ç¨‹ä¼šè¢«å›æ”¶</li><li>unitï¼šæ—¶é—´å•ä½</li><li>workQueueï¼šå·¥ä½œé˜Ÿåˆ—ï¼Œå­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡</li></ul><h3 id="çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›"></a> çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>CallerRunsPolicyï¼šä½¿ç”¨çº¿ç¨‹æ± çš„è°ƒç”¨è€…æ‰€åœ¨çº¿ç¨‹å»æ‰§è¡Œå¯¹åº”ä»»åŠ¡</li><li>AbortPolicyï¼šæ‹’ç»å¹¶æŠ›å‡ºå¼‚å¸¸</li><li>DiscardPolicyï¼šä¸åšä»»ä½•å¤„ç†ï¼Œç›´æ¥æ‹’ç»</li><li>DiscardOldestPolicyï¼šæŠ›å¼ƒæœ€è€çš„ä»»åŠ¡æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li><li>è‡ªå®šä¹‰ç­–ç•¥</li></ul><h3 id="æ ¸å¿ƒçº¿ç¨‹æ•°å¦‚ä½•è®¾ç½®"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒçº¿ç¨‹æ•°å¦‚ä½•è®¾ç½®"></a> æ ¸å¿ƒçº¿ç¨‹æ•°å¦‚ä½•è®¾ç½®ï¼Ÿ</h3><ul><li>å¯¹äºé«˜å¹¶å‘ï¼Œæ‰§è¡Œæ—¶é—´çŸ­çš„ä»»åŠ¡ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°+1</li><li>å¯¹äºå¹¶å‘ä¸é«˜ï¼Œæ‰§è¡Œæ—¶é—´é•¿çš„ä»»åŠ¡<ul><li>CPUå¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°+1</li><li>IOå¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°*2</li></ul></li><li>å¯¹äºé«˜å¹¶å‘ï¼Œæ‰§è¡Œæ—¶é—´é•¿çš„ä»»åŠ¡ï¼Œé¦–å…ˆè¦çœ‹æ•°æ®èƒ½ä¸èƒ½åšç¼“å­˜ï¼Œå…¶æ¬¡çœ‹èƒ½ä¸èƒ½å¢åŠ æœåŠ¡å™¨</li></ul><h3 id="çº¿ç¨‹æ± ç§ç±»æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± ç§ç±»æœ‰å“ªäº›"></a> çº¿ç¨‹æ± ç§ç±»æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>ScheduledThreadPoolï¼šæ”¯æŒå®šæ—¶å’Œå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡</li><li>FixedThreadPoolï¼šæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ç›¸ç­‰ï¼Œæœ€å¤§çº¿ç¨‹æ•°æ»¡äº†åä¼šè¿›å…¥é˜Ÿåˆ—ç­‰å¾…</li><li>CachedThreadPoolï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º0ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸ºInteger.MAX_VALUEï¼Œé€‚ç”¨äºæ‰§è¡Œå¤§é‡çŸ­æœŸå¼‚æ­¥ä»»åŠ¡</li><li>SingleThreadPoolï¼šåªæœ‰ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œç¡®ä¿æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåºæ‰§è¡Œ</li></ul><h3 id="çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›"></a> çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>ArrayBlockingQueueï¼Œæœ‰ç•Œé˜Ÿåˆ—ï¼Œå®¹é‡å›ºå®š</li><li>LinkedBlockingQueueï¼Œæ— ç•Œé˜Ÿåˆ—ï¼Œå®¹é‡æ— ä¸Šé™ï¼Œé€‚ç”¨äºFixedThreadPoolå’ŒSingleThreadPool</li><li>SynchronousQueueï¼ŒåŒæ­¥é˜Ÿåˆ—ï¼Œå®¹é‡ä¸º0ï¼ŒCachedThreadPoolä½¿ç”¨çš„é˜Ÿåˆ—</li><li>DelayedWorkQueueï¼Œå»¶è¿Ÿé˜»å¡é˜Ÿåˆ—ï¼ŒæŒ‰ç…§å»¶è¿Ÿæ—¶é—´æ’åºï¼ŒScheduledThreadPoolä½¿ç”¨çš„é˜Ÿåˆ—</li></ul><h3 id="å¤šçº¿ç¨‹é¡ºåºæ‰§è¡Œçš„å‡ ç§å†™æ³•"><a class="markdownIt-Anchor" href="#å¤šçº¿ç¨‹é¡ºåºæ‰§è¡Œçš„å‡ ç§å†™æ³•"></a> å¤šçº¿ç¨‹é¡ºåºæ‰§è¡Œçš„å‡ ç§å†™æ³•?</h3><ul><li>ä½¿ç”¨joinæ–¹æ³•ï¼Œjoinæ–¹æ³•ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…è°ƒç”¨joinæ–¹æ³•çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œç±»ä¼¼äºè®©è°ƒç”¨joinæ–¹æ³•çš„çº¿ç¨‹â€œæ’é˜Ÿâ€ã€‚</li><li>ä½¿ç”¨çº¿ç¨‹æ± ï¼Œå°†æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½è®¾ç½®ä¸º1ï¼Œç„¶åæŒ‰é¡ºåºæäº¤ä»»åŠ¡ã€‚</li><li>ä½¿ç”¨wait()å’Œnotifyï¼Œåˆ›å»ºä¸¤ä¸ªlockï¼Œåˆ†åˆ«æ˜¯lock1å’Œlock2ï¼Œçº¿ç¨‹1å’Œçº¿ç¨‹2å…±ç”¨lock1,çº¿ç¨‹2å’Œçº¿ç¨‹3å…±ç”¨lock2ã€‚å®ç°å¦‚ä¸‹ï¼š</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintOrder</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Object</span> lock1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Object</span> lock2=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span>&#123;<br>        <span class="hljs-title class_">String</span> name;<br>        <span class="hljs-title class_">Object</span> preLock;<br>        <span class="hljs-title class_">Object</span> postLock;<br>        <span class="hljs-keyword">public</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-title class_">String</span> name,<span class="hljs-title class_">Object</span> preLock, <span class="hljs-title class_">Object</span> postLock)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">preLock</span>=preLock;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">postLock</span>=postLock;<br>        &#125;<br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">if</span>(preLock!=<span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-title function_">synchronized</span>(<span class="hljs-params">preLock</span>)&#123;<br>                    preLock.<span class="hljs-title function_">wait</span>();<br>                &#125;<br>            &#125;<br>            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(name+<span class="hljs-string">&quot;æ‰§è¡Œ&quot;</span>);<br>            <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">1000</span>);<br>            <span class="hljs-keyword">if</span>(postLock!=<span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-title function_">synchronized</span>(<span class="hljs-params">postLock</span>)&#123;<br>                    postLock.<span class="hljs-title function_">notify</span>();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)&#123;<br>        <span class="hljs-title class_">Thread</span> t1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;çº¿ç¨‹1&quot;</span>,<span class="hljs-literal">null</span>,lock1));<br>        <span class="hljs-title class_">Thread</span> t2=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;çº¿ç¨‹2&quot;</span>,lock1,lock2));<br>        <span class="hljs-title class_">Thread</span> t3=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;çº¿ç¨‹3&quot;</span>,lock2,<span class="hljs-literal">null</span>));<br>        t2.<span class="hljs-title function_">start</span>();<br>        t1.<span class="hljs-title function_">start</span>();<br>        t3.<span class="hljs-title function_">start</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨countDownLatchï¼Œé€šè¿‡await()æ–¹æ³•é˜»å¡çº¿ç¨‹ï¼Œé€šè¿‡countDown()æ–¹æ³•å°†è®¡æ•°å™¨å‡1ã€‚å®ç°æ–¹å¼å’Œwait()å’Œnotify()ç±»ä¼¼ï¼ŒæŠŠwait()æ¢æˆäº†await()ï¼ŒæŠŠnotify()æ¢æˆäº†countdown()ã€‚</li></ul><h3 id="çº¿ç¨‹æ± ä¸­shutdownå’Œshutdownnowçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± ä¸­shutdownå’Œshutdownnowçš„åŒºåˆ«"></a> çº¿ç¨‹æ± ä¸­shutdownå’ŒshutdownNowçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>shutdownä¼šå°†çŠ¶æ€ç½®ä¸ºSHUTDOWNçŠ¶æ€ï¼Œæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¼šç»§ç»­æ‰§è¡Œï¼Œæ— æ³•å‘çº¿ç¨‹æ± æ·»åŠ æ–°ä»»åŠ¡ã€‚</li><li>shutdownNowä¼šå°†çŠ¶æ€ç½®ä¸ºSTOPçŠ¶æ€ï¼Œä¼šå°è¯•ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li></ul><h3 id="æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡å¯ä»¥è¢«æ’¤å›å—"><a class="markdownIt-Anchor" href="#æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡å¯ä»¥è¢«æ’¤å›å—"></a> æäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡å¯ä»¥è¢«æ’¤å›å—ï¼Ÿ</h3><p>ç­”ï¼šå¯ä»¥ã€‚å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡åï¼Œä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ï¼Œé€šè¿‡Futureå¯¹è±¡çš„cancel()æ–¹æ³•å¯ä»¥å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œã€‚</p><h3 id="çº¿ç¨‹æ± ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#çº¿ç¨‹æ± ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"></a> çº¿ç¨‹æ± ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><ul><li>å·¥å‚æ¨¡å¼ï¼šåˆ›å»ºçº¿ç¨‹ä¼šç”¨åˆ°</li><li>ç­–ç•¥æ¨¡å¼ï¼šåŒ…å«å¤šç§æ‹’ç»ç­–ç•¥</li><li>å•ä¾‹æ¨¡å¼ï¼šçº¿ç¨‹æ± ä¸€èˆ¬æ˜¯å•ä¾‹çš„</li><li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šrunWorker()æ–¹æ³•å®šä¹‰äº†å·¥ä½œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡çš„æ ¸å¿ƒé€»è¾‘éª¨æ¶</li></ul><h3 id="threadlocalä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼"><a class="markdownIt-Anchor" href="#threadlocalä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼"></a> ThreadLocalä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Ÿ</h3><p>ThreadLocalMapçš„é”®ä¸ºThreadLocalçš„å¼±å¼•ç”¨ï¼Œè€Œå€¼æ˜¯å¼ºå¼•ç”¨ã€‚å¦‚æœThreadLocalå¯¹è±¡è¢«å›æ”¶ï¼Œå…¶å¯¹åº”çš„Entryé”®ä¼šå˜ä¸ºnullï¼Œå¦‚æœæ­¤æ—¶ä¸åˆ é™¤å¯¹åº”çš„Entryï¼Œåˆ™Valueä»ç„¶è¢«Threadä¸Šçš„ThreadLocalMapå¼•ç”¨ï¼Œè€ŒValueå¾€å¾€å ç”¨è¾ƒå¤§å†…å­˜ï¼Œè¿™å°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒThreadLocalåœ¨è°ƒç”¨setã€getã€removeæ–¹æ³•æ—¶ï¼Œä¼šæ¸…ç†æ‰ThreadLocalMapä¸­æ‰€æœ‰é”®ä¸ºnullçš„Entryã€‚ä½†å¦‚æœæ²¡æœ‰è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œé‚£ä¹ˆæ¸…ç†å·¥ä½œå°±ä¸ä¼šè¿›è¡Œï¼Œä»è€Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><h3 id="threadlocalçš„ç»§æ‰¿æ€§é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"><a class="markdownIt-Anchor" href="#threadlocalçš„ç»§æ‰¿æ€§é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"></a> ThreadLocalçš„ç»§æ‰¿æ€§é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ï¼Ÿ</h3><ul><li>åŒä¸€ä¸ªThreadLocalå˜é‡åœ¨çˆ¶çº¿ç¨‹ä¸­è®¾ç½®å€¼ï¼Œåœ¨å­çº¿ç¨‹ä¸­è·å–ä¸åˆ°å€¼ã€‚</li><li>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨InheritableThreadLocalç±»ï¼Œå®ƒæ˜¯ThreadLocalçš„å­ç±»ï¼Œå¯ä»¥åœ¨å­çº¿ç¨‹ä¸­è·å–çˆ¶çº¿ç¨‹ä¸­è®¾ç½®çš„å€¼ã€‚</li></ul><h3 id="completablefutureæ€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#completablefutureæ€ä¹ˆç”¨"></a> CompletableFutureæ€ä¹ˆç”¨ï¼Ÿ</h3><p>CompletableFutureç›¸æ¯”Futureï¼Œä¼˜åŠ¿å°±åœ¨äºå¯ä»¥çµæ´»çš„ç¼–æ’å¼‚æ­¥ä»»åŠ¡</p><blockquote><p>åˆ›å»ºCompletableFutureå¯¹è±¡</p></blockquote><ul><li>runAsyncï¼šä¸å…³å¿ƒè¿”å›ç»“æœæ—¶ä½¿ç”¨</li><li>ï¼ˆå¸¸ç”¨ï¼‰supplyAsyncï¼šå…³å¿ƒè¿”å›ç»“æœæ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚</li></ul><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">CompletableFuture&lt;<span class="hljs-built_in">String</span>&gt; future2 = CompletableFuture.supplyAsync(<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-string">&quot;hello!&quot;</span>);<br></code></pre></td></tr></table></figure><blockquote><p>è·å–ç»“æœåè¿›ä¸€æ­¥å¤„ç†</p></blockquote><ul><li>thenApplyï¼šä»å›è°ƒå‡½æ•°ä¸­è·å–ç»“æœåè¿›ä¸€æ­¥å¤„ç†</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">CompletableFuture&lt;<span class="hljs-type">String</span>&gt; future = CompletableFuture.<span class="hljs-built_in">completedFuture</span>(<span class="hljs-string">&quot;hello!&quot;</span>)<br>        .<span class="hljs-built_in">thenApply</span>(s -&gt; s + <span class="hljs-string">&quot;world!&quot;</span>).<span class="hljs-built_in">thenApply</span>(s -&gt; s + <span class="hljs-string">&quot;nice!&quot;</span>);<br><span class="hljs-built_in">assertEquals</span>(<span class="hljs-string">&quot;hello!world!nice!&quot;</span>, future.<span class="hljs-built_in">get</span>());<br></code></pre></td></tr></table></figure><ul><li>thenAccept: ä¸éœ€è¦ä»å›è°ƒå‡½æ•°ä¸­è·å–å›è°ƒç»“æœ, å¯ä»¥è®¿é—®å¼‚æ­¥è®¡ç®—ç»“æœ</li><li>thenRun: ä¸éœ€è¦ä»å›è°ƒå‡½æ•°ä¸­è·å–å›è°ƒç»“æœ, ä¸èƒ½è®¿é—®å¼‚æ­¥è®¡ç®—ç»“æœ</li></ul><blockquote><p>ç»„åˆå¤šä¸ªCompletableFuture</p></blockquote><ul><li>thenCombine: å°†ä¸¤ä¸ªä»»åŠ¡çš„ç»“æœç»„åˆåœ¨ä¸€èµ·ï¼Œä¸¤ä¸ªä»»åŠ¡ä¹‹é—´æ²¡æœ‰å…ˆåé¡ºåºã€‚</li><li>thenCompose: å°†å‰ä¸€ä¸ªä»»åŠ¡çš„è¿”å›ç»“æœä½œä¸ºä¸‹ä¸€ä¸ªä»»åŠ¡çš„å‚æ•°ï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ç€å…ˆåé¡ºåºã€‚</li></ul><blockquote><p>å¹¶è¡Œè¿è¡Œå¤šä¸ªä»»åŠ¡</p></blockquote><ul><li>allOf: ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆå†è¿”å›</li><li>anyOf: ç­‰å¾…ä»»æ„ä¸€ä¸ªä»»åŠ¡å®Œæˆå°±è¿”å›</li></ul><h2 id="mybatis"><a class="markdownIt-Anchor" href="#mybatis"></a> MyBatis</h2><h3 id="mybatisä¸­å’Œçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#mybatisä¸­å’Œçš„åŒºåˆ«"></a> MyBatisä¸­#{}å’Œ${}çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><code>#&#123;&#125;ï¼šé¢„ç¼–è¯‘å¤„ç†ï¼Œä¼šå°†#&#123;&#125;æ›¿æ¢ä¸º?ï¼Œç„¶åä½¿ç”¨PreparedStatementçš„setæ–¹æ³•è®¾ç½®å‚æ•°ï¼Œå¯ä»¥é˜²æ­¢SQLæ³¨å…¥ã€‚</code></li><li><code>$&#123;&#125;ï¼šå­—ç¬¦ä¸²æ›¿æ¢ï¼Œä¼šå°†$&#123;&#125;æ›¿æ¢ä¸ºå®é™…çš„å€¼ï¼Œå­˜åœ¨SQLæ³¨å…¥çš„é£é™©ã€‚</code></li><li><code>#&#123;&#125;ä¸ç”¨åŠ å•å¼•å·ï¼Œ$&#123;&#125;éœ€è¦åŠ å•å¼•å·</code></li></ul><h3 id="mybatisçš„å»¶è¿ŸåŠ è½½åŠå…¶åŸç†"><a class="markdownIt-Anchor" href="#mybatisçš„å»¶è¿ŸåŠ è½½åŠå…¶åŸç†"></a> MyBatisçš„å»¶è¿ŸåŠ è½½åŠå…¶åŸç†ï¼Ÿ</h3><p>å»¶è¿ŸåŠ è½½æŒ‡çš„æ˜¯æŸ¥è¯¢æ•°æ®æ—¶ï¼Œéœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰åŠ è½½ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°æ®æ—¶å°±ä¸åŠ è½½ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®</p><p>åŸç†ï¼š</p><ul><li>é€šè¿‡cglibåŠ¨æ€ä»£ç†å®ç°</li><li>è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨invokeæ–¹æ³•ï¼Œå½“å‘ç°ç›®æ ‡å€¼ä¸ºnullï¼Œå°±å»æ‰§è¡ŒsqlæŸ¥è¯¢</li></ul><h3 id="mybatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#mybatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«"></a> MyBatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</h3><p>MyBatisçš„ä¸€çº§äºŒçº§ç¼“å­˜éƒ½æ˜¯æœ¬åœ°ç¼“å­˜ï¼Œéƒ½æ˜¯åŸºäºHashMapçš„</p><ul><li>ä¸€çº§ç¼“å­˜ï¼šSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ï¼Œå­˜å‚¨åœ¨SqlSessionä¸­ï¼ŒSqlSessionå…³é—­åç¼“å­˜å¤±æ•ˆ</li><li>äºŒçº§ç¼“å­˜ï¼šMapperçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å…³é—­ï¼Œå­˜å‚¨åœ¨SqlSessionFactoryä¸­ï¼ŒSqlSessionå…³é—­åç¼“å­˜ä¸å¤±æ•ˆ</li></ul><p>äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™æ¸…é™¤ç¼“å­˜ä¸­çš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>å½“æŸä¸ªä½œç”¨åŸŸè¿›è¡Œäº†å¢åˆ æ”¹æ“ä½œæ—¶ï¼Œæ¸…é™¤è¯¥ä½œç”¨åŸŸçš„ç¼“å­˜</li></ul><h2 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> MYSQL</h2><h3 id="sqlæ³¨å…¥æ˜¯ä»€ä¹ˆä¸¾ä¸ªä¾‹å­"><a class="markdownIt-Anchor" href="#sqlæ³¨å…¥æ˜¯ä»€ä¹ˆä¸¾ä¸ªä¾‹å­"></a> SQLæ³¨å…¥æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Ÿ</h3><p>æŒ‡çš„æ˜¯æ”»å‡»è€…é€šè¿‡æ¶æ„æ„é€ è¾“å…¥å‚æ•°ï¼Œä½¿å¾—æ­£å¸¸SQLè¯­å¥è¢«ä¿®æ”¹</p><p>ä¾‹å¦‚<code>SELECT * FROM Users WHERE Username = '' AND Password = '' OR '' = ''</code><br />ç”±äº<code>&quot;=&quot;</code>æ°¸è¿œä¸ºçœŸï¼Œæ‰€ä»¥è¿™ä¸ªSQLè¯­å¥ä¼šè¿”å›æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯</p><h3 id="mysqlçš„äº‹åŠ¡éš”ç¦»çº§åˆ«"><a class="markdownIt-Anchor" href="#mysqlçš„äº‹åŠ¡éš”ç¦»çº§åˆ«"></a> mysqlçš„äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><h4 id="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§"><a class="markdownIt-Anchor" href="#äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§"></a> äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§</h4><ul><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚</li><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚</li><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚</li><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚</li></ul><h4 id="äº‹åŠ¡éš”ç¦»è§£å†³çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#äº‹åŠ¡éš”ç¦»è§£å†³çš„é—®é¢˜"></a> äº‹åŠ¡éš”ç¦»è§£å†³çš„é—®é¢˜</h4><ul><li>è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œè¯»åˆ°äº†æœ€ç»ˆå¯èƒ½ä¸å­˜åœ¨çš„æ•°æ®</li><li>å¯é‡å¤è¯»ï¼šåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ï¼Œå³ä½¿å…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†è¯¥æ•°æ®ï¼Œå½“å‰äº‹åŠ¡ä»ç„¶çœ‹åˆ°æœ€åˆè¯»å–çš„å€¼</li><li>ä¸å¯é‡å¤è¯»ï¼šåŒä¸€äº‹åŠ¡åœ¨ä¸åŒçš„æ—¶åˆ»è¯»åˆ°çš„åŒä¸€æ‰¹æ•°æ®å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚å…¶ä»–äº‹åŠ¡æ”¹äº†è¿™æ‰¹æ•°æ®å¹¶æäº¤äº†ï¼ˆé’ˆå¯¹updateï¼‰</li><li>å¹»è¯»ï¼šåŒä¸€äº‹åŠ¡åœ¨ä¸åŒçš„æ—¶åˆ»è¯»åˆ°çš„åŒä¸€æ‰¹æ•°æ®å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚å…¶ä»–äº‹åŠ¡æ’å…¥äº†ä¸€äº›æ•°æ®å¹¶æäº¤äº†ï¼ˆé’ˆå¯¹insertï¼‰</li></ul><h4 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a class="markdownIt-Anchor" href="#äº‹åŠ¡éš”ç¦»çº§åˆ«"></a> äº‹åŠ¡éš”ç¦»çº§åˆ«</h4><p>mysqlä¸­æœ‰å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œçº§åˆ«ç”±ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼š</p><ul><li>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼šå…è®¸è„è¯»ï¼Œä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡å°±å¯ä»¥çœ‹åˆ°å®ƒåšçš„å˜æ›´ï¼Œå­˜åœ¨è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜</li><li>è¯»æäº¤ï¼ˆRead Committedï¼‰ï¼šåªèƒ½è¯»å–å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é¿å…è„è¯»ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ä»ç„¶å­˜åœ¨</li><li>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼šå¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®è¢«å½“å‰äº‹åŠ¡è‡ªå·±æ”¹å˜ï¼Œå¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»ç„¶å­˜åœ¨</li><li>ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼šæœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œæ‰€æœ‰äº‹åŠ¡ä¾æ¬¡æ‰§è¡Œï¼Œå¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</li></ul><h3 id="mysqlå…·ä½“æ€ä¹ˆè§£å†³è„è¯»-ä¸å¯é‡å¤è¯»-å¹»è¯»çš„"><a class="markdownIt-Anchor" href="#mysqlå…·ä½“æ€ä¹ˆè§£å†³è„è¯»-ä¸å¯é‡å¤è¯»-å¹»è¯»çš„"></a> MYSQLå…·ä½“æ€ä¹ˆè§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„ï¼Ÿ</h3><ul><li>è„è¯»ï¼šå¯ä»¥é€šè¿‡select for update ,åŠ ç‹¬å é”ï¼ˆæ’ä»–é”ï¼‰è§£å†³ï¼Œäº‹åŠ¡æäº¤å‰ï¼Œä¼šä¸€ç›´æŒæœ‰æ’ä»–é”ã€‚é€šå¸¸é€šè¿‡MVCCå®ç°ï¼Œè¯»æäº¤éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡è¯»æ•°æ®æ—¶ï¼Œéƒ½ä¼šç”Ÿäº§ä¸€ä¸ªReadViewï¼Œåªèƒ½çœ‹åˆ°å·²ç»æäº¤çš„æ•°æ®ç‰ˆæœ¬</li><li>ä¸å¯é‡å¤è¯»ï¼šä¹Ÿæ˜¯åŸºäºMVCCï¼Œå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œç¬¬ä¸€æ¬¡è¯»æ•°æ®æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªReadViewï¼Œæ„å‘³ç€äº‹åŠ¡åç»­çš„è¯»æ“ä½œåªèƒ½çœ‹åˆ°ç¬¬ä¸€æ¬¡è¯»åˆ°çš„æ•°æ®ç‰ˆæœ¬</li><li>å¹»è¯»ï¼šå¯¹è¯»å–çš„æ•°æ®åŠ å…±äº«é”ï¼Œç„¶åé€šè¿‡é—´éš™é”ï¼Œé˜²æ­¢åœ¨æŸä¸ªèŒƒå›´å†…æ’å…¥æ•°æ®</li></ul><h3 id="mysqlçš„æœ‰å“ªå‡ ç§å¼•æ“"><a class="markdownIt-Anchor" href="#mysqlçš„æœ‰å“ªå‡ ç§å¼•æ“"></a> MYSQLçš„æœ‰å“ªå‡ ç§å¼•æ“ï¼Ÿ</h3><ul><li>InnoDBï¼šInnoDBæ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œå…·æœ‰ACIDäº‹åŠ¡æ”¯æŒã€è¡Œçº§é”ã€å¤–é”®çº¦æŸç­‰ç‰¹æ€§ã€‚å®ƒé€‚ç”¨äºé«˜å¹¶å‘çš„è¯»å†™æ“ä½œï¼Œæ”¯æŒè¾ƒå¥½çš„æ•°æ®å®Œæ•´æ€§å’Œå¹¶å‘æ§åˆ¶ã€‚</li><li>MyISAMï¼šMyISAMæ˜¯MySQLçš„å¦ä¸€ç§å¸¸è§çš„å­˜å‚¨å¼•æ“ï¼Œå…·æœ‰è¾ƒä½çš„å­˜å‚¨ç©ºé—´å’Œå†…å­˜æ¶ˆè€—ï¼Œé€‚ç”¨äºå¤§é‡è¯»æ“ä½œçš„åœºæ™¯ã€‚ç„¶è€Œï¼ŒMyISAMä¸æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”å’Œå¤–é”®çº¦æŸï¼Œå› æ­¤åœ¨å¹¶å‘å†™å…¥å’Œæ•°æ®å®Œæ•´æ€§æ–¹é¢æœ‰ä¸€å®šçš„é™åˆ¶ã€‚</li><li>Memoryï¼šMemoryå¼•æ“å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé€‚ç”¨äºå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„è¯»æ“ä½œï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨é‡å¯æˆ–å´©æºƒæ—¶æ•°æ®ä¼šä¸¢å¤±ã€‚å®ƒä¸æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”å’Œå¤–é”®çº¦æŸã€‚</li></ul><h3 id="mysqläº†è§£å“ªäº›æ—¥å¿—"><a class="markdownIt-Anchor" href="#mysqläº†è§£å“ªäº›æ—¥å¿—"></a> MYSQLäº†è§£å“ªäº›æ—¥å¿—ï¼Ÿ</h3><ul><li>redo log é‡åšæ—¥å¿—ï¼Œæ˜¯ InnoDB å­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œå®ç°äº†äº‹åŠ¡ä¸­çš„æŒä¹…æ€§ï¼Œä¸»è¦ç”¨äºæ‰ç”µç­‰æ•…éšœæ¢å¤ï¼Œæ˜¯å¾ªç¯å†™ï¼›</li><li>undo log å›æ»šæ—¥å¿—ï¼Œæ˜¯ InnoDB å­˜å‚¨å¼•æ“å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œå®ç°äº†äº‹åŠ¡ä¸­çš„åŸå­æ€§ï¼Œä¸»è¦ç”¨äºäº‹åŠ¡å›æ»šå’Œ MVCCã€‚</li><li>bin log äºŒè¿›åˆ¶æ—¥å¿—ï¼Œæ˜¯ Server å±‚ç”Ÿæˆçš„æ—¥å¿—ï¼Œä¸»è¦ç”¨äºæ•°æ®å¤‡ä»½å’Œä¸»ä»å¤åˆ¶ï¼Œæ˜¯è¿½åŠ å†™ï¼›</li><li>relay log ä¸­ç»§æ—¥å¿—ï¼Œç”¨äºä¸»ä»å¤åˆ¶åœºæ™¯ä¸‹ï¼Œslave é€šè¿‡ io çº¿ç¨‹æ‹·è´ master çš„ bin log åæœ¬åœ°ç”Ÿæˆçš„æ—¥å¿—</li><li>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç”¨äºè®°å½•æ‰§è¡Œæ—¶é—´è¿‡é•¿çš„ SQLï¼Œéœ€è¦è®¾ç½®é˜ˆå€¼åæ‰‹åŠ¨å¼€å¯</li></ul><h3 id="undologå’Œredologçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#undologå’Œredologçš„åŒºåˆ«"></a> undologå’Œredologçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>redologè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼Œå‘ç”Ÿæ•…éšœæ—¶å¯ç”¨æ¥åŒæ­¥æ•°æ®</li><li>undologè®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼Œç”¨äºäº‹åŠ¡å›æ»šå’Œmvcc,é€šè¿‡é€†æ“ä½œæ¢å¤æ•°æ®</li></ul><h3 id="ä»‹ç»ä¸€ä¸‹redo-log"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹redo-log"></a> ä»‹ç»ä¸€ä¸‹redo log?</h3><p>redo logç”¨äºmysqlå®•æœºæ—¶çš„æ¢å¤</p><ul><li>ä¸€èˆ¬æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼šæŠŠæ•°æ®æ”¾åˆ°buffer poolä¸­ï¼Œåç»­æŸ¥è¯¢å¯ä»¥åœ¨buffer poolä¸­å¯»æ‰¾</li><li>æ›´æ–°æ•°æ®æ—¶ï¼Œå¦‚æœåœ¨buffer poolä¸­å®Œæˆäº†æ›´æ–°ï¼Œå°±ä¼šæŠŠä¿®æ”¹å†…å®¹è®°å½•åˆ°redo log bufferä¸­</li><li>æœ€åæ¸…ç©ºredo log bufferï¼Œ<strong>åˆ·ç›˜</strong>åˆ°redo logä¸­</li></ul><p>å¦‚æœæ²¡æœ‰redo logï¼Œæ¯æ¬¡ç›´æ¥æŠŠæ•°æ®åˆ·ç›˜ï¼Œè¿™æ ·æ€§èƒ½ä¼šå¾ˆå·®</p><h3 id="redo-logåˆ·ç›˜çš„æ—¶æœº"><a class="markdownIt-Anchor" href="#redo-logåˆ·ç›˜çš„æ—¶æœº"></a> redo logåˆ·ç›˜çš„æ—¶æœº</h3><p>ä¸€èˆ¬ä»¥ä¸‹å‡ ç§æƒ…å†µä¼šè§¦å‘åˆ·ç›˜</p><ul><li>äº‹åŠ¡æäº¤æ—¶</li><li>redo log buffer å¿«æ»¡æ—¶</li><li>åå°çº¿ç¨‹å‘¨æœŸæ€§åˆ·ç›˜</li></ul><h3 id="ä»‹ç»ä¸€ä¸‹bin-log"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹bin-log"></a> ä»‹ç»ä¸€ä¸‹bin logï¼Ÿ</h3><p>MySQL åœ¨å®Œæˆä¸€æ¡æ›´æ–°æ“ä½œåï¼Œä¼šç”Ÿæˆä¸€æ¡ binlog<br />binlog æœ‰ 3 ç§æ ¼å¼ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ STATEMENTï¼ˆé»˜è®¤æ ¼å¼ï¼‰ã€ROWã€MIXEDï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>STATEMENTï¼šè®°å½•çš„å†…å®¹æ˜¯SQLè¯­å¥åŸæ–‡ï¼Œä½†æ˜¯å¦‚æœè¿ç”¨äº†<code>now()</code>è¿™ç§å‡½æ•°ï¼Œå¯èƒ½é€ æˆä¸ä¸€è‡´</li><li>ROWï¼šé™¤äº†è®°å½•SQLè¯­å¥ï¼Œè¿˜è®°å½•äº†æ‰€æœ‰å­—æ®µçš„å…·ä½“æ•°æ®</li><li>MIXEDï¼šæ˜¯ä¸¤ç§æ ¼å¼çš„æ··åˆï¼Œåˆ¤æ–­SQLè¯­å¥æ˜¯å¦å¯èƒ½å¼•èµ·æ•°æ®ä¸ä¸€è‡´ï¼Œå¦‚æœæ˜¯ï¼Œå°±ç”¨rowæ ¼å¼ï¼Œå¦åˆ™å°±ç”¨statementæ ¼å¼ã€‚</li></ul><h3 id="mysqlæ€ä¹ˆè¿è¡¨æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#mysqlæ€ä¹ˆè¿è¡¨æŸ¥è¯¢"></a> MYSQLæ€ä¹ˆè¿è¡¨æŸ¥è¯¢ï¼Ÿ</h3><ul><li>å†…è¿æ¥ï¼šè¿”å›ä¸¤ä¸ªè¡¨ä¸­æœ‰åŒ¹é…å…³ç³»çš„è¡Œ</li><li>å·¦å¤–è¿æ¥ï¼šè¿”å›å·¦è¡¨æ‰€æœ‰çš„è¡Œï¼Œå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œè¿”å› NULL</li><li>å³å¤–è¿æ¥ï¼šè¿”å›å³è¡¨æ‰€æœ‰çš„è¡Œï¼Œå·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œè¿”å› NULL</li><li>å…¨å¤–è¿æ¥ï¼šè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è¡Œï¼Œæ²¡æœ‰åŒ¹é…çš„è¡Œè¿”å› NULL</li></ul><h3 id="å¦‚ä½•é¿å…é‡å¤æ’å…¥æ•°æ®"><a class="markdownIt-Anchor" href="#å¦‚ä½•é¿å…é‡å¤æ’å…¥æ•°æ®"></a> å¦‚ä½•é¿å…é‡å¤æ’å…¥æ•°æ®ï¼Ÿ</h3><ul><li>ä½¿ç”¨uniqueçº¦æŸ</li><li>ä½¿ç”¨insert â€¦ on duplicate key updateï¼Œå½“keyå†²çªæ—¶ï¼Œæ‰§è¡Œupdateæ“ä½œ</li><li>ä½¿ç”¨insert ignoreï¼Œå¿½ç•¥å› keyé‡å¤å¯¼è‡´çš„é”™è¯¯</li></ul><h3 id="inå’Œexistsçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#inå’Œexistsçš„åŒºåˆ«"></a> inå’Œexistsçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>inç”¨äºæ£€æŸ¥å·¦è¾¹çš„è¡¨è¾¾å¼å­˜åœ¨äºæŸç»“æœé›†ä¸­çš„æ•°æ®</li><li>existsä¸å…³å¿ƒå…·ä½“æ•°æ®ï¼Œåªå…³å¿ƒç»“æœé›†æ˜¯å¦ä¸ºç©º</li></ul><h3 id="mysqlçš„æ‰§è¡Œè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#mysqlçš„æ‰§è¡Œè¿‡ç¨‹"></a> mysqlçš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h3><ul><li>è¿æ¥å™¨ï¼šèº«ä»½è®¤è¯å’Œæƒé™ç®¡ç†</li><li>æŸ¥è¯¢ç¼“å­˜ï¼šå°è¯•æŸ¥è¯¢ç¼“å­˜ï¼Œ8.0ç‰ˆæœ¬ç§»é™¤</li><li>åˆ†æå™¨ï¼šåˆ†æsqlè¯­å¥æ˜¯å¦æ­£ç¡®</li><li>ä¼˜åŒ–å™¨ï¼šä¼˜åŒ–sqlè¯­å¥ï¼Œé€‰æ‹©æœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’</li><li>æ‰§è¡Œå™¨ï¼šæ‰§è¡Œsqlè¯­å¥</li></ul><h3 id="sqlæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåº"><a class="markdownIt-Anchor" href="#sqlæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåº"></a> SQLæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Ÿ</h3><ul><li>fromï¼šæŒ‡å®šè¦æŸ¥è¯¢çš„è¡¨</li><li>on: ä¸»è¡¨ä¿ç•™</li><li>join: è¿æ¥å…¶ä»–è¡¨</li><li>where: å¯¹è¡¨è¿›è¡Œç­›é€‰</li><li>group by: åˆ†ç»„</li><li>AGG FUNCï¼šèšåˆå‡½æ•°ï¼ˆAVG,COUNT,MAX,MIN,SUMï¼‰</li><li>having: å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œç­›é€‰</li><li>select: é€‰æ‹©è¦æŸ¥è¯¢çš„åˆ—</li><li>distinct: å»é‡</li><li>order by: å¯¹ç»“æœè¿›è¡Œæ’åº</li><li>limit: é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡ï¼Œåˆ†é¡µ</li></ul><h3 id="ä¸ºä»€ä¹ˆinnodbæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆinnodbæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“"></a> ä¸ºä»€ä¹ˆInnoDBæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“ï¼Ÿ</h3><p>InnoDBåœ¨äº‹åŠ¡æ”¯æŒã€å¹¶å‘æ€§èƒ½ã€å´©æºƒæ¢å¤èƒ½åŠ›ç­‰æ–¹é¢å…·æœ‰è‰¯å¥½ç‰¹æ€§ï¼š</p><ul><li>äº‹åŠ¡æ”¯æŒï¼šæ”¯æŒäº‹åŠ¡çš„ACIDç‰¹æ€§ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</li><li>å¹¶å‘æ€§èƒ½ï¼šæ”¯æŒè¡Œçº§é”ï¼Œè€ŒMyISAMåªæ”¯æŒè¡¨çº§é”ï¼Œé”ç²’åº¦æ›´å°ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½</li><li>å´©æºƒæ¢å¤ï¼šé€šè¿‡redologå®ç°å´©æºƒæ¢å¤ï¼Œä¿è¯æ•°æ®çš„æŒä¹…æ€§</li></ul><h3 id="innodbå’Œmyisamçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#innodbå’Œmyisamçš„åŒºåˆ«"></a> InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ</h3><ul><li>äº‹åŠ¡ï¼šInnoDBæ”¯æŒäº‹åŠ¡ï¼ŒMyISAMä¸æ”¯æŒäº‹åŠ¡</li><li>ç´¢å¼•ç»“æ„ï¼šInnoDBä½¿ç”¨èšç°‡ç´¢å¼•ï¼Œç´¢å¼•å»ºç«‹åœ¨ä¸»é”®ä¸Šï¼ŒMyISAMä½¿ç”¨éèšç°‡ç´¢å¼•</li><li>é”ç²’åº¦ï¼šInnoDBæ”¯æŒè¡Œçº§é”ï¼ŒMyISAMæ”¯æŒè¡¨çº§é”</li><li>countæ•ˆç‡ï¼šInnoDBæ‰§è¡Œcountè¦åšå…¨è¡¨æ‰«æï¼ŒMyISAMç”¨ä¸€ä¸ªå˜é‡ä¿å­˜äº†æ•´ä¸ªè¡¨è¡Œæ•°ï¼Œcountæ•ˆç‡æ›´é«˜</li></ul><h3 id="ç´¢å¼•çš„åˆ†ç±»"><a class="markdownIt-Anchor" href="#ç´¢å¼•çš„åˆ†ç±»"></a> ç´¢å¼•çš„åˆ†ç±»ï¼Ÿ</h3><ul><li>æŒ‰æ•°æ®ç»“æ„åˆ†ç±»ï¼šB+æ ‘ç´¢å¼•ã€å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•</li><li>æŒ‰ç‰©ç†å­˜å‚¨åˆ†ç±»ï¼šèšç°‡ç´¢å¼•ã€éèšç°‡ç´¢å¼•</li><li>æŒ‰å­—æ®µç‰¹æ€§åˆ†ç±»: åˆ†ä¸ºä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€æ™®é€šç´¢å¼•ã€å‰ç¼€ç´¢å¼•</li><li>æŒ‰ç´¢å¼•çš„æ•°é‡åˆ†ç±»ï¼šå•åˆ—ç´¢å¼•ã€è”åˆç´¢å¼•</li></ul><h3 id="èšç°‡ç´¢å¼•é€‰å–çš„ä¾æ®æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#èšç°‡ç´¢å¼•é€‰å–çš„ä¾æ®æ˜¯ä»€ä¹ˆ"></a> èšç°‡ç´¢å¼•é€‰å–çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>å¦‚æœæœ‰ä¸»é”®ï¼Œé»˜è®¤ä½¿ç”¨ä¸»é”®ç´¢å¼•ä½œä¸ºèšç°‡ç´¢å¼•</li><li>å¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ä½œä¸ºèšç°‡ç´¢å¼•</li><li>å¦‚æœéƒ½æ²¡æœ‰ï¼ŒinnoDBä¼šç”Ÿæˆä¸€ä¸ªéšè—çš„è‡ªå¢IDä½œä¸ºèšç°‡ç´¢å¼•</li></ul><h3 id="èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«"></a> èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>æ•°æ®å­˜å‚¨ï¼šèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†æ•°æ®è¡Œï¼Œéèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆæˆ–è€…ä¸»é”®</li><li>ç´¢å¼•ä¸æ•°æ®çš„å…³ç³»ï¼šèšç°‡ç´¢å¼•å¯ä»¥ç›´æ¥æŸ¥æ‰¾åˆ°æ•°æ®è¡Œï¼Œéèšç°‡ç´¢å¼•éœ€è¦å…ˆæŸ¥æ‰¾åˆ°ä¸»é”®ï¼Œå†é€šè¿‡ä¸»é”®å›æº¯åˆ°èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾æ•°æ®è¡Œï¼Œç§°ä¸ºå›è¡¨ã€‚</li><li>å”¯ä¸€æ€§ï¼šèšç°‡ç´¢å¼•å»ºç«‹åœ¨ä¸»é”®ä¸Šæ˜¯å”¯ä¸€çš„ï¼Œéèšç°‡ç´¢å¼•å¯ä»¥æœ‰å¤šä¸ª</li><li>æŸ¥è¯¢æ•ˆç‡ï¼šå¯¹äºéœ€è¦å›è¡¨çš„æŸ¥è¯¢ï¼Œèšç°‡ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œå¯¹äºä¸éœ€è¦å›è¡¨çš„æŸ¥è¯¢ï¼Œéèšç°‡ç´¢å¼•æ•ˆç‡æ›´é«˜</li></ul><h3 id="bæ ‘çš„ç‰¹æ€§"><a class="markdownIt-Anchor" href="#bæ ‘çš„ç‰¹æ€§"></a> B+æ ‘çš„ç‰¹æ€§ï¼Ÿ</h3><ul><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œå¶å­èŠ‚ç‚¹ä¹‹é—´å½¢æˆåŒå‘é“¾è¡¨ï¼Œä¾¿äºèŒƒå›´æŸ¥è¯¢å’Œæ’åº</li><li>éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œåªå­˜å‚¨ä¸»é”®å’Œå­èŠ‚ç‚¹çš„æŒ‡é’ˆ</li><li>å¶å­èŠ‚ç‚¹å‚¨å­˜å®é™…çš„æ•°æ®è¡Œ</li><li>åœ¨æ’å…¥ã€åˆ é™¤ã€æ›´æ–°åä¼šè¿›è¡Œå¹³è¡¡æ“ä½œï¼Œä¿è¯æ ‘çš„é«˜åº¦ç›¸å¯¹ç¨³å®šï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å°‘æœ‰<code>M/2</code>ä¸ªå­èŠ‚ç‚¹ï¼Œæœ€å¤šæœ‰<code>M</code>ä¸ªå­èŠ‚ç‚¹ï¼ŒMæ˜¯æ ‘çš„é˜¶æ•°</li></ul><h3 id="bæ ‘å’Œbæ ‘çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#bæ ‘å’Œbæ ‘çš„åŒºåˆ«"></a> B+æ ‘å’ŒBæ ‘çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>B+æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œè€ŒBæ ‘çš„éå¶å­èŠ‚ç‚¹ä¼šå­˜å‚¨éƒ¨åˆ†æ•°æ®</li><li>B+æ ‘çš„å¶å­èŠ‚ç‚¹ä¹‹é—´å½¢æˆåŒå‘é“¾è¡¨ï¼Œä¾¿äºèŒƒå›´æŸ¥è¯¢å’Œæ’åºï¼ŒBæ ‘å¶å­èŠ‚ç‚¹æ²¡æœ‰é“¾è¡¨</li><li>B+æ ‘æ¯æ¬¡éƒ½è¦æŸ¥åˆ°å¶å­èŠ‚ç‚¹ï¼ŒBæ ‘å¯èƒ½ä¼šåœ¨éå¶å­èŠ‚ç‚¹æ‰¾åˆ°æ•°æ®</li></ul><h3 id="ä¸ºä»€ä¹ˆmysqlä¸ç”¨è·³è¡¨"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆmysqlä¸ç”¨è·³è¡¨"></a> ä¸ºä»€ä¹ˆMYSQLä¸ç”¨è·³è¡¨ï¼Ÿ</h3><p>B+æ ‘åœ¨3å±‚æ—¶å­˜å‚¨çš„æ•°æ®å¯ä»¥è¾¾åˆ°åƒä¸‡çº§åˆ«ï¼Œè·³è¡¨è¦ç»´æŠ¤åŒæ ·çº§åˆ«çš„æ•°æ®éœ€è¦çš„å±‚æ•°æ›´å¤šï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè‡ªå¢idå¿«ä¸€äº›ä¸ºä»€ä¹ˆä¸ç”¨uuid"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè‡ªå¢idå¿«ä¸€äº›ä¸ºä»€ä¹ˆä¸ç”¨uuid"></a> ä¸ºä»€ä¹ˆè‡ªå¢IDå¿«ä¸€äº›ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨UUIDï¼Ÿ</h3><p>è‡ªå¢IDæ›´å¿«çš„åŸå› ï¼š</p><ul><li>ä¸‹ä¸€æ¡è®°å½•ä¼šå†™å…¥æ–°çš„é¡µä¸­ï¼Œæå‡äº†é¡µé¢çš„åˆ©ç”¨ç‡</li><li>æ–°æ’å…¥çš„è®°å½•ä¸€å®šä¼šåœ¨åŸæœ‰æœ€å¤§IDçš„åé¢ï¼Œä¾¿äºå®šä½å’Œå¯»å€</li><li>å‡å°‘äº†é¡µåˆ†è£‚</li></ul><p>ä¸ç”¨UUIDçš„åŸå› ï¼š</p><ul><li>æ— åºï¼Œæ¯æ¬¡æ’å…¥æ•°æ®å¯èƒ½æ’å…¥åˆ°é¡µé¢ä¸­é—´ï¼Œå¯¼è‡´é¡µåˆ†è£‚</li><li>å ç”¨ç©ºé—´å¤§ï¼ŒUUIDæ˜¯çš„é•¿åº¦æ›´é•¿ï¼Œæ¯ä¸ªé¡µèƒ½å­˜æ”¾çš„è®°å½•æ•°æ›´å°‘ï¼Œå¯¼è‡´æ ‘çš„é«˜åº¦æ›´é«˜ï¼Œå½±å“æ€§èƒ½</li></ul><h3 id="ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•"></a> ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</h3><p>è¦†ç›–ç´¢å¼•æ˜¯æŒ‡<strong>ç´¢å¼•åŒ…å«äº†æŸ¥è¯¢éœ€è¦çš„æ‰€æœ‰å­—æ®µï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢</strong>ï¼Œå‡å°‘äº†IOæ“ä½œï¼Œæå‡äº†æŸ¥è¯¢æ€§èƒ½ã€‚</p><h3 id="æ·±åº¦åˆ†é¡µæœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ·±åº¦åˆ†é¡µæœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•"></a> æ·±åº¦åˆ†é¡µæœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h3><ul><li>ä½¿ç”¨èŒƒå›´æŸ¥è¯¢ï¼šé€šè¿‡ä¸Šä¸€é¡µæœ€åä¸€æ¡è®°å½•çš„IDä½œä¸ºèµ·å§‹IDï¼Œä½†è¿™ç§æ–¹å¼å¦‚æœé‡åˆ°ä¸è¿ç»­éè‡ªå¢çš„IDå°±ä¸é€‚ç”¨äº†</li><li>ä½¿ç”¨å­æŸ¥è¯¢ï¼šåœ¨å­æŸ¥è¯¢ä¸­é€šè¿‡ä¸»é”®ç´¢å¼•å¿«é€Ÿå®šä½åˆ°ç›¸åº”çš„æ•°æ®IDï¼Œç„¶ååœ¨ä¸»æŸ¥è¯¢ä¸­ï¼Œä½¿ç”¨å­æŸ¥è¯¢çš„ç»“æœä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œä½†å­æŸ¥è¯¢ä¼šç”Ÿæˆä¸´æ—¶è¡¨ï¼Œåœ¨å¤æ‚åœºæ™¯ä¸‹æ€§èƒ½ä¼šä¸‹é™</li><li>ä½¿ç”¨å»¶è¿Ÿå…³è”ï¼šå’Œå­æŸ¥è¯¢æ€æƒ³ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯é€šè¿‡å†…è¿æ¥(inner join)å°†å­æŸ¥è¯¢çš„ç»“æœé›†æˆåˆ°ä¸»æŸ¥è¯¢ä¸­ï¼Œé¿å…äº†äº§ç”Ÿä¸´æ—¶è¡¨ï¼Œæ‰€ä»¥æ€§èƒ½ä¼šä¼˜äºå­æŸ¥è¯¢</li><li>ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼šé€šè¿‡è¦†ç›–ç´¢å¼•æ¥é¿å…å›è¡¨æŸ¥è¯¢ï¼Œæå‡æ€§èƒ½ï¼Œä½†æ˜¯å¦‚æœæŸ¥è¯¢ç»“æœé›†å¾ˆå¤§ï¼ˆè¶…è¿‡æ€»æ•°æ®çš„30%ï¼‰ï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨å¯èƒ½ä¼šé€‰æ‹©å…¨è¡¨æ‰«æè€Œä¸æ˜¯ä½¿ç”¨ç´¢å¼•</li></ul><h3 id="åˆ›å»ºè”åˆç´¢å¼•è¦æ³¨æ„ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#åˆ›å»ºè”åˆç´¢å¼•è¦æ³¨æ„ä»€ä¹ˆ"></a> åˆ›å»ºè”åˆç´¢å¼•è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</h3><p><code>åŒºåˆ†åº¦=distinct(col)/count(*)</code></p><ul><li>å»ºç«‹è”åˆç´¢å¼•æ—¶ï¼Œè¦æŠŠåŒºåˆ†åº¦å¤§(é‡å¤å€¼å°‘)çš„å­—æ®µæ’åœ¨å‰é¢ï¼Œè¿™æ ·å¯ä»¥è¿‡æ»¤æ‰æ›´å¤šçš„æ•°æ®ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½</li><li>å¦‚æœåŒºåˆ†åº¦å¾ˆå°ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µï¼Œæ— è®ºæœç´¢å“ªä¸€ä¸ªå€¼éƒ½ä¼šè¿”å›å¤§é‡æ•°æ®</li><li>MYSQLæœ‰ä¸€ä¸ªæŸ¥è¯¢ä¼˜åŒ–å™¨ï¼Œå¦‚æœæŸä¸ªå€¼åœ¨è¡¨ä¸­çš„å‡ºç°æ¯”ä¾‹å¾ˆé«˜ï¼ˆè¶…è¿‡30%ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šä¸èµ°ç´¢å¼•è€Œæ˜¯å…¨è¡¨æ‰«æ</li></ul><h3 id="ç´¢å¼•å¤±æ•ˆæœ‰é‚£äº›æƒ…å†µ"><a class="markdownIt-Anchor" href="#ç´¢å¼•å¤±æ•ˆæœ‰é‚£äº›æƒ…å†µ"></a> ç´¢å¼•å¤±æ•ˆæœ‰é‚£äº›æƒ…å†µï¼Ÿ</h3><ul><li>ä½¿ç”¨å·¦æˆ–è€…å·¦å³æ¨¡ç³ŠåŒ¹é…çš„æ—¶å€™</li><li>åœ¨æŸ¥è¯¢ä¸­å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°æ—¶</li><li>è”åˆç´¢å¼•æ²¡æœ‰éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™</li><li>èŒƒå›´æŸ¥è¯¢<code>&lt; å’Œ &gt;</code>å³è¾¹çš„å­—æ®µï¼Œç´¢å¼•ä¼šå¤±æ•ˆï¼Œä½†æ˜¯<code>&gt;=, &lt;=, between, likeå‰ç¼€åŒ¹é…</code>å³è¾¹çš„å­—æ®µä¸ä¼š</li><li>æŸ¥è¯¢å­—æ®µå‘ç”Ÿç±»å‹è½¬æ¢</li></ul><h3 id="mysqlå¦‚ä½•å®šä½æ…¢æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#mysqlå¦‚ä½•å®šä½æ…¢æŸ¥è¯¢"></a> mysqlå¦‚ä½•å®šä½æ…¢æŸ¥è¯¢ï¼Ÿ</h3><ul><li>å¼€æºå·¥å…·ï¼Œå¦‚æ™®ç½—ç±³ä¿®æ–¯ã€SkyWalkingç­‰å‘ç°æ¯”è¾ƒæ…¢çš„æ¥å£</li><li>ä½¿ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œä¸€èˆ¬è¶…è¿‡2ç§’å°±è¢«è§†ä¸ºæ…¢æŸ¥è¯¢</li></ul><h3 id="æ…¢æŸ¥è¯¢å¦‚ä½•è§£å†³"><a class="markdownIt-Anchor" href="#æ…¢æŸ¥è¯¢å¦‚ä½•è§£å†³"></a> æ…¢æŸ¥è¯¢å¦‚ä½•è§£å†³ï¼Ÿ</h3><ul><li>é€šè¿‡ explain æ‰§è¡Œç»“æœï¼ŒæŸ¥çœ‹ sql æ˜¯å¦èµ°ç´¢å¼•ï¼Œå¦‚æœä¸èµ°ç´¢å¼•ï¼Œè€ƒè™‘å¢åŠ ç´¢å¼•ã€‚</li><li>å¯ä»¥é€šè¿‡å»ºç«‹è”åˆç´¢å¼•ï¼Œå®ç°è¦†ç›–ç´¢å¼•ä¼˜åŒ–ï¼Œå‡å°‘å›è¡¨ï¼Œä½¿ç”¨è”åˆç´¢å¼•ç¬¦åˆæœ€å·¦åŒ¹é…åŸåˆ™ï¼Œä¸ç„¶ä¼šç´¢å¼•å¤±æ•ˆ</li><li>é¿å…ç´¢å¼•å¤±æ•ˆï¼Œæ¯”å¦‚ä¸è¦ç”¨å·¦æ¨¡ç³ŠåŒ¹é…ã€å‡½æ•°è®¡ç®—ã€è¡¨è¾¾å¼è®¡ç®—ç­‰ç­‰ã€‚</li><li>è”è¡¨æŸ¥è¯¢æœ€å¥½è¦ä»¥å°è¡¨é©±åŠ¨å¤§è¡¨ï¼Œå¹¶ä¸”è¢«é©±åŠ¨è¡¨çš„å­—æ®µè¦æœ‰ç´¢å¼•ï¼Œå½“ç„¶æœ€å¥½é€šè¿‡å†—ä½™å­—æ®µçš„è®¾è®¡ï¼Œé¿å…è”è¡¨æŸ¥è¯¢ã€‚</li><li>é’ˆå¯¹ limit n,y æ·±åˆ†é¡µçš„æŸ¥è¯¢ä¼˜åŒ–ï¼Œå¯ä»¥æŠŠ Limit æŸ¥è¯¢è½¬æ¢æˆæŸä¸ªä½ç½®çš„æŸ¥è¯¢ï¼šselect * from tb_sku where id&gt;20000 limit 10ï¼Œè¯¥æ–¹æ¡ˆé€‚ç”¨äºä¸»é”®è‡ªå¢çš„è¡¨ï¼Œ</li><li>å°†å­—æ®µå¤šçš„è¡¨åˆ†è§£æˆå¤šä¸ªè¡¨ï¼Œæœ‰äº›å­—æ®µä½¿ç”¨é¢‘ç‡é«˜ï¼Œæœ‰äº›ä½ï¼Œæ•°æ®é‡å¤§æ—¶ï¼Œä¼šç”±äºä½¿ç”¨é¢‘ç‡ä½çš„å­˜åœ¨è€Œå˜æ…¢ï¼Œå¯ä»¥è€ƒè™‘åˆ†å¼€</li></ul><h3 id="ç´¢å¼•çš„ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ç´¢å¼•çš„ç¼ºç‚¹"></a> ç´¢å¼•çš„ç¼ºç‚¹</h3><ul><li>å ç”¨å­˜å‚¨ç©ºé—´</li><li>åˆ›å»ºå’Œç»´æŠ¤ç´¢å¼•éœ€è¦æ—¶é—´</li><li>ç´¢å¼•ä¼šé™ä½è¡¨çš„å¢åˆ æ”¹çš„æ€§èƒ½</li></ul><h3 id="ä»€ä¹ˆæ—¶å€™é€‚åˆå»ºç«‹ç´¢å¼•"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ—¶å€™é€‚åˆå»ºç«‹ç´¢å¼•"></a> ä»€ä¹ˆæ—¶å€™é€‚åˆå»ºç«‹ç´¢å¼•ï¼Ÿ</h3><ul><li>å­—æ®µæœ‰å”¯ä¸€æ€§é™åˆ¶</li><li>ç»å¸¸ç”¨äºwhereæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ</li><li>ç»å¸¸ç”¨order byã€group byçš„å­—æ®µ</li></ul><h3 id="ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•"></a> ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç´¢å¼•ï¼Ÿ</h3><ul><li>whereã€group byã€order byç”¨ä¸åˆ°çš„å­—æ®µ</li><li>å­—æ®µå­˜åœ¨å¤§é‡é‡å¤å€¼ï¼ŒåŒºåˆ†åº¦ä½</li><li>è¡¨æ•°æ®å¾ˆå°‘ï¼Œä¸éœ€è¦åˆ›å»ºç´¢å¼•</li><li>ç»å¸¸è¿›è¡Œæ›´æ–°çš„å­—æ®µä¸ç”¨å»ºç«‹ç´¢å¼•</li></ul><h3 id="å¦‚ä½•å¯¹ç´¢å¼•è¿›è¡Œä¼˜åŒ–"><a class="markdownIt-Anchor" href="#å¦‚ä½•å¯¹ç´¢å¼•è¿›è¡Œä¼˜åŒ–"></a> å¦‚ä½•å¯¹ç´¢å¼•è¿›è¡Œä¼˜åŒ–ï¼Ÿ</h3><ul><li>å‰ç¼€ç´¢å¼•ä¼˜åŒ–ï¼Œå‰ç¼€ç´¢å¼•é€šè¿‡å‡å°‘ç´¢å¼•å­—æ®µçš„é•¿åº¦ï¼Œä»è€Œä½¿ç´¢å¼•é¡µåŒ…å«çš„ç´¢å¼•é”®å¢å¤šï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>è¦†ç›–ç´¢å¼•ä¼˜åŒ–ï¼Œå‡å°‘å›è¡¨æ“ä½œ</li><li>æœ€å¥½é‡‡ç”¨è‡ªå¢ä¸»é”®ï¼Œå‡å°‘é¡µåˆ†è£‚</li><li>é˜²æ­¢ç´¢å¼•å¤±æ•ˆ</li></ul><h3 id="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§æ˜¯å¦‚ä½•å®ç°çš„"><a class="markdownIt-Anchor" href="#äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§æ˜¯å¦‚ä½•å®ç°çš„"></a> äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><ul><li>åŸå­æ€§ï¼šé€šè¿‡undo logå®ç°ï¼Œäº‹åŠ¡å›æ»šæ—¶ï¼Œé€šè¿‡undo logå°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€</li><li>æŒä¹…æ€§ï¼šé€šè¿‡redo logå®ç°ï¼Œäº‹åŠ¡æäº¤æ—¶ï¼Œå°†redo logå†™å…¥ç£ç›˜ï¼Œä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§</li><li>éš”ç¦»æ€§ï¼šé€šè¿‡MVCCå®ç°ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œè¯»å–æ•°æ®æ—¶ï¼Œåªèƒ½è¯»å–ç‰ˆæœ¬å·å°äºç­‰äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·çš„æ•°æ®</li><li>æŒä¹…æ€§: é€šè¿‡åŸå­æ€§+æŒä¹…æ€§+éš”ç¦»æ€§å®ç°</li></ul><h3 id="è®²è®²mvcc"><a class="markdownIt-Anchor" href="#è®²è®²mvcc"></a> è®²è®²MVCC?</h3><p>MVCCæŒ‡çš„æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ²¡æœ‰å†²çª</p><p>MVCCçš„å®ç°ä¸»è¦ä¾èµ–äºéšè—å­—æ®µã€undologã€ä»¥åŠreadview</p><ul><li>éšè—å­—æ®µï¼šæ¯ä¸ªæ•°æ®è¡Œéƒ½æœ‰éšè—å­—æ®µï¼ŒåŒ…æ‹¬æœ€è¿‘ä¿®æ”¹äº‹åŠ¡IDï¼Œå›æ»šæŒ‡é’ˆç­‰</li><li>undolog: ç”¨æ¥å­˜å‚¨MVCCçš„ç‰ˆæœ¬é“¾ï¼Œæ¯æ¬¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œéƒ½ä¼šé€šè¿‡å¤´æ’æ³•å°†æ–°çš„ç‰ˆæœ¬æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨</li><li>readViewï¼šç”¨äº<strong>å¿«ç…§è¯»</strong>æå–æ•°æ®æ—¶åˆ¤æ–­æ•°æ®çš„å¯è§æ€§ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ•°æ®ç‰ˆæœ¬</li></ul><h3 id="å½“å‰è¯»å’Œå¿«ç…§è¯»çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#å½“å‰è¯»å’Œå¿«ç…§è¯»çš„åŒºåˆ«"></a> å½“å‰è¯»å’Œå¿«ç…§è¯»çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>å½“å‰è¯»ï¼šè¯»æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œé€šè¿‡åŠ é”çš„æ–¹å¼ä¿è¯çº¿ç¨‹å®‰å…¨</li><li>å¿«ç…§è¯»ï¼šä¸åŠ é”çš„è¯»å°±æ˜¯å¿«ç…§è¯»ï¼Œè¯»çš„æ˜¯æ•°æ®çš„å¯è§ç‰ˆæœ¬ï¼Œå¯èƒ½æ˜¯æ—§ç‰ˆæœ¬çš„æ•°æ®ã€‚<ul><li>åœ¨è¯»æäº¤éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡selectéƒ½ä¼šç”Ÿæˆä¸€ä¸ªreadView</li><li>åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡selectä¼šç”ŸæˆreadViewï¼Œåç»­çš„selectä¼šä½¿ç”¨ç¬¬ä¸€æ¬¡çš„readView</li></ul></li></ul><h3 id="mvccçš„readviewä»‹ç»ä¸€ä¸‹"><a class="markdownIt-Anchor" href="#mvccçš„readviewä»‹ç»ä¸€ä¸‹"></a> MVCCçš„ReadViewä»‹ç»ä¸€ä¸‹ï¼Ÿ</h3><p>æœ‰å››ä¸ªé‡è¦çš„å­—æ®µï¼š</p><ul><li>m_ids: <strong>æ´»è·ƒä¸”æœªæäº¤</strong>çš„äº‹åŠ¡IDåˆ—è¡¨</li><li>min_trx_idï¼šm_idsä¸­æœ€å°å€¼</li><li>max_trx_idï¼šç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„idå€¼ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§äº‹åŠ¡çš„id+1</li><li>creator_trx_idï¼šåˆ›å»ºè¯¥ReadViewçš„äº‹åŠ¡ID</li></ul><p>å½“æ•°æ®è¡Œçš„trx_idå°äºmin_trx_idï¼Œè¯´æ˜è¯¥æ•°æ®è¡Œå¯¹å½“å‰äº‹åŠ¡æ˜¯å¯è§çš„<br />å½“æ•°æ®è¡Œçš„trx_idå¤§äºç­‰äºmax_trx_idï¼Œè¯´æ˜è¯¥æ•°æ®è¡Œå¯¹å½“å‰äº‹åŠ¡ä¸å¯è§<br />å½“æ•°æ®è¡Œçš„trx_idåœ¨min_trx_idå’Œmax_trx_idä¹‹é—´ï¼Œå¦‚æœåœ¨m_idsä¸­ï¼Œè¯´æ˜è¯¥æ•°æ®è¡Œå¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ï¼Œå¦åˆ™å¯è§</p><h3 id="äº‹åŠ¡ç‰¹åˆ«å¤šæœ‰å“ªäº›å¼Šç«¯"><a class="markdownIt-Anchor" href="#äº‹åŠ¡ç‰¹åˆ«å¤šæœ‰å“ªäº›å¼Šç«¯"></a> äº‹åŠ¡ç‰¹åˆ«å¤šæœ‰å“ªäº›å¼Šç«¯ï¼Ÿ</h3><ul><li>å¦‚æœä¸€ä¸ªäº‹åŠ¡ç‰¹åˆ«å¤šï¼Œé”å®šçš„èµ„æºä¹Ÿä¼šå¾ˆå¤šï¼Œå®¹æ˜“é€ æˆæ­»é”å’Œé”è¶…æ—¶</li><li>äº‹åŠ¡å›æ»šè®°å½•ä¼šå ç”¨å¤§é‡ç©ºé—´ï¼Œå›æ»šæ—¶é—´é•¿</li><li>æ‰§è¡Œæ—¶é—´é•¿ï¼Œå®¹æ˜“é€ æˆä¸»ä»å»¶è¿Ÿ</li></ul><h3 id="mysqlé‡Œæœ‰å“ªäº›é”"><a class="markdownIt-Anchor" href="#mysqlé‡Œæœ‰å“ªäº›é”"></a> MYSQLé‡Œæœ‰å“ªäº›é”ï¼Ÿ</h3><ul><li>å…¨å±€é”ï¼Œä¸»è¦ç”¨äºå…¨åº“é€»è¾‘å¤‡ä»½</li><li>è¡¨çº§é”ï¼ŒåŒ…æ‹¬è¡¨é”å’Œå…ƒæ•°æ®é”å’Œæ„å‘é”</li><li>è¡Œçº§é”ï¼ŒåŒ…æ‹¬ï¼š<ul><li>è®°å½•é”ï¼Œé”ä½æŸæ¡è®°å½•</li><li>é—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä¸åŒ…æ‹¬è®°å½•æœ¬èº«</li><li>next-keyé”ï¼Œè®°å½•é”å’Œé—´éš™é”çš„ç»“åˆï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼ŒåŒ…å«è®°å½•æœ¬èº«ï¼Œç”¨äºè§£å†³å¹»è¯»</li></ul></li></ul><h3 id="mysqlä¸»ä»å¤åˆ¶è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#mysqlä¸»ä»å¤åˆ¶è¿‡ç¨‹"></a> MYSQLä¸»ä»å¤åˆ¶è¿‡ç¨‹ï¼Ÿ</h3><ul><li>ä¸»åº“å°†æ•°æ®å†™å…¥binlog</li><li>ä»åº“é€šè¿‡IOçº¿ç¨‹è¿æ¥ä¸»åº“ï¼Œå‘ä¸»åº“è¯·æ±‚binlog</li><li>ä¸»åº“åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å°†binlogå‘é€ç»™ä»åº“</li><li>ä»åº“çš„IOçº¿ç¨‹å°†binlogå†™å…¥relay log</li><li>ä»åº“è¯»å–relay logï¼Œè¿›è¡Œæ•°æ®åŒæ­¥</li></ul><h3 id="ä¸»ä»å»¶è¿Ÿæœ‰å“ªäº›è§£å†³æ–¹æ³•"><a class="markdownIt-Anchor" href="#ä¸»ä»å»¶è¿Ÿæœ‰å“ªäº›è§£å†³æ–¹æ³•"></a> ä¸»ä»å»¶è¿Ÿæœ‰å“ªäº›è§£å†³æ–¹æ³•ï¼Ÿ</h3><ul><li>å¼ºåˆ¶èµ°ä¸»åº“ï¼Œå¯¹äºèµ„æºå¯†é›†å‹æ“ä½œï¼Œç›´æ¥åœ¨ä¸»åº“ä¸Šæ‰§è¡Œ</li></ul><h3 id="åˆ†åº“å’Œåˆ†è¡¨çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#åˆ†åº“å’Œåˆ†è¡¨çš„åŒºåˆ«"></a> åˆ†åº“å’Œåˆ†è¡¨çš„åŒºåˆ«ï¼Ÿ</h3><p>åˆ†åº“å°†æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™åˆ†å¸ƒåˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œåˆ†è¡¨æ˜¯å°†å•ä¸ªè¡¨æ‹†åˆ†æˆå¤šä¸ªè¡¨</p><ul><li>å‚ç›´åˆ†åº“æŒ‡çš„æ˜¯å°†æ•°æ®æŒ‰ç…§ä¸šåŠ¡å’ŒåŠŸèƒ½ç»´åº¦åˆ’åˆ†åˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œä½†ä»ç„¶ä¼šæœ‰å•è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜</li><li>æ°´å¹³åˆ†åº“æŒ‡çš„æ˜¯å°†åŒä¸€å¼ è¡¨æŒ‰ç…§ä¸€å®šè§„åˆ™åˆ†å¸ƒåˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ç›¸åŒï¼Œä½†æ•°æ®ä¸åŒ</li><li>å‚ç›´åˆ†è¡¨é’ˆå¯¹å•è¡¨å­—æ®µè¿‡å¤šçš„é—®é¢˜ï¼Œä¸€èˆ¬å°†å•è¡¨ä¸­æ¯”è¾ƒç‹¬ç«‹çš„å­—æ®µæˆ–è€…ä¸å¸¸ç”¨çš„å­—æ®µæ‹†åˆ†åˆ°ä¸åŒçš„è¡¨ä¸­</li><li>æ°´å¹³åˆ†è¡¨æ˜¯åœ¨åŒä¸€ä¸ªæ•°æ®åº“å†…ï¼ŒæŠŠä¸€å¼ å¤§æ•°æ®é‡çš„è¡¨æŒ‰ä¸€å®šè§„åˆ™ï¼Œåˆ‡åˆ†æˆå¤šä¸ªç»“æ„å®Œå…¨ç›¸åŒè¡¨ã€‚</li></ul><h2 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> Redis</h2><h3 id="redisçš„æ•°æ®ç»“æ„ä»¥åŠåº”ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#redisçš„æ•°æ®ç»“æ„ä»¥åŠåº”ç”¨åœºæ™¯"></a> Redisçš„æ•°æ®ç»“æ„ä»¥åŠåº”ç”¨åœºæ™¯ï¼Ÿ</h3><h4 id="string"><a class="markdownIt-Anchor" href="#string"></a> String</h4><p>åŸºæœ¬çš„key-valueç»“æ„ï¼Œåº”ç”¨åœºæ™¯æœ‰ï¼š</p><ul><li>ç¼“å­˜å¯¹è±¡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š<ul><li>ç›´æ¥ç¼“å­˜jsonå­—ç¬¦ä¸²å¦‚<code>set user:1 &#123;&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:18&#125;</code></li><li>ä½¿ç”¨Msetå’ŒMgetï¼Œå¦‚<code>mset user:1:name zhangsan user:1:age 18</code></li></ul></li><li>å¸¸è§„è®¡æ•°ï¼Œæ¯”å¦‚ç‚¹èµã€é˜…è¯»é‡ã€è½¬å‘ç­‰,å¦‚<code>incr article:1:like</code></li><li>åˆ†å¸ƒå¼é”ï¼Œé€šè¿‡NXå‚æ•°å®ç°keyä¸å­˜åœ¨æ‰æ’å…¥ï¼Œkeyä¸å­˜åœ¨åˆ™æ’å…¥æˆåŠŸï¼ˆåŠ é”æˆåŠŸï¼‰ï¼Œå¦åˆ™æ’å…¥å¤±è´¥ï¼ˆåŠ é”å¤±è´¥ï¼‰</li></ul><h4 id="list"><a class="markdownIt-Anchor" href="#list"></a> List:</h4><p>ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œåº”ç”¨åœºæ™¯ä¸»è¦æœ‰æ¶ˆæ¯é˜Ÿåˆ—</p><p>æ¶ˆæ¯é˜Ÿåˆ—å­˜å–æ¶ˆæ¯å¿…é¡»è¦æ»¡è¶³ä¸‰ä¸ªéœ€æ±‚ï¼Œåˆ†åˆ«æ˜¯<strong>æ¶ˆæ¯ä¿åºã€å¤„ç†é‡å¤æ¶ˆæ¯ã€æ¶ˆæ¯å¯é æ€§</strong></p><ul><li>æ¶ˆæ¯ä¿åºï¼Œé€šè¿‡lpushå’Œrpopå®ç°æ¶ˆæ¯çš„å…ˆå…¥å…ˆå‡ºï¼ŒåŒæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨BRPOPè¿›è¡Œé˜»å¡è¯»å–ï¼Œä¹Ÿå°±æ˜¯é˜Ÿåˆ—ä¸ºç©ºæ—¶è‡ªåŠ¨é˜»å¡</li><li>å¤„ç†é‡å¤æ¶ˆæ¯ï¼Œéœ€è¦ä¸ºæ¯ä¸ªæ¶ˆæ¯ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€IDï¼Œæ¯”å¦‚é€šè¿‡æ—¶é—´æˆ³+è®¡æ•°å™¨çš„æ–¹å¼ç”Ÿäº§å…¨å±€å”¯ä¸€IDï¼Œç„¶åå°†æ¶ˆæ¯å’Œå…¨å±€å”¯ä¸€IDä¸€èµ·å­˜å…¥redis</li><li>ä¸ºäº†ä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Œå¯ä»¥ä½¿ç”¨BRPOPLPUSHï¼Œæ¯æ¬¡å–ä¸€ä¸ªæ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯æ”¾å…¥ä¸€ä¸ªå¤‡ä»½é˜Ÿåˆ—ï¼Œè¿™æ ·å³ä½¿æ¶ˆè´¹è€…æ²¡æœ‰è¯»äº†æ¶ˆæ¯æ²¡æœ‰æˆåŠŸå¤„ç†ï¼Œä¹Ÿå¯ä»¥ä»å¤‡ä»½é˜Ÿåˆ—ä¸­é‡æ–°è¯»å–æ¶ˆæ¯</li></ul><p>Listå®ç°æ¶ˆè´¹é˜Ÿåˆ—æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ</p><ul><li>ä¸å…è®¸å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹åŒä¸€æ¡æ¶ˆæ¯</li><li>ä¸æ”¯æŒæ¶ˆè´¹ç»„</li></ul><h4 id="hash"><a class="markdownIt-Anchor" href="#hash"></a> Hash</h4><p>é”®å€¼å¯¹é›†åˆkey-field-valueï¼Œåº”ç”¨åœºæ™¯æœ‰ï¼š</p><ul><li>ç¼“å­˜å¯¹è±¡ï¼Œé€šè¿‡HMSETè¿›è¡Œç¼“å­˜å¯¹è±¡ï¼Œå¦‚<code>hmset uid:1 name zhangsan age 18</code></li><li>è´­ç‰©è½¦ï¼Œä¸€èˆ¬ä»¥ç”¨æˆ·idä¸ºkeyï¼Œå•†å“idä¸ºfieldï¼Œå•†å“æ•°é‡ä¸ºvalueï¼Œå¦‚<code>hset cart:1 1001 2</code></li></ul><h4 id="set"><a class="markdownIt-Anchor" href="#set"></a> Set</h4><p>æ— åºä¸”å”¯ä¸€çš„é”®å€¼é›†åˆï¼Œåº”ç”¨åœºæ™¯æœ‰ï¼š</p><ul><li>ç‚¹èµï¼Œä»¥keyä¸ºæ–‡ç« idï¼Œvalueä¸ºç”¨æˆ·idï¼Œå¦‚<code>sadd article:1 uid:1</code></li><li>å…±åŒå…³æ³¨ï¼Œä»¥ç”¨æˆ·idä¸ºkeyï¼Œä»¥ç”¨æˆ·å…³æ³¨çš„å…¬ä¼—å·idä¸ºvalueï¼Œé€šè¿‡sinterå¯ä»¥æ±‚ä¸åŒç”¨æˆ·çš„äº¤é›†</li><li>æŠ½å¥–ï¼Œå› ä¸ºsetçš„ä¸å¯é‡å¤æ€§ï¼Œä¸€ä¸ªç”¨æˆ·ä¸ä¼šè¢«é‡å¤æŠ½ä¸­ï¼Œå¯ä»¥å°†æŠ½å¥–æ´»åŠ¨åä½œä¸ºkeyï¼Œæ‰€æœ‰ç”¨æˆ·åä½œä¸ºvalueï¼Œå¦‚æœæ˜¯å…è®¸é‡å¤ä¸­å¥–å°±ä½¿ç”¨srandmemberï¼Œå¦‚æœä¸å…è®¸é‡å¤ä¸­å¥–å°±ä½¿ç”¨spop</li></ul><h4 id="zset"><a class="markdownIt-Anchor" href="#zset"></a> zset</h4><p>æ¯”setå¤šäº†ä¸€ä¸ªæ’åºå±æ€§scoreï¼Œä¸»è¦åŒ…æ‹¬memberå’Œscoreä¸¤ä¸ªå±æ€§ï¼Œmemberæ˜¯å”¯ä¸€çš„ï¼Œåº”ç”¨åœºæ™¯æœ‰ï¼š</p><ul><li>é€‚åˆæ’åºçš„åœºæ™¯ï¼Œå¦‚æ’è¡Œæ¦œï¼Œå°†ç”¨æˆ·idä½œä¸ºmemberï¼Œåˆ†æ•°ä½œä¸ºscoreï¼Œé€šè¿‡zaddæ·»åŠ åˆ†æ•°ï¼Œé€šè¿‡zrevrangeè·å–æ’è¡Œæ¦œ</li></ul><h4 id="bitmap"><a class="markdownIt-Anchor" href="#bitmap"></a> Bitmap</h4><p>ä¸€ä¸²è¿ç»­çš„äºŒè¿›åˆ¶æ•°ç»„ï¼Œé€šè¿‡offsetå®šä½å…ƒç´ ï¼Œåº”ç”¨åœºæ™¯æœ‰ï¼š</p><ul><li>ç”¨æˆ·ç­¾åˆ°ï¼Œé€šè¿‡setbitè®¾ç½®ç”¨æˆ·ç­¾åˆ°ï¼Œé€šè¿‡bitcountç»Ÿè®¡ç­¾åˆ°æ¬¡æ•°</li><li>åˆ¤æ–­ç™»é™†çŠ¶æ€</li></ul><p>å¦‚ä½•ç»Ÿè®¡å½“æœˆé¦–æ¬¡ç­¾åˆ°æ—¶é—´ï¼Ÿ<br />é€šè¿‡bitposè·å–ç¬¬ä¸€ä¸ªä¸º1çš„ä½ç½®ï¼Œå³ä¸ºé¦–æ¬¡ç­¾åˆ°æ—¶é—´<br /><code>bitpos uid:sign:100:202403 1</code></p><p>å¦‚ä½•ç»Ÿè®¡è¿ç»­ä¸ƒå¤©æ‰“å¡çš„ç”¨æˆ·æ€»æ•°ï¼Ÿ<br />ä»¥æ¯å¤©çš„æ—¥æœŸä¸ºkeyï¼Œä»¥ç”¨æˆ·çš„idä¸ºoffsetï¼Œé€šè¿‡bitop ANDå°†ä¸ƒå¤©çš„bitmapè¿›è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œå¦‚æœæŸä¸ªä½ç»“æœä¸º1ï¼Œè¯´æ˜è¿™ä¸ªç”¨æˆ·è¿ç»­ä¸ƒå¤©æ‰“å¡<br />ç„¶åé€šè¿‡bitcountç»Ÿè®¡ä¸ƒå¤©è¿ç»­æ‰“å¡çš„ç”¨æˆ·æ€»æ•°</p><h4 id="hyperloglog"><a class="markdownIt-Anchor" href="#hyperloglog"></a> hyperloglog</h4><p>ç”¨äºæä¾›ä¸ç²¾ç¡®çš„å»é‡è®¡æ•°</p><h4 id="geo"><a class="markdownIt-Anchor" href="#geo"></a> GEO</h4><p>å­˜å‚¨åœ°ç†ä¿¡æ¯</p><h4 id="stream"><a class="markdownIt-Anchor" href="#stream"></a> Stream</h4><p>ç”¨äºå®ç°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–ã€å…¨å±€å”¯ä¸€IDè‡ªåŠ¨ç”Ÿæˆã€æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ã€æ¶ˆè´¹ç»„ç­‰åŠŸèƒ½</p><h3 id="redisçš„stringå®ç°åŸç†"><a class="markdownIt-Anchor" href="#redisçš„stringå®ç°åŸç†"></a> redisçš„stringå®ç°åŸç†</h3><p>Stringçš„åº•å±‚æ•°æ®ç»“æ„ä¸»è¦æ˜¯SDSï¼ˆç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰ï¼Œä»–æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ä¸ä»…å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®</li><li>è·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œlenå±æ€§è®°å½•äº†é•¿åº¦</li><li>APIæ›´å®‰å…¨ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²ä¸ä¼šå‘ç”Ÿç¼“å†²åŒºæº¢å‡º</li></ul><h3 id="ä¸ºä»€ä¹ˆredisç”¨è·³è¡¨è€Œä¸æ˜¯bæ ‘"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆredisç”¨è·³è¡¨è€Œä¸æ˜¯bæ ‘"></a> ä¸ºä»€ä¹ˆRedisç”¨è·³è¡¨è€Œä¸æ˜¯B+æ ‘ï¼Ÿ</h3><ul><li>B+æ ‘ç›®çš„æ˜¯ä¼˜åŒ–ç£ç›˜IOï¼Œé€šè¿‡é™ä½æ ‘çš„é«˜åº¦æ¥å‡å°‘ç£ç›˜å¯»é“æ¬¡æ•°ï¼Œè€ŒRedisæ˜¯åŸºäºå†…å­˜çš„ï¼Œæ›´ç¬¦åˆå†…å­˜è®¿é—®çš„å±€éƒ¨æ€§åŸç†</li><li>è·³è¡¨å®ç°ç®€å•ï¼Œè€ŒB+æ ‘èŠ‚ç‚¹åˆ†è£‚åˆå¹¶é€»è¾‘å¤æ‚</li><li>è·³è¡¨æ’å…¥åˆ é™¤æ•ˆç‡æ›´é«˜ï¼ŒB+æ ‘æ’å…¥åˆ é™¤éœ€è¦ç»´æŠ¤å¹³è¡¡</li><li>è·³è¡¨å†…å­˜å ç”¨æ›´ç´§å‡‘ï¼ŒB+æ ‘ç´¢å¼•é¡µæœªå¡«æ»¡å¯èƒ½å­˜åœ¨å†…å­˜ç¢ç‰‡</li></ul><h3 id="è·³è¡¨çš„å±‚æ•°æ˜¯æ€ä¹ˆè®¾ç½®çš„"><a class="markdownIt-Anchor" href="#è·³è¡¨çš„å±‚æ•°æ˜¯æ€ä¹ˆè®¾ç½®çš„"></a> è·³è¡¨çš„å±‚æ•°æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ</h3><p>è·³è¡¨åˆ›å»ºèŠ‚ç‚¹æ—¶ï¼Œä¼šéšæœºç”Ÿäº§ä¸€ä¸ª0-1ä¹‹é—´çš„éšæœºæ•°ï¼Œå¦‚æœå°äºæŸä¸ª0.25ï¼Œåˆ™å±‚æ•°+1ï¼Œç›´åˆ°ç”Ÿæˆçš„éšæœºæ•°å¤§äºé˜ˆå€¼ï¼Œå±‚æ•°çš„æœ€å¤§å€¼æ˜¯64</p><h3 id="redisçš„å“ˆå¸Œè¡¨æ˜¯æ€ä¹ˆæ‰©å®¹çš„"><a class="markdownIt-Anchor" href="#redisçš„å“ˆå¸Œè¡¨æ˜¯æ€ä¹ˆæ‰©å®¹çš„"></a> Redisçš„å“ˆå¸Œè¡¨æ˜¯æ€ä¹ˆæ‰©å®¹çš„ï¼Ÿ</h3><p>ä¸»è¦åˆ†ä¸‰æ­¥ï¼š</p><ul><li>åˆ›å»ºæ–°å“ˆå¸Œè¡¨ï¼Œä¸€èˆ¬å¤§å°ä¸ºä¹‹å‰çš„2å€</li><li>å°†æ—§å“ˆå¸Œè¡¨çš„æ•°æ®é‡æ–°è¿ç§»åˆ°æ–°å“ˆå¸Œè¡¨</li><li>é‡Šæ”¾æ—§å“ˆå¸Œè¡¨ï¼Œå°†æ–°å“ˆå¸Œè¡¨è®¾ç½®ä¸ºå½“å‰å“ˆå¸Œè¡¨</li></ul><p>æ³¨æ„ï¼Œå¦‚æœæ—§å“ˆå¸Œè¡¨æ•°æ®é‡éå¸¸å¤§ï¼Œè¿ç§»è¿‡ç¨‹ä¸­å¯èƒ½å°±ä¼šå¯¼è‡´Redisé˜»å¡ï¼Œå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥é‡‡ç”¨<strong>æ¸è¿›å¼æ‰©å®¹</strong>ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºæ–°å“ˆå¸Œè¡¨ï¼Œå¤§å°ä¸ºæ—§å“ˆå¸Œè¡¨çš„2å€</li><li>åˆ†å¤šæ¬¡è¿ç§»æ•°æ®ï¼ŒæœŸé—´å¦‚æœæœ‰<strong>åˆ æ”¹æŸ¥</strong>è¯·æ±‚ï¼Œä¼šå…ˆåœ¨æ—§å“ˆå¸Œè¡¨æ“ä½œï¼Œå¹¶å°†å¯¹åº”çš„æ•°æ®è¿ç§»åˆ°æ–°å“ˆå¸Œè¡¨ï¼Œå¦‚æœæ•°æ®å·²ç»è¿ç§»åˆ°æ–°å“ˆå¸Œè¡¨ï¼Œå°±ç›´æ¥åœ¨æ–°å“ˆå¸Œè¡¨æ“ä½œï¼Œ<strong>å¢</strong>æ“ä½œç›´æ¥åœ¨æ–°å“ˆå¸Œè¡¨æ“ä½œ</li><li>è¿ç§»å®Œæˆåï¼Œé‡Šæ”¾æ—§å“ˆå¸Œè¡¨ï¼Œå°†æ–°å“ˆå¸Œè¡¨è®¾ç½®ä¸ºå½“å‰å“ˆå¸Œè¡¨</li></ul><h3 id="redisä¸ºä»€ä¹ˆå¿«"><a class="markdownIt-Anchor" href="#redisä¸ºä»€ä¹ˆå¿«"></a> Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</h3><ul><li>åŸºäºå†…å­˜ï¼Œå†…å­˜è®¿é—®é€Ÿåº¦å¿«</li><li>å•çº¿ç¨‹ï¼Œé¿å…äº†å¤šçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„å¼€é”€</li><li>IOå¤šè·¯å¤ç”¨ï¼Œä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªIOæµ</li></ul><h3 id="rediså“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹"><a class="markdownIt-Anchor" href="#rediså“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹"></a> Rediså“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹ï¼Ÿ</h3><p>Rediså•çº¿ç¨‹ä¸€èˆ¬æŒ‡çš„æ˜¯æ‰§è¡Œå‘½ä»¤çš„çº¿ç¨‹æ˜¯å•çº¿ç¨‹ï¼ŒRedis6.0ä¹‹åå¼•å…¥äº†å¤šçº¿ç¨‹IOï¼Œä¸»è¦ç”¨äºç½‘ç»œIOï¼Œæå‡ç½‘ç»œIOæ€§èƒ½</p><h3 id="ioå¤šè·¯å¤ç”¨æ€ä¹ˆå®ç°"><a class="markdownIt-Anchor" href="#ioå¤šè·¯å¤ç”¨æ€ä¹ˆå®ç°"></a> IOå¤šè·¯å¤ç”¨æ€ä¹ˆå®ç°ï¼Ÿ</h3><ul><li>å¤šä¸ªå®¢æˆ·ç«¯ä¸redisæœåŠ¡ç«¯å»ºç«‹è¿æ¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†æ¯ä¸ªå®¢æˆ·ç«¯çš„socketå¯¹åº”çš„FDæ³¨å†Œåˆ°ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ä¸­</li><li>äº‹ä»¶ç›‘å¬å™¨ä¼šç›‘å¬æ‰€æœ‰çš„FDï¼Œå½“æœ‰FDæœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šé€šçŸ¥äº‹ä»¶å¤„ç†å™¨å¤„ç†è¯¥äº‹ä»¶</li><li>é¿å…äº†æœåŠ¡ç«¯ä¸€ç›´ç­‰å¾…æŸä¸ªå®¢æˆ·ç«¯æ•°æ®çš„é—®é¢˜</li></ul><h3 id="å¦‚ä½•å®ç°redisçš„åŸå­æ€§"><a class="markdownIt-Anchor" href="#å¦‚ä½•å®ç°redisçš„åŸå­æ€§"></a> å¦‚ä½•å®ç°Redisçš„åŸå­æ€§ï¼Ÿ</h3><ul><li>å¦‚æœæ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œç”±äºredisæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥æ˜¯åŸå­æ€§çš„</li><li>å¦‚æœæ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡luaè„šæœ¬</li><li>å¦‚æœæ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡äº‹åŠ¡ï¼Œå¦‚æœäº‹åŠ¡æ­£å¸¸æ‰§è¡Œï¼Œé€šè¿‡multiå’Œexecå‘½ä»¤ï¼Œå¯ä»¥ä¿è¯å¤šä¸ªå‘½ä»¤çš„åŸå­æ€§ï¼Œå¦‚æœæŸä¸€ä¸ªæ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œå°±æ— æ³•ä¿è¯åŸå­æ€§äº†</li></ul><h3 id="redisæŒä¹…åŒ–ä¹‹aof"><a class="markdownIt-Anchor" href="#redisæŒä¹…åŒ–ä¹‹aof"></a> RedisæŒä¹…åŒ–ä¹‹AOFï¼Ÿ</h3><p>æ¯æ‰§è¡Œä¸€æ¡å†™æ“ä½œï¼Œå°±ä¼šå°†å‘½ä»¤ä»¥è¿½åŠ å†™çš„æ–¹å¼å†™å…¥AOFæ–‡ä»¶ï¼Œå½“Redisé‡å¯æ—¶ï¼Œä¼šé€ä¸€æ‰§è¡ŒAOFæ–‡ä»¶ä¸­çš„å‘½ä»¤ï¼Œæ¢å¤æ•°æ®<br />æœ‰ä¸‰ç§å†™å›ç­–ç•¥</p><ul><li>alwaysï¼šæ¯æ¬¡å†™æ“ä½œéƒ½ä¼šåŒæ­¥å†™å…¥AOFæ–‡ä»¶ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§</li><li>everysecï¼šæ¯æ¬¡å†™æ“ä½œæ‰§è¡Œå®Œåï¼Œå…ˆå°†å‘½ä»¤å†™å…¥å†…æ ¸ç¼“å†²åŒºï¼Œç„¶åæ¯éš”ä¸€ç§’å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®å†™å…¥AOFæ–‡ä»¶</li><li>noï¼šæ¯æ¬¡å†™æ“ä½œæ‰§è¡Œå®Œåï¼Œå°†å‘½ä»¤å†™å…¥å†…æ ¸ç¼“å†²åŒºï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†æ•°æ®å†™å…¥AOFæ–‡ä»¶</li></ul><table><thead><tr><th>å†™å›ç­–ç•¥</th><th>å†™å›æ—¶æœº</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Always</td><td>åŒæ­¥å†™å›</td><td>å¯é æ€§é«˜ã€æœ€å¤§ç¨‹åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±</td><td>æ¯ä¸ªå†™å‘½ä»¤éƒ½è¦å†™å›ç¡¬ç›˜ï¼Œæ€§èƒ½å¼€é”€å¤§</td></tr><tr><td>Everysec</td><td>æ¯ç§’å†™å›</td><td>æ€§èƒ½é€‚ä¸­</td><td>å®•æœºæ—¶ä¼šä¸¢å¤±1ç§’å†…çš„æ•°æ®</td></tr><tr><td>No</td><td>ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶å†™å›</td><td>æ€§èƒ½å¥½</td><td>å®•æœºæ—¶ä¸¢å¤±çš„æ•°æ®å¯èƒ½ä¼šå¾ˆå¤š</td></tr></tbody></table><h3 id="aofé‡å†™æœºåˆ¶"><a class="markdownIt-Anchor" href="#aofé‡å†™æœºåˆ¶"></a> AOFé‡å†™æœºåˆ¶ï¼Ÿ</h3><p>AOFæ–‡ä»¶ä¼šåŒ…å«å¾ˆå¤šå†—ä½™æˆ–æ— æ•ˆçš„å‘½ä»¤ï¼Œå¯¼è‡´æ–‡ä»¶ä½“ç§¯è¶Šæ¥è¶Šå¤§ã€‚AOFé‡å†™æœºåˆ¶å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜</p><ul><li>AOFé‡å†™ä¸æ˜¯åŸºäºæ—§çš„AOFæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ˜¯ç›´æ¥è¯»å–å½“å‰Redisæ•°æ®åº“åœ¨å†…å­˜ä¸­çš„çŠ¶æ€ï¼Œå¹¶ä¸ºæ¯ä¸ªé”®å€¼å¯¹ç”Ÿæˆæœ€å°‘çš„å‘½ä»¤é›†åˆæ¥æ¢å¤è¿™ä¸ªçŠ¶æ€</li><li>ä¸€èˆ¬ä¸»è¿›ç¨‹ä¼šforkä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡ŒAOFé‡å†™</li><li>AOFé‡å†™æœŸé—´ï¼Œå¦‚æœé‡åˆ°æœ‰æ–°çš„å†™æ“ä½œï¼Œä¸»è¿›ç¨‹ä¼šæŒ‰ç…§ä¹‹å‰çš„ç­–ç•¥å†™å…¥åˆ°AOFä¸­ï¼ŒåŒæ—¶å°†è¿™äº›å‘½ä»¤è®°å½•åœ¨AOFé‡å†™ç¼“å†²åŒºä¸­</li><li>å­è¿›ç¨‹å®ŒæˆAOFé‡å†™åï¼Œä¸»è¿›ç¨‹ä¼šå°†AOFé‡å†™ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å‘½ä»¤è¿½åŠ åˆ°å­è¿›ç¨‹ç”Ÿæˆçš„AOFæ–‡ä»¶çš„æœ«å°¾</li></ul><h3 id="redisæŒä¹…åŒ–ä¹‹rdb"><a class="markdownIt-Anchor" href="#redisæŒä¹…åŒ–ä¹‹rdb"></a> RedisæŒä¹…åŒ–ä¹‹RDB?</h3><p>å°†æŸä¸€æ—¶åˆ»çš„å†…å­˜æ•°æ®ä»¥äºŒè¿›åˆ¶å½¢å¼å†™å…¥ç£ç›˜<br />Redisæä¾›äº†saveå’Œbgsaveä¸¤ç§æ–¹å¼ç”ŸæˆRDBæ–‡ä»¶ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯æ˜¯å¦åœ¨ä¸»è¿›ç¨‹ä¸­æ‰§è¡Œ</p><ul><li>saveä¼šåŒæ­¥çš„æ‰§è¡Œä¿å­˜æ“ä½œï¼Œä¼šé˜»å¡ä¸»è¿›ç¨‹</li><li>bgsaveä¼šåœ¨åå°å­è¿›ç¨‹æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»è¿›ç¨‹(å¼‚æ­¥)</li><li>RDBå¿«ç…§æ˜¯å…¨é‡å¿«ç…§ï¼Œé¢‘ç¹æ‰§è¡Œä¼šå½±å“æ€§èƒ½</li></ul><h3 id="bgsaveæ—¶æ•°æ®èƒ½è¢«ä¿®æ”¹å—"><a class="markdownIt-Anchor" href="#bgsaveæ—¶æ•°æ®èƒ½è¢«ä¿®æ”¹å—"></a> bgsaveæ—¶ï¼Œæ•°æ®èƒ½è¢«ä¿®æ”¹å—ï¼Ÿ</h3><p>ç­”ï¼šå¯ä»¥ã€‚bgsaveæ—¶ï¼ŒRedisä¼šforkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„é¡µè¡¨ï¼Œä½†æ˜¯æŒ‡å‘åŒä¸€ä¸ªç‰©ç†å†…å­˜ã€‚<br />ä½†æ˜¯å½“çˆ¶è¿›ç¨‹æ•°æ®è¦è¢«ä¿®æ”¹æ—¶ï¼Œä¼šå‘ç”Ÿå†™æ—¶å¤åˆ¶ï¼Œæ•°æ®æ‰€åœ¨çš„ç‰©ç†å†…å­˜ä¼šè¢«å¤åˆ¶ä¸€ä»½ï¼Œç„¶åä¸»è¿›ç¨‹åœ¨æ•°æ®çš„å‰¯æœ¬ä¸Šä¿®æ”¹ï¼Œå­è¿›ç¨‹ä»ç„¶æŠŠæ—§çš„æ•°æ®å†™å…¥RDBã€‚<br />æ‰€ä»¥å¦‚æœä¿®æ”¹çš„æ•°æ®è¿‡å¤šï¼Œå°±ä¼šå¯¼è‡´bgsaveè¿‡ç¨‹ä¸­å†…å­˜å ç”¨è¿‡å¤šã€‚</p><h3 id="aofå’Œrdbçš„ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#aofå’Œrdbçš„ä¼˜ç¼ºç‚¹"></a> AOFå’ŒRDBçš„ä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p>AOF</p><ul><li>ä¼˜ç‚¹ï¼šå¯é æ€§é«˜ï¼Œæ¯æ¬¡å†™æ“ä½œéƒ½ä¼šå†™å…¥AOFæ–‡ä»¶ï¼Œå³ä½¿æœåŠ¡å™¨å®•æœºï¼Œä¹Ÿåªä¼šä¸¢å¤±æœ€åä¸€æ¬¡å†™æ“ä½œï¼Œè¿˜å¯ä»¥é€šè¿‡é€‰æ‹©åˆé€‚çš„å†™å›ç­–ç•¥æ¥å¹³è¡¡æ€§èƒ½å’Œå¯é æ€§</li><li>ç¼ºç‚¹ï¼šAOFæ–‡ä»¶ä½“ç§¯æ›´å¤§ï¼Œæ¢å¤é€Ÿåº¦æ…¢ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯alwaysç­–ç•¥ï¼Œæ€§èƒ½å¼€é”€å¤§</li></ul><p>RDBï¼š</p><ul><li>ä¼˜ç‚¹ï¼šRDBæ–‡ä»¶ä½“ç§¯å°ï¼Œæ¢å¤é€Ÿåº¦å¿«</li><li>ç¼ºç‚¹ï¼šRDBæ˜¯å…¨é‡å¿«ç…§ï¼Œå¦‚æœå®•æœºæ—¶ï¼Œä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§ä¹‹åçš„æ•°æ®ï¼Œå¦‚æœå‘ç”Ÿå†™æ—¶å¤åˆ¶ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤š</li></ul><h3 id="è®²è®²redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥"><a class="markdownIt-Anchor" href="#è®²è®²redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥"></a> è®²è®²Redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</h3><p>ä¸è¿›è¡Œæ•°æ®æ·˜æ±°çš„ç­–ç•¥ï¼š</p><ul><li>noevictionï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼Œä¸æ·˜æ±°ä»»ä½•æ•°æ®ã€‚æœ‰æ–°çš„è¾“å…¥å†™å…¥ä¼šæŠ¥é”™é€šçŸ¥ç¦æ­¢å†™å…¥<br />è¿›è¡Œæ•°æ®æ·˜æ±°çš„ç­–ç•¥ï¼š</li><li>é’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®ï¼š<ul><li>volatile-randomï¼šéšæœºæ·˜æ±°è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®</li><li>volatile-ttlï¼šä¼˜å…ˆæ·˜æ±°å¿«è¿‡æœŸçš„æ•°æ®</li><li>volatile-lruï¼šä¼˜å…ˆæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®</li><li>volatile-lfuï¼šä¼˜å…ˆæ·˜æ±°æœ€å°‘ä½¿ç”¨çš„æ•°æ®</li></ul></li><li>é’ˆå¯¹æ‰€æœ‰èŒƒå›´æ•°æ®ï¼š<ul><li>allkeys-randomï¼šéšæœºæ·˜æ±°ä»»æ„æ•°æ®</li><li>allkeys-lruï¼šä¼˜å…ˆæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®</li><li>allkeys-lfuï¼šä¼˜å…ˆæ·˜æ±°æœ€å°‘ä½¿ç”¨çš„æ•°æ®</li></ul></li></ul><h3 id="lruå’Œlfuçš„ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#lruå’Œlfuçš„ç¼ºç‚¹"></a> LRUå’ŒLFUçš„ç¼ºç‚¹ï¼Ÿ</h3><ul><li>LRUä¸»è¦æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œå¦‚æœæŸäº›æ•°æ®æ¯”è¾ƒé‡è¦ï¼Œè€Œä¸”åœ¨ä¸Šä¸€æ®µæ—¶é—´å†…ä½¿ç”¨å¾ˆé¢‘ç¹ï¼Œå¦‚æœæœ‰æ–°æ•°æ®åˆ°æ¥ï¼Œä¹Ÿå®¹æ˜“è¢«æ·˜æ±°</li><li>LFUä¸»è¦æ·˜æ±°ä½¿ç”¨é¢‘ç‡æœ€ä½çš„æ•°æ®ï¼Œå®ƒéœ€è¦ç»´æŠ¤é€»è¾‘è®¿é—®æ¬¡æ•°ï¼Œä¼šå¢åŠ ä¸€äº›è®¡ç®—å¼€é”€ï¼ŒåŒæ—¶å¯¹äºæ–°æ¥çš„æ•°æ®ï¼Œç”±äºè®¿é—®é¢‘ç‡è¾ƒä½ï¼Œå¯èƒ½å¾ˆå¿«å°±è¢«æ·˜æ±°</li></ul><h3 id="redisçš„è¿‡æœŸåˆ é™¤ç­–ç•¥"><a class="markdownIt-Anchor" href="#redisçš„è¿‡æœŸåˆ é™¤ç­–ç•¥"></a> Redisçš„è¿‡æœŸåˆ é™¤ç­–ç•¥ï¼Ÿ</h3><p>è¿‡æœŸåˆ é™¤é‡‡ç”¨æƒ°æ€§åˆ é™¤å’Œå®šæœŸåˆ é™¤ä¸¤ç§æ–¹å¼</p><ul><li>æƒ°æ€§åˆ é™¤ï¼šåªæœ‰åœ¨ä½¿ç”¨keyæ—¶ï¼Œæ‰ä¼šæ£€æŸ¥keyæ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸæ‰åˆ é™¤</li><li>å®šæœŸåˆ é™¤ï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆæ¯ç§’10æ¬¡ï¼Œå¯ä»¥åœ¨redis.confé…ç½®ï¼‰ï¼Œä¼šéšæœºæŠ½å–ä¸€äº›keyï¼ˆä¸€èˆ¬ä¸º20ä¸ªï¼‰æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤</li></ul><h3 id="ä¸ºä»€ä¹ˆä¸ç«‹åˆ»åˆ é™¤è¿‡æœŸkey"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆä¸ç«‹åˆ»åˆ é™¤è¿‡æœŸkey"></a> ä¸ºä»€ä¹ˆä¸ç«‹åˆ»åˆ é™¤è¿‡æœŸkeyï¼Ÿ</h3><p>ç­”ï¼šå½“è¿‡æœŸçš„keyå¾ˆå¤šæ—¶ï¼Œç«‹åˆ»åˆ é™¤ä¼šå ç”¨ä¸€å®šCPUï¼Œå½±å“æ€§èƒ½</p><h3 id="rediså…¨é‡åŒæ­¥"><a class="markdownIt-Anchor" href="#rediså…¨é‡åŒæ­¥"></a> Rediså…¨é‡åŒæ­¥ï¼Ÿ</h3><p>å…¨é‡åŒæ­¥ä¸€èˆ¬å‘ç”Ÿåœ¨ä¸‹é¢çš„æƒ…å†µï¼š</p><ul><li>ç¬¬ä¸€æ¬¡åŒæ­¥</li><li>ä»æœåŠ¡å™¨æ•°æ®ä¸¢å¤±</li><li>ä¸»ä»æ•°æ®å·®å¼‚å¤ªå¤§</li></ul><p>å…¨é‡åŒæ­¥çš„è¿‡ç¨‹ï¼š</p><ul><li>ä»æœåŠ¡å™¨å‘é€åŒæ­¥è¯·æ±‚</li><li>ä¸»æœåŠ¡å™¨ç”ŸæˆRDBæ–‡ä»¶ï¼Œå‘é€ç»™ä»æœåŠ¡å™¨</li><li>ä»æœåŠ¡å™¨æ¥æ”¶RDBæ–‡ä»¶ï¼Œå¹¶è½½å…¥æ•°æ®</li><li>ä¸»æœåŠ¡å™¨ç”Ÿæˆå’Œä¼ è¾“RDBæœŸé—´ï¼Œå†™æ“ä½œä¼šè®°å½•åœ¨replication backlogä¸­</li><li>ä»æœåŠ¡å™¨è½½å…¥å®ŒRDBåï¼Œä¸»æœåŠ¡å™¨å°†replication backlogå‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œä¿è¯æ•°æ®ä¸€è‡´</li></ul><h3 id="rediså¢é‡åŒæ­¥"><a class="markdownIt-Anchor" href="#rediså¢é‡åŒæ­¥"></a> Rediså¢é‡åŒæ­¥ï¼Ÿ</h3><p>å¢é‡åŒæ­¥ä¸»è¦é€šè¿‡replication backlogå’Œä¸¤ä¸ªoffsetå®ç°ï¼š<br />replication backlogå®é™…ä¸Šæ˜¯ä¸€ä¸ªç¯å½¢æ•°ç»„ï¼Œå…¶ä¸­master offsetè®°å½•äº†ä¸»æœåŠ¡å™¨å†™çš„ä½ç½®ï¼Œslave offsetè®°å½•äº†ä»æœåŠ¡å™¨è¯»çš„ä½ç½®<br />å¦‚æœä¸»æœåŠ¡å™¨å†™çš„å¤ªå¿«ï¼Œä»æœåŠ¡å™¨è¯»çš„å¤ªæ…¢ï¼ˆç½‘ç»œåŸå› ï¼‰ï¼Œé‚£ä¹ˆslave offsetå°±ä¼šè¢«è¦†ç›–ï¼Œè¿™æ—¶å€™å°±ä¼šå‘ç”Ÿå…¨é‡åŒæ­¥</p><h3 id="ä»‹ç»ä¸€ä¸‹rediså“¨å…µæœºåˆ¶"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹rediså“¨å…µæœºåˆ¶"></a> ä»‹ç»ä¸€ä¸‹Rediså“¨å…µæœºåˆ¶ï¼Ÿ</h3><p>å“¨å…µæœºåˆ¶ä¸»è¦ç”¨äºç›‘æ§Redisé›†ç¾¤çš„çŠ¶æ€ï¼Œä¸»è¦ä½œç”¨æ˜¯<code>ç›‘æ§ã€æ•…éšœè½¬ç§»ã€é€šçŸ¥</code></p><ul><li>ç›‘æ§ï¼šå“¨å…µä¼šå®šæ—¶æ£€æŸ¥ä¸»ä»é›†ç¾¤çš„çŠ¶æ€</li><li>æ•…éšœè½¬ç§»ï¼šå½“ä¸»æœåŠ¡å™¨å®•æœºæ—¶ï¼Œå“¨å…µä¼šé€‰ä¸¾ä¸€ä¸ªä»æœåŠ¡å™¨ä½œä¸ºæ–°çš„ä¸»æœåŠ¡å™¨</li><li>é€šçŸ¥ï¼šå½“ä¸»ä»é›†ç¾¤çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå“¨å…µä¼šé€šçŸ¥å®¢æˆ·ç«¯</li></ul><h3 id="å“¨å…µæœºåˆ¶å¦‚ä½•ç›‘æ§"><a class="markdownIt-Anchor" href="#å“¨å…µæœºåˆ¶å¦‚ä½•ç›‘æ§"></a> å“¨å…µæœºåˆ¶å¦‚ä½•ç›‘æ§ï¼Ÿ</h3><p>é¦–å…ˆå“¨å…µä¼šåŸºäºå¿ƒè·³æ£€æµ‹æ¥åˆ¤æ–­èŠ‚ç‚¹çŠ¶æ€</p><ul><li>ä¸»è§‚ä¸‹çº¿ï¼šå¦‚æœæŸä¸ªå“¨å…µå‘ç°æŸä¸ªèŠ‚ç‚¹é•¿æ—¶é—´æœªå“åº”ï¼Œå°±ä¼šè®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿</li><li>å®¢è§‚ä¸‹çº¿ï¼šå½“è¶…è¿‡ä¸€å®šæ•°é‡çš„å“¨å…µè®¤ä¸ºæŸä¸ªèŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿ï¼Œå°±ä¼šè®¤ä¸ºè¯¥èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿</li></ul><h3 id="å“¨å…µå¦‚ä½•é€‰æ‹©æ–°çš„ä¸»æœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#å“¨å…µå¦‚ä½•é€‰æ‹©æ–°çš„ä¸»æœåŠ¡å™¨"></a> å“¨å…µå¦‚ä½•é€‰æ‹©æ–°çš„ä¸»æœåŠ¡å™¨ï¼Ÿ</h3><ul><li>é¦–å…ˆå“¨å…µéœ€è¦é€‰å‡ºä¸€ä¸ªleaderï¼Œå½“ä¸€ä¸ªå“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿äº†ï¼Œå®ƒä¼šè¯·æ±‚å…¶ä»–å“¨å…µé€‰è‡ªå·±ä¸ºleader,è¢«è¯·æ±‚çš„å“¨å…µå¦‚æœæ²¡æœ‰æŠ•è¿‡ç¥¨ï¼Œåˆ™å½“å‰å“¨å…µç¥¨æ•°+1ï¼Œä¸€èˆ¬ç¥¨æ•°è¶…è¿‡åŠæ•°ï¼Œåˆ™é€‰ä¸¾æˆåŠŸ</li><li>leaderä¼šæ ¹æ®ç­–ç•¥é€‰å‡ºæ–°çš„ä¸»èŠ‚ç‚¹<ul><li>é¦–å…ˆæ’é™¤æ•…éšœçš„èŠ‚ç‚¹</li><li>é€‰æ‹©ä¼˜å…ˆçº§æœ€å¤§çš„èŠ‚ç‚¹</li><li>å¦‚æœä¼˜å…ˆçº§ç›¸åŒï¼Œé€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§çš„èŠ‚ç‚¹</li><li>å¦‚æœä»¥ä¸Šéƒ½ç›¸åŒï¼Œé€‰æ‹©runidæœ€å°çš„èŠ‚ç‚¹</li></ul></li></ul><h3 id="ä»‹ç»ä¸€ä¸‹åˆ†ç‰‡é›†ç¾¤"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹åˆ†ç‰‡é›†ç¾¤"></a> ä»‹ç»ä¸€ä¸‹åˆ†ç‰‡é›†ç¾¤ï¼Ÿ</h3><p>redisåˆ†ç‰‡é›†ç¾¤ä¸»è¦ç”¨äºè§£å†³å•æœºå†…å­˜æœ‰é™çš„é—®é¢˜ï¼Œé€šè¿‡åˆ†ç‰‡å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸­ï¼Œæé«˜äº†å†…å­˜çš„ä½¿ç”¨ç‡ï¼Œæé«˜äº†è¯»å†™æ€§èƒ½</p><p>åˆ†ç‰‡é›†ç¾¤ä¸€å…±æœ‰16384ä¸ªæ§½ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«è‹¥å¹²ä¸ªæ§½<br />å½“æ·»åŠ æ•°æ®æ—¶ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>é€šè¿‡CRC16ç®—æ³•è®¡ç®—keyçš„å“ˆå¸Œå€¼</li><li>å°†å“ˆå¸Œå€¼å¯¹16384å–æ¨¡ï¼Œå¾—åˆ°æ§½å·</li></ul><p>å¦‚ä½•å°†åŒä¸€ç±»æ•°æ®å›ºå®šçš„ä¿å­˜åœ¨åŒä¸€ä¸ªRedisèŠ‚ç‚¹ï¼Ÿ<br />ç­”ï¼šä½¿ç”¨<code>&#123;&#125;</code>å°†keyä¸­çš„éƒ¨åˆ†å­—ç¬¦ä¸²åŒ…è£¹ï¼Œå¦‚<code>&#123;user:101&#125;:name</code>ï¼Œè¿™æ ·åªæ ¹æ®<code>user:101</code>æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œä¿è¯<code>user:101</code>çš„æ•°æ®éƒ½ä¿å­˜åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹</p><h3 id="redisåˆ†å¸ƒå¼é”çš„åŸç†"><a class="markdownIt-Anchor" href="#redisåˆ†å¸ƒå¼é”çš„åŸç†"></a> Redisåˆ†å¸ƒå¼é”çš„åŸç†ï¼Ÿ</h3><h4 id="åŠ é”"><a class="markdownIt-Anchor" href="#åŠ é”"></a> åŠ é”</h4><p>Redisåˆ†å¸ƒå¼é”ä¸»è¦ç”¨äºæ§åˆ¶æŸä¸ªèµ„æºåœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªåº”ç”¨ä½¿ç”¨ã€‚<br />NXå‚æ•°å®ç°<strong>keyä¸å­˜åœ¨æ‰æ’å…¥</strong>ï¼Œå¯ä»¥é€šè¿‡å®ƒå®ç°åˆ†å¸ƒå¼é”</p><ul><li>keyä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥æˆåŠŸï¼Œè¡¨ç¤ºåŠ é”æˆåŠŸ</li><li>keyå­˜åœ¨ï¼Œåˆ™æ’å…¥å¤±è´¥ï¼Œè¡¨ç¤ºåŠ é”å¤±è´¥</li></ul><p>ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ¡ä»¶ï¼š</p><ul><li>åŠ é”éœ€è¦ä»¥åŸå­æ“ä½œå®Œæˆï¼Œé€šè¿‡set å‘½ä»¤å¸¦ä¸ŠNXå‚æ•°å®ç°</li><li>é”éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥é€šè¿‡PXå‚æ•°è®¾ç½®</li><li>é”éœ€è¦åŒºåˆ†ä¸åŒçš„å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå”¯ä¸€IDæ¥æ ‡è¯†å®¢æˆ·ç«¯</li></ul><p>æ‰€ä»¥ä¸€ä¸ªåŠ é”çš„å‘½ä»¤å¦‚ä¸‹ï¼š<br /><code>set lock_key 101 NX PX 30000</code></p><h4 id="è§£é”"><a class="markdownIt-Anchor" href="#è§£é”"></a> è§£é”</h4><p>è§£é”éœ€è¦ä¸¤æ­¥æ“ä½œï¼š</p><ul><li>åˆ¤æ–­æ‰§è¡Œè§£é”æ“ä½œçš„å®¢æˆ·ç«¯å°±æ˜¯åŠ é”çš„å®¢æˆ·ç«¯</li><li>åˆ é™¤lock_key</li></ul><p>ç”±äºæ˜¯ä¸¤ä¸ªæ“ä½œï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œä¸€èˆ¬ç”¨luaè„šæœ¬å®ç°</p><h3 id="rediså®ç°çš„åˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆé—®é¢˜"><a class="markdownIt-Anchor" href="#rediså®ç°çš„åˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆé—®é¢˜"></a> rediså®ç°çš„åˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><ul><li>é”çš„è¿‡æœŸæ—¶é—´ä¸å¥½è®¾ç½®ï¼Œè¿‡çŸ­å¯èƒ½ä»»åŠ¡æ²¡æ‰§è¡Œå®Œå°±é‡Šæ”¾é”ï¼Œè¿‡é•¿å¯èƒ½å½±å“æ€§èƒ½</li><li>æŒæœ‰é”çš„å®¢æˆ·ç«¯å®•æœºï¼Œé”æ— æ³•é‡Šæ”¾</li><li>æ—¶é’Ÿæ¼‚ç§»ï¼Œä¸åŒæœåŠ¡å™¨çš„æ—¶é’Ÿå¯èƒ½ä¸ä¸€è‡´ï¼Œå¯¼è‡´é”çš„è¿‡æœŸæ—¶é—´ä¸å‡†ç¡®</li><li>redisçš„åˆ†å¸ƒå¼é”ä¸å¯é‡å…¥ï¼Œredissonå¯ä»¥é‡å…¥</li><li>ä¸»ä»æ¨¡å¼ä¸‹ï¼Œä¸»èŠ‚ç‚¹è·å¾—é”ä¹‹åå®•æœºï¼Œæ­¤æ—¶æ–°çš„ä¸»èŠ‚ç‚¹ä»ç„¶å¯ä»¥è·å–é”ï¼Œå¯¼è‡´ä¸¤ä¸ªçº¿ç¨‹è·å–åŒä¸€æŠŠé”</li></ul><h3 id="redisåˆ†å¸ƒå¼é”çš„äº’æ–¥æ€§é—®é¢˜æ€ä¹ˆè§£å†³"><a class="markdownIt-Anchor" href="#redisåˆ†å¸ƒå¼é”çš„äº’æ–¥æ€§é—®é¢˜æ€ä¹ˆè§£å†³"></a> redisåˆ†å¸ƒå¼é”çš„äº’æ–¥æ€§é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>ä¹‹å‰è¯´åˆ†å¸ƒå¼é”ä¸»ä»æ¨¡å¼ä¸‹ï¼Œä¸»èŠ‚ç‚¹è·å¾—é”ä¹‹åå®•æœºï¼Œæ­¤æ—¶æ–°çš„ä¸»èŠ‚ç‚¹ä»ç„¶å¯ä»¥è·å–é”ï¼Œå¯¼è‡´ä¸¤ä¸ªçº¿ç¨‹è·å–åŒä¸€æŠŠé”ï¼Œè¿™æ ·å¯èƒ½å°±å¯¼è‡´<strong>æ•°æ®ä¸ä¸€è‡´</strong></p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨çº¢é”</p><ul><li>çº¢é”çš„æ€æƒ³æ˜¯ï¼Œåœ¨å¤šä¸ªredisèŠ‚ç‚¹ä¸ŠåŠ é”ï¼Œåªæœ‰å¤šæ•°èŠ‚ç‚¹åŠ é”æˆåŠŸï¼ˆä½†ä¸æŒæœ‰é”ï¼‰ï¼Œæ‰ç®—åŠ é”æˆåŠŸ</li></ul><p>çº¢é”ç”±äºå®ç°è´Ÿè´£ã€æ€§èƒ½å¼€é”€å¤§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œå¦‚æœè¦ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨zookeeperç­‰åˆ†å¸ƒå¼é”å®ç°</p><h3 id="åŸºäºrediså®ç°åˆ†å¸ƒå¼é”å¦‚ä½•è‡ªåŠ¨ç»­æœŸ"><a class="markdownIt-Anchor" href="#åŸºäºrediså®ç°åˆ†å¸ƒå¼é”å¦‚ä½•è‡ªåŠ¨ç»­æœŸ"></a> åŸºäºrediså®ç°åˆ†å¸ƒå¼é”å¦‚ä½•è‡ªåŠ¨ç»­æœŸï¼Ÿ</h3><p>å¯ä»¥é€šè¿‡redissonå®ç°ï¼Œredissonæä¾›äº†ä¸€ä¸ªwatch dogæœºåˆ¶æ¥ç›‘æ§å’Œç»­æœŸé”ï¼Œwatch dogçš„åŸç†å¦‚ä¸‹ï¼š</p><ul><li>åŠ é”æˆåŠŸåï¼Œæ¯éš”10sï¼Œçœ‹é—¨ç‹—å°±ä¼šé€šè¿‡luaè„šæœ¬è¿›è¡Œç»­æœŸï¼Œæ¯æ¬¡ç»­æœŸå‰å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºæŒé”çº¿ç¨‹ï¼Œæ˜¯åˆ™å°†è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º30s</li><li>ä½¿ç”¨redissonæ—¶ï¼Œåªéœ€è¦è°ƒç”¨lock.lock()æ–¹æ³•ï¼Œwatch dogä¼šè‡ªåŠ¨ç»­æœŸï¼Œå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œå°±ä¸ä¼šç”¨åˆ°watch dogè‡ªåŠ¨ç»­æœŸ</li></ul><h3 id="ä»€ä¹ˆæ˜¯å¤§keyé—®é¢˜"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯å¤§keyé—®é¢˜"></a> ä»€ä¹ˆæ˜¯å¤§Keyé—®é¢˜ï¼Ÿ</h3><p>å¤§Keyé—®é¢˜æŒ‡çš„æ˜¯Redisä¸­æŸä¸ªkeyçš„valueè¿‡å¤§ï¼Œå¯¼è‡´Rediså¤„ç†è¿™ä¸ªkeyæ—¶ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ï¼Œå½±å“Redisçš„æ€§èƒ½</p><ul><li>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåœºæ™¯ä¸­ï¼Œè¶…è¿‡10kbå¯èƒ½å°±æ„æˆå¤§key</li><li>ä½å¹¶å‘ã€é«˜å®¹é‡åœºæ™¯ä¸­ï¼Œè¶…è¿‡100kbå¯èƒ½æ‰æ„æˆå¤§key</li></ul><p>ä¸€èˆ¬ä¼šé€ æˆä»¥ä¸‹å½±å“ï¼š</p><ul><li>å†…å­˜å ç”¨è¿‡å¤§</li><li>è¯»å†™æ€§èƒ½ä¸‹é™</li><li>å¯èƒ½é˜»å¡å…¶ä»–æ“ä½œ</li><li>é€ æˆç½‘ç»œæ‹¥å¡</li><li>é€ æˆä¸»ä»å»¶è¿Ÿ</li><li>é€ æˆRedisé›†ç¾¤ä¸å‡è¡¡</li></ul><h3 id="å¦‚ä½•è§£å†³å¤§keyé—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£å†³å¤§keyé—®é¢˜"></a> å¦‚ä½•è§£å†³å¤§Keyé—®é¢˜ï¼Ÿ</h3><ul><li>å¯¹å¤§keyè¿›è¡Œæ‹†åˆ†</li><li>å¯¹å¤§keyè¿›è¡Œåˆ é™¤ï¼Œè¦ç”¨å¼‚æ­¥åˆ é™¤</li><li>ç›‘æ§rediså†…å­˜çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¤§key</li><li>å¯¹è¿‡æœŸæ•°æ®å®šæœŸè¿›è¡Œæ¸…ç†</li></ul><h3 id="å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜"></a> å¦‚ä½•è§£å†³çƒ­keyé—®é¢˜ï¼Ÿ</h3><p>çƒ­keyæŒ‡æŸä¸ªkeyçš„è®¿é—®é¢‘ç‡è¿‡é«˜</p><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>å°†çƒ­keyå¤åˆ¶å¹¶è¿ç§»åˆ°å¤šä¸ªæ•°æ®åˆ†ç‰‡</li><li>ä½¿ç”¨è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œå°†çƒ­keyè¯»è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªä»èŠ‚ç‚¹</li></ul><h3 id="ç¼“å­˜é›ªå´©å¦‚ä½•è§£å†³"><a class="markdownIt-Anchor" href="#ç¼“å­˜é›ªå´©å¦‚ä½•è§£å†³"></a> ç¼“å­˜é›ªå´©å¦‚ä½•è§£å†³ï¼Ÿ</h3><p>ç¼“å­˜é›ªå´©æŒ‡çš„æ˜¯å¤§é‡keyåœ¨åŒä¸€æ—¶é—´å¤±æ•ˆï¼Œå¯¼è‡´è¯·æ±‚å…¨éƒ¨è½åˆ°æ•°æ®åº“ä¸Šï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›è¿‡å¤§ï¼Œç”šè‡³å®•æœº</p><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>éšæœºè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…åŒä¸€æ—¶é—´å¤§é‡keyå¤±æ•ˆ</li><li>æ·»åŠ é™çº§æˆ–è€…é™æµç­–ç•¥ï¼Œä¿æŠ¤æ•°æ®åº“é¿å…å®•æœº</li><li>ä½¿ç”¨å¤šçº§ç¼“å­˜ï¼Œå¦‚æœ¬åœ°ç¼“å­˜ç­‰ï¼Œåˆ†æ‹…redisçš„å‹åŠ›</li></ul><h3 id="å¦‚ä½•è®¾è®¡ç§’æ€åœºæ™¯å¤„ç†é«˜å¹¶å‘å’Œè¶…å–é—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•è®¾è®¡ç§’æ€åœºæ™¯å¤„ç†é«˜å¹¶å‘å’Œè¶…å–é—®é¢˜"></a> å¦‚ä½•è®¾è®¡ç§’æ€åœºæ™¯å¤„ç†é«˜å¹¶å‘å’Œè¶…å–é—®é¢˜ï¼Ÿ</h3><ul><li>åœ¨æ•°æ®åº“å±‚é¢ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡for updateå¢åŠ æ’ä»–é”ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•åˆ æ”¹æ•°æ®ï¼Œæ›´æ–°åº“å­˜æ—¶æ·»åŠ åˆ¤æ–­ï¼Œä¿è¯åº“å­˜ä¸ºæ­£æ•°</li><li>åˆ©ç”¨Redisåˆ†å¸ƒå¼é”ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½è·å¾—é”</li><li>åˆ©ç”¨åˆ†å¸ƒå¼é”+åˆ†æ®µç¼“å­˜ï¼Œå°†æ•°æ®åˆ†æ®µï¼Œæ¯ä¸ªæ®µæ‹¥æœ‰ç‹¬ç«‹çš„é”ï¼Œé¿å…é”çš„ç²’åº¦è¿‡å¤§</li><li>åˆ©ç”¨incrã€decrçš„åŸå­æ€§+å¼‚æ­¥é˜Ÿåˆ—ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<ul><li>åˆå§‹åŒ–æ—¶ï¼Œå°†åº“å­˜æ•°é‡å†™å…¥Redis</li><li>ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œé€šè¿‡decré¢„å‡åº“å­˜ï¼Œå¦‚æœåº“å­˜å°äº0ï¼Œè¯´æ˜è¶…å–ï¼Œè¿”å›å¤±è´¥</li><li>å°†è¯·æ±‚æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—</li><li>ä»é˜Ÿåˆ—å–å‡ºè¯·æ±‚ï¼Œæ›´æ–°æ•°æ®åº“åº“å­˜</li><li>ç”¨æˆ·ç«¯é€šè¿‡è½®è¯¢åˆ¤æ–­æ˜¯å¦ç§’æ€æˆåŠŸ</li></ul></li></ul><h3 id="å¦‚ä½•å¤„ç†é‡å¤ä¸‹å•é—®é¢˜"><a class="markdownIt-Anchor" href="#å¦‚ä½•å¤„ç†é‡å¤ä¸‹å•é—®é¢˜"></a> å¦‚ä½•å¤„ç†é‡å¤ä¸‹å•é—®é¢˜ï¼Ÿ</h3><p>é‡å¤ä¸‹å•é—®é¢˜ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¹‚ç­‰æ€§é—®é¢˜ï¼Œé«˜å¹¶å‘ä¸‹å•ï¼Œé«˜å¹¶å‘æŠ¢çº¢åŒ…ï¼Œé«˜å¹¶å‘æ”¯ä»˜ç­‰éƒ½å±äºè¿™ç±»é—®é¢˜</p><h4 id="åŸºç¡€æ€§è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#åŸºç¡€æ€§è§£å†³æ–¹æ¡ˆ"></a> åŸºç¡€æ€§è§£å†³æ–¹æ¡ˆ</h4><ul><li>å…¨å±€å”¯ä¸€IDï¼Œå¦‚UUIDï¼Œé›ªèŠ±ç®—æ³•ï¼Œä¸šåŠ¡å­—æ®µ+æ—¶é—´æˆ³ç­‰</li><li>å”¯ä¸€ç´¢å¼•ï¼ˆå»é‡è¡¨ï¼‰ï¼Œå¦‚æœé‡å¤åˆ›å»ºï¼Œæ•°æ®åº“ä¼šæŠ›å‡ºå¼‚å¸¸</li><li>ç‰ˆæœ¬å·</li></ul><h4 id="ç»¼åˆæ€§è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#ç»¼åˆæ€§è§£å†³æ–¹æ¡ˆ"></a> ç»¼åˆæ€§è§£å†³æ–¹æ¡ˆ</h4><p><strong>ä¸€é”äºŒåˆ¤ä¸‰æ›´æ–°</strong></p><ul><li>ä¸€é”ï¼šé€šè¿‡åˆ†å¸ƒå¼é”ï¼Œæˆ–è€…æ˜¯åˆ†å¸ƒå¼é”+åˆ†æ®µé”</li><li>äºŒåˆ¤ï¼šè¿›è¡Œå¹‚ç­‰æ€§åˆ¤æ–­å¦‚å”¯ä¸€IDã€ç‰ˆæœ¬å·ç­‰</li><li>ä¸‰æ›´æ–°ï¼šæ›´æ–°æ•°æ®</li></ul><h3 id="å¦‚ä½•ä¿è¯åŒå†™ä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#å¦‚ä½•ä¿è¯åŒå†™ä¸€è‡´æ€§"></a> å¦‚ä½•ä¿è¯åŒå†™ä¸€è‡´æ€§ï¼Ÿ</h3><p>åŒå†™ä¸€è‡´æ€§æŒ‡çš„æ˜¯æ›´æ–°æ•°æ®æ—¶ï¼Œæ•°æ®åº“å’Œredisçš„æ•°æ®è¦ä¿æŒä¸€è‡´</p><ul><li>ä¸€èˆ¬å¯¹äºè¯»æ“ä½œï¼Œå…ˆä»redisä¸­è¯»ï¼Œå¦‚æœå‘½ä¸­ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå†™å…¥ç¼“å­˜ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´</li><li>å¯¹äºå†™æ“ä½œï¼Œé‡‡ç”¨å»¶è¿ŸåŒåˆ çš„ç­–ç•¥ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜</li></ul><p>ä¸ºä»€ä¹ˆè¦åˆ é™¤ä¸¤æ¬¡ï¼Ÿ</p><ul><li>å› ä¸ºæ— è®ºæ˜¯å…ˆåˆ é™¤ç¼“å­˜å†æ›´æ–°æ•°æ®åº“ï¼Œè¿˜æ˜¯å…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜ï¼Œéƒ½æœ‰å¯èƒ½å‡ºç°è„æ•°æ®çš„æƒ…å†µ</li></ul><p>ä¸ºä»€ä¹ˆè¦å»¶æ—¶åŒåˆ ï¼Ÿ</p><ul><li>ä¸€èˆ¬æ•°æ®åº“æ˜¯ä¸»ä»æ¨¡å¼ï¼Œè¯»å†™åˆ†ç¦»ï¼Œéœ€è¦å»¶è¿Ÿä¸€ä¼šç­‰æ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œä½†å»¶æ—¶çš„æ—¶é—´ä¸å¥½ç¡®å®šï¼Œæ‰€ä»¥ä»ç„¶ä¸èƒ½åšåˆ°ç™¾åˆ†ç™¾ä¸€è‡´æ€§ã€‚</li></ul><p>æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Ÿ</p><ul><li>å¯¹äºå¼ºä¸€è‡´æ€§è¦æ±‚çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨redisä¸­çš„è¯»å†™é”ï¼Œä½†æ˜¯æ€§èƒ½ä¼šä¸‹é™</li><li>å¯¹äºæœ€ç»ˆä¸€è‡´æ€§è¦æ±‚çš„åœºæ™¯<ul><li>å¯ä»¥ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†åˆ é™¤ç¼“å­˜çš„æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­</li><li>è¿˜å¯ä»¥ä½¿ç”¨canalè®¢é˜…binlogçš„æ–¹å¼ï¼ŒæŠŠcanalä½œä¸ºä¸€ä¸ªä»èŠ‚ç‚¹ï¼Œç›‘å¬binlogçš„å˜æ›´ï¼Œç„¶ååˆ é™¤ç¼“å­˜</li></ul></li></ul><h2 id="ä»‹ç»ä¸€ä¸‹é›ªèŠ±ç®—æ³•"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹é›ªèŠ±ç®—æ³•"></a> ä»‹ç»ä¸€ä¸‹é›ªèŠ±ç®—æ³•ï¼Ÿ</h2><p>é›ªèŠ±ç®—æ³•æ˜¯ 64 ä½ çš„äºŒè¿›åˆ¶ï¼Œä¸€å…±åŒ…å«äº†å››éƒ¨åˆ†ï¼š</p><ul><li>1ä½æ˜¯ç¬¦å·ä½ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ï¼Œå§‹ç»ˆæ˜¯0ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå› ä¸ºè¦æ˜¯å”¯ä¸€è®¡ç®—æœºäºŒè¿›åˆ¶è¡¥ç ä¸­å°±æ˜¯è´Ÿæ•°ï¼Œ0æ‰æ˜¯æ­£æ•°ã€‚</li><li>41ä½æ˜¯æ—¶é—´æˆ³ï¼Œå…·ä½“åˆ°æ¯«ç§’ï¼Œ41ä½çš„äºŒè¿›åˆ¶å¯ä»¥ä½¿ç”¨69å¹´ï¼Œå› ä¸ºæ—¶é—´ç†è®ºä¸Šæ°¸æ’é€’å¢ï¼Œæ‰€ä»¥æ ¹æ®è¿™ä¸ªæ’åºæ˜¯å¯ä»¥çš„ã€‚</li><li>10ä½æ˜¯æœºå™¨æ ‡è¯†ï¼Œå¯ä»¥å…¨éƒ¨ç”¨ä½œæœºå™¨IDï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ ‡è¯†æœºæˆ¿ID + æœºå™¨IDï¼Œ10ä½æœ€å¤šå¯ä»¥è¡¨ç¤º1024å°æœºå™¨ã€‚</li><li>12ä½æ˜¯è®¡æ•°åºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯åŒä¸€å°æœºå™¨ä¸ŠåŒä¸€æ—¶é—´ï¼Œç†è®ºä¸Šè¿˜å¯ä»¥åŒæ—¶ç”Ÿæˆä¸åŒçš„IDï¼Œ12ä½çš„åºåˆ—å·èƒ½å¤ŸåŒºåˆ†å‡º4096ä¸ªIDã€‚</li></ul><h2 id="åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#åŠ¨æ€ä»£ç†"></a> åŠ¨æ€ä»£ç†</h2><h3 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"></a> ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</h3><p>åŠ¨æ€ä»£ç†æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡çš„æœºåˆ¶ï¼Œä¸»è¦ç”¨äºåœ¨ä¸ä¿®æ”¹åŸå§‹ç±»çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è°ƒç”¨è¿›è¡Œæ‹¦æˆªå’Œå¢å¼º<br />ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><ul><li>JDKåŠ¨æ€ä»£ç†ï¼šè¿™ç§ç±»å‹è¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£ã€‚é€šè¿‡Proxyç±»å’ŒInvocationHandleræ¥å£å®ç°ï¼Œå½“é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè½¬å‘åˆ°ç”±InvocationHandleræ¥å£çš„invoke()æ–¹æ³•è°ƒç”¨ã€‚</li><li>CGLIBåŠ¨æ€ä»£ç†ï¼šCGLIBå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç›®æ ‡ç±»çš„å­ç±»ï¼Œä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ï¼Œè€Œæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°ä»£ç†ã€‚</li><li>ASMä»£ç†ï¼šä½¿ç”¨å­—èŠ‚ç ç¼–ç¨‹ï¼Œæ“ä½œå­—èŠ‚ç æŒ‡ä»¤</li><li>Byte-Buddyï¼šä¹Ÿæ˜¯å­—èŠ‚ç æ“ä½œçš„ç±»åº“ï¼Œä½†é€šè¿‡APIå°±èƒ½æ“ä½œå­—èŠ‚ç ï¼Œå®ç°æ›´åŠ ç®€å•</li><li>Javassistï¼šä¹Ÿæ˜¯å­—èŠ‚ç æ“ä½œçš„ç±»åº“ï¼Œç›¸å¯¹äºASMï¼ŒJavassistæ›´åŠ ç®€å•æ˜“ç”¨</li></ul><h3 id="jdkåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤"><a class="markdownIt-Anchor" href="#jdkåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤"></a> JDKåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤ï¼Ÿ</h3><ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œä»¥åŠå®ç°ç±»xxxserviceImpl</li><li>å®šä¹‰ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¹¶å®ç°InvocationHandleræ¥å£ï¼Œé‡å†™invokeæ–¹æ³•</li><li>é€šè¿‡Proxy.newProxyInstanceæ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†invokeæ–¹æ³•</li></ul><h3 id="cglibåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤"><a class="markdownIt-Anchor" href="#cglibåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤"></a> CGLIBåŠ¨æ€ä»£ç†çš„å®ç°æ­¥éª¤ï¼Ÿ</h3><p>Spring ä¸­çš„ AOP æ¨¡å—ä¸­ï¼šå¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œåˆ™é»˜è®¤é‡‡ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™é‡‡ç”¨ CGLIB åŠ¨æ€ä»£ç†ã€‚</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»ï¼Œä¸éœ€è¦å®ç°æ¥å£</li><li>è‡ªå®šä¹‰ä¸€ä¸ªç±»å®ç°MethodInterceptoræ¥å£ï¼Œé‡å†™interceptæ–¹æ³•</li><li>é€šè¿‡Enhancerç±»çš„createæ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡</li></ul><h2 id="è‡ªå®šä¹‰æ³¨è§£çš„ä¸‰ä¸ªæ³¨è§£çš„å«ä¹‰"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ³¨è§£çš„ä¸‰ä¸ªæ³¨è§£çš„å«ä¹‰"></a> è‡ªå®šä¹‰æ³¨è§£çš„ä¸‰ä¸ªæ³¨è§£çš„å«ä¹‰ï¼Ÿ</h2><ul><li>@Retentionï¼šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†ä¸ºSOURCEã€CLASSã€RUNTIME<ul><li>SOURCEï¼šç¼–è¯‘å™¨ä¼šä¸¢å¼ƒè¯¥æ³¨è§£</li><li>CLASSï¼šç¼–è¯‘å™¨ä¼šä¿ç•™è¯¥æ³¨è§£ï¼Œä½† JVM ä¼šä¸¢å¼ƒè¯¥æ³¨è§£</li><li>RUNTIMEï¼šç¼–è¯‘å™¨å’Œ JVM éƒ½ä¼šä¿ç•™è¯¥æ³¨è§£ï¼Œå¯ä»¥é€šè¿‡åå°„è·å–</li></ul></li><li>@Targetï¼šæ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼Œåˆ†ä¸ºTYPEã€FIELDã€METHODã€PARAMETERç­‰<ul><li>TYPEï¼šå¯ä»¥ä½œç”¨äºç±»ã€æ¥å£ã€æšä¸¾ç­‰</li><li>FIELDï¼šå¯ä»¥ä½œç”¨äºå±æ€§</li><li>METHODï¼šå¯ä»¥ä½œç”¨äºæ–¹æ³•</li><li>PARAMETERï¼šå¯ä»¥ä½œç”¨äºå‚æ•°</li></ul></li><li>@Documentedï¼šè¡¨ç¤ºè¯¥æ³¨è§£ä¼šè¢«åŒ…å«åœ¨ Javadoc ä¸­</li></ul><h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2><h3 id="ä»€ä¹ˆæ˜¯aop"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯aop"></a> ä»€ä¹ˆæ˜¯AOPï¼Ÿ</h3><p>AOPæ˜¯å°†ä¸€äº›æ¨ªåˆ‡å…³æ³¨ç‚¹å¦‚æ—¥å¿—ã€äº‹åŠ¡ã€æƒé™æ§åˆ¶ç­‰ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†ç­‰æŠ€æœ¯å®ç°ä»£ç çš„å¤ç”¨å’Œè§£è€¦ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><h3 id="aopçš„ä¸€äº›æœ¯è¯­æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#aopçš„ä¸€äº›æœ¯è¯­æœ‰å“ªäº›"></a> AOPçš„ä¸€äº›æœ¯è¯­æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šå¤šä¸ªç±»æˆ–è€…å¯¹è±¡çš„å…¬å…±è¡Œä¸ºï¼Œå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€æƒé™æ§åˆ¶ç­‰</li><li>åˆ‡é¢ï¼šå¯¹æ¨ªåˆ‡å…³æ³¨ç‚¹è¿›è¡Œå°è£…çš„ç±»ï¼Œä¸€ä¸ªåˆ‡é¢æ˜¯ä¸€ä¸ªç±»</li><li>è¿æ¥ç‚¹ï¼šç¨‹åºæ‰§è¡Œçš„æŸä¸ªç‰¹å®šçš„æ—¶åˆ»ï¼Œå¦‚æ–¹æ³•çš„è°ƒç”¨ã€å¼‚å¸¸çš„å¤„ç†ç­‰</li><li>é€šçŸ¥ï¼šåœ¨æŸä¸ªè¿æ¥ç‚¹è¦æ‰§è¡Œçš„æ“ä½œ</li><li>åˆ‡ç‚¹ï¼šä¸€ä¸ªåˆ‡ç‚¹æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç”¨æ¥åŒ¹é…è¿æ¥ç‚¹</li><li>ç»‡å…¥ï¼šå°†åˆ‡é¢å’Œç›®æ ‡å¯¹è±¡è¿æ¥èµ·æ¥çš„è¿‡ç¨‹</li></ul><h3 id="aopçš„é€šçŸ¥éƒ½æœ‰å“ªäº›ç±»å‹"><a class="markdownIt-Anchor" href="#aopçš„é€šçŸ¥éƒ½æœ‰å“ªäº›ç±»å‹"></a> AOPçš„é€šçŸ¥éƒ½æœ‰å“ªäº›ç±»å‹ï¼Ÿ</h3><ul><li>å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å‰è§¦å‘</li><li>åç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨åè§¦å‘</li><li>è¿”å›é€šçŸ¥ï¼šç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ­£å¸¸è¿”å›åè§¦å‘</li><li>å¼‚å¸¸é€šçŸ¥ï¼šç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè§¦å‘</li><li>ç¯ç»•é€šçŸ¥ï¼šæ‰‹åŠ¨æ§åˆ¶è§¦å‘çš„æ—¶æœº</li></ul><h3 id="aopçš„åº”ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#aopçš„åº”ç”¨åœºæ™¯"></a> AOPçš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>æ—¥å¿—è®°å½•</li><li>æ€§èƒ½ç»Ÿè®¡</li><li>äº‹åŠ¡ç®¡ç†ï¼šå¦‚<code>@Transactional</code>æ³¨è§£å°±æ˜¯åŸºäºAOPå®ç°çš„</li><li>æƒé™æ§åˆ¶ï¼šåˆ©ç”¨ AOP åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å…·å¤‡æ‰€éœ€è¦çš„æƒé™</li><li>æ¥å£é™æµ</li></ul><h3 id="aopå®ç°æ—¥å¿—è®°å½•æ€ä¹ˆåš"><a class="markdownIt-Anchor" href="#aopå®ç°æ—¥å¿—è®°å½•æ€ä¹ˆåš"></a> AOPå®ç°æ—¥å¿—è®°å½•æ€ä¹ˆåšï¼Ÿ</h3><ul><li>å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ³¨è§£Log</li><li>å®šä¹‰ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œé€šè¿‡åˆ‡å…¥ç‚¹å’Œé€šçŸ¥æŒ‡å®šä»€ä¹ˆæ—¶å€™è¿›è¡Œæ—¥å¿—è®°å½•</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Component</span><br><span class="hljs-variable">@Aspect</span><br>public class LogAspect &#123;<br>  <span class="hljs-comment">// åˆ‡å…¥ç‚¹ï¼Œæ‰€æœ‰è¢« Log æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•</span><br>  <span class="hljs-variable">@Pointcut</span>(<span class="hljs-string">&quot;@annotation(cn.javaguide.annotation.Log)&quot;</span>)<br>  public void <span class="hljs-built_in">webLog</span>() &#123;<br>  &#125;<br><br>   <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç¯ç»•é€šçŸ¥</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-variable">@Around</span>(<span class="hljs-string">&quot;webLog()&quot;</span>)<br>  public Object <span class="hljs-built_in">doAround</span>(ProceedingJoinPoint joinPoint) throws Throwable &#123;<br>    <span class="hljs-comment">// çœç•¥å…·ä½“çš„å¤„ç†é€»è¾‘</span><br>  &#125;<br><br>  <span class="hljs-comment">// çœç•¥å…¶ä»–ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åœ¨éœ€è¦è®°å½•æ—¥å¿—çš„æ–¹æ³•ä¸Šæ·»åŠ @Logæ³¨è§£å³å¯</li></ul><h2 id="è®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼"></a> è®¾è®¡æ¨¡å¼</h2><h3 id="åˆ›å»ºå‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#åˆ›å»ºå‹æ¨¡å¼"></a> åˆ›å»ºå‹æ¨¡å¼</h3><ul><li>å·¥å‚æ¨¡å¼ï¼šåœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚</li><li>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³å¯¹è±¡ï¼Œæ— éœ€æŒ‡å®šå…·ä½“ç±»</li><li>å»ºé€ è€…æ¨¡å¼ï¼šå°†å¤šä¸ªç®€å•å¯¹è±¡ä¸€æ­¥æ­¥ç»„è£…æˆä¸ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡</li><li>åŸå‹æ¨¡å¼ï¼šé€šè¿‡cloneç°æœ‰å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡</li><li>å•ä¾‹æ¨¡å¼ï¼šä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹</li></ul><h3 id="ç»“æ„å‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#ç»“æ„å‹æ¨¡å¼"></a> ç»“æ„å‹æ¨¡å¼</h3><ul><li>é€‚é…å™¨æ¨¡å¼ï¼šå°†åŸæœ¬ä¸å…¼å®¹çš„æ¥å£é€šè¿‡é€‚é…ä¿®æ”¹åšåˆ°ç»Ÿä¸€</li><li>ä»£ç†æ¨¡å¼ï¼šä¸ºæŸäº›å¯¹è±¡çš„è®¿é—®æä¾›ä»£ç†ï¼Œé€šè¿‡ä»£ç†å»æ§åˆ¶åŸå§‹å¯¹è±¡çš„è®¿é—®</li><li>è£…é¥°å™¨æ¨¡å¼ï¼šåœ¨ä¸æ”¹å˜åŸæœ‰ç±»çš„æƒ…å†µä¸‹ï¼Œç»™ç±»æ–°å¢åŠŸèƒ½</li><li>æ¡¥æ¥æ¨¡å¼ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œæ¯”å¦‚Aç±»ä¸­å«æœ‰Bç±»çš„æ¥å£ï¼Œé€šè¿‡æ„é€ å‡½æ•°ä¼ é€’Bç±»çš„å®ç°</li><li>ç»„åˆæ¨¡å¼ï¼šå°†ç›¸ä¼¼å¯¹è±¡ç»„åˆæˆå¯è¢«è°ƒç”¨çš„ç»“æ„æ ‘å¯¹è±¡</li><li>å¤–è§‚æ¨¡å¼ï¼šä¸ºå¤æ‚çš„ç±»æˆ–æ¡†æ¶æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£</li><li>äº«å…ƒæ¨¡å¼ï¼šå…±äº«é€šç”¨å¯¹è±¡ï¼Œå‡å°‘å†…å­˜çš„ä½¿ç”¨ï¼Œæå‡ç³»ç»Ÿçš„è®¿é—®æ•ˆç‡</li></ul><h3 id="è¡Œä¸ºå‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#è¡Œä¸ºå‹æ¨¡å¼"></a> è¡Œä¸ºå‹æ¨¡å¼</h3><ul><li>è´£ä»»é“¾æ¨¡å¼ï¼šè§£å†³ä¸€ç»„æœåŠ¡ä¸­çš„å…ˆåæ‰§è¡Œå¤„ç†å…³ç³»ï¼Œå°†è¯·æ±‚æ²¿ç€å¤„ç†é“¾ä¼ é€’</li><li>å‘½ä»¤æ¨¡å¼ï¼šä»¥æ•°æ®é©±åŠ¨çš„æ–¹å¼å°†å‘½ä»¤å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼ä¼ é€’ç»™è°ƒç”¨è€…ã€‚è°ƒç”¨è€…å†æä¾›ç›¸åº”çš„å®ç°ä¸ºå‘½ä»¤æ‰§è¡Œæä¾›æ“ä½œæ–¹æ³•ã€‚</li><li>è¿­ä»£å™¨æ¨¡å¼ï¼šä»¥ç›¸åŒçš„æ–¹å¼å»éå†ä¸åŒçš„æ•°æ®ç»“æ„å…ƒç´ </li><li>ä¸­ä»‹è€…æ¨¡å¼ï¼šè§£å†³å¤æ‚åŠŸèƒ½åº”ç”¨ä¹‹é—´çš„é‡å¤è°ƒç”¨ï¼Œåœ¨è¿™ä¸­é—´æ·»åŠ ä¸€å±‚ä¸­ä»‹è€…åŒ…è£…æœåŠ¡ï¼Œå¯¹å¤–æä¾›ç®€å•ã€é€šç”¨ã€æ˜“æ‰©å±•çš„æœåŠ¡èƒ½åŠ›ã€‚</li><li>å¤‡å¿˜å½•æ¨¡å¼ï¼šä»¥ä¸ç ´ååŸå¯¹è±¡ä¸ºåŸºç¡€å¢åŠ å¤‡å¿˜å½•æ“ä½œç±»ï¼Œè®°å½•åŸå¯¹è±¡çš„è¡Œä¸º</li><li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰ä¸€ç§è®¢é˜…æœºåˆ¶ï¼Œå½“å¯¹è±¡äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</li><li>çŠ¶æ€æ¨¡å¼ï¼šè®©å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹æœ‰ä¸åŒçš„è¡Œä¸º</li><li>ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œ å¹¶å°†æ¯ç§ç®—æ³•åˆ†åˆ«æ”¾å…¥ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»¥ä½¿ç®—æ³•çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’æ›¿æ¢ã€‚</li><li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šé€šè¿‡åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰æŠ½è±¡æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œå¹¶å°†æŠ½è±¡æ–¹æ³•è®¾å®šä¸ºåªæœ‰å­ç±»å®ç°ï¼Œä½†ä¸è®¾è®¡ç‹¬ç«‹è®¿é—®çš„æ–¹æ³•</li><li>è®¿é—®è€…æ¨¡å¼ï¼šåœ¨ç¨³å®šçš„æ•°æ®ç»“æ„ä¸‹ï¼Œå¢åŠ æ˜“å˜çš„ä¸šåŠ¡è®¿é—®é€»è¾‘ï¼Œå³åŒä¸€ä¸ªäº‹ç‰©ä¸åŒè§†è§’ä¸‹çš„è®¿é—®ä¿¡æ¯ä¸åŒ</li></ul><h3 id="å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼"></a> å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingleTon</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> SingleTon instance=<span class="hljs-literal">null</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingleTon</span>()</span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingleTon <span class="hljs-title">getInstance</span>()</span>&#123;<br>        <span class="hljs-keyword">if</span>(instance==<span class="hljs-literal">null</span>)&#123;<br>            synchronized(SingleTon.<span class="hljs-keyword">class</span>)&#123;<br>                <span class="hljs-keyword">if</span>(instance==<span class="hljs-literal">null</span>)&#123;<br>                    instance=<span class="hljs-keyword">new</span> SingleTon();<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é€šè¿‡volatileå…³é”®å­—ï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</li><li>synchronizedåŠ åœ¨æ–¹æ³•å†…éƒ¨ï¼Œæå‡æ‰§è¡Œæ•ˆç‡</li><li>ç¬¬ä¸€æ¬¡åˆ¤æ–­énullç›´æ¥è¿”å›ï¼Œé¿å…æ¯æ¬¡éƒ½åŠ é”</li><li>ç¬¬äºŒæ¬¡åˆ¤æ–­æ˜¯ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œé¿å…é‡å¤åˆ›å»ºå¯¹è±¡</li></ul><h2 id="æ¶ˆæ¯é˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—"></a> æ¶ˆæ¯é˜Ÿåˆ—</h2><h3 id="æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆé€‰å‹"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆé€‰å‹"></a> æ¶ˆæ¯é˜Ÿåˆ—æ€ä¹ˆé€‰å‹ï¼Ÿ</h3><p>å‡ ç§å¸¸è§çš„MQå¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>ActiveMQ</th><th>RabbitMQ</th><th>RocketMQ</th><th>Kafka</th></tr></thead><tbody><tr><td>å•æœºååé‡</td><td>ä¸‡çº§</td><td>ä¸‡çº§</td><td>10 ä¸‡çº§</td><td>10 ä¸‡çº§</td></tr><tr><td>æ—¶æ•ˆæ€§</td><td>æ¯«ç§’çº§</td><td>å¾®ç§’çº§</td><td>æ¯«ç§’çº§</td><td>æ¯«ç§’çº§</td></tr><tr><td>å¯ç”¨æ€§</td><td>é«˜ï¼ˆä¸»ä»ï¼‰</td><td>é«˜ï¼ˆä¸»ä»ï¼‰</td><td>éå¸¸é«˜ï¼ˆåˆ†å¸ƒå¼ï¼‰</td><td>éå¸¸é«˜ï¼ˆåˆ†å¸ƒå¼ï¼‰</td></tr><tr><td>æ¶ˆæ¯é‡å¤</td><td>è‡³å°‘ä¸€æ¬¡</td><td>è‡³å°‘ä¸€æ¬¡</td><td>è‡³å°‘ä¸€æ¬¡ æœ€å¤šä¸€æ¬¡</td><td>è‡³å°‘ä¸€æ¬¡æœ€å¤šä¸€æ¬¡</td></tr><tr><td>æ¶ˆæ¯é¡ºåºæ€§</td><td>æœ‰åº</td><td>æœ‰åº</td><td>æœ‰åº</td><td>åˆ†åŒºæœ‰åº</td></tr><tr><td>æ”¯æŒä¸»é¢˜æ•°</td><td>åƒçº§</td><td>ç™¾ä¸‡çº§</td><td>åƒçº§</td><td>ç™¾çº§ï¼Œå¤šäº†æ€§èƒ½ä¸¥é‡ä¸‹æ»‘</td></tr><tr><td>æ¶ˆæ¯å›æº¯</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒï¼ˆæŒ‰æ—¶é—´å›æº¯ï¼‰</td><td>æ”¯æŒï¼ˆæŒ‰offsetå›æº¯ï¼‰</td></tr><tr><td>ç®¡ç†ç•Œé¢</td><td>æ™®é€š</td><td>æ™®é€š</td><td>å®Œå–„</td><td>æ™®é€š</td></tr></tbody></table><ul><li>å¯¹äºå¤§å‹ç§’æ€åœºæ™¯ï¼Œä¸»è¦çœ‹ååé‡ï¼Œé€‰kafkaå’ŒRocketMQæ›´å¥½</li><li>å¦‚æœåšä¸­å°ï¼Œå¯¹å¤–æä¾›èƒ½åŠ›ï¼Œæœ‰å¾ˆå¤šä¸»é¢˜æ¥å…¥ï¼Œé€‰RocketMQå’ŒRabbitMQ</li><li>è‡³äºæ—¶æ•ˆæ€§ï¼Œå¾®å¦™å’Œæ¯«ç§’çš„å·®åˆ«å¹¶ä¸å¤§ï¼ŒåŠ ä¸Šç½‘ç»œçš„æ³¢åŠ¨ï¼Œåœ¨å®é™…ä¸šåŠ¡ä¸­åè€Œä¸ä¼šä½œä¸ºé‡è¦çš„è€ƒé‡å› ç´ </li></ul><h3 id="æ¶ˆæ¯é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"></a> æ¶ˆæ¯é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>è§£è€¦ï¼šåœ¨å¤šä¸ªç³»ç»Ÿä¹‹é—´è¿›è¡Œè§£è€¦ï¼Œå°†åŸæœ¬é€šè¿‡ç½‘ç»œè°ƒç”¨çš„æ–¹å¼æ”¹ä¸ºé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥è°ƒç”¨</li><li>å¼‚æ­¥ï¼šä¸€ä¸ªæ“ä½œå¦‚æœåˆ†ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œå¯ä»¥æŠŠæŸäº›ä¸éœ€è¦åŒæ­¥çš„æ­¥éª¤æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæ¯”å¦‚ä¸‹å•åå‘é€çŸ­ä¿¡é€šçŸ¥ï¼Œä¿®æ”¹ç”¨æˆ·ç§¯åˆ†ç­‰</li><li>å‰Šå³°ï¼šæ¯”å¦‚ç§’æ€åœºæ™¯ï¼Œç¬é—´å¤§é‡è¯·æ±‚åˆ°æ¥ï¼Œå¯ä»¥å…ˆæ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åç³»ç»Ÿæ ¹æ®è‡ªå·±çš„å¤„ç†èƒ½åŠ›å¤„ç†ï¼ŒåŒæ—¶è·Ÿè¿›ä¸šåŠ¡é€»è¾‘ï¼Œç»™ç”¨æˆ·è¿”å›ç‰¹å®šç•Œé¢æˆ–ç¨åé€šçŸ¥ç»“æœ</li></ul><h3 id="æ¶ˆæ¯ä¸¢å¤±æ€ä¹ˆè§£å†³"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯ä¸¢å¤±æ€ä¹ˆè§£å†³"></a> æ¶ˆæ¯ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>ä¸»è¦ä»ç”Ÿäº§è€…ã€MQã€æ¶ˆè´¹è€…ä¸‰ä¸ªæ–¹é¢è§£å†³</p><ul><li>ç”Ÿäº§è€…ï¼šé€šè¿‡ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶ï¼Œæ¶ˆæ¯åˆ°è¾¾MQåè¿”å›ç»™ç”Ÿäº§è€…ackï¼Œè¿”å›å¼‚å¸¸å¯ä»¥è€ƒè™‘é‡å‘</li><li>MQï¼šRabbitMQé€šè¿‡æŒä¹…åŒ–æ¶ˆæ¯æˆ–è€…æ‡’é˜Ÿåˆ—ï¼Œä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Œkafkaå¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¿å­˜æ¶ˆæ¯çš„å‰¯æœ¬</li><li>æ¶ˆè´¹è€…ï¼šé€šè¿‡æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶å’Œå¤±è´¥é‡è¯•æœºåˆ¶ï¼Œä¿è¯æ¶ˆè´¹è€…çš„å¯é æ€§ï¼Œå¦‚æœè¾¾åˆ°é‡è¯•æ¬¡æ•°ï¼Œæœ‰3ç§å¤„ç†æ–¹å¼ï¼š1. ä¸¢å¼ƒæ¶ˆæ¯ï¼Œreject 2. è¿”å›nack,æ¶ˆæ¯é‡æ–°å…¥é˜Ÿåˆ— 3. å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šé˜Ÿåˆ—</li></ul><h3 id="æ¶ˆæ¯é˜Ÿåˆ—çš„å¯é æ€§-é¡ºåºæ€§æ€ä¹ˆä¿è¯"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—çš„å¯é æ€§-é¡ºåºæ€§æ€ä¹ˆä¿è¯"></a> æ¶ˆæ¯é˜Ÿåˆ—çš„å¯é æ€§ã€é¡ºåºæ€§æ€ä¹ˆä¿è¯ï¼Ÿ</h3><p>å¯é æ€§ï¼š</p><ul><li>æ¶ˆæ¯æŒä¹…åŒ–</li><li>æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶</li><li>æ¶ˆè´¹è€…å¤±è´¥é‡è¯•æœºåˆ¶</li></ul><p>é¡ºåºæ€§ï¼š</p><ul><li>é¦–å…ˆæ˜ç¡®éœ€è¦å“ªäº›ä¸šåŠ¡éœ€è¦ä¿è¯é¡ºåºæ€§ï¼Œæ¯”å¦‚è½¬è´¦æ“ä½œçš„é¡ºåºæ€§</li><li>æœ‰çš„æ¶ˆæ¯é˜Ÿåˆ—æœ¬èº«å°±æ”¯æŒé¡ºåºæ€§ï¼Œå¦‚kafkaæŒ‰ç…§æ¶ˆæ¯çš„keyå°†æ¶ˆæ¯åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå†…çš„æ¶ˆæ¯æŒ‰ç…§å†™å…¥é¡ºåºè¢«æ¶ˆè´¹</li><li>æ­¤å¤–ï¼Œå¦‚æœå¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæˆ–è€…å¤šçº¿ç¨‹æ¶ˆè´¹åŒä¸€ä¸ªåˆ†åŒºï¼Œé‚£ä¹ˆå°±æ— æ³•ä¿è¯é¡ºåºæ€§äº†ï¼Œå¯ä»¥ä½¿ç”¨å•çº¿ç¨‹æˆ–è€…ä½¿ç”¨çº¿ç¨‹æ± å¯¹æ¶ˆæ¯è¿›è¡Œä¸²è¡ŒåŒ–å¤„ç†</li></ul><h2 id="spring"><a class="markdownIt-Anchor" href="#spring"></a> Spring</h2><h3 id="springçš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—"><a class="markdownIt-Anchor" href="#springçš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—"></a> Springçš„å•ä¾‹Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>ä¸æ˜¯<br />Springæ¡†æ¶ä¸­æœ‰ä¸€ä¸ª@Scopeæ³¨è§£ï¼Œé»˜è®¤å°±æ˜¯å•ä¾‹çš„</p><ul><li>ä¸€èˆ¬æ³¨å…¥å¯¹è±¡éƒ½æ˜¯æ— çŠ¶æ€ï¼ˆä¸å¯ä¿®æ”¹ï¼‰çš„å¯¹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜</li><li>ä½†æ˜¯å¦‚æœåœ¨Beanä¸­å®šä¹‰äº†å¯ä¿®æ”¹çš„æˆå‘˜å˜é‡ï¼Œå°±æœ‰å¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</li></ul><h3 id="springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„"><a class="markdownIt-Anchor" href="#springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„"></a> Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><p>Springä¸­æä¾›ä¸¤ç§äº‹åŠ¡å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œä¸€ç§æ˜¯å£°æ˜å¼äº‹åŠ¡</p><ul><li>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šé€šè¿‡TransactionTemplateå®ç°ï¼Œå¯¹ä¸šåŠ¡ä»£ç æœ‰ä¾µå…¥æ€§</li><li>å£°æ˜å¼äº‹åŠ¡ï¼šé€šè¿‡AOPå®ç°ï¼Œå¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œå°†äº‹åŠ¡å¤„ç†é€»è¾‘ç»‡å…¥åˆ°ä¸šåŠ¡ä»£ç ä¸­</li></ul><h3 id="springä¸­äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#springä¸­äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›"></a> Springä¸­äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›ï¼Ÿ</h3><p>æ”¯æŒå½“å‰äº‹åŠ¡çš„ï¼š</p><ul><li>requiredï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡ï¼Œé»˜è®¤ä¼ æ’­çº§åˆ«</li><li>supportsï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡</li><li>mandatoryï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡</li></ul><p>ä¸æ”¯æŒå½“å‰äº‹åŠ¡çš„ï¼š</p><ul><li>requires_newï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡</li><li>not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡</li><li>neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</li><li>nestedï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡ä¸­æ‰§è¡Œ</li></ul><h3 id="äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›"></a> äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>å‡ºç°äº†æœªæ•è·çš„å¼‚å¸¸æˆ–è€…éå—æ£€å¼‚å¸¸æ¯”å¦‚RuntimeException (éå—æ£€å¼‚å¸¸æ˜¯æŒ‡åœ¨ä»£ç ä¸­å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œä½†ä¸éœ€è¦æ˜¾å¼åœ°è¿›è¡Œæ•è·æˆ–å£°æ˜ï¼Œæ¯”å¦‚ç©ºæŒ‡é’ˆæˆ–è€…æ•°ç»„è¶Šç•Œç­‰)</li><li>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè®¾ç½®çš„ä¸æ­£ç¡®</li><li>å¤šæ•°æ®æºæƒ…å†µä¸‹ï¼Œäº‹åŠ¡ç®¡ç†æ²¡æœ‰æ­£ç¡®é…ç½®</li><li>åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•å†…éƒ¨è°ƒç”¨</li><li>épublicæ–¹æ³•ä½¿ç”¨@Transactionalæ³¨è§£ä¼šå¤±æ•ˆ</li></ul><h3 id="ä¸ºä»€ä¹ˆæ–¹æ³•å†…éƒ¨è°ƒç”¨transactionalæ³¨è§£ä¼šå¤±æ•ˆ"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆæ–¹æ³•å†…éƒ¨è°ƒç”¨transactionalæ³¨è§£ä¼šå¤±æ•ˆ"></a> ä¸ºä»€ä¹ˆæ–¹æ³•å†…éƒ¨è°ƒç”¨@Transactionalæ³¨è§£ä¼šå¤±æ•ˆï¼Ÿ</h3><p>ç­”ï¼š@Transactionalæ³¨è§£æ˜¯åŸºäºAOPå®ç°çš„ï¼ŒAOPåˆæ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ï¼Œå› ä¸ºåŒä¸€ä¸ªç±»ä¸­æ–¹æ³•å†…éƒ¨è°ƒç”¨æ—¶ï¼Œæ˜¯é€šè¿‡thisè°ƒç”¨çš„ï¼Œthisè°ƒç”¨ä¸ä¼šç»è¿‡ä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥ä»£ç†å¯¹è±¡çš„é€»è¾‘ä¸ä¼šç”Ÿæ•ˆ</p><h3 id="beançš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#beançš„ç”Ÿå‘½å‘¨æœŸ"></a> Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><ul><li>é€šè¿‡æ„é€ å‡½æ•°å®ä¾‹åŒ–Bean</li><li>è¿›è¡Œä¾èµ–æ³¨å…¥</li><li>å¤„ç†Awareæ¥å£</li><li>å‰ç½®çš„BeanPostProcessorï¼Œç”¨äºå¤„ç†Beançš„åˆå§‹åŒ–å‰çš„æ“ä½œ</li><li>åˆå§‹åŒ–Beanï¼Œè‡ªå®šä¹‰init-methodæ–¹æ³•</li><li>åç½®çš„BeanPostProcessorï¼Œåˆå§‹åŒ–ååšä¸€äº›å¢å¼º</li><li>é”€æ¯Bean</li></ul><h3 id="beançš„å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³"><a class="markdownIt-Anchor" href="#beançš„å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³"></a> Beançš„å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>å¾ªç¯ä¾èµ–å‡ºç°çš„åŸå› æ˜¯ï¼Œå¦‚æœAå’ŒBäº’ç›¸ä»¥æ¥ï¼Œå½“Aåˆ°äº†ä¾èµ–æ³¨å…¥Bçš„é˜¶æ®µï¼Œä¼šå»æ‰§è¡ŒBçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ­¤æ—¶Bä¹Ÿè¦ä¾èµ–æ³¨å…¥Aï¼Œè¿™æ ·å°±ä¼šé€ æˆå¾ªç¯ä¾èµ–ï¼Œè¿™æ ·å¯¼è‡´åŒæ–¹éƒ½æ— æ³•å®ŒæˆBeançš„åˆå§‹åŒ–ã€‚</p><p>é€šè¿‡ä¸‰çº§ç¼“å­˜è§£å†³</p><ul><li>ä¸€çº§ç¼“å­˜ï¼šsigleton objectsï¼Œå•ä¾‹æ± ï¼Œå­˜æ”¾èµ°å®Œç”Ÿå‘½å‘¨æœŸçš„Bean</li><li>äºŒçº§ç¼“å­˜ï¼šearly singleton objectsï¼Œå­˜æ”¾åŠæˆå“çš„Beanï¼Œç”Ÿå‘½å‘¨æœŸè¿˜æ²¡èµ°å®Œ</li><li>ä¸‰çº§ç¼“å­˜ï¼šsingleton factoriesï¼Œå­˜æ”¾Beançš„å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡</li></ul><p>åœ¨Aå®ä¾‹åŒ–åï¼Œä¼šåˆ›å»ºä¸€ä¸ªObjectFactoryï¼Œæ”¾å…¥ä¸‰çº§ç¼“å­˜ä¸­ï¼Œå½“Béœ€è¦æ³¨å…¥Aå¯¹è±¡æ—¶ï¼Œç”¨Açš„ObjectFactoryåˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶Bè·å¾—Açš„å¯¹è±¡åå®Œæˆæ³¨å…¥ï¼Œç„¶åBå®Œæˆç”Ÿå‘½å‘¨æœŸï¼Œæ”¾å…¥å•ä¾‹æ± ä¸­ï¼Œç„¶åAä¹Ÿå®Œæˆç”Ÿå‘½å‘¨æœŸï¼Œæ”¾å…¥å•ä¾‹æ± ä¸­</p><p>æ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆåŠï¼Ÿ<br />ç­”ï¼šå¯ä»¥ä½¿ç”¨@Lazyæ³¨è§£ï¼Œæ‡’åŠ è½½ï¼Œç­‰åˆ°éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†å»å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†</p><h2 id="ä»‹ç»ä¸€ä¸‹capå’Œbaseç†è®º"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹capå’Œbaseç†è®º"></a> ä»‹ç»ä¸€ä¸‹CAPå’ŒBASEç†è®º</h2><p>CAPåˆ†åˆ«å¯¹åº”äº†ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§</p><ul><li>ä¸€èˆ¬åˆ†å¸ƒå¼ç³»ç»Ÿä¸­éƒ½ä¼šæ¶‰åŠåˆ†åŒºé—®é¢˜P</li><li>å½“åˆ†åŒºå‡ºç°æ—¶ï¼Œä¸€è‡´æ€§Cå’Œå¯ç”¨æ€§Aå°±æ— æ³•åŒæ—¶æ»¡è¶³</li></ul><p>BASEç†è®ºæ˜¯CAPçš„ä¸€ç§è§£å†³æ€è·¯ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªä¸»è¦æ€æƒ³ï¼š</p><ul><li>åŸºæœ¬å¯ç”¨æ€§ï¼šç³»ç»Ÿåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œä»ç„¶å¯ä»¥æä¾›éƒ¨åˆ†æœåŠ¡</li><li>è½¯çŠ¶æ€ï¼šå…è®¸ä¸´æ—¶çš„ä¸ä¸€è‡´çŠ¶æ€</li><li>æœ€ç»ˆä¸€è‡´æ€§ï¼šç³»ç»Ÿåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œæœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´çŠ¶æ€</li></ul><h2 id="ä»‹ç»ä¸€ä¸‹tccæ¨¡å¼"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹tccæ¨¡å¼"></a> ä»‹ç»ä¸€ä¸‹TCCæ¨¡å¼</h2><p>TCCæ˜¯Try-Confirm-Cancelçš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</p><ul><li>Tryï¼šå°è¯•æ‰§è¡Œï¼Œé¢„ç•™èµ„æº</li><li>Confirmï¼šå®Œæˆèµ„æºæ“ä½œä¸šåŠ¡ï¼ŒtryæˆåŠŸconfirmä¸€å®šè¦æˆåŠŸ</li><li>Cancelï¼šé¢„ç•™èµ„æºçš„é‡Šæ”¾ï¼Œå¯ç†è§£ä¸ºtryåå‘æ“ä½œ</li></ul><p>ä¸XAå’ŒATæ¨¡å¼ä¸åŒçš„æ˜¯ï¼ŒTCCæ¨¡å¼æ¯ä¸€æ­¥éƒ½éœ€è¦ä»£ç æ‰‹åŠ¨å®ç°</p><h2 id="å®šæ—¶ä»»åŠ¡æœ‰å“ªäº›å®ç°æ–¹å¼"><a class="markdownIt-Anchor" href="#å®šæ—¶ä»»åŠ¡æœ‰å“ªäº›å®ç°æ–¹å¼"></a> å®šæ—¶ä»»åŠ¡æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h2><ul><li>å•æœºå®šæ—¶ä»»åŠ¡ï¼š<ul><li>Timer</li><li>ScheduledThreadPoolExecutor</li><li>DelayQueue</li><li>spring taskï¼Œä¹Ÿå°±æ˜¯ç”¨@Scheduledæ³¨è§£å®ç°çš„å®šæ—¶ä»»åŠ¡ï¼Œæ”¯æŒcronè¡¨è¾¾å¼</li></ul></li><li>åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼š<ul><li>redisè¿‡æœŸäº‹ä»¶ç›‘å¬</li><li>redissonå†…ç½®çš„å»¶æ—¶é˜Ÿåˆ—</li><li>MQçš„å»¶æ—¶æ¶ˆæ¯</li></ul></li><li>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦æ¡†æ¶<ul><li>Quartzï¼Œæ¯”è¾ƒæ—©çš„å®šæ—¶ä»»åŠ¡æ¡†æ¶ï¼Œç¼ºç‚¹æ˜¯ä¸æ”¯æŒå¯è§†åŒ–ç®¡ç†ï¼Œä½¿ç”¨</li><li>xxl-jobï¼Œä½¿ç”¨å¹¿æ³›ï¼Œå¼€ç®±å³ç”¨</li><li>power jobï¼Œä½¿ç”¨å¹¿æ³›ï¼Œå¼€ç®±å³ç”¨</li></ul></li></ul><h2 id="è®¤è¯æˆæƒ"><a class="markdownIt-Anchor" href="#è®¤è¯æˆæƒ"></a> è®¤è¯æˆæƒ</h2><h3 id="ä»‹ç»ä¸€ä¸‹rbacæ¨¡å‹"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹rbacæ¨¡å‹"></a> ä»‹ç»ä¸€ä¸‹RBACæ¨¡å‹ï¼Ÿ</h3><ul><li>RBACæ„æ€æ˜¯åŸºäºè§’è‰²çš„æƒé™è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼‰</li><li>åœ¨RBACä¸­ï¼Œç”¨æˆ·ä¸è§’è‰²ã€è§’è‰²ä¸æƒé™ä¹‹é—´ï¼Œéƒ½æ„æˆäº†å¤šå¯¹å¤šçš„å…³ç³»</li><li>ä¸€èˆ¬åœ¨æ•°æ®åº“ä¸­ï¼ŒRBACæ¨¡å‹é™¤äº†æœ‰ç”¨æˆ·è¡¨ã€è§’è‰²è¡¨ã€æƒé™è¡¨å¤–ï¼Œè¿˜æœ‰ç”¨æˆ·è§’è‰²è¡¨å’Œè§’è‰²æƒé™è¡¨ä¸¤å¼ ä¸­é—´è¡¨</li></ul><h2 id="è´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡"></a> è´Ÿè½½å‡è¡¡</h2><h3 id="è´Ÿè½½å‡è¡¡æ€ä¹ˆåˆ†ç±»"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡æ€ä¹ˆåˆ†ç±»"></a> è´Ÿè½½å‡è¡¡æ€ä¹ˆåˆ†ç±»ï¼Ÿ</h3><ul><li>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼šåº”ç”¨åœ¨ç³»ç»Ÿå¤–éƒ¨è¯·æ±‚å’Œç½‘å…³å±‚ä¹‹é—´ï¼Œæœ€å¸¸è§çš„æ˜¯å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡</li><li>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼šåº”ç”¨äºç³»ç»Ÿå†…éƒ¨çš„ä¸åŒæœåŠ¡</li></ul><h3 id="å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«"></a> å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«ï¼Ÿ</h3><p>OSIæ¨¡å‹ä»ä¸‹åˆ°ä¸Šå…±åˆ†ä¸ºï¼š</p><ul><li><p>ç‰©ç†å±‚</p></li><li><p>æ•°æ®é“¾è·¯å±‚</p></li><li><p>ç½‘ç»œå±‚</p></li><li><p>ä¼ è¾“å±‚</p></li><li><p>ä¼šè¯å±‚</p></li><li><p>è¡¨ç¤ºå±‚</p></li><li><p>åº”ç”¨å±‚</p></li><li><p>å››å±‚è´Ÿè½½å‡è¡¡ä¸»è¦å·¥ä½œåœ¨OSIæ¨¡å‹çš„ç¬¬å››å±‚ï¼Œä¹Ÿå°±æ˜¯ä¼ è¾“å±‚ï¼Œè¿™ä¸€å±‚ä¸»è¦æ˜¯TCPå’ŒUDPåè®®ï¼Œå››å±‚è´Ÿè½½å‡è¡¡ä¸»è¦æ˜¯æ ¹æ®IPå’Œç«¯å£è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œä¸æ¶‰åŠå…·ä½“çš„æŠ¥æ–‡å†…å®¹</p></li><li><p>ä¸ƒå±‚è´Ÿè½½å‡è¡¡ä¸»è¦å·¥ä½œåœ¨OSIæ¨¡å‹çš„ç¬¬ä¸ƒå±‚ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨å±‚ï¼Œè¿™ä¸€å±‚ä¸»è¦æ˜¯HTTPåè®®ï¼Œä¸ƒå±‚è´Ÿè½½å‡è¡¡å¯ä»¥æ ¹æ®HTTPæŠ¥æ–‡çš„å†…å®¹è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œæ‰§è¡Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„è®¾å¤‡è¢«ç§°ä¸ºåå‘ä»£ç†æœåŠ¡å™¨</p></li><li><p>ä¸€èˆ¬ç”¨LVSåšå››å±‚è´Ÿè½½å‡è¡¡ï¼Œç”¨nginxåšä¸ƒå±‚è´Ÿè½½å‡è¡¡</p></li></ul><h3 id="è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"></a> è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</h3><ul><li>éšæœºï¼ŒåŠ æƒéšæœºï¼Œä¸¤æ¬¡éšæœº</li><li>è½®è¯¢ï¼ŒåŠ æƒè½®è¯¢ï¼Œå¹³æ»‘çš„åŠ æƒè½®è¯¢</li><li>å“ˆå¸Œï¼Œä¸€è‡´æ€§å“ˆå¸Œï¼Œæ™®é€šå“ˆå¸Œå¦‚æœèŠ‚ç‚¹æ•°é‡å˜åŒ–ï¼Œä¼šå¯¼è‡´å¤§éƒ¨åˆ†èŠ‚ç‚¹å“ˆå¸Œæ˜ å°„å˜åŒ–ï¼Œä¸€è‡´æ€§å“ˆå¸Œå°†æ•°æ®å’ŒèŠ‚ç‚¹éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç¯ä¸Šï¼Œå½“å¢åŠ æˆ–è€…åˆ å‡èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¯·æ±‚ä¼šæ²¿ç€ç¯çš„é¡ºæ—¶é’ˆæ–¹å‘æ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€è‡´æ€§å“ˆå¸Œåªä¼šå½±å“åˆ°ç›¸é‚»çš„åç»§èŠ‚ç‚¹ï¼Œä¸ä¼šå½±å“æ•´ä¸ªé›†ç¾¤çš„å“ˆå¸Œæ˜ å°„åˆ†å¸ƒã€‚<ul><li>ä½†ä¸€è‡´æ€§å“ˆå¸Œçš„é—®é¢˜æ˜¯ï¼Œå¦‚æœèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€ï¼ŒæŸä¸ªèŠ‚ç‚¹å¯èƒ½è¯·æ±‚è¿‡å¤šï¼Œå¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ï¼Œè§£å†³æ–¹æ³•æ˜¯å¢åŠ è™šæ‹ŸèŠ‚ç‚¹ï¼Œä½¿åˆ†å¸ƒæ›´åŠ å‡åŒ€</li></ul></li><li>æœ€å°‘è¿æ¥æ•°ã€æœ€å°‘æ´»è·ƒè¿æ¥æ•°ã€æœ€å¿«å“åº”ç­‰</li></ul><h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡å¯ä»¥æ€ä¹ˆåš"><a class="markdownIt-Anchor" href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡å¯ä»¥æ€ä¹ˆåš"></a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡å¯ä»¥æ€ä¹ˆåšï¼Ÿ</h3><ul><li>DNSè§£æï¼šç”¨æˆ·è¯·æ±‚åŸŸåï¼ŒDNSæœåŠ¡å™¨è§£ææˆIPåœ°å€ï¼Œè¿”å›ç»™ç”¨æˆ·</li><li>Nginxåå‘ä»£ç†ï¼šç”¨æˆ·å°†è¯·æ±‚å‘é€åˆ°nginxï¼Œnginxæ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨</li></ul><h1 id="csåŸºç¡€"><a class="markdownIt-Anchor" href="#csåŸºç¡€"></a> CSåŸºç¡€</h1><h2 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"></a> è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h2><blockquote><p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯èµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½(è½»é‡çº§è¿›ç¨‹)</p></blockquote><ul><li>å¤šä¸ªçº¿ç¨‹å…±äº«åœ°å€ç©ºé—´/èµ„æºï¼Œè€Œè¿›ç¨‹ä¹‹é—´çš„åœ°å€ç©ºé—´/èµ„æºæ˜¯ç‹¬ç«‹çš„</li><li>ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹</li><li>åˆ›å»º/æ’¤é”€çº¿ç¨‹çš„ç³»ç»Ÿå¼€é”€æ˜æ˜¾å°äºè¿›ç¨‹</li></ul><h2 id="ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«"></a> ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«</h2><h3 id="ç¡¬é“¾æ¥"><a class="markdownIt-Anchor" href="#ç¡¬é“¾æ¥"></a> ç¡¬é“¾æ¥</h3><ul><li>åœ¨ Linux/ç±» Unix æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å’Œç›®å½•éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•èŠ‚ç‚¹ï¼ˆinodeï¼‰å·ï¼Œç”¨æ¥æ ‡è¯†è¯¥æ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li>ç¡¬é“¾æ¥é€šè¿‡ inode èŠ‚ç‚¹å·å»ºç«‹è¿æ¥ï¼Œç¡¬é“¾æ¥å’Œæºæ–‡ä»¶çš„ inode èŠ‚ç‚¹å·ç›¸åŒï¼Œä¸¤è€…å¯¹æ–‡ä»¶ç³»ç»Ÿæ¥è¯´æ˜¯å®Œå…¨å¹³ç­‰çš„ï¼ˆå¯ä»¥çœ‹ä½œæ˜¯äº’ä¸ºç¡¬é“¾æ¥ï¼Œæºå¤´æ˜¯åŒä¸€ä»½æ–‡ä»¶ï¼‰ï¼Œåˆ é™¤å…¶ä¸­ä»»ä½•ä¸€ä¸ªå¯¹å¦å¤–ä¸€ä¸ªæ²¡æœ‰å½±å“ï¼Œå¯ä»¥é€šè¿‡ç»™æ–‡ä»¶è®¾ç½®ç¡¬é“¾æ¥æ–‡ä»¶æ¥é˜²æ­¢é‡è¦æ–‡ä»¶è¢«è¯¯åˆ ã€‚</li><li>åªæœ‰åˆ é™¤äº†æºæ–‡ä»¶å’Œæ‰€æœ‰å¯¹åº”çš„ç¡¬é“¾æ¥æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ‰ä¼šè¢«çœŸæ­£åˆ é™¤ã€‚</li><li>ç¡¬é“¾æ¥å…·æœ‰ä¸€äº›é™åˆ¶ï¼Œä¸èƒ½å¯¹ç›®å½•ä»¥åŠä¸å­˜åœ¨çš„æ–‡ä»¶åˆ›å»ºç¡¬é“¾æ¥ï¼Œå¹¶ä¸”ï¼Œç¡¬é“¾æ¥ä¹Ÿä¸èƒ½è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿã€‚</li><li><code>ln</code> å‘½ä»¤ç”¨äºåˆ›å»ºç¡¬é“¾æ¥ã€‚</li></ul><h3 id="è½¯é“¾æ¥ç¬¦å·é“¾æ¥"><a class="markdownIt-Anchor" href="#è½¯é“¾æ¥ç¬¦å·é“¾æ¥"></a> è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰</h3><ul><li>è½¯é“¾æ¥å’Œæºæ–‡ä»¶çš„ inode èŠ‚ç‚¹å·ä¸åŒï¼Œè€Œæ˜¯æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚</li><li>æºæ–‡ä»¶åˆ é™¤åï¼Œè½¯é“¾æ¥ä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ— æ•ˆçš„æ–‡ä»¶è·¯å¾„ã€‚</li><li>è½¯è¿æ¥ç±»ä¼¼äº Windows ç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ã€‚</li><li>ä¸åŒäºç¡¬é“¾æ¥ï¼Œå¯ä»¥å¯¹ç›®å½•æˆ–è€…ä¸å­˜åœ¨çš„æ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥ï¼Œå¹¶ä¸”ï¼Œè½¯é“¾æ¥å¯ä»¥è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿã€‚</li><li>ln -s å‘½ä»¤ç”¨äºåˆ›å»ºè½¯é“¾æ¥</li></ul><h3 id="ä¸ºä»€ä¹ˆç¡¬è¿æ¥ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆç¡¬è¿æ¥ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ"></a> ä¸ºä»€ä¹ˆç¡¬è¿æ¥ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿï¼Ÿ</h3><ul><li>ç¡¬é“¾æ¥æ˜¯é€šè¿‡ inode èŠ‚ç‚¹å·å»ºç«‹è¿æ¥çš„ï¼Œè€Œç¡¬é“¾æ¥å’Œæºæ–‡ä»¶å…±äº«ç›¸åŒçš„ inode èŠ‚ç‚¹å·ã€‚</li><li>ç„¶è€Œï¼Œæ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹ inode è¡¨ï¼Œä¸”æ¯ä¸ª inode è¡¨åªç»´æŠ¤è¯¥æ–‡ä»¶ç³»ç»Ÿå†…çš„ inodeã€‚</li><li>å¦‚æœåœ¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹é—´åˆ›å»ºç¡¬é“¾æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´ inode èŠ‚ç‚¹å·å†²çªçš„é—®é¢˜ï¼Œå³ç›®æ ‡æ–‡ä»¶çš„ inode èŠ‚ç‚¹å·å·²ç»åœ¨è¯¥æ–‡ä»¶ç³»ç»Ÿä¸­è¢«ä½¿ç”¨ã€‚</li></ul><h2 id="åŠ¨æ€ç¼–è¯‘å’Œé™æ€ç¼–è¯‘"><a class="markdownIt-Anchor" href="#åŠ¨æ€ç¼–è¯‘å’Œé™æ€ç¼–è¯‘"></a> åŠ¨æ€ç¼–è¯‘å’Œé™æ€ç¼–è¯‘</h2><h3 id="é™æ€ç¼–è¯‘"><a class="markdownIt-Anchor" href="#é™æ€ç¼–è¯‘"></a> é™æ€ç¼–è¯‘</h3><p>åœ¨ç¼–è¯‘æ—¶å°†ç¨‹åºä¸å…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼ˆåŒ…æ‹¬åº“ï¼‰é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå•ç‹¬çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åŒ…å«äº†æ‰€æœ‰ä»£ç å’Œæ•°æ®ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>é™æ€ç¼–è¯‘å¯åŠ¨é€Ÿåº¦å¿«ï¼Œä¸éœ€è¦ä¾èµ–å¤–éƒ¨åº“ï¼Œä½†å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯è¾ƒå¤§ã€‚</p><h3 id="åŠ¨æ€ç¼–è¯‘è¿è¡Œæ—¶ç¼–è¯‘"><a class="markdownIt-Anchor" href="#åŠ¨æ€ç¼–è¯‘è¿è¡Œæ—¶ç¼–è¯‘"></a> åŠ¨æ€ç¼–è¯‘(è¿è¡Œæ—¶ç¼–è¯‘)</h3><p>åœ¨ç¼–è¯‘æ—¶åªåˆ›å»ºç¨‹åºçš„æ¡†æ¶ï¼Œè€Œä¸å°†æ‰€æœ‰ä¾èµ–é¡¹åŒ…å«åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚å®é™…çš„åº“æ–‡ä»¶æ˜¯åœ¨è¿è¡Œæ—¶åŠ è½½çš„ï¼Œç¨‹åºåœ¨éœ€è¦æ—¶åŠ¨æ€é“¾æ¥åˆ°è¿™äº›åº“ã€‚</p><h2 id="tcpä¸‰æ¬¡æ¡æ‰‹"><a class="markdownIt-Anchor" href="#tcpä¸‰æ¬¡æ¡æ‰‹"></a> TCPä¸‰æ¬¡æ¡æ‰‹</h2><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a class="markdownIt-Anchor" href="#ä¸‰æ¬¡æ¡æ‰‹"></a> ä¸‰æ¬¡æ¡æ‰‹</h3><p>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å¦‚å›¾ï¼š<br /><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/network/tcp-shakes-hands-three-times.png" alt="ä¸‰æ¬¡æ¡æ‰‹" /></p><ul><li>ä¸€æ¬¡æ¡æ‰‹:å®¢æˆ·ç«¯å‘é€å¸¦æœ‰ SYNï¼ˆSEQ=xï¼‰ æ ‡å¿—çš„æ•°æ®åŒ… -&gt; æœåŠ¡ç«¯ï¼Œç„¶åå®¢æˆ·ç«¯è¿›å…¥ SYN_SEND çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯çš„ç¡®è®¤ï¼›</li><li>äºŒæ¬¡æ¡æ‰‹:æœåŠ¡ç«¯å‘é€å¸¦æœ‰ SYN+ACK(SEQ=y,ACK=x+1) æ ‡å¿—çš„æ•°æ®åŒ… â€“&gt; å®¢æˆ·ç«¯,ç„¶åæœåŠ¡ç«¯è¿›å…¥ SYN_RECV çŠ¶æ€ï¼›</li><li>ä¸‰æ¬¡æ¡æ‰‹:å®¢æˆ·ç«¯å‘é€å¸¦æœ‰ ACK(ACK=y+1) æ ‡å¿—çš„æ•°æ®åŒ… â€“&gt; æœåŠ¡ç«¯ï¼Œç„¶åå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½è¿›å…¥ESTABLISHED çŠ¶æ€ï¼Œå®Œæˆ TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹"></a> ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h3><p>ä¸‰æ¬¡æ¡æ‰‹æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯åŒæ–¹ç¡®è®¤è‡ªå·±ä¸å¯¹æ–¹çš„å‘é€ä¸æ¥æ”¶æ˜¯æ­£å¸¸çš„ã€‚</p><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClient ä»€ä¹ˆéƒ½ä¸èƒ½ç¡®è®¤ï¼›Server ç¡®è®¤äº†å¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šå¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClient ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›Server ç¡®è®¤äº†ï¼šè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸</li></ul><h3 id="ç¬¬äºŒæ¬¡å‘é€äº†ackä¸ºä»€ä¹ˆè¿˜è¦å‘é€syn"><a class="markdownIt-Anchor" href="#ç¬¬äºŒæ¬¡å‘é€äº†ackä¸ºä»€ä¹ˆè¿˜è¦å‘é€syn"></a> ç¬¬äºŒæ¬¡å‘é€äº†ACKï¼Œä¸ºä»€ä¹ˆè¿˜è¦å‘é€SYNï¼Ÿ</h3><p>æœåŠ¡ç«¯ä¼ å›å‘é€ç«¯æ‰€å‘é€çš„ ACK æ˜¯ä¸ºäº†å‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œæˆ‘æ¥æ”¶åˆ°çš„ä¿¡æ¯ç¡®å®å°±æ˜¯ä½ æ‰€å‘é€çš„ä¿¡å·äº†â€ï¼Œè¿™è¡¨æ˜ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„é€šä¿¡æ˜¯æ­£å¸¸çš„ã€‚å›ä¼  SYN åˆ™æ˜¯ä¸ºäº†å»ºç«‹å¹¶ç¡®è®¤ä»æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯çš„é€šä¿¡ã€‚</p><h3 id="ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹å¯ä»¥æºå¸¦æ•°æ®å—"><a class="markdownIt-Anchor" href="#ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹å¯ä»¥æºå¸¦æ•°æ®å—"></a> ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</h3><p>åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„(å®¢æˆ·ç«¯å‘é€å®Œ ACK ç¡®è®¤åŒ…ä¹‹åå°±è¿›å…¥ ESTABLISHED çŠ¶æ€äº†)</p><p>å¦‚æœç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„ ACK ç¡®è®¤åŒ…ä¸¢å¤±ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å·²ç»å¼€å§‹å‘é€æºå¸¦æ•°æ®çš„åŒ…ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯åœ¨æ”¶åˆ°è¿™ä¸ªæºå¸¦æ•°æ®çš„åŒ…æ—¶ï¼Œå¦‚æœè¯¥åŒ…ä¸­åŒ…å«äº† ACK æ ‡è®°ï¼ŒæœåŠ¡ç«¯ä¼šå°†å…¶è§†ä¸ºæœ‰æ•ˆçš„ç¬¬ä¸‰æ¬¡æ¡æ‰‹ç¡®è®¤ã€‚è¿™æ ·ï¼Œè¿æ¥å°±è¢«è®¤ä¸ºæ˜¯å»ºç«‹çš„ï¼ŒæœåŠ¡ç«¯ä¼šå¤„ç†è¯¥æ•°æ®åŒ…ï¼Œå¹¶ç»§ç»­æ­£å¸¸çš„æ•°æ®ä¼ è¾“æµç¨‹ã€‚</p><h2 id="tcpå››æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#tcpå››æ¬¡æŒ¥æ‰‹"></a> TCPå››æ¬¡æŒ¥æ‰‹</h2><h3 id="å››æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#å››æ¬¡æŒ¥æ‰‹"></a> å››æ¬¡æŒ¥æ‰‹</h3><p>TCP å››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹å¦‚å›¾ï¼š<br /><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/network/tcp-waves-four-times.png" alt="å››æ¬¡æŒ¥æ‰‹" /></p><ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FINï¼ˆSEQ=xï¼‰ æ ‡å¿—çš„æ•°æ®åŒ…-&gt;æœåŠ¡ç«¯ï¼Œç”¨æ¥å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ•°æ®ä¼ é€ã€‚ç„¶åå®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT-1 çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ª FINï¼ˆSEQ=Xï¼‰ æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œå®ƒå‘é€ä¸€ä¸ª ACK ï¼ˆACK=x+1ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…-&gt;å®¢æˆ·ç«¯ ã€‚ç„¶åæœåŠ¡ç«¯è¿›å…¥ CLOSE-WAIT çŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT-2 çŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯å‘é€ä¸€ä¸ª FIN (SEQ=y)æ ‡å¿—çš„æ•°æ®åŒ…-&gt;å®¢æˆ·ç«¯ï¼Œè¯·æ±‚å…³é—­è¿æ¥ï¼Œç„¶åæœåŠ¡ç«¯è¿›å…¥ LAST-ACK çŠ¶æ€ã€‚</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ ACK (ACK=y+1)æ ‡å¿—çš„æ•°æ®åŒ…-&gt;æœåŠ¡ç«¯ï¼Œç„¶åå®¢æˆ·ç«¯è¿›å…¥TIME-WAITçŠ¶æ€ï¼ŒæœåŠ¡ç«¯åœ¨æ”¶åˆ° ACK (ACK=y+1)æ ‡å¿—çš„æ•°æ®åŒ…åè¿›å…¥ CLOSE çŠ¶æ€ã€‚æ­¤æ—¶å¦‚æœå®¢æˆ·ç«¯ç­‰å¾… 2MSL åä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œå°±è¯æ˜æœåŠ¡ç«¯å·²æ­£å¸¸å…³é—­ï¼Œéšåå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚</li></ul><blockquote><p>åªè¦å››æ¬¡æŒ¥æ‰‹æ²¡æœ‰ç»“æŸï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å°±å¯ä»¥ç»§ç»­ä¼ è¾“æ•°æ®ï¼</p></blockquote><h3 id="ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹"></a> ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h3><p>TCP æ˜¯å…¨åŒå·¥é€šä¿¡ï¼Œå¯ä»¥åŒå‘ä¼ è¾“æ•°æ®ã€‚ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€çš„æ—¶å€™ï¼Œåˆ™å‘å‡ºè¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº† TCP è¿æ¥ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šA å’Œ B æ‰“ç”µè¯ï¼Œé€šè¯å³å°†ç»“æŸåã€‚</p><ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šA è¯´â€œæˆ‘æ²¡å•¥è¦è¯´çš„äº†â€</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šB å›ç­”â€œæˆ‘çŸ¥é“äº†â€ï¼Œä½†æ˜¯ B å¯èƒ½è¿˜ä¼šæœ‰è¦è¯´çš„è¯ï¼ŒA ä¸èƒ½è¦æ±‚ B è·Ÿç€è‡ªå·±çš„èŠ‚å¥ç»“æŸé€šè¯</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šäºæ˜¯ B å¯èƒ½åˆå·´æ‹‰å·´æ‹‰è¯´äº†ä¸€é€šï¼Œæœ€å B è¯´â€œæˆ‘è¯´å®Œäº†â€</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šA å›ç­”â€œçŸ¥é“äº†â€ï¼Œè¿™æ ·é€šè¯æ‰ç®—ç»“æŸ</li></ul><h3 id="ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸æŠŠ-ack-å’Œ-fin-ä¸€èµ·å‘é€å˜æˆä¸‰æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸æŠŠ-ack-å’Œ-fin-ä¸€èµ·å‘é€å˜æˆä¸‰æ¬¡æŒ¥æ‰‹"></a> ä¸ºä»€ä¹ˆæœåŠ¡ç«¯ä¸æŠŠ ACK å’Œ FIN ä¸€èµ·å‘é€ï¼Œå˜æˆä¸‰æ¬¡æŒ¥æ‰‹ï¼Ÿ</h3><p>å› ä¸ºæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯æ–­å¼€è¿æ¥çš„è¯·æ±‚æ—¶ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›æ•°æ®æ²¡æœ‰å‘å®Œï¼Œè¿™æ—¶å…ˆå›å¤ ACKï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°äº†æ–­å¼€è¿æ¥çš„è¯·æ±‚ã€‚ç­‰åˆ°æ•°æ®å‘å®Œä¹‹åå†å‘ FINï¼Œæ–­å¼€æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ä¼ é€ã€‚</p><h3 id="ç¬¬äºŒæ¬¡æŒ¥æ‰‹æœåŠ¡ç«¯å‘é€ackæ²¡æœ‰åˆ°è¾¾ä¼šæ€ä¹ˆæ ·"><a class="markdownIt-Anchor" href="#ç¬¬äºŒæ¬¡æŒ¥æ‰‹æœåŠ¡ç«¯å‘é€ackæ²¡æœ‰åˆ°è¾¾ä¼šæ€ä¹ˆæ ·"></a> ç¬¬äºŒæ¬¡æŒ¥æ‰‹æœåŠ¡ç«¯å‘é€ACKæ²¡æœ‰åˆ°è¾¾ä¼šæ€ä¹ˆæ ·ï¼Ÿ</h3><p>å®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ° ACK ç¡®è®¤ï¼Œä¼šé‡æ–°å‘é€ FIN è¯·æ±‚ã€‚</p><h3 id="ä¸ºä»€ä¹ˆç¬¬å››æ¬¡æŒ¥æ‰‹å®¢æˆ·ç«¯è¦ç­‰å¾…-2mslæŠ¥æ–‡æœ€é•¿å­˜æ´»æ—¶é—´æ‰è¿›å…¥closedçŠ¶æ€"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆç¬¬å››æ¬¡æŒ¥æ‰‹å®¢æˆ·ç«¯è¦ç­‰å¾…-2mslæŠ¥æ–‡æœ€é•¿å­˜æ´»æ—¶é—´æ‰è¿›å…¥closedçŠ¶æ€"></a> ä¸ºä»€ä¹ˆç¬¬å››æ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯è¦ç­‰å¾… 2MSLï¼ˆæŠ¥æ–‡æœ€é•¿å­˜æ´»æ—¶é—´ï¼‰æ‰è¿›å…¥CLOSEDçŠ¶æ€ï¼Ÿ</h3><p>ç¬¬å››æ¬¡æŒ¥æ‰‹æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡ç«¯çš„ ACK æœ‰å¯èƒ½ä¸¢å¤±ã€‚</p><ul><li>å¦‚æœæœåŠ¡ç«¯å› ä¸ºæŸäº›åŸå› è€Œæ²¡æœ‰æ”¶åˆ° ACK çš„è¯ï¼ŒæœåŠ¡ç«¯å°±ä¼šé‡å‘ FIN</li><li>å¦‚æœå®¢æˆ·ç«¯åœ¨ 2*MSL çš„æ—¶é—´å†…æ”¶åˆ°äº† FINï¼Œå°±ä¼šé‡æ–°å‘é€ ACK å¹¶å†æ¬¡ç­‰å¾… 2MSLï¼Œé˜²æ­¢ Server æ²¡æœ‰æ”¶åˆ° ACK è€Œä¸æ–­é‡å‘ FINã€‚</li></ul><h1 id="c"><a class="markdownIt-Anchor" href="#c"></a> C++</h1><h2 id="cä¸­çš„staticå…³é”®å­—"><a class="markdownIt-Anchor" href="#cä¸­çš„staticå…³é”®å­—"></a> c++ä¸­çš„staticå…³é”®å­—</h2><p>åŠ è½½é¡ºåºï¼ˆé¢å‘å¯¹è±¡ï¼‰</p><ul><li>é™æ€-&gt;éé™æ€-&gt;æ„é€ æ–¹æ³•</li><li>çˆ¶ç±»é™æ€-å­ç±»é™æ€-çˆ¶ç±»éé™æ€-çˆ¶ç±»æ„é€ -å­ç±»éé™æ€-å­ç±»æ„é€ </li></ul><p>é™æ€æˆå‘˜å˜é‡(é¢å‘å¯¹è±¡)</p><ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«,ä¸å±äºæŸä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ç±»åè®¿é—®ï¼Œä¹Ÿå¯é€šè¿‡å¯¹è±¡è®¿é—®</li><li>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜ï¼Œåˆ†é…åœ¨æ•°æ®åŒºï¼ˆå…¨å±€åŒºï¼‰</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–(class::var)</li><li>sizeofä¸ä¼šè®¡ç®—é™æ€æˆå‘˜å˜é‡</li></ul><p>é™æ€æˆå‘˜å‡½æ•°(é¢å‘å¯¹è±¡)</p><ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</li><li>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</li><li>ä¸å«thisæŒ‡é’ˆ(ä¸èƒ½è¢«å®ä¾‹ä½¿ç”¨)</li></ul><p>é™æ€å…¨å±€å˜é‡(é¢å‘è¿‡ç¨‹)</p><ul><li>åœ¨æ•°æ®åŒºåˆ†é…å†…å­˜</li><li>æœªåˆå§‹åŒ–ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸º0</li><li>æ•´ä¸ªæ–‡ä»¶å†…å¯è§ï¼Œæ–‡ä»¶å¤–ä¸å¯è§</li></ul><p>é™æ€å±€éƒ¨å˜é‡(é¢å‘è¿‡ç¨‹)</p><ul><li>åœ¨æ•°æ®åŒºåˆ†é…å†…å­˜</li><li>ä¸€èˆ¬åœ¨å£°æ˜å¤„åˆå§‹åŒ–ï¼Œæœªåˆå§‹åŒ–ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸º0</li><li>é™æ€å±€éƒ¨å˜é‡å§‹ç»ˆé©»ç•™åœ¨æ•°æ®åŒºï¼Œä½†ä»–çš„ä½œç”¨åŸŸæ˜¯å±€éƒ¨ä½œç”¨åŸŸï¼Œå½“å®šä¹‰å®ƒçš„å‡½æ•°æˆ–è¯­å¥å—ç»“æŸï¼Œå…¶ä½œç”¨åŸŸéšä¹‹ç»“æŸ</li></ul><blockquote><p>æ€»ç»“ï¼šé™æ€å˜é‡å…·æœ‰å…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†åªèƒ½ä½œç”¨äºè‡ªå·±çš„ä½œç”¨åŸŸã€‚</p></blockquote><hr /><h2 id="cæ¨¡æ¿"><a class="markdownIt-Anchor" href="#cæ¨¡æ¿"></a> c++æ¨¡æ¿</h2><blockquote><p>æ¨¡æ¿æ˜¯c++æ³›å‹ç¼–ç¨‹çš„ä¸»è¦ä½¿ç”¨çš„æŠ€æœ¯</p></blockquote><p><strong>å‡½æ•°æ¨¡æ¿</strong></p><p>åˆ›å»ºä¸€ä¸ªé€šç”¨çš„å‡½æ•°ï¼Œå‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚å¯ä»¥ä¸æŒ‡å®šï¼Œç”¨ä¸€ä¸ªè™šæ‹Ÿçš„ç±»å‹æ¥è¡¨ç¤º</p><p>å£°æ˜ä¸€ä¸ªæ¨¡æ¿<code>template&lt;typename T&gt;</code>æˆ–è€…<code>template&lt;class T&gt;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">sum</span><span class="hljs-params">(T a,T b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> a+b;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">double</span> a=<span class="hljs-number">10.5</span>,b=<span class="hljs-number">20.00002</span>;<br>cout&lt;&lt;<span class="hljs-string">&quot;è‡ªåŠ¨ç±»å‹æ¨å¯¼&quot;</span>&lt;&lt;endl;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lf\n&quot;</span>,<span class="hljs-built_in">sum</span>(a,b));<br>cout&lt;&lt;<span class="hljs-string">&quot;æ˜¾ç¤ºæŒ‡å®šç±»å‹&quot;</span>&lt;&lt;endl;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lf&quot;</span>,<span class="hljs-built_in">sum</span>&lt;<span class="hljs-type">double</span>&gt;(a,b));<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><p>æ³¨æ„</p><ul><li>è‡ªåŠ¨æ¨å¯¼ç±»å‹éœ€è¦æ¨å¯¼å‡ºä¸€è‡´çš„ç±»å‹</li><li>å‡½æ•°æ¨¡æ¿ä½¿ç”¨æ—¶å¿…é¡»ç¡®å®š<code>T</code>çš„ç±»å‹</li><li>æ™®é€šå‡½æ•°å’Œå‡½æ•°æ¨¡æ¿éƒ½å¯è°ƒç”¨æ—¶ï¼Œå…ˆè°ƒç”¨æ™®é€šå‡½æ•°</li><li>å¦‚æœç±»å‹å’Œå‡½æ•°æ¨¡æ¿æ›´åŒ¹é…ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</li></ul><p><strong>ç±»æ¨¡æ¿</strong></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">M</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>T name;<br>M age;<br><span class="hljs-built_in">person</span>(T a,M b):<span class="hljs-built_in">name</span>(a),<span class="hljs-built_in">age</span>(b)&#123;&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">person&lt;string,<span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;cndh&quot;</span>,<span class="hljs-number">18</span>)</span></span>;<br>cout&lt;&lt;p.name&lt;&lt;endl;<br>cout&lt;&lt;p.age&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>ç±»æ¨¡æ¿ä¸èƒ½è‡ªåŠ¨æ¨å¯¼ç±»å‹</li><li>ç±»æ¨¡æ¿å¯ä»¥åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­æŒ‡å®šé»˜è®¤ç±»å‹</li><li>ç±»æ¨¡æ¿ä¸­å®šä¹‰çš„å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</li></ul><hr /><h2 id="cæ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#cæ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«"></a> c++æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«</h2><blockquote><p><strong>æµ…æ‹·è´</strong> ï¼ˆé»˜è®¤æ–¹å¼ï¼‰ï¼šå°†åŸå¯¹è±¡çš„å¼•ç”¨ç›´æ¥èµ‹ç»™æ–°å¯¹è±¡ï¼Œåªæ˜¯åŸå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ã€‚</p></blockquote><blockquote><p><strong>æ·±æ‹·è´</strong>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå°†åŸå¯¹è±¡çš„å„é¡¹å±æ€§æ‹·è´è¿‡æ¥ï¼Œæ·±æ‹·è´ä¼šåœ¨å †ä¸­é¢å¤–ç”³è¯·å†…å­˜æ¥å‚¨å­˜æ•°æ®ï¼Œå½“æ•°æ®æˆå‘˜ä¸­æœ‰æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»è¦ç”¨æ·±æ‹·è´ã€‚</p></blockquote><ul><li>å› ä¸ºç”³è¯·äº†æ–°çš„å†…å­˜ï¼Œæ‰€ä»¥æ·±æ‹·è´æ”¹å˜æ–°å¯¹è±¡çš„å±æ€§å¯¹åŸå¯¹è±¡æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æµ…æ‹·è´ä¼šå½±å“</li><li>å½“æˆå‘˜ä¸­æœ‰æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»ç”¨æ·±æ‹·è´ã€‚å› ä¸ºæµ…æ‹·è´çš„æ–°æŒ‡é’ˆå’Œæ—§æŒ‡é’ˆéƒ½æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œåœ¨æ–°å¯¹è±¡å’Œæ—§å¯¹è±¡ææ„æ—¶ï¼Œå·²ç»é‡Šæ”¾çš„å†…å­˜ä¼šè¢«å†æ¬¡é‡Šæ”¾ï¼Œè¿™æ—¶ä¼šå‡ºç°é”™è¯¯ã€‚</li></ul><hr /><h2 id="cå¤šæ€"><a class="markdownIt-Anchor" href="#cå¤šæ€"></a> c++å¤šæ€</h2><p>ç¼–è¯‘æ—¶å¤šæ€ï¼š</p><ul><li>ç¼–è¯‘å™¨å¤šæ€æ˜¯é€šè¿‡å‡½æ•°é‡è½½å’Œæ¨¡æ¿å®ç°çš„ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œæ ¹æ®å‡½æ•°çš„å‚æ•°ç±»å‹æˆ–æ¨¡æ¿å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé€‰æ‹©åˆé€‚çš„å‡½æ•°æˆ–æ¨¡æ¿å®ä¾‹åŒ–ã€‚</li><li>ç¼–è¯‘å™¨å¤šæ€æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šå‡½æ•°è°ƒç”¨ï¼Œå› æ­¤å®ƒçš„æ€§èƒ½è¾ƒé«˜ã€‚</li><li>ç¼–è¯‘å™¨å¤šæ€ä¸éœ€è¦ä½¿ç”¨è™šå‡½æ•°å’ŒåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®å‡½æ•°çš„å‚æ•°ç±»å‹æˆ–æ¨¡æ¿å‚æ•°ç±»å‹æ¥ç¡®å®šå‡½æ•°è°ƒç”¨ã€‚</li></ul><p>è¿è¡Œæ—¶å¤šæ€ï¼š</p><ul><li>è¿è¡Œæ—¶å¤šæ€æ˜¯é€šè¿‡ç»§æ‰¿å’Œè™šå‡½æ•°å®ç°çš„ã€‚å½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œé€šè¿‡è™šå‡½æ•°çš„åŠ¨æ€ç»‘å®šï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°å®ç°ã€‚</li><li>è¿è¡Œæ—¶å¤šæ€éœ€è¦ä½¿ç”¨è™šå‡½æ•°å’ŒåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨æ¥å®ç°ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®å®é™…å¯¹è±¡çš„ç±»å‹æ¥ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚</li><li>è¿è¡Œæ—¶å¤šæ€åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…·ä½“çš„å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤å®ƒçš„æ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚</li></ul><p><em><strong>overrideçš„ä½œç”¨</strong></em></p><p>ä¿è¯åœ¨æ´¾ç”Ÿç±»ä¸­å£°æ˜çš„é‡è½½å‡½æ•°ï¼Œä¸åŸºç±»çš„è™šå‡½æ•°æœ‰ç›¸åŒçš„ç­¾åï¼Œæ ¸å¿ƒä½œç”¨å°±æ˜¯ç”¨äºç¼–è¯‘æœŸä»£ç æ£€æŸ¥ã€‚</p><p><em><strong>final</strong></em></p><p>é˜»æ­¢ç±»çš„è¿›ä¸€æ­¥æ´¾ç”Ÿå’Œè™šå‡½æ•°çš„è¿›ä¸€æ­¥é‡å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§åä¸ºå»è™šæ‹ŸåŒ–çš„ä¼˜åŒ–æŠ€å·§ï¼Œç›¸å½“äºæŠŠè¿è¡ŒæœŸå¤šæ€è½¬æ¢ä¸ºäº†ç¼–è¯‘æœŸå¤šæ€ï¼Œæé«˜äº†æ‰§è¡Œæ•ˆç‡ã€‚</p><p><em><strong>å¤šç»§æ‰¿å­˜åœ¨çš„é—®é¢˜</strong></em></p><p>å‘½åå†²çª</p><p><em><strong>å‘ä¸Šè½¬å‹</strong></em></p><p>å‘ä¸Šè½¬å‹æ˜¯å­ç±»æŒ‡é’ˆè½¬æ¢æˆçˆ¶ç±»æŒ‡é’ˆ</p><p><code>Parent* p =new son();</code></p><p><em><strong>å‘ä¸‹è½¬å‹</strong></em></p><p>å› ä¸ºçˆ¶ç±»æŒ‡é’ˆä¸èƒ½æ“ä½œå­ç±»ç‹¬æœ‰çš„å‡½æ•°ï¼Œå³ä½¿çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»çš„å¯¹è±¡ä¹Ÿä¸è¡Œï¼Œæ‰€ä»¥éœ€è¦å‘ä¸‹è½¬å‹</p><p>å‘ä¸‹è½¬å‹æœ‰ä¸¤ç§æ–¹å¼<code>dynamic_cast</code>å’Œ<code>static_cast</code>,å‰è€…æ›´åŠ å®‰å…¨ä¸€äº›</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pf">Parent* pS<span class="hljs-keyword">on</span>=new S<span class="hljs-keyword">on</span>();<br>S<span class="hljs-keyword">on</span>* s=dynamic_cast<span class="hljs-variable">&lt;Son*&gt;</span>(pS<span class="hljs-keyword">on</span>);<br></code></pre></td></tr></table></figure><hr /><h2 id="è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°"><a class="markdownIt-Anchor" href="#è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°"></a> è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°</h2><p><strong>è™šå‡½æ•°</strong><br />åœ¨ç±»ä¸­å£°æ˜æ—¶å‰é¢å¸¦æœ‰virtualå…³é”®å­—çš„å‡½æ•°ï¼Œå¦‚ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">example</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>çº¯è™šå‡½æ•°</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp">åœ¨è™šå‡½æ•°åé¢åŠ `=<span class="hljs-number">0</span>`<br><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">example</span>()</span> = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è™šå‡½æ•°å¯ä»¥åœ¨çˆ¶ç±»ä¸­å®ç°ï¼Œä¹Ÿå¯ä»¥è¢«å­ç±»é‡å†™å®ç°ï¼Œæ˜¯å®ç°è¿è¡Œæ—¶å¤šæ€çš„æ–¹å¼ä¹‹ä¸€</li><li>çº¯è™šå‡½æ•°ä¸å¯ä»¥åœ¨çˆ¶ç±»å®ç°ï¼Œå¿…é¡»ç”±å­ç±»é‡å†™</li><li>å«æœ‰çº¯è™šå‡½æ•°çš„ç±»è¢«ç§°ä¸ºæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</li><li>æŠ½è±¡ç±»çš„å­ç±»å¦‚æœè¦å®ä¾‹åŒ–ï¼Œåˆ™å¿…é¡»é‡å†™çº¯è™šå‡½æ•°</li></ul><p><strong>è™šå‡½æ•°æ€ä¹ˆå®ç°çš„ï¼ŸçœŸçš„æ›´æ…¢å—ï¼Ÿ</strong></p><ul><li>è™šå‡½æ•°æ˜¯é€šè¿‡è™šå‡½æ•°è¡¨å®ç°çš„ï¼Œæ¯ä¸ªç±»éƒ½æœ‰è‡ªå·±çš„è™šè¡¨ï¼Œå¯¹è±¡çš„é¦–åœ°å€å¤„å­˜æ”¾æœ‰æŒ‡å‘è™šè¡¨çš„æŒ‡é’ˆã€‚</li><li>å½“å…·ä½“è°ƒç”¨å“ªä¸ªè™šå‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šçš„æ—¶å€™ï¼Œè™šå‡½æ•°ä¸ä¸€å®šæ›´æ…¢ã€‚</li></ul><h2 id="cæ™ºèƒ½æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#cæ™ºèƒ½æŒ‡é’ˆ"></a> c++æ™ºèƒ½æŒ‡é’ˆ</h2><p><strong>å†…å­˜æ³„æ¼</strong>ï¼š</p><ul><li><p>æŒ‡å› æŸäº›åŸå› é€ æˆç¨‹åºæœªèƒ½é‡Šæ”¾å·²ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚å†…å­˜æ³„æ¼å¹¶ä¸æ˜¯å†…å­˜æ¶ˆå¤±äº†ï¼Œè€Œæ˜¯ç”±äºç¨‹åºè®¾è®¡çš„é—®é¢˜ï¼Œå¤±å»å¯¹æŸå—å†…å­˜çš„æ§åˆ¶ï¼Œå¯¼è‡´æ— æ³•åˆ©ç”¨è¯¥å—å†…å­˜ã€‚</p></li><li><p>å†…å­˜æ³„æ¼ä¼šå¯¼è‡´ç¨‹åºå“åº”è¶Šæ¥è¶Šæ…¢ï¼Œç”šè‡³å´©æºƒ</p></li><li><p>ä¸€èˆ¬æœ‰2ç§å†…å­˜æ³„æ¼ï¼Œä¸€ç§æ˜¯å †åŒºåˆ†é…çš„å†…å­˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œä¸€ç§æ˜¯å¥—æ¥å­—ã€æ–‡ä»¶æè¿°ç¬¦ç­‰æ²¡æœ‰é‡Šæ”¾ï¼Œ2ç§æƒ…å½¢éƒ½ä¼šå¯¼è‡´èµ„æºçš„æµªè´¹</p></li></ul><p><strong>RALL</strong></p><ul><li>RAIIï¼ˆResource Acquisition Is Initializationï¼‰æ˜¯ä¸€ç§å°†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œèµ„æºç»‘å®šçš„æŠ€æœ¯</li><li>å¯¹è±¡åˆ›å»ºæ—¶è·å–èµ„æºï¼Œææ„æ—¶é‡Šæ”¾èµ„æº</li></ul><p>æ™ºèƒ½æŒ‡é’ˆå°±å…·æœ‰RALLçš„ç‰¹æ€§</p><p><strong>auto_ptr</strong></p><p>c++98ä¸­å°±å·²ç»æä¾›äº†æ™ºèƒ½æŒ‡é’ˆauto_ptr</p><p>ä¾‹å¦‚ï¼š<code>auto_ptr&lt;int&gt; p(new int)</code>å°±ç›¸å½“äº <code>int * p=new int</code></p><p>auto_ptrçš„å±€é™æ€§ï¼š</p><ul><li>æ‹·è´æˆ–è€…èµ‹å€¼ä¼šå¯¼è‡´åŸæŒ‡é’ˆå˜ä¸º<code>NULL</code>ï¼Œå¦‚<code>p1=p2</code>åï¼Œ<code>p2å˜æˆäº†NULL</code></li><li>ä¸æ”¯æŒå¯¹è±¡æ•°ç»„çš„å†…å­˜ç®¡ç†</li></ul><p><strong>unique_ptr</strong></p><p>ä¸èƒ½ç›´æ¥è¿›è¡Œèµ‹å€¼æˆ–è€…æ‹·è´æ„é€ ï¼Œå¦‚ï¼š<code>p1 = p2</code>å’Œ<code>unique_ptr&lt;int&gt; p1(p2)</code></p><p>å¦‚æœè¦å¼ºè¡Œæ‰§è¡Œçš„è¯è¦åŠ ä¸Š<code>move</code>ï¼Œå¦‚ï¼š<code>p1 = std::move(p2)</code>å’Œ<code>unique_ptr&lt;int&gt; p1(std::move(p2))</code></p><p><strong>shared_ptr</strong></p><p>é€šè¿‡<strong>å¼•ç”¨è®¡æ•°</strong>(<code>use_count()</code>)çš„æ–¹å¼æ¥å®ç°å¤šä¸ª<code>shared_ptr</code>å¯¹è±¡ä¹‹é—´å…±äº«èµ„æº</p><ul><li>shared_ptråœ¨å…¶å†…éƒ¨ï¼Œç»™æ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä»½è®¡æ•°è¡¨ï¼Œç”¨æ¥è®°å½•è¯¥ä»½èµ„æºè¢«å‡ ä¸ªæŒ‡é’ˆå…±äº«</li><li>åœ¨å¯¹è±¡è¢«é”€æ¯æ—¶(ä¹Ÿå°±æ˜¯ææ„å‡½æ•°è°ƒç”¨)ï¼Œå°±è¯´æ˜è‡ªå·±ä¸ä½¿ç”¨è¯¥èµ„æºäº†ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡ä¸€</li><li>å¦‚æœå¼•ç”¨è®¡æ•°æ˜¯0ï¼Œå°±è¯´æ˜è‡ªå·±æ˜¯æœ€åä¸€ä¸ªä½¿ç”¨è¯¥èµ„æºçš„å¯¹è±¡ï¼Œå¿…é¡»é‡Šæ”¾è¯¥èµ„æº</li><li>å¦‚æœä¸æ˜¯0ï¼Œå°±è¯´æ˜é™¤äº†è‡ªå·±è¿˜æœ‰å…¶ä»–å¯¹è±¡åœ¨ä½¿ç”¨è¯¥ä»½èµ„æºï¼Œä¸èƒ½é‡Šæ”¾è¯¥èµ„æºï¼Œå¦åˆ™å…¶ä»–å¯¹è±¡å°±æˆé‡æŒ‡é’ˆäº†</li></ul><p>æ³¨æ„ï¼šä¸¤ä¸ªå¯¹è±¡äº¤å‰ä½¿ç”¨<strong>shared_ptr</strong>(äº’ç›¸è·å¾—å¯¹æ–¹çš„shareæŒ‡é’ˆ),ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</p><p><strong>weak_ptr</strong></p><p>ä¸“é—¨ä¸ºäº†è§£å†³ä¸Šé¢çš„<strong>shared_ptr</strong>çš„é—®é¢˜ï¼Œä¸æ”¯æŒRALLï¼Œä¸é‡Šæ”¾èµ„æºï¼Œä¸å¢åŠ æˆ–å‡å°‘å¼•ç”¨è®¡æ•°</p><p>å…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/cpp_learner/article/details/118912592?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166191088916782414982504%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=166191088916782414982504&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-118912592-null-null.142%5Ev42%5Epc_rank_34,185%5Ev2%5Econtrol&amp;utm_term=c%2B%2B%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88&amp;spm=1018.2226.3001.4187">ç›¸å…³é“¾æ¥</a></p><hr /><h2 id="const-å’Œ-volatileè¾¨æ"><a class="markdownIt-Anchor" href="#const-å’Œ-volatileè¾¨æ"></a> const å’Œ volatileè¾¨æ</h2><p><strong>const</strong></p><ul><li>è¢«constä¿®é¥°çš„å˜é‡è¢«è§†ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œä½¿å¾—å˜é‡å…·æœ‰åªè¯»å±æ€§</li><li>constä¿®é¥°çš„å˜é‡ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„åªè¯»å˜é‡ï¼Œå®ƒåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¯¥å˜é‡<strong>ä¸èƒ½å‡ºç°åœ¨èµ‹å€¼ç¬¦å·çš„å·¦è¾¹</strong></li></ul><p><em><strong>constä¿®é¥°æŒ‡é’ˆå˜é‡æœ‰ä»¥ä¸‹3ç§æƒ…å†µ</strong></em></p><ol><li>const ä¿®é¥°æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œåˆ™å†…å®¹ä¸ºä¸å¯å˜é‡ã€‚</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const int *p <span class="hljs-operator">=</span> <span class="hljs-number">8</span><span class="hljs-comment">; //æŒ‡å‘çš„å†…å®¹8ä¸å¯å˜</span><br>*p<span class="hljs-operator">=</span><span class="hljs-number">6</span><span class="hljs-comment">; //é”™è¯¯</span><br></code></pre></td></tr></table></figure><ol start="2"><li>const ä¿®é¥°æŒ‡é’ˆï¼Œåˆ™æŒ‡é’ˆä¸å¯å˜</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">int</span> a=<span class="hljs-number">8</span>;<br><span class="hljs-built_in">int</span>* <span class="hljs-keyword">const</span> p = &amp;a;<br>*p = <span class="hljs-number">9</span>; <span class="hljs-comment">// æ­£ç¡®</span><br><span class="hljs-built_in">int</span>  b = <span class="hljs-number">7</span>;<br>p = &amp;b; <span class="hljs-comment">// é”™è¯¯</span><br></code></pre></td></tr></table></figure><ol start="3"><li>const ä¿®é¥°æŒ‡é’ˆå’ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œåˆ™æŒ‡é’ˆå’ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹éƒ½ä¸ºä¸å¯å˜é‡ã€‚</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">int</span> a = <span class="hljs-number">8</span>, b = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> * <span class="hljs-keyword">const</span>  p = &amp;a;<br>*p=<span class="hljs-number">1</span>; <span class="hljs-comment">//é”™è¯¯</span><br>p=&amp;b; <span class="hljs-comment">//é”™è¯¯</span><br></code></pre></td></tr></table></figure><p><em><strong>const ä¿®é¥°å¯¹è±¡å’Œæˆå‘˜å‡½æ•°</strong></em></p><ul><li>è¢«constä¿®é¥°çš„å¯¹è±¡(å¸¸å¯¹è±¡)æˆ–è€…æˆå‘˜å‡½æ•°(å¸¸å‡½æ•°)å†…ä¸èƒ½ä¿®æ”¹ç±»çš„æˆå‘˜å˜é‡ï¼Œå¦‚æœè¦ä¿®æ”¹éœ€è¦ç»™å¯¹åº”çš„æˆå‘˜å˜é‡åŠ mutableå…³é”®å­—</li><li>å¸¸å¯¹è±¡åªèƒ½ä¿®æ”¹å¸¸å‡½æ•°</li></ul><p><strong>volatile</strong></p><p>æœ¬æ„ä¸ºæ˜“å˜çš„ï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹</p><ul><li>volatileæŒ‡å‡ºå˜é‡æ˜¯éšæ—¶å¯èƒ½å˜åŒ–çš„ï¼Œæ¯æ¬¡ä½¿ç”¨éœ€è¦é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œå³ä½¿å®ƒå‰é¢çš„æŒ‡ä»¤åˆšåˆšä»è¯¥å¤„è¯»å–è¿‡æ•°æ®ã€‚</li><li>è¢«volatileä¿®é¥°çš„å˜é‡è¡¨ç¤ºå¯ä»¥è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹ï¼Œæ¯”å¦‚ï¼šæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ã€‚é‡åˆ°è¿™ä¸ªå…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç å°±ä¸å†è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œå¯ä»¥æä¾›å¯¹ç‰¹æ®Šåœ°å€çš„ç¨³å®šè®¿é—®ã€‚</li></ul><blockquote><p><em><strong>ä¸€ä¸ªå˜é‡å¯ä»¥åŒæ—¶è¢«constå’Œvolatileä¿®é¥°å—ï¼Ÿ</strong></em></p></blockquote><p>å¯ä»¥ã€‚const volatileè¡¨ç¤ºä¸€ä¸ªå˜é‡åœ¨ç¨‹åºç¼–è¯‘æœŸä¸èƒ½è¢«ä¿®æ”¹ä¸”ä¸èƒ½è¢«ä¼˜åŒ–ï¼›åœ¨ç¨‹åºè¿è¡ŒæœŸï¼Œæ¯æ¬¡å¿…é¡»ä»å†…å­˜ä¸­åŠ è½½å˜é‡çš„å€¼ã€‚</p><h2 id="null-å’Œ-nullptrçš„åŒºåˆ«æ˜¯ä»€ä¹ˆä¸ºä»€ä¹ˆå¼•å…¥nulllptr"><a class="markdownIt-Anchor" href="#null-å’Œ-nullptrçš„åŒºåˆ«æ˜¯ä»€ä¹ˆä¸ºä»€ä¹ˆå¼•å…¥nulllptr"></a> NULL å’Œ nullptrçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå¼•å…¥nulllptrï¼Ÿ</h2><ul><li>ä¸»æµç¼–è¯‘å™¨ä¸­ï¼Œ<code>NULL</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•´æ•°å¸¸é‡ï¼Œè¢«å®šä¹‰ä¸º 0ï¼Œåœ¨ C++11 ä¹‹å‰ï¼Œå½“æˆ‘ä»¬æƒ³è¦å°†ä¸€ä¸ªæŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ NULLï¼›</li><li><code>nullptr</code> æ˜¯ C++11 ä¸­å¼•å…¥çš„æ–°çš„å…³é”®å­—ï¼Œä¸“é—¨ç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œå®ƒä¸æ˜¯æ•´æ•°ç±»å‹ï¼Œè€Œæ˜¯ç‰¹æ®Šçš„æŒ‡é’ˆç±»å‹<code>nullptr_t</code>ã€‚</li></ul><p><em><strong>å¼•å…¥nullptrçš„åŸå› </strong></em></p><ol><li>NULLæ˜¯æ•´æ•°ç±»å‹ï¼Œç”¨æˆ·è°ƒç”¨foo(NULL)çš„æ—¶å€™ï¼Œä¸èƒ½åŒºåˆ†è°ƒç”¨çš„æ˜¯foo(int)è¿˜æ˜¯foo(int*)å‡½æ•°ï¼›</li><li>ä¸»æµç¼–è¯‘å™¨ä¸­NULLå€¼ä¸º0ï¼Œé€šè¿‡0è¡¨ç¤ºä¸€ä¸ªæ— æ•ˆåœ°å€ï¼Œä½†æ˜¯æœ‰çš„æ¶æ„ä¸‹ï¼Œ0åœ°å€æœ‰ç‰¹å®šç”¨é€”ï¼Œè€Œ<code>nullptr</code>æŒ‡å‘çš„æ°¸è¿œæ˜¯ä¸€ä¸ªæ— æ•ˆåœ°å€ã€‚</li></ol><h2 id="git-fetchå’Œgit-pullçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#git-fetchå’Œgit-pullçš„åŒºåˆ«"></a> git fetchå’Œgit pullçš„åŒºåˆ«</h2><ul><li>git fetchæ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰åˆ°æœ¬åœ°ï¼Œç”¨æˆ·åœ¨æ£€æŸ¥äº†ä»¥åå†³å®šæ˜¯å¦åˆå¹¶åˆ°å·¥ä½œæœ¬æœºåˆ†æ”¯ä¸­ã€‚</li><li>è€Œgit pull åˆ™æ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰ä¸‹æ¥åç›´æ¥åˆå¹¶ï¼Œå³ï¼šgit pull = git fetch + git mergeï¼Œè¿™æ ·å¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ã€‚</li></ul><blockquote><p>git è¿æ¥/æ·»åŠ è¿œç¨‹ä»“åº“<br />git remote add ä»“åº“å åœ°å€</p></blockquote><h2 id="deleteæ˜¯æ€æ ·çŸ¥é“æ•°ç»„é•¿åº¦çš„"><a class="markdownIt-Anchor" href="#deleteæ˜¯æ€æ ·çŸ¥é“æ•°ç»„é•¿åº¦çš„"></a> delete[]æ˜¯æ€æ ·çŸ¥é“æ•°ç»„é•¿åº¦çš„ï¼Ÿ</h2><p>æ²¡æœ‰æ ‡å‡†å®ç°ï¼Œä¸€ç§å¸¸è§çš„å®ç°æ–¹æ³•æ˜¯ï¼Œç”³è¯·å†…å­˜æ—¶ï¼Œä¼šåœ¨è¿”å›çš„æŒ‡é’ˆå‰é¢å­˜æ”¾è¿™æ®µå†…å­˜çš„å¤§å°ï¼Œè°ƒç”¨delete[]çš„æ—¶å€™ï¼Œå°±å¯ä»¥çŸ¥é“æ•°ç»„é•¿åº¦äº†ã€‚</p><h2 id="ç¨‹åºæ˜¯ä»main-å‡½æ•°å¼€å§‹æ‰§è¡Œçš„å—"><a class="markdownIt-Anchor" href="#ç¨‹åºæ˜¯ä»main-å‡½æ•°å¼€å§‹æ‰§è¡Œçš„å—"></a> ç¨‹åºæ˜¯ä»main å‡½æ•°å¼€å§‹æ‰§è¡Œçš„å—ï¼Ÿ</h2><p>ä¸æ˜¯ï¼Œç¨‹åºåœ¨æ‰§è¡Œå‰ï¼Œä¼šç»å†ä¸€ä¸ªä»ç£ç›˜åŠ è½½ç¨‹åºåˆ°å†…å­˜çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ‰§è¡Œéé™æ€å…¨å±€å˜é‡çš„åˆå§‹åŒ–ã€‚</p><h1 id="python"><a class="markdownIt-Anchor" href="#python"></a> python</h1><h2 id="pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶"><a class="markdownIt-Anchor" href="#pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶"></a> pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶</h2><blockquote><p>pythoné‡‡ç”¨çš„æ˜¯<strong>å¼•ç”¨è®¡æ•°</strong>ä¸ºä¸»ï¼Œ<strong>æ ‡è®°â€”æ¸…é™¤</strong>å’Œ<strong>åˆ†ä»£æ”¶é›†</strong>ä¸ºè¾…çš„ç­–ç•¥ã€‚</p></blockquote><p><strong>å¼•ç”¨è®¡æ•°</strong><br />æ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªå­—æ®µæ¥è®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“æ–°çš„å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°çš„å€¼åŠ 1,å½“æŸä¸ªå¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å€¼å‡ä¸€ã€‚å½“å¼•ç”¨è®¡æ•°çš„å€¼ä¸º0æ—¶ï¼Œä¼šé‡Šæ”¾å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li>éœ€è¦é¢å¤–çš„ç©ºé—´ç»´æŠ¤å¼•ç”¨æ¬¡æ•°</li><li>å¯¹è±¡çš„å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</li></ul><p>å¼•ç”¨è®¡æ•°å¢åŠ çš„æƒ…å†µï¼š</p><ul><li>å¯¹è±¡è¢«åˆ›å»ºï¼Œä¾‹å¦‚ a = 23</li><li>å¯¹è±¡è¢«å¼•ç”¨ï¼Œä¾‹å¦‚ b = a</li><li>å¯¹è±¡è¢«ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¾‹å¦‚ fun(a)</li><li>å¯¹è±¡è¢«ä½œä¸ºä¸€ä¸ªå…ƒç´ ï¼Œå­˜å‚¨åœ¨å®¹å™¨ä¸­</li></ul><p>å¼•ç”¨è®¡æ•°å‡å°‘çš„æƒ…å†µï¼š</p><ul><li>å¯¹è±¡çš„åˆ«åè¢«æ˜¾å¼é”€æ¯ï¼Œä¾‹å¦‚ del a</li><li>å¯¹è±¡çš„åˆ«åè¢«èµ‹äºˆæ–°çš„å¯¹è±¡ï¼Œä¾‹å¦‚ a = 24</li><li>ä¸€ä¸ªå¯¹è±¡ç¦»å¼€å®ƒçš„ä½œç”¨åŸŸï¼Œä¾‹å¦‚ f çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œfuncå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡</li><li>å¯¹è±¡æ‰€åœ¨çš„å®¹å™¨è¢«é”€æ¯ï¼Œæˆ–ä»å®¹å™¨ä¸­åˆ é™¤å¯¹è±¡</li></ul><p><strong>åˆ†ä»£å›æ”¶</strong></p><ul><li><p>åˆ†ä»£å›æ”¶æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼ŒPythonå°†å†…å­˜æ ¹æ®å¯¹è±¡çš„å­˜æ´»æ—¶é—´åˆ’åˆ†ä¸ºä¸åŒçš„é›†åˆï¼Œæ¯ä¸€ä¸ªé›†åˆç§°ä¸ºä¸€ä¸ªä»£ï¼ŒPythonå°†å†…å­˜åˆ†ä¸ºäº†3â€œä»£â€ï¼Œåˆ†åˆ«ä»£è¡¨<strong>å¹´è½»ä»£</strong>ï¼ˆç¬¬0ä»£ï¼‰ã€<strong>ä¸­å¹´ä»£</strong>ï¼ˆç¬¬1ä»£ï¼‰ã€<strong>è€å¹´ä»£</strong>ï¼ˆç¬¬2ä»£ï¼‰ï¼Œå®ƒä»¬å¯¹åº”çš„æ˜¯3ä¸ªé“¾è¡¨ï¼Œå®ƒä»¬çš„åƒåœ¾æ”¶é›†é¢‘ç‡éšç€å¯¹è±¡çš„å­˜æ´»æ—¶é—´çš„å¢å¤§è€Œå‡å°</p></li><li><p>æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šåˆ†é…åœ¨å¹´è½»ä»£ï¼Œå¹´è½»ä»£é“¾è¡¨çš„æ€»æ•°è¾¾åˆ°ä¸Šé™æ—¶ï¼ŒPythonåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šè¢«è§¦å‘ï¼ŒæŠŠé‚£äº›å¯ä»¥è¢«å›æ”¶çš„å¯¹è±¡è¢«å›æ”¶æ‰ï¼Œè€Œé‚£äº›ä¸ä¼šè¢«å›æ”¶çš„å¯¹è±¡å°±ä¼šè¢«ç§»åŠ¨åˆ°ä¸­å¹´ä»£ï¼Œä¾æ¬¡ç±»æ¨ï¼Œ è€å¹´ä»£ä¸­çš„å¯¹è±¡æ˜¯å­˜æ´»æ—¶é—´æœ€ä¹…çš„å¯¹è±¡ï¼Œç”šè‡³æ˜¯å­˜æ´»äºæ•´ä¸ªç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p></li></ul><p><strong>æ ‡è®°â€“æ¸…é™¤</strong></p><p>æ˜¯ä¸€ç§åŸºäºè¿½è¸ªå›æ”¶ï¼ˆtracking GCï¼‰æŠ€æœ¯å®ç°çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚å®ƒåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ol><li>æ ‡è®°é˜¶æ®µï¼ŒGCä¼šæŠŠæ‰€æœ‰çš„æ´»åŠ¨å¯¹è±¡æ‰“ä¸Šæ ‡è®°</li><li>æŠŠé‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ï¼ˆéæ´»åŠ¨å¯¹è±¡ï¼‰è¿›è¡Œå›æ”¶</li></ol><p><strong>å¦‚ä½•åˆ¤æ–­å“ªäº›æ˜¯æ´»åŠ¨å¯¹è±¡ï¼Œå“ªäº›æ˜¯éæ´»åŠ¨å¯¹è±¡ï¼Ÿ</strong></p><p>å¯¹è±¡ä¹‹é—´é€šè¿‡å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰è¿åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªæœ‰å‘å›¾ï¼Œå¯¹è±¡æ„æˆè¿™ä¸ªæœ‰å‘å›¾çš„èŠ‚ç‚¹ï¼Œè€Œå¼•ç”¨å…³ç³»æ„æˆè¿™ä¸ªæœ‰å‘å›¾çš„è¾¹ã€‚ä»è·Ÿå¯¹è±¡ï¼ˆroot objectï¼‰å‡ºå‘ï¼Œæ²¿ç€æœ‰å‘è¾¹éå†å¯¹è±¡ï¼Œå¯è¾¾çš„ï¼ˆreachableï¼‰å¯¹è±¡æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œä¸å¯è¾¾çš„å¯¹è±¡å°±æ˜¯è¦è¢«æ¸…é™¤çš„éæ´»åŠ¨å¯¹è±¡ã€‚</p><h1 id="deep-learning"><a class="markdownIt-Anchor" href="#deep-learning"></a> deep learning</h1><h2 id="åˆ¤åˆ«æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹"><a class="markdownIt-Anchor" href="#åˆ¤åˆ«æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹"></a> åˆ¤åˆ«æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹</h2><p>åˆ¤åˆ«æ¨¡å‹ï¼šç›´æ¥å­¦ä¹ æ¡ä»¶æ¦‚ç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(y|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><br />ç”Ÿæˆæ¨¡å‹ï¼šå­¦ä¹ è”åˆæ¦‚ç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>ï¼Œç„¶åå¯ä»¥è®¡ç®—æ¡ä»¶æ¦‚ç‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(y|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">âˆ£</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ä»¥åŠå…¶ä»–ä¿¡æ¯ï¼Œéœ€è¦çš„æ•°æ®é‡è¾ƒå¤§</p><p>ç®€å•è¯´ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªè‹¹æœæ˜¯å¥½æ˜¯åï¼Œåˆ¤åˆ«æ¨¡å‹ä¼šç›´æ¥ç»™å‡ºæ˜¯å¥½çš„æ¦‚ç‡å’Œæ˜¯åçš„æ¦‚ç‡ï¼Œè€Œç”Ÿæˆæ¨¡å‹åˆ†åˆ«å­¦ä¹ å‡ºä¸¤ç§è‹¹æœå„è‡ªå¯¹åº”çš„æ¨¡å‹ï¼Œç„¶åå°†è¦é¢„æµ‹çš„è‹¹æœçš„ç‰¹å¾åˆ†åˆ«è¾“å…¥ä¸åŒæ¨¡å‹ï¼Œç„¶åæ¯”è¾ƒä¸¤ä¸ªæ¨¡å‹è¾“å‡ºæ¦‚ç‡çš„å¤§å°ï¼Œé€‰å‡ºåˆé€‚çš„ç±»åˆ«</p><p>åˆ¤åˆ«æ¨¡å‹ï¼š</p><ul><li>æ„ŸçŸ¥æœº</li><li>kè¿‘é‚»</li><li>å†³ç­–æ ‘</li><li>é€»è¾‘æ€è’‚å›å½’</li><li>svm</li><li>boosting</li><li>æœ€å¤§ç†µæ¨¡å‹</li></ul><p>ç”Ÿæˆæ¨¡å‹ï¼š</p><ul><li>æœ´ç´ è´å¶æ–¯</li><li>æ··åˆé«˜æ–¯æ¨¡å‹</li><li>éšé©¬å°”å¯å¤«æ¨¡å‹</li></ul><h2 id="è½¬ç½®å·ç§¯å’Œç©ºæ´å·ç§¯"><a class="markdownIt-Anchor" href="#è½¬ç½®å·ç§¯å’Œç©ºæ´å·ç§¯"></a> è½¬ç½®å·ç§¯å’Œç©ºæ´å·ç§¯</h2><p><em><strong>è½¬ç½®å·ç§¯</strong></em></p><blockquote><p>åœ¨è¯­ä¹‰åˆ†å‰²ä¸­ï¼Œä¼šä½¿ç”¨å·ç§¯å±‚è¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åé€šè¿‡è½¬ç½®å·ç§¯åšä¸Šé‡‡æ ·ï¼Œæ¢å¤ä¸ºåŸå…ˆçš„å°ºå¯¸ï¼Œè¿™æ ·æ‰å¯ä»¥å¯¹åŸæ¥çš„å›¾åƒä¸­æ¯ä¸ªåƒç´ éƒ½è¿›è¡Œåˆ†ç±»ã€‚<strong>è½¬ç½®å·ç§¯ä¸æ˜¯å·ç§¯çš„é€†è¿ç®—</strong></p></blockquote><p>åŸºæœ¬æ­¥éª¤ï¼š</p><ul><li>åœ¨ç‰¹å¾å›¾<strong>ä¸­é—´</strong>(å…ƒç´ å’Œå…ƒç´ ä¹‹é—´)å¡«å……s-1è¡Œï¼Œsä¸ºæ­¥é•¿</li><li>åœ¨ç‰¹å¾å›¾<strong>å››å‘¨</strong>å¡«å……k-p-1è¡Œï¼Œkä¸ºå·ç§¯æ ¸å¤§å°ï¼Œpä¸ºpadding</li><li>å°†kernelä¸Šä¸‹ã€å·¦å³ç¿»è½¬ï¼ˆä¸­å¿ƒå¯¹ç§°ï¼Œé¡ºæ—¶é’ˆæ—‹è½¬180åº¦ï¼‰</li><li>åškernel_sizeä¸å˜ï¼Œså’Œpå‡ä¸º1çš„å·ç§¯å³å¯</li></ul><p><em><strong>ç©ºæ´å·ç§¯</strong></em></p><ul><li>åœ¨å·ç§¯æ ¸ç›¸é‚»å…ƒç´ ä¹‹é—´æ’å…¥0,å…·ä½“æ’å…¥è†¨èƒ€ç‡(dilation rate)-1ä¸ª0ï¼Œç„¶åå†åšå·ç§¯</li><li>ä¸»è¦ç›®çš„æ˜¯æ‰©å¤§æ„Ÿå—é‡</li></ul><h2 id="æ•°æ®é›†ä¸å¹³è¡¡çš„å¤„ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#æ•°æ®é›†ä¸å¹³è¡¡çš„å¤„ç†æ–¹å¼"></a> æ•°æ®é›†ä¸å¹³è¡¡çš„å¤„ç†æ–¹å¼</h2><ol><li>æ•°æ®å¢å¹¿<ul><li>è¿›è¡Œä¸€å®šçš„æ—‹è½¬ç¼©æ”¾</li><li>RGBä¸‰é€šé“æå–ä¸‰å¼ å›¾ç‰‡</li><li>é«˜æ–¯æ¨¡ç³Š</li></ul></li><li>äººå·¥åˆæˆæ•°æ®</li><li>ç»™æ¯ç§ç±»åˆ«èµ‹äºˆæƒå€¼ï¼Œæ ·æœ¬å°‘çš„ç±»åˆ«æƒå€¼å¯ä»¥å¤§ä¸€äº›ï¼Œæ ·æœ¬å¤šçš„ç±»åˆ«æƒå€¼å°ä¸€äº›</li></ol><h2 id="tensorflowå’Œpytorchçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#tensorflowå’Œpytorchçš„åŒºåˆ«"></a> tensorflowå’Œpytorchçš„åŒºåˆ«</h2><ol><li>tfæ˜¯è°·æ­Œå¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œpytorchæ˜¯facebookå¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶</li><li>åœ¨tf1.0æ—¶ï¼Œtfåªæ”¯æŒé™æ€çš„è®¡ç®—å›¾ï¼Œè€Œpytorchæ”¯æŒåŠ¨æ€çš„è®¡ç®—å›¾ï¼Œä½†æ˜¯tf2.0ä¹Ÿæ”¯æŒåŠ¨æ€è®¡ç®—å›¾äº†</li><li>tfçš„apiæ›´è¯¦ç»†æ›´ä¸°å¯Œï¼Œpytorchçš„ä»£ç æ›´ç®€æ´</li><li>tfæœ‰tensorboardè¿™æ ·çš„å¯è§†åŒ–å·¥å…·ï¼Œä½†å®é™…ä¸Šç°åœ¨pytorchä¹Ÿèƒ½ä½¿ç”¨tensorboard</li></ol><h2 id="transformerä¸­çš„ä½ç½®ç¼–ç "><a class="markdownIt-Anchor" href="#transformerä¸­çš„ä½ç½®ç¼–ç "></a> transformerä¸­çš„ä½ç½®ç¼–ç </h2><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦ä½ç½®ç¼–ç ï¼Ÿ</p></blockquote><ul><li>ä½ç½®å’Œè¯è¯­çš„é¡ºåºæ˜¯ä»»ä½•è¯­è¨€çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒä»¬å®šä¹‰äº†è¯­æ³•ï¼Œä»è€Œå†³å®šäº†å¥å­çš„å®é™…è¯­ä¹‰ã€‚å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰æœ¬è´¨ä¸Šè€ƒè™‘äº†è¯è¯­çš„é¡ºåºï¼›å®ƒä»¬æŒ‰ç…§é¡ºåºé€ä¸ªè§£æå¥å­ä¸­çš„è¯è¯­ã€‚è¿™æ ·å¯ä»¥å°†è¯è¯­çš„é¡ºåºæ•´åˆåˆ°RNNçš„ä¸»å¹²ä¸­ã€‚</li><li>Transformeræ¶æ„æ”¾å¼ƒäº†å¾ªç¯æœºåˆ¶ï¼Œè½¬è€Œé‡‡ç”¨<strong>å¤šå¤´è‡ªæ³¨æ„æœºåˆ¶</strong>ï¼Œå¤§å¤§åŠ å¿«è®­ç»ƒæ—¶é—´ã€‚ä»ç†è®ºä¸Šè®²ï¼Œå®ƒå¯ä»¥æ•æ‰åˆ°å¥å­ä¸­æ›´é•¿çš„ä¾èµ–å…³ç³»ã€‚ç”±äºå¥å­ä¸­çš„<strong>æ¯ä¸ªè¯è¯­åŒæ—¶é€šè¿‡Transformerçš„ç¼–ç å™¨/è§£ç å™¨ï¼Œæ¨¡å‹æœ¬èº«å¯¹äºæ¯ä¸ªè¯è¯­çš„ä½ç½®/é¡ºåºæ²¡æœ‰ä»»ä½•æ¦‚å¿µã€‚</strong></li></ul><blockquote><p>ä½ç½®ç¼–ç çš„è®¡ç®—ï¼Ÿ</p></blockquote><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mover accent="true"><msub><mi>p</mi><mi>t</mi></msub><mo stretchy="true">â†’</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><msup><mo stretchy="false">)</mo><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>:</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.15999999999999992em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>sin</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>Ï‰</mi><mi>k</mi></msub><mi mathvariant="normal">.</mi><mi>t</mi><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>Â </mtext></mrow><mi>i</mi><mo>=</mo><mn>2</mn><mi>k</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>cos</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>Ï‰</mi><mi>k</mi></msub><mi mathvariant="normal">.</mi><mi>t</mi><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">f</mi><mtext>Â </mtext></mrow><mi>i</mi><mo>=</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\left.\overrightarrow{p_t}^{(i)}=f(t)^{(i)}:=\left\{\begin{array}{ll}\sin(\omega_k.t),&amp;\mathrm{if~}i=2k\\\cos(\omega_k.t),&amp;\mathrm{if~}i=2k+1\end{array}\right.\right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.23046em;"><span style="top:-3.40546em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">sin</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mpunct">,</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">cos</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">i</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mspace nobreak">Â </span></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">i</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span><span class="mspace nobreak">Â </span></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>å…¶ä¸­ï¼Œtä»£è¡¨ä½ç½®ï¼Œiä»£è¡¨ç»´åº¦ã€‚pä»£è¡¨ç¬¬tä¸ªä½ç½®ï¼Œç¬¬iä¸ªç»´åº¦çš„å€¼ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï‰</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\omega_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„è®¡ç®—å¦‚ä¸‹ï¼š</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>Ï‰</mi><mi>k</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1000</mn><msup><mn>0</mn><mrow><mn>2</mn><mi>k</mi><mi mathvariant="normal">/</mi><mi>d</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\omega_k=\frac1{10000^{2k/d}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0254399999999997em;vertical-align:-0.704em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.2960000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.814em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord">1</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.704em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¥‡æ•°ç»´åº¦ä¹‹é—´æˆ–è€…å¶æ•°ç»´åº¦ä¹‹é—´å‘¨æœŸä¸åŒã€‚</li><li>é™¤äº†è¡¨ç¤ºç»å¯¹ä½ç½®ä¿¡æ¯å¤–ï¼Œè¿˜å¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºç›¸å¯¹ä½ç½®ä¿¡æ¯ã€‚ç»™å®šk,å­˜åœ¨ä¸€ä¸ªå›ºå®šçš„ä¸kç›¸å…³çš„çº¿æ€§å˜æ¢çŸ©é˜µï¼Œä»è€Œç”±posçš„ä½ç½®ç¼–ç çº¿æ€§å˜æ¢è€Œå¾—åˆ°pos+kçš„ä½ç½®ç¼–ç ã€‚è¿™ä¸ªç›¸å¯¹ä½ç½®ä¿¡æ¯å¯èƒ½å¯ä»¥è¢«æ¨¡å‹å‘ç°è€Œåˆ©ç”¨ã€‚å› ä¸ºç»å¯¹ä½ç½®ä¿¡æ¯åªä¿è¯äº†å„ä¸ªä½ç½®ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯åƒ0,1,2è¿™æ ·çš„æœ‰æ˜ç¡®å‰åå…³ç³»çš„ç¼–ç ã€‚</li></ul><blockquote><p>CVä¸­ä½¿ç”¨ä½ç½®ç¼–ç </p></blockquote><p>ä¸nlpä¸­ç±»ä¼¼ï¼Œcvä¸­çš„æ¯ä¸ªåƒç´ å’Œpatchä¹Ÿæœ‰è‡ªå·±çš„ä½ç½®ä¿¡æ¯ï¼Œé€šå¸¸cvä¸­ä½ç½®ç¼–ç æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li>ç»å¯¹ä½ç½®ç¼–ç ï¼šä¸€èˆ¬æ˜¯å¯å­¦ä¹ çš„ï¼Œå®ç°éå¸¸ç®€æ´ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå½¢çŠ¶å’Œç»è¿‡patch_embeddingåçš„è¾“å‡ºxç›¸åŒçš„å‚æ•°ï¼Œç„¶åç›´æ¥åŠ åˆ°xä¸Šï¼Œåœ¨è®­ç»ƒé˜¶æ®µä¸€èµ·è®­ç»ƒï¼Œæœ‰ç‚¹åƒåŠ äº†ä¸€ä¸ªå¯å­¦ä¹ çš„biasï¼ŒVITä¸­ä½¿ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚</li><li>ç›¸å¯¹ä½ç½®ç¼–ç ï¼šç»å¯¹ä½ç½®ç¼–ç æ˜¯åœ¨patch_embeddingä¹‹åï¼Œè®¡ç®—è‡ªæ³¨æ„åŠ›(Q,K,V)ä¹‹å‰ï¼Œè€Œç›¸å¯¹ä½ç½®ç¼–ç æ˜¯åœ¨è®¡ç®—è‡ªæ³¨æ„åŠ›çš„æ—¶å€™åŠ å…¥çš„ï¼Œå¦‚ä¸‹å¼</li></ul><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Attention</mtext><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>SoftMax</mtext><mo stretchy="false">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><mi>d</mi></msqrt></mfrac><mo>+</mo><mi>B</mi><mo stretchy="false">)</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">\text{Attention}(Q,K,V)=\text{SoftMax}(\frac{QK^T}{\sqrt{d}}+B)V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Attention</span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.448331em;vertical-align:-0.93em;"></span><span class="mord text"><span class="mord">SoftMax</span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183309999999999em;"><span style="top:-2.17778em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.93222em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">d</span></span></span><span style="top:-2.89222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.10777999999999999em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></p><p>åœ¨swin transformerä¸­ï¼Œå°†äºŒç»´ä½ç½®ä¿¡æ¯è½¬æ¢ä¸ºä¸€ç»´ä½ç½®ä¿¡æ¯ï¼Œç„¶åå»æ ¹æ®ç›¸å¯¹ä½ç½®åç§»è¡¨æŸ¥è¯¢å…·ä½“çš„å€¼ï¼Œä½ç½®åç§»è¡¨çš„å€¼æ˜¯è®­ç»ƒå‡ºæ¥çš„ï¼Œåœ¨æ–‡ç« ä¸­ï¼Œç›¸å¯¹ä½ç½®ç¼–ç æ•ˆæœå¥½äºç»å¯¹ä½ç½®ç¼–ç ã€‚å…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/qq_43733107/article/details/127077056">è¿™é‡Œ</a></p><blockquote><p>ä¸ºä»€ä¹ˆå¾€å¾€å°æ•°æ®é›†ä¸Šå·ç§¯æ•ˆæœå¥½äºtranformer?</p></blockquote><ul><li>åœ¨å°æ•°æ®é›†ä¸Šï¼Œç›¸æ¯”å·ç§¯transformerç¼ºå°‘å†…åœ¨åç½®ï¼Œå› æ­¤éœ€è¦åŠ å…¥ç›¸å¯¹ä½ç½®ç¼–ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œå¯¹äºç‰¹å¤§æ•°æ®é›†ï¼Œtransformerå°±å¯ä»¥å­¦ä¹ åˆ°å·ç§¯çš„å†…åœ¨åç½®ï¼Œå³è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨å°æ•°æ®é›†ä¸Štransformerçš„æ•ˆæœä¸å¦‚å·ç§¯ï¼Œè€Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼Œtransformeræ•ˆæœä¼˜äºå·ç§¯ã€‚</li></ul><h2 id="è‡ªæ³¨æ„åŠ›å’Œæ³¨æ„åŠ›çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#è‡ªæ³¨æ„åŠ›å’Œæ³¨æ„åŠ›çš„åŒºåˆ«"></a> è‡ªæ³¨æ„åŠ›å’Œæ³¨æ„åŠ›çš„åŒºåˆ«</h2><p>æ³¨æ„åŠ›æœºåˆ¶çš„æŸ¥è¯¢å’Œé”®æ˜¯ä¸åŒæ¥æºçš„ï¼Œè€Œè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„æŸ¥è¯¢å’Œé”®åˆ™éƒ½æ˜¯æ¥è‡ªäºåŒä¸€ç»„çš„å…ƒç´ ï¼Œå¦‚å¯¹äºä¸€å¼ å›¾ç‰‡ï¼Œqå’Œkéƒ½æ¥è‡ªäºè¿™å¼ å›¾ç‰‡çš„patchæˆ–è€…ç‰¹å¾ã€‚</p><blockquote><p>ä¸ªäººå¯¹äºDETRçš„decoderä¸­çš„qï¼Œk,vçš„ç†è§£</p></blockquote><p>queryæ˜¯æ¯å¼ å›¾è®¾ç½®çš„é¢„æµ‹çš„proposalsçš„æ•°é‡ï¼Œä¾‹å¦‚ä¸€å¼ å›¾çš„gtæœ‰20ä¸ªbboxï¼Œç„¶åqueryä¸º100ï¼Œé‚£ä¹ˆç½‘ç»œä¼šäº§ç”Ÿ100ä¸ªproposalsï¼Œç„¶åç”¨åŒˆç‰™åˆ©ç®—æ³•æ±‚å¾—100ä¸ªqueryå’Œ20ä¸ªbboxçš„æœ€ä¼˜åŒ¹é…</p><p>å¯¹äºdecoderçš„å¤šå¤´æ³¨æ„åŠ›ï¼Œæˆ‘ç†è§£çš„æ˜¯kvæ¥è‡ªencoderæ˜¯å› ä¸ºencoderä¸­å°†å›¾åƒçš„ç‰¹å¾è¿›è¡Œäº†ç¼–ç ï¼Œç„¶åç”±äºéœ€è¦äº§ç”Ÿ100ä¸ªproposalsï¼Œæ‰€ä»¥å°±ç”¨å¤–éƒ¨çš„qæ¥è®¡ç®—encoderäº§ç”Ÿçš„kçš„æƒé‡ä¿¡æ¯ï¼Œæ¯”å¦‚qk^T-&gt;[16,100,32]*[16,32,576]=[16,100,576]ï¼Œè¿™é‡Œ[100,576]ä»£è¡¨äº†100ä¸ªqueryåœ¨576ä¸ªç‰¹å¾ä¸Šçš„æƒé‡æˆ–è€…ç›¸ä¼¼åº¦ä¿¡æ¯ï¼Œç„¶åä¹˜v[16,576,32]ï¼Œè¾“å‡ºæ˜¯[16,100,32]ï¼Œreshapeä¸º[100,2,256]ï¼Œencoderçš„è¾“å‡º[576,2,256]ç»è¿‡decoderåæ˜ å°„ä¸º[100,2,256]ï¼Œå› æ­¤åŠ å…¥çš„queryå¯èƒ½æ˜¯ä¸ºäº†å­¦ä¹ encoderçš„è¾“å‡ºä¸­çš„ç‰¹å¾ä¿¡æ¯ï¼Œç„¶åå°†ç‰¹å¾çš„ç»´åº¦é™åˆ°100ï¼Œç„¶åä»è¿™100ä¸ªproposalsä¸­å–åŒ¹é…æœ€ä½³çš„gtã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¹¶æŸ¥é›†</title>
    <link href="/2022/08/26/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    <url>/2022/08/26/%E5%B9%B6%E6%9F%A5%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%B9%B6%E6%9F%A5%E9%9B%86">å¹¶æŸ¥é›†</a></li><li><a href="#%E9%80%92%E5%BD%92%E7%9A%84%E6%9F%A5%E6%89%BE%E8%8A%82%E7%82%B9%E7%9A%84%E7%A5%96%E5%85%88">é€’å½’çš„æŸ¥æ‰¾èŠ‚ç‚¹çš„ç¥–å…ˆ</a></li><li><a href="#%E4%BE%8B%E9%A2%98">ä¾‹é¢˜</a></li></ul><!-- /TOC --><h3 id="å¹¶æŸ¥é›†"><a class="markdownIt-Anchor" href="#å¹¶æŸ¥é›†"></a> å¹¶æŸ¥é›†</h3><blockquote><p>é€šè¿‡ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜å„ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆï¼Œæ‰€æœ‰è¿é€šçš„èŠ‚ç‚¹çš„ç¥–å…ˆç›¸åŒï¼Œå¸¸ç”¨äºè§£å†³æœ€å°ç”Ÿæˆæ ‘ï¼Œå›¾çš„è¿é€šæ€§ç­‰é—®é¢˜</p></blockquote><h3 id="é€’å½’çš„æŸ¥æ‰¾èŠ‚ç‚¹çš„ç¥–å…ˆ"><a class="markdownIt-Anchor" href="#é€’å½’çš„æŸ¥æ‰¾èŠ‚ç‚¹çš„ç¥–å…ˆ"></a> é€’å½’çš„æŸ¥æ‰¾èŠ‚ç‚¹çš„ç¥–å…ˆ</h3><p>é¦–å…ˆå‡è®¾æœ‰<code>N</code>ä¸ªèŠ‚ç‚¹ï¼Œå®šä¹‰ä¸€ä¸ªæ•°ç»„<code>vset[N]</code>è®°å½•æ‰€æœ‰èŠ‚ç‚¹çš„ç¥–å…ˆï¼Œ<code>vset[N]åˆå§‹åŒ–ä¸º-1</code></p><p>å®šä¹‰ä¸€ä¸ª<code>find</code>å‡½æ•°æ¥æŸ¥æ‰¾ç¥–å…ˆ</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">int</span> <span class="hljs-keyword">find</span>(<span class="hljs-keyword">int</span> a)<br>&#123;<br>    <span class="hljs-keyword">if</span>(vset[a]==-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        vset[a]=<span class="hljs-keyword">find</span>(vset[a]);<br>        <span class="hljs-keyword">return</span> vset[a];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h3><p>æœ‰<code>n</code>æ¡é“è·¯ï¼Œ<code>m</code>ä¸ªæ‘åº„,è®¡ç®—å‡ºä½¿æ‰€æœ‰æ‘åº„è¿é€šçš„æœ€ä½æˆæœ¬</p><p>è¾“å…¥n,mï¼Œç„¶åè¾“å…¥nè¡Œï¼Œæ¯ä¸€è¡Œè¾“å…¥u,v,wè¡¨ç¤ºä¸¤ä¸ªæ‘åº„çš„ç¼–å·å’Œé“è·¯æˆæœ¬</p><p>è¾“å‡ºä½¿æ‰€æœ‰æ‘åº„è¿é€šçš„æœ€ä½æˆæœ¬</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">3<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1000</span>;<br><span class="hljs-keyword">typedef</span> vector&lt;<span class="hljs-type">int</span>&gt; vi;<br><span class="hljs-type">int</span> vset[<span class="hljs-number">1000</span>];<br><span class="hljs-function">vector&lt;vi&gt; <span class="hljs-title">e</span><span class="hljs-params">(<span class="hljs-number">1000</span>,vi(<span class="hljs-number">3</span>))</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(vset[a]==<span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        vset[a]=<span class="hljs-built_in">find</span>(vset[a]);<br>        <span class="hljs-keyword">return</span> vset[a];<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n,m;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-built_in">memset</span>(vset,<span class="hljs-number">-1</span>,<span class="hljs-built_in">sizeof</span>(vset));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>    &#123;<br>        cin&gt;&gt;e[i][<span class="hljs-number">0</span>]&gt;&gt;e[i][<span class="hljs-number">1</span>]&gt;&gt;e[i][<span class="hljs-number">2</span>];<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(e.<span class="hljs-built_in">begin</span>(),e.<span class="hljs-built_in">end</span>(),[](vi a,vi b)&#123;<br>        <span class="hljs-keyword">return</span> a[<span class="hljs-number">2</span>]&lt;b[<span class="hljs-number">2</span>];<br>    &#125;);<br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>,cnt=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(vi&amp; t: e)<br>    &#123;<br>        <span class="hljs-type">int</span> x=<span class="hljs-built_in">find</span>(t[<span class="hljs-number">0</span>]);<br>        <span class="hljs-type">int</span> y=<span class="hljs-built_in">find</span>(t[<span class="hljs-number">1</span>]);<br>        <span class="hljs-keyword">if</span>(x!=y)<br>        &#123;<br>            ++cnt;<br>            ans+=t[<span class="hljs-number">2</span>];<br>            vset[x]=y;<br>            <span class="hljs-keyword">if</span>(cnt==n<span class="hljs-number">-1</span>)<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;ans&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é‡æ’é“¾è¡¨</title>
    <link href="/2022/08/25/%E9%87%8D%E6%8E%92%E9%93%BE%E8%A1%A8/"/>
    <url>/2022/08/25/%E9%87%8D%E6%8E%92%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E9%87%8D%E6%8E%92%E9%93%BE%E8%A1%A8">é‡æ’é“¾è¡¨</a></li><li><a href="#%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8">åè½¬é“¾è¡¨</a></li><li><a href="#%E5%90%88%E5%B9%B6%E9%93%BE%E8%A1%A8">åˆå¹¶é“¾è¡¨</a></li><li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li></ul><!-- /TOC --><h3 id="é‡æ’é“¾è¡¨"><a class="markdownIt-Anchor" href="#é‡æ’é“¾è¡¨"></a> é‡æ’é“¾è¡¨</h3><blockquote><p>æ¥æºäºleetcodeä¸Šçš„ä¸€é“é¢˜ <a href="https://leetcode.cn/problems/reorder-list/">é‡æ’é“¾è¡¨</a>ï¼Œå› ä¸ºè¿™åˆ°é¢˜æ¶‰åŠåˆ°è®¸å¤šé“¾è¡¨çš„çŸ¥è¯†ï¼Œæ­£å¥½æ‹¿æ¥å¤ä¹ ä¸€ä¸‹</p></blockquote><p>é¢˜ç›®æè¿°</p><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨ L çš„å¤´èŠ‚ç‚¹ head ï¼Œå•é“¾è¡¨ L è¡¨ç¤ºä¸ºï¼š<br /><code>L0 â†’ L1 â†’ â€¦ â†’ Ln - 1 â†’ Ln</code></p><p>è¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š</p><p><code>L0 â†’ Ln â†’ L1 â†’ Ln - 1 â†’ L2 â†’ Ln - 2 â†’ â€¦</code></p><h3 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h3><ul><li>å…ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹</li><li>å°†é“¾è¡¨ååŠæ®µåè½¬</li><li>å°†å‰åä¸¤ç«¯é‡æ–°åˆå¹¶</li></ul><h3 id="æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹å¿«æ…¢æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹å¿«æ…¢æŒ‡é’ˆ"></a> æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</h3><blockquote><p>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œå…¶ä¸­å¿«çš„æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨2æ¬¡ï¼Œæ…¢æŒ‡é’ˆç§»åŠ¨ä¸€æ¬¡ï¼Œå½“å¿«æŒ‡é’ˆåˆ°è¾¾å°¾éƒ¨ï¼Œæ…¢æŒ‡é’ˆçš„ä½ç½®å°±æ˜¯ä¸­ç‚¹</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs autoit">ListNode* middleNode(ListNode* head) &#123;<br>        ListNode *low=head<span class="hljs-comment">;</span><br>        ListNode *fast=head<span class="hljs-comment">;</span><br>        //å¦‚æœæœ‰å¶æ•°ä¸ªèŠ‚ç‚¹ï¼Œä»¥ä¸‹æ¡ä»¶æ‰¾åˆ°çš„æ˜¯å³ä¾§ä¸­ç‚¹<br>        //å¦‚æœè¦æ‰¾å·¦ä¾§ä¸­ç‚¹ï¼Œæ”¹ä¸ºï¼šfast-&gt;<span class="hljs-keyword">next</span>!=<span class="hljs-literal">NULL</span>&amp;&amp;fast-&gt;<span class="hljs-keyword">next</span>-&gt;<span class="hljs-keyword">next</span>!=<span class="hljs-literal">NULL</span>å³å¯<br>        <span class="hljs-keyword">while</span>(fast!=<span class="hljs-literal">NULL</span>&amp;&amp;fast-&gt;<span class="hljs-keyword">next</span>!=<span class="hljs-literal">NULL</span>)<br>        &#123;<br>            low=low-&gt;<span class="hljs-keyword">next</span><span class="hljs-comment">;</span><br>            fast=fast-&gt;<span class="hljs-keyword">next</span>-&gt;<span class="hljs-keyword">next</span><span class="hljs-comment">;</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> low<span class="hljs-comment">;</span><br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="åè½¬é“¾è¡¨"><a class="markdownIt-Anchor" href="#åè½¬é“¾è¡¨"></a> åè½¬é“¾è¡¨</h3><blockquote><p>å…¶å®åè½¬é“¾è¡¨å¯ä»¥ç”¨çº¿æ€§è¡¨åšï¼Œæ—¶é—´å¤æ‚åº¦å·®ä¸å¤šï¼Œä½†è¿™é‡Œè¿˜æ˜¯å›å½’é“¾è¡¨æ“ä½œ</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ListNode* reverseList(ListNode* head) &#123;<br>        ListNode* <span class="hljs-attribute">pre</span>=<span class="hljs-literal">NULL</span>;<br>        ListNode* <span class="hljs-attribute">l</span>=head;<br>        <span class="hljs-keyword">while</span>(l!=<span class="hljs-literal">NULL</span>)<br>        &#123;<br>            ListNode* <span class="hljs-attribute">tmp</span>=l-&gt;next;<br>            l-&gt;<span class="hljs-attribute">next</span>=pre;<br>            <span class="hljs-attribute">pre</span>=l;<br>            <span class="hljs-attribute">l</span>=tmp;<br>        &#125;<br>        return pre;<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="åˆå¹¶é“¾è¡¨"><a class="markdownIt-Anchor" href="#åˆå¹¶é“¾è¡¨"></a> åˆå¹¶é“¾è¡¨</h3><blockquote><p>å°†l1å’Œl2äº¤é”™åˆå¹¶</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros">void merge(ListNode* l1,ListNode* l2)<br>&#123;<br>    <span class="hljs-keyword">while</span>(l1!=<span class="hljs-literal">NULL</span>&amp;&amp;l2!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        ListNode* <span class="hljs-attribute">l1t</span>=l1-&gt;next;<br>        ListNode* <span class="hljs-attribute">l2t</span>=l2-&gt;next;<br>        l1-&gt;<span class="hljs-attribute">next</span>=l2;<br>        <span class="hljs-attribute">l1</span>=l1t;<br>        l2-&gt;<span class="hljs-attribute">next</span>=l1;<br>        <span class="hljs-attribute">l2</span>=l2t;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é¢˜è§£"><a class="markdownIt-Anchor" href="#é¢˜è§£"></a> é¢˜è§£</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs routeros">void reorderList(ListNode* head) &#123;<br>    ListNode* <span class="hljs-attribute">mid</span>=middleNode(head);<br>    ListNode* <span class="hljs-attribute">l1</span>=head;<br>    ListNode* <span class="hljs-attribute">l2</span>=mid-&gt;next;<br>    mid-&gt;<span class="hljs-attribute">next</span>=<span class="hljs-literal">NULL</span>;<br>    ListNode* <span class="hljs-attribute">r</span>=reverseList(l2);<br>    merge(l1,r);<br>&#125;<br>ListNode* reverseList(ListNode* head) &#123;<br>    ListNode* <span class="hljs-attribute">pre</span>=<span class="hljs-literal">NULL</span>;<br>    ListNode* <span class="hljs-attribute">l</span>=head;<br>    <span class="hljs-keyword">while</span>(l!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        ListNode* <span class="hljs-attribute">tmp</span>=l-&gt;next;<br>        l-&gt;<span class="hljs-attribute">next</span>=pre;<br>        <span class="hljs-attribute">pre</span>=l;<br>        <span class="hljs-attribute">l</span>=tmp;<br>    &#125;<br>    return pre;<br>&#125;<br>ListNode* middleNode(ListNode* head) &#123;<br>    ListNode *<span class="hljs-attribute">low</span>=head;<br>    ListNode <span class="hljs-number">*fa</span><span class="hljs-attribute">st</span>=head;<br>    <span class="hljs-keyword">while</span>(fast-&gt;next!=<span class="hljs-literal">NULL</span>&amp;&amp;fast-&gt;next-&gt;next!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-attribute">low</span>=low-&gt;next;<br>        <span class="hljs-attribute">fast</span>=fast-&gt;next-&gt;next;<br>    &#125;<br>    return low;<br>&#125;<br>void merge(ListNode* l1,ListNode* l2)<br>&#123;<br>    <br>    <span class="hljs-keyword">while</span>(l1!=<span class="hljs-literal">NULL</span>&amp;&amp;l2!=<span class="hljs-literal">NULL</span>)<br>    &#123;<br>        ListNode* <span class="hljs-attribute">l1t</span>=l1-&gt;next;<br>        ListNode* <span class="hljs-attribute">l2t</span>=l2-&gt;next;<br>        l1-&gt;<span class="hljs-attribute">next</span>=l2;<br>        <span class="hljs-attribute">l1</span>=l1t;<br>        l2-&gt;<span class="hljs-attribute">next</span>=l1;<br>        <span class="hljs-attribute">l2</span>=l2t;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å·®åˆ†ä¸å‰ç¼€å’Œ</title>
    <link href="/2022/08/24/%E5%B7%AE%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    <url>/2022/08/24/%E5%B7%AE%E5%88%86%E4%B8%8E%E5%89%8D%E7%BC%80%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E5%89%8D%E7%BC%80%E5%92%8C">å‰ç¼€å’Œ</a></li><li><a href="#%E4%B8%80%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C">ä¸€ç»´å‰ç¼€å’Œ</a></li><li><a href="#%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C">äºŒç»´å‰ç¼€å’Œ</a></li><li><a href="#%E4%BE%8B%E9%A2%98">ä¾‹é¢˜</a></li><li><a href="#%E5%B7%AE%E5%88%86">å·®åˆ†</a></li><li><a href="#%E4%B8%80%E7%BB%B4%E5%B7%AE%E5%88%86">ä¸€ç»´å·®åˆ†</a></li><li><a href="#%E4%BE%8B%E9%A2%98-1">ä¾‹é¢˜</a></li><li><a href="#%E4%BA%8C%E7%BB%B4%E5%B7%AE%E5%88%86">äºŒç»´å·®åˆ†</a></li><li><a href="#%E4%BE%8B%E9%A2%98-2">ä¾‹é¢˜</a></li></ul><!-- /TOC --><h3 id="å‰ç¼€å’Œ"><a class="markdownIt-Anchor" href="#å‰ç¼€å’Œ"></a> å‰ç¼€å’Œ</h3><blockquote><p>å‰ç¼€å’ŒæŒ‡çš„æ˜¯åºåˆ—çš„å‰né¡¹å’Œ</p></blockquote><h3 id="ä¸€ç»´å‰ç¼€å’Œ"><a class="markdownIt-Anchor" href="#ä¸€ç»´å‰ç¼€å’Œ"></a> ä¸€ç»´å‰ç¼€å’Œ</h3><p>å…ˆçœ‹ä¸€ä¸ªä¾‹é¢˜ï¼š<br />è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°åºåˆ—ã€‚æ¥ä¸‹æ¥å†è¾“å…¥mä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®è¾“å…¥ä¸€å¯¹l, rã€‚å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºåŸåºåˆ—ä¸­ä»ç¬¬lä¸ªæ•°åˆ°ç¬¬rä¸ªæ•°çš„å’Œã€‚<br />å¦‚æœä½¿ç”¨æš´åŠ›æšä¸¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n*m)</code>,ä½†æ˜¯ä½¿ç”¨å‰ç¼€å’Œçš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦å¯é™ä¸º <code>O(n)</code><br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">3<br>6<br>10<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>;<br><span class="hljs-type">int</span> a[N]; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n,m,l,r;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>cin&gt;&gt;a[i];<br>a[i]+=a[i<span class="hljs-number">-1</span>];<br>&#125;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;l&gt;&gt;r;<br>cout&lt;&lt;a[r]-a[l<span class="hljs-number">-1</span>]&lt;&lt;endl;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒç»´å‰ç¼€å’Œ"><a class="markdownIt-Anchor" href="#äºŒç»´å‰ç¼€å’Œ"></a> äºŒç»´å‰ç¼€å’Œ</h3><p>æ¯ä¸€ä¸ªå…ƒç´ <code>a[i][j]</code>è¡¨ç¤ºå·¦ä¸Šè§’å’Œç¬¬<code>i</code>è¡Œï¼Œç¬¬<code>j</code>åˆ—å›´æˆçš„å…ƒç´ ä¹‹å’Œ</p><p>æ›´æ–°æ–¹å¼ï¼š <code>a[i][j]+=a[i-1][j]+a[i][j-1]-a[i-1][j-1]</code></p><h3 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜</h3><p>è¾“å…¥ä¸€ä¸ªnè¡Œmåˆ—çš„æ•´æ•°çŸ©é˜µï¼Œå†è¾“å…¥qä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®åŒ…å«å››ä¸ªæ•´æ•°x1, y1, x2, y2ï¼Œè¡¨ç¤ºä¸€ä¸ªå­çŸ©é˜µçš„å·¦ä¸Šè§’åæ ‡å’Œå³ä¸‹è§’åæ ‡ã€‚<br />å¯¹äºæ¯ä¸ªè¯¢é—®è¾“å‡ºå­çŸ©é˜µä¸­æ‰€æœ‰æ•°çš„å’Œ</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">4</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">7</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">6</span> <span class="hljs-number">2</span> <span class="hljs-number">8</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">17<br>27<br>21<br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs inform7">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>const int N=1e3;<br>int a<span class="hljs-comment">[N]</span><span class="hljs-comment">[N]</span>; <br>int main()<br>&#123;<br>int n,m,q;<br>int x1,y1,x2,y2;<br>cin&gt;&gt;n&gt;&gt;m&gt;&gt;q;<br>for(int i=1;i&lt;=n;++i)<br>&#123;<br>for(int j=1;j&lt;=m;++j)<br>&#123;<br>cin&gt;&gt;a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>;<br>a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span>+=a<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span>+a<span class="hljs-comment">[i]</span><span class="hljs-comment">[j-1]</span>-a<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j-1]</span>;<br>&#125;<br>&#125;<br>while(q--)<br>&#123;<br>cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2;<br>cout&lt;&lt;a<span class="hljs-comment">[x2]</span><span class="hljs-comment">[y2]</span>-a<span class="hljs-comment">[x1-1]</span><span class="hljs-comment">[y2]</span>-a<span class="hljs-comment">[x2]</span><span class="hljs-comment">[y1-1]</span>+a<span class="hljs-comment">[x1-1]</span><span class="hljs-comment">[y1-1]</span>&lt;&lt;endl;<br>&#125;<br>return 0;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å·®åˆ†"><a class="markdownIt-Anchor" href="#å·®åˆ†"></a> å·®åˆ†</h3><blockquote><p>å¯ä»¥çœ‹ä½œå‰ç¼€å’Œçš„é€†è¿ç®—</p></blockquote><h3 id="ä¸€ç»´å·®åˆ†"><a class="markdownIt-Anchor" href="#ä¸€ç»´å·®åˆ†"></a> ä¸€ç»´å·®åˆ†</h3><p>å¸¸ç”¨äºç»™æ•°ç»„çš„æŸä¸ªåŒºé—´æ®µ<code>[l,r]</code>åŠ ä¸ŠæŸä¸ªæ•°<code>c</code>ï¼Œå¯ä»¥å‡å°æ—¶é—´å¤æ‚åº¦</p><ul><li>å…ˆæ„é€ å·®åˆ†æ•°ç»„ï¼š<code>b[i]=a[i]-a[i-1]</code></li><li>æ„é€ å¥½ä¹‹å <code>b[l]+=c</code>,<code>b[r+1]-=c</code></li><li>ç„¶åæ ¹æ®<code>b[i]+=b[i-1]</code>è®¡ç®—å‰ç¼€å’Œæ•°ç»„ï¼Œå°±æ˜¯æœ€ç»ˆç­”æ¡ˆ</li></ul><h3 id="ä¾‹é¢˜-2"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜-2"></a> ä¾‹é¢˜</h3><p>è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°åºåˆ—ã€‚<br />æ¥ä¸‹æ¥è¾“å…¥mä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåŒ…å«ä¸‰ä¸ªæ•´æ•°l, r, cï¼Œè¡¨ç¤ºå°†åºåˆ—ä¸­[l, r]ä¹‹é—´çš„æ¯ä¸ªæ•°åŠ ä¸Šcã€‚<br />è¯·ä½ è¾“å‡ºè¿›è¡Œå®Œæ‰€æœ‰æ“ä½œåçš„åºåˆ—ã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">6 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">5</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">6</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e3</span>;<br><span class="hljs-type">int</span> a[N],b[N]; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n,m,l,r,c;<br>cin&gt;&gt;n&gt;&gt;m;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>cin&gt;&gt;a[i];<br>b[i]=a[i]-a[i<span class="hljs-number">-1</span>];<br>&#125;<br><span class="hljs-keyword">while</span>(m--)<br>&#123;<br>cin&gt;&gt;l&gt;&gt;r&gt;&gt;c;<br>b[l]+=c;<br>b[r+<span class="hljs-number">1</span>]-=c;<br>&#125;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>b[i]+=b[i<span class="hljs-number">-1</span>];<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cout&lt;&lt;b[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒç»´å·®åˆ†"><a class="markdownIt-Anchor" href="#äºŒç»´å·®åˆ†"></a> äºŒç»´å·®åˆ†</h3><p>å¸¸ç”¨äºç»™æŸä¸ªå­çŸ©é˜µçš„æ¯ä¸ªå…ƒç´ åŠ ä¸Š c</p><ul><li>äºŒç»´å·®åˆ†æ•°ç»„çš„æ„é€ ï¼š<br /><code>b[i][j]=a[i][j]-a[i-1][j]-a[i][j-1]+a[i-1][j-1]</code></li><li>ä¿®æ”¹å·®åˆ†æ•°ç»„ï¼š  <figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs inform7">b<span class="hljs-comment">[x1]</span><span class="hljs-comment">[y1]</span>+=c;<br>b<span class="hljs-comment">[x1]</span><span class="hljs-comment">[y2+1]</span>-=c;<br>b<span class="hljs-comment">[x2+1]</span><span class="hljs-comment">[y1]</span>-=c;<br>b<span class="hljs-comment">[x2+1]</span><span class="hljs-comment">[y2+1]</span>+=c;<br></code></pre></td></tr></table></figure></li><li>ç”Ÿæˆå‰ç¼€å’Œæ•°ç»„ï¼š<br /><code>b[i][j]+=b[i-1][j]+b[i][j-1]-b[i-1][j-1];</code></li></ul><h3 id="ä¾‹é¢˜-3"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜-3"></a> ä¾‹é¢˜</h3><p>è¾“å…¥ä¸€ä¸ªnè¡Œmåˆ—çš„æ•´æ•°çŸ©é˜µï¼Œå†è¾“å…¥qä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåŒ…å«äº”ä¸ªæ•´æ•°x1, y1, x2, y2, cï¼Œå…¶ä¸­(x1, y1)å’Œ(x2, y2)è¡¨ç¤ºä¸€ä¸ªå­çŸ©é˜µçš„å·¦ä¸Šè§’åæ ‡å’Œå³ä¸‹è§’åæ ‡ã€‚<br />æ¯ä¸ªæ“ä½œéƒ½è¦å°†é€‰ä¸­çš„å­çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ çš„å€¼åŠ ä¸Šcã€‚<br />è¯·ä½ å°†è¿›è¡Œå®Œæ‰€æœ‰æ“ä½œåçš„çŸ©é˜µè¾“å‡ºã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">4</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs prolog">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>const int <span class="hljs-symbol">N</span>=<span class="hljs-number">1e3</span>;<br>int a[<span class="hljs-symbol">N</span>][<span class="hljs-symbol">N</span>],b[<span class="hljs-symbol">N</span>][<span class="hljs-symbol">N</span>]; <br>int main()<br>&#123;<br>int n,m,q;<br>int x1,y1,x2,y2,c;<br>cin&gt;&gt;n&gt;&gt;m&gt;&gt;q;<br>for(int i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>for(int j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>&#123;<br>cin&gt;&gt;a[i][j];<br>b[i][j]=a[i][j]-a[i<span class="hljs-number">-1</span>][j]-a[i][j<span class="hljs-number">-1</span>]+a[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>];<br>&#125;<br>&#125;<br>while(q--)<br>&#123;<br>cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2&gt;&gt;c;<br>b[x1][y1]+=c;<br>b[x1][y2+<span class="hljs-number">1</span>]-=c;<br>b[x2+<span class="hljs-number">1</span>][y1]-=c;<br>b[x2+<span class="hljs-number">1</span>][y2+<span class="hljs-number">1</span>]+=c;<br>&#125;<br>for(int i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>for(int j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>b[i][j]+=b[i<span class="hljs-number">-1</span>][j]+b[i][j<span class="hljs-number">-1</span>]-b[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>];<br>&#125;<br>for(int i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br>for(int j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>cout&lt;&lt;b[i][j]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>cout&lt;&lt;endl;<br>&#125;<br>return <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¿«é€Ÿå¹‚çŸ©é˜µå¹‚</title>
    <link href="/2022/08/23/%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9F%A9%E9%98%B5%E5%B9%82/"/>
    <url>/2022/08/23/%E5%BF%AB%E9%80%9F%E5%B9%82%E7%9F%A9%E9%98%B5%E5%B9%82/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BE%8B1-%E5%BF%AB%E9%80%9F%E5%B9%82">ä¾‹1 å¿«é€Ÿå¹‚</a></li><li><a href="#%E4%BE%8B2-%E7%9F%A9%E9%98%B5%E5%B9%82">ä¾‹2 çŸ©é˜µå¹‚</a></li></ul><!-- /TOC --><blockquote><p><strong>å¿«é€Ÿå¹‚</strong> å¿«é€Ÿå¹‚å¸¸ç”¨äºè®¡ç®—æŒ‡æ•°éå¸¸å¤§çš„å¹‚ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯æ¯ä¸€æ­¥éƒ½æŠŠæŒ‡æ•°åˆ†æˆä¸¤åŠï¼Œè€Œç›¸åº”çš„åº•æ•°åšå¹³æ–¹è¿ç®—ã€‚è¿™æ ·ä¸ä»…èƒ½æŠŠéå¸¸å¤§çš„æŒ‡æ•°ç»™ä¸æ–­å˜å°ï¼Œæ‰€éœ€è¦æ‰§è¡Œçš„å¾ªç¯æ¬¡æ•°ä¹Ÿå˜å°ï¼Œè€Œæœ€åè¡¨ç¤ºçš„ç»“æœå´ä¸€ç›´ä¸ä¼šå˜ã€‚</p></blockquote><p><em>ç›´æ¥çœ‹ä¾‹é¢˜</em></p><h3 id="ä¾‹1-å¿«é€Ÿå¹‚"><a class="markdownIt-Anchor" href="#ä¾‹1-å¿«é€Ÿå¹‚"></a> ä¾‹1 å¿«é€Ÿå¹‚</h3><p>è¾“å…¥ä¸‰ä¸ªæ•°å­—a,b,c,è¾“å‡º a^b <strong>mod</strong> c<br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">10</span> <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a,b,c;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ksm</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> ans=<span class="hljs-number">1</span>;<br>a=a%c;<br><span class="hljs-keyword">while</span>(b&gt;<span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-keyword">if</span>(b%<span class="hljs-number">2</span>)<br>ans=(ans*a)%c;<br>a=(a*a)%c;<br>b/=<span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br>cout&lt;&lt;<span class="hljs-built_in">ksm</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¾‹2-çŸ©é˜µå¹‚"><a class="markdownIt-Anchor" href="#ä¾‹2-çŸ©é˜µå¹‚"></a> ä¾‹2 çŸ©é˜µå¹‚</h3><p>æè¿°<br />ç»™å®šä¸€ä¸ªn*nçš„çŸ©é˜µï¼Œè¾“å‡ºçŸ©é˜µçš„kæ¬¡æ–¹</p><p>è¾“å…¥æè¿°<br />æœ‰å¤šç»„è¾“å…¥ï¼Œç¬¬ä¸€è¡Œè¾“å…¥nå’Œk<br />åé¢nè¡Œè¾“å…¥çŸ©é˜µå…ƒç´ <br />2&lt;=n&lt;=10,1&lt;=k&lt;=5<br />è¾“å‡ºæè¿°<br />æ¯ç»„è¾“å…¥è¾“å‡ºçŸ©é˜µçš„kæ¬¡æ–¹<br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">8</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">8</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">3</span> <span class="hljs-number">0</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">5</span> <span class="hljs-number">7</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">8 </span><span class="hljs-number">9</span> <span class="hljs-number">8</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">9 </span><span class="hljs-number">6</span> <span class="hljs-number">1</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">153 </span><span class="hljs-number">96</span><br><span class="hljs-symbol">108 </span><span class="hljs-number">81</span><br><span class="hljs-symbol">1216 </span><span class="hljs-number">1248</span> <span class="hljs-number">708</span><br><span class="hljs-symbol">1089 </span><span class="hljs-number">927</span> <span class="hljs-number">504</span><br><span class="hljs-symbol">1161 </span><span class="hljs-number">1151</span> <span class="hljs-number">739</span><br><span class="hljs-symbol">47 </span><span class="hljs-number">29</span> <span class="hljs-number">41</span> <span class="hljs-number">22</span> <span class="hljs-number">16</span><br><span class="hljs-symbol">147 </span><span class="hljs-number">103</span> <span class="hljs-number">73</span> <span class="hljs-number">116</span> <span class="hljs-number">94</span><br><span class="hljs-symbol">162 </span><span class="hljs-number">108</span> <span class="hljs-number">153</span> <span class="hljs-number">168</span> <span class="hljs-number">126</span><br><span class="hljs-symbol">163 </span><span class="hljs-number">67</span> <span class="hljs-number">112</span> <span class="hljs-number">158</span> <span class="hljs-number">122</span><br><span class="hljs-symbol">152 </span><span class="hljs-number">93</span> <span class="hljs-number">93</span> <span class="hljs-number">111</span> <span class="hljs-number">97</span><br></code></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">std</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title">M</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">int</span> row;<br>    <span class="hljs-built_in">int</span> col;<br>    <span class="hljs-built_in">int</span> m[<span class="hljs-number">11</span>][<span class="hljs-number">11</span>];<br>    M(<span class="hljs-built_in">int</span> r,<span class="hljs-built_in">int</span> c):row(r),col(c)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;row;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;col;++j)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(i==j)<br>                    m[i][j]=<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">else</span><br>                    m[i][j]=<span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;      <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">input</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;row;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;col;++j)<br>                cin&gt;&gt;m[i][j];<br>        &#125; <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;row;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;col;++j)<br>                cout&lt;&lt;m[i][j]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>            cout&lt;&lt;endl;<br>        &#125;<br>    &#125;<br>    M <span class="hljs-keyword">operator</span>* (<span class="hljs-keyword">const</span> M&amp; t) <span class="hljs-keyword">const</span><br>    &#123;<br>        <span class="hljs-function">M <span class="hljs-title">ans</span>(<span class="hljs-params">row,t.col</span>)</span>;<br>        memset(ans.m,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(ans.m));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;row;++i)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;t.col;++j)<br>            &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> k=<span class="hljs-number">0</span>;k&lt;col;++k)<br>                &#123;<br>                    ans.m[i][j]+=m[i][k]*t.m[k][j];<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br>&#125;;<br><span class="hljs-function">M <span class="hljs-title">ksm</span>(<span class="hljs-params">M a,<span class="hljs-built_in">int</span> k</span>)</span><br>&#123;<br>    <span class="hljs-function">M <span class="hljs-title">ans</span>(<span class="hljs-params">a.row,a.col</span>)</span>;<br>    <span class="hljs-keyword">while</span>(k&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(k%<span class="hljs-number">2</span>)<br>            ans=ans*a;<br>        a=a*a;<br>        k/=<span class="hljs-number">2</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans; <br>&#125;<br><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">main</span>()</span><br>&#123;<br>    <span class="hljs-built_in">int</span> n,k;<br>    <span class="hljs-keyword">while</span>(cin&gt;&gt;n&gt;&gt;k)<br>    &#123;<br>        <span class="hljs-function">M <span class="hljs-title">a</span>(<span class="hljs-params">n,n</span>)</span>;<br>        a.input();<br>        M ans=ksm(a,k);<br>        ans.output();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æœ€çŸ­è·¯</title>
    <link href="/2022/08/22/%E6%9C%80%E7%9F%AD%E8%B7%AF/"/>
    <url>/2022/08/22/%E6%9C%80%E7%9F%AD%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E4%BE%8B1-%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF-%E6%B4%9B%E8%B0%B7p4779">ä¾‹1 å•æºæœ€çŸ­è·¯ æ´›è°·p4779</a></li><li><a href="#spfa">SPFA</a></li><li><a href="#dijkstra%E6%99%AE%E9%80%9A%E7%89%88">Dijkstraæ™®é€šç‰ˆ</a></li><li><a href="#dijkstra%E5%A0%86%E4%BC%98%E5%8C%96%E7%89%88ac">Dijkstraå †ä¼˜åŒ–ç‰ˆ(AC)</a><ul><li><a href="#%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F%E5%AD%98%E5%9B%BE">é“¾å¼å‰å‘æ˜Ÿå­˜å›¾</a></li><li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li></ul></li><li><a href="#%E4%BE%8B2-%E6%9C%80%E5%A4%9A%E7%BB%8F%E8%BF%87k%E6%9D%A1%E8%BE%B9%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF">ä¾‹2 æœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯</a></li><li><a href="#bellmanford">Bellmanford</a></li><li><a href="#%E5%B9%B6%E6%9F%A5%E9%9B%86%E8%A7%A3%E6%9C%80%E7%9F%AD%E8%B7%AF">å¹¶æŸ¥é›†è§£æœ€çŸ­è·¯</a></li></ul><!-- /TOC --><h3 id="ä¾‹1-å•æºæœ€çŸ­è·¯-æ´›è°·p4779"><a class="markdownIt-Anchor" href="#ä¾‹1-å•æºæœ€çŸ­è·¯-æ´›è°·p4779"></a> ä¾‹1 å•æºæœ€çŸ­è·¯ æ´›è°·p4779</h3><p>é¢˜ç›®æè¿°</p><p>ç»™å®šä¸€ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç‚¹ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> æ¡æœ‰å‘è¾¹çš„å¸¦éè´Ÿæƒå›¾ï¼Œè¯·ä½ è®¡ç®—ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> å‡ºå‘ï¼Œåˆ°æ¯ä¸ªç‚¹çš„è·ç¦»ã€‚</p><p>æ•°æ®ä¿è¯ä½ èƒ½ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> å‡ºå‘åˆ°ä»»æ„ç‚¹ã€‚</p><p>è¾“å…¥æ ¼å¼</p><p>ç¬¬ä¸€è¡Œä¸ºä¸‰ä¸ªæ­£æ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo separator="true">,</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">n, m, s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">s</span></span></span></span>ã€‚<br />ç¬¬äºŒè¡Œèµ· <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªéè´Ÿæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i, v_i, w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¡¨ç¤ºä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æœ‰ä¸€æ¡æƒå€¼ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„æœ‰å‘è¾¹ã€‚</p><p>è¾“å‡ºæ ¼å¼</p><p>è¾“å‡ºä¸€è¡Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ªç©ºæ ¼åˆ†éš”çš„éè´Ÿæ•´æ•°ï¼Œè¡¨ç¤º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> åˆ°æ¯ä¸ªç‚¹çš„è·ç¦»ã€‚</p><p>æ ·ä¾‹è¾“å…¥</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">6</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">4</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>æ ·ä¾‹è¾“å‡º</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">0 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>æç¤º</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>n</mi><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq n \leq 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>ï¼›</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>m</mi><mo>â‰¤</mo><mn>2</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq m \leq 2\times 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>ï¼›</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">s = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼›</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><msub><mi>u</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>i</mi></msub><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \leq u_i, v_i\leq n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ï¼›</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‰¤</mo><msub><mi>w</mi><mi>i</mi></msub><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">0 \leq w_i \leq 10 ^ 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>,</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‰¤</mo><mo>âˆ‘</mo><msub><mi>w</mi><mi>i</mi></msub><mo>â‰¤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">0 \leq \sum w_i \leq 10 ^ 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><h3 id="spfa"><a class="markdownIt-Anchor" href="#spfa"></a> SPFA</h3><blockquote><p>æ­¤é¢˜ç”¨spfaä¼šè¶…æ—¶,è¿™é‡Œå†™çš„ä»£ç å¼±åŒ–äº†æ•°æ®èŒƒå›´ï¼Œå­˜å›¾ä¹Ÿç›´æ¥ç”¨äºŒç»´æ•°ç»„äº†ï¼Œä¸»è¦æ˜¯å¤ä¹ spfaçš„æ€è·¯</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,m,s;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e4</span>+<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> mp[N][N];<br><span class="hljs-type">int</span> dist[N];<br><span class="hljs-type">bool</span> vis[N]; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">memset</span>(mp,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(mp));<br><span class="hljs-built_in">memset</span>(dist,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dist));<br>cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;<br>dist[s]=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> u,v,w;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)<br>&#123;<br>cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br>mp[u][v]=w;<br>&#125;<br>queue&lt;<span class="hljs-type">int</span>&gt; q;<br>q.<span class="hljs-built_in">push</span>(s);<br><span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>&#123;<br><span class="hljs-type">int</span> t=q.<span class="hljs-built_in">front</span>();<br>q.<span class="hljs-built_in">pop</span>();<br>vis[t]=<span class="hljs-literal">false</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>&#123;<br><span class="hljs-keyword">if</span>(dist[i]&gt;dist[t]+mp[t][i])<br>&#123;<br>dist[i]=dist[t]+mp[t][i];<br><span class="hljs-keyword">if</span>(!vis[i])<br>&#123;<br>vis[i]=<span class="hljs-literal">true</span>;<br>q.<span class="hljs-built_in">push</span>(i);<br>&#125;<br>&#125;<br>&#125;<br>&#125; <br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cout&lt;&lt;dist[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>cout&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="dijkstraæ™®é€šç‰ˆ"><a class="markdownIt-Anchor" href="#dijkstraæ™®é€šç‰ˆ"></a> Dijkstraæ™®é€šç‰ˆ</h3><blockquote><p>æ­¤é¢˜ç”¨æ™®é€šDijkstraä¼šè¶…æ—¶,è¿™é‡Œå†™çš„ä»£ç å¼±åŒ–äº†æ•°æ®èŒƒå›´ï¼Œå­˜å›¾ä¹Ÿç›´æ¥ç”¨äºŒç»´æ•°ç»„äº†ï¼Œä¸»è¦æ˜¯å¤ä¹ djçš„æ€è·¯</p></blockquote><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs excel">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">n</span>,m,s;<br>const <span class="hljs-built_in">int</span> <span class="hljs-built_in">N</span>=<span class="hljs-number">1</span>e4+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">int</span> mp[<span class="hljs-built_in">N</span>][<span class="hljs-built_in">N</span>];<br><span class="hljs-built_in">int</span> dist[<span class="hljs-built_in">N</span>];<br>bool vis[<span class="hljs-built_in">N</span>]; <br><span class="hljs-built_in">int</span> main()<br>&#123;<br>memset(mp,<span class="hljs-number">0</span>x3f,sizeof(mp));<br>memset(dist,<span class="hljs-number">0</span>x3f,sizeof(dist));<br>cin&gt;&gt;<span class="hljs-built_in">n</span>&gt;&gt;m&gt;&gt;s;<br>dist[s]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">int</span> u,v,w;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)<br>&#123;<br>cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br>mp[u][v]=w;<br>&#125;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-built_in">n</span>;++i)<br>&#123;<br><span class="hljs-built_in">int</span> <span class="hljs-built_in">t</span>=-<span class="hljs-number">1</span>;<br>for(<span class="hljs-built_in">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-built_in">n</span>;++j)<br>&#123;<br><span class="hljs-built_in">if</span>(!vis[j]&amp;&amp;(<span class="hljs-built_in">t</span>==-<span class="hljs-number">1</span>||dist[<span class="hljs-built_in">t</span>]&gt;dist[j]))<br><span class="hljs-built_in">t</span>=j;<br>&#125;<br>vis[<span class="hljs-built_in">t</span>]=<span class="hljs-built_in">true</span>;<br>for(<span class="hljs-built_in">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-built_in">n</span>;++j)<br>&#123;<br>dist[j]=<span class="hljs-built_in">min</span>(dist[j],dist[<span class="hljs-built_in">t</span>]+mp[<span class="hljs-built_in">t</span>][j]);<br>&#125;<br>&#125;<br>for(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-built_in">n</span>;++i)<br>cout&lt;&lt;dist[i]&lt;&lt;&#x27; &#x27;;<br>cout&lt;&lt;endl;<br>    return <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="dijkstraå †ä¼˜åŒ–ç‰ˆac"><a class="markdownIt-Anchor" href="#dijkstraå †ä¼˜åŒ–ç‰ˆac"></a> Dijkstraå †ä¼˜åŒ–ç‰ˆ(AC)</h3><h4 id="é“¾å¼å‰å‘æ˜Ÿå­˜å›¾"><a class="markdownIt-Anchor" href="#é“¾å¼å‰å‘æ˜Ÿå­˜å›¾"></a> é“¾å¼å‰å‘æ˜Ÿå­˜å›¾</h4><p>é¢˜ç›®ä¸­ç»™çš„èŠ‚ç‚¹æ•°å¾ˆå¤šï¼Œå±äºç¨€ç–å›¾ï¼ŒäºŒç»´æ•°ç»„æ— æ³•å­˜å‚¨ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨<strong>é“¾å¼å‰å‘æ˜Ÿ</strong>å­˜å‚¨ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p>å®šä¹‰ä¸€ä¸ªæ•°ç»„<code>head[]</code>,<code>head[a]</code>è¡¨ç¤ºä»¥aä¸ºèµ·å§‹ç‚¹çš„æœ€åä¸€æ¡è¾¹çš„åºå·</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">cnt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span>ï¼šè¡¨ç¤ºè¾¹çš„åºå·</p><p>ç»“æ„ä½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>d</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">edge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span></span></span></span>ï¼Œå­˜å‚¨è¾¹</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">struct</span> edge<br>&#123;<br><span class="hljs-built_in">int</span> <span class="hljs-keyword">to</span>;<span class="hljs-comment">//è¿™æ¡è¾¹æŒ‡å‘çš„ç‚¹ </span><br><span class="hljs-built_in">int</span> next;<span class="hljs-comment">//è¿™æ¡è¾¹çš„é‚»è¾¹çš„åºå· </span><br><span class="hljs-built_in">int</span> w;<span class="hljs-comment">//è¿™æ¡è¾¹çš„æƒå€¼ </span><br>&#125;;<br></code></pre></td></tr></table></figure><p>åŠ è¾¹ï¼Œå¦‚æœæ˜¯æ— å‘å›¾ï¼Œäº¤æ¢uå’Œvå†addä¸€æ¬¡å³å¯</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs hsp">void add(<span class="hljs-keyword">int</span> u,<span class="hljs-keyword">int</span> v,<span class="hljs-keyword">int</span> w)<br>&#123;<br>++<span class="hljs-keyword">cnt</span><span class="hljs-comment">;</span><br>e[<span class="hljs-keyword">cnt</span>].to=v<span class="hljs-comment">;</span><br>e[<span class="hljs-keyword">cnt</span>].w=w<span class="hljs-comment">;</span><br>e[<span class="hljs-keyword">cnt</span>].next=head[u]<span class="hljs-comment">;</span><br>head[u]=<span class="hljs-keyword">cnt</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>éå†ä»¥aä¸ºèµ·ç‚¹çš„æ‰€æœ‰è¾¹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=head[a];i!=0;<span class="hljs-attribute">i</span>=edge[i].next)<br></code></pre></td></tr></table></figure><h4 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,m,s;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> head[N];<br><span class="hljs-type">bool</span> vis[N];<br><span class="hljs-type">int</span> dis[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-comment">//è¾¹ </span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">edge</span><br>&#123;<br><span class="hljs-type">int</span> to;<span class="hljs-comment">//è¿™æ¡è¾¹æŒ‡å‘çš„ç‚¹ </span><br><span class="hljs-type">int</span> next;<span class="hljs-comment">//è¿™æ¡è¾¹çš„é‚»è¾¹çš„åºå· </span><br><span class="hljs-type">int</span> w;<span class="hljs-comment">//è¿™æ¡è¾¹çš„æƒå€¼ </span><br>&#125;e[<span class="hljs-number">2</span>*N];<br><span class="hljs-comment">//ä¼˜å…ˆçº§é˜Ÿåˆ—çš„èŠ‚ç‚¹</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> w;<br><span class="hljs-built_in">node</span>(<span class="hljs-type">int</span> nn,<span class="hljs-type">int</span> ww):<span class="hljs-built_in">n</span>(nn),<span class="hljs-built_in">w</span>(ww)&#123;&#125;<br><span class="hljs-comment">//é‡è½½è¿ç®—ç¬¦&lt;ï¼Œä¸ºäº†å»ºç«‹å°é¡¶å † </span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt; (<span class="hljs-type">const</span> node&amp; t) <span class="hljs-type">const</span><br>&#123;<br><span class="hljs-keyword">return</span> w&gt;t.w;<br>&#125;<br>&#125;; <br><span class="hljs-comment">//åŠ è¾¹ </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> u,<span class="hljs-type">int</span> v,<span class="hljs-type">int</span> w)</span></span><br><span class="hljs-function"></span>&#123;<br>++cnt;<br>e[cnt].to=v;<br>e[cnt].w=w;<br>e[cnt].next=head[u];<br>head[u]=cnt;<br>&#125;<br>priority_queue&lt;node&gt; q;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;<br><span class="hljs-built_in">memset</span>(dis,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dis));<br>dis[s]=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> u,v,w;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)<br>&#123;<br>cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br><span class="hljs-built_in">add</span>(u,v,w);<br>&#125;<br>q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(s,<span class="hljs-number">0</span>));<br><span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>&#123;<br>node t=q.<span class="hljs-built_in">top</span>();<br>q.<span class="hljs-built_in">pop</span>();<br>u=t.n;<br><span class="hljs-keyword">if</span>(!vis[u])<br>&#123;<br>vis[u]=<span class="hljs-literal">true</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=head[u];i;i=e[i].next)<br>&#123;<br>v=e[i].to;<br>w=e[i].w;<br><span class="hljs-keyword">if</span>(dis[v]&gt;dis[u]+w)<br>&#123;<br>dis[v]=dis[u]+w;<br><span class="hljs-keyword">if</span>(!vis[v])<br>q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(v,dis[v]));<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>cout&lt;&lt;dis[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¾‹2-æœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯"><a class="markdownIt-Anchor" href="#ä¾‹2-æœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯"></a> ä¾‹2 æœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯</h3><p>æè¿°<br />ç»™å®š n ä¸ªç‚¹ï¼Œmæ¡æœ‰å‘è¾¹ï¼Œèµ·ç‚¹sï¼Œç»ˆç‚¹dï¼Œæœ€å¤§è¾¹æ•°k</p><p>ç¬¬ä¸€è¡Œè¾“å…¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo separator="true">,</mo><mi>s</mi><mo separator="true">,</mo><mi>d</mi><mo separator="true">,</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">n,m,s,d,k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span><br />åé¢mè¡Œè¾“å…¥mæ¡è¾¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i,v_i,w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p>è¾“å‡ºä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span>æœ€å¤šç»è¿‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>æ¡è¾¹æ—¶çš„æœ€çŸ­è·¯å¾„<br />input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">100</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">100</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span> <span class="hljs-number">500</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">200<br></code></pre></td></tr></table></figure><h3 id="bellmanford"><a class="markdownIt-Anchor" href="#bellmanford"></a> Bellmanford</h3><blockquote><p>Bellmanfordå¸¸ç”¨äºè§£å†³æ­¤ç±»æœ‰è¾¹æ•°é™åˆ¶çš„æœ€çŸ­è·¯</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-meta">#include&lt;bits/stdc++.h&gt;</span><br><span class="hljs-keyword">using</span> namespace std;<br><span class="hljs-type">int</span> n,m,s,d,k;<br><span class="hljs-type">int</span> inf=<span class="hljs-number">0x3f3f3f3f</span>;<br>const <span class="hljs-type">int</span> N=<span class="hljs-number">1e4</span>+<span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">100</span>][N];<br><span class="hljs-type">bool</span> vis[N];<br>struct edge<br>&#123;<br><span class="hljs-type">int</span> u,v,w;<br>//edge(<span class="hljs-type">int</span> uu,<span class="hljs-type">int</span> vv,<span class="hljs-type">int</span> ww):u(uu),v(vv),w(ww)&#123;&#125;<br>&#125;e[N];<br><span class="hljs-type">int</span> main()<br>&#123;<br>cin&gt;&gt;n&gt;&gt;m&gt;&gt;s&gt;&gt;d&gt;&gt;k;<br>memset(dp,<span class="hljs-number">0x3f</span>,sizeof(dp));<br>dp[<span class="hljs-number">0</span>][s]=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> u,v,w;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;++i)<br>&#123;<br>cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;<br>e[i].u=u;<br>e[i].v=v;<br>e[i].w=w;<br>&#125;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=k;++i)<br>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=m;++j)<br>&#123;<br>u=e[j].u;<br>v=e[j].v;<br>w=e[j].w;<br>dp[i][v]=min(dp[i][v],dp[i<span class="hljs-number">-1</span>][u]+w);<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> ans=inf;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=k;++i)<br>&#123;<br>ans=min(dp[i][d],ans);<br>&#125; <br><span class="hljs-keyword">if</span>(ans==inf)<br>cout&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;endl;<br><span class="hljs-keyword">else</span><br>cout&lt;&lt;ans&lt;&lt;endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¹¶æŸ¥é›†è§£æœ€çŸ­è·¯"><a class="markdownIt-Anchor" href="#å¹¶æŸ¥é›†è§£æœ€çŸ­è·¯"></a> å¹¶æŸ¥é›†è§£æœ€çŸ­è·¯</h3><p>å…ˆçœ‹ä¸€ä¸ªä¾‹é¢˜</p><p><a href="https://www.nowcoder.com/practice/a29d0b5eb46b4b90bfa22aa98cf5ff17?tpId=40&amp;tqId=21438&amp;rp=1&amp;ru=/ta/kaoyan&amp;qru=/ta/kaoyan&amp;difficulty=&amp;judgeStatus=&amp;tags=/question-ranking">æœ€çŸ­è·¯å¾„</a></p><p><strong>æè¿°</strong></p><p>Nä¸ªåŸå¸‚ï¼Œæ ‡å·ä»0åˆ°N-1ï¼ŒMæ¡é“è·¯ï¼Œç¬¬Kæ¡é“è·¯ï¼ˆKä»0å¼€å§‹ï¼‰çš„é•¿åº¦ä¸º2^Kï¼Œæ±‚ç¼–å·ä¸º0çš„åŸå¸‚åˆ°å…¶ä»–åŸå¸‚çš„æœ€çŸ­è·ç¦»</p><p><strong>è¾“å…¥æè¿°</strong></p><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°Nï¼ˆ2&lt;=N&lt;=100ï¼‰M(M&lt;=500),è¡¨ç¤ºæœ‰Nä¸ªåŸå¸‚ï¼ŒMæ¡é“è·¯ æ¥ä¸‹æ¥Mè¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç›¸è¿çš„ä¸¤ä¸ªåŸå¸‚çš„ç¼–å·</p><p><strong>è¾“å‡ºæè¿°</strong></p><p>N-1è¡Œï¼Œè¡¨ç¤º0å·åŸå¸‚åˆ°å…¶ä»–åŸå¸‚çš„æœ€çŸ­è·¯ï¼Œå¦‚æœæ— æ³•åˆ°è¾¾ï¼Œè¾“å‡º-1ï¼Œæ•°å€¼å¤ªå¤§çš„ä»¥MOD 100000 çš„ç»“æœè¾“å‡ºã€‚</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">8<br>9<br>11<br></code></pre></td></tr></table></figure><blockquote><p>æ€è·¯ï¼šå¯¹äºè¿™é“é¢˜ï¼Œç¬¬kæ¡è¾¹çš„é•¿åº¦ä¸º2^kï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬kæ¡è¾¹ä¼šæ¯”å‰é¢æ‰€æœ‰è¾¹çš„å’Œè¿˜è¦å¤§ã€‚æ‰€ä»¥ç”¨å¹¶æŸ¥é›†æ¥åšï¼Œå½“æ–°åŠ å…¥è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹uå’Œvä¸è¿é€šæ—¶ï¼Œè¿™æ¡è¾¹å°±æ˜¯uåˆ°vçš„æœ€çŸ­è·ç¦»ï¼Œå› ä¸ºåç»­å¦‚æœå†æ¬¡å‡ºç°ä»¥uvä¸ºç«¯ç‚¹çš„è¾¹ï¼Œä¸€å®šä¼šæ¯”å½“å‰é•¿åº¦é•¿ã€‚åŠ å…¥uvè¾¹åï¼Œæ›´æ–°ä¸¤ç«¯ç‚¹å„è‡ªè¿é€šå­å›¾ä¸­å„ç‚¹é—´çš„è·ç¦»å³å¯ã€‚</p></blockquote><p>ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">102</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">1e5</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-type">int</span> mp[N][N];<br><span class="hljs-type">int</span> vset[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ksm</span><span class="hljs-params">(ll a,<span class="hljs-type">int</span> b,<span class="hljs-type">int</span> c)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">1</span>;<br>    a=a%c;<br>    <span class="hljs-keyword">while</span>(b&gt;<span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(b%<span class="hljs-number">2</span>)<br>            ans=(ans*a)%c;<br>        a=(a*a)%c;<br>        b/=<span class="hljs-number">2</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(vset[a]==<span class="hljs-number">-1</span>)<br><span class="hljs-keyword">return</span> a;<br><span class="hljs-keyword">else</span><br>&#123;<br>vset[a]=<span class="hljs-built_in">find</span>(vset[a]);<br><span class="hljs-keyword">return</span> vset[a];<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n,m;<br>    cin&gt;&gt;n&gt;&gt;m;<br>    <span class="hljs-built_in">memset</span>(vset,<span class="hljs-number">-1</span>,<span class="hljs-built_in">sizeof</span>(vset));<br>    <span class="hljs-built_in">memset</span>(mp,<span class="hljs-number">-1</span>,<span class="hljs-built_in">sizeof</span>(mp));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>    mp[i][i]=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> u,v,w;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;k&lt;m;++k)<br>    &#123;<br>        cin&gt;&gt;u&gt;&gt;v;<br>        <span class="hljs-type">int</span> x=<span class="hljs-built_in">find</span>(u);<br>        <span class="hljs-type">int</span> y=<span class="hljs-built_in">find</span>(v);<br>        <span class="hljs-comment">//å½“ä¸¤ç‚¹ä¸è¿é€šçš„æ—¶å€™æ‰åŠ å…¥è¯¥è¾¹ï¼Œæ­¤æ—¶è¯¥è¾¹æ˜¯uåˆ°vçš„æœ€çŸ­è¾¹</span><br><span class="hljs-keyword">if</span>(x!=y)<br>&#123;<br>w=<span class="hljs-built_in">ksm</span>(<span class="hljs-number">2</span>,k,mod);<br><span class="hljs-comment">//æ›´æ–°ä¸¤ä¸ªè¿é€šå­å›¾é—´å„ç‚¹çš„è·ç¦» </span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>&#123;<br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(i)==x)<br>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;++j)<br>&#123;<br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(j)==y)<br>&#123;<br>mp[i][j]=mp[j][i]=(mp[i][u]+w+mp[v][j])%mod;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//è¿æ¥ä¸¤ä¸ªè¿é€šå­å›¾</span><br>vset[x]=y; <br>&#125; <br>    &#125;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;++i)<br>    cout&lt;&lt;mp[<span class="hljs-number">0</span>][i]&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>èƒŒåŒ…é—®é¢˜</title>
    <link href="/2022/08/22/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/"/>
    <url>/2022/08/22/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#%E6%80%9D%E8%B7%AF">æ€è·¯</a></li><li><a href="#%E4%BE%8B%E9%A2%98101%E8%83%8C%E5%8C%85">ä¾‹é¢˜1ï¼š01èƒŒåŒ…</a></li><li><a href="#%E4%BE%8B%E9%A2%982%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85">ä¾‹é¢˜2ï¼šå®Œå…¨èƒŒåŒ…</a></li></ul><!-- /TOC --><blockquote><p><em><strong>èƒŒåŒ…é—®é¢˜</strong></em> æ˜¯ç»å…¸çš„ä¸€ç±»åŠ¨æ€è§„åˆ’ç±»å‹çš„é¢˜ç›®ï¼Œä¸€èˆ¬æ˜¯æœ‰nç§ç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰å¯¹åº”çš„ä»·å€¼wï¼Œç„¶åèƒŒåŒ…ä½“ç§¯ä¸ºVï¼Œæ±‚èƒ½è£…å…¥çš„ç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚</p></blockquote><h4 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯</h4><p>è®¾ <strong>dp[i][j]</strong> ä¸ºå‰ i ä¸ªç‰©å“ï¼ŒèƒŒåŒ…å®¹é‡ä¸º j çš„æœ€å¤§ä»·å€¼ã€‚</p><p>é‚£ä¹ˆè€ƒè™‘ç¬¬iä¸ªç‰©å“æ˜¯å¦æ”¾å…¥ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¦‚æœä¸æ”¾ï¼Œé‚£ä¹ˆç­‰åŒäºå‰ <strong>iâˆ’1</strong> ä¸ªç‰©å“ï¼Œå®¹é‡ä¸ºjçš„èƒŒåŒ…çš„æœ€ä¼˜æ–¹æ¡ˆã€‚</li><li>å¦‚æœæ”¾ï¼Œé‚£ä¹ˆç­‰åŒäºå‰ <strong>iâˆ’1</strong> ä¸ªç‰©å“ï¼Œå®¹é‡ä¸º <strong>jâˆ’v[i]</strong> çš„èƒŒåŒ…çš„æœ€ä¼˜æ–¹æ¡ˆï¼Œå†åŠ ä¸Šç¬¬iä¸ªç‰©å“çš„ä»·å€¼ã€‚</li></ul><p>é‚£ä¹ˆå¯ä»¥å¾—åˆ°è½¬ç§»æ–¹ç¨‹ï¼š</p><p><em><strong>dp[i][j]=max(dp[iâˆ’1][j],dp[iâˆ’1][jâˆ’v[i]]+w[i])</strong></em></p><p>æœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯ <strong>dp[n][V]</strong></p><p>è§‚å¯Ÿåˆ°dpæ•°ç»„ï¼Œç¬¬iè¡Œä»…è·Ÿä¸Šä¸€è¡Œæœ‰å…³ç³»ï¼Œæ•…å¯ä»¥å‹ç¼©ä¸€ç»´ï¼Œä¸ºäº†é˜²æ­¢dp[iâˆ’1][jâˆ’v[i]]è¢«è¦†ç›–æ‰ï¼Œç¬¬äºŒç»´åº¦é¡»<strong>åå‘æšä¸¾</strong>ã€‚</p><h4 id="ä¾‹é¢˜101èƒŒåŒ…"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜101èƒŒåŒ…"></a> ä¾‹é¢˜1ï¼š01èƒŒåŒ…</h4><p>ä½ æœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œæœ€å¤šèƒ½å®¹çº³çš„ä½“ç§¯æ˜¯Vï¼Œç°åœ¨æœ‰nä¸ªç‰©å“ï¼Œç¬¬iä¸ªç‰©å“çš„ä½“ç§¯ä¸ºvi,ä»·å€¼ä¸ºwiã€‚</p><ol><li>æ±‚è¿™ä¸ªèƒŒåŒ…è‡³å¤šèƒ½è£…å¤šå¤§ä»·å€¼çš„ç‰©å“ï¼Ÿ</li><li>è‹¥èƒŒåŒ…æ°å¥½è£…æ»¡ï¼Œæ±‚è‡³å¤šèƒ½è£…å¤šå¤§ä»·å€¼çš„ç‰©å“ï¼Ÿ</li></ol><p>è¾“å…¥ç¬¬ä¸€è¡Œn,V<br />åé¢nè¡Œï¼Œè¾“å…¥ç¬¬iä»¶ç‰©å“çš„ä½“ç§¯viå’Œä»·å€¼wi<br />è¾“å‡ºï¼šä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œå„å ä¸€è¡Œï¼Œå¦‚æœæ— è§£è¾“å‡º0</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">10</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">14<br>9<br></code></pre></td></tr></table></figure><p>é¢˜è§£ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs inform7">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>int n,V;<br>const int N=1005;<br>int v<span class="hljs-comment">[N]</span>,w<span class="hljs-comment">[N]</span>;<br>int dp<span class="hljs-comment">[N]</span>;<br>int main()<br>&#123;<br>    cin&gt;&gt;n&gt;&gt;V;<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        cin&gt;&gt;v<span class="hljs-comment">[i]</span>;<br>        cin&gt;&gt;w<span class="hljs-comment">[i]</span>;<br>    &#125;<br>    //ä¸è¦æ±‚è£…æ»¡<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        for(int j=V;j&gt;=v<span class="hljs-comment">[i]</span>;--j)<br>            dp<span class="hljs-comment">[j]</span>=max(dp<span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[j-v<span class="hljs-comment">[i]</span>]</span>+w<span class="hljs-comment">[i]</span>);<br>    &#125;<br>    cout&lt;&lt;dp<span class="hljs-comment">[V]</span>&lt;&lt;endl;<br>    <br>    //è¦æ±‚è£…æ»¡<br>    memset(dp,-0x3f,sizeof(dp));<br>    dp<span class="hljs-comment">[0]</span>=0;<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        for(int j=V;j&gt;=v<span class="hljs-comment">[i]</span>;--j)<br>            dp<span class="hljs-comment">[j]</span>=max(dp<span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[j-v<span class="hljs-comment">[i]</span>]</span>+w<span class="hljs-comment">[i]</span>);<br>    &#125;<br>    if(dp<span class="hljs-comment">[V]</span>&gt;0)<br>        cout&lt;&lt;dp<span class="hljs-comment">[V]</span>&lt;&lt;endl;<br>    else<br>        cout&lt;&lt;0&lt;&lt;endl;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜2å®Œå…¨èƒŒåŒ…"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜2å®Œå…¨èƒŒåŒ…"></a> ä¾‹é¢˜2ï¼šå®Œå…¨èƒŒåŒ…</h4><p>æè¿°ä¸ä¾‹é¢˜1ç›¸åŒï¼Œä¸è¿‡æ¯ç§ç‰©å“æœ‰<strong>ä»»æ„</strong>ä¸ª</p><p>input:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">6 </span><span class="hljs-number">13</span><br><span class="hljs-symbol">13 </span><span class="hljs-number">189</span><br><span class="hljs-symbol">17 </span><span class="hljs-number">360</span><br><span class="hljs-symbol">19 </span><span class="hljs-number">870</span><br><span class="hljs-symbol">14 </span><span class="hljs-number">184</span><br><span class="hljs-symbol">6 </span><span class="hljs-number">298</span><br><span class="hljs-symbol">16 </span><span class="hljs-number">242</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">596<br>189<br></code></pre></td></tr></table></figure><p>é¢˜è§£ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs inform7">#include&lt;bits/stdc++.h&gt;<br>using namespace std;<br>int n,V;<br>const int N=1005;<br>int v<span class="hljs-comment">[N]</span>,w<span class="hljs-comment">[N]</span>;<br>int dp<span class="hljs-comment">[N]</span>;<br>int main()<br>&#123;<br>    cin&gt;&gt;n&gt;&gt;V;<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        cin&gt;&gt;v<span class="hljs-comment">[i]</span>;<br>        cin&gt;&gt;w<span class="hljs-comment">[i]</span>;<br>    &#125;<br>    //ä¸è¦æ±‚è£…æ»¡<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        for(int j=v<span class="hljs-comment">[i]</span>;j&lt;=V;++j)<br>            dp<span class="hljs-comment">[j]</span>=max(dp<span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[j-v<span class="hljs-comment">[i]</span>]</span>+w<span class="hljs-comment">[i]</span>);<br>    &#125;<br>    cout&lt;&lt;dp<span class="hljs-comment">[V]</span>&lt;&lt;endl;<br>    <br>    //è¦æ±‚è£…æ»¡<br>    memset(dp,-0x3f,sizeof(dp));<br>    dp<span class="hljs-comment">[0]</span>=0;<br>    for(int i=1;i&lt;=n;++i)<br>    &#123;<br>        for(int j=v<span class="hljs-comment">[i]</span>;j&lt;=V;++j)<br>            dp<span class="hljs-comment">[j]</span>=max(dp<span class="hljs-comment">[j]</span>,dp<span class="hljs-comment">[j-v<span class="hljs-comment">[i]</span>]</span>+w<span class="hljs-comment">[i]</span>);<br>    &#125;<br>    if(dp<span class="hljs-comment">[V]</span>&gt;0)<br>        cout&lt;&lt;dp<span class="hljs-comment">[V]</span>&lt;&lt;endl;<br>    else<br>        cout&lt;&lt;0&lt;&lt;endl;<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å›æº¯</title>
    <link href="/2022/08/22/%E5%9B%9E%E6%BA%AF/"/>
    <url>/2022/08/22/%E5%9B%9E%E6%BA%AF/</url>
    
    <content type="html"><![CDATA[<blockquote><p><em><strong>å›æº¯</strong></em>  æ ¸å¿ƒæ€æƒ³å’Œdfsç›¸ä¼¼ï¼Œä¸»è¦é€šè¿‡é€’å½’å¯»æ‰¾å¯è¡Œè§£</p></blockquote><!-- TOC --><ul><li><a href="#%E4%BE%8B%E9%A2%981">ä¾‹é¢˜1:</a></li><li><a href="#%E4%BE%8B%E9%A2%982">ä¾‹é¢˜2:</a></li></ul><!-- /TOC --><h3 id="ä¾‹é¢˜1"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜1"></a> ä¾‹é¢˜1:</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„a[]å’Œtargetçš„å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºtargetçš„ä¸åŒç»„åˆï¼Œè¾“å‡ºæ‰€æœ‰ç¬¦åˆè¦æ±‚çš„ç»„åˆ</p><ul><li>æ•°ç»„ä¸­æ•°å­—å¯ä»¥é‡å¤ä½¿ç”¨</li><li>1,1,5å’Œ1,5,1è§†ä¸ºä¸€ç§æ–¹å¼<br />input:</li></ul><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">8</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">3 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,target;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;<br><span class="hljs-keyword">typedef</span> vector&lt;<span class="hljs-type">int</span>&gt; vi;<br><span class="hljs-function">vi <span class="hljs-title">a</span><span class="hljs-params">(N)</span></span>;<br>vi tmp;<br>vector&lt;vi&gt; ans; <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bk</span><span class="hljs-params">(<span class="hljs-type">int</span> idx,<span class="hljs-type">int</span> target)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(idx==n)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span>(target==<span class="hljs-number">0</span>)<br>    &#123;<br>        ans.<span class="hljs-built_in">push_back</span>(tmp);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">bk</span>(idx+<span class="hljs-number">1</span>,target);<br>    <span class="hljs-keyword">if</span>(target&gt;=a[idx])<br>    &#123;<br>        tmp.<span class="hljs-built_in">push_back</span>(a[idx]);<br>        <span class="hljs-built_in">bk</span>(idx,target-a[idx]);<br>        tmp.<span class="hljs-built_in">pop_back</span>();<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin&gt;&gt;n&gt;&gt;target;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>cin&gt;&gt;a[i];<br><br>    <span class="hljs-built_in">bk</span>(<span class="hljs-number">0</span>,target);<br>    <span class="hljs-keyword">for</span>(vi&amp; t:ans)<br>    &#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> tt :t)<br>    cout&lt;&lt;tt&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>    cout&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¾‹é¢˜2"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜2"></a> ä¾‹é¢˜2:</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„a[]å’Œtargetçš„å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºtargetçš„ä¸åŒç»„åˆï¼Œè¾“å‡ºæ‰€æœ‰ç¬¦åˆè¦æ±‚çš„ç»„åˆ</p><ul><li>æ•°ç»„ä¸­æ¯ä¸ªæ•°å­—æœ€å¤šä½¿ç”¨ä¸€æ¬¡</li><li>1,1,5å’Œ1,5,1è§†ä¸ºä¸€ç§æ–¹å¼<br />input:</li></ul><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">7 </span><span class="hljs-number">8</span><br><span class="hljs-symbol">10 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">7</span> <span class="hljs-number">6</span> <span class="hljs-number">1</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">7</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">6</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">6</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,target;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;<br><span class="hljs-keyword">typedef</span> vector&lt;<span class="hljs-type">int</span>&gt; vi;<br><span class="hljs-function">vi <span class="hljs-title">a</span><span class="hljs-params">(N)</span></span>;<br>vi tmp;<br>vector&lt;vi&gt; ans; <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bk</span><span class="hljs-params">(<span class="hljs-type">int</span> idx,<span class="hljs-type">int</span> target)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(idx==n)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span>(target==<span class="hljs-number">0</span>)<br>    &#123;<br>        ans.<span class="hljs-built_in">push_back</span>(tmp);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=idx;i&lt;n;++i)<br>    &#123;<br>    <span class="hljs-keyword">if</span>(target&gt;=a[i])<br>    &#123;<br>    <span class="hljs-keyword">if</span>(i&gt;idx&amp;&amp;a[i]==a[i<span class="hljs-number">-1</span>])<br>    <span class="hljs-keyword">continue</span>;<br>    tmp.<span class="hljs-built_in">push_back</span>(a[i]);<br>    <span class="hljs-built_in">bk</span>(i+<span class="hljs-number">1</span>,target-a[i]);<br>    tmp.<span class="hljs-built_in">pop_back</span>();<br>    &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin&gt;&gt;n&gt;&gt;target;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;++i)<br>cin&gt;&gt;a[i];<br><br>    <span class="hljs-built_in">bk</span>(<span class="hljs-number">0</span>,target);<br>    <span class="hljs-keyword">for</span>(vi&amp; t:ans)<br>    &#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> tt :t)<br>    cout&lt;&lt;tt&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<br>    cout&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>kmpç®—æ³•</title>
    <link href="/2022/08/21/kmp%E7%AE%97%E6%B3%95/"/>
    <url>/2022/08/21/kmp%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<blockquote><p><em><strong>kmp</strong></em> ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼šå½“åŒ¹é…å¤±è´¥æ—¶ï¼Œä¸»ä¸²æŒ‡é’ˆä¸å›é€€ï¼Œè€Œæ˜¯æ ¹æ® <em><strong>next</strong></em> æ•°ç»„ï¼Œä»é€‚å½“çš„ä½ç½®é‡æ–°åŒ¹é…ï¼Œç›¸æ¯”äºæš´åŠ›åŒ¹é…ï¼Œè·³è¿‡äº†ä¸å¯èƒ½åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ï¼Œå¤§å¤§æå‡äº†æ•ˆç‡</p></blockquote><blockquote><p><em><strong>next</strong></em> æ•°ç»„æ¯ä¸ªä½ç½®çš„å€¼è¡¨ç¤ºå‰ç¼€é›†åˆå’Œåç¼€é›†åˆäº¤é›†ä¸­,æœ€é•¿å…ƒç´ çš„é•¿åº¦</p></blockquote><pre><code class="hljs">        p:    a b a b a b c a    next[i]:  0 0 1 2 3 4 0 1</code></pre><p>ä¾‹é¢˜:</p><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²Â s å’Œ p ï¼Œè¯·ä½ åœ¨ s å­—ç¬¦ä¸²ä¸­æ‰¾å‡º p å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1 ã€‚</p><p>input:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">abacdf</span><br><span class="hljs-attribute">acd</span><br></code></pre></td></tr></table></figure><p>output:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">2<br></code></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span><br>using namespace std;<br>const int <span class="hljs-attribute">N</span>=1e5;<br>int nxt[N];<br>void get_next(string p)<br>&#123;<br>int <span class="hljs-attribute">len</span>=p.size();<br>int <span class="hljs-attribute">i</span>=1,j=0;<br><span class="hljs-keyword">while</span>(i&lt;len)<br>&#123;<br><span class="hljs-keyword">if</span>(p[i]==p[j])<br>&#123;<br>nxt[i]=j+1;<br>++i;<br>++j;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-attribute">j</span>==0)<br>&#123;<br>nxt[i]=0;<br>++i;<br>&#125;<br><span class="hljs-keyword">else</span><br><span class="hljs-attribute">j</span>=nxt[j-1];<br>&#125;<br>&#125; <br>int main()<br>&#123;<br>string s,p;<br>cin&gt;&gt;s&gt;&gt;p;<br>int <span class="hljs-attribute">m</span>=s.size(),n=p.size();<br>int <span class="hljs-attribute">ans</span>=-1;<br><br><span class="hljs-keyword">for</span>(int <span class="hljs-attribute">i</span>=0,j=0;i&lt;m;++i)<br>&#123;<br><span class="hljs-keyword">while</span>(j&gt;0&amp;&amp;s[i]!=p[j])<br><span class="hljs-attribute">j</span>=nxt[j-1];<br><span class="hljs-keyword">if</span>(s[i]==p[j])<br>++j;<br><span class="hljs-keyword">if</span>(<span class="hljs-attribute">j</span>==n)<br><span class="hljs-attribute">ans</span>=i-j+1;<br>&#125;<br>cout&lt;&lt;ans&lt;&lt;endl;<br>return 0;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æœºè¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢ç»</title>
    <link href="/2022/08/21/%E9%9D%A2%E7%BB%8F/"/>
    <url>/2022/08/21/%E9%9D%A2%E7%BB%8F/</url>
    
    <content type="html"><![CDATA[<!-- TOC --><ul><li><a href="#2022%E4%B8%AA%E4%BA%BA%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A2%84%E6%8E%A8%E5%85%8D%E8%AE%B0%E5%BD%95">2022ä¸ªäººå¤ä»¤è¥/é¢„æ¨å…è®°å½•ğŸ˜¢</a><ul><li><a href="#%E5%90%89%E5%A4%A7ai">å‰å¤§ai</a></li><li><a href="#%E8%A5%BF%E4%BA%A4cs">è¥¿äº¤cs</a></li><li><a href="#%E5%8D%8E%E7%A7%91%E7%BD%91%E5%AE%89">åç§‘ç½‘å®‰</a></li><li><a href="#%E5%8C%97%E9%82%AE">åŒ—é‚®</a></li><li><a href="#%E5%9B%BD%E9%98%B2%E7%A7%91%E5%A4%A7%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B">å›½é˜²ç§‘å¤§ç³»ç»Ÿå·¥ç¨‹</a></li><li><a href="#%E6%B5%99%E8%BD%AF">æµ™è½¯</a></li><li><a href="#%E5%8D%97%E5%A4%A7cs">å—å¤§cs</a></li><li><a href="#%E5%8C%97%E8%88%AAai">åŒ—èˆªai</a></li><li><a href="#%E4%B8%9C%E5%8D%97cs">ä¸œå—cs</a></li></ul></li><li><a href="#%E9%A2%84%E6%8E%A8%E5%85%8D">é¢„æ¨å…</a><ul><li><a href="#%E5%A4%8D%E6%97%A6">å¤æ—¦</a></li><li><a href="#%E8%A5%BF%E4%BA%A4">è¥¿äº¤</a></li><li><a href="#%E5%93%88%E5%B7%A5%E5%A4%A7">å“ˆå·¥å¤§</a></li><li><a href="#%E5%8C%97%E8%88%AAai-1">åŒ—èˆªai</a></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ul></li></ul><!-- /TOC --><h2 id="2022ä¸ªäººå¤ä»¤è¥é¢„æ¨å…è®°å½•"><a class="markdownIt-Anchor" href="#2022ä¸ªäººå¤ä»¤è¥é¢„æ¨å…è®°å½•"></a> 2022ä¸ªäººå¤ä»¤è¥/é¢„æ¨å…è®°å½•ğŸ˜¢</h2><h3 id="å‰å¤§ai"><a class="markdownIt-Anchor" href="#å‰å¤§ai"></a> å‰å¤§ai</h3><ul><li>è‡ªæˆ‘ä»‹ç»</li><li>è‹±æ–‡ç¿»è¯‘</li><li>æŠ½é¢˜ç›®å›ç­”</li></ul><p>æˆ‘æŠ½åˆ°çš„æ˜¯å…³äºèšç±»çš„ï¼š</p><ul><li>ä»€ä¹ˆæ˜¯èšç±»</li><li>èšç±»å’Œåˆ†ç±»åŒºåˆ«</li><li>èšç±»çš„æ€§èƒ½æŒ‡æ ‡</li><li>å±‚æ¬¡èšç±»æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</li><li><em>åä¸¤ä¸ªä¹Ÿæ˜¯å…³äºå±‚æ¬¡èšç±»çš„ï¼Œå¿˜äº†ã€‚ã€‚ã€‚</em></li></ul><h3 id="è¥¿äº¤cs"><a class="markdownIt-Anchor" href="#è¥¿äº¤cs"></a> è¥¿äº¤cs</h3><p>å¤ä»¤è¥æ²¡æœ‰ä¼˜è¥ï¼Œæ²¡æœ‰è€ƒæ ¸ï¼Œå…ˆæŠ¥åç„¶åå›¢é˜Ÿå†…éƒ¨é¢è¯•ï¼ˆèŠå¤©ï¼‰</p><h3 id="åç§‘ç½‘å®‰"><a class="markdownIt-Anchor" href="#åç§‘ç½‘å®‰"></a> åç§‘ç½‘å®‰</h3><p>æœ‰æœºè¯•ï¼Œ5é“é¢˜ï¼Œ150min,é¢˜ç›®è®°ä¸æ¸…äº†ï¼Œéš¾åº¦ä¸­ç­‰ï¼Œæœºè¯•æˆç»©ä¸è®¡å…¥æ€»æˆç»©ï¼Œä»…ä½œä¸ºå‚è€ƒ<br />é¢è¯•å°±è‡ªæˆ‘ä»‹ç»ï¼Œç„¶åèŠèŠå¤©ï¼Œæœ€åä¼˜è¥40äººï¼Œå¤§æ¦‚1/3</p><h3 id="åŒ—é‚®"><a class="markdownIt-Anchor" href="#åŒ—é‚®"></a> åŒ—é‚®</h3><p>å…¥è¥æœªå‚åŠ </p><h3 id="å›½é˜²ç§‘å¤§ç³»ç»Ÿå·¥ç¨‹"><a class="markdownIt-Anchor" href="#å›½é˜²ç§‘å¤§ç³»ç»Ÿå·¥ç¨‹"></a> å›½é˜²ç§‘å¤§ç³»ç»Ÿå·¥ç¨‹</h3><p>å…¥è¥æœªå‚åŠ </p><h3 id="æµ™è½¯"><a class="markdownIt-Anchor" href="#æµ™è½¯"></a> æµ™è½¯</h3><p>å…¥è¥é€‰æ‹©æ–¹å‘ï¼Œä¸€å…±å…«ä¸ªæ–¹å‘ï¼Œæ¯ä¸ªæ–¹å‘ä¼šå¸ƒç½®ä»»åŠ¡ï¼Œåšå®Œæäº¤å³å¯ï¼ŒæŒ‰å®Œæˆè´¨é‡è¯„ä¼˜è¥</p><p>æ—¶é—´ç´§ï¼Œéšä¾¿åšäº†ä¸‹å°±äº¤äº†ï¼Œæœ€åæ™®é€šè¥å‘˜</p><h3 id="å—å¤§cs"><a class="markdownIt-Anchor" href="#å—å¤§cs"></a> å—å¤§cs</h3><ul><li><p><strong>ç¬”è¯•</strong><br />å¾ˆå¤šè¦è®¡ç®—çš„é¢˜ï¼Œé¢˜é‡æŒºå¤§çš„<br /><strong>æ•°æ®ç»“æ„</strong>ï¼šæ’åºç®—æ³•æ€§èƒ½ï¼Œå¸Œå°”æ’åºåºåˆ—ã€çº¢é»‘æ ‘ã€bæ ‘ã€æœ€çŸ­è·¯å¾„ç®—æ³•(dijkstra,bellford,floyd)ã€æœ€å°ç”Ÿæˆæ ‘ã€çº¿æ€§æ¢æµ‹ã€ä¼˜å…ˆçº§é˜Ÿåˆ—ã€æ±‰è¯ºå¡”é—®é¢˜ã€è¿˜æœ‰å¥½å‡ ä¸ªè¯»ç¨‹åºçš„é¢˜<br /><strong>è®¡ç»„</strong>ï¼šç»„ç›¸è”æ˜ å°„ã€cacheå’Œä¸»å­˜ç»™å®šå‘½ä¸­ç‡è®¡ç®—æ—¶é—´ã€æƒ³ä¸èµ·æ¥äº†ã€‚ã€‚ã€‚<br />osï¼šlinuxç»ˆç«¯é€€å‡ºçš„ç¬¦å·ï¼Œjvmï¼Œè¿›ç¨‹é€šä¿¡ã€ä¸€äº›è¯­è¨€ç‰¹æ€§ï¼ˆrustï¼Œrubyï¼Œscalaï¼‰ï¼Œè®¿ç®¡æŒ‡ä»¤ï¼Œè¿˜æœ‰ä¸€å †æŒ‡ä»¤ã€‚ã€‚<br /><strong>è®¡ç½‘</strong>ï¼šæ— ç±»å¯»å€ï¼Œæ‹¥å¡çª—å£ã€æ•°æ®é“¾è·¯å±‚ã€ipåè®®ã€åé¢è®°çš„ä¸æ¸…æ¥šäº†ã€‚ã€‚ã€‚ã€‚</p></li><li><p><strong>é¢è¯•</strong><br />å…ˆè‹±æ–‡ä»‹ç»merge sortï¼Œé—®ä¸€äº›é¡¹ç›®é—®é¢˜ï¼Œç„¶åé—®äº†ä¸ªæ•°å­¦é¢˜ï¼ˆæ€ä¹ˆåœ¨çƒé¢ä¸Šç¡®å®šä¸€ç‚¹ï¼Ÿï¼‰ï¼Œç„¶åé—®äº†ä¸‹ç”Ÿæ´»ä¸Šçš„å…´è¶£ä¹‹ç±»çš„</p></li></ul><h3 id="åŒ—èˆªai"><a class="markdownIt-Anchor" href="#åŒ—èˆªai"></a> åŒ—èˆªai</h3><p>ä»Šå¹´æ˜¯ç¬¬äºŒå±Šå¤ä»¤è¥ï¼Œå…¥è¥120/1000ï¼Œä¼˜è¥60</p><ul><li>å…ˆè‹±æ–‡è‡ªæˆ‘ä»‹ç»</li><li>æ”¿æ²»ï¼šè°ˆè°ˆç§‘æ•™å…´å›½çš„ç†è§£</li><li>èŠèŠé¡¹ç›®</li><li>å› ä¸ºæˆ‘åœ¨ä¸‹åˆï¼Œå¯èƒ½æ˜¯è€å¸ˆç´¯äº†æŠŠï¼Œæ²¡æœ‰é—®ä¸“ä¸šè¯¾ï¼Œæœ€åä¼˜è¥äº†</li></ul><p>åŒ—èˆªå’Œè€å¸ˆèŠï¼Œé—®äº†äº›é—®é¢˜ï¼Œéƒ½æ˜¯æ¯”è¾ƒåº•å±‚çš„ç»†èŠ‚é—®é¢˜ï¼Œ<br />è¿˜è®°å¾—çš„æœ‰ï¼š</p><ul><li>python åƒåœ¾å›æ”¶æœºåˆ¶</li><li>c++ æ™ºèƒ½æŒ‡é’ˆçš„åŸç†</li><li>å¦‚ä½•åˆ¤æ–­é“¾è¡¨æœ‰æ²¡æœ‰ç¯</li></ul><h3 id="ä¸œå—cs"><a class="markdownIt-Anchor" href="#ä¸œå—cs"></a> ä¸œå—cs</h3><p>å…¥è¥318äºº</p><ul><li>é¢è¯•<ul><li>3åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»</li><li>è‹±æ–‡é—®é¢˜ï¼šcvçš„ç›¸å…³ä»»åŠ¡ã€å‚åŠ çš„å®è·µæ´»åŠ¨</li><li>èŠèŠå¤©ï¼Œæ²¡æœ‰é—®ä¸“ä¸šè¯¾</li></ul></li></ul><hr /><hr /><hr /><h2 id="é¢„æ¨å…"><a class="markdownIt-Anchor" href="#é¢„æ¨å…"></a> é¢„æ¨å…</h2><h3 id="å¤æ—¦"><a class="markdownIt-Anchor" href="#å¤æ—¦"></a> å¤æ—¦</h3><p>æœºè¯•ï¼šç»™3é“é¢˜ï¼Œ2ä¸ªå°æ—¶çš„æ—¶é—´ï¼Œè‡ªå·±åšä¸ç”¨ojï¼Œç„¶ååšå®ŒæŠŠè§£é¢˜æ€è·¯å’Œä»£ç æäº¤å°±è¡Œäº†</p><p>æ„Ÿè§‰é¢˜éƒ½æŒºéš¾çš„ï¼Œæ•°æ®è§„æ¨¡ä¹Ÿå¾ˆå¤§ï¼Œæˆ‘ä¹Ÿåˆ·äº†ä¸€æ®µæ—¶é—´é¢˜ï¼Œæ„Ÿè§‰éš¾åº¦æœ‰OIæé«˜ç»„çº§åˆ«å§ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘tclğŸ˜¢</p><p>è‹±è¯­ï¼šä¸Šæ¥å…ˆè‡ªæˆ‘ä»‹ç»ï¼Œç„¶åè®©æˆ‘ä»‹ç»è‡ªå·±ä¸“ä¸šï¼Œå­¦äº†ä»€ä¹ˆã€‚å‰é¢è¯´çš„è¿˜è¡Œï¼Œåé¢å‡ ä¸ªé—®é¢˜ä¹Ÿæ²¡å‡†å¤‡ï¼Œå°±è¯´çš„ç£•ç£•ç»Šç»Šã€‚ã€‚ã€‚</p><p>é¢è¯•ï¼šé—®å¾—ä¸æ˜¯ç‰¹åˆ«éš¾ï¼ŒåŸºæœ¬éƒ½ç­”ä¸Šæ¥äº†ã€‚å°±æ˜¯æ·±åº¦å­¦ä¹ çš„ä¸€äº›åŸºç¡€çŸ¥è¯†è¿˜æœ‰æ•°æ®ç»“æ„çš„ä¸€äº›ç®—æ³•å’Œå¤æ‚åº¦ï¼Œé—®å¾—å€’æ˜¯å¾ˆç»†ï¼Œä»£ç ç»†èŠ‚éƒ½é—®ï¼Œä½†ä¸éš¾ã€‚</p><p>ç»“æœï¼šå€™è¡¥ç¬¬1ã€‚ç„¶åä¸­åˆæœ‰è€å¸ˆæ‰“ç”µè¯è¿‡æ¥è¯´é‚£è¾¹å¤ä»¤è¥ä¼šç©ºå‡ºæ¥å‡ ä¸ªåé¢ï¼ŒåŸºæœ¬ä¼šå€™è¡¥åˆ°ã€‚</p><h3 id="è¥¿äº¤"><a class="markdownIt-Anchor" href="#è¥¿äº¤"></a> è¥¿äº¤</h3><p>é¢è¯•å’Œå¤ä»¤è¥ä¸€æ ·ï¼Œæ²¡é—®ä»€ä¹ˆä¸“ä¸šè¯¾ï¼Œæ„Ÿè§‰ç±»ä¼¼äºèŠå¤©ã€‚</p><h3 id="å“ˆå·¥å¤§"><a class="markdownIt-Anchor" href="#å“ˆå·¥å¤§"></a> å“ˆå·¥å¤§</h3><p>æŠ¥çš„æ˜¯å“è¶Šå·¥ç¨‹å¸ˆå­¦é™¢çš„äººå·¥æ™ºèƒ½ï¼Œå¼€å§‹æŠ¥åçš„å¾ˆæ—©ï¼Œç«äº‰ç›¸å¯¹æ²¡é‚£ä¹ˆæ¿€çƒˆã€‚æœ¬æ¥æ‰“ç®—æŠ¥æœ¬éƒ¨å’Œå“ˆæ·±çš„ï¼Œåé¢ç»™å¿˜äº†ğŸ˜„</p><p>è¿™ä¸ªé¢„æ¨å…ä½“éªŒä¸æ˜¯å¾ˆå¥½ï¼Œå…·ä½“çš„å°±ä¸å¤šè¯´äº†ï¼Œåæ­£å„ä¸ªç¯èŠ‚å®‰æ’çš„ä¸æ˜¯å¾ˆåˆç†ï¼Œç”šè‡³é¢è¯•çš„æ—¶å€™é—®é¢˜è¿˜æ²¡å›ç­”å®Œï¼Œå°±è¢«æ‰“æ–­ç„¶åè¢«è¦æ±‚é€€å‡ºä¼šè®®äº†ã€‚</p><p>ç»“æœï¼šç¬¬äºŒå¤©å‡ºç»“æœäº†ï¼Œé€šè¿‡äº†ï¼Œè¦ç­¾æ‰¿è¯ºä¹¦ä»€ä¹ˆçš„ã€‚</p><h3 id="åŒ—èˆªai-2"><a class="markdownIt-Anchor" href="#åŒ—èˆªai-2"></a> åŒ—èˆªai</h3><p>æœ€æƒ³å»çš„å­¦æ ¡ï¼Œæ„Ÿè§‰å¤ä»¤è¥ä¼˜è¥ä¹Ÿæ²¡ä»€ä¹ˆä¼˜åŠ¿ã€‚é¢„æ¨å…è¿˜é—®çš„æŒºéš¾çš„ï¼Œæ¯”å¦‚é—®<em>å¹¿ä¹‰çš„ç‰¹å¾å‘é‡</em>ï¼Œå›¾å½¢å­¦é‡Œé¢çš„ç‚¹äº‘çš„ä»€ä¹ˆå…¬å¼ä¹‹ç±»çš„ï¼Œæ„Ÿè§‰éƒ½å¾ˆéš¾ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢</p><p>26æ—¥ä¸‹åˆ3ç‚¹åŠæ”¶åˆ°æ‹Ÿå½•å–é‚®ä»¶äº†</p><p>æœ€åè¿˜æ˜¯åŒ—èˆªğŸ˜„</p><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h3><p>æ„Ÿè§‰è‡ªå·±æ°´å¹³å¾ˆä¸€èˆ¬ï¼Œå°±æ˜¯è¿æ°”å¥½äº†ä¸€ç‚¹å§ï¼Œå¸Œæœ›åˆ«è¢«buaaçš„å¤§ä½¬ä»¬ç¢¾å‹äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
