---
title: 火柴拼正方形
date: 2025-03-23 20:21:25
categories: 机试
math:
tags:
---
## 火柴拼正方形

<!-- TOC -->

- [火柴拼正方形](#火柴拼正方形)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->

[原题](https://leetcode.cn/problems/matchsticks-to-square/description/)


### 题目描述
你将得到一个整数数组 matchsticks ，其中 matchsticks[i] 是第 i 个火柴棒的长度。你要用 所有的火柴棍 拼成一个正方形。你 不能折断 任何一根火柴棒，但你可以把它们连在一起，而且每根火柴棒必须 使用一次 。

如果你能使这个正方形，则返回 true ，否则返回 false 。

```
输入: matchsticks = [1,1,2,2,2]
输出: true
解释: 能拼成一个边长为2的正方形，每边两根火柴。
```
### 思路
2025323虾皮笔试第3题，做的时蒙过了0.4的用例，看了题解才知道读错题了，火柴是拼接，不是叠加。
主要思路是回溯，每次给每条边加火柴，当加火柴后边长合法且dfs返回也为真，则返回true。当所有火柴都能用完时返回true，否则返回false。
为了降低时间复杂度，可以降序排序再dfs

### 代码
```
class Solution {
public:
    bool dfs(int idx, int target, vector<int>& edge, vector<int>& matchsticks){
        if(idx==matchsticks.size())
            return true;
        for(int i=0;i<4;++i){
            edge[i]+=matchsticks[idx];
            if(edge[i]<=target&&dfs(idx+1,target,edge,matchsticks))
                return true;
            edge[i]-=matchsticks[idx];
        }
        return false;
    }
    bool makesquare(vector<int>& matchsticks) {
        long long sum=0;
        for(int t:matchsticks)
            sum+=t;
        if(sum%4)
            return false;
        sort(matchsticks.begin(),matchsticks.end(),[](int a,int b){
            return a>b;
        });
        vector<int> edge(4);
        return dfs(0,sum/4,edge,matchsticks);
    }
};

```