---
title: 至少出现三次的特殊子字符串
date: 2023-12-31 16:43:47
categories: 机试
math:
tags:
---
<!-- TOC -->

- [至少出现三次的特殊子字符串](#至少出现三次的特殊子字符串)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 至少出现三次的特殊子字符串
[原题](https://leetcode.cn/problems/find-longest-special-substring-that-occurs-thrice-ii/description/)
### 题目描述
给你一个仅由小写英文字母组成的字符串 s 。

如果一个字符串仅由单一字符组成，那么它被称为 特殊 字符串。例如，字符串 "abc" 不是特殊字符串，而字符串 "ddd"、"zz" 和 "f" 是特殊字符串。

返回在 s 中出现 至少三次 的 最长特殊子字符串 的长度，如果不存在出现至少三次的特殊子字符串，则返回 -1 。

子字符串 是字符串中的一个连续 非空 字符序列。

e.g.
```
输入：s = "aaaa"
输出：2
解释：出现三次的最长特殊子字符串是 "aa" ：子字符串 "aaaa"、"aaaa" 和 "aaaa"。
可以证明最大长度是 2 。
```
### 思路
周赛第三题，和第二题一样，但是数据规模大了很多，时间复杂度我只能到O(n^2)，但是看了大佬的思路觉得很好，所以学习学习。

首先，统计26个字母构成的子串长度，如aaaabbbabb中a为{4,1}，b为{3,2}
接下来对每个字母对应的数组降序排序，然后分类讨论：
- 如果在a[0]，也就是最长的字符串中取3个子字符串，则可以取三个长为a[0]-2的子串
- 如果在a[0],a[1]中取3个子字符串，则取的长度为min(a[0]-1,a[1])
- 如果在a[0],a[1],a[2]中取3个子字符串，则直接取长度为a[2]即可

综上，取得长度为`max(a[0]−2,min(a[0]−1,a[1]),a[2])`，非常简洁
### 代码
```
class Solution
{
public:
    int maximumLength(string s)
    {
        int n = s.size();
        int ans = 0;
        vector<vector<int>> g(26);
        int cnt = 0;
        for (int i = 0; i < n; ++i)
        {
            ++cnt;
            if (i + 1 == n || s[i] != s[i + 1])
            {
                g[s[i] - 'a'].push_back(cnt);
                cnt = 0;
            }
        }
        for (vector<int> t : g)
        {
            if (t.empty())
                continue;
            sort(t.begin(), t.end(), greater<int>());
            t.push_back(0);
            t.push_back(0);
            ans = max({ans, t[0] - 2, min(t[0] - 1, t[1]), t[2]});
        }
        return ans == 0 ? -1 : ans;
    }
};
```