---
title: 子集中元素的最大数量
date: 2024-01-28 16:45:51
categories: 机试
math:
tags:
---

## 子集中元素的最大数量
[原题](https://leetcode.cn/problems/find-the-maximum-number-of-elements-in-subset/description/)
### 题目描述
给你一个 正整数 数组 nums 。

你需要从数组中选出一个满足下述条件的子集：

你可以将选中的元素放置在一个下标从 0 开始的数组中，并使其遵循以下模式：`[x, x^2, x^4, ..., x^k/2, x^k, x^k/2, ..., x^4, x^2, x]`（注意，k 可以是任何非负的2的幂）。例如，[2, 4, 16, 4, 2] 和 [3, 9, 3] 都符合这一模式，而 [2, 4, 8, 4, 2] 则不符合。
返回满足这些条件的子集中，元素数量的 最大值 。
### 思路
主要思路就是统计出现2次以上的数字，然后遍历他们，统计子集的最大数量，具体实现看代码即可理解，注意1的特殊情况。

周赛第二题，思路和答案一样，甚至数据结构都用的一样，但是就差一点点没实现好，感觉代码实现能力还需要好好提升。
### 代码
```
class Solution
{
public:
    int maximumLength(vector<int> &nums)
    {
        int n = nums.size();
        unordered_map<long long, int> m;
        for (int a : nums)
            m[a]++;
        int ans = m[1] - (m[1] % 2 == 0 ? 1 : 0);
        m.erase(1);
        for (auto x : m)
        {
            int cnt = 0;
            long long t = x.first;
            while (m.count(t) && m[t] > 1)
            {
                cnt += 2;
                t *= t;
            }
            ans = max(ans, cnt + (m.count(t) ? 1 : -1));
        }
        return ans;
    }
};
```