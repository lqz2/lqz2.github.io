---
title: 香槟塔
date: 2022-11-20 13:53:36
categories: 机试
math:
tags:
---
<!-- TOC -->

- [香槟塔](#香槟塔)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 香槟塔

[原题](https://leetcode.cn/problems/champagne-tower/description/)
### 题目描述

我们把玻璃杯摆成金字塔的形状，其中 第一层 有 1 个玻璃杯， 第二层 有 2 个，依次类推到第 100 层，每个玻璃杯 (250ml) 将盛有香槟。

从顶层的第一个玻璃杯开始倾倒一些香槟，当顶层的杯子满了，任何溢出的香槟都会立刻等流量的流向左右两侧的玻璃杯。当左右两边的杯子也满了，就会等流量的流向它们左右两边的杯子，依次类推。（当最底层的玻璃杯满了，香槟会流到地板上）

示例
```
输入: poured = 100000009, query_row = 33, query_glass = 17
输出: 1.00000
```
### 思路

一开始以为是个数学规律题，结果没想到还是个动态规划:joy:

`dp[i][j]`表示第i行第j个杯子的盛水量，可以得出状态方程为：

`dp[i][j]=max(dp[i-1][j]-1,0.0)/2+max(dp[i-1][j-1]-1,0.0)/2;`

为了防止下标越界，dp数组下标从1开始

### 代码
```
class Solution {
public:
    double champagneTower(int poured, int query_row, int query_glass) {
        vector<vector<double>> dp(101,vector<double>(101));
        dp[1][1]=poured;
        for(int i=2;i<=query_row+1;++i)
        {
            for(int j=1;j<=i;++j)
            {
                dp[i][j]=max(dp[i-1][j]-1,0.0)/2+max(dp[i-1][j-1]-1,0.0)/2;
            }
        }
        return min(dp[query_row+1][query_glass+1],1.0);
    }
};
```