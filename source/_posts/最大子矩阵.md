---
title: 最大子矩阵
date: 2022-09-01 10:13:18
categories: 机试
math:
tags:
---
<!-- TOC -->

- [题目描述](#题目描述)
- [思路](#思路)
- [代码](#代码)

<!-- /TOC -->
### 题目描述

矩阵的大小定义为矩阵中所有元素的和，现在给定一个n维矩阵，输出他的最大子矩阵

输入：第一行输入n，表示矩阵的维数，随后输入n×n的矩阵

input:
```
4
0 -2 -7 0
9 2 -6 2
-4 1 -4  1
-1 8  0 -2
```
output:
```
15
```
### 思路

这道题可以说是矩阵版的*最大连续子序列的和*，为了减少时间复杂度，将矩阵每个元素变成所在列的前缀和，如`s[i][j]`表示第`j`列前`i`个元素的和，然后按照一维的方式求最大和就好了

### 代码
```
#include<bits/stdc++.h>
using namespace std;
const int N=105;
int inf=-1e6;
int s[N][N];
int main()
{
    int n;
    cin>>n;
    for(int i=1;i<=n;++i)
    {
        for(int j=1;j<=n;++j)
        {
            cin>>s[i][j];
            s[i][j]+=s[i-1][j];
        }
    }
    int ans=inf;
    for(int i=1;i<=n;++i)
    {
        for(int j=i;j<=n;++j)
        {
            int pre=inf;
            for(int col=1;col<=n;++col)
            {
                int t=s[j][col]-s[i-1][col];
                pre=max(pre+t,t);
                ans=max(ans,pre);
            }
        }
    }
    cout<<ans<<endl;
    return 0;
}
```