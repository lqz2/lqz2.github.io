---
title: 非零段划分
date: 2022-09-29 11:00:39
categories: 机试
math:
tags:
---

<!-- TOC -->

- [非零段划分](#非零段划分)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->

## 非零段划分

题目来自CCF 201909-2

### 题目描述

A1,A2,⋯,An 是一个由 n 个自然数组成的数组。我们称其中 Ai,⋯,Aj 是一个非零段，当且仅当以下条件同时满足：

* 1≤i≤j≤n；
* 对于任意的整数 k，若 i≤k≤j，则 Ak>0；
* i=1 或 Ai−1=0；
* j=n 或 Aj+1=0。

下面展示了几个简单的例子：

A=[3,1,2,0,0,2,0,4,5,0,2] 中的 4 个非零段依次为 [3,1,2]、[2]、[4,5] 和 [2]；
A=[2,3,1,4,5] 仅有 1 个非零段；
A=[0,0,0] 则不含非零段（即非零段个数为 0）。

现在我们可以对数组 A 进行如下操作：任选一个正整数 p，然后将 A 中所有小于 p 的数都变为 0。试选取一个合适的 p，使得数组 A 中的非零段个数达到最大。若输入的 A 所含非零段数已达最大值，可取 p=1，即不对 A 做任何修改。

输入：
从标准输入读入数据。

输入的第一行包含一个正整数 n。

输入的第二行包含 n 个用空格分隔的自然数 A1,A2,⋯,An。

输出：

输出到标准输出。

仅输出一个整数，表示对数组 A 进行操作后，其非零段个数能达到的最大值。

### 思路

差分与前缀和
如果 `a[i]>a[i−1]`，意味着当p取到 `a[i−1]+1 `到 `a[i]`之间的值时，非零段+1
数组`b[i]`表示`p`从`a[i-1]`到`a[i]`，非零段数量的变化
从正向前缀和中找出最大值就是所要的结果

差分前缀和之前练习过，但这道题真没想到还能这样，tcl:cry:，看了别人的思路，实在是太妙了啊:cry::cry::cry::cry:

### 代码
```
#include<bits/stdc++.h>
using namespace std;
const int N=5e5+1;
const int M=1e4+1;
int a[N];
int b[M];
int main()
{
	int n;
	cin>>n;
	for(int i=1;i<=n;++i)
	{	
		cin>>a[i];
		if(a[i]>a[i-1])
		{
			//a[i-1]~a[i]的非零段数加1 
			++b[a[i-1]+1];
			--b[a[i]+1];
		} 
	}
	int ans=0,sum=0;
	for(int i=1;i<=M;++i)
	{
		sum+=b[i];
		ans=max(ans,sum);
	}
	cout<<ans<<endl;
	return 0;
}
```