---
title: 比特位计数
date: 2025-07-19 18:14:33
categories: 机试
math:
tags:
---
## 比特位计数

<!-- TOC -->

- [比特位计数](#比特位计数)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->

[原题](https://leetcode.cn/problems/counting-bits/description/)


### 题目描述
给你一个整数 n ，对于 0 <= i <= n 中的每个 i ，计算其二进制表示中 1 的个数 ，返回一个长度为 n + 1 的数组 ans 作为答案。
```
输入：n = 2
输出：[0,1,1]
解释：
0 --> 0
1 --> 1
2 --> 10
```

### 思路
对于每个数字 `i`，其二进制表示中 1 的个数可以通过 `i & (i - 1)` 来计算。这个操作会将 `i` 的最低位的 1 变为 0，因此可以通过动态规划来计算每个数字的比特位计数。
动态方程可以表示为`dp[i]=dp[i&(i-1)]+1`，其中 `dp[i]` 表示数字 `i` 的比特位计数。

>cpp中可以使用 `__builtin_popcount` 函数来直接计算整数的二进制表示中 1 的个数。
### 代码
```cpp
class Solution {
public:
    vector<int> countBits(int n) {
        vector<int> dp(n+1, 0);
        for (int i=1; i<=n; i++) {
            dp[i] = dp[i&(i-1)] + 1;
            // dp[i]=__builtin_popcount(i);
        }
        return dp;
    }
};
```