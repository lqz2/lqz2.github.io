---
title: 到达首都的最小油耗
date: 2022-11-21 10:52:10
categories: 机试
math:
tags:
---

<!-- TOC -->

- [到达首都的最小油耗](#到达首都的最小油耗)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 到达首都的最小油耗

[原题](https://leetcode.cn/problems/minimum-fuel-cost-to-report-to-the-capital/description/)

### 题目描述
给你一棵 n 个节点的树（一个无向、连通、无环图），每个节点表示一个城市，编号从 0 到 n - 1 ，且恰好有 n - 1 条路。0 是首都。给你一个二维整数数组 roads ，其中 roads[i] = [ai, bi] ，表示城市 ai 和 bi 之间有一条 双向路 。

每个城市里有一个代表，他们都要去首都参加一个会议。

每座城市里有一辆车。给你一个整数 seats 表示每辆车里面座位的数目。

城市里的代表可以选择乘坐所在城市的车，或者乘坐其他城市的车。相邻城市之间一辆车的油耗是一升汽油。

请你返回到达首都最少需要多少升汽油。

示例
```
输入：roads = [[3,1],[3,2],[1,0],[0,4],[0,5],[4,6]], seats = 2
输出：7
解释：
- 代表 2 到达城市 3 ，消耗 1 升汽油。
- 代表 2 和代表 3 一起到达城市 1 ，消耗 1 升汽油。
- 代表 2 和代表 3 一起到达首都，消耗 1 升汽油。
- 代表 1 直接到达首都，消耗 1 升汽油。
- 代表 5 直接到达首都，消耗 1 升汽油。
- 代表 6 到达城市 4 ，消耗 1 升汽油。
- 代表 4 和代表 6 一起到达首都，消耗 1 升汽油。
最少消耗 7 升汽油。
```
### 思路
这道题实际上是在算车的数量，以0为根节点，用dfs来计算所有树对0的贡献值

例如，某个子树如下图:

![fig1](https://pic.leetcode.cn/1668950622-FRRlaR-4.png)

最下面两个节点的贡献各自为1,然后第二层的节点有3个人，而座位数为2，那么贡献值就是2（3/2向上取整）,所以该子树的总贡献是1+1+2=4

### 代码

```
class Solution {
public:
    long long minimumFuelCost(vector<vector<int>>& roads, int seats) {
        int n=roads.size()+1;
        vector<vector<int>> g(n);
        for(auto& t:roads)
        {
            g[t[0]].push_back(t[1]);
            g[t[1]].push_back(t[0]);
        }
        long long ans=0;
        function<int(int,int)> dfs=[&](int t,int par)->int{
            int num=1;
            for(int& c:g[t])
            {
                if(c!=par)
                    num+=dfs(c,t);
            }
            if(t!=0)
                ans+=(num-1)/seats+1;
            return num;
        };
        dfs(0,-1);
        return ans;
    }
};
```