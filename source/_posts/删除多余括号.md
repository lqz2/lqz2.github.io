---
title: 删除多余括号
date: 2025-07-07 20:14:04
categories:
math:
tags:
---
## 删除多余括号

<!-- TOC -->

- [删除多余括号](#删除多余括号)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->

[原题](https://leetcode.cn/problems/remove-invalid-parentheses/description/)

### 题目描述
给你一个由若干括号和字母组成的字符串 s ，删除最小数量的无效括号，使得输入的字符串有效。

返回所有可能的结果。答案可以按 任意顺序 返回。

```
示例 1：

输入：s = "()())()"
输出：["(())()","()()()"]
```
### 思路
主要思路和bfs类似，创建两个set,一个存储当前层的字符串，一个存储下一层的字符串。
- 每次遍历当前层的字符串，检查是否有效，如果有效则加入答案中。
- 如果当前层没有有效字符串，则遍历当前层set中的每个字符串的每个字符，每次删除一个括号，加入下一层set中。


### 代码
```c++
class Solution {
public:
    bool check(string s){
        int cnt=0;
        for(char c:s){
            if(c=='(')
                ++cnt;
            else if(c==')'){
                --cnt;
                if(cnt<0)
                    return false;
            }
        }
        return cnt==0;
    }

    vector<string> removeInvalidParentheses(string s) {
        vector<string> ans;
        unordered_set<string> curst;
        curst.insert(s);
        while(1){
            for(string ss:curst){
                if(check(ss)){
                    ans.push_back(ss);
                }
            }
            if(ans.size()>0)
                return ans;
            unordered_set<string> nextst;
            for(string t:curst){
                for(int i=0;i<t.size();i++){
                    if(i>0&&t[i]==t[i-1])
                        continue;
                    if(t[i]=='('||t[i]==')')
                        nextst.insert(t.substr(0,i)+t.substr(i+1));
                }
            }
            curst=nextst;
        }
    }
};
```