---
title: 统计特殊整数
date: 2022-12-22 11:36:37
categories: 机试
math:
tags:
---
<!-- TOC -->

- [统计特殊整数](#统计特殊整数)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 统计特殊整数
[原题](https://leetcode.cn/problems/count-special-integers/description/)
### 题目描述
如果一个正整数每一个数位都是 互不相同 的，我们称它是 特殊整数 。

给你一个 正 整数 n ，请你返回区间 [1, n] 之间特殊整数的数目。

### 思路
数位dp模板题，需要按位进行分情况讨论.
* 用`dp[i][mask]`记录第i位状态为mask时的数目

* 定义了函数`f(int i,int mask,bool limit,bool isnum)`

* `i`表示当前计算第`i`位，`mask`存储之前使用过得数字，`limit`表示当前位可以取的值是否受限制，`isnum`表示当前位前面是否有数字

具体实现看代码即可
### 代码
```
class Solution {
public:
    int countSpecialNumbers(int n) {
        string s=to_string(n);
        int len=s.size();
        vector<vector<int>> dp(len,vector<int>(1<<10,-1));
        function<int(int,int,bool,bool)> f=[&](int i,int mask,bool limit,bool isnum)->int{
            if(i==len)
                return isnum;
            //剪枝，如果当前位无limit且前面有数字，则可以利用之前计算过的结果
            if(!limit&&isnum&&dp[i][mask]>=0)
                return dp[i][mask];
            int res=0;
            //如果当前位之前没有填数字，跳过当前位
            if(!isnum)
                res=f(i+1,mask,false,false);
            int up,down;
            //如果有limit上界为s[i]，没有则上界为9
            up= limit ? s[i]-'0':9;
            //如果前面的位有数字，下界为0，否则下界为1
            down= isnum ? 0:1;
            
            for(int t=down;t<=up;++t)
            {
                //如果当前数字没用过,则继续
                if((mask>>t&1)==0)
                {
                    res+=f(i+1,mask|1<<t,limit&&t==up,true);
                }
            }
            if(!limit&&isnum)
                 dp[i][mask]=res;
            return res;
        };
        return f(0,0,true,false);
    }
};
```