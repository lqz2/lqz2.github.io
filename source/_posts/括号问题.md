---
title: 括号问题
date: 2022-10-07 11:17:55
categories: 机试
math:
tags:
---
<!-- TOC -->

- [括号匹配](#括号匹配)
- [使括号有效的最少添加](#使括号有效的最少添加)
- [括号生成](#括号生成)
- [括号的分数](#括号的分数)

<!-- /TOC -->

>关于括号多多少少会用到栈，下面举几个简单例子
### 括号匹配
[题目链接](https://leetcode.cn/problems/valid-parentheses/)

**题目描述**

给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效。

有效字符串需满足：

* 左括号必须用相同类型的右括号闭合。
* 左括号必须以正确的顺序闭合。
* 每个右括号都有一个对应的相同类型的左括号。

example：
```
输入：s = "()"
输出：true
```

代码：
```
class Solution {
public:
    bool isValid(string s) {
        int len=s.size();
        stack<char> st;
        for(int i=0;i<len;++i)
        {
            if(st.empty()&&(s[i]==')'||s[i]==']'||s[i]=='}'))
                return false;
            else if(st.empty())
                st.push(s[i]);
            else if(s[i]=='('||s[i]=='['||s[i]=='{')
            {
                // if(s[i]<=st.top())
                    st.push(s[i]);
                // else
                //     return false;
            }
            else if(s[i]==')'||s[i]==']'||s[i]=='}')
            {
                if(st.top()==s[i]-1||st.top()==s[i]-2)
                    st.pop();
                else 
                    return false;
            }
        }
        if(!st.empty())
            return false;
        return true;
    }
};
```


### 使括号有效的最少添加
[题目链接](https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/)

**题目描述**

只有满足下面几点之一，括号字符串才是有效的：

它是一个空字符串，或者
它可以被写成 AB （A 与 B 连接）, 其中 A 和 B 都是有效字符串，或者
它可以被写作 (A)，其中 A 是有效字符串。
给定一个括号字符串 s ，移动N次，你就可以在字符串的任何位置插入一个括号。

例如，如果 s = "()))" ，你可以插入一个开始括号为 "(()))" 或结束括号为 "())))" 。
返回 为使结果字符串 s 有效而必须添加的最少括号数。

example：
```
输入：s = "())"
输出：1
```
代码：
```
class Solution {
public:
    int minAddToMakeValid(string s) {
        int len=s.size();
        stack<char> st;
        int ans=0;
        for(char& c:s)
        {
            if(c=='(')
                st.push(c);
            else if(c==')')
            {
                if(st.empty())
                    ++ans;
                else
                    st.pop();
            }
        }
        return ans+st.size();
    }
};
```

### 括号生成
[题目链接](https://leetcode.cn/problems/generate-parentheses/)

**题目描述**
数字 n 代表生成括号的对数，请你设计一个函数，用于能够生成所有可能的并且有效的括号组合。

example：
```
输入：n = 3
输出：["((()))","(()())","(())()","()(())","()()()"]
```

代码：
```
class Solution {
public:

    void bk(string &tmp,vector<string>& ans,int l,int r,int n)
    {
        if(tmp.size()==2*n)
        {
            ans.push_back(tmp);
            return;
        }
        if(l<n)
        {
            tmp.push_back('(');
            bk(tmp,ans,l+1,r,n);
            tmp.pop_back();
        }
        if(r<l)
        {
            tmp.push_back(')');
            bk(tmp,ans,l,r+1,n);
            tmp.pop_back();
        }
    }

    vector<string> generateParenthesis(int n) {
        string tmp;
        vector<string> ans;
        bk(tmp,ans,0,0,n);
        return ans;
    }
};
```

### 括号的分数

[题目链接](https://leetcode.cn/problems/score-of-parentheses/)

**题目描述**

给定一个平衡括号字符串 S，按下述规则计算该字符串的分数：

* () 得 1 分。```A 是平衡括号字符串。

样例：
```
输入： "(()(()))"
输出： 6
```

**思路**

因为(()(())) = (()) + ((()))，所以记录层数就好 
出现 '(' 代表层数+1 ， 出现 ')' 代表层数-1
当`s[i]==')'&&s[i-1]=='('`,该部分得分为 2^(层数-1) ,更新一下总分数

代码：
```
class Solution {
public:
    int scoreOfParentheses(string s) {
        int ans=0;
        int d=0;
        int len=s.size();
        for(int i=0;i<len;++i)
        {
            if(s[i]=='(')
                ++d;
            else
                --d;
            if(s[i]==')'&&s[i-1]=='(')
                ans+=1<<d;
        }
        return ans;
    }
};
```