---
title: 最长等差数列
date: 2023-04-22 10:30:21
categories: 机试
math:
tags:
---
<!-- TOC -->

- [最长等差数列](#最长等差数列)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 最长等差数列
[原题](https://leetcode.cn/problems/longest-arithmetic-subsequence/description/)
### 题目描述
给你一个整数数组 nums，返回 nums 中最长等差子序列的长度。

回想一下，nums 的子序列是一个列表 nums[i1], nums[i2], ..., nums[ik] ，且 0 <= i1 < i2 < ... < ik <= nums.length - 1。并且如果 seq[i+1] - seq[i]( 0 <= i < seq.length - 1) 的值都相同，那么序列 seq 是等差的。

e.g.
```
输入：nums = [3,6,9,12]
输出：4
解释： 
整个数组是公差为 3 的等差数列。
```
### 思路
这道题其实是[最长递增子序列](https://leetcode.cn/problems/longest-increasing-subsequence/description/)的升级版，只不过加了公差的限制，用`dp[i][d]`表示i位置处公差为d的最长子序列长度，然后遍历`j(j<i)`位置，当`dp[j][d]+1>dp[i][d]`时更新`dp[i][d]`，返回整个过程最大长度即可。
### 代码
```
class Solution {
public:
    int longestArithSeqLength(vector<int>& nums) {
        int n=nums.size();
        int ans=0;
        vector<vector<int>> dp(n,vector<int>(1001,1));
        for(int i=0;i<n;++i)
        {
            for(int j=0;j<i;++j)
            {
                int d=nums[i]-nums[j]+500;
                dp[i][d]=max(dp[i][d],dp[j][d]+1);
                ans=max(ans,dp[i][d]);
            }
        }
        return ans;
    }
};
```