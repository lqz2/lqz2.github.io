---
title: 最短公共超序列
date: 2023-03-28 08:59:27
categories: 机试
math:
tags:
---
<!-- TOC -->

- [最短公共超序列](#最短公共超序列)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->
## 最短公共超序列
[原题](https://leetcode.cn/problems/shortest-common-supersequence/description/)
### 题目描述
给出两个字符串 str1 和 str2，返回同时以 str1 和 str2 作为子序列的最短字符串。如果答案不止一个，则可以返回满足条件的任意一个答案。

（如果从字符串 T 中删除一些字符（也可能不删除，并且选出的这些字符可以位于 T 中的 任意位置），可以得到字符串 S，那么 S 就是 T 的子序列）

e.g.
```
输入：str1 = "abac", str2 = "cab"
输出："cabac"
解释：
str1 = "abac" 是 "cabac" 的一个子串，因为我们可以删去 "cabac" 的第一个 "c"得到 "abac"。 
str2 = "cab" 是 "cabac" 的一个子串，因为我们可以删去 "cabac" 末尾的 "ac" 得到 "cab"。
最终我们给出的答案是满足上述属性的最短字符串
```
### 思路
如果想要构成的超序列最短，那么公共的子串部分就要尽可能长，因此先求两个字符串最长公共子串的dp数组。得到之后需要构造最短公共超序列，若要满足最短条件，那么公共部分就要尽可能长，因此从右至左选择字符时，当`str[i]==str[j]`，同时`--i;--j`，如果不相等，则优先选择不会损失dp数组的字符，例如如果`dp[i-1][j]>dp[i][j-1]`，说明选择str1[i]不会损失dp数组，也就是不会影响当当前位置的最长公共子串，因此选择str1[i]。当有一个字符串先到达左端点时退出循环，然后构造剩余部分即可。
### 代码
```
class Solution {
public:
    string shortestCommonSupersequence(string str1, string str2) {
        int m=str1.size(),n=str2.size();
        vector<vector<int>> dp(m+1,vector<int>(n+1));
        for(int i=1;i<=m;++i)
        {
            for(int j=1;j<=n;++j)
            {
                if(str1[i-1]==str2[j-1])
                    dp[i][j]=dp[i-1][j-1]+1;
                else
                    dp[i][j]=max(dp[i-1][j],dp[i][j-1]);
            }
        }
        string res;
        int i=m,j=n;
        while(i>0&&j>0)
        {
            if(str1[i-1]==str2[j-1])
            {
                res+=str1[i-1];
                --i;
                --j;
            }
            else if(dp[i-1][j]>dp[i][j-1])
            {
                res+=str1[i-1];
                --i;
            }
            else
            {
                res+=str2[j-1];
                --j;
            }
        }
        while(i>0)
        {
            res+=str1[i-1];
            --i;
        }
        while(j>0)
        {
            res+=str2[j-1];
            --j;
        }
        reverse(res.begin(),res.end());
        return res;
    }
};
```