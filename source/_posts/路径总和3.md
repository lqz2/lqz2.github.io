---
title: 路径总和3
date: 2024-12-27 10:20:19
categories: 机试
math:
tags:
---
## 路径总和3

<!-- TOC -->

- [路径总和3](#路径总和3)
    - [题目描述](#题目描述)
    - [思路](#思路)
    - [代码](#代码)

<!-- /TOC -->

[原题](https://leetcode.cn/problems/path-sum-iii/description)


### 题目描述
给定一个二叉树的根节点 root ，和一个整数 targetSum ，求该二叉树里节点值之和等于 targetSum 的 路径 的数目。

路径 不需要从根节点开始，也不需要在叶子节点结束，但是路径方向必须是向下的（只能从父节点到子节点）。

```
输入：root = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
输出：3
```
### 思路
这道题实际是二叉树版的和为k的子数组，还是需要用前缀和和哈希表的思想解决，参考[这里](https://lqz2.github.io/2024/12/18/%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/)
要注意的是，由于题目规定只能向下，也就是说遍历右子树之前，要回退左子树的数据，也就是在最后加上`--mp[sum]`
### 代码
```
class Solution {
public:
    unordered_map<long long,int> mp;
    void dfs(TreeNode* t,long long sum, int k, int &ans){
        if(t==nullptr)
            return ;
        sum+=t->val;
        ans+=mp[sum-k];
        ++mp[sum];
        dfs(t->left,sum,k,ans);
        dfs(t->right,sum,k,ans);
        --mp[sum];
    }
    int pathSum(TreeNode* root, int targetSum) {
        int ans=0;
        mp[0]=1;
        dfs(root,0,targetSum,ans);
        return ans;
    }
};
```